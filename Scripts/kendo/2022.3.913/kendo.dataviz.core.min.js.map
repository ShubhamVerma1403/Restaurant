{"version":3,"file":"kendo.dataviz.core.min.js","sources":["kendo.dataviz.core.js"],"sourcesContent":["/***********************************************************************\n * WARNING: this file is auto-generated.  If you change it directly,\n * your modifications will eventually be lost.  The source code is in\n * `kendo-charts` repository, you should make your changes there and\n * run `src-modules/sync.sh` in this repository.\n */\n(function(f, define) {\n    define('dataviz/core/kendo-core',[\n        \"kendo.core\",\n        \"kendo.drawing\"\n    ], f);\n})(function() {\n\n(function($) {\n/* eslint-disable space-before-blocks, space-before-function-paren, curly */\n\nwindow.kendo.dataviz = window.kendo.dataviz || {};\nvar drawing = kendo.drawing;\nvar util = drawing.util;\nvar Path = drawing.Path;\nvar Group = drawing.Group;\nvar Class = kendo.Class;\nvar support = kendo.support;\nvar geometry = kendo.geometry;\nvar Rect = geometry.Rect;\nvar Circle = geometry.Circle;\nvar geometryTransform = geometry.transform;\nvar Segment = geometry.Segment;\nvar dataviz = kendo.dataviz;\n\nvar deepExtend = kendo.deepExtend;\nvar isFunction = kendo.isFunction;\nvar __common_getter_js = kendo.getter;\n\nvar ARC = \"arc\";\nvar AXIS_LABEL_CLICK = \"axisLabelClick\";\nvar BLACK = \"#000\";\nvar BOTTOM = \"bottom\";\nvar CENTER = \"center\";\nvar CIRCLE = \"circle\";\nvar COORD_PRECISION = 3;\nvar CROSS = \"cross\";\nvar DATE = \"date\";\nvar DEFAULT_FONT = \"12px sans-serif\";\nvar DEFAULT_HEIGHT = 400;\nvar DEFAULT_PRECISION = 10;\nvar DEFAULT_WIDTH = 600;\nvar END = \"end\";\nvar FORMAT_REGEX = /\\{\\d+:?/;\nvar HEIGHT = \"height\";\nvar HIGHLIGHT_ZINDEX = 100;\nvar INSIDE = \"inside\";\nvar LEFT = \"left\";\nvar MAX_VALUE = Number.MAX_VALUE;\nvar MIN_VALUE = -Number.MAX_VALUE;\nvar NONE = \"none\";\nvar NOTE_CLICK = \"noteClick\";\nvar NOTE_HOVER = \"noteHover\";\nvar NOTE_LEAVE = \"noteLeave\";\nvar OBJECT = \"object\";\nvar OUTSIDE = \"outside\";\nvar RIGHT = \"right\";\nvar ROUNDED_RECT = \"roundedRect\";\nvar START = \"start\";\nvar STRING = \"string\";\nvar TOP = \"top\";\nvar TRIANGLE = \"triangle\";\nvar VALUE = \"value\";\nvar WHITE = \"#fff\";\nvar WIDTH = \"width\";\nvar X = \"x\";\nvar Y = \"y\";\nvar DEFAULT_SERIES_OPACITY = 1;\n\nvar constants = {\n\tARC: ARC,\n\tAXIS_LABEL_CLICK: AXIS_LABEL_CLICK,\n\tBLACK: BLACK,\n\tBOTTOM: BOTTOM,\n\tCENTER: CENTER,\n\tCIRCLE: CIRCLE,\n\tCOORD_PRECISION: COORD_PRECISION,\n\tCROSS: CROSS,\n\tDATE: DATE,\n\tDEFAULT_FONT: DEFAULT_FONT,\n\tDEFAULT_HEIGHT: DEFAULT_HEIGHT,\n\tDEFAULT_PRECISION: DEFAULT_PRECISION,\n\tDEFAULT_WIDTH: DEFAULT_WIDTH,\n\tEND: END,\n\tFORMAT_REGEX: FORMAT_REGEX,\n\tHEIGHT: HEIGHT,\n\tHIGHLIGHT_ZINDEX: HIGHLIGHT_ZINDEX,\n\tINSIDE: INSIDE,\n\tLEFT: LEFT,\n\tMAX_VALUE: MAX_VALUE,\n\tMIN_VALUE: MIN_VALUE,\n\tNONE: NONE,\n\tNOTE_CLICK: NOTE_CLICK,\n\tNOTE_HOVER: NOTE_HOVER,\n\tNOTE_LEAVE: NOTE_LEAVE,\n\tOBJECT: OBJECT,\n\tOUTSIDE: OUTSIDE,\n\tRIGHT: RIGHT,\n\tROUNDED_RECT: ROUNDED_RECT,\n\tSTART: START,\n\tSTRING: STRING,\n\tTOP: TOP,\n\tTRIANGLE: TRIANGLE,\n\tVALUE: VALUE,\n\tWHITE: WHITE,\n\tWIDTH: WIDTH,\n\tX: X,\n\tY: Y,\n\tDEFAULT_SERIES_OPACITY: DEFAULT_SERIES_OPACITY\n};\n\nfunction isArray(value) {\n    return Array.isArray(value);\n}\n\nfunction addClass(element, classes) {\n    var classArray = isArray(classes) ? classes : [ classes ];\n\n    for (var idx = 0; idx < classArray.length; idx++) {\n        var className = classArray[idx];\n        if (element.className.indexOf(className) === -1) {\n            element.className += \" \" + className;\n        }\n    }\n}\n\nvar SPACE_REGEX = /\\s+/g;\n\nfunction removeClass(element, className) {\n    if (element && element.className) {\n        element.className = element.className.replace(className, \"\").replace(SPACE_REGEX, \" \");\n    }\n}\n\nfunction alignPathToPixel(path) {\n    var offset = 0.5;\n    if (path.options.stroke && kendo.drawing.util.defined(path.options.stroke.width)) {\n        if (path.options.stroke.width % 2 === 0) {\n            offset = 0;\n        }\n    }\n\n    for (var i = 0; i < path.segments.length; i++) {\n        path.segments[i].anchor().round(0).translate(offset, offset);\n    }\n\n    return path;\n}\n\nfunction clockwise(angle1, angle2) {\n    // True if angle2 is clockwise of angle1\n    // assuming angles grow in clock-wise direction\n    // (as in the pie and radar charts)\n    return -angle1.x * angle2.y + angle1.y * angle2.x < 0;\n}\n\nfunction isNumber(value) {\n    return typeof value === \"number\" && !isNaN(value);\n}\n\nfunction isString(value) {\n    return typeof value === STRING;\n}\n\nfunction convertableToNumber(value) {\n    return isNumber(value) || (isString(value) && isFinite(value));\n}\n\nfunction isObject(value) {\n    return typeof value === \"object\";\n}\n\nfunction styleValue(value) {\n    if (isNumber(value)) {\n        return value + \"px\";\n    }\n    return value;\n}\n\nvar SIZE_STYLES_REGEX = /width|height|top|left|bottom|right/i;\n\nfunction isSizeField(field) {\n    return SIZE_STYLES_REGEX.test(field);\n}\n\nfunction elementStyles(element, styles) {\n    var stylesArray = isString(styles) ? [ styles ] : styles;\n\n    if (isArray(stylesArray)) {\n        var result = {};\n        var style = window.getComputedStyle(element);\n\n        for (var idx = 0; idx < stylesArray.length; idx++) {\n            var field = stylesArray[idx];\n            result[field] = isSizeField(field) ? parseFloat(style[field]) : style[field];\n        }\n\n        return result;\n    } else if (isObject(styles)) {\n        for (var field$1 in styles) {\n            element.style[field$1] = styleValue(styles[field$1]);\n        }\n    }\n}\n\nfunction getSpacing(value, defaultSpacing) {\n    if (defaultSpacing === void 0) { defaultSpacing = 0; }\n\n    var spacing = { top: 0, right: 0, bottom: 0, left: 0 };\n\n    if (typeof(value) === \"number\") {\n        spacing[TOP] = spacing[RIGHT] = spacing[BOTTOM] = spacing[LEFT] = value;\n    } else {\n        spacing[TOP] = value[TOP] || defaultSpacing;\n        spacing[RIGHT] = value[RIGHT] || defaultSpacing;\n        spacing[BOTTOM] = value[BOTTOM] || defaultSpacing;\n        spacing[LEFT] = value[LEFT] || defaultSpacing;\n    }\n\n    return spacing;\n}\n\nvar current = {\n    compile: function(template) {\n        return template;\n    }\n};\n\nvar TemplateService = Class.extend({\n\n});\n\nTemplateService.register = function(userImplementation) {\n    current = userImplementation;\n};\n\nTemplateService.compile = function(template) {\n    return current.compile(template);\n};\n\nfunction getTemplate(options) {\n    if (options === void 0) { options = {}; }\n\n    var template;\n    if (options.template) {\n        options.template = template = TemplateService.compile(options.template);\n    } else if (isFunction(options.content)) {\n        template = options.content;\n    }\n\n    return template;\n}\n\nfunction grep(array, callback) {\n    var length = array.length;\n    var result = [];\n    for (var idx = 0; idx < length; idx++) {\n        if (callback(array[idx])) {\n            result .push(array[idx]);\n        }\n    }\n\n    return result;\n}\n\nfunction hasClasses(element, classNames) {\n    if (element.className) {\n        var names = classNames.split(\" \");\n        for (var idx = 0; idx < names.length; idx++) {\n            if (element.className.indexOf(names[idx]) !== -1) {\n                return true;\n            }\n        }\n    }\n}\n\nvar HashMap = function HashMap() {\n    this._map = {};\n};\n\nHashMap.prototype.get = function get (name) {\n    return this._map[this._key(name)];\n};\n\nHashMap.prototype.set = function set (name, value) {\n    this._map[this._key(name)] = value;\n};\n\nHashMap.prototype._key = function _key (name) {\n    return name instanceof Date ? name.getTime() : name;\n};\n\nfunction inArray(value, array) {\n    if (array) {\n        return array.indexOf(value) !== -1;\n    }\n}\n\nfunction interpolateValue(start, end, progress) {\n    return kendo.drawing.util.round(start + (end - start) * progress, COORD_PRECISION);\n}\n\nvar TRIGGER = 'trigger';\n\nvar InstanceObserver = Class.extend({\n    init: function(observer, handlers) {\n        this.observer = observer;\n        this.handlerMap = deepExtend({}, this.handlerMap, handlers);\n    },\n\n    trigger: function(name, args) {\n        var ref = this;\n        var observer = ref.observer;\n        var handlerMap = ref.handlerMap;\n        var isDefaultPrevented;\n        if (handlerMap[name]) {\n            isDefaultPrevented = this.callObserver(handlerMap[name], args);\n        } else if (observer[TRIGGER]) {\n            isDefaultPrevented = this.callObserver(TRIGGER, name, args);\n        }\n\n        return isDefaultPrevented;\n    },\n\n    callObserver: function(fnName) {\n        var args = [], len = arguments.length - 1;\n        while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n        return this.observer[fnName].apply(this.observer, args);\n    },\n\n    requiresHandlers: function(names) {\n        var this$1 = this;\n\n        if (this.observer.requiresHandlers) {\n            return this.observer.requiresHandlers(names);\n        }\n\n        for (var idx = 0; idx < names.length; idx++) {\n            if (this$1.handlerMap[names[idx]]) {\n                return true;\n            }\n        }\n    }\n});\n\nfunction map(array, callback) {\n    var length = array.length;\n    var result = [];\n    for (var idx = 0; idx < length; idx++) {\n        var value = callback(array[idx]);\n        if (kendo.drawing.util.defined(value)) {\n            result.push(value);\n        }\n    }\n    return result;\n}\n\nvar browser = support.browser || {};\n\nfunction mousewheelDelta(e) {\n    var delta = 0;\n\n    if (e.wheelDelta) {\n        delta = -e.wheelDelta / 120;\n\n        if (browser.webkit) {\n            // Webkit browsers scale the delta by twice the device resolution.\n            // Possibly related to https://bugs.webkit.org/show_bug.cgi?id=196339\n            //\n            // Low device resolutions (e.g. zoom-out to 30%) also behave strangely.\n            delta = delta / (2 * Math.max(window.devicePixelRatio, 0.625));\n        }\n    } else if (e.detail) {\n        delta = e.detail / 3;\n    }\n\n    delta = delta > 0 ? Math.ceil(delta) : Math.floor(delta);\n\n    return delta;\n}\n\nvar ref = kendo.drawing.util;\nvar append = ref.append;\nvar bindEvents = ref.bindEvents;\nvar defined = ref.defined;\nvar deg = ref.deg;\nvar elementOffset = ref.elementOffset;\nvar elementSize = ref.elementSize;\nvar eventCoordinates = ref.eventCoordinates;\nvar eventElement = ref.eventElement;\nvar hashKey = ref.hashKey;\nvar last = ref.last;\nvar limitValue = ref.limitValue;\nvar objectKey = ref.objectKey;\nvar rad = ref.rad;\nvar round = ref.round;\nvar unbindEvents = ref.unbindEvents;\nvar valueOrDefault = ref.valueOrDefault;\n\nvar FontLoader = Class.extend({\n\n});\n\nFontLoader.fetchFonts = function(options, fonts, state) {\n    if (state === void 0) { state = { depth: 0 }; }\n\n    var MAX_DEPTH = 5;\n\n    if (!options || state.depth > MAX_DEPTH || !document.fonts) {\n        return;\n    }\n\n    Object.keys(options).forEach(function(key) {\n        var value = options[key];\n        if (key === \"dataSource\" || key[0] === \"$\" || !value) {\n            return;\n        }\n\n        if (key === \"font\") {\n            fonts.push(value);\n        } else if (typeof value === \"object\") {\n            state.depth++;\n            FontLoader.fetchFonts(value, fonts, state);\n            state.depth--;\n        }\n    });\n};\n\nFontLoader.loadFonts = function(fonts, callback) {\n    var promises = [];\n\n    if (fonts.length > 0 && document.fonts) {\n        try {\n            promises = fonts.map(function(font) {\n                return document.fonts.load(font);\n            });\n        } catch (e) {\n            // Silence font-loading errors\n            kendo.logToConsole(e);\n        }\n\n        Promise.all(promises).then(callback, callback);\n    } else {\n        callback();\n    }\n};\n\nFontLoader.preloadFonts = function(options, callback) {\n    var fonts = [];\n    FontLoader.fetchFonts(options, fonts);\n\n    FontLoader.loadFonts(fonts, callback);\n};\n\nfunction setDefaultOptions(type, options) {\n    var proto = type.prototype;\n    if (proto.options) {\n        proto.options = deepExtend({}, proto.options, options);\n    } else {\n        proto.options = options;\n    }\n}\n\nfunction sparseArrayLimits(arr) {\n    var min = MAX_VALUE;\n    var max = MIN_VALUE;\n\n    for (var idx = 0, length = arr.length; idx < length; idx++) {\n        var value = arr[idx];\n        if (value !== null && isFinite(value)) {\n            min = Math.min(min, value);\n            max = Math.max(max, value);\n        }\n    }\n\n    return {\n        min: min === MAX_VALUE ? undefined : min,\n        max: max === MIN_VALUE ? undefined : max\n    };\n}\n\nfunction find(array, predicate) {\n    for (var i = 0; i < array.length; i++) {\n        var item = array[i];\n        if (predicate(item, i, array)) {\n            return item;\n        }\n    }\n}\n\nvar Matrix = geometry.Matrix;\nvar matrixRegexp = /matrix\\((.*)\\)/;\n\nfunction parseMatrix(matrixString) {\n    var match = matrixString.match(matrixRegexp);\n    if (match === null || match.length !== 2) {\n        return Matrix.unit();\n    }\n\n    var members = match[1].split(',').map(function (x) { return parseFloat(x); });\n    return new (Function.prototype.bind.apply( Matrix, [ null ].concat( members) ));\n}\n\nfunction transformMatrix(element) {\n    var transform = getComputedStyle(element).transform;\n\n    if (transform === 'none') {\n        return Matrix.unit();\n    }\n\n    return parseMatrix(transform);\n}\n\nfunction elementScale(element) {\n    if (!element) {\n        return Matrix.unit();\n    }\n\n    var matrix = transformMatrix(element);\n    var parent = element.parentElement;\n    while (parent) {\n        var parentMatrix = transformMatrix(parent);\n        matrix = matrix.multiplyCopy(parentMatrix);\n        parent = parent.parentElement;\n    }\n\n    matrix.b = matrix.c = matrix.e = matrix.f = 0;\n    return matrix;\n}\n\nfunction autoTextColor(color) {\n    var isDark = new kendo.Color(color).isDark();\n    if (isDark) {\n        return WHITE;\n    }\n\n    return BLACK;\n}\n\nvar DELETED = {};\n\nvar LegacySet = Class.extend({\n    init: function(values) {\n        var this$1 = this;\n\n        this._index = {};\n        this._values = values ? values.slice(0) : [];\n\n        for (var i = 0; i < this._values.length; i++) {\n            this$1._index[this$1._values[i]] = i;\n        }\n    },\n\n    values: function() {\n        return this._values.filter(function (item) { return item !== DELETED; });\n    },\n\n    has: function(value) {\n        return this._index[value] !== undefined;\n    },\n\n    add: function(value) {\n        if (!this.has(value)) {\n            this._index[value] = this._values.length;\n            this._values.push(value);\n        }\n    },\n\n    delete: function(value) {\n        var index = this._index[value];\n        if (index !== undefined) {\n            this._values[index] = DELETED;\n            delete this._index[value];\n        }\n    },\n\n    clear: function() {\n        this._index = {};\n        this._values = [];\n    }\n});\n\nif (Object.defineProperties) {\n    Object.defineProperties(LegacySet.fn, {\n        size: {\n            get: function() {\n                return this._values.length;\n            }\n        }\n    });\n}\n\nvar SetWrapper = Class.extend({\n    init: function(values) {\n        this._set = new Set(values);\n    },\n\n    values: function() {\n        return Array.from(this._set);\n    },\n\n    has: function(value) {\n        return this._set.has(value);\n    },\n\n    add: function(value) {\n        this._set.add(value);\n    },\n\n    delete: function(value) {\n        this._set.delete(value);\n    },\n\n    clear: function() {\n        this._set.clear();\n    }\n});\n\nif (Object.defineProperties) {\n    Object.defineProperties(SetWrapper.fn, {\n        size: {\n            get: function() {\n                return this._set.size;\n            }\n        }\n    });\n}\n\n// TODO: Drop LegacySet when removing support for IE10\nvar supportsSet = function () {\n    var supported = false;\n\n    if (typeof Set === 'function') {\n        var set = new Set([1]);\n        supported = set.has(1);\n    }\n\n    return supported;\n};\n\nfunction createHashSet(values) {\n    if (supportsSet()) {\n        return new SetWrapper(values);\n    }\n\n    return new LegacySet(values);\n}\n\nfunction defaultErrorHandler(error) {\n    throw error;\n}\n\nvar keys = {\n    INSERT: 45,\n    DELETE: 46,\n    BACKSPACE: 8,\n    TAB: 9,\n    ENTER: 13,\n    ESC: 27,\n    LEFT: 37,\n    UP: 38,\n    RIGHT: 39,\n    DOWN: 40,\n    END: 35,\n    HOME: 36,\n    SPACEBAR: 32,\n    PAGEUP: 33,\n    PAGEDOWN: 34,\n    F2: 113,\n    F10: 121,\n    F12: 123,\n    NUMPAD_PLUS: 107,\n    NUMPAD_MINUS: 109,\n    NUMPAD_DOT: 110\n};\n\nfunction autoMajorUnit(min, max) {\n    var diff = round(max - min, DEFAULT_PRECISION - 1);\n\n    if (diff === 0) {\n        if (max === 0) {\n            return 0.1;\n        }\n\n        diff = Math.abs(max);\n    }\n\n    var scale = Math.pow(10, Math.floor(Math.log(diff) / Math.log(10)));\n    var relativeValue = round((diff / scale), DEFAULT_PRECISION);\n    var scaleMultiplier = 1;\n\n    if (relativeValue < 1.904762) {\n        scaleMultiplier = 0.2;\n    } else if (relativeValue < 4.761904) {\n        scaleMultiplier = 0.5;\n    } else if (relativeValue < 9.523809) {\n        scaleMultiplier = 1;\n    } else {\n        scaleMultiplier = 2;\n    }\n\n    return round(scale * scaleMultiplier, DEFAULT_PRECISION);\n}\n\nvar Point = Class.extend({\n    init: function(x, y) {\n\n        this.x = x || 0;\n        this.y = y || 0;\n    },\n\n    clone: function() {\n        return new Point(this.x, this.y);\n    },\n\n    equals: function(point) {\n        return point && this.x === point.x && this.y === point.y;\n    },\n\n    rotate: function(center, degrees) {\n        var theta = rad(degrees);\n        var cosT = Math.cos(theta);\n        var sinT = Math.sin(theta);\n        var cx = center.x;\n        var cy = center.y;\n        var ref = this;\n        var x = ref.x;\n        var y = ref.y;\n\n        this.x = round(\n            cx + (x - cx) * cosT + (y - cy) * sinT,\n            COORD_PRECISION\n        );\n\n        this.y = round(\n            cy + (y - cy) * cosT - (x - cx) * sinT,\n            COORD_PRECISION\n        );\n\n        return this;\n    },\n\n    multiply: function(a) {\n\n        this.x *= a;\n        this.y *= a;\n\n        return this;\n    },\n\n    distanceTo: function(point) {\n        var dx = this.x - point.x;\n        var dy = this.y - point.y;\n\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n});\n\nPoint.onCircle = function(center, angle, radius) {\n    var radians = rad(angle);\n\n    return new Point(\n        center.x - radius * Math.cos(radians),\n        center.y - radius * Math.sin(radians)\n    );\n};\n\nvar Box = Class.extend({\n    init: function(x1, y1, x2, y2) {\n\n        this.x1 = x1 || 0;\n        this.y1 = y1 || 0;\n        this.x2 = x2 || 0;\n        this.y2 = y2 || 0;\n    },\n\n    equals: function(box) {\n        return this.x1 === box.x1 && this.x2 === box.x2 &&\n            this.y1 === box.y1 && this.y2 === box.y2;\n    },\n\n    width: function() {\n        return this.x2 - this.x1;\n    },\n\n    height: function() {\n        return this.y2 - this.y1;\n    },\n\n    translate: function(dx, dy) {\n        this.x1 += dx;\n        this.x2 += dx;\n        this.y1 += dy;\n        this.y2 += dy;\n\n        return this;\n    },\n\n    move: function(x, y) {\n        var height = this.height();\n        var width = this.width();\n\n        if (defined(x)) {\n            this.x1 = x;\n            this.x2 = this.x1 + width;\n        }\n\n        if (defined(y)) {\n            this.y1 = y;\n            this.y2 = this.y1 + height;\n        }\n\n        return this;\n    },\n\n    wrap: function(targetBox) {\n        this.x1 = Math.min(this.x1, targetBox.x1);\n        this.y1 = Math.min(this.y1, targetBox.y1);\n        this.x2 = Math.max(this.x2, targetBox.x2);\n        this.y2 = Math.max(this.y2, targetBox.y2);\n\n        return this;\n    },\n\n    wrapPoint: function(point) {\n        var arrayPoint = isArray(point);\n        var x = arrayPoint ? point[0] : point.x;\n        var y = arrayPoint ? point[1] : point.y;\n        this.wrap(new Box(x, y, x, y));\n\n        return this;\n    },\n\n    snapTo: function(targetBox, axis) {\n\n        if (axis === X || !axis) {\n            this.x1 = targetBox.x1;\n            this.x2 = targetBox.x2;\n        }\n\n        if (axis === Y || !axis) {\n            this.y1 = targetBox.y1;\n            this.y2 = targetBox.y2;\n        }\n\n        return this;\n    },\n\n    alignTo: function(targetBox, anchor) {\n        var height = this.height();\n        var width = this.width();\n        var axis = anchor === TOP || anchor === BOTTOM ? Y : X;\n        var offset = axis === Y ? height : width;\n\n        if (anchor === CENTER) {\n            var targetCenter = targetBox.center();\n            var center = this.center();\n\n            this.x1 += targetCenter.x - center.x;\n            this.y1 += targetCenter.y - center.y;\n        } else if (anchor === TOP || anchor === LEFT) {\n            this[axis + 1] = targetBox[axis + 1] - offset;\n        } else {\n            this[axis + 1] = targetBox[axis + 2];\n        }\n\n        this.x2 = this.x1 + width;\n        this.y2 = this.y1 + height;\n\n        return this;\n    },\n\n    shrink: function(dw, dh) {\n\n        this.x2 -= dw;\n        this.y2 -= dh;\n\n        return this;\n    },\n\n    expand: function(dw, dh) {\n        this.shrink(-dw, -dh);\n        return this;\n    },\n\n    pad: function(padding) {\n        var spacing = getSpacing(padding);\n\n        this.x1 -= spacing.left;\n        this.x2 += spacing.right;\n        this.y1 -= spacing.top;\n        this.y2 += spacing.bottom;\n\n        return this;\n    },\n\n    unpad: function(padding) {\n        var spacing = getSpacing(padding);\n\n        spacing.left = -spacing.left;\n        spacing.top = -spacing.top;\n        spacing.right = -spacing.right;\n        spacing.bottom = -spacing.bottom;\n\n        return this.pad(spacing);\n    },\n\n    clone: function() {\n        return new Box(this.x1, this.y1, this.x2, this.y2);\n    },\n\n    center: function() {\n        return new Point(\n            this.x1 + this.width() / 2,\n            this.y1 + this.height() / 2\n        );\n    },\n\n    containsPoint: function(point) {\n\n        return point.x >= this.x1 && point.x <= this.x2 &&\n               point.y >= this.y1 && point.y <= this.y2;\n    },\n\n    points: function() {\n        return [\n            new Point(this.x1, this.y1),\n            new Point(this.x2, this.y1),\n            new Point(this.x2, this.y2),\n            new Point(this.x1, this.y2)\n        ];\n    },\n\n    getHash: function() {\n        return [ this.x1, this.y1, this.x2, this.y2 ].join(\",\");\n    },\n\n    overlaps: function(box) {\n        return !(box.y2 < this.y1 || this.y2 < box.y1 || box.x2 < this.x1 || this.x2 < box.x1);\n    },\n\n    rotate: function(rotation) {\n        var width = this.width();\n        var height = this.height();\n        var ref = this.center();\n        var cx = ref.x;\n        var cy = ref.y;\n\n        var r1 = rotatePoint(0, 0, cx, cy, rotation);\n        var r2 = rotatePoint(width, 0, cx, cy, rotation);\n        var r3 = rotatePoint(width, height, cx, cy, rotation);\n        var r4 = rotatePoint(0, height, cx, cy, rotation);\n\n        width = Math.max(r1.x, r2.x, r3.x, r4.x) - Math.min(r1.x, r2.x, r3.x, r4.x);\n        height = Math.max(r1.y, r2.y, r3.y, r4.y) - Math.min(r1.y, r2.y, r3.y, r4.y);\n\n        this.x2 = this.x1 + width;\n        this.y2 = this.y1 + height;\n\n        return this;\n    },\n\n    toRect: function() {\n        return new Rect([ this.x1, this.y1 ], [ this.width(), this.height() ]);\n    },\n\n    hasSize: function() {\n        return this.width() !== 0 && this.height() !== 0;\n    },\n\n    align: function(targetBox, axis, alignment) {\n        var c1 = axis + 1;\n        var c2 = axis + 2;\n        var sizeFunc = axis === X ? WIDTH : HEIGHT;\n        var size = this[sizeFunc]();\n\n        if (inArray(alignment, [ LEFT, TOP ])) {\n            this[c1] = targetBox[c1];\n            this[c2] = this[c1] + size;\n        } else if (inArray(alignment, [ RIGHT, BOTTOM ])) {\n            this[c2] = targetBox[c2];\n            this[c1] = this[c2] - size;\n        } else if (alignment === CENTER) {\n            this[c1] = targetBox[c1] + (targetBox[sizeFunc]() - size) / 2;\n            this[c2] = this[c1] + size;\n        }\n    }\n});\n\nfunction rotatePoint(x, y, cx, cy, angle) {\n    var theta = rad(angle);\n\n    return new Point(\n        cx + (x - cx) * Math.cos(theta) + (y - cy) * Math.sin(theta),\n        cy - (x - cx) * Math.sin(theta) + (y - cy) * Math.cos(theta)\n    );\n}\n\nvar Ring = Class.extend({\n    init: function(center, innerRadius, radius, startAngle, angle) {\n\n        this.center = center;\n        this.innerRadius = innerRadius;\n        this.radius = radius;\n        this.startAngle = startAngle;\n        this.angle = angle;\n    },\n\n    clone: function() {\n        return new Ring(this.center, this.innerRadius, this.radius, this.startAngle, this.angle);\n    },\n\n    middle: function() {\n        return this.startAngle + this.angle / 2;\n    },\n\n    setRadius: function(newRadius, innerRadius) {\n        if (innerRadius) {\n            this.innerRadius = newRadius;\n        } else {\n            this.radius = newRadius;\n        }\n\n        return this;\n    },\n\n    point: function(angle, innerRadius) {\n        var radianAngle = rad(angle);\n        var ax = Math.cos(radianAngle);\n        var ay = Math.sin(radianAngle);\n        var radius = innerRadius ? this.innerRadius : this.radius;\n        var x = round(this.center.x - (ax * radius), COORD_PRECISION);\n        var y = round(this.center.y - (ay * radius), COORD_PRECISION);\n\n        return new Point(x, y);\n    },\n\n    adjacentBox: function(distance, width, height) {\n        var sector = this.clone().expand(distance);\n        var midAndle = sector.middle();\n        var midPoint = sector.point(midAndle);\n        var hw = width / 2;\n        var hh = height / 2;\n        var sa = Math.sin(rad(midAndle));\n        var ca = Math.cos(rad(midAndle));\n        var x = midPoint.x - hw;\n        var y = midPoint.y - hh;\n\n        if (Math.abs(sa) < 0.9) {\n            x += hw * -ca / Math.abs(ca);\n        }\n\n        if (Math.abs(ca) < 0.9) {\n            y += hh * -sa / Math.abs(sa);\n        }\n\n        return new Box(x, y, x + width, y + height);\n    },\n\n    containsPoint: function(p) {\n        var center = this.center;\n        var innerRadius = this.innerRadius;\n        var radius = this.radius;\n        var startAngle = this.startAngle;\n        var endAngle = this.startAngle + this.angle;\n        var dx = p.x - center.x;\n        var dy = p.y - center.y;\n        var vector = new Point(dx, dy);\n        var startPoint = this.point(startAngle);\n        var startVector = new Point(startPoint.x - center.x, startPoint.y - center.y);\n        var endPoint = this.point(endAngle);\n        var endVector = new Point(endPoint.x - center.x, endPoint.y - center.y);\n        var dist = round(dx * dx + dy * dy, COORD_PRECISION);\n\n        return (startVector.equals(vector) || clockwise(startVector, vector)) &&\n               !clockwise(endVector, vector) &&\n               dist >= innerRadius * innerRadius && dist <= radius * radius;\n    },\n\n    getBBox: function() {\n        var this$1 = this;\n\n        var box = new Box(MAX_VALUE, MAX_VALUE, MIN_VALUE, MIN_VALUE);\n        var startAngle = round(this.startAngle % 360);\n        var endAngle = round((startAngle + this.angle) % 360);\n        var innerRadius = this.innerRadius;\n        var allAngles = [ 0, 90, 180, 270, startAngle, endAngle ].sort(numericComparer);\n        var startAngleIndex = allAngles.indexOf(startAngle);\n        var endAngleIndex = allAngles.indexOf(endAngle);\n        var angles;\n\n        if (startAngle === endAngle) {\n            angles = allAngles;\n        } else {\n            if (startAngleIndex < endAngleIndex) {\n                angles = allAngles.slice(startAngleIndex, endAngleIndex + 1);\n            } else {\n                angles = [].concat(\n                    allAngles.slice(0, endAngleIndex + 1),\n                    allAngles.slice(startAngleIndex, allAngles.length)\n                );\n            }\n        }\n\n        for (var i = 0; i < angles.length; i++) {\n            var point = this$1.point(angles[i]);\n            box.wrapPoint(point);\n            box.wrapPoint(point, innerRadius);\n        }\n\n        if (!innerRadius) {\n            box.wrapPoint(this.center);\n        }\n\n        return box;\n    },\n\n    expand: function(value) {\n        this.radius += value;\n        return this;\n    }\n});\n\nfunction numericComparer(a, b) {\n    return a - b;\n}\n\nvar Sector = Ring.extend({\n    init: function(center, radius, startAngle, angle) {\n        Ring.fn.init.call(this, center, 0, radius, startAngle, angle);\n    },\n\n    expand: function(value) {\n        return Ring.fn.expand.call(this, value);\n    },\n\n    clone: function() {\n        return new Sector(this.center, this.radius, this.startAngle, this.angle);\n    },\n\n    setRadius: function(newRadius) {\n        this.radius = newRadius;\n\n        return this;\n    }\n});\n\nvar DIRECTION_ANGLE = 0.001; //any value that will make the endAngle bigger than the start angle will work here.\n\nvar ShapeBuilder = Class.extend({\n    createRing: function(sector, options) {\n        var startAngle = sector.startAngle + 180;\n        var endAngle = sector.angle + startAngle;\n\n        //required in order to avoid reversing the arc direction in cases like 0.000000000000001 + 100 === 100\n        if (sector.angle > 0 && startAngle === endAngle) {\n            endAngle += DIRECTION_ANGLE;\n        }\n\n        var center = new geometry.Point(sector.center.x, sector.center.y);\n        var radius = Math.max(sector.radius, 0);\n        var innerRadius = Math.max(sector.innerRadius, 0);\n        var arc = new geometry.Arc(center, {\n            startAngle: startAngle,\n            endAngle: endAngle,\n            radiusX: radius,\n            radiusY: radius\n        });\n        var path = Path.fromArc(arc, options).close();\n\n        if (innerRadius) {\n            arc.radiusX = arc.radiusY = innerRadius;\n            var innerEnd = arc.pointAt(endAngle);\n            path.lineTo(innerEnd.x, innerEnd.y);\n            path.arc(endAngle, startAngle, innerRadius, innerRadius, true);\n        } else {\n            path.lineTo(center.x, center.y);\n        }\n\n        return path;\n    }\n});\n\nShapeBuilder.current = new ShapeBuilder();\n\nvar ChartElement = Class.extend({\n    init: function(options) {\n\n        this.children = [];\n\n        this.options = deepExtend({}, this.options, this.initUserOptions(options));\n    },\n\n    initUserOptions: function(options) {\n        return options;\n    },\n\n    reflow: function(targetBox) {\n        var children = this.children;\n        var box;\n\n        for (var i = 0; i < children.length; i++) {\n            var currentChild = children[i];\n            currentChild.reflow(targetBox);\n\n            box = box ? box.wrap(currentChild.box) : currentChild.box.clone();\n        }\n\n        this.box = box || targetBox;\n    },\n\n    destroy: function() {\n        var children = this.children;\n\n        if (this.animation) {\n            this.animation.destroy();\n        }\n\n        for (var i = 0; i < children.length; i++) {\n            children[i].destroy();\n        }\n    },\n\n    getRoot: function() {\n        var parent = this.parent;\n\n        return parent ? parent.getRoot() : null;\n    },\n\n    getSender: function() {\n        var service = this.getService();\n        if (service) {\n            return service.sender;\n        }\n    },\n\n    getService: function() {\n        var element = this;\n        while (element) {\n            if (element.chartService) {\n                return element.chartService;\n            }\n            element = element.parent;\n        }\n    },\n\n    translateChildren: function(dx, dy) {\n        var children = this.children;\n        var childrenCount = children.length;\n\n        for (var i = 0; i < childrenCount; i++) {\n            children[i].box.translate(dx, dy);\n        }\n    },\n\n    append: function() {\n        var arguments$1 = arguments;\n        var this$1 = this;\n\n        for (var i = 0; i < arguments.length; i++) {\n            var item = arguments$1[i];\n            this$1.children.push(item);\n            item.parent = this$1;\n        }\n    },\n\n    renderVisual: function() {\n        if (this.options.visible === false) {\n            return;\n        }\n\n        this.createVisual();\n\n        this.addVisual();\n\n        this.renderChildren();\n\n        this.createAnimation();\n        this.renderComplete();\n    },\n\n    addVisual: function() {\n        if (this.visual) {\n            this.visual.chartElement = this;\n\n            if (this.parent) {\n                this.parent.appendVisual(this.visual);\n            }\n        }\n    },\n\n    renderChildren: function() {\n        var children = this.children;\n        var length = children.length;\n        for (var i = 0; i < length; i++) {\n            children[i].renderVisual();\n        }\n    },\n\n    createVisual: function() {\n        this.visual = new Group({\n            zIndex: this.options.zIndex,\n            visible: valueOrDefault(this.options.visible, true)\n        });\n    },\n\n    createAnimation: function() {\n        if (this.visual && this.options.animation) {\n            this.animation = drawing.Animation.create(\n                this.visual, this.options.animation\n            );\n        }\n    },\n\n    appendVisual: function(childVisual) {\n        if (!childVisual.chartElement) {\n            childVisual.chartElement = this;\n        }\n\n        if (childVisual.options.noclip) {\n            this.clipRoot().visual.append(childVisual);\n        } else if (defined(childVisual.options.zIndex)) {\n            this.stackRoot().stackVisual(childVisual);\n        } else if (this.isStackRoot) {\n            this.stackVisual(childVisual);\n        } else if (this.visual) {\n            this.visual.append(childVisual);\n        } else {\n            // Allow chart elements without visuals to\n            // pass through child visuals\n            this.parent.appendVisual(childVisual);\n        }\n    },\n\n    clipRoot: function() {\n        if (this.parent) {\n            return this.parent.clipRoot();\n        }\n\n        return this;\n    },\n\n    stackRoot: function() {\n        if (this.parent) {\n            return this.parent.stackRoot();\n        }\n\n        return this;\n    },\n\n    stackVisual: function(childVisual) {\n        var zIndex = childVisual.options.zIndex || 0;\n        var visuals = this.visual.children;\n        var length = visuals.length;\n        var pos;\n\n        for (pos = 0; pos < length; pos++) {\n            var sibling = visuals[pos];\n            var here = valueOrDefault(sibling.options.zIndex, 0);\n            if (here > zIndex) {\n                break;\n            }\n        }\n\n        this.visual.insert(pos, childVisual);\n    },\n\n    traverse: function(callback) {\n        var children = this.children;\n        var length = children.length;\n\n        for (var i = 0; i < length; i++) {\n            var child = children[i];\n\n            callback(child);\n            if (child.traverse) {\n                child.traverse(callback);\n            }\n        }\n    },\n\n    closest: function(match) {\n        var element = this;\n        var matched = false;\n\n        while (element && !matched) {\n            matched = match(element);\n\n            if (!matched) {\n                element = element.parent;\n            }\n        }\n\n        if (matched) {\n            return element;\n        }\n    },\n\n    renderComplete: function() {},\n\n    hasHighlight: function() {\n        var options = (this.options || {}).highlight;\n        return !(!this.createHighlight || (options && options.visible === false));\n    },\n\n    toggleHighlight: function(show, opacity) {\n        var this$1 = this;\n\n        var options = (this.options || {}).highlight || {};\n        var customVisual = options.visual;\n        var highlight = this._highlight;\n\n        if (!highlight) {\n            var highlightOptions = {\n                fill: {\n                    color: WHITE,\n                    opacity: opacity || 0.2\n                },\n                stroke: {\n                    color: WHITE,\n                    width: 1,\n                    opacity: opacity || 0.2\n                }\n            };\n\n            if (customVisual) {\n                highlight = this._highlight = customVisual(\n                    $.extend(this.highlightVisualArgs(), {\n                        createVisual: function () { return this$1.createHighlight(highlightOptions); },\n                        sender: this.getSender(),\n                        series: this.series,\n                        dataItem: this.dataItem,\n                        category: this.category,\n                        value: this.value,\n                        percentage: this.percentage,\n                        runningTotal: this.runningTotal,\n                        total: this.total\n                    }\n                ));\n\n                if (!highlight) {\n                    return;\n                }\n            } else {\n                highlight = this._highlight = this.createHighlight(highlightOptions);\n            }\n\n            if (!defined(highlight.options.zIndex)) {\n                highlight.options.zIndex = valueOrDefault(options.zIndex, this.options.zIndex);\n            }\n\n            this.appendVisual(highlight);\n        }\n\n        highlight.visible(show);\n    },\n\n    createGradientOverlay: function(element, options, gradientOptions) {\n        var overlay = new Path($.extend({\n            stroke: {\n                color: \"none\"\n            },\n            fill: this.createGradient(gradientOptions),\n            closed: element.options.closed\n        }, options));\n\n        overlay.segments.elements(element.segments.elements());\n\n        return overlay;\n    },\n\n    createGradient: function(options) {\n        if (this.parent) {\n            return this.parent.createGradient(options);\n        }\n    },\n\n    supportsPointInactiveOpacity: function() {\n        return true;\n    }\n});\n\nChartElement.prototype.options = { };\n\nvar BoxElement = ChartElement.extend({\n    init: function(options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.options.margin = getSpacing(this.options.margin);\n        this.options.padding = getSpacing(this.options.padding);\n    },\n\n    reflow: function(targetBox) {\n        var this$1 = this;\n\n        var options = this.options;\n        var width = options.width;\n        var height = options.height;\n        var shrinkToFit = options.shrinkToFit;\n        var hasSetSize = width && height;\n        var margin = options.margin;\n        var padding = options.padding;\n        var borderWidth = options.border.width;\n        var box;\n\n        var reflowPaddingBox = function () {\n            this$1.align(targetBox, X, options.align);\n            this$1.align(targetBox, Y, options.vAlign);\n            this$1.paddingBox = box.clone().unpad(margin).unpad(borderWidth);\n        };\n\n        var contentBox = targetBox.clone();\n        if (hasSetSize) {\n            contentBox.x2 = contentBox.x1 + width;\n            contentBox.y2 = contentBox.y1 + height;\n        }\n\n        if (shrinkToFit) {\n            contentBox.unpad(margin).unpad(borderWidth).unpad(padding);\n        }\n\n        ChartElement.fn.reflow.call(this, contentBox);\n\n        if (hasSetSize) {\n            box = this.box = new Box(0, 0, width, height);\n        } else {\n            box = this.box;\n        }\n\n        if (shrinkToFit && hasSetSize) {\n            reflowPaddingBox();\n            contentBox = this.contentBox = this.paddingBox.clone().unpad(padding);\n        } else {\n            contentBox = this.contentBox = box.clone();\n            box.pad(padding).pad(borderWidth).pad(margin);\n            reflowPaddingBox();\n        }\n\n        this.translateChildren(\n            box.x1 - contentBox.x1 + margin.left + borderWidth + padding.left,\n            box.y1 - contentBox.y1 + margin.top + borderWidth + padding.top\n        );\n\n        var children = this.children;\n        for (var i = 0; i < children.length; i++) {\n            var item = children[i];\n            item.reflow(item.box);\n        }\n    },\n\n    align: function(targetBox, axis, alignment) {\n        this.box.align(targetBox, axis, alignment);\n    },\n\n    hasBox: function() {\n        var options = this.options;\n        return options.border.width || options.background;\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n\n        var options = this.options;\n        if (options.visible && this.hasBox()) {\n            this.visual.append(Path.fromRect(\n                this.paddingBox.toRect(),\n                this.visualStyle()\n            ));\n        }\n    },\n\n    visualStyle: function() {\n        var options = this.options;\n        var border = options.border || {};\n\n        return {\n            stroke: {\n                width: border.width,\n                color: border.color,\n                opacity: valueOrDefault(border.opacity, options.opacity),\n                dashType: border.dashType\n            },\n            fill: {\n                color: options.background,\n                opacity: options.opacity\n            },\n            cursor: options.cursor\n        };\n    }\n});\n\nsetDefaultOptions(BoxElement, {\n    align: LEFT,\n    vAlign: TOP,\n    margin: {},\n    padding: {},\n    border: {\n        color: BLACK,\n        width: 0\n    },\n    background: \"\",\n    shrinkToFit: false,\n    width: 0,\n    height: 0,\n    visible: true\n});\n\nvar ShapeElement = BoxElement.extend({\n    init: function(options, pointData) {\n        BoxElement.fn.init.call(this, options);\n\n        this.pointData = pointData;\n    },\n\n    getElement: function() {\n        var ref = this;\n        var options = ref.options;\n        var box = ref.paddingBox;\n        var type = options.type;\n        var rotation = options.rotation;\n        var center = box.center();\n        var halfWidth = box.width() / 2;\n        var halfHeight = box.height() / 2;\n\n        if (!options.visible || !this.hasBox()) {\n            return null;\n        }\n\n        var style = this.visualStyle();\n        var element;\n\n        if (type === CIRCLE) {\n            element = new drawing.Circle(\n                new Circle([\n                    round(box.x1 + halfWidth, COORD_PRECISION),\n                    round(box.y1 + halfHeight, COORD_PRECISION)\n                ], Math.min(halfWidth, halfHeight)),\n                style\n            );\n        } else if (type === TRIANGLE) {\n            element = Path.fromPoints([\n                [ box.x1 + halfWidth, box.y1 ],\n                [ box.x1, box.y2 ],\n                [ box.x2, box.y2 ]\n            ], style).close();\n        } else if (type === CROSS) {\n            element = new drawing.MultiPath(style);\n\n            element.moveTo(box.x1, box.y1).lineTo(box.x2, box.y2);\n            element.moveTo(box.x1, box.y2).lineTo(box.x2, box.y1);\n        } else {\n            var rect = box.toRect();\n            if (type === ROUNDED_RECT) {\n                var borderRadius = valueOrDefault(options.borderRadius, rect.width() / 5);\n                rect.setCornerRadius(borderRadius);\n            }\n\n            element = Path.fromRect(rect, style);\n        }\n\n        if (rotation) {\n            element.transform(geometryTransform()\n                .rotate(-rotation, [ center.x, center.y ])\n            );\n        }\n\n        element.options.zIndex = options.zIndex;\n\n        return element;\n    },\n\n    createElement: function() {\n        var this$1 = this;\n\n        var customVisual = this.options.visual;\n        var pointData = this.pointData || {};\n        var visual;\n\n        if (customVisual) {\n            visual = customVisual({\n                value: pointData.value,\n                dataItem: pointData.dataItem,\n                sender: this.getSender(),\n                series: pointData.series,\n                category: pointData.category,\n                rect: this.paddingBox.toRect(),\n                options: this.visualOptions(),\n                createVisual: function () { return this$1.getElement(); }\n            });\n        } else {\n            visual = this.getElement();\n        }\n\n        return visual;\n    },\n\n    visualOptions: function() {\n        var options = this.options;\n        return {\n            background: options.background,\n            border: options.border,\n            margin: options.margin,\n            padding: options.padding,\n            type: options.type,\n            size: options.width,\n            visible: options.visible\n        };\n    },\n\n    createVisual: function() {\n        this.visual = this.createElement();\n    }\n});\n\nsetDefaultOptions(ShapeElement, {\n    type: CIRCLE,\n    align: CENTER,\n    vAlign: CENTER\n});\n\nvar LINEAR = \"linear\";\nvar RADIAL = \"radial\";\n\nvar GRADIENTS = {\n    glass: {\n        type: LINEAR,\n        rotation: 0,\n        stops: [ {\n            offset: 0,\n            color: WHITE,\n            opacity: 0\n        }, {\n            offset: 0.25,\n            color: WHITE,\n            opacity: 0.3\n        }, {\n            offset: 1,\n            color: WHITE,\n            opacity: 0\n        } ]\n    },\n    sharpBevel: {\n        type: RADIAL,\n        stops: [ {\n            offset: 0,\n            color: WHITE,\n            opacity: 0.55\n        }, {\n            offset: 0.65,\n            color: WHITE,\n            opacity: 0\n        }, {\n            offset: 0.95,\n            color: WHITE,\n            opacity: 0.25\n        } ]\n    },\n    roundedBevel: {\n        type: RADIAL,\n        stops: [ {\n            offset: 0.33,\n            color: WHITE,\n            opacity: 0.06\n        }, {\n            offset: 0.83,\n            color: WHITE,\n            opacity: 0.2\n        }, {\n            offset: 0.95,\n            color: WHITE,\n            opacity: 0\n        } ]\n    },\n    roundedGlass: {\n        type: RADIAL,\n        supportVML: false,\n        stops: [ {\n            offset: 0,\n            color: WHITE,\n            opacity: 0\n        }, {\n            offset: 0.5,\n            color: WHITE,\n            opacity: 0.3\n        }, {\n            offset: 0.99,\n            color: WHITE,\n            opacity: 0\n        } ]\n    },\n    sharpGlass: {\n        type: RADIAL,\n        supportVML: false,\n        stops: [ {\n            offset: 0,\n            color: WHITE,\n            opacity: 0.2\n        }, {\n            offset: 0.15,\n            color: WHITE,\n            opacity: 0.15\n        }, {\n            offset: 0.17,\n            color: WHITE,\n            opacity: 0.35\n        }, {\n            offset: 0.85,\n            color: WHITE,\n            opacity: 0.05\n        }, {\n            offset: 0.87,\n            color: WHITE,\n            opacity: 0.15\n        }, {\n            offset: 0.99,\n            color: WHITE,\n            opacity: 0\n        } ]\n    },\n    bubbleShadow: {\n        type: RADIAL,\n        center: [ 0.5, 0.5 ],\n        radius: 0.5\n    }\n};\n\nfunction boxDiff(r, s) {\n    if (r.x1 === s.x1 && r.y1 === s.y1 && r.x2 === s.x2 && r.y2 === s.y2) {\n        return s;\n    }\n\n    var a = Math.min(r.x1, s.x1);\n    var b = Math.max(r.x1, s.x1);\n    var c = Math.min(r.x2, s.x2);\n    var d = Math.max(r.x2, s.x2);\n    var e = Math.min(r.y1, s.y1);\n    var f = Math.max(r.y1, s.y1);\n    var g = Math.min(r.y2, s.y2);\n    var h = Math.max(r.y2, s.y2);\n    var boxes = [];\n\n    // X = intersection, 0-7 = possible difference areas\n    // h +-+-+-+\n    // . |5|6|7|\n    // g +-+-+-+\n    // . |3|X|4|\n    // f +-+-+-+\n    // . |0|1|2|\n    // e +-+-+-+\n    // . a b c d\n\n    // we'll always have rectangles 1, 3, 4 and 6\n    boxes[0] = new Box(b, e, c, f);\n    boxes[1] = new Box(a, f, b, g);\n    boxes[2] = new Box(c, f, d, g);\n    boxes[3] = new Box(b, g, c, h);\n\n    // decide which corners\n    if (r.x1 === a && r.y1 === e || s.x1 === a && s.y1 === e) { // corners 0 and 7\n        boxes[4] = new Box(a, e, b, f);\n        boxes[5] = new Box(c, g, d, h);\n    } else { // corners 2 and 5\n        boxes[4] = new Box(c, e, d, f);\n        boxes[5] = new Box(a, g, b, h);\n    }\n\n    return grep(boxes, function(box) {\n        return box.height() > 0 && box.width() > 0;\n    })[0];\n}\n\nvar RootElement = ChartElement.extend({\n    init: function(options) {\n        ChartElement.fn.init.call(this, options);\n\n        var rootOptions = this.options;\n        rootOptions.width = parseInt(rootOptions.width, 10);\n        rootOptions.height = parseInt(rootOptions.height, 10);\n\n        this.gradients = {};\n    },\n\n    reflow: function() {\n        var ref = this;\n        var options = ref.options;\n        var children = ref.children;\n        var currentBox = new Box(0, 0, options.width, options.height);\n\n        this.box = currentBox.unpad(options.margin);\n\n        for (var i = 0; i < children.length; i++) {\n            children[i].reflow(currentBox);\n            currentBox = boxDiff(currentBox, children[i].box) || new Box();\n        }\n    },\n\n    createVisual: function() {\n        this.visual = new Group();\n        this.createBackground();\n    },\n\n    createBackground: function() {\n        var options = this.options;\n        var border = options.border || {};\n        var box = this.box.clone().pad(options.margin).unpad(border.width);\n\n        var background = Path.fromRect(box.toRect(), {\n            stroke: {\n                color: border.width ? border.color : \"\",\n                width: border.width,\n                dashType: border.dashType\n            },\n            fill: {\n                color: options.background,\n                opacity: options.opacity\n            },\n            zIndex: -10\n        });\n\n        this.visual.append(background);\n    },\n\n    getRoot: function() {\n        return this;\n    },\n\n    createGradient: function(options) {\n        var gradients = this.gradients;\n        var hashCode = objectKey(options);\n        var gradient = GRADIENTS[options.gradient];\n        var drawingGradient;\n\n        if (gradients[hashCode]) {\n            drawingGradient = gradients[hashCode];\n        } else {\n            var gradientOptions = $.extend({}, gradient, options);\n            if (gradient.type === \"linear\") {\n                drawingGradient = new drawing.LinearGradient(gradientOptions);\n            } else {\n                if (options.innerRadius) {\n                    gradientOptions.stops = innerRadialStops(gradientOptions);\n                }\n                drawingGradient = new drawing.RadialGradient(gradientOptions);\n                drawingGradient.supportVML = gradient.supportVML !== false;\n            }\n            gradients[hashCode] = drawingGradient;\n        }\n\n        return drawingGradient;\n    },\n\n    cleanGradients: function() {\n        var gradients = this.gradients;\n        for (var hashCode in gradients) {\n            gradients[hashCode]._observers = [];//add clear observers method in drawing ObserversMixin\n        }\n    },\n\n    size: function() {\n        var options = this.options;\n        return new Box(0, 0, options.width, options.height);\n    }\n});\n\nsetDefaultOptions(RootElement, {\n    width: DEFAULT_WIDTH,\n    height: DEFAULT_HEIGHT,\n    background: WHITE,\n    border: {\n        color: BLACK,\n        width: 0\n    },\n    margin: getSpacing(5),\n    zIndex: -2\n});\n\nfunction innerRadialStops(options) {\n    var stops = options.stops;\n    var usedSpace = ((options.innerRadius / options.radius) * 100);\n    var length = stops.length;\n    var currentStops = [];\n\n    for (var i = 0; i < length; i++) {\n        var currentStop = $.extend({}, stops[i]);\n        currentStop.offset = (currentStop.offset * (100 - usedSpace) + usedSpace) / 100;\n        currentStops.push(currentStop);\n    }\n\n    return currentStops;\n}\n\nvar FloatElement = ChartElement.extend({\n    init: function(options) {\n        ChartElement.fn.init.call(this, options);\n        this._initDirection();\n    },\n\n    _initDirection: function() {\n        var options = this.options;\n        if (options.vertical) {\n            this.groupAxis = X;\n            this.elementAxis = Y;\n            this.groupSizeField = WIDTH;\n            this.elementSizeField = HEIGHT;\n            this.groupSpacing = options.spacing;\n            this.elementSpacing = options.vSpacing;\n        } else {\n            this.groupAxis = Y;\n            this.elementAxis = X;\n            this.groupSizeField = HEIGHT;\n            this.elementSizeField = WIDTH;\n            this.groupSpacing = options.vSpacing;\n            this.elementSpacing = options.spacing;\n        }\n    },\n\n    reflow: function(targetBox) {\n        this.box = targetBox.clone();\n        this.reflowChildren();\n    },\n\n    reflowChildren: function() {\n        var this$1 = this;\n\n        var ref = this;\n        var box = ref.box;\n        var elementAxis = ref.elementAxis;\n        var groupAxis = ref.groupAxis;\n        var elementSizeField = ref.elementSizeField;\n        var groupSizeField = ref.groupSizeField;\n        var ref$1 = this.groupOptions();\n        var groups = ref$1.groups;\n        var groupsSize = ref$1.groupsSize;\n        var maxGroupElementsSize = ref$1.maxGroupElementsSize;\n        var groupsCount = groups.length;\n        var groupsStart = box[groupAxis + 1] + this.alignStart(groupsSize, box[groupSizeField]());\n\n        if (groupsCount) {\n            var groupStart = groupsStart;\n\n            for (var groupIdx = 0; groupIdx < groupsCount; groupIdx++) {\n                var group = groups[groupIdx];\n                var groupElements = group.groupElements;\n                var elementStart = box[elementAxis + 1];\n                var groupElementsCount = groupElements.length;\n\n                for (var idx = 0; idx < groupElementsCount; idx++) {\n                    var element = groupElements[idx];\n                    var elementSize$$1 = this$1.elementSize(element);\n                    var groupElementStart = groupStart + this$1.alignStart(elementSize$$1[groupSizeField], group.groupSize);\n\n                    var elementBox = new Box();\n                    elementBox[groupAxis + 1] = groupElementStart;\n                    elementBox[groupAxis + 2] = groupElementStart + elementSize$$1[groupSizeField];\n                    elementBox[elementAxis + 1] = elementStart;\n                    elementBox[elementAxis + 2] = elementStart + elementSize$$1[elementSizeField];\n\n                    element.reflow(elementBox);\n\n                    elementStart += elementSize$$1[elementSizeField] + this$1.elementSpacing;\n                }\n                groupStart += group.groupSize + this$1.groupSpacing;\n            }\n            box[groupAxis + 1] = groupsStart;\n            box[groupAxis + 2] = groupsStart + groupsSize;\n            box[elementAxis + 2] = box[elementAxis + 1] + maxGroupElementsSize;\n        }\n    },\n\n    alignStart: function(size, maxSize) {\n        var start = 0;\n        var align = this.options.align;\n        if (align === RIGHT || align === BOTTOM) {\n            start = maxSize - size;\n        } else if (align === CENTER) {\n            start = (maxSize - size) / 2;\n        }\n        return start;\n    },\n\n    groupOptions: function() {\n        var this$1 = this;\n\n        var ref = this;\n        var box = ref.box;\n        var children = ref.children;\n        var elementSizeField = ref.elementSizeField;\n        var groupSizeField = ref.groupSizeField;\n        var elementSpacing = ref.elementSpacing;\n        var groupSpacing = ref.groupSpacing;\n        var maxSize = round(box[elementSizeField]());\n        var childrenCount = children.length;\n        var groups = [];\n\n        var groupSize = 0;\n        var groupElementsSize = 0;\n        var groupsSize = 0;\n        var maxGroupElementsSize = 0;\n        var groupElements = [];\n\n        for (var idx = 0; idx < childrenCount; idx++) {\n            var element = children[idx];\n            if (!element.box) {\n                element.reflow(box);\n            }\n\n            var elementSize$$1 = this$1.elementSize(element);\n            if (this$1.options.wrap && round(groupElementsSize + elementSpacing + elementSize$$1[elementSizeField]) > maxSize) {\n                groups.push({\n                    groupElements: groupElements,\n                    groupSize: groupSize,\n                    groupElementsSize: groupElementsSize\n                });\n                maxGroupElementsSize = Math.max(maxGroupElementsSize, groupElementsSize);\n                groupsSize += groupSpacing + groupSize;\n                groupSize = 0;\n                groupElementsSize = 0;\n                groupElements = [];\n            }\n            groupSize = Math.max(groupSize, elementSize$$1[groupSizeField]);\n            if (groupElementsSize > 0) {\n                groupElementsSize += elementSpacing;\n            }\n            groupElementsSize += elementSize$$1[elementSizeField];\n            groupElements.push(element);\n        }\n\n        groups.push({\n            groupElements: groupElements,\n            groupSize: groupSize,\n            groupElementsSize: groupElementsSize\n        });\n        maxGroupElementsSize = Math.max(maxGroupElementsSize, groupElementsSize);\n        groupsSize += groupSize;\n\n        return {\n            groups: groups,\n            groupsSize: groupsSize,\n            maxGroupElementsSize: maxGroupElementsSize\n        };\n    },\n\n    elementSize: function(element) {\n        return {\n            width: element.box.width(),\n            height: element.box.height()\n        };\n    },\n\n    createVisual: function() {}\n});\n\nsetDefaultOptions(FloatElement, {\n    vertical: true,\n    wrap: true,\n    vSpacing: 0,\n    spacing: 0\n});\n\nvar DrawingText = drawing.Text;\n\nvar Text = ChartElement.extend({\n    init: function(content, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.content = content;\n\n        // Calculate size\n        this.reflow(new Box());\n    },\n\n    reflow: function(targetBox) {\n        var options = this.options;\n        var size = options.size = util.measureText(this.content, { font: options.font });\n\n        this.baseline = size.baseline;\n\n        this.box = new Box(targetBox.x1, targetBox.y1,\n                targetBox.x1 + size.width, targetBox.y1 + size.height);\n    },\n\n    createVisual: function() {\n        var ref = this.options;\n        var font = ref.font;\n        var color = ref.color;\n        var opacity = ref.opacity;\n        var cursor = ref.cursor;\n\n        this.visual = new DrawingText(this.content, this.box.toRect().topLeft(), {\n            font: font,\n            fill: { color: color, opacity: opacity },\n            cursor: cursor\n        });\n    }\n});\n\nsetDefaultOptions(Text, {\n    font: DEFAULT_FONT,\n    color: BLACK\n});\n\nfunction rectToBox(rect) {\n    var origin = rect.origin;\n    var bottomRight = rect.bottomRight();\n\n    return new Box(origin.x, origin.y, bottomRight.x, bottomRight.y);\n}\n\nvar ROWS_SPLIT_REGEX = /\\n/m;\n\nvar TextBox = BoxElement.extend({\n    init: function(content, options, data) {\n        BoxElement.fn.init.call(this, options);\n        this.content = content;\n        this.data = data;\n\n        this._initContainer();\n        if (this.options._autoReflow !== false) {\n            this.reflow(new Box());\n        }\n    },\n\n    _initContainer: function() {\n        var options = this.options;\n        var rows = String(this.content).split(ROWS_SPLIT_REGEX);\n        var floatElement = new FloatElement({ vertical: true, align: options.align, wrap: false });\n        var textOptions = deepExtend({ }, options, { opacity: 1, animation: null });\n\n        this.container = floatElement;\n        this.append(floatElement);\n\n        for (var rowIdx = 0; rowIdx < rows.length; rowIdx++) {\n            var text = new Text(rows[rowIdx].trim(), textOptions);\n            floatElement.append(text);\n        }\n    },\n\n    reflow: function(targetBox) {\n        var options = this.options;\n        var visualFn = options.visual;\n        this.container.options.align = options.align;\n\n        if (visualFn && !this._boxReflow) {\n            var visualBox = targetBox;\n            if (!visualBox.hasSize()) {\n                this._boxReflow = true;\n                this.reflow(visualBox);\n                this._boxReflow = false;\n                visualBox = this.box;\n            }\n            var visual = this.visual = visualFn(this.visualContext(visualBox));\n\n            if (visual) {\n                visualBox = rectToBox(visual.clippedBBox() || new Rect());\n\n                visual.options.zIndex = options.zIndex;\n            }\n\n            this.box = this.contentBox = this.paddingBox = visualBox;\n        } else {\n            BoxElement.fn.reflow.call(this, targetBox);\n\n            if (options.rotation) {\n                var margin = getSpacing(options.margin);\n                var box = this.box.unpad(margin);\n\n                this.targetBox = targetBox;\n                this.normalBox = box.clone();\n\n                box = this.rotate();\n                box.translate(margin.left - margin.right, margin.top - margin.bottom);\n\n                this.rotatedBox = box.clone();\n\n                box.pad(margin);\n            }\n        }\n    },\n\n    createVisual: function() {\n        var options = this.options;\n\n        this.visual = new Group({\n            transform: this.rotationTransform(),\n            zIndex: options.zIndex,\n            noclip: options.noclip\n        });\n\n        if (this.hasBox()) {\n            var box = Path.fromRect(this.paddingBox.toRect(), this.visualStyle());\n            this.visual.append(box);\n        }\n    },\n\n    renderVisual: function() {\n        if (!this.options.visible) {\n            return;\n        }\n\n        if (this.options.visual) {\n            var visual = this.visual;\n            if (visual && !defined(visual.options.noclip)) {\n                visual.options.noclip = this.options.noclip;\n            }\n            this.addVisual();\n            this.createAnimation();\n        } else {\n            BoxElement.fn.renderVisual.call(this);\n        }\n    },\n\n    visualContext: function(targetBox) {\n        var this$1 = this;\n\n        var context = {\n            text: this.content,\n            rect: targetBox.toRect(),\n            sender: this.getSender(),\n            options: this.options,\n            createVisual: function () {\n                this$1._boxReflow = true;\n                this$1.reflow(targetBox);\n                this$1._boxReflow = false;\n                return this$1.getDefaultVisual();\n            }\n        };\n        if (this.data) {\n            $.extend(context, this.data);\n        }\n\n        return context;\n    },\n\n    getDefaultVisual: function() {\n        this.createVisual();\n        this.renderChildren();\n        var visual = this.visual;\n        delete this.visual;\n        return visual;\n    },\n\n    rotate: function() {\n        var options = this.options;\n        this.box.rotate(options.rotation);\n        this.align(this.targetBox, X, options.align);\n        this.align(this.targetBox, Y, options.vAlign);\n        return this.box;\n    },\n\n    rotationTransform: function() {\n        var rotation = this.options.rotation;\n        if (!rotation) {\n            return null;\n        }\n\n        var ref = this.normalBox.center();\n        var cx = ref.x;\n        var cy = ref.y;\n        var boxCenter = this.rotatedBox.center();\n\n        return geometryTransform()\n                   .translate(boxCenter.x - cx, boxCenter.y - cy)\n                   .rotate(rotation, [ cx, cy ]);\n    }\n});\n\nvar Title = ChartElement.extend({\n    init: function(options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.append(\n            new TextBox(this.options.text, $.extend({}, this.options, {\n                vAlign: this.options.position\n            }))\n        );\n    },\n\n    reflow: function(targetBox) {\n        ChartElement.fn.reflow.call(this, targetBox);\n        this.box.snapTo(targetBox, X);\n    }\n});\n\nTitle.buildTitle = function(options, parent, defaultOptions) {\n    var titleOptions = options;\n\n    if (typeof options === \"string\") {\n        titleOptions = { text: options };\n    }\n\n    titleOptions = $.extend({ visible: true }, defaultOptions, titleOptions);\n\n    var title;\n    if (titleOptions && titleOptions.visible && titleOptions.text) {\n        title = new Title(titleOptions);\n        parent.append(title);\n    }\n\n    return title;\n};\n\nsetDefaultOptions(Title, {\n    color: BLACK,\n    position: TOP,\n    align: CENTER,\n    margin: getSpacing(5),\n    padding: getSpacing(5)\n});\n\nvar AxisLabel = TextBox.extend({\n    init: function(value, text, index, dataItem, options) {\n        TextBox.fn.init.call(this, text, options);\n\n        this.text = text;\n        this.value = value;\n        this.index = index;\n        this.dataItem = dataItem;\n        this.reflow(new Box());\n    },\n\n    visualContext: function(targetBox) {\n        var context = TextBox.fn.visualContext.call(this, targetBox);\n\n        context.value = this.value;\n        context.dataItem = this.dataItem;\n        context.format = this.options.format;\n        context.culture = this.options.culture;\n\n        return context;\n    },\n\n    click: function(widget, e) {\n\n        widget.trigger(AXIS_LABEL_CLICK, {\n            element: eventElement(e),\n            value: this.value,\n            text: this.text,\n            index: this.index,\n            dataItem: this.dataItem,\n            axis: this.parent.options\n        });\n    },\n\n    rotate: function() {\n        if (this.options.alignRotation !== CENTER) {\n            var box = this.normalBox.toRect();\n            var transform = this.rotationTransform();\n\n            this.box = rectToBox(box.bbox(transform.matrix()));\n        } else {\n            TextBox.fn.rotate.call(this);\n        }\n\n        return this.box;\n    },\n\n    rotationTransform: function() {\n        var options = this.options;\n        var rotation = options.rotation;\n        if (!rotation) {\n            return null;\n        }\n\n        if (options.alignRotation === CENTER) {\n            return TextBox.fn.rotationTransform.call(this);\n        }\n\n        var rotationMatrix = geometryTransform().rotate(rotation).matrix();\n        var box = this.normalBox.toRect();\n        var rect = this.targetBox.toRect();\n\n        var rotationOrigin = options.rotationOrigin || TOP;\n        var alignAxis = rotationOrigin === TOP || rotationOrigin === BOTTOM ? X : Y;\n        var distanceAxis = rotationOrigin === TOP || rotationOrigin === BOTTOM ? Y : X;\n        var axisAnchor = rotationOrigin === TOP || rotationOrigin === LEFT ? rect.origin : rect.bottomRight();\n\n        var topLeft = box.topLeft().transformCopy(rotationMatrix);\n        var topRight = box.topRight().transformCopy(rotationMatrix);\n        var bottomRight = box.bottomRight().transformCopy(rotationMatrix);\n        var bottomLeft = box.bottomLeft().transformCopy(rotationMatrix);\n        var rotatedBox = Rect.fromPoints(topLeft, topRight, bottomRight, bottomLeft);\n\n        var translate = {};\n        translate[distanceAxis] = rect.origin[distanceAxis] - rotatedBox.origin[distanceAxis];\n\n        var distanceLeft = Math.abs(topLeft[distanceAxis] + translate[distanceAxis] - axisAnchor[distanceAxis]);\n        var distanceRight = Math.abs(topRight[distanceAxis] + translate[distanceAxis] - axisAnchor[distanceAxis]);\n\n        var alignStart, alignEnd;\n\n        if (round(distanceLeft, DEFAULT_PRECISION) === round(distanceRight, DEFAULT_PRECISION)) {\n            alignStart = topLeft;\n            alignEnd = topRight;\n        } else if (distanceRight < distanceLeft) {\n            alignStart = topRight;\n            alignEnd = bottomRight;\n        } else {\n            alignStart = topLeft;\n            alignEnd = bottomLeft;\n        }\n\n        var alignCenter = alignStart[alignAxis] + (alignEnd[alignAxis] - alignStart[alignAxis]) / 2;\n        translate[alignAxis] = rect.center()[alignAxis] - alignCenter;\n\n        return geometryTransform()\n            .translate(translate.x, translate.y)\n            .rotate(rotation);\n    }\n});\n\nsetDefaultOptions(AxisLabel, {\n    _autoReflow: false\n});\n\nvar DEFAULT_ICON_SIZE = 7;\nvar DEFAULT_LABEL_COLOR = \"#fff\";\n\nvar Note = BoxElement.extend({\n    init: function(fields, options, chartService) {\n        BoxElement.fn.init.call(this, options);\n\n        this.fields = fields;\n        this.chartService = chartService;\n\n        this.render();\n    },\n\n    hide: function() {\n        this.options.visible = false;\n    },\n\n    show: function() {\n        this.options.visible = true;\n    },\n\n    render: function() {\n        var this$1 = this;\n\n        var options = this.options;\n\n        if (options.visible) {\n            var label = options.label;\n            var icon = options.icon;\n            var box = new Box();\n            var childAlias = function () { return this$1; };\n            var size = icon.size;\n            var text = this.fields.text;\n            var width, height;\n\n            if (defined(label) && label.visible) {\n                var noteTemplate = getTemplate(label);\n                if (noteTemplate) {\n                    text = noteTemplate(this.fields);\n                } else if (label.format) {\n                    text = this.chartService.format.auto(label.format, text);\n                }\n\n                if (!label.color) {\n                    label.color = label.position === INSIDE ? DEFAULT_LABEL_COLOR : icon.background;\n                }\n\n                this.label = new TextBox(text, deepExtend({}, label));\n                this.label.aliasFor = childAlias;\n\n                if (label.position === INSIDE && !defined(size)) {\n                    if (icon.type === CIRCLE) {\n                        size = Math.max(this.label.box.width(), this.label.box.height());\n                    } else {\n                        width = this.label.box.width();\n                        height = this.label.box.height();\n                    }\n                    box.wrap(this.label.box);\n                }\n            }\n\n            icon.width = width || size || DEFAULT_ICON_SIZE;\n            icon.height = height || size || DEFAULT_ICON_SIZE;\n\n            var marker = new ShapeElement(deepExtend({}, icon));\n            marker.aliasFor = childAlias;\n\n            this.marker = marker;\n            this.append(marker);\n\n            if (this.label) {\n                this.append(this.label);\n            }\n\n            marker.reflow(new Box());\n            this.wrapperBox = box.wrap(marker.box);\n        }\n    },\n\n    reflow: function(targetBox) {\n        var ref = this;\n        var options = ref.options;\n        var label = ref.label;\n        var marker = ref.marker;\n        var wrapperBox = ref.wrapperBox;\n        var center = targetBox.center();\n        var length = options.line.length;\n        var position = options.position;\n\n        // TODO: Review\n        if (options.visible) {\n            var lineStart, box, contentBox;\n\n            if (inArray(position, [ LEFT, RIGHT ])) {\n                if (position === LEFT) {\n                    contentBox = wrapperBox.alignTo(targetBox, position).translate(-length, targetBox.center().y - wrapperBox.center().y);\n\n                    if (options.line.visible) {\n                        lineStart = [ targetBox.x1, center.y ];\n                        this.linePoints = [\n                            lineStart,\n                            [ contentBox.x2, center.y ]\n                        ];\n                        box = contentBox.clone().wrapPoint(lineStart);\n                    }\n                } else {\n                    contentBox = wrapperBox.alignTo(targetBox, position).translate(length, targetBox.center().y - wrapperBox.center().y);\n\n                    if (options.line.visible) {\n                        lineStart = [ targetBox.x2, center.y ];\n                        this.linePoints = [\n                            lineStart,\n                            [ contentBox.x1, center.y ]\n                        ];\n                        box = contentBox.clone().wrapPoint(lineStart);\n                    }\n                }\n            } else {\n                if (position === BOTTOM) {\n                    contentBox = wrapperBox.alignTo(targetBox, position).translate(targetBox.center().x - wrapperBox.center().x, length);\n\n                    if (options.line.visible) {\n                        lineStart = [ center.x, targetBox.y2 ];\n                        this.linePoints = [\n                            lineStart,\n                            [ center.x, contentBox.y1 ]\n                        ];\n                        box = contentBox.clone().wrapPoint(lineStart);\n                    }\n                } else {\n                    contentBox = wrapperBox.alignTo(targetBox, position).translate(targetBox.center().x - wrapperBox.center().x, -length);\n\n                    if (options.line.visible) {\n                        lineStart = [ center.x, targetBox.y1 ];\n                        this.linePoints = [\n                            lineStart,\n                            [ center.x, contentBox.y2 ]\n                        ];\n                        box = contentBox.clone().wrapPoint(lineStart);\n                    }\n                }\n            }\n\n            if (marker) {\n                marker.reflow(contentBox);\n            }\n\n            if (label) {\n                label.reflow(contentBox);\n                if (marker) {\n                    if (options.label.position === OUTSIDE) {\n                        label.box.alignTo(marker.box, position);\n                    }\n                    label.reflow(label.box);\n                }\n            }\n\n            this.contentBox = contentBox;\n            this.targetBox = targetBox;\n            this.box = box || contentBox;\n        }\n    },\n\n    createVisual: function() {\n        BoxElement.fn.createVisual.call(this);\n        this.visual.options.noclip = this.options.noclip;\n\n        if (this.options.visible) {\n            this.createLine();\n        }\n    },\n\n    renderVisual: function() {\n        var this$1 = this;\n\n        var options = this.options;\n        var customVisual = options.visual;\n        if (options.visible && customVisual) {\n            this.visual = customVisual($.extend(this.fields, {\n                sender: this.getSender(),\n                rect: this.targetBox.toRect(),\n                options: {\n                    background: options.background,\n                    border: options.background,\n                    icon: options.icon,\n                    label: options.label,\n                    line: options.line,\n                    position: options.position,\n                    visible: options.visible\n                },\n                createVisual: function () {\n                    this$1.createVisual();\n                    this$1.renderChildren();\n                    var defaultVisual = this$1.visual;\n                    delete this$1.visual;\n                    return defaultVisual;\n                }\n            }));\n            this.addVisual();\n        } else {\n            BoxElement.fn.renderVisual.call(this);\n        }\n    },\n\n    createLine: function() {\n        var options = this.options.line;\n\n        if (this.linePoints) {\n            var path = Path.fromPoints(this.linePoints, {\n                stroke: {\n                    color: options.color,\n                    width: options.width,\n                    dashType: options.dashType\n                }\n            });\n\n            alignPathToPixel(path);\n            this.visual.append(path);\n        }\n    },\n\n    click: function(widget, e) {\n        var args = this.eventArgs(e);\n\n        if (!widget.trigger(NOTE_CLICK, args)) {\n            e.preventDefault();\n        }\n    },\n\n    over: function(widget, e) {\n        var args = this.eventArgs(e);\n\n        if (!widget.trigger(NOTE_HOVER, args)) {\n            e.preventDefault();\n        }\n    },\n\n    out: function(widget, e) {\n        var args = this.eventArgs(e);\n\n        widget.trigger(NOTE_LEAVE, args);\n    },\n\n    eventArgs: function(e) {\n        var options = this.options;\n\n        return $.extend(this.fields, {\n            element: eventElement(e),\n            text: defined(options.label) ? options.label.text : \"\",\n            visual: this.visual\n        });\n    }\n});\n\nsetDefaultOptions(Note, {\n    icon: {\n        visible: true,\n        type: CIRCLE\n    },\n    label: {\n        position: INSIDE,\n        visible: true,\n        align: CENTER,\n        vAlign: CENTER\n    },\n    line: {\n        visible: true\n    },\n    visible: true,\n    position: TOP,\n    zIndex: 2\n});\n\nvar defaultImplementation = {\n    format: function (format, value) { return value; },\n\n    toString: function (value) { return value; },\n\n    parseDate: function (value) { return new Date(value); },\n\n    firstDay: function () { return 0; }\n};\n\nvar current$1 = defaultImplementation;\n\nvar IntlService = Class.extend({\n\n});\n\nIntlService.register = function(userImplementation) {\n    current$1 = userImplementation;\n};\n\nif (Object.defineProperties) {\n    Object.defineProperties(IntlService, {\n        implementation: {\n            get: function() {\n                return current$1;\n            }\n        }\n    });\n}\n\nvar FORMAT_REPLACE_REGEX = /\\{(\\d+)(:[^\\}]+)?\\}/g;\n\nvar FormatService = Class.extend({\n    init: function(intlService) {\n        this._intlService = intlService;\n    },\n\n    auto: function(formatString) {\n        var values = [], len = arguments.length - 1;\n        while ( len-- > 0 ) values[ len ] = arguments[ len + 1 ];\n\n        var intl = this.intl;\n\n        if (isString(formatString) && formatString.match(FORMAT_REGEX)) {\n            return intl.format.apply(intl, [ formatString ].concat( values ));\n        }\n\n        return intl.toString(values[0], formatString);\n    },\n\n    localeAuto: function(formatString, values, locale) {\n        var intl = this.intl;\n        var result;\n\n        if (isString(formatString) && formatString.match(FORMAT_REGEX)) {\n            result = formatString.replace(FORMAT_REPLACE_REGEX, function(match, index, placeholderFormat) {\n                var value = values[parseInt(index, 10)];\n\n                return intl.toString(value, placeholderFormat ? placeholderFormat.substring(1) : \"\", locale);\n            });\n        } else {\n            result = intl.toString(values[0], formatString, locale);\n        }\n\n        return result;\n    }\n});\n\nif (Object.defineProperties) {\n    Object.defineProperties(FormatService.fn, {\n        intl: {\n            get: function() {\n                return this._intlService || IntlService.implementation;\n            },\n            set: function(value) {\n                this._intlService = value;\n            }\n        }\n    });\n}\n\nvar ChartService = Class.extend({\n    init: function(chart, context) {\n        if (context === void 0) { context = {}; }\n\n        this._intlService = context.intlService;\n        this.sender = context.sender || chart;\n        this.format = new FormatService(context.intlService);\n        this.chart = chart;\n        this.rtl = Boolean(context.rtl);\n    },\n\n    notify: function(name, args) {\n        if (this.chart) {\n            this.chart.trigger(name, args);\n        }\n    },\n\n    isPannable: function(axis) {\n        var pannable = ((this.chart || {}).options || {}).pannable;\n        return pannable && pannable.lock !== axis;\n    }\n});\n\nif (Object.defineProperties) {\n    Object.defineProperties(ChartService.fn, {\n        intl: {\n            get: function() {\n                return this._intlService || IntlService.implementation;\n            },\n            set: function(value) {\n                this._intlService = value;\n                this.format.intl = value;\n            }\n        }\n    });\n}\n\nvar current$2;\n\nvar DomEventsBuilder = Class.extend({\n\n});\n\nDomEventsBuilder.register = function(userImplementation) {\n    current$2 = userImplementation;\n};\n\nDomEventsBuilder.create = function(element, events) {\n    if (current$2) {\n        return current$2.create(element, events);\n    }\n};\n\nvar services = {\n\tChartService: ChartService,\n\tDomEventsBuilder: DomEventsBuilder,\n\tFormatService: FormatService,\n\tIntlService: IntlService,\n\tTemplateService: TemplateService\n};\n\nfunction createAxisTick(options, tickOptions) {\n    var tickX = options.tickX;\n    var tickY = options.tickY;\n    var position = options.position;\n\n    var tick = new Path({\n        stroke: {\n            width: tickOptions.width,\n            color: tickOptions.color\n        }\n    });\n\n    if (options.vertical) {\n        tick.moveTo(tickX, position)\n            .lineTo(tickX + tickOptions.size, position);\n    } else {\n        tick.moveTo(position, tickY)\n            .lineTo(position, tickY + tickOptions.size);\n    }\n\n    alignPathToPixel(tick);\n\n    return tick;\n}\n\nfunction createAxisGridLine(options, gridLine) {\n    var lineStart = options.lineStart;\n    var lineEnd = options.lineEnd;\n    var position = options.position;\n\n    var line = new Path({\n        stroke: {\n            width: gridLine.width,\n            color: gridLine.color,\n            dashType: gridLine.dashType\n        }\n    });\n\n    if (options.vertical) {\n        line.moveTo(lineStart, position)\n            .lineTo(lineEnd, position);\n    } else {\n        line.moveTo(position, lineStart)\n            .lineTo(position, lineEnd);\n    }\n\n    alignPathToPixel(line);\n\n    return line;\n}\n\nvar Axis = ChartElement.extend({\n    init: function(options, chartService) {\n        if (chartService === void 0) { chartService = new ChartService(); }\n\n        ChartElement.fn.init.call(this, options);\n\n        this.chartService = chartService;\n\n        if (!this.options.visible) {\n            this.options = deepExtend({}, this.options, {\n                labels: {\n                    visible: false\n                },\n                line: {\n                    visible: false\n                },\n                margin: 0,\n                majorTickSize: 0,\n                minorTickSize: 0\n            });\n        }\n\n        this.options.minorTicks = deepExtend({}, {\n            color: this.options.line.color,\n            width: this.options.line.width,\n            visible: this.options.minorTickType !== NONE\n        }, this.options.minorTicks, {\n            size: this.options.minorTickSize,\n            align: this.options.minorTickType\n        });\n\n        this.options.majorTicks = deepExtend({}, {\n            color: this.options.line.color,\n            width: this.options.line.width,\n            visible: this.options.majorTickType !== NONE\n        }, this.options.majorTicks, {\n            size: this.options.majorTickSize,\n            align: this.options.majorTickType\n        });\n\n        this.initFields();\n\n        if (!this.options._deferLabels) {\n            this.createLabels();\n        }\n\n        this.createTitle();\n        this.createNotes();\n    },\n\n    initFields: function() {\n    },\n\n    labelsRange: function() {\n        return {\n            min: this.options.labels.skip,\n            max: this.labelsCount()\n        };\n    },\n\n    normalizeLabelRotation: function(labelOptions) {\n        var rotation = labelOptions.rotation;\n\n        if (isObject(rotation)) {\n            labelOptions.alignRotation = rotation.align;\n            labelOptions.rotation = rotation.angle;\n        }\n    },\n\n    createLabels: function() {\n        var this$1 = this;\n\n        var options = this.options;\n        var align = options.vertical ? RIGHT : CENTER;\n        var labelOptions = deepExtend({ }, options.labels, {\n            align: align,\n            zIndex: options.zIndex\n        });\n        var step = Math.max(1, labelOptions.step);\n\n        this.clearLabels();\n\n        if (labelOptions.visible) {\n            this.normalizeLabelRotation(labelOptions);\n            if (labelOptions.rotation === \"auto\") {\n                labelOptions.rotation = 0;\n                options.autoRotateLabels = true;\n            }\n\n            var range = this.labelsRange();\n            for (var idx = range.min; idx < range.max; idx += step) {\n                var labelContext = { index: idx, count: range.max };\n                var label = this$1.createAxisLabel(idx, labelOptions, labelContext);\n                if (label) {\n                    this$1.append(label);\n                    this$1.labels.push(label);\n                }\n            }\n        }\n    },\n\n    clearLabels: function() {\n        this.children = grep(this.children, function (child) { return !(child instanceof AxisLabel); });\n        this.labels = [];\n    },\n\n    clearTitle: function() {\n        var this$1 = this;\n\n        if (this.title) {\n            this.children = grep(this.children, function (child) { return child !== this$1.title; });\n            this.title = undefined;\n        }\n    },\n\n    clear: function() {\n        this.clearLabels();\n        this.clearTitle();\n    },\n\n    lineBox: function() {\n        var ref = this;\n        var options = ref.options;\n        var box = ref.box;\n        var vertical = options.vertical;\n        var mirror = options.labels.mirror;\n        var axisX = mirror ? box.x1 : box.x2;\n        var axisY = mirror ? box.y2 : box.y1;\n        var lineWidth = options.line.width || 0;\n\n        return vertical ?\n            new Box(axisX, box.y1, axisX, box.y2 - lineWidth) :\n            new Box(box.x1, axisY, box.x2 - lineWidth, axisY);\n    },\n\n    createTitle: function() {\n        var options = this.options;\n        var titleOptions = deepExtend({\n            rotation: options.vertical ? -90 : 0,\n            text: \"\",\n            zIndex: 1,\n            visualSize: true\n        }, options.title);\n\n        if (titleOptions.visible && titleOptions.text) {\n            var title = new TextBox(titleOptions.text, titleOptions);\n            this.append(title);\n            this.title = title;\n        }\n    },\n\n    createNotes: function() {\n        var this$1 = this;\n\n        var options = this.options;\n        var notes = options.notes;\n        var items = notes.data || [];\n\n        this.notes = [];\n\n        for (var i = 0; i < items.length; i++) {\n            var item = deepExtend({}, notes, items[i]);\n            item.value = this$1.parseNoteValue(item.value);\n\n            var note = new Note({\n                value: item.value,\n                text: item.label.text,\n                dataItem: item\n            }, item, this$1.chartService);\n\n            if (note.options.visible) {\n                if (defined(note.options.position)) {\n                    if (options.vertical && !inArray(note.options.position, [ LEFT, RIGHT ])) {\n                        note.options.position = options.reverse ? LEFT : RIGHT;\n                    } else if (!options.vertical && !inArray(note.options.position, [ TOP, BOTTOM ])) {\n                        note.options.position = options.reverse ? BOTTOM : TOP;\n                    }\n                } else {\n                    if (options.vertical) {\n                        note.options.position = options.reverse ? LEFT : RIGHT;\n                    } else {\n                        note.options.position = options.reverse ? BOTTOM : TOP;\n                    }\n                }\n                this$1.append(note);\n                this$1.notes.push(note);\n            }\n        }\n    },\n\n    parseNoteValue: function(value) {\n        return value;\n    },\n\n    renderVisual: function() {\n        ChartElement.fn.renderVisual.call(this);\n\n        this.createPlotBands();\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n\n        this.createBackground();\n        this.createLine();\n    },\n\n    gridLinesVisual: function() {\n        var gridLines = this._gridLines;\n        if (!gridLines) {\n            gridLines = this._gridLines = new Group({\n                zIndex: -2\n            });\n            this.appendVisual(this._gridLines);\n        }\n\n        return gridLines;\n    },\n\n    createTicks: function(lineGroup) {\n        var options = this.options;\n        var lineBox = this.lineBox();\n        var mirror = options.labels.mirror;\n        var majorUnit = options.majorTicks.visible ? options.majorUnit : 0;\n        var tickLineOptions = {\n            // TODO\n            // _alignLines: options._alignLines,\n            vertical: options.vertical\n        };\n\n        function render(tickPositions, tickOptions, skipUnit) {\n            var count = tickPositions.length;\n            var step = Math.max(1, tickOptions.step);\n\n            if (tickOptions.visible) {\n                for (var i = tickOptions.skip; i < count; i += step) {\n                    if (defined(skipUnit) && (i % skipUnit === 0)) {\n                        continue;\n                    }\n\n                    tickLineOptions.tickX = mirror ? lineBox.x2 : lineBox.x2 - tickOptions.size;\n                    tickLineOptions.tickY = mirror ? lineBox.y1 - tickOptions.size : lineBox.y1;\n                    tickLineOptions.position = tickPositions[i];\n\n                    lineGroup.append(createAxisTick(tickLineOptions, tickOptions));\n                }\n            }\n        }\n\n        render(this.getMajorTickPositions(), options.majorTicks);\n        render(this.getMinorTickPositions(), options.minorTicks, majorUnit / options.minorUnit);\n    },\n\n    createLine: function() {\n        var options = this.options;\n        var line = options.line;\n        var lineBox = this.lineBox();\n\n        if (line.width > 0 && line.visible) {\n            var path = new Path({\n                stroke: {\n                    width: line.width,\n                    color: line.color,\n                    dashType: line.dashType\n                }\n\n                /* TODO\n                zIndex: line.zIndex,\n                */\n            });\n\n            path.moveTo(lineBox.x1, lineBox.y1)\n                .lineTo(lineBox.x2, lineBox.y2);\n\n            if (options._alignLines) {\n                alignPathToPixel(path);\n            }\n\n            var group = this._lineGroup = new Group();\n            group.append(path);\n\n            this.visual.append(group);\n            this.createTicks(group);\n        }\n    },\n\n    getActualTickSize: function() {\n        var options = this.options;\n        var tickSize = 0;\n\n        if (options.majorTicks.visible && options.minorTicks.visible) {\n            tickSize = Math.max(options.majorTicks.size, options.minorTicks.size);\n        } else if (options.majorTicks.visible) {\n            tickSize = options.majorTicks.size;\n        } else if (options.minorTicks.visible) {\n            tickSize = options.minorTicks.size;\n        }\n\n        return tickSize;\n    },\n\n    createBackground: function() {\n        var ref = this;\n        var options = ref.options;\n        var box = ref.box;\n        var background = options.background;\n\n        if (background) {\n            this._backgroundPath = Path.fromRect(box.toRect(), {\n                fill: {\n                    color: background\n                },\n                stroke: null\n            });\n\n            this.visual.append(this._backgroundPath);\n        }\n    },\n\n    createPlotBands: function() {\n        var this$1 = this;\n\n        var options = this.options;\n        var plotBands = options.plotBands || [];\n        var vertical = options.vertical;\n        var plotArea = this.plotArea;\n\n        if (plotBands.length === 0) {\n            return;\n        }\n\n        var group = this._plotbandGroup = new Group({\n            zIndex: -1\n        });\n\n        var altAxis = grep(this.pane.axes, function (axis) { return axis.options.vertical !== this$1.options.vertical; })[0];\n\n        for (var idx = 0; idx < plotBands.length; idx++) {\n            var item = plotBands[idx];\n            var slotX = (void 0), slotY = (void 0);\n            var labelOptions = item.label;\n            var label = (void 0);\n\n            if (vertical) {\n                slotX = (altAxis || plotArea.axisX).lineBox();\n                slotY = this$1.getSlot(item.from, item.to, true);\n            } else {\n                slotX = this$1.getSlot(item.from, item.to, true);\n                slotY = (altAxis || plotArea.axisY).lineBox();\n            }\n\n            if (labelOptions) {\n                labelOptions.vAlign = labelOptions.position || LEFT;\n                label = this$1.createPlotBandLabel(\n                    labelOptions,\n                    item,\n                    new Box(\n                        slotX.x1,\n                        slotY.y1,\n                        slotX.x2,\n                        slotY.y2\n                    )\n\n                );\n            }\n\n            if (slotX.width() !== 0 && slotY.height() !== 0) {\n                var bandRect = new Rect(\n                    [ slotX.x1, slotY.y1 ],\n                    [ slotX.width(), slotY.height() ]\n                );\n\n                var path = Path.fromRect(bandRect, {\n                    fill: {\n                        color: item.color,\n                        opacity: item.opacity\n                    },\n                    stroke: null\n                });\n\n                group.append(path);\n                if (label) {\n                    group.append(label);\n                }\n            }\n        }\n\n        this.appendVisual(group);\n    },\n\n    createPlotBandLabel: function(label, item, box) {\n\n        if (label.visible === false) {\n            return null;\n        }\n\n        var text = label.text;\n        var textbox;\n\n        if (defined(label) && label.visible) {\n            var labelTemplate = getTemplate(label);\n            if (labelTemplate) {\n                text = labelTemplate({ text: text, item: item });\n            } else if (label.format) {\n                text = this.chartService.format.auto(label.format, text);\n            }\n\n            if (!label.color) {\n                label.color = this.options.labels.color;\n            }\n        }\n\n        textbox = new TextBox(text, label);\n        textbox.reflow(box);\n        textbox.renderVisual();\n\n        return textbox.visual;\n    },\n\n    createGridLines: function(altAxis) {\n        var options = this.options;\n        var minorGridLines = options.minorGridLines;\n        var majorGridLines = options.majorGridLines;\n        var minorUnit = options.minorUnit;\n        var vertical = options.vertical;\n        var axisLineVisible = altAxis.options.line.visible;\n        var majorUnit = majorGridLines.visible ? options.majorUnit : 0;\n        var lineBox = altAxis.lineBox();\n        var linePos = lineBox[vertical ? \"y1\" : \"x1\"];\n        var lineOptions = {\n            lineStart: lineBox[vertical ? \"x1\" : \"y1\"],\n            lineEnd: lineBox[vertical ? \"x2\" : \"y2\"],\n            vertical: vertical\n        };\n        var majorTicks = [];\n\n        var container = this.gridLinesVisual();\n\n        function render(tickPositions, gridLine, skipUnit) {\n            var count = tickPositions.length;\n            var step = Math.max(1, gridLine.step);\n\n            if (gridLine.visible) {\n                for (var i = gridLine.skip; i < count; i += step) {\n                    var pos = round(tickPositions[i]);\n                    if (!inArray(pos, majorTicks)) {\n                        if (i % skipUnit !== 0 && (!axisLineVisible || linePos !== pos)) {\n                            lineOptions.position = pos;\n                            container.append(createAxisGridLine(lineOptions, gridLine));\n\n                            majorTicks.push(pos);\n                        }\n                    }\n                }\n            }\n        }\n\n        render(this.getMajorTickPositions(), majorGridLines);\n        render(this.getMinorTickPositions(), minorGridLines, majorUnit / minorUnit);\n\n        return container.children;\n    },\n\n    reflow: function(box) {\n        var ref = this;\n        var options = ref.options;\n        var labels = ref.labels;\n        var title = ref.title;\n        var vertical = options.vertical;\n        var count = labels.length;\n        var sizeFn = vertical ? WIDTH : HEIGHT;\n        var titleSize = title ? title.box[sizeFn]() : 0;\n        var space = this.getActualTickSize() + options.margin + titleSize;\n        var rootBox = (this.getRoot() || {}).box || box;\n        var boxSize = rootBox[sizeFn]();\n        var maxLabelSize = 0;\n\n        for (var i = 0; i < count; i++) {\n            var labelSize = labels[i].box[sizeFn]();\n            if (labelSize + space <= boxSize) {\n                maxLabelSize = Math.max(maxLabelSize, labelSize);\n            }\n        }\n\n        if (vertical) {\n            this.box = new Box(\n                box.x1, box.y1,\n                box.x1 + maxLabelSize + space, box.y2\n            );\n        } else {\n            this.box = new Box(\n                box.x1, box.y1,\n                box.x2, box.y1 + maxLabelSize + space\n            );\n        }\n\n        this.arrangeTitle();\n        this.arrangeLabels();\n        this.arrangeNotes();\n    },\n\n    getLabelsTickPositions: function() {\n        return this.getMajorTickPositions();\n    },\n\n    labelTickIndex: function(label) {\n        return label.index;\n    },\n\n    arrangeLabels: function() {\n        var this$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var labels = ref.labels;\n        var labelsBetweenTicks = this.labelsBetweenTicks();\n        var vertical = options.vertical;\n        var mirror = options.labels.mirror;\n        var tickPositions = this.getLabelsTickPositions();\n\n        for (var idx = 0; idx < labels.length; idx++) {\n            var label = labels[idx];\n            var tickIx = this$1.labelTickIndex(label);\n            var labelSize = vertical ? label.box.height() : label.box.width();\n            var firstTickPosition = tickPositions[tickIx];\n            var nextTickPosition = tickPositions[tickIx + 1];\n            var positionStart = (void 0), positionEnd = (void 0);\n\n            if (vertical) {\n                if (labelsBetweenTicks) {\n                    var middle = firstTickPosition + (nextTickPosition - firstTickPosition) / 2;\n                    positionStart = middle - (labelSize / 2);\n                } else {\n                    positionStart = firstTickPosition - (labelSize / 2);\n                }\n\n                positionEnd = positionStart;\n            } else {\n                if (labelsBetweenTicks) {\n                    positionStart = firstTickPosition;\n                    positionEnd = nextTickPosition;\n                } else {\n                    positionStart = firstTickPosition - (labelSize / 2);\n                    positionEnd = positionStart + labelSize;\n                }\n            }\n\n            this$1.positionLabel(label, mirror, positionStart, positionEnd);\n        }\n    },\n\n    positionLabel: function(label, mirror, positionStart, positionEnd) {\n        if (positionEnd === void 0) { positionEnd = positionStart; }\n\n        var options = this.options;\n        var vertical = options.vertical;\n        var lineBox = this.lineBox();\n        var labelOffset = this.getActualTickSize() + options.margin;\n        var labelBox;\n\n        if (vertical) {\n            var labelX = lineBox.x2;\n\n            if (mirror) {\n                labelX += labelOffset;\n                label.options.rotationOrigin = LEFT;\n            } else {\n                labelX -= labelOffset + label.box.width();\n                label.options.rotationOrigin = RIGHT;\n            }\n\n            labelBox = label.box.move(labelX, positionStart);\n        } else {\n            var labelY = lineBox.y1;\n\n            if (mirror) {\n                labelY -= labelOffset + label.box.height();\n                label.options.rotationOrigin = BOTTOM;\n            } else {\n                labelY += labelOffset;\n                label.options.rotationOrigin = TOP;\n            }\n\n            labelBox = new Box(\n                positionStart, labelY,\n                positionEnd, labelY + label.box.height()\n            );\n        }\n\n        label.reflow(labelBox);\n    },\n\n    autoRotateLabelAngle: function(labelBox, slotWidth) {\n        if (labelBox.width() < slotWidth) {\n            return 0;\n        }\n\n        if (labelBox.height() > slotWidth) {\n            return -90;\n        }\n\n        return -45;\n    },\n\n    autoRotateLabels: function() {\n        var this$1 = this;\n\n        if (!this.options.autoRotateLabels || this.options.vertical) {\n            return false;\n        }\n\n        var tickPositions = this.getMajorTickPositions();\n        var labels = this.labels;\n        var limit = Math.min(labels.length, tickPositions.length - 1);\n        var angle = 0;\n\n        for (var idx = 0; idx < limit; idx++) {\n            var width = Math.abs(tickPositions[idx + 1] - tickPositions[idx]);\n            var labelBox = labels[idx].box;\n            var labelAngle = this$1.autoRotateLabelAngle(labelBox, width);\n\n            if (labelAngle !== 0) {\n                angle = labelAngle;\n            }\n\n            if (angle === -90) {\n                break;\n            }\n        }\n\n        if (angle !== 0) {\n            for (var idx$1 = 0; idx$1 < labels.length; idx$1++) {\n                labels[idx$1].options.rotation = angle;\n                labels[idx$1].reflow(new Box());\n            }\n\n            return true;\n        }\n    },\n\n    arrangeTitle: function() {\n        var ref = this;\n        var options = ref.options;\n        var title = ref.title;\n        var mirror = options.labels.mirror;\n        var vertical = options.vertical;\n\n        if (title) {\n            if (vertical) {\n                title.options.align = mirror ? RIGHT : LEFT;\n                title.options.vAlign = title.options.position;\n            } else {\n                title.options.align = title.options.position;\n                title.options.vAlign = mirror ? TOP : BOTTOM;\n            }\n\n            title.reflow(this.box);\n        }\n    },\n\n    arrangeNotes: function() {\n        var this$1 = this;\n\n        for (var idx = 0; idx < this.notes.length; idx++) {\n            var item = this$1.notes[idx];\n            var value = item.options.value;\n            var slot = (void 0);\n\n            if (defined(value)) {\n                if (this$1.shouldRenderNote(value)) {\n                    item.show();\n                } else {\n                    item.hide();\n                }\n\n                slot = this$1.noteSlot(value);\n            } else {\n                item.hide();\n            }\n\n            item.reflow(slot || this$1.lineBox());\n        }\n    },\n\n    noteSlot: function(value) {\n        return this.getSlot(value);\n    },\n\n    alignTo: function(secondAxis) {\n        var lineBox = secondAxis.lineBox();\n        var vertical = this.options.vertical;\n        var pos = vertical ? Y : X;\n\n        this.box.snapTo(lineBox, pos);\n        if (vertical) {\n            this.box.shrink(0, this.lineBox().height() - lineBox.height());\n        } else {\n            this.box.shrink(this.lineBox().width() - lineBox.width(), 0);\n        }\n        this.box[pos + 1] -= this.lineBox()[pos + 1] - lineBox[pos + 1];\n        this.box[pos + 2] -= this.lineBox()[pos + 2] - lineBox[pos + 2];\n    },\n\n    axisLabelText: function(value, options, context) {\n        var this$1 = this;\n\n        var text;\n        var tmpl = getTemplate(options);\n        var defaultText = function () {\n            if (!options.format) {\n                return value;\n            }\n\n            return this$1.chartService.format.localeAuto(\n                options.format, [ value ], options.culture\n            );\n        };\n\n        if (tmpl) {\n            var templateContext = $.extend({}, context, {\n                get text() { return defaultText(); },\n                value: value,\n                format: options.format,\n                culture: options.culture\n            });\n\n            text = tmpl(templateContext);\n        } else {\n            text = defaultText();\n        }\n\n        return text;\n    },\n\n    slot: function(from , to, limit) {\n        var slot = this.getSlot(from, to, limit);\n        if (slot) {\n            return slot.toRect();\n        }\n    },\n\n    contentBox: function() {\n        var box = this.box.clone();\n        var labels = this.labels;\n        if (labels.length) {\n            var axis = this.options.vertical ? Y : X;\n            if (this.chartService.isPannable(axis)) {\n                var offset = this.maxLabelOffset();\n                box[axis + 1] -= offset.start;\n                box[axis + 2] += offset.end;\n            } else {\n                if (labels[0].options.visible) {\n                    box.wrap(labels[0].box);\n                }\n                var lastLabel = labels[labels.length - 1];\n                if (lastLabel.options.visible) {\n                    box.wrap(lastLabel.box);\n                }\n            }\n        }\n\n        return box;\n    },\n\n    maxLabelOffset: function() {\n        var this$1 = this;\n\n        var ref = this.options;\n        var vertical = ref.vertical;\n        var reverse = ref.reverse;\n        var labelsBetweenTicks = this.labelsBetweenTicks();\n        var tickPositions = this.getLabelsTickPositions();\n        var offsetField = vertical ? Y : X;\n        var labels = this.labels;\n        var startPosition = reverse ? 1 : 0;\n        var endPosition = reverse ? 0 : 1;\n        var maxStartOffset = 0;\n        var maxEndOffset = 0;\n\n        for (var idx = 0; idx < labels.length; idx++) {\n            var label = labels[idx];\n            var tickIx = this$1.labelTickIndex(label);\n            var startTick = (void 0), endTick = (void 0);\n\n            if (labelsBetweenTicks) {\n                startTick = tickPositions[tickIx + startPosition];\n                endTick = tickPositions[tickIx + endPosition];\n            } else {\n                startTick = endTick = tickPositions[tickIx];\n            }\n\n            maxStartOffset = Math.max(maxStartOffset, startTick - label.box[offsetField + 1]);\n            maxEndOffset = Math.max(maxEndOffset, label.box[offsetField + 2] - endTick);\n        }\n\n        return {\n            start: maxStartOffset,\n            end: maxEndOffset\n        };\n    },\n\n    limitRange: function(from, to, min, max, offset) {\n        var options = this.options;\n\n        if ((from < min && offset < 0 && (!defined(options.min) || options.min <= min)) || (max < to && offset > 0 && (!defined(options.max) || max <= options.max))) {\n            return null;\n        }\n\n        if ((to < min && offset > 0) || (max < from && offset < 0)) {\n            return {\n                min: from,\n                max: to\n            };\n        }\n\n        var rangeSize = to - from;\n        var minValue = from;\n        var maxValue = to;\n\n        if (from < min && offset < 0) {\n            minValue = limitValue(from, min, max);\n            maxValue = limitValue(from + rangeSize, min + rangeSize, max);\n        } else if (to > max && offset > 0) {\n            maxValue = limitValue(to, min, max);\n            minValue = limitValue(to - rangeSize, min, max - rangeSize);\n        }\n\n        return {\n            min: minValue,\n            max: maxValue\n        };\n    },\n\n    valueRange: function() {\n        return {\n            min: this.seriesMin,\n            max: this.seriesMax\n        };\n    },\n\n    lineDir: function() {\n        /*\n         * Axis line direction:\n         *   * Vertical: up.\n         *   * Horizontal: right.\n         */\n\n        var ref = this.options;\n        var vertical = ref.vertical;\n        var reverse = ref.reverse;\n        return (vertical ? -1 : 1) * (reverse ? -1 : 1);\n    },\n\n    lineInfo: function() {\n        var ref = this.options;\n        var vertical = ref.vertical;\n        var lineBox = this.lineBox();\n        var lineSize = vertical ? lineBox.height() : lineBox.width();\n        var axis = vertical ? Y : X;\n        var axisDir = this.lineDir();\n        var startEdge = axisDir === 1 ? 1 : 2;\n        var axisOrigin = axis + startEdge.toString();\n        var lineStart = lineBox[axisOrigin];\n\n        return {\n            axis: axis,\n            axisOrigin: axisOrigin,\n            axisDir: axisDir,\n            lineBox: lineBox,\n            lineSize: lineSize,\n            lineStart: lineStart\n        };\n    },\n\n    pointOffset: function(point) {\n        var ref = this.lineInfo();\n        var axis = ref.axis;\n        var axisDir = ref.axisDir;\n        var axisOrigin = ref.axisOrigin;\n        var lineBox = ref.lineBox;\n        var lineSize = ref.lineSize;\n        var relative = axisDir > 0 ? point[axis] - lineBox[axisOrigin] : lineBox[axisOrigin] - point[axis];\n        var offset = relative / lineSize;\n\n        return offset;\n    },\n\n    scaleToDelta: function(rawScale, range) {\n        // Scale >= 1 would result in axis range of 0.\n        // Scale <= -1 would reverse the scale direction.\n        var MAX_SCALE = 0.999;\n        var scale = limitValue(rawScale, -MAX_SCALE, MAX_SCALE);\n\n        var delta;\n        if (scale > 0) {\n            delta = range * Math.min(1, scale);\n        } else {\n            delta = range - (range / (1 + scale));\n        }\n\n        return delta;\n    },\n\n    labelsBetweenTicks: function() {\n        return !this.options.justified;\n    },\n\n    prepareUserOptions: function() {\n    }\n});\n\nsetDefaultOptions(Axis, {\n    labels: {\n        visible: true,\n        rotation: 0,\n        mirror: false,\n        step: 1,\n        skip: 0\n    },\n    line: {\n        width: 1,\n        color: BLACK,\n        visible: true\n    },\n    title: {\n        visible: true,\n        position: CENTER\n    },\n    majorTicks: {\n        align: OUTSIDE,\n        size: 4,\n        skip: 0,\n        step: 1\n    },\n    minorTicks: {\n        align: OUTSIDE,\n        size: 3,\n        skip: 0,\n        step: 1\n    },\n    axisCrossingValue: 0,\n    majorTickType: OUTSIDE,\n    minorTickType: NONE,\n    majorGridLines: {\n        skip: 0,\n        step: 1\n    },\n    minorGridLines: {\n        visible: false,\n        width: 1,\n        color: BLACK,\n        skip: 0,\n        step: 1\n    },\n    // TODO: Move to line or labels options\n    margin: 5,\n    visible: true,\n    reverse: false,\n    justified: true,\n    notes: {\n        label: {\n            text: \"\"\n        }\n    },\n\n    _alignLines: true,\n    _deferLabels: false\n});\n\nvar MILLISECONDS = \"milliseconds\";\nvar SECONDS = \"seconds\";\nvar MINUTES = \"minutes\";\nvar HOURS = \"hours\";\nvar DAYS = \"days\";\nvar WEEKS = \"weeks\";\nvar MONTHS = \"months\";\nvar YEARS = \"years\";\n\nvar TIME_PER_MILLISECOND = 1;\nvar TIME_PER_SECOND = 1000;\nvar TIME_PER_MINUTE = 60 * TIME_PER_SECOND;\nvar TIME_PER_HOUR = 60 * TIME_PER_MINUTE;\nvar TIME_PER_DAY = 24 * TIME_PER_HOUR;\nvar TIME_PER_WEEK = 7 * TIME_PER_DAY;\nvar TIME_PER_MONTH = 31 * TIME_PER_DAY;\nvar TIME_PER_YEAR = 365 * TIME_PER_DAY;\nvar TIME_PER_UNIT = {\n    \"years\": TIME_PER_YEAR,\n    \"months\": TIME_PER_MONTH,\n    \"weeks\": TIME_PER_WEEK,\n    \"days\": TIME_PER_DAY,\n    \"hours\": TIME_PER_HOUR,\n    \"minutes\": TIME_PER_MINUTE,\n    \"seconds\": TIME_PER_SECOND,\n    \"milliseconds\": TIME_PER_MILLISECOND\n};\n\nfunction absoluteDateDiff(a, b) {\n    var diff = a.getTime() - b;\n    var offsetDiff = a.getTimezoneOffset() - b.getTimezoneOffset();\n\n    return diff - (offsetDiff * TIME_PER_MINUTE);\n}\n\nfunction addTicks(date, ticks) {\n    return new Date(date.getTime() + ticks);\n}\n\nfunction toDate(value) {\n    var result;\n\n    if (value instanceof Date) {\n        result = value;\n    } else if (value) {\n        result = new Date(value);\n    }\n\n    return result;\n}\n\nfunction startOfWeek(date, weekStartDay) {\n    if (weekStartDay === void 0) { weekStartDay = 0; }\n\n    var daysToSubtract = 0;\n    var day = date.getDay();\n\n    if (!isNaN(day)) {\n        while (day !== weekStartDay) {\n            if (day === 0) {\n                day = 6;\n            } else {\n                day--;\n            }\n\n            daysToSubtract++;\n        }\n    }\n\n    return addTicks(date, -daysToSubtract * TIME_PER_DAY);\n}\n\nfunction adjustDST(date, hours) {\n    if (hours === 0 && date.getHours() === 23) {\n        date.setHours(date.getHours() + 2);\n        return true;\n    }\n\n    return false;\n}\n\nfunction addHours(date, hours) {\n    var roundedDate = new Date(date);\n\n    roundedDate.setMinutes(0, 0, 0);\n\n    var tzDiff = (date.getTimezoneOffset() - roundedDate.getTimezoneOffset()) * TIME_PER_MINUTE;\n\n    return addTicks(roundedDate, tzDiff + hours * TIME_PER_HOUR);\n}\n\nfunction addDuration(dateValue, value, unit, weekStartDay) {\n    var result = dateValue;\n\n    if (dateValue) {\n        var date = toDate(dateValue);\n        var hours = date.getHours();\n\n        if (unit === YEARS) {\n            result = new Date(date.getFullYear() + value, 0, 1);\n            adjustDST(result, 0);\n        } else if (unit === MONTHS) {\n            result = new Date(date.getFullYear(), date.getMonth() + value, 1);\n            adjustDST(result, hours);\n        } else if (unit === WEEKS) {\n            result = addDuration(startOfWeek(date, weekStartDay), value * 7, DAYS);\n            adjustDST(result, hours);\n        } else if (unit === DAYS) {\n            result = new Date(date.getFullYear(), date.getMonth(), date.getDate() + value);\n            adjustDST(result, hours);\n        } else if (unit === HOURS) {\n            result = addHours(date, value);\n        } else if (unit === MINUTES) {\n            result = addTicks(date, value * TIME_PER_MINUTE);\n\n            if (result.getSeconds() > 0) {\n                result.setSeconds(0);\n            }\n        } else if (unit === SECONDS) {\n            result = addTicks(date, value * TIME_PER_SECOND);\n        } else if (unit === MILLISECONDS) {\n            result = addTicks(date, value);\n        }\n\n        if (unit !== MILLISECONDS && result.getMilliseconds() > 0) {\n            result.setMilliseconds(0);\n        }\n    }\n\n    return result;\n}\n\nfunction floorDate(date, unit, weekStartDay) {\n    return addDuration(toDate(date), 0, unit, weekStartDay);\n}\n\nfunction ceilDate(dateValue, unit, weekStartDay) {\n    var date = toDate(dateValue);\n\n    if (date && floorDate(date, unit, weekStartDay).getTime() === date.getTime()) {\n        return date;\n    }\n\n    return addDuration(date, 1, unit, weekStartDay);\n}\n\nfunction dateComparer(a, b) {\n    if (a && b) {\n        return a.getTime() - b.getTime();\n    }\n\n    return -1;\n}\n\nfunction dateDiff(a, b) {\n    return a.getTime() - b;\n}\n\nfunction toTime(value) {\n    if (isArray(value)) {\n        var result = [];\n        for (var idx = 0; idx < value.length; idx++) {\n            result.push(toTime(value[idx]));\n        }\n\n        return result;\n    } else if (value) {\n        return toDate(value).getTime();\n    }\n}\n\nfunction dateEquals(a, b) {\n    if (a && b) {\n        return toTime(a) === toTime(b);\n    }\n\n    return a === b;\n}\n\nfunction timeIndex(date, start, baseUnit) {\n    return absoluteDateDiff(date, start) / TIME_PER_UNIT[baseUnit];\n}\n\nfunction dateIndex(value, start, baseUnit, baseUnitStep) {\n    var date = toDate(value);\n    var startDate = toDate(start);\n    var index;\n\n    if (baseUnit === MONTHS) {\n        index = (date.getMonth() - startDate.getMonth() + (date.getFullYear() - startDate.getFullYear()) * 12) +\n            timeIndex(date, new Date(date.getFullYear(), date.getMonth()), DAYS) / new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();\n    } else if (baseUnit === YEARS) {\n        index = date.getFullYear() - startDate.getFullYear() + dateIndex(date, new Date(date.getFullYear(), 0), MONTHS, 1) / 12;\n    } else if (baseUnit === DAYS || baseUnit === WEEKS) {\n        index = timeIndex(date, startDate, baseUnit);\n    } else {\n        index = dateDiff(date, start) / TIME_PER_UNIT[baseUnit];\n    }\n\n    return index / baseUnitStep;\n}\n\nfunction duration(a, b, unit) {\n    var diff;\n\n    if (unit === YEARS) {\n        diff = b.getFullYear() - a.getFullYear();\n    } else if (unit === MONTHS) {\n        diff = duration(a, b, YEARS) * 12 + b.getMonth() - a.getMonth();\n    } else if (unit === DAYS) {\n        diff = Math.floor(dateDiff(b, a) / TIME_PER_DAY);\n    } else {\n        diff = Math.floor(dateDiff(b, a) / TIME_PER_UNIT[unit]);\n    }\n\n    return diff;\n}\n\nfunction lteDateIndex(date, sortedDates) {\n    var low = 0;\n    var high = sortedDates.length - 1;\n    var index;\n\n    while (low <= high) {\n        index = Math.floor((low + high) / 2);\n        var currentDate = sortedDates[index];\n\n        if (currentDate < date) {\n            low = index + 1;\n            continue;\n        }\n\n        if (currentDate > date) {\n            high = index - 1;\n            continue;\n        }\n\n        while (dateEquals(sortedDates[index - 1], date)) {\n            index--;\n        }\n\n        return index;\n    }\n\n    if (sortedDates[index] <= date) {\n        return index;\n    }\n\n    return index - 1;\n}\n\nfunction parseDate(intlService, date) {\n    var result;\n    if (isString(date)) {\n        result = intlService.parseDate(date) || toDate(date);\n    } else {\n        result = toDate(date);\n    }\n    return result;\n}\n\nfunction parseDates(intlService, dates) {\n    if (isArray(dates)) {\n        var result = [];\n        for (var idx = 0; idx < dates.length; idx++) {\n            result.push(parseDate(intlService, dates[idx]));\n        }\n\n        return result;\n    }\n\n    return parseDate(intlService, dates);\n}\n\nfunction firstDay(options, intlService) {\n    if (isNumber(options.weekStartDay)) {\n        return options.weekStartDay;\n    }\n\n    if (intlService && intlService.firstDay) {\n        return intlService.firstDay();\n    }\n\n    return 0;\n}\n\nvar MIN_CATEGORY_POINTS_RANGE = 0.01;\nvar MIN_CATEGORY_RANGE = 0.1;\n\nfunction indexOf(value, arr) {\n    if (value instanceof Date) {\n        var length = arr.length;\n        for (var idx = 0; idx < length; idx++) {\n            if (dateEquals(arr[idx], value)) {\n                return idx;\n            }\n        }\n\n        return -1;\n    }\n\n    return arr.indexOf(value);\n}\n\nvar CategoryAxis = Axis.extend({\n    initFields: function() {\n        this._ticks = {};\n    },\n\n    categoriesHash: function() {\n        return \"\";\n    },\n\n    clone: function() {\n        var copy = new CategoryAxis($.extend({}, this.options, {\n            categories: this.options.srcCategories\n        }), this.chartService);\n        copy.createLabels();\n\n        return copy;\n    },\n\n    initUserOptions: function(options) {\n        var categories = options.categories || [];\n        var definedMin = defined(options.min);\n        var definedMax = defined(options.max);\n        options.srcCategories = options.categories = categories;\n\n        if ((definedMin || definedMax) && categories.length) {\n            var min = definedMin ? Math.floor(options.min) : 0;\n            var max;\n\n            if (definedMax) {\n                max = options.justified ? Math.floor(options.max) + 1 : Math.ceil(options.max);\n            } else {\n                max = categories.length;\n            }\n\n            options.categories = options.categories.slice(min, max);\n        }\n\n        return options;\n    },\n\n    rangeIndices: function() {\n        var options = this.options;\n        var length = options.categories.length || 1;\n        var min = isNumber(options.min) ? options.min % 1 : 0;\n        var max;\n\n        if (isNumber(options.max) && options.max % 1 !== 0 && options.max < this.totalRange().max) {\n            max = length - (1 - options.max % 1);\n        } else {\n            max = length - (options.justified ? 1 : 0);\n        }\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    totalRangeIndices: function(limit) {\n        var options = this.options;\n        var min = isNumber(options.min) ? options.min : 0;\n        var max;\n\n        if (isNumber(options.max)) {\n            max = options.max;\n        } else if (isNumber(options.min)) {\n            max = min + options.categories.length;\n        } else {\n            max = this.totalRange().max || 1;\n        }\n\n        if (limit) {\n            var totalRange = this.totalRange();\n            min = limitValue(min, 0, totalRange.max);\n            max = limitValue(max, 0, totalRange.max);\n        }\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    range: function() {\n        var options = this.options;\n        var min = isNumber(options.min) ? options.min : 0;\n        var max = isNumber(options.max) ? options.max : this.totalRange().max;\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    roundedRange: function() {\n        return this.range();\n    },\n\n    totalRange: function() {\n        var options = this.options;\n        return { min: 0, max: Math.max(this._seriesMax || 0, options.srcCategories.length) - (options.justified ? 1 : 0) };\n    },\n\n    scaleOptions: function() {\n        var ref = this.rangeIndices();\n        var min = ref.min;\n        var max = ref.max;\n        var lineBox = this.lineBox();\n        var size = this.options.vertical ? lineBox.height() : lineBox.width();\n        var scale = size / ((max - min) || 1);\n\n        return {\n            scale: scale * (this.options.reverse ? -1 : 1),\n            box: lineBox,\n            min: min,\n            max: max\n        };\n    },\n\n    arrangeLabels: function() {\n        Axis.fn.arrangeLabels.call(this);\n        this.hideOutOfRangeLabels();\n    },\n\n    hideOutOfRangeLabels: function() {\n        var ref = this;\n        var box = ref.box;\n        var labels = ref.labels;\n\n        if (labels.length > 0) {\n            var valueAxis = this.options.vertical ? Y : X;\n            var start = box[valueAxis + 1];\n            var end = box[valueAxis + 2];\n            var firstLabel = labels[0];\n            var lastLabel = last(labels);\n\n            if (firstLabel.box[valueAxis + 1] > end || firstLabel.box[valueAxis + 2] < start) {\n                firstLabel.options.visible = false;\n            }\n            if (lastLabel.box[valueAxis + 1] > end || lastLabel.box[valueAxis + 2] < start) {\n                lastLabel.options.visible = false;\n            }\n        }\n    },\n\n    getMajorTickPositions: function() {\n        return this.getTicks().majorTicks;\n    },\n\n    getMinorTickPositions: function() {\n        return this.getTicks().minorTicks;\n    },\n\n    getLabelsTickPositions: function() {\n        return this.getTicks().labelTicks;\n    },\n\n    tickIndices: function(stepSize) {\n        var ref = this.rangeIndices();\n        var min = ref.min;\n        var max = ref.max;\n        var limit = Math.ceil(max);\n        var current = Math.floor(min);\n        var indices = [];\n\n        while (current <= limit) {\n            indices.push(current);\n            current += stepSize;\n        }\n\n        return indices;\n    },\n\n    getTickPositions: function(stepSize) {\n        var ref = this.options;\n        var vertical = ref.vertical;\n        var reverse = ref.reverse;\n        var ref$1 = this.scaleOptions();\n        var scale = ref$1.scale;\n        var box = ref$1.box;\n        var min = ref$1.min;\n        var pos = box[(vertical ? Y : X) + (reverse ? 2 : 1)];\n        var indices = this.tickIndices(stepSize);\n        var positions = [];\n\n        for (var idx = 0; idx < indices.length; idx++) {\n            positions.push(pos + round(scale * (indices[idx] - min), COORD_PRECISION));\n        }\n\n        return positions;\n    },\n\n    getTicks: function() {\n        var options = this.options;\n        var cache = this._ticks;\n        var range = this.rangeIndices();\n        var lineBox = this.lineBox();\n        var hash = lineBox.getHash() + range.min + \",\" + range.max + options.reverse + options.justified;\n\n        if (cache._hash !== hash) {\n            var hasMinor = options.minorTicks.visible || options.minorGridLines.visible;\n            cache._hash = hash;\n            cache.labelTicks = this.getTickPositions(1);\n            cache.majorTicks = this.filterOutOfRangePositions(cache.labelTicks, lineBox);\n            cache.minorTicks = hasMinor ? this.filterOutOfRangePositions(this.getTickPositions(0.5), lineBox) : [];\n        }\n\n        return cache;\n    },\n\n    filterOutOfRangePositions: function(positions, lineBox) {\n        if (!positions.length) {\n            return positions;\n        }\n\n        var axis = this.options.vertical ? Y : X;\n        var inRange = function (position) { return lineBox[axis + 1] <= position && position <= lineBox[axis + 2]; };\n\n        var end = positions.length - 1;\n        var startIndex = 0;\n        while (!inRange(positions[startIndex]) && startIndex <= end) {\n            startIndex++;\n        }\n\n        var endIndex = end;\n\n        while (!inRange(positions[endIndex]) && endIndex >= 0) {\n            endIndex--;\n        }\n\n        return positions.slice(startIndex, endIndex + 1);\n    },\n\n    lineInfo: function() {\n        var ref = this.options;\n        var vertical = ref.vertical;\n        var reverse = ref.reverse;\n        var lineBox = this.lineBox();\n        var lineSize = vertical ? lineBox.height() : lineBox.width();\n        var axis = vertical ? Y : X;\n        var axisDir = reverse ? -1 : 1;\n        var startEdge = axisDir === 1 ? 1 : 2;\n        var axisOrigin = axis + startEdge.toString();\n        var lineStart = lineBox[axisOrigin];\n\n        return {\n            axis: axis,\n            axisOrigin: axisOrigin,\n            axisDir: axisDir,\n            lineBox: lineBox,\n            lineSize: lineSize,\n            lineStart: lineStart\n        };\n    },\n\n    lineDir: function() {\n        /*\n         *  Category axis line direction:\n         *    * Vertical: down.\n         *    * Horizontal: right.\n         */\n\n        var ref = this.options;\n        var reverse = ref.reverse;\n        return reverse ? -1 : 1;\n    },\n\n    getSlot: function(from, to, limit) {\n        var options = this.options;\n        var reverse = options.reverse;\n        var justified = options.justified;\n        var ref = this.scaleOptions();\n        var scale = ref.scale;\n        var box = ref.box;\n        var min = ref.min;\n        var ref$1 = this.lineInfo();\n        var valueAxis = ref$1.axis;\n        var lineStart = ref$1.lineStart;\n\n        var slotBox = box.clone();\n        var singleSlot = !defined(to);\n\n        var start = valueOrDefault(from, 0);\n        var end = valueOrDefault(to, start);\n        end = Math.max(end - 1, start);\n\n        // Fixes transient bug caused by iOS 6.0 JIT\n        // (one can never be too sure)\n        end = Math.max(start, end);\n\n        var p1 = lineStart + (start - min) * scale;\n        var p2 = lineStart + (end + 1 - min) * scale;\n\n        if (singleSlot && justified) {\n            p2 = p1;\n        }\n\n        if (limit) {\n            p1 = limitValue(p1, box[valueAxis + 1], box[valueAxis + 2]);\n            p2 = limitValue(p2, box[valueAxis + 1], box[valueAxis + 2]);\n        }\n\n        slotBox[valueAxis + 1] = reverse ? p2 : p1;\n        slotBox[valueAxis + 2] = reverse ? p1 : p2;\n\n        return slotBox;\n    },\n\n    limitSlot: function(slot) {\n        var vertical = this.options.vertical;\n        var valueAxis = vertical ? Y : X;\n        var lineBox = this.lineBox();\n        var limittedSlot = slot.clone();\n\n        limittedSlot[valueAxis + 1] = limitValue(slot[valueAxis + 1], lineBox[valueAxis + 1], lineBox[valueAxis + 2]);\n        limittedSlot[valueAxis + 2] = limitValue(slot[valueAxis + 2], lineBox[valueAxis + 1], lineBox[valueAxis + 2]);\n\n        return limittedSlot;\n    },\n\n    slot: function(from, to, limit) {\n        var min = Math.floor(this.options.min || 0);\n        var start = from;\n        var end = to;\n\n        if (typeof start === \"string\") {\n            start = this.categoryIndex(start);\n        } else if (isNumber(start)) {\n            start -= min;\n        }\n\n        if (typeof end === \"string\") {\n            end = this.categoryIndex(end);\n        } else if (isNumber(end)) {\n            end -= min;\n        }\n\n        return Axis.fn.slot.call(this, start, end, limit);\n    },\n\n    pointCategoryIndex: function(point) {\n        var ref = this.options;\n        var reverse = ref.reverse;\n        var justified = ref.justified;\n        var vertical = ref.vertical;\n        var valueAxis = vertical ? Y : X;\n        var ref$1 = this.scaleOptions();\n        var scale = ref$1.scale;\n        var box = ref$1.box;\n        var min = ref$1.min;\n        var max = ref$1.max;\n        var startValue = reverse ? max : min;\n        var lineStart = box[valueAxis + 1];\n        var lineEnd = box[valueAxis + 2];\n        var pos = point[valueAxis];\n\n        if (pos < lineStart || pos > lineEnd) {\n            return null;\n        }\n\n        var value = startValue + (pos - lineStart) / scale;\n        var diff = value % 1;\n\n        if (justified) {\n            value = Math.round(value);\n        } else if (diff === 0 && value > 0) {\n            value--;\n        }\n\n        return Math.floor(value);\n    },\n\n    getCategory: function(point) {\n        var index = this.pointCategoryIndex(point);\n\n        if (index === null) {\n            return null;\n        }\n\n        return this.options.categories[index];\n    },\n\n    categoryIndex: function(value) {\n        return this.totalIndex(value) - Math.floor(this.options.min || 0);\n    },\n\n    categoryAt: function(index, total) {\n        var options = this.options;\n\n        return (total ? options.srcCategories : options.categories)[index];\n    },\n\n    categoriesCount: function() {\n        return (this.options.categories || []).length;\n    },\n\n    translateRange: function(delta) {\n        var options = this.options;\n        var lineBox = this.lineBox();\n        var size = options.vertical ? lineBox.height() : lineBox.width();\n        var range = options.categories.length;\n        var scale = size / range;\n        var offset = round(delta / scale, DEFAULT_PRECISION);\n\n        return {\n            min: offset,\n            max: range + offset\n        };\n    },\n\n    scaleRange: function(scale, cursor) {\n        var position = Math.abs(this.pointOffset(cursor));\n        var rangeIndices = this.totalRangeIndices();\n        var range = rangeIndices.max - rangeIndices.min;\n        var delta = this.scaleToDelta(scale, range);\n        var minDelta = position * delta;\n        var maxDelta = (1 - position) * delta;\n        var min = rangeIndices.min + minDelta;\n        var max = rangeIndices.max - maxDelta;\n\n        if (max - min < MIN_CATEGORY_RANGE) {\n            max = min + MIN_CATEGORY_RANGE;\n        }\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    zoomRange: function(scale, cursor) {\n        var ref = this.totalRange();\n        var totalMin = ref.min;\n        var totalMax = ref.max;\n        var range = this.scaleRange(scale, cursor);\n\n        return {\n            min: limitValue(range.min, totalMin, totalMax),\n            max: limitValue(range.max, totalMin, totalMax)\n        };\n    },\n\n    labelsCount: function() {\n        var labelsRange = this.labelsRange();\n\n        return labelsRange.max - labelsRange.min;\n    },\n\n    labelsRange: function() {\n        var options = this.options;\n        var justified = options.justified;\n        var labelOptions = options.labels;\n        var ref = this.totalRangeIndices(true);\n        var min = ref.min;\n        var max = ref.max;\n        var start = Math.floor(min);\n\n        if (!justified) {\n            min = Math.floor(min);\n            max = Math.ceil(max);\n        } else {\n            min = Math.ceil(min);\n            max = Math.floor(max);\n        }\n\n        var skip;\n\n        if (min > labelOptions.skip) {\n            skip = labelOptions.skip + labelOptions.step * Math.ceil((min - labelOptions.skip) / labelOptions.step);\n        } else {\n            skip = labelOptions.skip;\n        }\n\n        return {\n            min: skip - start,\n            max: (options.categories.length ? max + (justified ? 1 : 0) : 0) - start\n        };\n    },\n\n    createAxisLabel: function(index, labelOptions, labelContext) {\n        var options = this.options;\n        var dataItem = options.dataItems ? options.dataItems[index] : null;\n        var category = valueOrDefault(options.categories[index], \"\");\n\n        labelContext.dataItem = dataItem;\n        var text = this.axisLabelText(category, labelOptions, labelContext);\n\n        return new AxisLabel(category, text, index, dataItem, labelOptions);\n    },\n\n    shouldRenderNote: function(value) {\n        var range = this.totalRangeIndices();\n\n        return Math.floor(range.min) <= value && value <= Math.ceil(range.max);\n    },\n\n    noteSlot: function(value) {\n        var options = this.options;\n        var index = value - Math.floor(options.min || 0);\n        return this.getSlot(index);\n    },\n\n    arrangeNotes: function() {\n        Axis.fn.arrangeNotes.call(this);\n        this.hideOutOfRangeNotes();\n    },\n\n    hideOutOfRangeNotes: function() {\n        var ref = this;\n        var notes = ref.notes;\n        var box = ref.box;\n        if (notes && notes.length) {\n            var valueAxis = this.options.vertical ? Y : X;\n            var start = box[valueAxis + 1];\n            var end = box[valueAxis + 2];\n\n            for (var idx = 0; idx < notes.length; idx++) {\n                var note = notes[idx];\n                if (note.box && (end < note.box[valueAxis + 1] || note.box[valueAxis + 2] < start)) {\n                    note.hide();\n                }\n            }\n        }\n    },\n\n    pan: function(delta) {\n        var range = this.totalRangeIndices(true);\n        var ref = this.scaleOptions();\n        var scale = ref.scale;\n        var offset = round(delta / scale, DEFAULT_PRECISION);\n        var totalRange = this.totalRange();\n        var min = range.min + offset;\n        var max = range.max + offset;\n\n        return this.limitRange(min, max, 0, totalRange.max, offset);\n    },\n\n    pointsRange: function(start, end) {\n        var ref = this.options;\n        var reverse = ref.reverse;\n        var vertical = ref.vertical;\n        var valueAxis = vertical ? Y : X;\n        var range = this.totalRangeIndices(true);\n        var ref$1 = this.scaleOptions();\n        var scale = ref$1.scale;\n        var box = ref$1.box;\n        var lineStart = box[valueAxis + (reverse ? 2 : 1)];\n\n        var diffStart = start[valueAxis] - lineStart;\n        var diffEnd = end[valueAxis] - lineStart;\n\n        var min = range.min + diffStart / scale;\n        var max = range.min + diffEnd / scale;\n        var rangeMin = Math.min(min, max);\n        var rangeMax = Math.max(min, max);\n\n        if (rangeMax - rangeMin >= MIN_CATEGORY_POINTS_RANGE) {\n            return {\n                min: rangeMin,\n                max: rangeMax\n            };\n        }\n    },\n\n    valueRange: function() {\n        return this.range();\n    },\n\n    totalIndex: function(value) {\n        var options = this.options;\n        var index = this._categoriesMap ?\n            this._categoriesMap.get(value) : indexOf(value, options.srcCategories);\n\n        return index;\n    },\n\n    currentRangeIndices: function() {\n        var options = this.options;\n        var min = 0;\n\n        if (isNumber(options.min)) {\n            min = Math.floor(options.min);\n        }\n\n        var max;\n        if (isNumber(options.max)) {\n            max = options.justified ? Math.floor(options.max) : Math.ceil(options.max) - 1;\n        } else {\n            max = this.totalCount() - 1;\n        }\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    mapCategories: function() {\n        if (!this._categoriesMap) {\n            var map$$1 = this._categoriesMap = new HashMap();\n            var srcCategories = this.options.srcCategories;\n            for (var idx = 0; idx < srcCategories.length; idx++) {\n                map$$1.set(srcCategories[idx], idx);\n            }\n        }\n    },\n\n    totalCount: function() {\n        return Math.max(this.options.srcCategories.length, this._seriesMax || 0);\n    }\n});\n\nsetDefaultOptions(CategoryAxis, {\n    type: \"category\",\n    vertical: false,\n    majorGridLines: {\n        visible: false,\n        width: 1,\n        color: BLACK\n    },\n    labels: {\n        zIndex: 1\n    },\n    justified: false,\n    _deferLabels: true\n});\n\nvar COORDINATE_LIMIT = 300000;\n\nvar DateLabelFormats = {\n    milliseconds: \"HH:mm:ss.fff\",\n    seconds: \"HH:mm:ss\",\n    minutes: \"HH:mm\",\n    hours: \"HH:mm\",\n    days: \"M/d\",\n    weeks: \"M/d\",\n    months: \"MMM 'yy\",\n    years: \"yyyy\"\n};\n\nvar ZERO_THRESHOLD = 0.2;\n\nvar AUTO = \"auto\";\nvar BASE_UNITS = [\n    MILLISECONDS, SECONDS, MINUTES, HOURS, DAYS, WEEKS, MONTHS, YEARS\n];\nvar FIT = \"fit\";\n\nfunction categoryRange(categories) {\n    var range = categories._range;\n    if (!range) {\n        range = categories._range = sparseArrayLimits(categories);\n        range.min = toDate(range.min);\n        range.max = toDate(range.max);\n    }\n\n    return range;\n}\n\nvar EmptyDateRange = Class.extend({\n    init: function(options) {\n        this.options = options;\n    },\n\n    displayIndices: function() {\n        return {\n            min: 0,\n            max: 1\n        };\n    },\n\n    displayRange: function() {\n        return {};\n    },\n\n    total: function() {\n        return {};\n    },\n\n    valueRange: function() {\n        return {};\n    },\n\n    valueIndex: function() {\n        return -1;\n    },\n\n    values: function() {\n        return [];\n    },\n\n    totalIndex: function() {\n        return -1;\n    },\n\n    valuesCount: function() {\n        return 0;\n    },\n\n    totalCount: function() {\n        return 0;\n    },\n\n    dateAt: function() {\n        return null;\n    }\n});\n\nvar DateRange = Class.extend({\n    init: function(start, end, options) {\n        this.options = options;\n        options.baseUnitStep = options.baseUnitStep || 1;\n\n        var roundToBaseUnit = options.roundToBaseUnit;\n        var justified = options.justified;\n\n        this.start = addDuration(start, 0, options.baseUnit, options.weekStartDay);\n        var lowerEnd = this.roundToTotalStep(end);\n        var expandEnd = !justified && dateEquals(end, lowerEnd) && !options.justifyEnd;\n\n        this.end = this.roundToTotalStep(end, !justified, expandEnd ? 1 : 0);\n\n        var min = options.min || start;\n        this.valueStart = this.roundToTotalStep(min);\n        this.displayStart = roundToBaseUnit ? this.valueStart : min;\n\n        var max = options.max;\n        if (!max) {\n            this.valueEnd = lowerEnd;\n            this.displayEnd = roundToBaseUnit || expandEnd ? this.end : end;\n        } else {\n            var next = !justified && dateEquals(max, this.roundToTotalStep(max)) ? -1 : 0;\n            this.valueEnd = this.roundToTotalStep(max, false, next);\n            this.displayEnd = roundToBaseUnit ? this.roundToTotalStep(max, !justified) : options.max;\n        }\n\n        if (this.valueEnd < this.valueStart) {\n            this.valueEnd = this.valueStart;\n        }\n        if (this.displayEnd <= this.displayStart) {\n            this.displayEnd = this.roundToTotalStep(this.displayStart, false, 1);\n        }\n    },\n\n    displayRange: function() {\n        return {\n            min: this.displayStart,\n            max: this.displayEnd\n        };\n    },\n\n    displayIndices: function() {\n        if (!this._indices) {\n            var options = this.options;\n\n            var baseUnit = options.baseUnit;\n            var baseUnitStep = options.baseUnitStep;\n\n            var minIdx = dateIndex(this.displayStart, this.valueStart, baseUnit, baseUnitStep);\n            var maxIdx = dateIndex(this.displayEnd, this.valueStart, baseUnit, baseUnitStep);\n\n            this._indices = { min: minIdx, max: maxIdx };\n        }\n\n        return this._indices;\n    },\n\n    total: function() {\n        return {\n            min: this.start,\n            max: this.end\n        };\n    },\n\n    totalCount: function() {\n        var last$$1 = this.totalIndex(this.end);\n\n        return last$$1 + (this.options.justified ? 1 : 0);\n    },\n\n    valueRange: function() {\n        return {\n            min: this.valueStart,\n            max: this.valueEnd\n        };\n    },\n\n    valueIndex: function(value) {\n        var options = this.options;\n        return Math.floor(dateIndex(value, this.valueStart, options.baseUnit, options.baseUnitStep));\n    },\n\n    totalIndex: function(value) {\n        var options = this.options;\n        return Math.floor(dateIndex(value, this.start, options.baseUnit, options.baseUnitStep));\n    },\n\n    dateIndex: function(value) {\n        var options = this.options;\n        return dateIndex(value, this.valueStart, options.baseUnit, options.baseUnitStep);\n    },\n\n    valuesCount: function() {\n        var maxIdx = this.valueIndex(this.valueEnd);\n\n        return maxIdx + 1;\n    },\n\n    values: function() {\n        var values = this._values;\n        if (!values) {\n            var options = this.options;\n            var range = this.valueRange();\n            this._values = values = [];\n\n            for (var date = range.min; date <= range.max;) {\n                values.push(date);\n                date = addDuration(date, options.baseUnitStep, options.baseUnit, options.weekStartDay);\n            }\n        }\n\n        return values;\n    },\n\n    dateAt: function(index, total) {\n        var options = this.options;\n\n        return addDuration(total ? this.start : this.valueStart, options.baseUnitStep * index, options.baseUnit, options.weekStartDay);\n    },\n\n    roundToTotalStep: function(value, upper, next) {\n        var ref = this.options;\n        var baseUnit = ref.baseUnit;\n        var baseUnitStep = ref.baseUnitStep;\n        var weekStartDay = ref.weekStartDay;\n        var start = this.start;\n\n        var step = dateIndex(value, start, baseUnit, baseUnitStep);\n        var roundedStep = upper ? Math.ceil(step) : Math.floor(step);\n\n        if (next) {\n            roundedStep += next;\n        }\n\n        return addDuration(start, roundedStep * baseUnitStep, baseUnit, weekStartDay);\n    }\n});\n\nfunction autoBaseUnit(options, startUnit, startStep) {\n    var categoryLimits = categoryRange(options.categories);\n    var span = (options.max || categoryLimits.max) - (options.min || categoryLimits.min);\n    var autoBaseUnitSteps = options.autoBaseUnitSteps;\n    var maxDateGroups = options.maxDateGroups;\n    var autoUnit = options.baseUnit === FIT;\n    var autoUnitIx = startUnit ? BASE_UNITS.indexOf(startUnit) : 0;\n    var baseUnit = autoUnit ? BASE_UNITS[autoUnitIx++] : options.baseUnit;\n    var units = span / TIME_PER_UNIT[baseUnit];\n    var totalUnits = units;\n    var unitSteps, step, nextStep;\n\n    while (!step || units >= maxDateGroups) {\n        unitSteps = unitSteps || autoBaseUnitSteps[baseUnit].slice(0);\n\n        do {\n            nextStep = unitSteps.shift();\n        } while (nextStep && startUnit === baseUnit && nextStep < startStep);\n\n        if (nextStep) {\n            step = nextStep;\n            units = totalUnits / step;\n        } else if (baseUnit === last(BASE_UNITS)) {\n            step = Math.ceil(totalUnits / maxDateGroups);\n            break;\n        } else if (autoUnit) {\n            baseUnit = BASE_UNITS[autoUnitIx++] || last(BASE_UNITS);\n            totalUnits = span / TIME_PER_UNIT[baseUnit];\n            unitSteps = null;\n        } else {\n            if (units > maxDateGroups) {\n                step = Math.ceil(totalUnits / maxDateGroups);\n            }\n            break;\n        }\n    }\n\n    options.baseUnitStep = step;\n    options.baseUnit = baseUnit;\n}\n\nfunction defaultBaseUnit(options) {\n    var categories = options.categories;\n    var count = defined(categories) ? categories.length : 0;\n    var minDiff = MAX_VALUE;\n    var lastCategory, unit;\n\n    for (var categoryIx = 0; categoryIx < count; categoryIx++) {\n        var category = categories[categoryIx];\n\n        if (category && lastCategory) {\n            var diff = absoluteDateDiff(category, lastCategory);\n            if (diff > 0) {\n                minDiff = Math.min(minDiff, diff);\n\n                if (minDiff >= TIME_PER_YEAR) {\n                    unit = YEARS;\n                } else if (minDiff >= TIME_PER_MONTH - TIME_PER_DAY * 3) {\n                    unit = MONTHS;\n                } else if (minDiff >= TIME_PER_WEEK) {\n                    unit = WEEKS;\n                } else if (minDiff >= TIME_PER_DAY) {\n                    unit = DAYS;\n                } else if (minDiff >= TIME_PER_HOUR) {\n                    unit = HOURS;\n                } else if (minDiff >= TIME_PER_MINUTE) {\n                    unit = MINUTES;\n                } else {\n                    unit = SECONDS;\n                }\n            }\n        }\n\n        lastCategory = category;\n    }\n\n    options.baseUnit = unit || DAYS;\n}\n\nfunction initUnit(options) {\n    var baseUnit = (options.baseUnit || \"\").toLowerCase();\n    var useDefault = baseUnit !== FIT && !inArray(baseUnit, BASE_UNITS);\n\n    if (useDefault) {\n        defaultBaseUnit(options);\n    }\n\n    if (baseUnit === FIT || options.baseUnitStep === AUTO) {\n        autoBaseUnit(options);\n    }\n\n    return options;\n}\n\nvar DateCategoryAxis = CategoryAxis.extend({\n    clone: function() {\n        var copy = new DateCategoryAxis($.extend({}, this.options), this.chartService);\n        copy.createLabels();\n\n        return copy;\n    },\n\n    categoriesHash: function() {\n        var start = this.dataRange.total().min;\n        return this.options.baseUnit + this.options.baseUnitStep + start;\n    },\n\n    initUserOptions: function(options) {\n        return options;\n    },\n\n    initFields: function() {\n        CategoryAxis.fn.initFields.call(this);\n\n        var chartService = this.chartService;\n        var intlService = chartService.intl;\n        var options = this.options;\n\n        var categories = options.categories || [];\n        if (!categories._parsed) {\n            categories = parseDates(intlService, categories);\n            categories._parsed = true;\n        }\n\n        options = deepExtend({\n            roundToBaseUnit: true\n        }, options, {\n            categories: categories,\n            min: parseDate(intlService, options.min),\n            max: parseDate(intlService, options.max),\n            weekStartDay: firstDay(options, intlService)\n        });\n\n        if (chartService.panning && chartService.isPannable(options.vertical ? Y : X)) {\n            options.roundToBaseUnit = false;\n        }\n\n        options.userSetBaseUnit = options.userSetBaseUnit || options.baseUnit;\n        options.userSetBaseUnitStep = options.userSetBaseUnitStep || options.baseUnitStep;\n\n        this.options = options;\n        options.srcCategories = categories;\n\n        if (categories.length > 0) {\n            var range = categoryRange(categories);\n            var maxDivisions = options.maxDivisions;\n\n            this.dataRange = new DateRange(range.min, range.max, initUnit(options));\n\n            if (maxDivisions) {\n                var dataRange = this.dataRange.displayRange();\n\n                var divisionOptions = $.extend({}, options, {\n                    justified: true,\n                    roundToBaseUnit: false,\n                    baseUnit: 'fit',\n                    min: dataRange.min,\n                    max: dataRange.max,\n                    maxDateGroups: maxDivisions\n                });\n\n                var dataRangeOptions = this.dataRange.options;\n\n                autoBaseUnit(divisionOptions, dataRangeOptions.baseUnit, dataRangeOptions.baseUnitStep);\n\n                this.divisionRange = new DateRange(range.min, range.max, divisionOptions);\n            } else {\n                this.divisionRange = this.dataRange;\n            }\n\n        } else {\n            options.baseUnit = options.baseUnit || DAYS;\n            this.dataRange = this.divisionRange = new EmptyDateRange(options);\n        }\n\n        this.rangeLabels = [];\n    },\n\n    tickIndices: function(stepSize) {\n        var ref = this;\n        var dataRange = ref.dataRange;\n        var divisionRange = ref.divisionRange;\n        var valuesCount = divisionRange.valuesCount();\n\n        if (!this.options.maxDivisions || !valuesCount) {\n            return CategoryAxis.fn.tickIndices.call(this, stepSize);\n        }\n\n        var indices = [];\n        var values = divisionRange.values();\n        var offset = 0;\n\n        if (!this.options.justified) {\n            values = values.concat(divisionRange.dateAt(valuesCount));\n            offset = 0.5;//align ticks to the center of not justified categories\n        }\n\n        for (var idx = 0; idx < values.length; idx++) {\n            indices.push(dataRange.dateIndex(values[idx]) + offset);\n            if (stepSize !== 1 && idx >= 1) {\n                var last$$1 = indices.length - 1;\n                indices.splice(idx, 0, indices[last$$1 - 1] + (indices[last$$1] - indices[last$$1 - 1]) * stepSize);\n            }\n        }\n\n        return indices;\n    },\n\n    shouldRenderNote: function(value) {\n        var range = this.range();\n        var categories = this.options.categories || [];\n\n        return dateComparer(value, range.min) >= 0 && dateComparer(value, range.max) <= 0 && categories.length;\n    },\n\n    parseNoteValue: function(value) {\n        return parseDate(this.chartService.intl, value);\n    },\n\n    noteSlot: function(value) {\n        return this.getSlot(value);\n    },\n\n    translateRange: function(delta) {\n        var options = this.options;\n        var baseUnit = options.baseUnit;\n        var weekStartDay = options.weekStartDay;\n        var vertical = options.vertical;\n        var lineBox = this.lineBox();\n        var size = vertical ? lineBox.height() : lineBox.width();\n        var range = this.range();\n        var scale = size / (range.max - range.min);\n        var offset = round(delta / scale, DEFAULT_PRECISION);\n\n        if (range.min && range.max) {\n            var from = addTicks(options.min || range.min, offset);\n            var to = addTicks(options.max || range.max, offset);\n\n            range = {\n                min: addDuration(from, 0, baseUnit, weekStartDay),\n                max: addDuration(to, 0, baseUnit, weekStartDay)\n            };\n        }\n\n        return range;\n    },\n\n    labelsRange: function() {\n        return {\n            min: this.options.labels.skip,\n            max: this.divisionRange.valuesCount()\n        };\n    },\n\n    pan: function(delta) {\n        if (this.isEmpty()) {\n            return null;\n        }\n\n        var options = this.options;\n        var lineBox = this.lineBox();\n        var size = options.vertical ? lineBox.height() : lineBox.width();\n        var ref = this.dataRange.displayRange();\n        var min = ref.min;\n        var max = ref.max;\n        var totalLimits = this.dataRange.total();\n        var scale = size / (max - min);\n        var offset = round(delta / scale, DEFAULT_PRECISION) * (options.reverse ? -1 : 1);\n        var from = addTicks(min, offset);\n        var to = addTicks(max, offset);\n\n        var panRange = this.limitRange(toTime(from), toTime(to), toTime(totalLimits.min), toTime(totalLimits.max), offset);\n\n        if (panRange) {\n            panRange.min = toDate(panRange.min);\n            panRange.max = toDate(panRange.max);\n            panRange.baseUnit = options.baseUnit;\n            panRange.baseUnitStep = options.baseUnitStep || 1;\n            panRange.userSetBaseUnit = options.userSetBaseUnit;\n            panRange.userSetBaseUnitStep = options.userSetBaseUnitStep;\n\n            return panRange;\n        }\n    },\n\n    pointsRange: function(start, end) {\n        if (this.isEmpty()) {\n            return null;\n        }\n\n        var pointsRange = CategoryAxis.fn.pointsRange.call(this, start, end);\n        var datesRange = this.dataRange.displayRange();\n        var indicesRange = this.dataRange.displayIndices();\n        var scale = dateDiff(datesRange.max, datesRange.min) / (indicesRange.max - indicesRange.min);\n        var options = this.options;\n\n        var min = addTicks(datesRange.min, pointsRange.min * scale);\n        var max = addTicks(datesRange.min, pointsRange.max * scale);\n\n        return {\n            min: min,\n            max: max,\n            baseUnit: options.userSetBaseUnit || options.baseUnit,\n            baseUnitStep: options.userSetBaseUnitStep || options.baseUnitStep\n        };\n    },\n\n    scaleRange: function(scale, cursor) {\n        if (this.isEmpty()) {\n            return {};\n        }\n\n        var options = this.options;\n        var fit = options.userSetBaseUnit === FIT;\n        var totalLimits = this.dataRange.total();\n        var ref = this.dataRange.displayRange();\n        var rangeMin = ref.min;\n        var rangeMax = ref.max;\n\n        var position = Math.abs(this.pointOffset(cursor));\n        var range = rangeMax - rangeMin;\n        var delta = this.scaleToDelta(scale, range);\n        var minDelta = Math.round(position * delta);\n        var maxDelta = Math.round((1 - position) * delta);\n\n        var ref$1 = this.dataRange.options;\n        var baseUnit = ref$1.baseUnit;\n        var min = new Date(rangeMin.getTime() + minDelta);\n        var max = new Date(rangeMax.getTime() - maxDelta);\n\n        if (fit) {\n            var autoBaseUnitSteps = options.autoBaseUnitSteps;\n            var maxDateGroups = options.maxDateGroups;\n\n            var maxDiff = last(autoBaseUnitSteps[baseUnit]) * maxDateGroups * TIME_PER_UNIT[baseUnit];\n            var rangeDiff = dateDiff(rangeMax, rangeMin);\n            var diff = dateDiff(max, min);\n            var baseUnitIndex = BASE_UNITS.indexOf(baseUnit);\n            var autoBaseUnitStep, ticks;\n\n            if (diff < TIME_PER_UNIT[baseUnit] && baseUnit !== MILLISECONDS) {\n                baseUnit = BASE_UNITS[baseUnitIndex - 1];\n                autoBaseUnitStep = last(autoBaseUnitSteps[baseUnit]);\n                ticks = (rangeDiff - (maxDateGroups - 1) * autoBaseUnitStep * TIME_PER_UNIT[baseUnit]) / 2;\n                min = addTicks(rangeMin, ticks);\n                max = addTicks(rangeMax, -ticks);\n\n            } else if (diff > maxDiff && baseUnit !== YEARS) {\n                var stepIndex = 0;\n\n                do {\n                    baseUnitIndex++;\n                    baseUnit = BASE_UNITS[baseUnitIndex];\n                    stepIndex = 0;\n                    ticks = 2 * TIME_PER_UNIT[baseUnit];\n                    do {\n                        autoBaseUnitStep = autoBaseUnitSteps[baseUnit][stepIndex];\n                        stepIndex++;\n                    } while (stepIndex < autoBaseUnitSteps[baseUnit].length && ticks * autoBaseUnitStep < rangeDiff);\n                } while (baseUnit !== YEARS && ticks * autoBaseUnitStep < rangeDiff);\n\n                ticks = (ticks * autoBaseUnitStep - rangeDiff) / 2;\n                if (ticks > 0) {\n                    min = addTicks(rangeMin, -ticks);\n                    max = addTicks(rangeMax, ticks);\n                    min = addTicks(min, limitValue(max, totalLimits.min, totalLimits.max) - max);\n                    max = addTicks(max, limitValue(min, totalLimits.min, totalLimits.max) - min);\n                }\n            }\n        }\n\n        if (min && max && dateDiff(max, min) > 0) {\n            return {\n                min: min,\n                max: max,\n                baseUnit: options.userSetBaseUnit || options.baseUnit,\n                baseUnitStep: options.userSetBaseUnitStep || options.baseUnitStep\n            };\n        }\n    },\n\n    zoomRange: function(scale, cursor) {\n        var totalLimits = this.dataRange.total();\n        var range = this.scaleRange(scale, cursor);\n\n        if (range) {\n            if (range.min < totalLimits.min) {\n                range.min = totalLimits.min;\n            }\n            if (range.max > totalLimits.max) {\n                range.max = totalLimits.max;\n            }\n        }\n\n        return range;\n    },\n\n    range: function() {\n        return this.dataRange.displayRange();\n    },\n\n    createLabels: function() {\n        CategoryAxis.fn.createLabels.call(this);\n        this.createRangeLabels();\n    },\n\n    clearLabels: function() {\n        CategoryAxis.fn.clearLabels.call(this);\n        this.rangeLabels = [];\n    },\n\n    arrangeLabels: function() {\n        this.arrangeRangeLabels();\n        CategoryAxis.fn.arrangeLabels.call(this);\n    },\n\n    arrangeRangeLabels: function() {\n        var ref = this;\n        var options = ref.options;\n        var rangeLabels = ref.rangeLabels;\n        if (rangeLabels.length === 0) {\n            return;\n        }\n\n        var lineBox = this.lineBox();\n        var vertical = options.vertical;\n        var mirror = options.rangeLabels.mirror || options.labels.mirror;\n\n        var firstLabel = rangeLabels[0];\n        if (firstLabel) {\n            var position = vertical ? lineBox.y1 - (firstLabel.box.height() / 2) : lineBox.x1;\n            this.positionLabel(firstLabel, mirror, position);\n        }\n\n        var lastLabel = rangeLabels[1];\n        if (lastLabel) {\n            var position$1 = vertical ? lineBox.y2 - (lastLabel.box.height() / 2) : lineBox.x2;\n            this.positionLabel(lastLabel, mirror, position$1);\n        }\n    },\n\n    autoRotateLabels: function() {\n        CategoryAxis.fn.autoRotateLabels.call(this);\n        this.autoRotateRangeLabels();\n    },\n\n    hideOutOfRangeLabels: function() {\n        CategoryAxis.fn.hideOutOfRangeLabels.call(this);\n        this.hideOverlappingLabels();\n    },\n\n    hideOverlappingLabels: function() {\n        var ref = this;\n        var rangeLabels = ref.rangeLabels;\n        var labels = ref.labels;\n        if (rangeLabels.length === 0) {\n            return;\n        }\n\n        function clip(rangeLabel, label) {\n            if (!label.options.visible || label.box.overlaps(rangeLabel.box)) {\n                label.options.visible = false;\n                return true;\n            }\n\n            return false;\n        }\n\n        var firstRangeLabel = rangeLabels[0];\n        if (firstRangeLabel && firstRangeLabel.options.visible) {\n            for (var i = 0; i < labels.length; i++) {\n                var overlaps = clip(firstRangeLabel, labels[i]);\n                if (!overlaps) {\n                    break;\n                }\n            }\n        }\n\n        var lastRangeLabel = rangeLabels[1];\n        if (lastRangeLabel && lastRangeLabel.options.visible) {\n            for (var i$1 = labels.length - 1; i$1 > 0; --i$1) {\n                var overlaps$1 = clip(lastRangeLabel, labels[i$1]);\n                if (!overlaps$1) {\n                    break;\n                }\n            }\n        }\n    },\n\n    contentBox: function() {\n        var box = CategoryAxis.fn.contentBox.call(this);\n        var rangeLabels = this.rangeLabels;\n\n        for (var i = 0; i < rangeLabels.length; i++) {\n            var label = rangeLabels[i];\n            if (label.options.visible) {\n                box.wrap(label.box);\n            }\n        }\n\n        return box;\n    },\n\n    createAxisLabel: function(index, labelOptions, labelContext) {\n        if (labelContext === void 0) { labelContext = {}; }\n\n        var options = this.options;\n        var dataItem = options.dataItems && !options.maxDivisions ? options.dataItems[index] : null;\n        var date = this.divisionRange.dateAt(index);\n        var unitFormat = labelOptions.dateFormats[this.divisionRange.options.baseUnit];\n\n        labelOptions.format = labelOptions.format || unitFormat;\n        labelContext.dataItem = dataItem;\n\n        var text = this.axisLabelText(date, labelOptions, labelContext);\n        if (text) {\n            return new AxisLabel(date, text, index, dataItem, labelOptions);\n        }\n    },\n\n    createRangeLabels: function() {\n        var this$1 = this;\n\n        var ref = this.divisionRange;\n        var displayStart = ref.displayStart;\n        var displayEnd = ref.displayEnd;\n        var options = this.options;\n        var labelOptions = $.extend({}, options.labels, options.rangeLabels, {\n            align: CENTER,\n            zIndex: options.zIndex\n        });\n\n        if (labelOptions.visible !== true) {\n            return;\n        }\n\n        this.normalizeLabelRotation(labelOptions);\n        labelOptions.alignRotation = CENTER;\n\n        if (labelOptions.rotation === \"auto\") {\n            labelOptions.rotation = 0;\n            options.autoRotateRangeLabels = true;\n        }\n\n        var unitFormat = labelOptions.dateFormats[this.divisionRange.options.baseUnit];\n        labelOptions.format = labelOptions.format || unitFormat;\n\n        var createLabel = function (index, date, text) {\n            if (text) {\n                var label = new AxisLabel(date, text, index, null, labelOptions);\n                this$1.append(label);\n                this$1.rangeLabels.push(label);\n            }\n        };\n\n        var startText = this.axisLabelText(displayStart, labelOptions, { index: 0, count: 2 });\n        createLabel(0, displayStart, startText);\n\n        var endText = this.axisLabelText(displayEnd, labelOptions, { index: 1, count: 2 });\n        createLabel(1, displayEnd, endText);\n    },\n\n    autoRotateRangeLabels: function() {\n        var this$1 = this;\n\n        var labels = this.rangeLabels;\n        if (!this.options.autoRotateRangeLabels || this.options.vertical || labels.length !== 2) {\n            return;\n        }\n\n        var rotateLabel = function (label, tickPositions, index) {\n            var width = Math.abs(tickPositions[index + 1] - tickPositions[index]) * 2;\n            var angle = this$1.autoRotateLabelAngle(label.box, width);\n            if (angle !== 0) {\n                label.options.rotation = angle;\n                label.reflow(new Box());\n            }\n        };\n\n        var tickPositions = this.getMajorTickPositions();\n        rotateLabel(labels[0], tickPositions, 0);\n        rotateLabel(labels[1], tickPositions, tickPositions.length - 2);\n    },\n\n    categoryIndex: function(value) {\n        return this.dataRange.valueIndex(value);\n    },\n\n    slot: function(from, to, limit) {\n        var dateRange = this.dataRange;\n        var start = from;\n        var end = to;\n\n        if (start instanceof Date) {\n            start = dateRange.dateIndex(start);\n        }\n\n        if (end instanceof Date) {\n            end = dateRange.dateIndex(end);\n        }\n\n        var slot = this.getSlot(start, end, limit);\n        if (slot) {\n            return slot.toRect();\n        }\n    },\n\n    getSlot: function(a, b, limit) {\n        var start = a;\n        var end = b;\n\n        if (typeof start === OBJECT) {\n            start = this.categoryIndex(start);\n        }\n\n        if (typeof end === OBJECT) {\n            end = this.categoryIndex(end);\n        }\n\n        return CategoryAxis.fn.getSlot.call(this, start, end, limit);\n    },\n\n    valueRange: function() {\n        var options = this.options;\n        var range = categoryRange(options.srcCategories);\n\n        return {\n            min: toDate(range.min),\n            max: toDate(range.max)\n        };\n    },\n\n    categoryAt: function(index, total) {\n        return this.dataRange.dateAt(index, total);\n    },\n\n    categoriesCount: function() {\n        return this.dataRange.valuesCount();\n    },\n\n    rangeIndices: function() {\n        return this.dataRange.displayIndices();\n    },\n\n    labelsBetweenTicks: function() {\n        return !this.divisionRange.options.justified;\n    },\n\n    prepareUserOptions: function() {\n        if (this.isEmpty()) {\n            return;\n        }\n\n        this.options.categories = this.dataRange.values();\n    },\n\n    getCategory: function(point) {\n        var index = this.pointCategoryIndex(point);\n\n        if (index === null) {\n            return null;\n        }\n\n        return this.dataRange.dateAt(index);\n    },\n\n    totalIndex: function(value) {\n        return this.dataRange.totalIndex(value);\n    },\n\n    currentRangeIndices: function() {\n        var range = this.dataRange.valueRange();\n        return {\n            min: this.dataRange.totalIndex(range.min),\n            max: this.dataRange.totalIndex(range.max)\n        };\n    },\n\n    totalRange: function() {\n        return this.dataRange.total();\n    },\n\n    totalCount: function() {\n        return this.dataRange.totalCount();\n    },\n\n    isEmpty: function() {\n        return !this.options.srcCategories.length;\n    },\n\n    roundedRange: function() {\n        if (this.options.roundToBaseUnit !== false || this.isEmpty()) {\n            return this.range();\n        }\n\n        var options = this.options;\n        var datesRange = categoryRange(options.srcCategories);\n\n        var dateRange = new DateRange(datesRange.min, datesRange.max, $.extend({}, options, {\n            justified: false,\n            roundToBaseUnit: true,\n            justifyEnd: options.justified\n        }));\n\n        return dateRange.displayRange();\n    }\n});\n\nsetDefaultOptions(DateCategoryAxis, {\n    type: DATE,\n    labels: {\n        dateFormats: DateLabelFormats\n    },\n    rangeLabels: {\n        visible: false\n    },\n    autoBaseUnitSteps: {\n        milliseconds: [ 1, 10, 100 ],\n        seconds: [ 1, 2, 5, 15, 30 ],\n        minutes: [ 1, 2, 5, 15, 30 ],\n        hours: [ 1, 2, 3 ],\n        days: [ 1, 2, 3 ],\n        weeks: [ 1, 2 ],\n        months: [ 1, 2, 3, 6 ],\n        years: [ 1, 2, 3, 5, 10, 25, 50 ]\n    },\n    maxDateGroups: 10\n});\n\nfunction autoAxisMin(min, max, narrow) {\n    if (!min && !max) {\n        return 0;\n    }\n\n    var axisMin;\n\n    if (min >= 0 && max >= 0) {\n        var minValue = min === max ? 0 : min;\n\n        var diff = (max - minValue) / max;\n        if (narrow === false || (!narrow && diff > ZERO_THRESHOLD)) {\n            return 0;\n        }\n\n        axisMin = Math.max(0, minValue - ((max - minValue) / 2));\n    } else {\n        axisMin = min;\n    }\n\n    return axisMin;\n}\n\nfunction autoAxisMax(min, max, narrow) {\n    if (!min && !max) {\n        return 1;\n    }\n\n    var axisMax;\n\n    if (min <= 0 && max <= 0) {\n        var maxValue = min === max ? 0 : max;\n\n        var diff = Math.abs((maxValue - min) / maxValue);\n        if (narrow === false || (!narrow && diff > ZERO_THRESHOLD)) {\n            return 0;\n        }\n\n        axisMax = Math.min(0, maxValue - ((min - maxValue) / 2));\n    } else {\n        axisMax = max;\n    }\n\n    return axisMax;\n}\n\nfunction floor(value, step) {\n    return round(Math.floor(value / step) * step, DEFAULT_PRECISION);\n}\n\nfunction ceil(value, step) {\n    return round(Math.ceil(value / step) * step, DEFAULT_PRECISION);\n}\n\nfunction limitCoordinate(value) {\n    return Math.max(Math.min(value, COORDINATE_LIMIT), -COORDINATE_LIMIT);\n}\n\nvar MIN_VALUE_RANGE$1 = Math.pow(10, -DEFAULT_PRECISION + 1);\n\nvar NumericAxis = Axis.extend({\n    init: function(seriesMin, seriesMax, options, chartService) {\n        Axis.fn.init.call(this, $.extend({}, options, {\n            seriesMin: seriesMin,\n            seriesMax: seriesMax\n        }), chartService);\n    },\n\n    initUserOptions: function(options) {\n        var autoOptions = autoAxisOptions(options.seriesMin, options.seriesMax, options);\n        this.totalOptions = totalAxisOptions(autoOptions, options);\n\n        return axisOptions(autoOptions, options);\n    },\n\n    initFields: function() {\n        this.totalMin = this.totalOptions.min;\n        this.totalMax = this.totalOptions.max;\n        this.totalMajorUnit = this.totalOptions.majorUnit;\n        this.seriesMin = this.options.seriesMin;\n        this.seriesMax = this.options.seriesMax;\n    },\n\n    clone: function() {\n        return new NumericAxis(\n            this.seriesMin,\n            this.seriesMax,\n            $.extend({}, this.options),\n            this.chartService\n        );\n    },\n\n    startValue: function() {\n        return 0;\n    },\n\n    range: function() {\n        var options = this.options;\n        return { min: options.min, max: options.max };\n    },\n\n    getDivisions: function(stepValue) {\n        if (stepValue === 0) {\n            return 1;\n        }\n\n        var options = this.options;\n        var range = options.max - options.min;\n\n        return Math.floor(round(range / stepValue, COORD_PRECISION)) + 1;\n    },\n\n    getTickPositions: function(unit, skipUnit) {\n        var options = this.options;\n        var ref = this.lineInfo();\n        var axisDir = ref.axisDir;\n        var axisOrigin = ref.axisOrigin;\n        var lineBox = ref.lineBox;\n        var lineSize = ref.lineSize;\n        var range = options.max - options.min;\n        var scale = lineSize / range;\n        var step = unit * scale;\n        var divisions = this.getDivisions(unit);\n        var positions = [];\n        var pos = lineBox[axisOrigin];\n        var skipStep = 0;\n\n        if (skipUnit) {\n            skipStep = skipUnit / unit;\n        }\n\n        for (var idx = 0; idx < divisions; idx++) {\n            if (idx % skipStep !== 0) {\n                positions.push(round(pos, COORD_PRECISION));\n            }\n\n            pos = pos + step * axisDir;\n        }\n\n        return positions;\n    },\n\n    getMajorTickPositions: function() {\n        return this.getTickPositions(this.options.majorUnit);\n    },\n\n    getMinorTickPositions: function() {\n        return this.getTickPositions(this.options.minorUnit);\n    },\n\n    getSlot: function(a, b, limit) {\n        if (limit === void 0) { limit = false; }\n\n        var options = this.options;\n        var ref = this.lineInfo();\n        var axis = ref.axis;\n        var axisDir = ref.axisDir;\n        var lineBox = ref.lineBox;\n        var lineSize = ref.lineSize;\n        var lineStart = ref.lineStart;\n        var step = axisDir * (lineSize / (options.max - options.min));\n\n        var start = valueOrDefault(a, b || 0);\n        var end = valueOrDefault(b, a || 0);\n\n        if (limit) {\n            start = limitValue(start, options.min, options.max);\n            end = limitValue(end, options.min, options.max);\n        }\n\n        var p1 = Math.min(start, end) - options.min;\n        var p2 = Math.max(start, end) - options.min;\n\n        var slotBox = new Box(lineBox.x1, lineBox.y1, lineBox.x1, lineBox.y1);\n        slotBox[axis + 1] = limitCoordinate(lineStart + step * (axisDir > 0 ? p1 : p2));\n        slotBox[axis + 2] = limitCoordinate(lineStart + step * (axisDir > 0 ? p2 : p1));\n\n        return slotBox;\n    },\n\n    getValue: function(point) {\n        var options = this.options;\n        var max = Number(options.max);\n        var min = Number(options.min);\n        var offset = this.pointOffset(point);\n        var valueOffset = offset * (max - min);\n\n        if (offset < 0 || offset > 1) {\n            return null;\n        }\n\n        var value = min + valueOffset;\n        return round(value, DEFAULT_PRECISION);\n    },\n\n    translateRange: function(delta) {\n        var options = this.options;\n        var vertical = options.vertical;\n        var reverse = options.reverse;\n        var max = options.max;\n        var min = options.min;\n        var ref = this.lineInfo();\n        var lineSize = ref.lineSize;\n        var range = max - min;\n        var scale = lineSize / range;\n        var offset = round(delta / scale, DEFAULT_PRECISION);\n\n        if ((vertical || reverse) && !(vertical && reverse )) {\n            offset = -offset;\n        }\n\n        return {\n            min: min + offset,\n            max: max + offset,\n            offset: offset\n        };\n    },\n\n    labelsCount: function() {\n        return this.getDivisions(this.options.majorUnit);\n    },\n\n    createAxisLabel: function(index, labelOptions, labelContext) {\n        var options = this.options;\n        var value = round(options.min + (index * options.majorUnit), DEFAULT_PRECISION);\n        var text = this.axisLabelText(value, labelOptions, labelContext);\n\n        return new AxisLabel(value, text, index, null, labelOptions);\n    },\n\n    shouldRenderNote: function(value) {\n        var range = this.range();\n        return range.min <= value && value <= range.max;\n    },\n\n    pan: function(delta) {\n        var range = this.translateRange(delta);\n        return this.limitRange(range.min, range.max, this.totalMin, this.totalMax, range.offset);\n    },\n\n    pointsRange: function(start, end) {\n        var startValue = this.getValue(start);\n        var endValue = this.getValue(end);\n        var min = Math.min(startValue, endValue);\n        var max = Math.max(startValue, endValue);\n\n        if (this.isValidRange(min, max)) {\n            return {\n                min: min,\n                max: max\n            };\n        }\n    },\n\n    scaleRange: function(scale, cursor) {\n        var position = Math.abs(this.pointOffset(cursor));\n        var range = this.options.max - this.options.min;\n        var delta = this.scaleToDelta(scale, range);\n        var minDelta = position * delta;\n        var maxDelta = (1 - position) * delta;\n        var min = round(this.options.min + minDelta, DEFAULT_PRECISION);\n        var max = round(this.options.max - maxDelta, DEFAULT_PRECISION);\n\n        if (max - min < MIN_VALUE_RANGE$1) {\n            max = min + MIN_VALUE_RANGE$1;\n        }\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    zoomRange: function(scale, cursor) {\n        var ref = this;\n        var totalMin = ref.totalMin;\n        var totalMax = ref.totalMax;\n        var range = this.scaleRange(scale, cursor);\n\n        return {\n            min: limitValue(range.min, totalMin, totalMax),\n            max: limitValue(range.max, totalMin, totalMax),\n            narrowRange: false\n        };\n    },\n\n    isValidRange: function(min, max) {\n        return max - min > MIN_VALUE_RANGE$1;\n    }\n});\n\nfunction autoAxisOptions(seriesMin, seriesMax, options) {\n    var narrowRange = options.narrowRange;\n\n    var autoMin = autoAxisMin(seriesMin, seriesMax, narrowRange);\n    var autoMax = autoAxisMax(seriesMin, seriesMax, narrowRange);\n\n    var majorUnit = autoMajorUnit(autoMin, autoMax);\n    var autoOptions = {\n        majorUnit: majorUnit\n    };\n\n    if (options.roundToMajorUnit !== false) {\n        if (autoMin < 0 && remainderClose(autoMin, majorUnit, 1 / 3)) {\n            autoMin -= majorUnit;\n        }\n\n        if (autoMax > 0 && remainderClose(autoMax, majorUnit, 1 / 3)) {\n            autoMax += majorUnit;\n        }\n    }\n\n    autoOptions.min = floor(autoMin, majorUnit);\n    autoOptions.max = ceil(autoMax, majorUnit);\n\n    return autoOptions;\n}\n\nfunction totalAxisOptions(autoOptions, options) {\n    return {\n        min: defined(options.min) ? Math.min(autoOptions.min, options.min) : autoOptions.min,\n        max: defined(options.max) ? Math.max(autoOptions.max, options.max) : autoOptions.max,\n        majorUnit: autoOptions.majorUnit\n    };\n}\n\nfunction clearNullValues(options, fields) {\n    for (var idx = 0; idx < fields.length; idx++) {\n        var field = fields[idx];\n        if (options[field] === null) {\n            options[field] = undefined;\n        }\n    }\n}\n\nfunction axisOptions(autoOptions, userOptions) {\n    var options = userOptions;\n    var userSetMin, userSetMax;\n\n    if (userOptions) {\n        clearNullValues(userOptions, [ 'min', 'max' ]);\n\n        userSetMin = defined(userOptions.min);\n        userSetMax = defined(userOptions.max);\n\n        var userSetLimits = userSetMin || userSetMax;\n\n        if (userSetLimits) {\n            if (userOptions.min === userOptions.max) {\n                if (userOptions.min > 0) {\n                    userOptions.min = 0;\n                } else {\n                    userOptions.max = 1;\n                }\n            }\n        }\n\n        if (userOptions.majorUnit) {\n            autoOptions.min = floor(autoOptions.min, userOptions.majorUnit);\n            autoOptions.max = ceil(autoOptions.max, userOptions.majorUnit);\n        } else if (userSetLimits) {\n            options = deepExtend(autoOptions, userOptions);\n\n            // Determine an auto major unit after min/max have been set\n            autoOptions.majorUnit = autoMajorUnit(options.min, options.max);\n        }\n    }\n\n    autoOptions.minorUnit = (options.majorUnit || autoOptions.majorUnit) / 5;\n\n    var result = deepExtend(autoOptions, options);\n    if (result.min >= result.max) {\n        if (userSetMin && !userSetMax) {\n            result.max = result.min + result.majorUnit;\n        } else if (!userSetMin && userSetMax) {\n            result.min = result.max - result.majorUnit;\n        }\n    }\n\n    return result;\n}\n\nfunction remainderClose(value, divisor, ratio) {\n    var remainder = round(Math.abs(value % divisor), DEFAULT_PRECISION);\n    var threshold = divisor * (1 - ratio);\n\n    return remainder === 0 || remainder > threshold;\n}\n\nsetDefaultOptions(NumericAxis, {\n    type: \"numeric\",\n    min: 0,\n    max: 1,\n    vertical: true,\n    majorGridLines: {\n        visible: true,\n        width: 1,\n        color: BLACK\n    },\n    labels: {\n        format: \"#.####################\"\n    },\n    zIndex: 1\n});\n\nvar MIN_VALUE_RANGE = 1000;\n\nvar DateValueAxis = Axis.extend({\n    init: function(seriesMin, seriesMax, axisOptions, chartService) {\n        var min = toDate(seriesMin);\n        var max = toDate(seriesMax);\n\n        var intlService = chartService.intl;\n        var options = axisOptions || {};\n        options = deepExtend(options || {}, {\n            min: parseDate(intlService, options.min),\n            max: parseDate(intlService, options.max),\n            axisCrossingValue: parseDates(intlService, options.axisCrossingValues || options.axisCrossingValue),\n            weekStartDay: firstDay(options, intlService)\n        });\n        options = applyDefaults(min, max, options);\n\n        Axis.fn.init.call(this, options, chartService);\n\n        this.intlService = intlService;\n        this.seriesMin = min;\n        this.seriesMax = max;\n\n        var weekStartDay = options.weekStartDay || 0;\n        this.totalMin = toTime(floorDate(toTime(min) - 1, options.baseUnit, weekStartDay));\n        this.totalMax = toTime(ceilDate(toTime(max) + 1, options.baseUnit, weekStartDay));\n    },\n\n    clone: function() {\n        return new DateValueAxis(this.seriesMin, this.seriesMax, $.extend({}, this.options), this.chartService);\n    },\n\n    range: function() {\n        var options = this.options;\n        return { min: options.min, max: options.max };\n    },\n\n    getDivisions: function(stepValue) {\n        var options = this.options;\n\n        return Math.floor(\n            duration(options.min, options.max, options.baseUnit) / stepValue + 1\n        );\n    },\n\n    getTickPositions: function(step) {\n        var options = this.options;\n        var ref = this.lineInfo();\n        var dir = ref.axisDir;\n        var lineSize = ref.lineSize;\n        var start = ref.lineStart;\n        var divisions = this.getDivisions(step);\n        var timeRange = dateDiff(options.max, options.min);\n        var scale = lineSize / timeRange;\n        var weekStartDay = options.weekStartDay || 0;\n\n        var positions = [ start ];\n        for (var i = 1; i < divisions; i++) {\n            var date = addDuration(options.min, i * step, options.baseUnit, weekStartDay);\n            var pos = start + dateDiff(date, options.min) * scale * dir;\n\n            positions.push(round(pos, COORD_PRECISION));\n        }\n\n        return positions;\n    },\n\n    getMajorTickPositions: function() {\n        return this.getTickPositions(this.options.majorUnit);\n    },\n\n    getMinorTickPositions: function() {\n        return this.getTickPositions(this.options.minorUnit);\n    },\n\n    getSlot: function(a, b, limit) {\n        return NumericAxis.prototype.getSlot.call(\n            this, parseDate(this.intlService, a), parseDate(this.intlService, b), limit\n        );\n    },\n\n    getValue: function(point) {\n        var value = NumericAxis.prototype.getValue.call(this, point);\n\n        return value !== null ? toDate(value) : null;\n    },\n\n    labelsCount: function() {\n        return this.getDivisions(this.options.majorUnit);\n    },\n\n    createAxisLabel: function(index, labelOptions, labelContext) {\n        var options = this.options;\n        var offset = index * options.majorUnit;\n        var weekStartDay = options.weekStartDay || 0;\n        var date = options.min;\n\n        if (offset > 0) {\n            date = addDuration(date, offset, options.baseUnit, weekStartDay);\n        }\n\n        var unitFormat = labelOptions.dateFormats[options.baseUnit];\n        labelOptions.format = labelOptions.format || unitFormat;\n\n        var text = this.axisLabelText(date, labelOptions, labelContext);\n        return new AxisLabel(date, text, index, null, labelOptions);\n    },\n\n    translateRange: function(delta) {\n        var options = this.options;\n        var lineBox = this.lineBox();\n        var vertical = options.vertical;\n        var reverse = options.reverse;\n        var size = vertical ? lineBox.height() : lineBox.width();\n        var range = this.range();\n        var scale = size / dateDiff(range.max, range.min);\n\n        var offset = round(delta / scale, DEFAULT_PRECISION);\n        if ((vertical || reverse) && !(vertical && reverse )) {\n            offset = -offset;\n        }\n\n        var from = addTicks(options.min, offset);\n        var to = addTicks(options.max, offset);\n\n        return {\n            min: from,\n            max: to,\n            offset: offset\n        };\n    },\n\n    shouldRenderNote: function(value) {\n        var range = this.range();\n\n        return dateComparer(value, range.min) >= 0 && dateComparer(value, range.max) <= 0;\n    },\n\n    pan: function(delta) {\n        var range = this.translateRange(delta, true);\n        var limittedRange = this.limitRange(toTime(range.min), toTime(range.max), this.totalMin, this.totalMax, range.offset);\n\n        if (limittedRange) {\n            return {\n                min: toDate(limittedRange.min),\n                max: toDate(limittedRange.max)\n            };\n        }\n    },\n\n    pointsRange: function(start, end) {\n        var startValue = this.getValue(start);\n        var endValue = this.getValue(end);\n        var min = Math.min(startValue, endValue);\n        var max = Math.max(startValue, endValue);\n\n        return {\n            min: toDate(min),\n            max: toDate(max)\n        };\n    },\n\n    scaleRange: function(scale, cursor) {\n        var position = Math.abs(this.pointOffset(cursor));\n        var range = this.options.max - this.options.min;\n        var delta = this.scaleToDelta(scale, range);\n        var minDelta = position * delta;\n        var maxDelta = (1 - position) * delta;\n        var min = toDate(toTime(this.options.min) + minDelta);\n        var max = toDate(toTime(this.options.max) - maxDelta);\n\n        if (max - min < MIN_VALUE_RANGE) {\n            max = toDate(toTime(min) + MIN_VALUE_RANGE);\n        }\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    zoomRange: function(scale, cursor) {\n        var range = this.scaleRange(scale, cursor);\n        var min = toDate(limitValue(toTime(range.min), this.totalMin, this.totalMax));\n        var max = toDate(limitValue(toTime(range.max), this.totalMin, this.totalMax));\n\n        return {\n            min: min,\n            max: max\n        };\n    }\n});\n\nfunction timeUnits(delta) {\n    var unit = HOURS;\n\n    if (delta >= TIME_PER_YEAR) {\n        unit = YEARS;\n    } else if (delta >= TIME_PER_MONTH) {\n        unit = MONTHS;\n    } else if (delta >= TIME_PER_WEEK) {\n        unit = WEEKS;\n    } else if (delta >= TIME_PER_DAY) {\n        unit = DAYS;\n    }\n\n    return unit;\n}\n\nfunction applyDefaults(seriesMin, seriesMax, options) {\n    var min = options.min || seriesMin;\n    var max = options.max || seriesMax;\n    var baseUnit = options.baseUnit || (max && min ? timeUnits(absoluteDateDiff(max, min)) : HOURS);\n    var baseUnitTime = TIME_PER_UNIT[baseUnit];\n    var weekStartDay = options.weekStartDay || 0;\n    var autoMin = floorDate(toTime(min) - 1, baseUnit, weekStartDay) || toDate(max);\n    var autoMax = ceilDate(toTime(max) + 1, baseUnit, weekStartDay);\n    var userMajorUnit = options.majorUnit ? options.majorUnit : undefined;\n    var majorUnit = userMajorUnit || ceil(\n                        autoMajorUnit(autoMin.getTime(), autoMax.getTime()),\n                        baseUnitTime\n                    ) / baseUnitTime;\n    var actualUnits = duration(autoMin, autoMax, baseUnit);\n    var totalUnits = ceil(actualUnits, majorUnit);\n    var unitsToAdd = totalUnits - actualUnits;\n    var head = Math.floor(unitsToAdd / 2);\n    var tail = unitsToAdd - head;\n\n    if (!options.baseUnit) {\n        delete options.baseUnit;\n    }\n\n    options.baseUnit = options.baseUnit || baseUnit;\n    options.min = options.min || addDuration(autoMin, -head, baseUnit, weekStartDay);\n    options.max = options.max || addDuration(autoMax, tail, baseUnit, weekStartDay);\n    options.minorUnit = options.minorUnit || majorUnit / 5;\n    options.majorUnit = majorUnit;\n\n    return options;\n}\n\nsetDefaultOptions(DateValueAxis, {\n    type: DATE,\n    majorGridLines: {\n        visible: true,\n        width: 1,\n        color: BLACK\n    },\n    labels: {\n        dateFormats: DateLabelFormats\n    }\n});\n\nvar DEFAULT_MAJOR_UNIT = 10;\nvar MIN_VALUE_RANGE$2 = 1e-6;\n\nvar LogarithmicAxis = Axis.extend({\n    init: function(seriesMin, seriesMax, options, chartService) {\n\n        var axisOptions = deepExtend({ majorUnit: DEFAULT_MAJOR_UNIT, min: seriesMin, max: seriesMax }, options);\n        var base = axisOptions.majorUnit;\n        var autoMax = autoAxisMax$1(seriesMax, base);\n        var autoMin = autoAxisMin$1(seriesMin, seriesMax, axisOptions);\n        var range = initRange(autoMin, autoMax, axisOptions, options);\n\n        axisOptions.max = range.max;\n        axisOptions.min = range.min;\n        axisOptions.minorUnit = options.minorUnit || round(base - 1, DEFAULT_PRECISION);\n\n        Axis.fn.init.call(this, axisOptions, chartService);\n\n        this.totalMin = defined(options.min) ? Math.min(autoMin, options.min) : autoMin;\n        this.totalMax = defined(options.max) ? Math.max(autoMax, options.max) : autoMax;\n        this.logMin = round(log(range.min, base), DEFAULT_PRECISION);\n        this.logMax = round(log(range.max, base), DEFAULT_PRECISION);\n        this.seriesMin = seriesMin;\n        this.seriesMax = seriesMax;\n\n        this.createLabels();\n    },\n\n    clone: function() {\n        return new LogarithmicAxis(\n            this.seriesMin,\n            this.seriesMax,\n            $.extend({}, this.options),\n            this.chartService\n        );\n    },\n\n    startValue: function() {\n        return this.options.min;\n    },\n\n    getSlot: function(a, b, limit) {\n        var ref = this;\n        var options = ref.options;\n        var logMin = ref.logMin;\n        var logMax = ref.logMax;\n        var base = options.majorUnit;\n        var min = options.min;\n        var max = options.max;\n        var ref$1 = this.lineInfo();\n        var axis = ref$1.axis;\n        var axisDir = ref$1.axisDir;\n        var lineBox = ref$1.lineBox;\n        var lineSize = ref$1.lineSize;\n        var lineStart = ref$1.lineStart;\n        var step = axisDir * (lineSize / (logMax - logMin));\n        var start = valueOrDefault(a, b || 1);\n        var end = valueOrDefault(b, a || 1);\n\n        if (start <= 0 || end <= 0) {\n            return null;\n        }\n\n        if (limit) {\n            start = limitValue(start, min, max);\n            end = limitValue(end, min, max);\n        }\n\n        start = log(start, base);\n        end = log(end, base);\n\n        var p1 = Math.min(start, end) - logMin;\n        var p2 = Math.max(start, end) - logMin;\n\n        var slotBox = new Box(lineBox.x1, lineBox.y1, lineBox.x1, lineBox.y1);\n        slotBox[axis + 1] = limitCoordinate(lineStart + step * (axisDir > 0 ? p1 : p2));\n        slotBox[axis + 2] = limitCoordinate(lineStart + step * (axisDir > 0 ? p2 : p1));\n\n        return slotBox;\n    },\n\n    getValue: function(point) {\n        var ref = this;\n        var options = ref.options;\n        var logMin = ref.logMin;\n        var logMax = ref.logMax;\n        var base = options.majorUnit;\n        var ref$1 = this.lineInfo();\n        var axis = ref$1.axis;\n        var axisDir = ref$1.axisDir;\n        var lineStart = ref$1.lineStart;\n        var lineSize = ref$1.lineSize;\n        var step = ((logMax - logMin) / lineSize);\n        var offset = axisDir * (point[axis] - lineStart);\n        var valueOffset = offset * step;\n\n        if (offset < 0 || offset > lineSize) {\n            return null;\n        }\n\n        var value = logMin + valueOffset;\n\n        return round(Math.pow(base, value), DEFAULT_PRECISION);\n    },\n\n    range: function() {\n        var options = this.options;\n        return { min: options.min, max: options.max };\n    },\n\n    translateRange: function(delta) {\n        var ref = this;\n        var options = ref.options;\n        var logMin = ref.logMin;\n        var logMax = ref.logMax;\n        var reverse = options.reverse;\n        var vertical = options.vertical;\n        var base = options.majorUnit;\n        var lineBox = this.lineBox();\n        var size = vertical ? lineBox.height() : lineBox.width();\n        var scale = size / (logMax - logMin);\n        var offset = round(delta / scale, DEFAULT_PRECISION);\n\n        if ((vertical || reverse) && !(vertical && reverse )) {\n            offset = -offset;\n        }\n\n        return {\n            min: Math.pow(base, logMin + offset),\n            max: Math.pow(base, logMax + offset),\n            offset: offset\n        };\n    },\n\n    labelsCount: function() {\n        var floorMax = Math.floor(this.logMax);\n        var count = Math.floor(floorMax - this.logMin) + 1;\n\n        return count;\n    },\n\n    getMajorTickPositions: function() {\n        var ticks = [];\n\n        this.traverseMajorTicksPositions(function (position) {\n            ticks.push(position);\n        }, { step: 1, skip: 0 });\n\n        return ticks;\n    },\n\n    createTicks: function(lineGroup) {\n        var options = this.options;\n        var majorTicks = options.majorTicks;\n        var minorTicks = options.minorTicks;\n        var vertical = options.vertical;\n        var mirror = options.labels.mirror;\n        var lineBox = this.lineBox();\n        var ticks = [];\n        var tickLineOptions = {\n            // TODO\n            // _alignLines: options._alignLines,\n            vertical: vertical\n        };\n\n        function render(tickPosition, tickOptions) {\n            tickLineOptions.tickX = mirror ? lineBox.x2 : lineBox.x2 - tickOptions.size;\n            tickLineOptions.tickY = mirror ? lineBox.y1 - tickOptions.size : lineBox.y1;\n            tickLineOptions.position = tickPosition;\n\n            lineGroup.append(createAxisTick(tickLineOptions, tickOptions));\n        }\n\n        if (majorTicks.visible) {\n            this.traverseMajorTicksPositions(render, majorTicks);\n        }\n\n        if (minorTicks.visible) {\n            this.traverseMinorTicksPositions(render, minorTicks);\n        }\n\n        return ticks;\n    },\n\n    createGridLines: function(altAxis) {\n        var options = this.options;\n        var minorGridLines = options.minorGridLines;\n        var majorGridLines = options.majorGridLines;\n        var vertical = options.vertical;\n        var lineBox = altAxis.lineBox();\n        var lineOptions = {\n            lineStart: lineBox[vertical ? \"x1\" : \"y1\"],\n            lineEnd: lineBox[vertical ? \"x2\" : \"y2\"],\n            vertical: vertical\n        };\n        var majorTicks = [];\n\n        var container = this.gridLinesVisual();\n        function render(tickPosition, gridLine) {\n            if (!inArray(tickPosition, majorTicks)) {\n                lineOptions.position = tickPosition;\n                container.append(createAxisGridLine(lineOptions, gridLine));\n\n                majorTicks.push(tickPosition);\n            }\n        }\n\n        if (majorGridLines.visible) {\n            this.traverseMajorTicksPositions(render, majorGridLines);\n        }\n\n        if (minorGridLines.visible) {\n            this.traverseMinorTicksPositions(render, minorGridLines);\n        }\n\n        return container.children;\n    },\n\n    traverseMajorTicksPositions: function(callback, tickOptions) {\n        var ref = this.lineInfo();\n        var lineStart = ref.lineStart;\n        var step = ref.step;\n        var ref$1 = this;\n        var logMin = ref$1.logMin;\n        var logMax = ref$1.logMax;\n\n        for (var power = Math.ceil(logMin) + tickOptions.skip; power <= logMax; power += tickOptions.step) {\n            var position = round(lineStart + step * (power - logMin), DEFAULT_PRECISION);\n            callback(position, tickOptions);\n        }\n    },\n\n    traverseMinorTicksPositions: function(callback, tickOptions) {\n        var this$1 = this;\n\n        var ref = this.options;\n        var min = ref.min;\n        var max = ref.max;\n        var minorUnit = ref.minorUnit;\n        var base = ref.majorUnit;\n        var ref$1 = this.lineInfo();\n        var lineStart = ref$1.lineStart;\n        var step = ref$1.step;\n        var ref$2 = this;\n        var logMin = ref$2.logMin;\n        var logMax = ref$2.logMax;\n        var start = Math.floor(logMin);\n\n        for (var power = start; power < logMax; power++) {\n            var minorOptions = this$1._minorIntervalOptions(power);\n            for (var idx = tickOptions.skip; idx < minorUnit; idx += tickOptions.step) {\n                var value = minorOptions.value + idx * minorOptions.minorStep;\n                if (value > max) {\n                    break;\n                }\n                if (value >= min) {\n                    var position = round(lineStart + step * (log(value, base) - logMin), DEFAULT_PRECISION);\n                    callback(position, tickOptions);\n                }\n            }\n        }\n    },\n\n    createAxisLabel: function(index, labelOptions, labelContext) {\n        var power = Math.ceil(this.logMin + index);\n        var value = Math.pow(this.options.majorUnit, power);\n        var text = this.axisLabelText(value, labelOptions, labelContext);\n\n        return new AxisLabel(value, text, index, null, labelOptions);\n    },\n\n    shouldRenderNote: function(value) {\n        var range = this.range();\n        return range.min <= value && value <= range.max;\n    },\n\n    pan: function(delta) {\n        var range = this.translateRange(delta);\n        return this.limitRange(range.min, range.max, this.totalMin, this.totalMax, range.offset);\n    },\n\n    pointsRange: function(start, end) {\n        var startValue = this.getValue(start);\n        var endValue = this.getValue(end);\n        var min = Math.min(startValue, endValue);\n        var max = Math.max(startValue, endValue);\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    scaleRange: function(scale, cursor) {\n        var ref = this.options;\n        var base = ref.majorUnit;\n        var logMin = log(this.options.min, base);\n        var logMax = log(this.options.max, base);\n        var position = Math.abs(this.pointOffset(cursor));\n        var range = logMax - logMin;\n        var delta = this.scaleToDelta(scale, range);\n        var min = Math.pow(base, logMin + position * delta);\n        var max = Math.pow(base, logMax - (1 - position) * delta);\n\n        if (max - min < MIN_VALUE_RANGE$2) {\n            max = min + MIN_VALUE_RANGE$2;\n        }\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    zoomRange: function(scale, cursor) {\n        var range = this.scaleRange(scale, cursor);\n        var ref = this;\n        var totalMin = ref.totalMin;\n        var totalMax = ref.totalMax;\n\n        return {\n            min: limitValue(range.min, totalMin, totalMax),\n            max: limitValue(range.max, totalMin, totalMax)\n        };\n    },\n\n    _minorIntervalOptions: function(power) {\n        var ref = this.options;\n        var minorUnit = ref.minorUnit;\n        var base = ref.majorUnit;\n        var value = Math.pow(base, power);\n        var nextValue = Math.pow(base, power + 1);\n        var difference = nextValue - value;\n        var minorStep = difference / minorUnit;\n\n        return {\n            value: value,\n            minorStep: minorStep\n        };\n    },\n\n    lineInfo: function() {\n        var info = Axis.fn.lineInfo.call(this);\n        info.step = info.axisDir * (info.lineSize / (this.logMax - this.logMin));\n\n        return info;\n    }\n});\n\nfunction initRange(autoMin, autoMax, axisOptions, options) {\n    var min = axisOptions.min;\n    var max = axisOptions.max;\n\n    if (defined(axisOptions.axisCrossingValue) && axisOptions.axisCrossingValue <= 0) {\n        throwNegativeValuesError();\n    }\n\n    if (!defined(options.max)) {\n        max = autoMax;\n    } else if (options.max <= 0) {\n        throwNegativeValuesError();\n    }\n\n    if (!defined(options.min)) {\n        min = autoMin;\n    } else if (options.min <= 0) {\n        throwNegativeValuesError();\n    }\n\n    return {\n        min: min,\n        max: max\n    };\n}\n\nfunction autoAxisMin$1(min, max, options) {\n    var base = options.majorUnit;\n    var autoMin = min;\n    if (min <= 0) {\n        autoMin = max <= 1 ? Math.pow(base, -2) : 1;\n    } else if (!options.narrowRange) {\n        autoMin = Math.pow(base, Math.floor(log(min, base)));\n    }\n    return autoMin;\n}\n\nfunction autoAxisMax$1(max, base) {\n    var logMaxRemainder = round(log(max, base), DEFAULT_PRECISION) % 1;\n    var autoMax;\n    if (max <= 0) {\n        autoMax = base;\n    } else if (logMaxRemainder !== 0 && (logMaxRemainder < 0.3 || logMaxRemainder > 0.9)) {\n        autoMax = Math.pow(base, log(max, base) + 0.2);\n    } else {\n        autoMax = Math.pow(base, Math.ceil(log(max, base)));\n    }\n\n    return autoMax;\n}\n\nfunction throwNegativeValuesError() {\n    throw new Error(\"Non positive values cannot be used for a logarithmic axis\");\n}\n\nfunction log(x, base) {\n    return Math.log(x) / Math.log(base);\n}\n\nsetDefaultOptions(LogarithmicAxis, {\n    type: \"log\",\n    majorUnit: DEFAULT_MAJOR_UNIT,\n    minorUnit: 1,\n    axisCrossingValue: 1,\n    vertical: true,\n    majorGridLines: {\n        visible: true,\n        width: 1,\n        color: BLACK\n    },\n    zIndex: 1,\n    _deferLabels: true\n});\n\nvar GridLinesMixin = {\n    createGridLines: function(altAxis) {\n        var options = this.options;\n        var radius = Math.abs(this.box.center().y - altAxis.lineBox().y1);\n        var gridLines = [];\n        var skipMajor = false;\n        var majorAngles, minorAngles;\n\n        if (options.majorGridLines.visible) {\n            majorAngles = this.majorGridLineAngles(altAxis);\n            skipMajor = true;\n\n            gridLines = this.renderMajorGridLines(\n                majorAngles, radius, options.majorGridLines\n            );\n        }\n\n        if (options.minorGridLines.visible) {\n            minorAngles = this.minorGridLineAngles(altAxis, skipMajor);\n\n            append(gridLines, this.renderMinorGridLines(\n                minorAngles, radius, options.minorGridLines, altAxis, skipMajor\n            ));\n        }\n\n        return gridLines;\n    },\n\n    renderMajorGridLines: function(angles, radius, options) {\n        return this.renderGridLines(angles, radius, options);\n    },\n\n    renderMinorGridLines: function(angles, radius, options, altAxis, skipMajor) {\n        var radiusCallback = this.radiusCallback && this.radiusCallback(radius, altAxis, skipMajor);\n        return this.renderGridLines(angles, radius, options, radiusCallback);\n    },\n\n    renderGridLines: function(angles, radius, options, radiusCallback) {\n        var style = {\n            stroke: {\n                width: options.width,\n                color: options.color,\n                dashType: options.dashType\n            }\n        };\n\n        var center = this.box.center();\n        var circle = new Circle([ center.x, center.y ], radius);\n        var container = this.gridLinesVisual();\n\n        for (var i = 0; i < angles.length; i++) {\n            var line = new Path(style);\n            if (radiusCallback) {\n                circle.radius = radiusCallback(angles[i]);\n            }\n\n            line.moveTo(circle.center)\n                .lineTo(circle.pointAt(angles[i] + 180));\n\n            container.append(line);\n        }\n\n        return container.children;\n    },\n\n    gridLineAngles: function(altAxis, size, skip, step, skipAngles) {\n        var this$1 = this;\n\n        var divs = this.intervals(size, skip, step, skipAngles);\n        var options = altAxis.options;\n        var altAxisVisible = options.visible && (options.line || {}).visible !== false;\n\n        return map(divs, function (d) {\n            var alpha = this$1.intervalAngle(d);\n\n            if (!altAxisVisible || alpha !== 90) {\n                return alpha;\n            }\n        });\n    }\n};\n\nvar RadarCategoryAxis = CategoryAxis.extend({\n    range: function() {\n        return { min: 0, max: this.options.categories.length };\n    },\n\n    reflow: function(box) {\n        this.box = box;\n        this.reflowLabels();\n    },\n\n    lineBox: function() {\n        return this.box;\n    },\n\n    reflowLabels: function() {\n        var this$1 = this;\n\n        var ref = this;\n        var labels = ref.labels;\n        var labelOptions = ref.options.labels;\n        var skip = labelOptions.skip || 0;\n        var step = labelOptions.step || 1;\n        var measureBox = new Box();\n\n        for (var i = 0; i < labels.length; i++) {\n            labels[i].reflow(measureBox);\n            var labelBox = labels[i].box;\n\n            labels[i].reflow(this$1.getSlot(skip + i * step).adjacentBox(\n                0, labelBox.width(), labelBox.height()\n            ));\n        }\n    },\n\n    intervals: function(size, skipOption, stepOption, skipAngles) {\n        if (skipAngles === void 0) { skipAngles = false; }\n\n        var options = this.options;\n        var categories = options.categories.length;\n        var divCount = categories / size || 1;\n        var divAngle = 360 / divCount;\n        var skip = skipOption || 0;\n        var step = stepOption || 1;\n        var divs = [];\n        var angle = 0;\n\n        for (var i = skip; i < divCount; i += step) {\n            if (options.reverse) {\n                angle = 360 - i * divAngle;\n            } else {\n                angle = i * divAngle;\n            }\n\n            angle = round(angle, COORD_PRECISION) % 360;\n\n            if (!(skipAngles && inArray(angle, skipAngles))) {\n                divs.push(angle);\n            }\n        }\n\n        return divs;\n    },\n\n    majorIntervals: function() {\n        return this.intervals(1);\n    },\n\n    minorIntervals: function() {\n        return this.intervals(0.5);\n    },\n\n    intervalAngle: function(interval) {\n        return (360 + interval + this.options.startAngle) % 360;\n    },\n\n    majorAngles: function() {\n        var this$1 = this;\n\n        return map(this.majorIntervals(), function (interval) { return this$1.intervalAngle(interval); });\n    },\n\n    createLine: function() {\n        return [];\n    },\n\n    majorGridLineAngles: function(altAxis) {\n        var majorGridLines = this.options.majorGridLines;\n        return this.gridLineAngles(altAxis, 1, majorGridLines.skip, majorGridLines.step);\n    },\n\n    minorGridLineAngles: function(altAxis, skipMajor) {\n        var ref = this.options;\n        var minorGridLines = ref.minorGridLines;\n        var majorGridLines = ref.majorGridLines;\n        var majorGridLineAngles = skipMajor ? this.intervals(1, majorGridLines.skip, majorGridLines.step) : null;\n\n        return this.gridLineAngles(altAxis, 0.5, minorGridLines.skip, minorGridLines.step, majorGridLineAngles);\n    },\n\n    radiusCallback: function(radius, altAxis, skipMajor) {\n        if (altAxis.options.type !== ARC) {\n            var minorAngle = rad(360 / (this.options.categories.length * 2));\n            var minorRadius = Math.cos(minorAngle) * radius;\n            var majorAngles = this.majorAngles();\n\n            var radiusCallback = function(angle) {\n                if (!skipMajor && inArray(angle, majorAngles)) {\n                    return radius;\n                }\n\n                return minorRadius;\n            };\n            return radiusCallback;\n        }\n    },\n\n    createPlotBands: function() {\n        var this$1 = this;\n\n        var plotBands = this.options.plotBands || [];\n\n        var group = this._plotbandGroup = new Group({\n            zIndex: -1\n        });\n\n        for (var i = 0; i < plotBands.length; i++) {\n            var band = plotBands[i];\n            var slot = this$1.plotBandSlot(band);\n            var singleSlot = this$1.getSlot(band.from);\n\n            var head = band.from - Math.floor(band.from);\n            slot.startAngle += head * singleSlot.angle;\n\n            var tail = Math.ceil(band.to) - band.to;\n            slot.angle -= (tail + head) * singleSlot.angle;\n\n            var ring = ShapeBuilder.current.createRing(slot, {\n                fill: {\n                    color: band.color,\n                    opacity: band.opacity\n                },\n                stroke: {\n                    opacity: band.opacity\n                }\n            });\n            group.append(ring);\n        }\n\n        this.appendVisual(group);\n    },\n\n    plotBandSlot: function(band) {\n        return this.getSlot(band.from, band.to - 1);\n    },\n\n    getSlot: function(from, to) {\n        var options = this.options;\n        var justified = options.justified;\n        var box = this.box;\n        var divs = this.majorAngles();\n        var totalDivs = divs.length;\n        var slotAngle = 360 / totalDivs;\n        var fromValue = from;\n\n        if (options.reverse && !justified) {\n            fromValue = (fromValue + 1) % totalDivs;\n        }\n\n        fromValue = limitValue(Math.floor(fromValue), 0, totalDivs - 1);\n        var slotStart = divs[fromValue];\n\n        if (justified) {\n            slotStart = slotStart - slotAngle / 2;\n\n            if (slotStart < 0) {\n                slotStart += 360;\n            }\n        }\n\n        var toValue = limitValue(Math.ceil(to || fromValue), fromValue, totalDivs - 1);\n        var slots = toValue - fromValue + 1;\n        var angle = slotAngle * slots;\n\n        return new Ring(box.center(), 0, box.height() / 2, slotStart, angle);\n    },\n\n    slot: function(from, to) {\n        var slot = this.getSlot(from, to);\n        var startAngle = slot.startAngle + 180;\n        var endAngle = startAngle + slot.angle;\n\n        return new geometry.Arc([ slot.center.x, slot.center.y ], {\n            startAngle: startAngle,\n            endAngle: endAngle,\n            radiusX: slot.radius,\n            radiusY: slot.radius\n        });\n    },\n\n    pointCategoryIndex: function(point) {\n        var this$1 = this;\n\n        var length = this.options.categories.length;\n        var index = null;\n\n        for (var i = 0; i < length; i++) {\n            var slot = this$1.getSlot(i);\n            if (slot.containsPoint(point)) {\n                index = i;\n                break;\n            }\n        }\n\n        return index;\n    }\n});\n\nsetDefaultOptions(RadarCategoryAxis, {\n    startAngle: 90,\n    labels: {\n        margin: getSpacing(10)\n    },\n    majorGridLines: {\n        visible: true\n    },\n    justified: true\n});\ndeepExtend(RadarCategoryAxis.prototype, GridLinesMixin);\n\nvar PolarAxis = Axis.extend({\n    init: function(options, chartService) {\n        Axis.fn.init.call(this, options, chartService);\n\n        var instanceOptions = this.options;\n\n        instanceOptions.minorUnit = instanceOptions.minorUnit || instanceOptions.majorUnit / 2;\n    },\n\n    getDivisions: function(stepValue) {\n        return NumericAxis.prototype.getDivisions.call(this, stepValue) - 1;\n    },\n\n    reflow: function(box) {\n        this.box = box;\n        this.reflowLabels();\n    },\n\n    reflowLabels: function() {\n        var this$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var labels = ref.labels;\n        var labelOptions = ref.options.labels;\n        var skip = labelOptions.skip || 0;\n        var step = labelOptions.step || 1;\n\n        var measureBox = new Box();\n        var divs = this.intervals(options.majorUnit, skip, step);\n\n        for (var i = 0; i < labels.length; i++) {\n            labels[i].reflow(measureBox);\n            var labelBox = labels[i].box;\n\n            labels[i].reflow(this$1.getSlot(divs[i]).adjacentBox(0, labelBox.width(), labelBox.height()));\n        }\n    },\n\n    lineBox: function() {\n        return this.box;\n    },\n\n    intervals: function(size, skipOption, stepOption, skipAngles) {\n        if (skipAngles === void 0) { skipAngles = false; }\n\n        var min = this.options.min;\n        var divisions = this.getDivisions(size);\n        var divs = [];\n        var skip = skipOption || 0;\n        var step = stepOption || 1;\n\n        for (var i = skip; i < divisions; i += step) {\n            var current = (360 + min + i * size) % 360;\n            if (!(skipAngles && inArray(current, skipAngles))) {\n                divs.push(current);\n            }\n        }\n\n        return divs;\n    },\n\n    majorIntervals: function() {\n        return this.intervals(this.options.majorUnit);\n    },\n\n    minorIntervals: function() {\n        return this.intervals(this.options.minorUnit);\n    },\n\n    intervalAngle: function(i) {\n        return (540 - i - this.options.startAngle) % 360;\n    },\n\n    createLine: function() {\n        return [];\n    },\n\n    majorGridLineAngles: function(altAxis) {\n        var majorGridLines = this.options.majorGridLines;\n        return this.gridLineAngles(altAxis, this.options.majorUnit, majorGridLines.skip, majorGridLines.step);\n    },\n\n    minorGridLineAngles: function(altAxis, skipMajor) {\n        var options = this.options;\n        var minorGridLines = options.minorGridLines;\n        var majorGridLines = options.majorGridLines;\n        var majorGridLineAngles = skipMajor ? this.intervals(options.majorUnit, majorGridLines.skip, majorGridLines.step) : null;\n\n        return this.gridLineAngles(altAxis, options.minorUnit, minorGridLines.skip, minorGridLines.step, majorGridLineAngles);\n    },\n\n    plotBandSlot: function(band) {\n        return this.getSlot(band.from, band.to);\n    },\n\n    getSlot: function(a, b) {\n        var ref = this;\n        var options = ref.options;\n        var box = ref.box;\n        var startAngle = options.startAngle;\n        var start = limitValue(a, options.min, options.max);\n        var end = limitValue(b || start, start, options.max);\n\n        if (options.reverse) {\n            start *= -1;\n            end *= -1;\n        }\n\n        start = (540 - start - startAngle) % 360;\n        end = (540 - end - startAngle) % 360;\n\n        if (end < start) {\n            var tmp = start;\n            start = end;\n            end = tmp;\n        }\n\n        return new Ring(box.center(), 0, box.height() / 2, start, end - start);\n    },\n\n    slot: function(from, to) {\n        if (to === void 0) { to = from; }\n\n        var options = this.options;\n        var start = 360 - options.startAngle;\n        var slot = this.getSlot(from, to);\n        var min = Math.min(from, to);\n        var max = Math.max(from, to);\n        var startAngle, endAngle;\n\n        if (options.reverse) {\n            startAngle = min;\n            endAngle = max;\n        } else {\n            startAngle = 360 - max;\n            endAngle = 360 - min;\n        }\n\n        startAngle = (startAngle + start) % 360;\n        endAngle = (endAngle + start) % 360;\n\n        return new geometry.Arc([ slot.center.x, slot.center.y ], {\n            startAngle: startAngle,\n            endAngle: endAngle,\n            radiusX: slot.radius,\n            radiusY: slot.radius\n        });\n    },\n\n    getValue: function(point) {\n        var options = this.options;\n        var center = this.box.center();\n        var dx = point.x - center.x;\n        var dy = point.y - center.y;\n        var theta = Math.round(deg(Math.atan2(dy, dx)));\n        var start = options.startAngle;\n\n        if (!options.reverse) {\n            theta *= -1;\n            start *= -1;\n        }\n\n        return (theta + start + 360) % 360;\n    },\n\n    valueRange: function() {\n        return {\n            min: 0,\n            max: Math.PI * 2\n        };\n    }\n});\n\nsetDefaultOptions(PolarAxis, {\n    type: \"polar\",\n    startAngle: 0,\n    reverse: false,\n    majorUnit: 60,\n    min: 0,\n    max: 360,\n    labels: {\n        margin: getSpacing(10)\n    },\n    majorGridLines: {\n        color: BLACK,\n        visible: true,\n        width: 1\n    },\n    minorGridLines: {\n        color: \"#aaa\"\n    }\n});\n\ndeepExtend(PolarAxis.prototype, GridLinesMixin, {\n    createPlotBands: RadarCategoryAxis.prototype.createPlotBands,\n    majorAngles: RadarCategoryAxis.prototype.majorAngles,\n    range: NumericAxis.prototype.range,\n    labelsCount: NumericAxis.prototype.labelsCount,\n    createAxisLabel: NumericAxis.prototype.createAxisLabel\n});\n\nvar RadarNumericAxisMixin = {\n    options: {\n        majorGridLines: {\n            visible: true\n        }\n    },\n\n    createPlotBands: function() {\n        var this$1 = this;\n\n        var ref = this.options;\n        var type = ref.majorGridLines.type;\n        var plotBands = ref.plotBands; if (plotBands === void 0) { plotBands = []; }\n        var altAxis = this.plotArea.polarAxis;\n        var majorAngles = altAxis.majorAngles();\n        var center = altAxis.box.center();\n        var group = this._plotbandGroup = new Group({\n            zIndex: -1\n        });\n\n        for (var i = 0; i < plotBands.length; i++) {\n            var band = plotBands[i];\n            var bandStyle = {\n                fill: {\n                    color: band.color,\n                    opacity: band.opacity\n                },\n                stroke: {\n                    opacity: band.opacity\n                }\n            };\n\n            var slot = this$1.getSlot(band.from, band.to, true);\n            var ring = new Ring(center, center.y - slot.y2, center.y - slot.y1, 0, 360);\n\n            var shape = (void 0);\n            if (type === ARC) {\n                shape = ShapeBuilder.current.createRing(ring, bandStyle);\n            } else {\n                shape = Path.fromPoints(this$1.plotBandPoints(ring, majorAngles), bandStyle).close();\n            }\n\n            group.append(shape);\n        }\n\n        this.appendVisual(group);\n    },\n\n    plotBandPoints: function(ring, angles) {\n        var innerPoints = [];\n        var outerPoints = [];\n        var center = [ ring.center.x, ring.center.y ];\n        var innerCircle = new Circle(center, ring.innerRadius);\n        var outerCircle = new Circle(center, ring.radius);\n\n        for (var i = 0; i < angles.length; i++) {\n            innerPoints.push(innerCircle.pointAt(angles[i] + 180));\n            outerPoints.push(outerCircle.pointAt(angles[i] + 180));\n        }\n\n        innerPoints.reverse();\n        innerPoints.push(innerPoints[0]);\n        outerPoints.push(outerPoints[0]);\n\n        return outerPoints.concat(innerPoints);\n    },\n\n    createGridLines: function(altAxis) {\n        var options = this.options;\n        var majorTicks = this.radarMajorGridLinePositions();\n        var majorAngles = altAxis.majorAngles();\n        var center = altAxis.box.center();\n        var gridLines = [];\n\n        if (options.majorGridLines.visible) {\n            gridLines = this.renderGridLines(\n                center, majorTicks, majorAngles, options.majorGridLines\n            );\n        }\n\n        if (options.minorGridLines.visible) {\n            var minorTicks = this.radarMinorGridLinePositions();\n            append(gridLines, this.renderGridLines(\n                center, minorTicks, majorAngles, options.minorGridLines\n            ));\n        }\n\n        return gridLines;\n    },\n\n    renderGridLines: function(center, ticks, angles, options) {\n        var style = {\n            stroke: {\n                width: options.width,\n                color: options.color,\n                dashType: options.dashType\n            }\n        };\n        var skip = options.skip; if (skip === void 0) { skip = 0; }\n        var step = options.step; if (step === void 0) { step = 0; }\n        var container = this.gridLinesVisual();\n\n        for (var tickIx = skip; tickIx < ticks.length; tickIx += step) {\n            var tickRadius = center.y - ticks[tickIx];\n            if (tickRadius > 0) {\n                var circle = new Circle([ center.x, center.y ], tickRadius);\n                if (options.type === ARC) {\n                    container.append(new drawing.Circle(circle, style));\n                } else {\n                    var line = new Path(style);\n                    for (var angleIx = 0; angleIx < angles.length; angleIx++) {\n                        line.lineTo(circle.pointAt(angles[angleIx] + 180));\n                    }\n\n                    line.close();\n                    container.append(line);\n                }\n            }\n        }\n\n        return container.children;\n    },\n\n    getValue: function(point) {\n        var lineBox = this.lineBox();\n        var altAxis = this.plotArea.polarAxis;\n        var majorAngles = altAxis.majorAngles();\n        var center = altAxis.box.center();\n        var radius = point.distanceTo(center);\n        var distance = radius;\n\n        if (this.options.majorGridLines.type !== ARC && majorAngles.length > 1) {\n            var dx = point.x - center.x;\n            var dy = point.y - center.y;\n            var theta = (deg(Math.atan2(dy, dx)) + 540) % 360;\n\n            majorAngles.sort(function(a, b) {\n                return angularDistance(a, theta) - angularDistance(b, theta);\n            });\n\n            // Solve triangle (center, point, axis X) using one side (radius) and two angles.\n            // Angles are derived from triangle (center, point, gridline X)\n            var midAngle = angularDistance(majorAngles[0], majorAngles[1]) / 2;\n            var alpha = angularDistance(theta, majorAngles[0]);\n            var gamma = 90 - midAngle;\n            var beta = 180 - alpha - gamma;\n\n            distance = radius * (Math.sin(rad(beta)) / Math.sin(rad(gamma)));\n        }\n\n        return this.axisType().prototype.getValue.call(\n            this, new Point(lineBox.x1, lineBox.y2 - distance)\n        );\n    }\n};\n\nfunction angularDistance(a, b) {\n    return 180 - Math.abs(Math.abs(a - b) - 180);\n}\n\nvar RadarNumericAxis = NumericAxis.extend({\n    radarMajorGridLinePositions: function() {\n        return this.getTickPositions(this.options.majorUnit);\n    },\n\n    radarMinorGridLinePositions: function() {\n        var options = this.options;\n        var minorSkipStep = 0;\n\n        if (options.majorGridLines.visible) {\n            minorSkipStep = options.majorUnit;\n        }\n        return this.getTickPositions(options.minorUnit, minorSkipStep);\n    },\n\n    axisType: function() {\n        return NumericAxis;\n    }\n});\n\ndeepExtend(RadarNumericAxis.prototype, RadarNumericAxisMixin);\n\nvar RadarLogarithmicAxis = LogarithmicAxis.extend({\n    radarMajorGridLinePositions: function() {\n        var positions = [];\n\n        this.traverseMajorTicksPositions(function(position) {\n            positions.push(position);\n        }, this.options.majorGridLines);\n\n        return positions;\n    },\n\n    radarMinorGridLinePositions: function() {\n        var positions = [];\n\n        this.traverseMinorTicksPositions(function(position) {\n            positions.push(position);\n        }, this.options.minorGridLines);\n\n        return positions;\n    },\n\n    axisType: function() {\n        return LogarithmicAxis;\n    }\n});\n\ndeepExtend(RadarLogarithmicAxis.prototype, RadarNumericAxisMixin);\n\nvar WEIGHT = 0.333;\nvar EXTREMUM_ALLOWED_DEVIATION = 0.01;\n\nvar CurveProcessor = Class.extend({\n    init: function(closed) {\n\n        this.closed = closed;\n    },\n\n    process: function(dataPoints) {\n        var this$1 = this;\n\n        var points = dataPoints.slice(0);\n        var segments = [];\n        var closed = this.closed;\n        var length = points.length;\n\n        if (length > 2) {\n            this.removeDuplicates(0, points);\n            length = points.length;\n        }\n\n        if (length < 2 || (length === 2 && points[0].equals(points[1]))) {\n            return segments;\n        }\n\n        var p0 = points[0];\n        var p1 = points[1];\n        var p2 = points[2];\n\n        segments.push(new Segment(p0));\n\n        while (p0.equals(points[length - 1])) {\n            closed = true;\n            points.pop();\n            length--;\n        }\n\n        if (length === 2) {\n            var tangent = this.tangent(p0,p1, X, Y);\n\n            last(segments).controlOut(\n                this.firstControlPoint(tangent, p0, p1, X, Y)\n            );\n\n            segments.push(new Segment(\n                p1,\n                this.secondControlPoint(tangent, p0, p1, X, Y)\n            ));\n\n            return segments;\n        }\n\n        var initialControlPoint, lastControlPoint;\n\n        if (closed) {\n            p0 = points[length - 1]; p1 = points[0]; p2 = points[1];\n            var controlPoints = this.controlPoints(p0, p1, p2);\n            initialControlPoint = controlPoints[1];\n            lastControlPoint = controlPoints[0];\n        } else {\n            var tangent$1 = this.tangent(p0, p1, X,Y);\n            initialControlPoint = this.firstControlPoint(tangent$1, p0, p1, X, Y);\n        }\n\n        var cp0 = initialControlPoint;\n        for (var idx = 0; idx <= length - 3; idx++) {\n            this$1.removeDuplicates(idx, points);\n            length = points.length;\n            if (idx + 3 <= length) {\n                p0 = points[idx]; p1 = points[idx + 1]; p2 = points[idx + 2];\n                var controlPoints$1 = this$1.controlPoints(p0,p1,p2);\n\n                last(segments).controlOut(cp0);\n                cp0 = controlPoints$1[1];\n\n                var cp1 = controlPoints$1[0];\n                segments.push(new Segment(p1, cp1));\n            }\n        }\n\n        if (closed) {\n            p0 = points[length - 2]; p1 = points[length - 1]; p2 = points[0];\n            var controlPoints$2 = this.controlPoints(p0, p1, p2);\n\n            last(segments).controlOut(cp0);\n            segments.push(new Segment(\n                p1,\n                controlPoints$2[0]\n            ));\n\n            last(segments).controlOut(controlPoints$2[1]);\n            segments.push(new Segment(\n                p2,\n                lastControlPoint\n            ));\n        } else {\n            var tangent$2 = this.tangent(p1, p2, X, Y);\n\n            last(segments).controlOut(cp0);\n            segments.push(new Segment(\n                p2,\n                this.secondControlPoint(tangent$2, p1, p2, X, Y)\n            ));\n        }\n\n        return segments;\n    },\n\n    removeDuplicates: function(idx, points) {\n        while (points[idx + 1] && (points[idx].equals(points[idx + 1]) || points[idx + 1].equals(points[idx + 2]))) {\n            points.splice(idx + 1, 1);\n        }\n    },\n\n    invertAxis: function(p0, p1, p2) {\n        var invertAxis = false;\n\n        if (p0.x === p1.x) {\n            invertAxis = true;\n        } else if (p1.x === p2.x) {\n            if ((p1.y < p2.y && p0.y <= p1.y) || (p2.y < p1.y && p1.y <= p0.y)) {\n                invertAxis = true;\n            }\n        } else {\n            var fn = this.lineFunction(p0,p1);\n            var y2 = this.calculateFunction(fn, p2.x);\n            if (!(p0.y <= p1.y && p2.y <= y2) &&\n                !(p1.y <= p0.y && p2.y >= y2)) {\n                invertAxis = true;\n            }\n        }\n\n        return invertAxis;\n    },\n\n    isLine: function(p0, p1, p2) {\n        var fn = this.lineFunction(p0, p1);\n        var y2 = this.calculateFunction(fn, p2.x);\n\n        return (p0.x === p1.x && p1.x === p2.x) || round(y2, 1) === round(p2.y, 1);\n    },\n\n    lineFunction: function(p1, p2) {\n        var a = (p2.y - p1.y) / (p2.x - p1.x);\n        var b = p1.y - a * p1.x;\n\n        return [ b, a ];\n    },\n\n    controlPoints: function(p0, p1, p2) {\n        var xField = X;\n        var yField = Y;\n        var restrict = false;\n        var switchOrientation = false;\n        var tangent;\n\n        if (this.isLine(p0, p1, p2)) {\n            tangent = this.tangent(p0, p1, X, Y);\n        } else {\n            var monotonic = {\n                x: this.isMonotonicByField(p0, p1, p2, X),\n                y: this.isMonotonicByField(p0, p1, p2, Y)\n            };\n\n            if (monotonic.x && monotonic.y) {\n                tangent = this.tangent(p0, p2, X, Y);\n                restrict = true;\n            } else {\n                if (this.invertAxis(p0, p1, p2)) {\n                    xField = Y;\n                    yField = X;\n                }\n\n                if (monotonic[xField]) {\n                    tangent = 0;\n                } else {\n                    var sign;\n                    if ((p2[yField] < p0[yField] && p0[yField] <= p1[yField]) ||\n                        (p0[yField] < p2[yField] && p1[yField] <= p0[yField])) {\n                        sign = numberSign((p2[yField] - p0[yField]) * (p1[xField] - p0[xField]));\n                    } else {\n                        sign = -numberSign((p2[xField] - p0[xField]) * (p1[yField] - p0[yField]));\n                    }\n\n                    tangent = EXTREMUM_ALLOWED_DEVIATION * sign;\n                    switchOrientation = true;\n                }\n            }\n        }\n\n        var secondControlPoint = this.secondControlPoint(tangent, p0, p1, xField, yField);\n\n        if (switchOrientation) {\n            var oldXField = xField;\n            xField = yField;\n            yField = oldXField;\n        }\n\n        var firstControlPoint = this.firstControlPoint(tangent, p1, p2, xField, yField);\n\n        if (restrict) {\n            this.restrictControlPoint(p0, p1, secondControlPoint, tangent);\n            this.restrictControlPoint(p1, p2, firstControlPoint, tangent);\n        }\n\n        return [ secondControlPoint, firstControlPoint ];\n    },\n\n    restrictControlPoint: function(p1, p2, cp, tangent) {\n        if (p1.y < p2.y) {\n            if (p2.y < cp.y) {\n                cp.x = p1.x + (p2.y - p1.y) / tangent;\n                cp.y = p2.y;\n            } else if (cp.y < p1.y) {\n                cp.x = p2.x - (p2.y - p1.y) / tangent;\n                cp.y = p1.y;\n            }\n        } else {\n            if (cp.y < p2.y) {\n                cp.x = p1.x - (p1.y - p2.y) / tangent;\n                cp.y = p2.y;\n            } else if (p1.y < cp.y) {\n                cp.x = p2.x + (p1.y - p2.y) / tangent;\n                cp.y = p1.y;\n            }\n        }\n    },\n\n    tangent: function(p0, p1, xField, yField) {\n        var x = p1[xField] - p0[xField];\n        var y = p1[yField] - p0[yField];\n        var tangent;\n\n        if (x === 0) {\n            tangent = 0;\n        } else {\n            tangent = y / x;\n        }\n\n        return tangent;\n    },\n\n    isMonotonicByField: function(p0, p1, p2, field) {\n        return (p2[field] > p1[field] && p1[field] > p0[field]) ||\n                    (p2[field] < p1[field] && p1[field] < p0[field]);\n    },\n\n    firstControlPoint: function(tangent, p0, p3, xField, yField) {\n        var t1 = p0[xField];\n        var t2 = p3[xField];\n        var distance = (t2 - t1) * WEIGHT;\n\n        return this.point(t1 + distance, p0[yField] + distance * tangent, xField, yField);\n    },\n\n    secondControlPoint: function(tangent, p0, p3, xField, yField) {\n        var t1 = p0[xField];\n        var t2 = p3[xField];\n        var distance = (t2 - t1) * WEIGHT;\n\n        return this.point(t2 - distance, p3[yField] - distance * tangent, xField, yField);\n    },\n\n    point: function(xValue, yValue, xField, yField) {\n        var controlPoint = new geometry.Point();\n        controlPoint[xField] = xValue;\n        controlPoint[yField] = yValue;\n\n        return controlPoint;\n    },\n\n    calculateFunction: function(fn, x) {\n        var length = fn.length;\n        var result = 0;\n\n        for (var i = 0; i < length; i++) {\n            result += Math.pow(x,i) * fn[i];\n        }\n        return result;\n    }\n});\n\nfunction numberSign(value) {\n    return value <= 0 ? -1 : 1;\n}\n\ndataviz.Gradients = GRADIENTS;\n\nkendo.deepExtend(kendo.dataviz, {\n    constants: constants,\n    services: services,\n    autoMajorUnit: autoMajorUnit,\n    Point: Point,\n    Box: Box,\n    Ring: Ring,\n    Sector: Sector,\n    ShapeBuilder: ShapeBuilder,\n    ShapeElement: ShapeElement,\n    ChartElement: ChartElement,\n    BoxElement: BoxElement,\n    RootElement: RootElement,\n    FloatElement: FloatElement,\n    Text: Text,\n    TextBox: TextBox,\n    Title: Title,\n    AxisLabel: AxisLabel,\n    Axis: Axis,\n    Note: Note,\n    CategoryAxis: CategoryAxis,\n    DateCategoryAxis: DateCategoryAxis,\n    DateValueAxis: DateValueAxis,\n    NumericAxis: NumericAxis,\n    LogarithmicAxis: LogarithmicAxis,\n    PolarAxis: PolarAxis,\n    RadarCategoryAxis: RadarCategoryAxis,\n    RadarNumericAxis: RadarNumericAxis,\n    RadarLogarithmicAxis: RadarLogarithmicAxis,\n    CurveProcessor: CurveProcessor,\n    rectToBox: rectToBox,\n    addClass: addClass,\n    removeClass: removeClass,\n    alignPathToPixel: alignPathToPixel,\n    clockwise: clockwise,\n    convertableToNumber: convertableToNumber,\n    deepExtend: deepExtend,\n    elementStyles: elementStyles,\n    getSpacing: getSpacing,\n    getTemplate: getTemplate,\n    getter: __common_getter_js,\n    grep: grep,\n    hasClasses: hasClasses,\n    HashMap: HashMap,\n    inArray: inArray,\n    interpolateValue: interpolateValue,\n    InstanceObserver: InstanceObserver,\n    isArray: isArray,\n    isFunction: isFunction,\n    isNumber: isNumber,\n    isObject: isObject,\n    isString: isString,\n    map: map,\n    mousewheelDelta: mousewheelDelta,\n    FontLoader: FontLoader,\n    setDefaultOptions: setDefaultOptions,\n    sparseArrayLimits: sparseArrayLimits,\n    styleValue: styleValue,\n    find: find,\n    elementScale: elementScale,\n    autoTextColor: autoTextColor,\n    createHashSet: createHashSet,\n    defaultErrorHandler: defaultErrorHandler,\n    keys: keys,\n    append: append,\n    bindEvents: bindEvents,\n    Class: Class,\n    defined: defined,\n    deg: deg,\n    elementOffset: elementOffset,\n    elementSize: elementSize,\n    eventCoordinates: eventCoordinates,\n    eventElement: eventElement,\n    hashKey: hashKey,\n    last: last,\n    limitValue: limitValue,\n    logToConsole: kendo.logToConsole,\n    objectKey: objectKey,\n    rad: rad,\n    round: round,\n    unbindEvents: unbindEvents,\n    valueOrDefault: valueOrDefault,\n    absoluteDateDiff: absoluteDateDiff,\n    addDuration: addDuration,\n    addTicks: addTicks,\n    ceilDate: ceilDate,\n    dateComparer: dateComparer,\n    dateDiff: dateDiff,\n    dateEquals: dateEquals,\n    dateIndex: dateIndex,\n    duration: duration,\n    floorDate: floorDate,\n    lteDateIndex: lteDateIndex,\n    startOfWeek: startOfWeek,\n    toDate: toDate,\n    parseDate: parseDate,\n    parseDates: parseDates,\n    toTime: toTime,\n    firstDay: firstDay\n});\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n(function(f, define) {\n    define('dataviz/core/core',[\n        \"./kendo-core\"\n    ], f);\n})(function() {\n\n(function($) {\n\n    var dataviz = kendo.dataviz;\n    var services = dataviz.services;\n    var draw = kendo.drawing;\n\n    dataviz.SASS_THEMES = [\"sass\", \"default-v2\", \"bootstrap-v4\", \"material-v2\"];\n\n    dataviz.ExportMixin = {\n        extend: function(proto, skipLegacy) {\n            if (!proto.exportVisual) {\n                throw new Error(\"Mixin target has no exportVisual method defined.\");\n            }\n\n            proto.exportSVG = this.exportSVG;\n            proto.exportImage = this.exportImage;\n            proto.exportPDF = this.exportPDF;\n\n            if (!skipLegacy) {\n                proto.svg = this.svg;\n                proto.imageDataURL = this.imageDataURL;\n            }\n        },\n\n        exportSVG: function(options) {\n            return draw.exportSVG(this.exportVisual(), options);\n        },\n\n        exportImage: function(options) {\n            return draw.exportImage(this.exportVisual(options), options);\n        },\n\n        exportPDF: function(options) {\n            return draw.exportPDF(this.exportVisual(), options);\n        },\n\n        svg: function() {\n            if (draw.svg.Surface) {\n                return draw.svg.exportGroup(this.exportVisual());\n            } else {\n                throw new Error(\"SVG Export failed. Unable to export instantiate kendo.drawing.svg.Surface\");\n            }\n        },\n\n        imageDataURL: function() {\n            if (!kendo.support.canvas) {\n                return null;\n            }\n\n            if (draw.canvas.Surface) {\n                var container = $(\"<div />\").css({\n                    display: \"none\",\n                    width: this.element.width(),\n                    height: this.element.height()\n                }).appendTo(document.body);\n\n                var surface = new draw.canvas.Surface(container[0]);\n                surface.draw(this.exportVisual());\n                var image = surface._rootElement.toDataURL();\n\n                surface.destroy();\n                container.remove();\n\n                return image;\n            } else {\n                throw new Error(\"Image Export failed. Unable to export instantiate kendo.drawing.canvas.Surface\");\n            }\n        }\n    };\n\n    services.IntlService.register({\n       format: function(format) {\n           return kendo.format.apply(null, [format].concat(Array.prototype.slice.call(arguments, 1)));\n       },\n       toString: kendo.toString,\n       parseDate: kendo.parseDate,\n       firstDay: function() {\n           return kendo.culture().calendars.standard.firstDay;\n       }\n    });\n\n    services.TemplateService.register({\n       compile: kendo.template\n    });\n\n    dataviz.Point2D = dataviz.Point;\n    dataviz.Box2D = dataviz.Box;\n    dataviz.mwDelta = function(e) {\n        return dataviz.mousewheelDelta(e.originalEvent);\n    };\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n(function(f, define) {\n    define('kendo.dataviz.core',[\n        \"./dataviz/core/kendo-core\",\n        \"./dataviz/core/core\"\n    ], f);\n})(function() {\n\nvar __meta__ = {\n    id: \"dataviz.core\",\n    name: \"Core\",\n    description: \"The DataViz core functions\",\n    category: \"dataviz\",\n    depends: [ \"core\", \"drawing\" ],\n    hidden: true\n};\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n"],"names":["define","$","window","kendo","jQuery","drawing","dataviz","util","Path","Group","Class","support","geometry","Rect","Circle","geometryTransform","transform","Segment","deepExtend","isFunction","__common_getter_js","getter","ARC","AXIS_LABEL_CLICK","BLACK","BOTTOM","CENTER","CIRCLE","COORD_PRECISION","CROSS","DATE","DEFAULT_FONT","DEFAULT_HEIGHT","DEFAULT_PRECISION","DEFAULT_WIDTH","END","FORMAT_REGEX","HEIGHT","HIGHLIGHT_ZINDEX","INSIDE","LEFT","MAX_VALUE","Number","MIN_VALUE","NONE","NOTE_CLICK","NOTE_HOVER","NOTE_LEAVE","OBJECT","OUTSIDE","RIGHT","ROUNDED_RECT","START","STRING","TOP","TRIANGLE","VALUE","WHITE","WIDTH","X","Y","DEFAULT_SERIES_OPACITY","constants","isArray","value","Array","addClass","element","classes","classArray","idx","length","className","indexOf","SPACE_REGEX","removeClass","replace","alignPathToPixel","path","offset","options","stroke","defined","width","i","segments","anchor","round","translate","clockwise","angle1","angle2","x","y","isNumber","isNaN","isString","convertableToNumber","isFinite","isObject","styleValue","SIZE_STYLES_REGEX","isSizeField","field","test","elementStyles","styles","stylesArray","result","style","getComputedStyle","parseFloat","field$1","getSpacing","defaultSpacing","spacing","top","right","bottom","left","current","compile","template","TemplateService","extend","getTemplate","content","grep","array","callback","push","hasClasses","classNames","names","split","register","userImplementation","HashMap","this","_map","inArray","interpolateValue","start","end","progress","prototype","get","name","_key","set","Date","getTime","TRIGGER","InstanceObserver","init","observer","handlers","handlerMap","trigger","args","ref","isDefaultPrevented","callObserver","fnName","len","arguments","apply","requiresHandlers","this$1","map","browser","mousewheelDelta","e","delta","wheelDelta","webkit","Math","max","devicePixelRatio","detail","ceil","floor","append","bindEvents","deg","elementOffset","elementSize","eventCoordinates","eventElement","hashKey","last","limitValue","objectKey","rad","unbindEvents","valueOrDefault","FontLoader","setDefaultOptions","type","proto","sparseArrayLimits","arr","min","undefined","find","predicate","item","fetchFonts","fonts","state","depth","MAX_DEPTH","document","Object","keys","forEach","key","loadFonts","promises","font","load","logToConsole","Promise","all","then","preloadFonts","Matrix","matrixRegexp","parseMatrix","matrixString","match","unit","members","Function","bind","concat","transformMatrix","elementScale","matrix","parent","parentElement","parentMatrix","multiplyCopy","b","c","f","autoTextColor","color","isDark","Color","DELETED","LegacySet","values","_index","_values","slice","filter","has","add","delete","index","clear","defineProperties","fn","size","SetWrapper","_set","Set","from","supportsSet","supported","createHashSet","defaultErrorHandler","error","INSERT","DELETE","BACKSPACE","TAB","ENTER","ESC","UP","DOWN","HOME","SPACEBAR","PAGEUP","PAGEDOWN","F2","F10","F12","NUMPAD_PLUS","NUMPAD_MINUS","NUMPAD_DOT","autoMajorUnit","diff","abs","scale","pow","log","relativeValue","scaleMultiplier","Point","clone","equals","point","rotate","center","degrees","theta","cosT","cos","sinT","sin","cx","cy","multiply","a","distanceTo","dx","dy","sqrt","Box","onCircle","angle","radius","radians","x1","y1","x2","y2","box","height","move","wrap","targetBox","wrapPoint","arrayPoint","snapTo","axis","alignTo","targetCenter","shrink","dw","dh","expand","pad","padding","unpad","containsPoint","points","getHash","join","overlaps","rotation","r1","rotatePoint","r2","r3","r4","toRect","hasSize","align","alignment","c1","c2","sizeFunc","Ring","innerRadius","startAngle","middle","setRadius","newRadius","radianAngle","ax","ay","adjacentBox","distance","sector","midAndle","midPoint","hw","hh","sa","ca","p","endAngle","vector","startPoint","startVector","endPoint","endVector","dist","getBBox","allAngles","sort","numericComparer","startAngleIndex","endAngleIndex","angles","Sector","call","DIRECTION_ANGLE","ShapeBuilder","createRing","arc","Arc","radiusX","radiusY","fromArc","close","innerEnd","pointAt","lineTo","ChartElement","children","initUserOptions","reflow","currentChild","destroy","animation","getRoot","getSender","service","getService","sender","chartService","translateChildren","childrenCount","arguments$1","renderVisual","visible","createVisual","addVisual","renderChildren","createAnimation","renderComplete","visual","chartElement","appendVisual","zIndex","Animation","create","childVisual","noclip","clipRoot","stackRoot","stackVisual","isStackRoot","visuals","pos","sibling","here","insert","traverse","child","closest","matched","hasHighlight","highlight","createHighlight","toggleHighlight","show","opacity","customVisual","_highlight","highlightOptions","fill","highlightVisualArgs","series","dataItem","category","percentage","runningTotal","total","createGradientOverlay","gradientOptions","overlay","createGradient","closed","elements","supportsPointInactiveOpacity","BoxElement","margin","shrinkToFit","hasSetSize","borderWidth","border","reflowPaddingBox","vAlign","paddingBox","contentBox","hasBox","background","fromRect","visualStyle","dashType","cursor","ShapeElement","pointData","getElement","halfWidth","halfHeight","fromPoints","MultiPath","moveTo","rect","borderRadius","setCornerRadius","createElement","visualOptions","LINEAR","RADIAL","GRADIENTS","glass","stops","sharpBevel","roundedBevel","roundedGlass","supportVML","sharpGlass","bubbleShadow","boxDiff","r","s","d","g","h","boxes","RootElement","rootOptions","parseInt","gradients","currentBox","createBackground","hashCode","gradient","drawingGradient","LinearGradient","innerRadialStops","RadialGradient","cleanGradients","_observers","usedSpace","currentStops","currentStop","FloatElement","_initDirection","vertical","groupAxis","elementAxis","groupSizeField","elementSizeField","groupSpacing","elementSpacing","vSpacing","reflowChildren","ref$1","groupOptions","groups","groupsSize","maxGroupElementsSize","groupsCount","groupsStart","alignStart","groupStart","groupIdx","group","groupElements","elementStart","groupElementsCount","elementSize$$1","groupElementStart","groupSize","elementBox","maxSize","groupElementsSize","DrawingText","Text","measureText","baseline","topLeft","rectToBox","origin","bottomRight","ROWS_SPLIT_REGEX","TextBox","data","_initContainer","_autoReflow","rows","String","floatElement","textOptions","container","rowIdx","text","trim","visualFn","_boxReflow","visualBox","visualContext","clippedBBox","normalBox","rotatedBox","rotationTransform","context","getDefaultVisual","boxCenter","Title","position","AxisLabel","buildTitle","defaultOptions","titleOptions","title","format","culture","click","widget","alignRotation","bbox","rotationMatrix","rotationOrigin","alignAxis","distanceAxis","axisAnchor","transformCopy","topRight","bottomLeft","distanceLeft","distanceRight","alignEnd","alignCenter","DEFAULT_ICON_SIZE","DEFAULT_LABEL_COLOR","Note","fields","render","hide","label","icon","childAlias","noteTemplate","auto","aliasFor","marker","wrapperBox","line","lineStart","linePoints","createLine","defaultVisual","eventArgs","preventDefault","over","out","defaultImplementation","current$1","toString","parseDate","firstDay","IntlService","implementation","FORMAT_REPLACE_REGEX","FormatService","intlService","_intlService","formatString","intl","localeAuto","locale","placeholderFormat","substring","ChartService","chart","rtl","Boolean","notify","isPannable","pannable","lock","current$2","DomEventsBuilder","services","events","createAxisTick","tickOptions","tickX","tickY","tick","createAxisGridLine","gridLine","lineEnd","Axis","labels","majorTickSize","minorTickSize","minorTicks","minorTickType","majorTicks","majorTickType","initFields","_deferLabels","createLabels","createTitle","createNotes","labelsRange","skip","labelsCount","normalizeLabelRotation","labelOptions","step","clearLabels","autoRotateLabels","range","labelContext","count","createAxisLabel","clearTitle","lineBox","mirror","axisX","axisY","lineWidth","visualSize","notes","items","parseNoteValue","note","reverse","createPlotBands","gridLinesVisual","gridLines","_gridLines","createTicks","lineGroup","majorUnit","tickLineOptions","tickPositions","skipUnit","getMajorTickPositions","getMinorTickPositions","minorUnit","_alignLines","_lineGroup","getActualTickSize","tickSize","_backgroundPath","plotBands","plotArea","_plotbandGroup","altAxis","pane","axes","slotX","slotY","getSlot","to","createPlotBandLabel","bandRect","textbox","labelTemplate","createGridLines","minorGridLines","majorGridLines","axisLineVisible","linePos","lineOptions","sizeFn","titleSize","space","rootBox","boxSize","maxLabelSize","labelSize","arrangeTitle","arrangeLabels","arrangeNotes","getLabelsTickPositions","labelTickIndex","labelsBetweenTicks","tickIx","firstTickPosition","nextTickPosition","positionStart","positionEnd","positionLabel","labelOffset","labelBox","labelX","labelY","autoRotateLabelAngle","slotWidth","limit","labelAngle","idx$1","slot","shouldRenderNote","noteSlot","secondAxis","axisLabelText","tmpl","defaultText","templateContext","maxLabelOffset","lastLabel","offsetField","startPosition","endPosition","maxStartOffset","maxEndOffset","startTick","endTick","limitRange","rangeSize","minValue","maxValue","valueRange","seriesMin","seriesMax","lineDir","lineInfo","lineSize","axisDir","startEdge","axisOrigin","pointOffset","relative","scaleToDelta","rawScale","MAX_SCALE","justified","prepareUserOptions","MILLISECONDS","axisCrossingValue","SECONDS","MINUTES","HOURS","DAYS","WEEKS","MONTHS","YEARS","TIME_PER_MILLISECOND","TIME_PER_SECOND","TIME_PER_MINUTE","TIME_PER_HOUR","TIME_PER_DAY","TIME_PER_WEEK","TIME_PER_MONTH","TIME_PER_YEAR","TIME_PER_UNIT","years","months","weeks","days","hours","minutes","seconds","milliseconds","absoluteDateDiff","offsetDiff","getTimezoneOffset","addTicks","date","ticks","toDate","startOfWeek","weekStartDay","daysToSubtract","day","getDay","adjustDST","getHours","setHours","addHours","roundedDate","setMinutes","tzDiff","addDuration","dateValue","getFullYear","getMonth","getDate","getSeconds","setSeconds","getMilliseconds","setMilliseconds","floorDate","ceilDate","dateComparer","dateDiff","toTime","dateEquals","timeIndex","baseUnit","dateIndex","baseUnitStep","startDate","duration","lteDateIndex","sortedDates","low","high","currentDate","parseDates","dates","MIN_CATEGORY_POINTS_RANGE","MIN_CATEGORY_RANGE","CategoryAxis","_ticks","categoriesHash","copy","categories","srcCategories","definedMin","definedMax","rangeIndices","totalRange","totalRangeIndices","roundedRange","_seriesMax","scaleOptions","hideOutOfRangeLabels","valueAxis","firstLabel","getTicks","labelTicks","tickIndices","stepSize","indices","getTickPositions","positions","cache","hash","_hash","hasMinor","filterOutOfRangePositions","inRange","startIndex","endIndex","slotBox","singleSlot","p1","p2","limitSlot","limittedSlot","categoryIndex","pointCategoryIndex","startValue","getCategory","totalIndex","categoryAt","categoriesCount","translateRange","scaleRange","minDelta","maxDelta","zoomRange","totalMin","totalMax","dataItems","hideOutOfRangeNotes","pan","pointsRange","diffStart","diffEnd","rangeMin","rangeMax","_categoriesMap","currentRangeIndices","totalCount","mapCategories","map$$1","COORDINATE_LIMIT","DateLabelFormats","ZERO_THRESHOLD","AUTO","BASE_UNITS","FIT","categoryRange","_range","EmptyDateRange","displayIndices","displayRange","valueIndex","valuesCount","dateAt","DateRange","roundToBaseUnit","lowerEnd","roundToTotalStep","expandEnd","justifyEnd","valueStart","displayStart","valueEnd","displayEnd","next","_indices","minIdx","maxIdx","last$$1","upper","roundedStep","autoBaseUnit","startUnit","startStep","categoryLimits","span","autoBaseUnitSteps","maxDateGroups","autoUnit","autoUnitIx","units","totalUnits","unitSteps","nextStep","shift","defaultBaseUnit","minDiff","lastCategory","categoryIx","initUnit","toLowerCase","useDefault","DateCategoryAxis","dataRange","_parsed","panning","userSetBaseUnit","userSetBaseUnitStep","maxDivisions","divisionOptions","dataRangeOptions","divisionRange","rangeLabels","splice","isEmpty","totalLimits","panRange","datesRange","indicesRange","fit","maxDiff","rangeDiff","baseUnitIndex","autoBaseUnitStep","stepIndex","createRangeLabels","arrangeRangeLabels","position$1","autoRotateRangeLabels","hideOverlappingLabels","clip","rangeLabel","firstRangeLabel","lastRangeLabel","i$1","overlaps$1","unitFormat","dateFormats","createLabel","startText","endText","rotateLabel","dateRange","autoAxisMin","narrow","axisMin","autoAxisMax","axisMax","limitCoordinate","MIN_VALUE_RANGE$1","NumericAxis","autoOptions","autoAxisOptions","totalOptions","totalAxisOptions","axisOptions","totalMajorUnit","getDivisions","stepValue","divisions","skipStep","getValue","valueOffset","endValue","isValidRange","narrowRange","autoMin","autoMax","roundToMajorUnit","remainderClose","clearNullValues","userOptions","userSetMin","userSetMax","userSetLimits","divisor","ratio","remainder","threshold","MIN_VALUE_RANGE","DateValueAxis","axisCrossingValues","applyDefaults","dir","timeRange","limittedRange","timeUnits","baseUnitTime","userMajorUnit","actualUnits","unitsToAdd","head","tail","DEFAULT_MAJOR_UNIT","MIN_VALUE_RANGE$2","LogarithmicAxis","base","autoAxisMax$1","autoAxisMin$1","initRange","logMin","logMax","floorMax","traverseMajorTicksPositions","tickPosition","traverseMinorTicksPositions","power","ref$2","minorOptions","_minorIntervalOptions","minorStep","nextValue","difference","info","throwNegativeValuesError","logMaxRemainder","Error","GridLinesMixin","skipMajor","majorAngles","minorAngles","majorGridLineAngles","renderMajorGridLines","minorGridLineAngles","renderMinorGridLines","renderGridLines","radiusCallback","circle","gridLineAngles","skipAngles","divs","intervals","altAxisVisible","alpha","intervalAngle","RadarCategoryAxis","reflowLabels","measureBox","skipOption","stepOption","divCount","divAngle","majorIntervals","minorIntervals","interval","minorAngle","minorRadius","band","plotBandSlot","ring","totalDivs","slotAngle","fromValue","slotStart","toValue","slots","PolarAxis","instanceOptions","tmp","atan2","PI","RadarNumericAxisMixin","polarAxis","bandStyle","shape","plotBandPoints","innerPoints","outerPoints","innerCircle","outerCircle","radarMajorGridLinePositions","radarMinorGridLinePositions","tickRadius","angleIx","angularDistance","midAngle","gamma","beta","axisType","RadarNumericAxis","minorSkipStep","RadarLogarithmicAxis","WEIGHT","EXTREMUM_ALLOWED_DEVIATION","CurveProcessor","process","dataPoints","removeDuplicates","p0","pop","tangent","controlOut","firstControlPoint","secondControlPoint","initialControlPoint","lastControlPoint","controlPoints","tangent$1","cp0","controlPoints$1","cp1","controlPoints$2","tangent$2","invertAxis","lineFunction","calculateFunction","isLine","xField","yField","restrict","switchOrientation","monotonic","isMonotonicByField","sign","numberSign","oldXField","restrictControlPoint","cp","p3","t1","t2","xValue","yValue","controlPoint","Gradients","amd","a1","a2","a3","draw","SASS_THEMES","ExportMixin","skipLegacy","exportVisual","exportSVG","exportImage","exportPDF","svg","imageDataURL","Surface","exportGroup","canvas","css","display","appendTo","body","surface","image","_rootElement","toDataURL","remove","calendars","standard","Point2D","Box2D","mwDelta","originalEvent","__meta__","id","description","depends","hidden"],"mappings":"CAMA,SAAaA,QACTA,OAAO,0BAA0B,CAC7B,aACA,iBAEL,WAEH,IAAUC,EAi1PPC,OAAOC,MAAMC,OA70PZC,GADJH,OAAOC,MAAMG,QAAUJ,OAAOC,MAAMG,SAAW,GACjCH,MAAME,SAChBE,EAAOF,EAAQE,KACfC,EAAOH,EAAQG,KACfC,EAAQJ,EAAQI,MAChBC,EAAQP,MAAMO,MACdC,EAAUR,MAAMQ,QAChBC,EAAWT,MAAMS,SACjBC,EAAOD,EAASC,KAChBC,EAASF,EAASE,OAClBC,EAAoBH,EAASI,UAC7BC,EAAUL,EAASK,QACnBX,EAAUH,MAAMG,QAEhBY,EAAaf,MAAMe,WACnBC,EAAahB,MAAMgB,WACnBC,EAAqBjB,MAAMkB,OAE3BC,EAAM,MACNC,EAAmB,iBACnBC,EAAQ,OACRC,EAAS,SACTC,EAAS,SACTC,EAAS,SACTC,EAAkB,EAClBC,EAAQ,QACRC,EAAO,OACPC,EAAe,kBACfC,EAAiB,IACjBC,EAAoB,GACpBC,EAAgB,IAChBC,EACAC,EAAe,UACfC,EAAS,SACTC,EACAC,EAAS,SACTC,EAAO,OACPC,EAAYC,OAAOD,UACnBE,GAAaD,OAAOD,UACpBG,EAAO,OACPC,EAAa,YACbC,EAAa,YACbC,EAAa,YACbC,EAAS,SACTC,EAAU,UACVC,EAAQ,QACRC,EAAe,cACfC,EACAC,GAAS,SACTC,GAAM,MACNC,GAAW,WACXC,GACAC,EAAQ,OACRC,GAAQ,QACRC,EAAI,IACJC,EAAI,IACJC,GAEAC,GAAY,CACfxC,IAAKA,EACLC,iBAAkBA,EAClBC,MAAOA,EACPC,OAAQA,EACRC,OAAQA,EACRC,OAAQA,EACRC,gBAAiBA,EACjBC,MAAOA,EACPC,KAAMA,EACNC,aAAcA,EACdC,eAAgBA,EAChBC,kBAAmBA,EACnBC,cAAeA,EACfC,IAzCS,MA0CTC,aAAcA,EACdC,OAAQA,EACRC,iBAzCsB,IA0CtBC,OAAQA,EACRC,KAAMA,EACNC,UAAWA,EACXE,UAAWA,EACXC,KAAMA,EACNC,WAAYA,EACZC,WAAYA,EACZC,WAAYA,EACZC,OAAQA,EACRC,QAASA,EACTC,MAAOA,EACPC,aAAcA,EACdC,MAzCW,QA0CXC,OAAQA,GACRC,IAAKA,GACLC,SAAUA,GACVC,MAzCW,QA0CXC,MAAOA,EACPC,MAAOA,GACPC,EAAGA,EACHC,EAAGA,EACHC,uBAzC4B,GA4C7B,SAASE,GAAQC,GACb,OAAOC,MAAMF,QAAQC,GAGzB,SAASE,GAASC,EAASC,GACvB,IAAIC,EAAaN,GAAQK,GAAWA,EAAU,CAAEA,GAEhD,IAAK,IAAIE,EAAM,EAAGA,EAAMD,EAAWE,OAAQD,IAAO,CAC9C,IAAIE,EAAYH,EAAWC,GAC3B,GAAIH,EAAQK,UAAUC,QAAQD,MAAgB,EAC1CL,EAAQK,WAAa,IAAMA,GAKvC,IAAIE,GAAc,OAElB,SAASC,GAAYR,EAASK,GAC1B,GAAIL,GAAWA,EAAQK,UACnBL,EAAQK,UAAYL,EAAQK,UAAUI,QAAQJ,EAAW,IAAII,QAAQF,GAAa,KAI1F,SAASG,GAAiBC,GACtB,IAAIC,EAAS,GACb,GAAID,EAAKE,QAAQC,QAAU9E,MAAME,QAAQE,KAAK2E,QAAQJ,EAAKE,QAAQC,OAAOE,OACtE,GAAIL,EAAKE,QAAQC,OAAOE,MAAQ,IAAM,EAClCJ,EAAS,EAIjB,IAAK,IAAIK,EAAI,EAAGA,EAAIN,EAAKO,SAASd,OAAQa,IACtCN,EAAKO,SAASD,GAAGE,SAASC,MAAM,GAAGC,UAAUT,EAAQA,GAGzD,OAAOD,EAGX,SAASW,GAAUC,EAAQC,GAIvB,OAAQD,EAAOE,EAAID,EAAOE,EAAIH,EAAOG,EAAIF,EAAOC,EAAI,EAGxD,SAASE,GAAS9B,GACd,cAAcA,IAAU,WAAa+B,MAAM/B,GAG/C,SAASgC,GAAShC,GACd,cAAcA,IAAUX,GAG5B,SAAS4C,GAAoBjC,GACzB,OAAO8B,GAAS9B,IAAWgC,GAAShC,IAAUkC,SAASlC,GAG3D,SAASmC,GAASnC,GACd,cAAcA,IAAU,SAG5B,SAASoC,GAAWpC,GAChB,GAAI8B,GAAS9B,GACT,OAAOA,EAAQ,KAEnB,OAAOA,EAGX,IAAIqC,GAAoB,sCAExB,SAASC,GAAYC,GACjB,OAAOF,GAAkBG,KAAKD,GAGlC,SAASE,GAActC,EAASuC,GAC5B,IAAIC,EAAcX,GAASU,GAAU,CAAEA,GAAWA,EAElD,GAAI3C,GAAQ4C,GAAc,CACtB,IAAIC,EAAS,GACb,IAAIC,EAAQ3G,OAAO4G,iBAAiB3C,GAEpC,IAAK,IAAIG,EAAM,EAAGA,EAAMqC,EAAYpC,OAAQD,IAAO,CAC/C,IAAIiC,EAAQI,EAAYrC,GACxBsC,EAAOL,GAASD,GAAYC,GAASQ,WAAWF,EAAMN,IAAUM,EAAMN,GAG1E,OAAOK,OACJ,GAAIT,GAASO,GAChB,IAAK,IAAIM,KAAWN,EAChBvC,EAAQ0C,MAAMG,GAAWZ,GAAWM,EAAOM,IAKvD,SAASC,GAAWjD,EAAOkD,GACvB,GAAIA,SAAwB,EAAKA,EAAiB,EAElD,IAAIC,EAAU,CAAEC,IAAK,EAAGC,MAAO,EAAGC,OAAQ,EAAGC,KAAM,GAEnD,UAAU,IAAY,SAClBJ,EAAQ7D,IAAO6D,EAAQjE,GAASiE,EAAQ1F,GAAU0F,EAAQ3E,GAAQwB,MAC/D,CACHmD,EAAQ7D,IAAOU,EAAMV,KAAQ4D,EAC7BC,EAAQjE,GAASc,EAAMd,IAAUgE,EACjCC,EAAQ1F,GAAUuC,EAAMvC,IAAWyF,EACnCC,EAAQ3E,GAAQwB,EAAMxB,IAAS0E,EAGnC,OAAOC,EAGX,IAAIK,GAAU,CACVC,QAAS,SAASC,GACd,OAAOA,IAIXC,GAAkBjH,EAAMkH,OAAO,IAYnC,SAASC,GAAY7C,GACjB,GAAIA,SAAiB,EAAKA,EAAU,GAEpC,IAAI0C,EACJ,GAAI1C,EAAQ0C,SACR1C,EAAQ0C,SAAWA,EAAWC,GAAgBF,QAAQzC,EAAQ0C,eAC3D,GAAIvG,EAAW6D,EAAQ8C,SAC1BJ,EAAW1C,EAAQ8C,QAGvB,OAAOJ,EAGX,SAASK,GAAKC,EAAOC,GACjB,IAAI1D,EAASyD,EAAMzD,OACnB,IAAIqC,EAAS,GACb,IAAK,IAAItC,EAAM,EAAGA,EAAMC,EAAQD,IAC5B,GAAI2D,EAASD,EAAM1D,IACfsC,EAAQsB,KAAKF,EAAM1D,IAI3B,OAAOsC,EAGX,SAASuB,GAAWhE,EAASiE,GACzB,GAAIjE,EAAQK,UAAW,CACnB,IAAI6D,EAAQD,EAAWE,MAAM,KAC7B,IAAK,IAAIhE,EAAM,EAAGA,EAAM+D,EAAM9D,OAAQD,IAClC,GAAIH,EAAQK,UAAUC,QAAQ4D,EAAM/D,OAAW,EAC3C,OAAO,MAtCvBqD,GAAgBY,SAAW,SAASC,GAChChB,GAAUgB,GAGdb,GAAgBF,QAAU,SAASC,GAC/B,OAAOF,GAAQC,QAAQC,IAuC3B,IAAIe,GAAU,SAASA,IACnBC,KAAKC,KAAO,IAehB,SAASC,GAAQ5E,EAAOgE,GACpB,GAAIA,EACA,OAAOA,EAAMvD,QAAQT,MAAY,EAIzC,SAAS6E,GAAiBC,EAAOC,EAAKC,GAClC,OAAO7I,MAAME,QAAQE,KAAKgF,MAAMuD,GAASC,EAAMD,GAASE,EAAUpH,GAnBtE6G,GAAQQ,UAAUC,IAAM,SAASA,EAAKC,GAClC,OAAOT,KAAKC,KAAKD,KAAKU,KAAKD,KAG/BV,GAAQQ,UAAUI,IAAM,SAASA,EAAKF,EAAMnF,GACxC0E,KAAKC,KAAKD,KAAKU,KAAKD,IAASnF,GAGjCyE,GAAQQ,UAAUG,KAAO,SAASA,EAAMD,GACpC,OAAOA,aAAgBG,KAAOH,EAAKI,UAAYJ,GAanD,IAAIK,GAAU,UAEVC,GAAmB/I,EAAMkH,OAAO,CAChC8B,KAAM,SAASC,EAAUC,GACrBlB,KAAKiB,SAAWA,EAChBjB,KAAKmB,WAAa3I,EAAW,GAAIwH,KAAKmB,WAAYD,IAGtDE,QAAS,SAASX,EAAMY,GACpB,IAAIC,EAAMtB,KACV,IAAIiB,EAAWK,EAAIL,SACnB,IAAIE,EAAaG,EAAIH,WACrB,IAAII,EACJ,GAAIJ,EAAWV,GACXc,EAAqBvB,KAAKwB,aAAaL,EAAWV,GAAOY,QACtD,GAAIJ,EAASH,IAChBS,EAAqBvB,KAAKwB,aAAaV,GAASL,EAAMY,GAG1D,OAAOE,GAGXC,aAAc,SAASC,GACnB,IAAIJ,EAAO,GAAIK,EAAMC,UAAU9F,OAAS,EACxC,MAAQ6F,KAAQ,EAAIL,EAAMK,GAAQC,UAAWD,EAAM,GAEnD,OAAO1B,KAAKiB,SAASQ,GAAQG,MAAM5B,KAAKiB,SAAUI,IAGtDQ,iBAAkB,SAASlC,GACvB,IAAImC,EAAS9B,KAEb,GAAIA,KAAKiB,SAASY,iBACd,OAAO7B,KAAKiB,SAASY,iBAAiBlC,GAG1C,IAAK,IAAI/D,EAAM,EAAGA,EAAM+D,EAAM9D,OAAQD,IAClC,GAAIkG,EAAOX,WAAWxB,EAAM/D,IACxB,OAAO,QAMvB,SAASmG,GAAIzC,EAAOC,GAChB,IAAI1D,EAASyD,EAAMzD,OACnB,IAAIqC,EAAS,GACb,IAAK,IAAItC,EAAM,EAAGA,EAAMC,EAAQD,IAAO,CACnC,IAAIN,EAAQiE,EAASD,EAAM1D,IAC3B,GAAInE,MAAME,QAAQE,KAAK2E,QAAQlB,GAC3B4C,EAAOsB,KAAKlE,GAGpB,OAAO4C,EAGX,IAAI8D,GAAU/J,EAAQ+J,SAAW,GAEjC,SAASC,GAAgBC,GACrB,IAAIC,EAAQ,EAEZ,GAAID,EAAEE,WAAY,CACdD,GAASD,EAAEE,WAAa,IAExB,GAAIJ,GAAQK,OAKRF,EAAQA,GAAS,EAAIG,KAAKC,IAAI/K,OAAOgL,iBAAkB,YAExD,GAAIN,EAAEO,OACTN,EAAQD,EAAEO,OAAS,EAGvBN,EAAQA,EAAQ,EAAIG,KAAKI,KAAKP,GAASG,KAAKK,MAAMR,GAElD,OAAOA,EAGX,IAAIb,GAAM7J,MAAME,QAAQE,KACpB+K,GAAStB,GAAIsB,OACbC,GAAavB,GAAIuB,WACjBrG,EAAU8E,GAAI9E,QACdsG,GAAMxB,GAAIwB,IACVC,GAAgBzB,GAAIyB,cACpBC,GAAc1B,GAAI0B,YAClBC,GAAmB3B,GAAI2B,iBACvBC,GAAe5B,GAAI4B,aACnBC,GAAU7B,GAAI6B,QACdC,GAAO9B,GAAI8B,KACXC,EAAa/B,GAAI+B,WACjBC,GAAYhC,GAAIgC,UAChBC,GAAMjC,GAAIiC,IACV1G,EAAQyE,GAAIzE,MACZ2G,GAAelC,GAAIkC,aACnBC,GAAiBnC,GAAImC,eAErBC,GAAa1L,EAAMkH,OAAO,IAuD9B,SAASyE,GAAkBC,EAAMtH,GAC7B,IAAIuH,EAAQD,EAAKrD,UACjB,GAAIsD,EAAMvH,QACNuH,EAAMvH,QAAU9D,EAAW,GAAIqL,EAAMvH,QAASA,QAE9CuH,EAAMvH,QAAUA,EAIxB,SAASwH,GAAkBC,GACvB,IAAIC,EAAMjK,EACV,IAAIwI,EAAMtI,EAEV,IAAK,IAAI2B,EAAM,EAAGC,EAASkI,EAAIlI,OAAQD,EAAMC,EAAQD,IAAO,CACxD,IAAIN,EAAQyI,EAAInI,GAChB,GAAIN,IAAU,MAAQkC,SAASlC,GAAQ,CACnC0I,EAAM1B,KAAK0B,IAAIA,EAAK1I,GACpBiH,EAAMD,KAAKC,IAAIA,EAAKjH,IAI5B,MAAO,CACH0I,IAAKA,IAAQjK,EAAYkK,UAAYD,EACrCzB,IAAKA,IAAQtI,EAAYgK,UAAY1B,GAI7C,SAAS2B,GAAK5E,EAAO6E,GACjB,IAAK,IAAIzH,EAAI,EAAGA,EAAI4C,EAAMzD,OAAQa,IAAK,CACnC,IAAI0H,EAAO9E,EAAM5C,GACjB,GAAIyH,EAAUC,EAAM1H,EAAG4C,GACnB,OAAO8E,GAlFnBV,GAAWW,WAAa,SAAS/H,EAASgI,EAAOC,GAC7C,GAAIA,SAAe,EAAKA,EAAQ,CAAEC,MAAO,GAEzC,IAAIC,EAAY,EAEhB,IAAKnI,GAAWiI,EAAMC,MAAQC,IAAcC,SAASJ,MACjD,OAGJK,OAAOC,KAAKtI,GAASuI,QAAQ,SAASC,GAClC,IAAIxJ,EAAQgB,EAAQwI,GACpB,GAAIA,IAAQ,cAAgBA,EAAI,KAAO,MAAQxJ,EAC3C,OAGJ,GAAIwJ,IAAQ,OACRR,EAAM9E,KAAKlE,QACR,UAAWA,IAAU,SAAU,CAClCiJ,EAAMC,QACNd,GAAWW,WAAW/I,EAAOgJ,EAAOC,GACpCA,EAAMC,YAKlBd,GAAWqB,UAAY,SAAST,EAAO/E,GACnC,IAAIyF,EAAW,GAEf,GAAIV,EAAMzI,OAAS,GAAK6I,SAASJ,MAAO,CACpC,IACIU,EAAWV,EAAMvC,IAAI,SAASkD,GAC1B,OAAOP,SAASJ,MAAMY,KAAKD,KAEjC,MAAO/C,GAELzK,MAAM0N,aAAajD,GAGvBkD,QAAQC,IAAIL,GAAUM,KAAK/F,EAAUA,QAErCA,KAIRmE,GAAW6B,aAAe,SAASjJ,EAASiD,GACxC,IAAI+E,EAAQ,GACZZ,GAAWW,WAAW/H,EAASgI,GAE/BZ,GAAWqB,UAAUT,EAAO/E,IAuChC,IAAIiG,GAAStN,EAASsN,OAClBC,GAAe,iBAEnB,SAASC,GAAYC,GACjB,IAAIC,EAAQD,EAAaC,MAAMH,IAC/B,GAAIG,IAAU,MAAQA,EAAM/J,SAAW,EACnC,OAAO2J,GAAOK,OAGlB,IAAIC,EAAUF,EAAM,GAAGhG,MAAM,KAAKmC,IAAI,SAAU7E,GAAK,OAAOmB,WAAWnB,KACvE,OAAO,IAAK6I,SAASxF,UAAUyF,KAAKpE,MAAO4D,GAAQ,CAAE,MAAOS,OAAQH,KAGxE,SAASI,GAAgBzK,GACrB,IAAInD,EAAY8F,iBAAiB3C,GAASnD,UAE1C,GAAIA,IAAc,OACd,OAAOkN,GAAOK,OAGlB,OAAOH,GAAYpN,GAGvB,SAAS6N,GAAa1K,GAClB,IAAKA,EACD,OAAO+J,GAAOK,OAGlB,IAAIO,EAASF,GAAgBzK,GAC7B,IAAI4K,EAAS5K,EAAQ6K,cACrB,MAAOD,EAAQ,CACX,IAAIE,EAAeL,GAAgBG,GACnCD,EAASA,EAAOI,aAAaD,GAC7BF,EAASA,EAAOC,cAGpBF,EAAOK,EAAIL,EAAOM,EAAIN,EAAOlE,EAAIkE,EAAOO,EAAI,EAC5C,OAAOP,EAGX,SAASQ,GAAcC,GACnB,IAAIC,EAAS,IAAIrP,MAAMsP,MAAMF,GAAOC,SACpC,GAAIA,EACA,OAAO/L,EAGX,OAAOjC,EAGX,IAAIkO,GAAU,GAEVC,GAAYjP,EAAMkH,OAAO,CACzB8B,KAAM,SAASkG,GACX,IAAIpF,EAAS9B,KAEbA,KAAKmH,OAAS,GACdnH,KAAKoH,QAAUF,EAASA,EAAOG,MAAM,GAAK,GAE1C,IAAK,IAAI3K,EAAI,EAAGA,EAAIsD,KAAKoH,QAAQvL,OAAQa,IACrCoF,EAAOqF,OAAOrF,EAAOsF,QAAQ1K,IAAMA,GAI3CwK,OAAQ,WACJ,OAAOlH,KAAKoH,QAAQE,OAAO,SAAUlD,GAAQ,OAAOA,IAAS4C,MAGjEO,IAAK,SAASjM,GACV,OAAO0E,KAAKmH,OAAO7L,KAAW2I,WAGlCuD,IAAK,SAASlM,GACV,IAAK0E,KAAKuH,IAAIjM,GAAQ,CAClB0E,KAAKmH,OAAO7L,GAAS0E,KAAKoH,QAAQvL,OAClCmE,KAAKoH,QAAQ5H,KAAKlE,KAI1BmM,OAAQ,SAASnM,GACb,IAAIoM,EAAQ1H,KAAKmH,OAAO7L,GACxB,GAAIoM,IAAUzD,UAAW,CACrBjE,KAAKoH,QAAQM,GAASV,UACfhH,KAAKmH,OAAO7L,KAI3BqM,MAAO,WACH3H,KAAKmH,OAAS,GACdnH,KAAKoH,QAAU,MAIvB,GAAIzC,OAAOiD,iBACPjD,OAAOiD,iBAAiBX,GAAUY,GAAI,CAClCC,KAAM,CACFtH,IAAK,WACD,OAAOR,KAAKoH,QAAQvL,WAMpC,IAAIkM,GAAa/P,EAAMkH,OAAO,CAC1B8B,KAAM,SAASkG,GACXlH,KAAKgI,KAAO,IAAIC,IAAIf,IAGxBA,OAAQ,WACJ,OAAO3L,MAAM2M,KAAKlI,KAAKgI,OAG3BT,IAAK,SAASjM,GACV,OAAO0E,KAAKgI,KAAKT,IAAIjM,IAGzBkM,IAAK,SAASlM,GACV0E,KAAKgI,KAAKR,IAAIlM,IAGlBmM,OAAQ,SAASnM,GACb0E,KAAKgI,KAAKP,OAAOnM,IAGrBqM,MAAO,WACH3H,KAAKgI,KAAKL,WAIlB,GAAIhD,OAAOiD,iBACPjD,OAAOiD,iBAAiBG,GAAWF,GAAI,CACnCC,KAAM,CACFtH,IAAK,WACD,OAAOR,KAAKgI,KAAKF,SAOjC,IAAIK,GAAc,WACd,IAAIC,EAAY,MAEhB,UAAWH,MAAQ,WAAY,CAC3B,IAAItH,EAAM,IAAIsH,IAAI,CAAC,IACnBG,EAAYzH,EAAI4G,IAAI,GAGxB,OAAOa,GAGX,SAASC,GAAcnB,GACnB,GAAIiB,KACA,OAAO,IAAIJ,GAAWb,GAG1B,OAAO,IAAID,GAAUC,GAGzB,SAASoB,GAAoBC,GACzB,MAAMA,EAGV,IAAI3D,GAAO,CACP4D,OAAQ,GACRC,OAAQ,GACRC,UAAW,EACXC,IAAK,EACLC,MAAO,GACPC,IAAK,GACL/O,KAAM,GACNgP,GAAI,GACJtO,MAAO,GACPuO,KAAM,GACNtP,IAAK,GACLuP,KAAM,GACNC,SAAU,GACVC,OAAQ,GACRC,SAAU,GACVC,GAAI,IACJC,IAAK,IACLC,IAAK,IACLC,YAAa,IACbC,aAAc,IACdC,WAAY,KAGhB,SAASC,GAAc1F,EAAKzB,GACxB,IAAIoH,EAAO9M,EAAM0F,EAAMyB,EAAKzK,EAAoB,GAEhD,GAAIoQ,IAAS,EAAG,CACZ,GAAIpH,IAAQ,EACR,MAAO,GAGXoH,EAAOrH,KAAKsH,IAAIrH,GAGpB,IAAIsH,EAAQvH,KAAKwH,IAAI,GAAIxH,KAAKK,MAAML,KAAKyH,IAAIJ,GAAQrH,KAAKyH,IAAI,MAC9D,IAAIC,EAAgBnN,EAAO8M,EAAOE,EAAQtQ,GAC1C,IAAI0Q,EAAkB,EAEtB,GAAID,EAAgB,SAChBC,EAAkB,QACf,GAAID,EAAgB,SACvBC,EAAkB,QACf,GAAID,EAAgB,SACvBC,EAAkB,OAElBA,EAAkB,EAGtB,OAAOpN,EAAMgN,EAAQI,EAAiB1Q,GAG1C,IAAI2Q,GAAQlS,EAAMkH,OAAO,CACrB8B,KAAM,SAAS9D,EAAGC,GAEd6C,KAAK9C,EAAIA,GAAK,EACd8C,KAAK7C,EAAIA,GAAK,GAGlBgN,MAAO,WACH,OAAO,IAAID,GAAMlK,KAAK9C,EAAG8C,KAAK7C,IAGlCiN,OAAQ,SAASC,GACb,OAAOA,GAASrK,KAAK9C,IAAMmN,EAAMnN,GAAK8C,KAAK7C,IAAMkN,EAAMlN,GAG3DmN,OAAQ,SAASC,EAAQC,GACrB,IAAIC,EAAQlH,GAAIiH,GAChB,IAAIE,EAAOpI,KAAKqI,IAAIF,GACpB,IAAIG,EAAOtI,KAAKuI,IAAIJ,GACpB,IAAIK,EAAKP,EAAOrN,EAChB,IAAI6N,EAAKR,EAAOpN,EAChB,IAAImE,EAAMtB,KACV,IAAI9C,EAAIoE,EAAIpE,EACZ,IAAIC,EAAImE,EAAInE,EAEZ6C,KAAK9C,EAAIL,EACLiO,GAAM5N,EAAI4N,GAAMJ,GAAQvN,EAAI4N,GAAMH,EAClC1R,GAGJ8G,KAAK7C,EAAIN,EACLkO,GAAM5N,EAAI4N,GAAML,GAAQxN,EAAI4N,GAAMF,EAClC1R,GAGJ,OAAO8G,MAGXgL,SAAU,SAASC,GAEfjL,KAAK9C,GAAK+N,EACVjL,KAAK7C,GAAK8N,EAEV,OAAOjL,MAGXkL,WAAY,SAASb,GACjB,IAAIc,EAAKnL,KAAK9C,EAAImN,EAAMnN,EACxB,IAAIkO,EAAKpL,KAAK7C,EAAIkN,EAAMlN,EAExB,OAAOmF,KAAK+I,KAAKF,EAAKA,EAAKC,EAAKA,MAapCE,GATJpB,GAAMqB,SAAW,SAAShB,EAAQiB,EAAOC,GACrC,IAAIC,EAAUnI,GAAIiI,GAElB,OAAO,IAAItB,GACPK,EAAOrN,EAAIuO,EAASnJ,KAAKqI,IAAIe,GAC7BnB,EAAOpN,EAAIsO,EAASnJ,KAAKuI,IAAIa,KAI3B1T,EAAMkH,OAAO,CACnB8B,KAAM,SAAS2K,EAAIC,EAAIC,EAAIC,GAEvB9L,KAAK2L,GAAKA,GAAM,EAChB3L,KAAK4L,GAAKA,GAAM,EAChB5L,KAAK6L,GAAKA,GAAM,EAChB7L,KAAK8L,GAAKA,GAAM,GAGpB1B,OAAQ,SAAS2B,GACb,OAAO/L,KAAK2L,KAAOI,EAAIJ,IAAM3L,KAAK6L,KAAOE,EAAIF,IACzC7L,KAAK4L,KAAOG,EAAIH,IAAM5L,KAAK8L,KAAOC,EAAID,IAG9CrP,MAAO,WACH,OAAOuD,KAAK6L,GAAK7L,KAAK2L,IAG1BK,OAAQ,WACJ,OAAOhM,KAAK8L,GAAK9L,KAAK4L,IAG1B9O,UAAW,SAASqO,EAAIC,GACpBpL,KAAK2L,IAAMR,EACXnL,KAAK6L,IAAMV,EACXnL,KAAK4L,IAAMR,EACXpL,KAAK8L,IAAMV,EAEX,OAAOpL,MAGXiM,KAAM,SAAS/O,EAAGC,GACd,IAAI6O,EAAShM,KAAKgM,SAClB,IAAIvP,EAAQuD,KAAKvD,QAEjB,GAAID,EAAQU,GAAI,CACZ8C,KAAK2L,GAAKzO,EACV8C,KAAK6L,GAAK7L,KAAK2L,GAAKlP,EAGxB,GAAID,EAAQW,GAAI,CACZ6C,KAAK4L,GAAKzO,EACV6C,KAAK8L,GAAK9L,KAAK4L,GAAKI,EAGxB,OAAOhM,MAGXkM,KAAM,SAASC,GACXnM,KAAK2L,GAAKrJ,KAAK0B,IAAIhE,KAAK2L,GAAIQ,EAAUR,IACtC3L,KAAK4L,GAAKtJ,KAAK0B,IAAIhE,KAAK4L,GAAIO,EAAUP,IACtC5L,KAAK6L,GAAKvJ,KAAKC,IAAIvC,KAAK6L,GAAIM,EAAUN,IACtC7L,KAAK8L,GAAKxJ,KAAKC,IAAIvC,KAAK8L,GAAIK,EAAUL,IAEtC,OAAO9L,MAGXoM,UAAW,SAAS/B,GAChB,IAAIgC,EAAahR,GAAQgP,GACzB,IAAInN,EAAImP,EAAahC,EAAM,GAAKA,EAAMnN,EACtC,IAAIC,EAAIkP,EAAahC,EAAM,GAAKA,EAAMlN,EACtC6C,KAAKkM,KAAK,IAAIZ,EAAIpO,EAAGC,EAAGD,EAAGC,IAE3B,OAAO6C,MAGXsM,OAAQ,SAASH,EAAWI,GAExB,GAAIA,IAAStR,IAAMsR,EAAM,CACrBvM,KAAK2L,GAAKQ,EAAUR,GACpB3L,KAAK6L,GAAKM,EAAUN,GAGxB,GAAIU,IAASrR,IAAMqR,EAAM,CACrBvM,KAAK4L,GAAKO,EAAUP,GACpB5L,KAAK8L,GAAKK,EAAUL,GAGxB,OAAO9L,MAGXwM,QAAS,SAASL,EAAWvP,GACzB,IAAIoP,EAAShM,KAAKgM,SAClB,IAAIvP,EAAQuD,KAAKvD,QACjB,IAAI8P,EAAO3P,IAAWhC,IAAOgC,IAAW7D,EAASmC,EAAID,EACrD,IAAIoB,EAASkQ,IAASrR,EAAI8Q,EAASvP,EAEnC,GAAIG,IAAW5D,EAAQ,CACnB,IAAIyT,EAAeN,EAAU5B,SAC7B,IAAIA,EAASvK,KAAKuK,SAElBvK,KAAK2L,IAAMc,EAAavP,EAAIqN,EAAOrN,EACnC8C,KAAK4L,IAAMa,EAAatP,EAAIoN,EAAOpN,OAChC,GAAIP,IAAWhC,IAAOgC,IAAW9C,EACpCkG,KAAKuM,EAAO,GAAKJ,EAAUI,EAAO,GAAKlQ,OAEvC2D,KAAKuM,EAAO,GAAKJ,EAAUI,EAAO,GAGtCvM,KAAK6L,GAAK7L,KAAK2L,GAAKlP,EACpBuD,KAAK8L,GAAK9L,KAAK4L,GAAKI,EAEpB,OAAOhM,MAGX0M,OAAQ,SAASC,EAAIC,GAEjB5M,KAAK6L,IAAMc,EACX3M,KAAK8L,IAAMc,EAEX,OAAO5M,MAGX6M,OAAQ,SAASF,EAAIC,GACjB5M,KAAK0M,QAAQC,GAAKC,GAClB,OAAO5M,MAGX8M,IAAK,SAASC,GACV,IAAItO,EAAUF,GAAWwO,GAEzB/M,KAAK2L,IAAMlN,EAAQI,KACnBmB,KAAK6L,IAAMpN,EAAQE,MACnBqB,KAAK4L,IAAMnN,EAAQC,IACnBsB,KAAK8L,IAAMrN,EAAQG,OAEnB,OAAOoB,MAGXgN,MAAO,SAASD,GACZ,IAAItO,EAAUF,GAAWwO,GAEzBtO,EAAQI,MAAQJ,EAAQI,KACxBJ,EAAQC,KAAOD,EAAQC,IACvBD,EAAQE,OAASF,EAAQE,MACzBF,EAAQG,QAAUH,EAAQG,OAE1B,OAAOoB,KAAK8M,IAAIrO,IAGpB0L,MAAO,WACH,OAAO,IAAImB,EAAItL,KAAK2L,GAAI3L,KAAK4L,GAAI5L,KAAK6L,GAAI7L,KAAK8L,KAGnDvB,OAAQ,WACJ,OAAO,IAAIL,GACPlK,KAAK2L,GAAK3L,KAAKvD,QAAU,EACzBuD,KAAK4L,GAAK5L,KAAKgM,SAAW,IAIlCiB,cAAe,SAAS5C,GAEpB,OAAOA,EAAMnN,GAAK8C,KAAK2L,IAAMtB,EAAMnN,GAAK8C,KAAK6L,IACtCxB,EAAMlN,GAAK6C,KAAK4L,IAAMvB,EAAMlN,GAAK6C,KAAK8L,IAGjDoB,OAAQ,WACJ,MAAO,CACH,IAAIhD,GAAMlK,KAAK2L,GAAI3L,KAAK4L,IACxB,IAAI1B,GAAMlK,KAAK6L,GAAI7L,KAAK4L,IACxB,IAAI1B,GAAMlK,KAAK6L,GAAI7L,KAAK8L,IACxB,IAAI5B,GAAMlK,KAAK2L,GAAI3L,KAAK8L,MAIhCqB,QAAS,WACL,MAAO,CAAEnN,KAAK2L,GAAI3L,KAAK4L,GAAI5L,KAAK6L,GAAI7L,KAAK8L,IAAKsB,KAAK,MAGvDC,SAAU,SAAStB,GACf,QAASA,EAAID,GAAK9L,KAAK4L,IAAM5L,KAAK8L,GAAKC,EAAIH,IAAMG,EAAIF,GAAK7L,KAAK2L,IAAM3L,KAAK6L,GAAKE,EAAIJ,KAGvFrB,OAAQ,SAASgD,GACb,IAAI7Q,EAAQuD,KAAKvD,QACjB,IAAIuP,EAAShM,KAAKgM,SAClB,IAAI1K,EAAMtB,KAAKuK,SACf,IAAIO,EAAKxJ,EAAIpE,EACb,IAAI6N,EAAKzJ,EAAInE,EAEb,IAAIoQ,EAAKC,GAAY,EAAG,EAAG1C,EAAIC,EAAIuC,GACnC,IAAIG,EAAKD,GAAY/Q,EAAO,EAAGqO,EAAIC,EAAIuC,GACvC,IAAII,EAAKF,GAAY/Q,EAAOuP,EAAQlB,EAAIC,EAAIuC,GAC5C,IAAIK,EAAKH,GAAY,EAAGxB,EAAQlB,EAAIC,EAAIuC,GAExC7Q,EAAQ6F,KAAKC,IAAIgL,EAAGrQ,EAAGuQ,EAAGvQ,EAAGwQ,EAAGxQ,EAAGyQ,EAAGzQ,GAAKoF,KAAK0B,IAAIuJ,EAAGrQ,EAAGuQ,EAAGvQ,EAAGwQ,EAAGxQ,EAAGyQ,EAAGzQ,GACzE8O,EAAS1J,KAAKC,IAAIgL,EAAGpQ,EAAGsQ,EAAGtQ,EAAGuQ,EAAGvQ,EAAGwQ,EAAGxQ,GAAKmF,KAAK0B,IAAIuJ,EAAGpQ,EAAGsQ,EAAGtQ,EAAGuQ,EAAGvQ,EAAGwQ,EAAGxQ,GAE1E6C,KAAK6L,GAAK7L,KAAK2L,GAAKlP,EACpBuD,KAAK8L,GAAK9L,KAAK4L,GAAKI,EAEpB,OAAOhM,MAGX4N,OAAQ,WACJ,OAAO,IAAIzV,EAAK,CAAE6H,KAAK2L,GAAI3L,KAAK4L,IAAM,CAAE5L,KAAKvD,QAASuD,KAAKgM,YAG/D6B,QAAS,WACL,OAAO7N,KAAKvD,UAAY,GAAKuD,KAAKgM,WAAa,GAGnD8B,MAAO,SAAS3B,EAAWI,EAAMwB,GAC7B,IAAIC,EAAKzB,EAAO,EAChB,IAAI0B,EAAK1B,EAAO,EAChB,IAAI2B,EAAW3B,IAAStR,EAAID,GAAQrB,EACpC,IAAImO,EAAO9H,KAAKkO,KAEhB,GAAIhO,GAAQ6N,EAAW,CAAEjU,EAAMc,KAAQ,CACnCoF,KAAKgO,GAAM7B,EAAU6B,GACrBhO,KAAKiO,GAAMjO,KAAKgO,GAAMlG,OACnB,GAAI5H,GAAQ6N,EAAW,CAAEvT,EAAOzB,IAAW,CAC9CiH,KAAKiO,GAAM9B,EAAU8B,GACrBjO,KAAKgO,GAAMhO,KAAKiO,GAAMnG,OACnB,GAAIiG,IAAc/U,EAAQ,CAC7BgH,KAAKgO,GAAM7B,EAAU6B,IAAO7B,EAAU+B,KAAcpG,GAAQ,EAC5D9H,KAAKiO,GAAMjO,KAAKgO,GAAMlG,OAKlC,SAAS0F,GAAYtQ,EAAGC,EAAG2N,EAAIC,EAAIS,GAC/B,IAAIf,EAAQlH,GAAIiI,GAEhB,OAAO,IAAItB,GACPY,GAAM5N,EAAI4N,GAAMxI,KAAKqI,IAAIF,IAAUtN,EAAI4N,GAAMzI,KAAKuI,IAAIJ,GACtDM,GAAM7N,EAAI4N,GAAMxI,KAAKuI,IAAIJ,IAAUtN,EAAI4N,GAAMzI,KAAKqI,IAAIF,IAI9D,IAAI0D,GAAOnW,EAAMkH,OAAO,CACpB8B,KAAM,SAASuJ,EAAQ6D,EAAa3C,EAAQ4C,EAAY7C,GAEpDxL,KAAKuK,OAASA,EACdvK,KAAKoO,YAAcA,EACnBpO,KAAKyL,OAASA,EACdzL,KAAKqO,WAAaA,EAClBrO,KAAKwL,MAAQA,GAGjBrB,MAAO,WACH,OAAO,IAAIgE,GAAKnO,KAAKuK,OAAQvK,KAAKoO,YAAapO,KAAKyL,OAAQzL,KAAKqO,WAAYrO,KAAKwL,QAGtF8C,OAAQ,WACJ,OAAOtO,KAAKqO,WAAarO,KAAKwL,MAAQ,GAG1C+C,UAAW,SAASC,EAAWJ,GAC3B,GAAIA,EACApO,KAAKoO,YAAcI,OAEnBxO,KAAKyL,OAAS+C,EAGlB,OAAOxO,MAGXqK,MAAO,SAASmB,EAAO4C,GACnB,IAAIK,EAAclL,GAAIiI,GACtB,IAAIkD,EAAKpM,KAAKqI,IAAI8D,GAClB,IAAIE,EAAKrM,KAAKuI,IAAI4D,GAClB,IAAIhD,EAAS2C,EAAcpO,KAAKoO,YAAcpO,KAAKyL,OACnD,IAAIvO,EAAIL,EAAMmD,KAAKuK,OAAOrN,EAAKwR,EAAKjD,EAASvS,GAC7C,IAAIiE,EAAIN,EAAMmD,KAAKuK,OAAOpN,EAAKwR,EAAKlD,EAASvS,GAE7C,OAAO,IAAIgR,GAAMhN,EAAGC,IAGxByR,YAAa,SAASC,EAAUpS,EAAOuP,GACnC,IAAI8C,EAAS9O,KAAKmK,QAAQ0C,OAAOgC,GACjC,IAAIE,EAAWD,EAAOR,SACtB,IAAIU,EAAWF,EAAOzE,MAAM0E,GAC5B,IAAIE,EAAKxS,EAAQ,EACjB,IAAIyS,EAAKlD,EAAS,EAClB,IAAImD,EAAK7M,KAAKuI,IAAItH,GAAIwL,IACtB,IAAIK,EAAK9M,KAAKqI,IAAIpH,GAAIwL,IACtB,IAAI7R,EAAI8R,EAAS9R,EAAI+R,EACrB,IAAI9R,EAAI6R,EAAS7R,EAAI+R,EAErB,GAAI5M,KAAKsH,IAAIuF,GAAM,GACfjS,GAAK+R,GAAMG,EAAK9M,KAAKsH,IAAIwF,GAG7B,GAAI9M,KAAKsH,IAAIwF,GAAM,GACfjS,GAAK+R,GAAMC,EAAK7M,KAAKsH,IAAIuF,GAG7B,OAAO,IAAI7D,EAAIpO,EAAGC,EAAGD,EAAIT,EAAOU,EAAI6O,IAGxCiB,cAAe,SAASoC,GACpB,IAAI9E,EAASvK,KAAKuK,OAClB,IAAI6D,EAAcpO,KAAKoO,YACvB,IAAI3C,EAASzL,KAAKyL,OAClB,IAAI4C,EAAarO,KAAKqO,WACtB,IAAIiB,EAAWtP,KAAKqO,WAAarO,KAAKwL,MACtC,IAAIL,EAAKkE,EAAEnS,EAAIqN,EAAOrN,EACtB,IAAIkO,EAAKiE,EAAElS,EAAIoN,EAAOpN,EACtB,IAAIoS,EAAS,IAAIrF,GAAMiB,EAAIC,GAC3B,IAAIoE,EAAaxP,KAAKqK,MAAMgE,GAC5B,IAAIoB,EAAc,IAAIvF,GAAMsF,EAAWtS,EAAIqN,EAAOrN,EAAGsS,EAAWrS,EAAIoN,EAAOpN,GAC3E,IAAIuS,EAAW1P,KAAKqK,MAAMiF,GAC1B,IAAIK,EAAY,IAAIzF,GAAMwF,EAASxS,EAAIqN,EAAOrN,EAAGwS,EAASvS,EAAIoN,EAAOpN,GACrE,IAAIyS,EAAO/S,EAAMsO,EAAKA,EAAKC,EAAKA,EAAIlS,GAEpC,OAAQuW,EAAYrF,OAAOmF,IAAWxS,GAAU0S,EAAaF,MACrDxS,GAAU4S,EAAWJ,IACtBK,GAAQxB,EAAcA,GAAewB,GAAQnE,EAASA,GAGjEoE,QAAS,WACL,IAAI/N,EAAS9B,KAEb,IAAI+L,EAAM,IAAIT,EAAIvR,EAAWA,EAAWE,EAAWA,GACnD,IAAIoU,EAAaxR,EAAMmD,KAAKqO,WAAa,KACzC,IAAIiB,EAAWzS,GAAOwR,EAAarO,KAAKwL,OAAS,KACjD,IAAI4C,EAAcpO,KAAKoO,YACvB,IAAI0B,EAAY,CAAE,EAAG,GAAI,IAAK,IAAKzB,EAAYiB,GAAWS,KAAKC,IAC/D,IAAIC,EAAkBH,EAAU/T,QAAQsS,GACxC,IAAI6B,EAAgBJ,EAAU/T,QAAQuT,GACtC,IAAIa,EAEJ,GAAI9B,IAAeiB,EACfa,EAASL,OAET,GAAIG,EAAkBC,EAClBC,EAASL,EAAUzI,MAAM4I,EAAiBC,EAAgB,QAE1DC,EAAS,GAAGlK,OACR6J,EAAUzI,MAAM,EAAG6I,EAAgB,GACnCJ,EAAUzI,MAAM4I,EAAiBH,EAAUjU,SAKvD,IAAK,IAAIa,EAAI,EAAGA,EAAIyT,EAAOtU,OAAQa,IAAK,CACpC,IAAI2N,EAAQvI,EAAOuI,MAAM8F,EAAOzT,IAChCqP,EAAIK,UAAU/B,GACd0B,EAAIK,UAAU/B,EAAO+D,GAGzB,IAAKA,EACDrC,EAAIK,UAAUpM,KAAKuK,QAGvB,OAAOwB,GAGXc,OAAQ,SAASvR,GACb0E,KAAKyL,QAAUnQ,EACf,OAAO0E,QAIf,SAASgQ,GAAgB/E,EAAGxE,GACxB,OAAOwE,EAAIxE,EAGf,IAAI2J,GAASjC,GAAKjP,OAAO,CACrB8B,KAAM,SAASuJ,EAAQkB,EAAQ4C,EAAY7C,GACvC2C,GAAKtG,GAAG7G,KAAKqP,KAAKrQ,KAAMuK,EAAQ,EAAGkB,EAAQ4C,EAAY7C,IAG3DqB,OAAQ,SAASvR,GACb,OAAO6S,GAAKtG,GAAGgF,OAAOwD,KAAKrQ,KAAM1E,IAGrC6O,MAAO,WACH,OAAO,IAAIiG,GAAOpQ,KAAKuK,OAAQvK,KAAKyL,OAAQzL,KAAKqO,WAAYrO,KAAKwL,QAGtE+C,UAAW,SAASC,GAChBxO,KAAKyL,OAAS+C,EAEd,OAAOxO,QAIXsQ,GAAkB,KAElBC,GAAevY,EAAMkH,OAAO,CAC5BsR,WAAY,SAAS1B,EAAQxS,GACzB,IAAI+R,EAAaS,EAAOT,WAAa,IACrC,IAAIiB,EAAWR,EAAOtD,MAAQ6C,EAG9B,GAAIS,EAAOtD,MAAQ,GAAK6C,IAAeiB,EACnCA,GAAYgB,GAGhB,IAAI/F,EAAS,IAAIrS,EAASgS,MAAM4E,EAAOvE,OAAOrN,EAAG4R,EAAOvE,OAAOpN,GAC/D,IAAIsO,EAASnJ,KAAKC,IAAIuM,EAAOrD,OAAQ,GACrC,IAAI2C,EAAc9L,KAAKC,IAAIuM,EAAOV,YAAa,GAC/C,IAAIqC,EAAM,IAAIvY,EAASwY,IAAInG,EAAQ,CAC/B8D,WAAYA,EACZiB,SAAUA,EACVqB,QAASlF,EACTmF,QAASnF,IAEb,IAAIrP,EAAOtE,EAAK+Y,QAAQJ,EAAKnU,GAASwU,QAEtC,GAAI1C,EAAa,CACbqC,EAAIE,QAAUF,EAAIG,QAAUxC,EAC5B,IAAI2C,EAAWN,EAAIO,QAAQ1B,GAC3BlT,EAAK6U,OAAOF,EAAS7T,EAAG6T,EAAS5T,GACjCf,EAAKqU,IAAInB,EAAUjB,EAAYD,EAAaA,EAAa,WAEzDhS,EAAK6U,OAAO1G,EAAOrN,EAAGqN,EAAOpN,GAGjC,OAAOf,KAMX8U,IAFJX,GAAazR,QAAU,IAAIyR,GAERvY,EAAMkH,OAAO,CAC5B8B,KAAM,SAAS1E,GAEX0D,KAAKmR,SAAW,GAEhBnR,KAAK1D,QAAU9D,EAAW,GAAIwH,KAAK1D,QAAS0D,KAAKoR,gBAAgB9U,KAGrE8U,gBAAiB,SAAS9U,GACtB,OAAOA,GAGX+U,OAAQ,SAASlF,GACb,IAAIgF,EAAWnR,KAAKmR,SACpB,IAAIpF,EAEJ,IAAK,IAAIrP,EAAI,EAAGA,EAAIyU,EAAStV,OAAQa,IAAK,CACtC,IAAI4U,EAAeH,EAASzU,GAC5B4U,EAAaD,OAAOlF,GAEpBJ,EAAMA,EAAMA,EAAIG,KAAKoF,EAAavF,KAAOuF,EAAavF,IAAI5B,QAG9DnK,KAAK+L,IAAMA,GAAOI,GAGtBoF,QAAS,WACL,IAAIJ,EAAWnR,KAAKmR,SAEpB,GAAInR,KAAKwR,UACLxR,KAAKwR,UAAUD,UAGnB,IAAK,IAAI7U,EAAI,EAAGA,EAAIyU,EAAStV,OAAQa,IACjCyU,EAASzU,GAAG6U,WAIpBE,QAAS,WACL,IAAIpL,EAASrG,KAAKqG,OAElB,OAAOA,EAASA,EAAOoL,UAAY,MAGvCC,UAAW,WACP,IAAIC,EAAU3R,KAAK4R,aACnB,GAAID,EACA,OAAOA,EAAQE,QAIvBD,WAAY,WACR,IAAInW,EAAUuE,KACd,MAAOvE,EAAS,CACZ,GAAIA,EAAQqW,aACR,OAAOrW,EAAQqW,aAEnBrW,EAAUA,EAAQ4K,SAI1B0L,kBAAmB,SAAS5G,EAAIC,GAC5B,IAAI+F,EAAWnR,KAAKmR,SACpB,IAAIa,EAAgBb,EAAStV,OAE7B,IAAK,IAAIa,EAAI,EAAGA,EAAIsV,EAAetV,IAC/ByU,EAASzU,GAAGqP,IAAIjP,UAAUqO,EAAIC,IAItCxI,OAAQ,WACJ,IAAIqP,EAActQ,UAClB,IAAIG,EAAS9B,KAEb,IAAK,IAAItD,EAAI,EAAGA,EAAIiF,UAAU9F,OAAQa,IAAK,CACvC,IAAI0H,EAAO6N,EAAYvV,GACvBoF,EAAOqP,SAAS3R,KAAK4E,GACrBA,EAAKiC,OAASvE,IAItBoQ,aAAc,WACV,GAAIlS,KAAK1D,QAAQ6V,UAAY,MACzB,OAGJnS,KAAKoS,eAELpS,KAAKqS,YAELrS,KAAKsS,iBAELtS,KAAKuS,kBACLvS,KAAKwS,kBAGTH,UAAW,WACP,GAAIrS,KAAKyS,OAAQ,CACbzS,KAAKyS,OAAOC,aAAe1S,KAE3B,GAAIA,KAAKqG,OACLrG,KAAKqG,OAAOsM,aAAa3S,KAAKyS,UAK1CH,eAAgB,WACZ,IAAInB,EAAWnR,KAAKmR,SACpB,IAAItV,EAASsV,EAAStV,OACtB,IAAK,IAAIa,EAAI,EAAGA,EAAIb,EAAQa,IACxByU,EAASzU,GAAGwV,gBAIpBE,aAAc,WACVpS,KAAKyS,OAAS,IAAI1a,EAAM,CACpB6a,OAAQ5S,KAAK1D,QAAQsW,OACrBT,QAAS1O,GAAezD,KAAK1D,QAAQ6V,QAAS,SAItDI,gBAAiB,WACb,GAAIvS,KAAKyS,QAAUzS,KAAK1D,QAAQkV,UAC5BxR,KAAKwR,UAAY7Z,EAAQkb,UAAUC,OAC/B9S,KAAKyS,OAAQzS,KAAK1D,QAAQkV,YAKtCmB,aAAc,SAASI,GACnB,IAAKA,EAAYL,aACbK,EAAYL,aAAe1S,KAG/B,GAAI+S,EAAYzW,QAAQ0W,OACpBhT,KAAKiT,WAAWR,OAAO7P,OAAOmQ,QAC3B,GAAIvW,EAAQuW,EAAYzW,QAAQsW,QACnC5S,KAAKkT,YAAYC,YAAYJ,QAC1B,GAAI/S,KAAKoT,YACZpT,KAAKmT,YAAYJ,QACd,GAAI/S,KAAKyS,OACZzS,KAAKyS,OAAO7P,OAAOmQ,QAInB/S,KAAKqG,OAAOsM,aAAaI,IAIjCE,SAAU,WACN,GAAIjT,KAAKqG,OACL,OAAOrG,KAAKqG,OAAO4M,WAGvB,OAAOjT,MAGXkT,UAAW,WACP,GAAIlT,KAAKqG,OACL,OAAOrG,KAAKqG,OAAO6M,YAGvB,OAAOlT,MAGXmT,YAAa,SAASJ,GAClB,IAAIH,EAASG,EAAYzW,QAAQsW,QAAU,EAC3C,IAAIS,EAAUrT,KAAKyS,OAAOtB,SAC1B,IAAItV,EAASwX,EAAQxX,OACrB,IAAIyX,EAEJ,IAAKA,EAAM,EAAGA,EAAMzX,EAAQyX,IAAO,CAC/B,IAAIC,EAAUF,EAAQC,GACtB,IAAIE,EAAO/P,GAAe8P,EAAQjX,QAAQsW,OAAQ,GAClD,GAAIY,EAAOZ,EACP,MAIR5S,KAAKyS,OAAOgB,OAAOH,EAAKP,IAG5BW,SAAU,SAASnU,GACf,IAAI4R,EAAWnR,KAAKmR,SACpB,IAAItV,EAASsV,EAAStV,OAEtB,IAAK,IAAIa,EAAI,EAAGA,EAAIb,EAAQa,IAAK,CAC7B,IAAIiX,EAAQxC,EAASzU,GAErB6C,EAASoU,GACT,GAAIA,EAAMD,SACNC,EAAMD,SAASnU,KAK3BqU,QAAS,SAAShO,GACd,IAAInK,EAAUuE,KACd,IAAI6T,EAAU,MAEd,MAAOpY,IAAYoY,EAAS,CACxBA,EAAUjO,EAAMnK,GAEhB,IAAKoY,EACDpY,EAAUA,EAAQ4K,OAI1B,GAAIwN,EACA,OAAOpY,GAIf+W,eAAgB,aAEhBsB,aAAc,WACV,IAAIxX,GAAW0D,KAAK1D,SAAW,IAAIyX,UACnC,SAAU/T,KAAKgU,iBAAoB1X,GAAWA,EAAQ6V,UAAY,QAGtE8B,gBAAiB,SAASC,EAAMC,GAC5B,IAAIrS,EAAS9B,KAEb,IAAI1D,GAAW0D,KAAK1D,SAAW,IAAIyX,WAAa,GAChD,IAAIK,EAAe9X,EAAQmW,OAC3B,IAAIsB,EAAY/T,KAAKqU,WAErB,IAAKN,EAAW,CACZ,IAAIO,EAAmB,CACnBC,KAAM,CACF1N,MAAO9L,EACPoZ,QAASA,GAAW,IAExB5X,OAAQ,CACJsK,MAAO9L,EACP0B,MAAO,EACP0X,QAASA,GAAW,KAI5B,GAAIC,EAAc,CACdL,EAAY/T,KAAKqU,WAAaD,EAC1B7c,EAAE2H,OAAOc,KAAKwU,sBAAuB,CACjCpC,aAAc,WAAc,OAAOtQ,EAAOkS,gBAAgBM,IAC1DzC,OAAQ7R,KAAK0R,YACb+C,OAAQzU,KAAKyU,OACbC,SAAU1U,KAAK0U,SACfC,SAAU3U,KAAK2U,SACfrZ,MAAO0E,KAAK1E,MACZsZ,WAAY5U,KAAK4U,WACjBC,aAAc7U,KAAK6U,aACnBC,MAAO9U,KAAK8U,SAIpB,IAAKf,EACD,YAGJA,EAAY/T,KAAKqU,WAAarU,KAAKgU,gBAAgBM,GAGvD,IAAK9X,EAAQuX,EAAUzX,QAAQsW,QAC3BmB,EAAUzX,QAAQsW,OAASnP,GAAenH,EAAQsW,OAAQ5S,KAAK1D,QAAQsW,QAG3E5S,KAAK2S,aAAaoB,GAGtBA,EAAU5B,QAAQ+B,IAGtBa,sBAAuB,SAAStZ,EAASa,EAAS0Y,GAC9C,IAAIC,EAAU,IAAInd,EAAKP,EAAE2H,OAAO,CAC5B3C,OAAQ,CACJsK,MAAO,QAEX0N,KAAMvU,KAAKkV,eAAeF,GAC1BG,OAAQ1Z,EAAQa,QAAQ6Y,QACzB7Y,IAEH2Y,EAAQtY,SAASyY,SAAS3Z,EAAQkB,SAASyY,YAE3C,OAAOH,GAGXC,eAAgB,SAAS5Y,GACrB,GAAI0D,KAAKqG,OACL,OAAOrG,KAAKqG,OAAO6O,eAAe5Y,IAI1C+Y,6BAA8B,WAC1B,OAAO,SAMXC,IAFJpE,GAAa3Q,UAAUjE,QAAU,GAEhB4U,GAAahS,OAAO,CACjC8B,KAAM,SAAS1E,GACX4U,GAAarJ,GAAG7G,KAAKqP,KAAKrQ,KAAM1D,GAEhC0D,KAAK1D,QAAQiZ,OAAShX,GAAWyB,KAAK1D,QAAQiZ,QAC9CvV,KAAK1D,QAAQyQ,QAAUxO,GAAWyB,KAAK1D,QAAQyQ,UAGnDsE,OAAQ,SAASlF,GACb,IAAIrK,EAAS9B,KAEb,IAAI1D,EAAU0D,KAAK1D,QACnB,IAAIG,EAAQH,EAAQG,MACpB,IAAIuP,EAAS1P,EAAQ0P,OACrB,IAAIwJ,EAAclZ,EAAQkZ,YAC1B,IAAIC,EAAahZ,GAASuP,EAC1B,IAAIuJ,EAASjZ,EAAQiZ,OACrB,IAAIxI,EAAUzQ,EAAQyQ,QACtB,IAAI2I,EAAcpZ,EAAQqZ,OAAOlZ,MACjC,IAAIsP,EAEJ,IAAI6J,EAAmB,WACnB9T,EAAOgM,MAAM3B,EAAWlR,EAAGqB,EAAQwR,OACnChM,EAAOgM,MAAM3B,EAAWjR,EAAGoB,EAAQuZ,QACnC/T,EAAOgU,WAAa/J,EAAI5B,QAAQ6C,MAAMuI,GAAQvI,MAAM0I,IAGxD,IAAIK,EAAa5J,EAAUhC,QAC3B,GAAIsL,EAAY,CACZM,EAAWlK,GAAKkK,EAAWpK,GAAKlP,EAChCsZ,EAAWjK,GAAKiK,EAAWnK,GAAKI,EAGpC,GAAIwJ,EACAO,EAAW/I,MAAMuI,GAAQvI,MAAM0I,GAAa1I,MAAMD,GAGtDmE,GAAarJ,GAAGwJ,OAAOhB,KAAKrQ,KAAM+V,GAElC,GAAIN,EACA1J,EAAM/L,KAAK+L,IAAM,IAAIT,EAAI,EAAG,EAAG7O,EAAOuP,QAEtCD,EAAM/L,KAAK+L,IAGf,GAAIyJ,GAAeC,EAAY,CAC3BG,IACAG,EAAa/V,KAAK+V,WAAa/V,KAAK8V,WAAW3L,QAAQ6C,MAAMD,OAC1D,CACHgJ,EAAa/V,KAAK+V,WAAahK,EAAI5B,QACnC4B,EAAIe,IAAIC,GAASD,IAAI4I,GAAa5I,IAAIyI,GACtCK,IAGJ5V,KAAK+R,kBACDhG,EAAIJ,GAAKoK,EAAWpK,GAAK4J,EAAO1W,KAAO6W,EAAc3I,EAAQlO,KAC7DkN,EAAIH,GAAKmK,EAAWnK,GAAK2J,EAAO7W,IAAMgX,EAAc3I,EAAQrO,KAGhE,IAAIyS,EAAWnR,KAAKmR,SACpB,IAAK,IAAIzU,EAAI,EAAGA,EAAIyU,EAAStV,OAAQa,IAAK,CACtC,IAAI0H,EAAO+M,EAASzU,GACpB0H,EAAKiN,OAAOjN,EAAK2H,OAIzB+B,MAAO,SAAS3B,EAAWI,EAAMwB,GAC7B/N,KAAK+L,IAAI+B,MAAM3B,EAAWI,EAAMwB,IAGpCiI,OAAQ,WACJ,IAAI1Z,EAAU0D,KAAK1D,QACnB,OAAOA,EAAQqZ,OAAOlZ,OAASH,EAAQ2Z,YAG3C7D,aAAc,WACVlB,GAAarJ,GAAGuK,aAAa/B,KAAKrQ,MAElC,IAAI1D,EAAU0D,KAAK1D,QACnB,GAAIA,EAAQ6V,SAAWnS,KAAKgW,SACxBhW,KAAKyS,OAAO7P,OAAO9K,EAAKoe,SACpBlW,KAAK8V,WAAWlI,SAChB5N,KAAKmW,iBAKjBA,YAAa,WACT,IAAI7Z,EAAU0D,KAAK1D,QACnB,IAAIqZ,EAASrZ,EAAQqZ,QAAU,GAE/B,MAAO,CACHpZ,OAAQ,CACJE,MAAOkZ,EAAOlZ,MACdoK,MAAO8O,EAAO9O,MACdsN,QAAS1Q,GAAekS,EAAOxB,QAAS7X,EAAQ6X,SAChDiC,SAAUT,EAAOS,UAErB7B,KAAM,CACF1N,MAAOvK,EAAQ2Z,WACf9B,QAAS7X,EAAQ6X,SAErBkC,OAAQ/Z,EAAQ+Z,YAqBxBC,IAhBJ3S,GAAkB2R,GAAY,CAC1BxH,MAAOhU,EACP+b,OAAQjb,GACR2a,OAAQ,GACRxI,QAAS,GACT4I,OAAQ,CACJ9O,MAAO/N,EACP2D,MAAO,GAEXwZ,WAAY,GACZT,YAAa,MACb/Y,MAAO,EACPuP,OAAQ,EACRmG,QAAS,OAGMmD,GAAWpW,OAAO,CACjC8B,KAAM,SAAS1E,EAASia,GACpBjB,GAAWzN,GAAG7G,KAAKqP,KAAKrQ,KAAM1D,GAE9B0D,KAAKuW,UAAYA,GAGrBC,WAAY,WACR,IAAIlV,EAAMtB,KACV,IAAI1D,EAAUgF,EAAIhF,QAClB,IAAIyP,EAAMzK,EAAIwU,WACd,IAAIlS,EAAOtH,EAAQsH,KACnB,IAAI0J,EAAWhR,EAAQgR,SACvB,IAAI/C,EAASwB,EAAIxB,SACjB,IAAIkM,EAAY1K,EAAItP,QAAU,EAC9B,IAAIia,EAAa3K,EAAIC,SAAW,EAEhC,IAAK1P,EAAQ6V,UAAYnS,KAAKgW,SAC1B,OAAO,KAGX,IAAI7X,EAAQ6B,KAAKmW,cACjB,IAAI1a,EAEJ,GAAImI,IAAS3K,EACTwC,EAAU,IAAI9D,EAAQS,OAClB,IAAIA,EAAO,CACPyE,EAAMkP,EAAIJ,GAAK8K,EAAWvd,GAC1B2D,EAAMkP,EAAIH,GAAK8K,EAAYxd,IAC5BoJ,KAAK0B,IAAIyS,EAAWC,IACvBvY,QAED,GAAIyF,IAAS/I,GAChBY,EAAU3D,EAAK6e,WAAW,CACtB,CAAE5K,EAAIJ,GAAK8K,EAAW1K,EAAIH,IAC1B,CAAEG,EAAIJ,GAAII,EAAID,IACd,CAAEC,EAAIF,GAAIE,EAAID,KACf3N,GAAO2S,aACP,GAAIlN,IAASzK,EAAO,CACvBsC,EAAU,IAAI9D,EAAQif,UAAUzY,GAEhC1C,EAAQob,OAAO9K,EAAIJ,GAAII,EAAIH,IAAIqF,OAAOlF,EAAIF,GAAIE,EAAID,IAClDrQ,EAAQob,OAAO9K,EAAIJ,GAAII,EAAID,IAAImF,OAAOlF,EAAIF,GAAIE,EAAIH,QAC/C,CACH,IAAIkL,EAAO/K,EAAI6B,SACf,GAAIhK,IAASnJ,EAAc,CACvB,IAAIsc,EAAetT,GAAenH,EAAQya,aAAcD,EAAKra,QAAU,GACvEqa,EAAKE,gBAAgBD,GAGzBtb,EAAU3D,EAAKoe,SAASY,EAAM3Y,GAGlC,GAAImP,EACA7R,EAAQnD,UAAUD,IACbiS,QAAQgD,EAAU,CAAE/C,EAAOrN,EAAGqN,EAAOpN,KAI9C1B,EAAQa,QAAQsW,OAAStW,EAAQsW,OAEjC,OAAOnX,GAGXwb,cAAe,WACX,IAAInV,EAAS9B,KAEb,IAAIoU,EAAepU,KAAK1D,QAAQmW,OAChC,IAAI8D,EAAYvW,KAAKuW,WAAa,GAClC,IAAI9D,EAEJ,GAAI2B,EACA3B,EAAS2B,EAAa,CAClB9Y,MAAOib,EAAUjb,MACjBoZ,SAAU6B,EAAU7B,SACpB7C,OAAQ7R,KAAK0R,YACb+C,OAAQ8B,EAAU9B,OAClBE,SAAU4B,EAAU5B,SACpBmC,KAAM9W,KAAK8V,WAAWlI,SACtBtR,QAAS0D,KAAKkX,gBACd9E,aAAc,WAAc,OAAOtQ,EAAO0U,qBAG9C/D,EAASzS,KAAKwW,aAGlB,OAAO/D,GAGXyE,cAAe,WACX,IAAI5a,EAAU0D,KAAK1D,QACnB,MAAO,CACH2Z,WAAY3Z,EAAQ2Z,WACpBN,OAAQrZ,EAAQqZ,OAChBJ,OAAQjZ,EAAQiZ,OAChBxI,QAASzQ,EAAQyQ,QACjBnJ,KAAMtH,EAAQsH,KACdkE,KAAMxL,EAAQG,MACd0V,QAAS7V,EAAQ6V,UAIzBC,aAAc,WACVpS,KAAKyS,OAASzS,KAAKiX,oBAI3BtT,GAAkB2S,GAAc,CAC5B1S,KAAM3K,EACN6U,MAAO9U,EACP6c,OAAQ7c,IA9kBZ,IAilBIme,GACAC,GAAS,SAETC,GAAY,CACZC,MAAO,CACH1T,KALK,SAML0J,SAAU,EACViK,MAAO,CAAE,CACLlb,OAAQ,EACRwK,MAAO9L,EACPoZ,QAAS,GACV,CACC9X,OAAQ,IACRwK,MAAO9L,EACPoZ,QAAS,IACV,CACC9X,OAAQ,EACRwK,MAAO9L,EACPoZ,QAAS,KAGjBqD,WAAY,CACR5T,KAAMwT,GACNG,MAAO,CAAE,CACLlb,OAAQ,EACRwK,MAAO9L,EACPoZ,QAAS,KACV,CACC9X,OAAQ,IACRwK,MAAO9L,EACPoZ,QAAS,GACV,CACC9X,OAAQ,IACRwK,MAAO9L,EACPoZ,QAAS,OAGjBsD,aAAc,CACV7T,KAAMwT,GACNG,MAAO,CAAE,CACLlb,OAAQ,IACRwK,MAAO9L,EACPoZ,QAAS,KACV,CACC9X,OAAQ,IACRwK,MAAO9L,EACPoZ,QAAS,IACV,CACC9X,OAAQ,IACRwK,MAAO9L,EACPoZ,QAAS,KAGjBuD,aAAc,CACV9T,KAAMwT,GACNO,WAAY,MACZJ,MAAO,CAAE,CACLlb,OAAQ,EACRwK,MAAO9L,EACPoZ,QAAS,GACV,CACC9X,OAAQ,GACRwK,MAAO9L,EACPoZ,QAAS,IACV,CACC9X,OAAQ,IACRwK,MAAO9L,EACPoZ,QAAS,KAGjByD,WAAY,CACRhU,KAAMwT,GACNO,WAAY,MACZJ,MAAO,CAAE,CACLlb,OAAQ,EACRwK,MAAO9L,EACPoZ,QAAS,IACV,CACC9X,OAAQ,IACRwK,MAAO9L,EACPoZ,QAAS,KACV,CACC9X,OAAQ,IACRwK,MAAO9L,EACPoZ,QAAS,KACV,CACC9X,OAAQ,IACRwK,MAAO9L,EACPoZ,QAAS,KACV,CACC9X,OAAQ,IACRwK,MAAO9L,EACPoZ,QAAS,KACV,CACC9X,OAAQ,IACRwK,MAAO9L,EACPoZ,QAAS,KAGjB0D,aAAc,CACVjU,KAAMwT,GACN7M,OAAQ,CAAE,GAAK,IACfkB,OAAQ,KAIhB,SAASqM,GAAQC,EAAGC,GAChB,GAAID,EAAEpM,KAAOqM,EAAErM,IAAMoM,EAAEnM,KAAOoM,EAAEpM,IAAMmM,EAAElM,KAAOmM,EAAEnM,IAAMkM,EAAEjM,KAAOkM,EAAElM,GAC9D,OAAOkM,EAGX,IAAI/M,EAAI3I,KAAK0B,IAAI+T,EAAEpM,GAAIqM,EAAErM,IACzB,IAAIlF,EAAInE,KAAKC,IAAIwV,EAAEpM,GAAIqM,EAAErM,IACzB,IAAIjF,EAAIpE,KAAK0B,IAAI+T,EAAElM,GAAImM,EAAEnM,IACzB,IAAIoM,EAAI3V,KAAKC,IAAIwV,EAAElM,GAAImM,EAAEnM,IACzB,IAAI3J,EAAII,KAAK0B,IAAI+T,EAAEnM,GAAIoM,EAAEpM,IACzB,IAAIjF,EAAIrE,KAAKC,IAAIwV,EAAEnM,GAAIoM,EAAEpM,IACzB,IAAIsM,EAAI5V,KAAK0B,IAAI+T,EAAEjM,GAAIkM,EAAElM,IACzB,IAAIqM,EAAI7V,KAAKC,IAAIwV,EAAEjM,GAAIkM,EAAElM,IACzB,IAAIsM,EAAQ,GAaZA,EAAM,GAAK,IAAI9M,EAAI7E,EAAGvE,EAAGwE,EAAGC,GAC5ByR,EAAM,GAAK,IAAI9M,EAAIL,EAAGtE,EAAGF,EAAGyR,GAC5BE,EAAM,GAAK,IAAI9M,EAAI5E,EAAGC,EAAGsR,EAAGC,GAC5BE,EAAM,GAAK,IAAI9M,EAAI7E,EAAGyR,EAAGxR,EAAGyR,GAG5B,GAAIJ,EAAEpM,KAAOV,GAAK8M,EAAEnM,KAAO1J,GAAK8V,EAAErM,KAAOV,GAAK+M,EAAEpM,KAAO1J,EAAG,CACtDkW,EAAM,GAAK,IAAI9M,EAAIL,EAAG/I,EAAGuE,EAAGE,GAC5ByR,EAAM,GAAK,IAAI9M,EAAI5E,EAAGwR,EAAGD,EAAGE,OACzB,CACHC,EAAM,GAAK,IAAI9M,EAAI5E,EAAGxE,EAAG+V,EAAGtR,GAC5ByR,EAAM,GAAK,IAAI9M,EAAIL,EAAGiN,EAAGzR,EAAG0R,GAGhC,OAAO9Y,GAAK+Y,EAAO,SAASrM,GACxB,OAAOA,EAAIC,SAAW,GAAKD,EAAItP,QAAU,IAC1C,GAGP,IAAI4b,GAAcnH,GAAahS,OAAO,CAClC8B,KAAM,SAAS1E,GACX4U,GAAarJ,GAAG7G,KAAKqP,KAAKrQ,KAAM1D,GAEhC,IAAIgc,EAActY,KAAK1D,QACvBgc,EAAY7b,MAAQ8b,SAASD,EAAY7b,MAAO,IAChD6b,EAAYtM,OAASuM,SAASD,EAAYtM,OAAQ,IAElDhM,KAAKwY,UAAY,IAGrBnH,OAAQ,WACJ,IAAI/P,EAAMtB,KACV,IAAI1D,EAAUgF,EAAIhF,QAClB,IAAI6U,EAAW7P,EAAI6P,SACnB,IAAIsH,EAAa,IAAInN,EAAI,EAAG,EAAGhP,EAAQG,MAAOH,EAAQ0P,QAEtDhM,KAAK+L,IAAM0M,EAAWzL,MAAM1Q,EAAQiZ,QAEpC,IAAK,IAAI7Y,EAAI,EAAGA,EAAIyU,EAAStV,OAAQa,IAAK,CACtCyU,EAASzU,GAAG2U,OAAOoH,GACnBA,EAAaX,GAAQW,EAAYtH,EAASzU,GAAGqP,MAAQ,IAAIT,IAIjE8G,aAAc,WACVpS,KAAKyS,OAAS,IAAI1a,EAClBiI,KAAK0Y,oBAGTA,iBAAkB,WACd,IAAIpc,EAAU0D,KAAK1D,QACnB,IAAIqZ,EAASrZ,EAAQqZ,QAAU,GAC/B,IAAI5J,EAAM/L,KAAK+L,IAAI5B,QAAQ2C,IAAIxQ,EAAQiZ,QAAQvI,MAAM2I,EAAOlZ,OAE5D,IAAIwZ,EAAane,EAAKoe,SAASnK,EAAI6B,SAAU,CACzCrR,OAAQ,CACJsK,MAAO8O,EAAOlZ,MAAQkZ,EAAO9O,MAAQ,GACrCpK,MAAOkZ,EAAOlZ,MACd2Z,SAAUT,EAAOS,UAErB7B,KAAM,CACF1N,MAAOvK,EAAQ2Z,WACf9B,QAAS7X,EAAQ6X,SAErBvB,QAAS,KAGb5S,KAAKyS,OAAO7P,OAAOqT,IAGvBxE,QAAS,WACL,OAAOzR,MAGXkV,eAAgB,SAAS5Y,GACrB,IAAIkc,EAAYxY,KAAKwY,UACrB,IAAIG,EAAWrV,GAAUhH,GACzB,IAAIsc,EAAWvB,GAAU/a,EAAQsc,UACjC,IAAIC,EAEJ,GAAIL,EAAUG,GACVE,EAAkBL,EAAUG,OACzB,CACH,IAAI3D,EAAkBzd,EAAE2H,OAAO,GAAI0Z,EAAUtc,GAC7C,GAAIsc,EAAShV,OAAS,SAClBiV,EAAkB,IAAIlhB,EAAQmhB,eAAe9D,OAC1C,CACH,GAAI1Y,EAAQ8R,YACR4G,EAAgBuC,MAAQwB,GAAiB/D,GAE7C6D,EAAkB,IAAIlhB,EAAQqhB,eAAehE,GAC7C6D,EAAgBlB,WAAaiB,EAASjB,aAAe,MAEzDa,EAAUG,GAAYE,EAG1B,OAAOA,GAGXI,eAAgB,WACZ,IAAIT,EAAYxY,KAAKwY,UACrB,IAAK,IAAIG,KAAYH,EACjBA,EAAUG,GAAUO,WAAa,IAIzCpR,KAAM,WACF,IAAIxL,EAAU0D,KAAK1D,QACnB,OAAO,IAAIgP,EAAI,EAAG,EAAGhP,EAAQG,MAAOH,EAAQ0P,WAgBpD,SAAS+M,GAAiBzc,GACtB,IAAIib,EAAQjb,EAAQib,MACpB,IAAI4B,EAAc7c,EAAQ8R,YAAc9R,EAAQmP,OAAU,IAC1D,IAAI5P,EAAS0b,EAAM1b,OACnB,IAAIud,EAAe,GAEnB,IAAK,IAAI1c,EAAI,EAAGA,EAAIb,EAAQa,IAAK,CAC7B,IAAI2c,EAAc9hB,EAAE2H,OAAO,GAAIqY,EAAM7a,IACrC2c,EAAYhd,QAAUgd,EAAYhd,QAAU,IAAM8c,GAAaA,GAAa,IAC5EC,EAAa5Z,KAAK6Z,GAGtB,OAAOD,EAxBXzV,GAAkB0U,GAAa,CAC3B5b,MAAOjD,EACPwS,OAAQ1S,EACR2c,WAAYlb,EACZ4a,OAAQ,CACJ9O,MAAO/N,EACP2D,MAAO,GAEX8Y,OAAQhX,GAAW,GACnBqU,QAAS,IAkBb,IAAI0G,GAAepI,GAAahS,OAAO,CACnC8B,KAAM,SAAS1E,GACX4U,GAAarJ,GAAG7G,KAAKqP,KAAKrQ,KAAM1D,GAChC0D,KAAKuZ,kBAGTA,eAAgB,WACZ,IAAIjd,EAAU0D,KAAK1D,QACnB,GAAIA,EAAQkd,SAAU,CAClBxZ,KAAKyZ,UAAYxe,EACjB+E,KAAK0Z,YAAcxe,EACnB8E,KAAK2Z,eAAiB3e,GACtBgF,KAAK4Z,iBAAmBjgB,EACxBqG,KAAK6Z,aAAevd,EAAQmC,QAC5BuB,KAAK8Z,eAAiBxd,EAAQyd,aAC3B,CACH/Z,KAAKyZ,UAAYve,EACjB8E,KAAK0Z,YAAcze,EACnB+E,KAAK2Z,eAAiBhgB,EACtBqG,KAAK4Z,iBAAmB5e,GACxBgF,KAAK6Z,aAAevd,EAAQyd,SAC5B/Z,KAAK8Z,eAAiBxd,EAAQmC,UAItC4S,OAAQ,SAASlF,GACbnM,KAAK+L,IAAMI,EAAUhC,QACrBnK,KAAKga,kBAGTA,eAAgB,WACZ,IAAIlY,EAAS9B,KAEb,IAAIsB,EAAMtB,KACV,IAAI+L,EAAMzK,EAAIyK,IACd,IAAI2N,EAAcpY,EAAIoY,YACtB,IAAID,EAAYnY,EAAImY,UACpB,IAAIG,EAAmBtY,EAAIsY,iBAC3B,IAAID,EAAiBrY,EAAIqY,eACzB,IAAIM,EAAQja,KAAKka,eACjB,IAAIC,EAASF,EAAME,OACnB,IAAIC,EAAaH,EAAMG,WACvB,IAAIC,EAAuBJ,EAAMI,qBACjC,IAAIC,EAAcH,EAAOte,OACzB,IAAI0e,EAAcxO,EAAI0N,EAAY,GAAKzZ,KAAKwa,WAAWJ,EAAYrO,EAAI4N,MAEvE,GAAIW,EAAa,CACb,IAAIG,EAAaF,EAEjB,IAAK,IAAIG,EAAW,EAAGA,EAAWJ,EAAaI,IAAY,CACvD,IAAIC,EAAQR,EAAOO,GACnB,IAAIE,EAAgBD,EAAMC,cAC1B,IAAIC,EAAe9O,EAAI2N,EAAc,GACrC,IAAIoB,EAAqBF,EAAc/e,OAEvC,IAAK,IAAID,EAAM,EAAGA,EAAMkf,EAAoBlf,IAAO,CAC/C,IAAIH,EAAUmf,EAAchf,GAC5B,IAAImf,EAAiBjZ,EAAOkB,YAAYvH,GACxC,IAAIuf,EAAoBP,EAAa3Y,EAAO0Y,WAAWO,EAAepB,GAAiBgB,EAAMM,WAE7F,IAAIC,EAAa,IAAI5P,EACrB4P,EAAWzB,EAAY,GAAKuB,EAC5BE,EAAWzB,EAAY,GAAKuB,EAAoBD,EAAepB,GAC/DuB,EAAWxB,EAAc,GAAKmB,EAC9BK,EAAWxB,EAAc,GAAKmB,EAAeE,EAAenB,GAE5Dne,EAAQ4V,OAAO6J,GAEfL,GAAgBE,EAAenB,GAAoB9X,EAAOgY,eAE9DW,GAAcE,EAAMM,UAAYnZ,EAAO+X,aAE3C9N,EAAI0N,EAAY,GAAKc,EACrBxO,EAAI0N,EAAY,GAAKc,EAAcH,EACnCrO,EAAI2N,EAAc,GAAK3N,EAAI2N,EAAc,GAAKW,IAItDG,WAAY,SAAS1S,EAAMqT,GACvB,IAAI/a,EAAQ,EACZ,IAAI0N,EAAQ9N,KAAK1D,QAAQwR,MACzB,GAAIA,IAAUtT,GAASsT,IAAU/U,EAC7BqH,EAAQ+a,EAAUrT,OACf,GAAIgG,IAAU9U,EACjBoH,GAAS+a,EAAUrT,GAAQ,EAE/B,OAAO1H,GAGX8Z,aAAc,WACV,IAAIpY,EAAS9B,KAEb,IAAIsB,EAAMtB,KACV,IAAI+L,EAAMzK,EAAIyK,IACd,IAAIoF,EAAW7P,EAAI6P,SACnB,IAAIyI,EAAmBtY,EAAIsY,iBAC3B,IAAID,EAAiBrY,EAAIqY,eACzB,IAAIG,EAAiBxY,EAAIwY,eACzB,IAAID,EAAevY,EAAIuY,aACvB,IAAIsB,EAAUte,EAAMkP,EAAI6N,MACxB,IAAI5H,EAAgBb,EAAStV,OAC7B,IAAIse,EAAS,GAEb,IAAIc,EAAY,EAChB,IAAIG,EAAoB,EACxB,IAAIhB,EAAa,EACjB,IAAIC,EAAuB,EAC3B,IAAIO,EAAgB,GAEpB,IAAK,IAAIhf,EAAM,EAAGA,EAAMoW,EAAepW,IAAO,CAC1C,IAAIH,EAAU0V,EAASvV,GACvB,IAAKH,EAAQsQ,IACTtQ,EAAQ4V,OAAOtF,GAGnB,IAAIgP,EAAiBjZ,EAAOkB,YAAYvH,GACxC,GAAIqG,EAAOxF,QAAQ4P,MAAQrP,EAAMue,EAAoBtB,EAAiBiB,EAAenB,IAAqBuB,EAAS,CAC/GhB,EAAO3a,KAAK,CACRob,cAAeA,EACfK,UAAWA,EACXG,kBAAmBA,IAEvBf,EAAuB/X,KAAKC,IAAI8X,EAAsBe,GACtDhB,GAAcP,EAAeoB,EAC7BA,EAAY,EACZG,EAAoB,EACpBR,EAAgB,GAEpBK,EAAY3Y,KAAKC,IAAI0Y,EAAWF,EAAepB,IAC/C,GAAIyB,EAAoB,EACpBA,GAAqBtB,EAEzBsB,GAAqBL,EAAenB,GACpCgB,EAAcpb,KAAK/D,GAGvB0e,EAAO3a,KAAK,CACRob,cAAeA,EACfK,UAAWA,EACXG,kBAAmBA,IAEvBf,EAAuB/X,KAAKC,IAAI8X,EAAsBe,GACtDhB,GAAca,EAEd,MAAO,CACHd,OAAQA,EACRC,WAAYA,EACZC,qBAAsBA,IAI9BrX,YAAa,SAASvH,GAClB,MAAO,CACHgB,MAAOhB,EAAQsQ,IAAItP,QACnBuP,OAAQvQ,EAAQsQ,IAAIC,WAI5BoG,aAAc,eAUdiJ,IAPJ1X,GAAkB2V,GAAc,CAC5BE,SAAU,KACVtN,KAAM,KACN6N,SAAU,EACVtb,QAAS,IAGK9G,EAAQ2jB,MAEtBA,GAAOpK,GAAahS,OAAO,CAC3B8B,KAAM,SAAS5B,EAAS9C,GACpB4U,GAAarJ,GAAG7G,KAAKqP,KAAKrQ,KAAM1D,GAEhC0D,KAAKZ,QAAUA,EAGfY,KAAKqR,OAAO,IAAI/F,IAGpB+F,OAAQ,SAASlF,GACb,IAAI7P,EAAU0D,KAAK1D,QACnB,IAAIwL,EAAOxL,EAAQwL,KAAOjQ,EAAK0jB,YAAYvb,KAAKZ,QAAS,CAAE6F,KAAM3I,EAAQ2I,OAEzEjF,KAAKwb,SAAW1T,EAAK0T,SAErBxb,KAAK+L,IAAM,IAAIT,EAAIa,EAAUR,GAAIQ,EAAUP,GACnCO,EAAUR,GAAK7D,EAAKrL,MAAO0P,EAAUP,GAAK9D,EAAKkE,SAG3DoG,aAAc,WACV,IAAI9Q,EAAMtB,KAAK1D,QACf,IAAI2I,EAAO3D,EAAI2D,KACf,IAAI4B,EAAQvF,EAAIuF,MAChB,IAAIsN,EAAU7S,EAAI6S,QAClB,IAAIkC,EAAS/U,EAAI+U,OAEjBrW,KAAKyS,OAAS,IAAI4I,GAAYrb,KAAKZ,QAASY,KAAK+L,IAAI6B,SAAS6N,UAAW,CACrExW,KAAMA,EACNsP,KAAM,CAAE1N,MAAOA,EAAOsN,QAASA,GAC/BkC,OAAQA,OAUpB,SAASqF,GAAU5E,GACf,IAAI6E,EAAS7E,EAAK6E,OAClB,IAAIC,EAAc9E,EAAK8E,cAEvB,OAAO,IAAItQ,EAAIqQ,EAAOze,EAAGye,EAAOxe,EAAGye,EAAY1e,EAAG0e,EAAYze,GATlEwG,GAAkB2X,GAAM,CACpBrW,KAAM5L,EACNwN,MAAO/N,IAUX,IAAI+iB,GAAmB,MAEnBC,GAAUxG,GAAWpW,OAAO,CAC5B8B,KAAM,SAAS5B,EAAS9C,EAASyf,GAC7BzG,GAAWzN,GAAG7G,KAAKqP,KAAKrQ,KAAM1D,GAC9B0D,KAAKZ,QAAUA,EACfY,KAAK+b,KAAOA,EAEZ/b,KAAKgc,iBACL,GAAIhc,KAAK1D,QAAQ2f,cAAgB,MAC7Bjc,KAAKqR,OAAO,IAAI/F,IAIxB0Q,eAAgB,WACZ,IAAI1f,EAAU0D,KAAK1D,QACnB,IAAI4f,EAAOC,OAAOnc,KAAKZ,SAASQ,MAAMic,IACtC,IAAIO,EAAe,IAAI9C,GAAa,CAAEE,SAAU,KAAM1L,MAAOxR,EAAQwR,MAAO5B,KAAM,QAClF,IAAImQ,EAAc7jB,EAAW,GAAK8D,EAAS,CAAE6X,QAAS,EAAG3C,UAAW,OAEpExR,KAAKsc,UAAYF,EACjBpc,KAAK4C,OAAOwZ,GAEZ,IAAK,IAAIG,EAAS,EAAGA,EAASL,EAAKrgB,OAAQ0gB,IAAU,CACjD,IAAIC,EAAO,IAAIlB,GAAKY,EAAKK,GAAQE,OAAQJ,GACzCD,EAAaxZ,OAAO4Z,KAI5BnL,OAAQ,SAASlF,GACb,IAAI7P,EAAU0D,KAAK1D,QACnB,IAAIogB,EAAWpgB,EAAQmW,OACvBzS,KAAKsc,UAAUhgB,QAAQwR,MAAQxR,EAAQwR,MAEvC,GAAI4O,IAAa1c,KAAK2c,WAAY,CAC9B,IAAIC,EAAYzQ,EAChB,IAAKyQ,EAAU/O,UAAW,CACtB7N,KAAK2c,WAAa,KAClB3c,KAAKqR,OAAOuL,GACZ5c,KAAK2c,WAAa,MAClBC,EAAY5c,KAAK+L,IAErB,IAAI0G,EAASzS,KAAKyS,OAASiK,EAAS1c,KAAK6c,cAAcD,IAEvD,GAAInK,EAAQ,CACRmK,EAAYlB,GAAUjJ,EAAOqK,eAAiB,IAAI3kB,GAElDsa,EAAOnW,QAAQsW,OAAStW,EAAQsW,OAGpC5S,KAAK+L,IAAM/L,KAAK+V,WAAa/V,KAAK8V,WAAa8G,MAC5C,CACHtH,GAAWzN,GAAGwJ,OAAOhB,KAAKrQ,KAAMmM,GAEhC,GAAI7P,EAAQgR,SAAU,CAClB,IAAIiI,EAAShX,GAAWjC,EAAQiZ,QAChC,IAAIxJ,EAAM/L,KAAK+L,IAAIiB,MAAMuI,GAEzBvV,KAAKmM,UAAYA,EACjBnM,KAAK+c,UAAYhR,EAAI5B,QAErB4B,EAAM/L,KAAKsK,SACXyB,EAAIjP,UAAUyY,EAAO1W,KAAO0W,EAAO5W,MAAO4W,EAAO7W,IAAM6W,EAAO3W,QAE9DoB,KAAKgd,WAAajR,EAAI5B,QAEtB4B,EAAIe,IAAIyI,MAKpBnD,aAAc,WACV,IAAI9V,EAAU0D,KAAK1D,QAEnB0D,KAAKyS,OAAS,IAAI1a,EAAM,CACpBO,UAAW0H,KAAKid,oBAChBrK,OAAQtW,EAAQsW,OAChBI,OAAQ1W,EAAQ0W,SAGpB,GAAIhT,KAAKgW,SAAU,CACf,IAAIjK,EAAMjU,EAAKoe,SAASlW,KAAK8V,WAAWlI,SAAU5N,KAAKmW,eACvDnW,KAAKyS,OAAO7P,OAAOmJ,KAI3BmG,aAAc,WACV,IAAKlS,KAAK1D,QAAQ6V,QACd,OAGJ,GAAInS,KAAK1D,QAAQmW,OAAQ,CACrB,IAAIA,EAASzS,KAAKyS,OAClB,GAAIA,IAAWjW,EAAQiW,EAAOnW,QAAQ0W,QAClCP,EAAOnW,QAAQ0W,OAAShT,KAAK1D,QAAQ0W,OAEzChT,KAAKqS,YACLrS,KAAKuS,uBAEL+C,GAAWzN,GAAGqK,aAAa7B,KAAKrQ,OAIxC6c,cAAe,SAAS1Q,GACpB,IAAIrK,EAAS9B,KAEb,IAAIkd,EAAU,CACVV,KAAMxc,KAAKZ,QACX0X,KAAM3K,EAAUyB,SAChBiE,OAAQ7R,KAAK0R,YACbpV,QAAS0D,KAAK1D,QACd8V,aAAc,WACVtQ,EAAO6a,WAAa,KACpB7a,EAAOuP,OAAOlF,GACdrK,EAAO6a,WAAa,MACpB,OAAO7a,EAAOqb,qBAGtB,GAAInd,KAAK+b,KACLxkB,EAAE2H,OAAOge,EAASld,KAAK+b,MAG3B,OAAOmB,GAGXC,iBAAkB,WACdnd,KAAKoS,eACLpS,KAAKsS,iBACL,IAAIG,EAASzS,KAAKyS,cACXzS,KAAKyS,OACZ,OAAOA,GAGXnI,OAAQ,WACJ,IAAIhO,EAAU0D,KAAK1D,QACnB0D,KAAK+L,IAAIzB,OAAOhO,EAAQgR,UACxBtN,KAAK8N,MAAM9N,KAAKmM,UAAWlR,EAAGqB,EAAQwR,OACtC9N,KAAK8N,MAAM9N,KAAKmM,UAAWjR,EAAGoB,EAAQuZ,QACtC,OAAO7V,KAAK+L,KAGhBkR,kBAAmB,WACf,IAAI3P,EAAWtN,KAAK1D,QAAQgR,SAC5B,IAAKA,EACD,OAAO,KAGX,IAAIhM,EAAMtB,KAAK+c,UAAUxS,SACzB,IAAIO,EAAKxJ,EAAIpE,EACb,IAAI6N,EAAKzJ,EAAInE,EACb,IAAIigB,EAAYpd,KAAKgd,WAAWzS,SAEhC,OAAOlS,IACKyE,UAAUsgB,EAAUlgB,EAAI4N,EAAIsS,EAAUjgB,EAAI4N,GAC1CT,OAAOgD,EAAU,CAAExC,EAAIC,OAIvCsS,GAAQnM,GAAahS,OAAO,CAC5B8B,KAAM,SAAS1E,GACX4U,GAAarJ,GAAG7G,KAAKqP,KAAKrQ,KAAM1D,GAEhC0D,KAAK4C,OACD,IAAIkZ,GAAQ9b,KAAK1D,QAAQkgB,KAAMjlB,EAAE2H,OAAO,GAAIc,KAAK1D,QAAS,CACtDuZ,OAAQ7V,KAAK1D,QAAQghB,cAKjCjM,OAAQ,SAASlF,GACb+E,GAAarJ,GAAGwJ,OAAOhB,KAAKrQ,KAAMmM,GAClCnM,KAAK+L,IAAIO,OAAOH,EAAWlR,MA8B/BsiB,IA1BJF,GAAMG,WAAa,SAASlhB,EAAS+J,EAAQoX,GACzC,IAAIC,EAAephB,EAEnB,UAAWA,IAAY,SACnBohB,EAAe,CAAElB,KAAMlgB,GAG3BohB,EAAenmB,EAAE2H,OAAO,CAAEiT,QAAS,MAAQsL,EAAgBC,GAE3D,IAAIC,EACJ,GAAID,GAAgBA,EAAavL,SAAWuL,EAAalB,KAAM,CAC3DmB,EAAQ,IAAIN,GAAMK,GAClBrX,EAAOzD,OAAO+a,GAGlB,OAAOA,GAGXha,GAAkB0Z,GAAO,CACrBxW,MAAO/N,EACPwkB,SAAU1iB,GACVkT,MAAO9U,EACPuc,OAAQhX,GAAW,GACnBwO,QAASxO,GAAW,KAGRud,GAAQ5c,OAAO,CAC3B8B,KAAM,SAAS1F,EAAOkhB,EAAM9U,EAAOgN,EAAUpY,GACzCwf,GAAQjU,GAAG7G,KAAKqP,KAAKrQ,KAAMwc,EAAMlgB,GAEjC0D,KAAKwc,KAAOA,EACZxc,KAAK1E,MAAQA,EACb0E,KAAK0H,MAAQA,EACb1H,KAAK0U,SAAWA,EAChB1U,KAAKqR,OAAO,IAAI/F,IAGpBuR,cAAe,SAAS1Q,GACpB,IAAI+Q,EAAUpB,GAAQjU,GAAGgV,cAAcxM,KAAKrQ,KAAMmM,GAElD+Q,EAAQ5hB,MAAQ0E,KAAK1E,MACrB4hB,EAAQxI,SAAW1U,KAAK0U,SACxBwI,EAAQU,OAAS5d,KAAK1D,QAAQshB,OAC9BV,EAAQW,QAAU7d,KAAK1D,QAAQuhB,QAE/B,OAAOX,GAGXY,MAAO,SAASC,EAAQ7b,GAEpB6b,EAAO3c,QAAQvI,EAAkB,CAC7B4C,QAASyH,GAAahB,GACtB5G,MAAO0E,KAAK1E,MACZkhB,KAAMxc,KAAKwc,KACX9U,MAAO1H,KAAK0H,MACZgN,SAAU1U,KAAK0U,SACfnI,KAAMvM,KAAKqG,OAAO/J,WAI1BgO,OAAQ,WACJ,GAAItK,KAAK1D,QAAQ0hB,gBAAkBhlB,EAAQ,CACvC,IAAI+S,EAAM/L,KAAK+c,UAAUnP,SACzB,IAAItV,EAAY0H,KAAKid,oBAErBjd,KAAK+L,IAAM2P,GAAU3P,EAAIkS,KAAK3lB,EAAU8N,gBAExC0V,GAAQjU,GAAGyC,OAAO+F,KAAKrQ,MAG3B,OAAOA,KAAK+L,KAGhBkR,kBAAmB,WACf,IAAI3gB,EAAU0D,KAAK1D,QACnB,IAAIgR,EAAWhR,EAAQgR,SACvB,IAAKA,EACD,OAAO,KAGX,GAAIhR,EAAQ0hB,gBAAkBhlB,EAC1B,OAAO8iB,GAAQjU,GAAGoV,kBAAkB5M,KAAKrQ,MAG7C,IAAIke,EAAiB7lB,IAAoBiS,OAAOgD,GAAUlH,SAC1D,IAAI2F,EAAM/L,KAAK+c,UAAUnP,SACzB,IAAIkJ,EAAO9W,KAAKmM,UAAUyB,SAE1B,IAAIuQ,EAAiB7hB,EAAQ6hB,gBAAkBvjB,GAC/C,IAAIwjB,EAAYD,IAAmBvjB,IAAOujB,IAAmBplB,EAASkC,EAAIC,EAC1E,IAAImjB,EAAeF,IAAmBvjB,IAAOujB,IAAmBplB,EAASmC,EAAID,EAC7E,IAAIqjB,EAAaH,IAAmBvjB,IAAOujB,IAAmBrkB,EAAOgd,EAAK6E,OAAS7E,EAAK8E,cAExF,IAAIH,EAAU1P,EAAI0P,UAAU8C,cAAcL,GAC1C,IAAIM,EAAWzS,EAAIyS,WAAWD,cAAcL,GAC5C,IAAItC,EAAc7P,EAAI6P,cAAc2C,cAAcL,GAClD,IAAIO,EAAa1S,EAAI0S,aAAaF,cAAcL,GAChD,IAAIlB,EAAa7kB,EAAKwe,WAAW8E,EAAS+C,EAAU5C,EAAa6C,GAEjE,IAAI3hB,EAAY,GAChBA,EAAUuhB,GAAgBvH,EAAK6E,OAAO0C,GAAgBrB,EAAWrB,OAAO0C,GAExE,IAAIK,EAAepc,KAAKsH,IAAI6R,EAAQ4C,GAAgBvhB,EAAUuhB,GAAgBC,EAAWD,IACzF,IAAIM,EAAgBrc,KAAKsH,IAAI4U,EAASH,GAAgBvhB,EAAUuhB,GAAgBC,EAAWD,IAE3F,IAAI7D,EAAYoE,EAEhB,GAAI/hB,EAAM6hB,EAAcnlB,KAAuBsD,EAAM8hB,EAAeplB,GAAoB,CACpFihB,EAAaiB,EACbmD,EAAWJ,OACR,GAAIG,EAAgBD,EAAc,CACrClE,EAAagE,EACbI,EAAWhD,MACR,CACHpB,EAAaiB,EACbmD,EAAWH,EAGf,IAAII,EAAcrE,EAAW4D,IAAcQ,EAASR,GAAa5D,EAAW4D,IAAc,EAC1FthB,EAAUshB,GAAatH,EAAKvM,SAAS6T,GAAaS,EAElD,OAAOxmB,IACFyE,UAAUA,EAAUI,EAAGJ,EAAUK,GACjCmN,OAAOgD,OAQhBwR,IAJJnb,GAAkB4Z,GAAW,CACzBtB,YAAa,QAGO,GACpB8C,GAAsB,OAEtBC,GAAO1J,GAAWpW,OAAO,CACzB8B,KAAM,SAASie,EAAQ3iB,EAASwV,GAC5BwD,GAAWzN,GAAG7G,KAAKqP,KAAKrQ,KAAM1D,GAE9B0D,KAAKif,OAASA,EACdjf,KAAK8R,aAAeA,EAEpB9R,KAAKkf,UAGTC,KAAM,WACFnf,KAAK1D,QAAQ6V,QAAU,OAG3B+B,KAAM,WACFlU,KAAK1D,QAAQ6V,QAAU,MAG3B+M,OAAQ,WACJ,IAAIpd,EAAS9B,KAEb,IAAI1D,EAAU0D,KAAK1D,QAEnB,GAAIA,EAAQ6V,QAAS,CACjB,IAAIiN,EAAQ9iB,EAAQ8iB,MACpB,IAAIC,EAAO/iB,EAAQ+iB,KACnB,IAAItT,EAAM,IAAIT,EACd,IAAIgU,EAAa,WAAc,OAAOxd,GACtC,IAAIgG,EAAOuX,EAAKvX,KAChB,IAAI0U,EAAOxc,KAAKif,OAAOzC,KACvB,IAAI/f,EAAOuP,EAEX,GAAIxP,EAAQ4iB,IAAUA,EAAMjN,QAAS,CACjC,IAAIoN,EAAepgB,GAAYigB,GAC/B,GAAIG,EACA/C,EAAO+C,EAAavf,KAAKif,aACtB,GAAIG,EAAMxB,OACbpB,EAAOxc,KAAK8R,aAAa8L,OAAO4B,KAAKJ,EAAMxB,OAAQpB,GAGvD,IAAK4C,EAAMvY,MACPuY,EAAMvY,MAAQuY,EAAM9B,WAAazjB,EAASklB,GAAsBM,EAAKpJ,WAGzEjW,KAAKof,MAAQ,IAAItD,GAAQU,EAAMhkB,EAAW,GAAI4mB,IAC9Cpf,KAAKof,MAAMK,SAAWH,EAEtB,GAAIF,EAAM9B,WAAazjB,IAAW2C,EAAQsL,GAAO,CAC7C,GAAIuX,EAAKzb,OAAS3K,EACd6O,EAAOxF,KAAKC,IAAIvC,KAAKof,MAAMrT,IAAItP,QAASuD,KAAKof,MAAMrT,IAAIC,cACpD,CACHvP,EAAQuD,KAAKof,MAAMrT,IAAItP,QACvBuP,EAAShM,KAAKof,MAAMrT,IAAIC,SAE5BD,EAAIG,KAAKlM,KAAKof,MAAMrT,MAI5BsT,EAAK5iB,MAAQA,GAASqL,GAAQgX,GAC9BO,EAAKrT,OAASA,GAAUlE,GAAQgX,GAEhC,IAAIY,EAAS,IAAIpJ,GAAa9d,EAAW,GAAI6mB,IAC7CK,EAAOD,SAAWH,EAElBtf,KAAK0f,OAASA,EACd1f,KAAK4C,OAAO8c,GAEZ,GAAI1f,KAAKof,MACLpf,KAAK4C,OAAO5C,KAAKof,OAGrBM,EAAOrO,OAAO,IAAI/F,GAClBtL,KAAK2f,WAAa5T,EAAIG,KAAKwT,EAAO3T,OAI1CsF,OAAQ,SAASlF,GACb,IAAI7K,EAAMtB,KACV,IAAI1D,EAAUgF,EAAIhF,QAClB,IAAI8iB,EAAQ9d,EAAI8d,MAChB,IAAIM,EAASpe,EAAIoe,OACjB,IAAIC,EAAare,EAAIqe,WACrB,IAAIpV,EAAS4B,EAAU5B,SACvB,IAAI1O,EAASS,EAAQsjB,KAAK/jB,OAC1B,IAAIyhB,EAAWhhB,EAAQghB,SAGvB,GAAIhhB,EAAQ6V,QAAS,CACjB,IAAI0N,EAAW9T,EAAKgK,EAEpB,GAAI7V,GAAQod,EAAU,CAAExjB,EAAMU,IAC1B,GAAI8iB,IAAaxjB,EAAM,CACnBic,EAAa4J,EAAWnT,QAAQL,EAAWmR,GAAUxgB,WAAWjB,EAAQsQ,EAAU5B,SAASpN,EAAIwiB,EAAWpV,SAASpN,GAEnH,GAAIb,EAAQsjB,KAAKzN,QAAS,CACtB0N,EAAY,CAAE1T,EAAUR,GAAIpB,EAAOpN,GACnC6C,KAAK8f,WAAa,CACdD,EACA,CAAE9J,EAAWlK,GAAItB,EAAOpN,IAE5B4O,EAAMgK,EAAW5L,QAAQiC,UAAUyT,QAEpC,CACH9J,EAAa4J,EAAWnT,QAAQL,EAAWmR,GAAUxgB,UAAUjB,EAAQsQ,EAAU5B,SAASpN,EAAIwiB,EAAWpV,SAASpN,GAElH,GAAIb,EAAQsjB,KAAKzN,QAAS,CACtB0N,EAAY,CAAE1T,EAAUN,GAAItB,EAAOpN,GACnC6C,KAAK8f,WAAa,CACdD,EACA,CAAE9J,EAAWpK,GAAIpB,EAAOpN,IAE5B4O,EAAMgK,EAAW5L,QAAQiC,UAAUyT,SAI3C,GAAIvC,IAAavkB,EAAQ,CACrBgd,EAAa4J,EAAWnT,QAAQL,EAAWmR,GAAUxgB,UAAUqP,EAAU5B,SAASrN,EAAIyiB,EAAWpV,SAASrN,EAAGrB,GAE7G,GAAIS,EAAQsjB,KAAKzN,QAAS,CACtB0N,EAAY,CAAEtV,EAAOrN,EAAGiP,EAAUL,IAClC9L,KAAK8f,WAAa,CACdD,EACA,CAAEtV,EAAOrN,EAAG6Y,EAAWnK,KAE3BG,EAAMgK,EAAW5L,QAAQiC,UAAUyT,QAEpC,CACH9J,EAAa4J,EAAWnT,QAAQL,EAAWmR,GAAUxgB,UAAUqP,EAAU5B,SAASrN,EAAIyiB,EAAWpV,SAASrN,GAAIrB,GAE9G,GAAIS,EAAQsjB,KAAKzN,QAAS,CACtB0N,EAAY,CAAEtV,EAAOrN,EAAGiP,EAAUP,IAClC5L,KAAK8f,WAAa,CACdD,EACA,CAAEtV,EAAOrN,EAAG6Y,EAAWjK,KAE3BC,EAAMgK,EAAW5L,QAAQiC,UAAUyT,IAK/C,GAAIH,EACAA,EAAOrO,OAAO0E,GAGlB,GAAIqJ,EAAO,CACPA,EAAM/N,OAAO0E,GACb,GAAI2J,EAAQ,CACR,GAAIpjB,EAAQ8iB,MAAM9B,WAAa/iB,EAC3B6kB,EAAMrT,IAAIS,QAAQkT,EAAO3T,IAAKuR,GAElC8B,EAAM/N,OAAO+N,EAAMrT,MAI3B/L,KAAK+V,WAAaA,EAClB/V,KAAKmM,UAAYA,EACjBnM,KAAK+L,IAAMA,GAAOgK,IAI1B3D,aAAc,WACVkD,GAAWzN,GAAGuK,aAAa/B,KAAKrQ,MAChCA,KAAKyS,OAAOnW,QAAQ0W,OAAShT,KAAK1D,QAAQ0W,OAE1C,GAAIhT,KAAK1D,QAAQ6V,QACbnS,KAAK+f,cAIb7N,aAAc,WACV,IAAIpQ,EAAS9B,KAEb,IAAI1D,EAAU0D,KAAK1D,QACnB,IAAI8X,EAAe9X,EAAQmW,OAC3B,GAAInW,EAAQ6V,SAAWiC,EAAc,CACjCpU,KAAKyS,OAAS2B,EAAa7c,EAAE2H,OAAOc,KAAKif,OAAQ,CAC7CpN,OAAQ7R,KAAK0R,YACboF,KAAM9W,KAAKmM,UAAUyB,SACrBtR,QAAS,CACL2Z,WAAY3Z,EAAQ2Z,WACpBN,OAAQrZ,EAAQ2Z,WAChBoJ,KAAM/iB,EAAQ+iB,KACdD,MAAO9iB,EAAQ8iB,MACfQ,KAAMtjB,EAAQsjB,KACdtC,SAAUhhB,EAAQghB,SAClBnL,QAAS7V,EAAQ6V,SAErBC,aAAc,WACVtQ,EAAOsQ,eACPtQ,EAAOwQ,iBACP,IAAI0N,EAAgBle,EAAO2Q,cACpB3Q,EAAO2Q,OACd,OAAOuN,MAGfhgB,KAAKqS,iBAELiD,GAAWzN,GAAGqK,aAAa7B,KAAKrQ,OAIxC+f,WAAY,WACR,IAAIzjB,EAAU0D,KAAK1D,QAAQsjB,KAE3B,GAAI5f,KAAK8f,WAAY,CACjB,IAAI1jB,EAAOtE,EAAK6e,WAAW3W,KAAK8f,WAAY,CACxCvjB,OAAQ,CACJsK,MAAOvK,EAAQuK,MACfpK,MAAOH,EAAQG,MACf2Z,SAAU9Z,EAAQ8Z,YAI1Bja,GAAiBC,GACjB4D,KAAKyS,OAAO7P,OAAOxG,KAI3B0hB,MAAO,SAASC,EAAQ7b,GACpB,IAAIb,EAAOrB,KAAKigB,UAAU/d,GAE1B,IAAK6b,EAAO3c,QAAQjH,EAAYkH,GAC5Ba,EAAEge,kBAIVC,KAAM,SAASpC,EAAQ7b,GACnB,IAAIb,EAAOrB,KAAKigB,UAAU/d,GAE1B,IAAK6b,EAAO3c,QAAQhH,EAAYiH,GAC5Ba,EAAEge,kBAIVE,IAAK,SAASrC,EAAQ7b,GAClB,IAAIb,EAAOrB,KAAKigB,UAAU/d,GAE1B6b,EAAO3c,QAAQ/G,EAAYgH,IAG/B4e,UAAW,SAAS/d,GAChB,IAAI5F,EAAU0D,KAAK1D,QAEnB,OAAO/E,EAAE2H,OAAOc,KAAKif,OAAQ,CACzBxjB,QAASyH,GAAahB,GACtBsa,KAAMhgB,EAAQF,EAAQ8iB,OAAS9iB,EAAQ8iB,MAAM5C,KAAO,GACpD/J,OAAQzS,KAAKyS,YAKzB9O,GAAkBqb,GAAM,CACpBK,KAAM,CACFlN,QAAS,KACTvO,KAAM3K,GAEVmmB,MAAO,CACH9B,SAAUzjB,EACVsY,QAAS,KACTrE,MAAO9U,EACP6c,OAAQ7c,GAEZ4mB,KAAM,CACFzN,QAAS,MAEbA,QAAS,KACTmL,SAAU1iB,GACVgY,OAAQ,IAhkBZ,IAmkBIyN,GAUAC,GAVwB,CACxB1C,OAAQ,SAAUA,EAAQtiB,GAAS,OAAOA,GAE1CilB,SAAU,SAAUjlB,GAAS,OAAOA,GAEpCklB,UAAW,SAAUllB,GAAS,OAAO,IAAIsF,KAAKtF,IAE9CmlB,SAAU,WAAc,OAAO,IAK/BC,GAAc1oB,EAAMkH,OAAO,IAQ/B,GAJAwhB,GAAY7gB,SAAW,SAASC,GAC5BwgB,GAAYxgB,GAGZ6E,OAAOiD,iBACPjD,OAAOiD,iBAAiB8Y,GAAa,CACjCC,eAAgB,CACZngB,IAAK,WACD,OAAO8f,OAMvB,IAAIM,GAAuB,uBAEvBC,GAAgB7oB,EAAMkH,OAAO,CAC7B8B,KAAM,SAAS8f,GACX9gB,KAAK+gB,aAAeD,GAGxBtB,KAAM,SAASwB,GACX,IAAI9Z,EAAS,GAAIxF,EAAMC,UAAU9F,OAAS,EAC1C,MAAQ6F,KAAQ,EAAIwF,EAAQxF,GAAQC,UAAWD,EAAM,GAErD,IAAIuf,EAAOjhB,KAAKihB,KAEhB,GAAI3jB,GAAS0jB,IAAiBA,EAAapb,MAAMlM,GAC7C,OAAOunB,EAAKrD,OAAOhc,MAAMqf,EAAM,CAAED,GAAe/a,OAAQiB,IAG5D,OAAO+Z,EAAKV,SAASrZ,EAAO,GAAI8Z,IAGpCE,WAAY,SAASF,EAAc9Z,EAAQia,GACvC,IAAIF,EAAOjhB,KAAKihB,KAChB,IAAI/iB,EAEJ,GAAIZ,GAAS0jB,IAAiBA,EAAapb,MAAMlM,GAC7CwE,EAAS8iB,EAAa9kB,QAAQ0kB,GAAsB,SAAShb,EAAO8B,EAAO0Z,GACvE,IAAI9lB,EAAQ4L,EAAOqR,SAAS7Q,EAAO,KAEnC,OAAOuZ,EAAKV,SAASjlB,EAAO8lB,EAAoBA,EAAkBC,UAAU,GAAK,GAAIF,UAGzFjjB,EAAS+iB,EAAKV,SAASrZ,EAAO,GAAI8Z,EAAcG,GAGpD,OAAOjjB,KAIf,GAAIyG,OAAOiD,iBACPjD,OAAOiD,iBAAiBiZ,GAAchZ,GAAI,CACtCoZ,KAAM,CACFzgB,IAAK,WACD,OAAOR,KAAK+gB,cAAgBL,GAAYC,gBAE5ChgB,IAAK,SAASrF,GACV0E,KAAK+gB,aAAezlB,MAMpC,IAAIgmB,GAAetpB,EAAMkH,OAAO,CAC5B8B,KAAM,SAASugB,EAAOrE,GAClB,GAAIA,SAAiB,EAAKA,EAAU,GAEpCld,KAAK+gB,aAAe7D,EAAQ4D,YAC5B9gB,KAAK6R,OAASqL,EAAQrL,QAAU0P,EAChCvhB,KAAK4d,OAAS,IAAIiD,GAAc3D,EAAQ4D,aACxC9gB,KAAKuhB,MAAQA,EACbvhB,KAAKwhB,IAAMC,QAAQvE,EAAQsE,MAG/BE,OAAQ,SAASjhB,EAAMY,GACnB,GAAIrB,KAAKuhB,MACLvhB,KAAKuhB,MAAMngB,QAAQX,EAAMY,IAIjCsgB,WAAY,SAASpV,GACjB,IAAIqV,IAAa5hB,KAAKuhB,OAAS,IAAIjlB,SAAW,IAAIslB,SAClD,OAAOA,GAAYA,EAASC,OAAStV,KAkBzCuV,GAdJ,GAAInd,OAAOiD,iBACPjD,OAAOiD,iBAAiB0Z,GAAazZ,GAAI,CACrCoZ,KAAM,CACFzgB,IAAK,WACD,OAAOR,KAAK+gB,cAAgBL,GAAYC,gBAE5ChgB,IAAK,SAASrF,GACV0E,KAAK+gB,aAAezlB,EACpB0E,KAAK4d,OAAOqD,KAAO3lB,MAQnC,IAAIymB,GAAmB/pB,EAAMkH,OAAO,IAchC8iB,IAVJD,GAAiBliB,SAAW,SAASC,GACjCgiB,GAAYhiB,GAGhBiiB,GAAiBjP,OAAS,SAASrX,EAASwmB,GACxC,GAAIH,GACA,OAAOA,GAAUhP,OAAOrX,EAASwmB,IAI1B,CACdX,aAAcA,GACdS,iBAAkBA,GAClBlB,cAAeA,GACfH,YAAaA,GACbzhB,gBAAiBA,KAGlB,SAASijB,GAAe5lB,EAAS6lB,GAC7B,IAAIC,EAAQ9lB,EAAQ8lB,MACpB,IAAIC,EAAQ/lB,EAAQ+lB,MACpB,IAAI/E,EAAWhhB,EAAQghB,SAEvB,IAAIgF,EAAO,IAAIxqB,EAAK,CAChByE,OAAQ,CACJE,MAAO0lB,EAAY1lB,MACnBoK,MAAOsb,EAAYtb,SAI3B,GAAIvK,EAAQkd,SACR8I,EAAKzL,OAAOuL,EAAO9E,GACdrM,OAAOmR,EAAQD,EAAYra,KAAMwV,QAEtCgF,EAAKzL,OAAOyG,EAAU+E,GACjBpR,OAAOqM,EAAU+E,EAAQF,EAAYra,MAG9C3L,GAAiBmmB,GAEjB,OAAOA,EAGX,SAASC,GAAmBjmB,EAASkmB,GACjC,IAAI3C,EAAYvjB,EAAQujB,UACxB,IAAI4C,EAAUnmB,EAAQmmB,QACtB,IAAInF,EAAWhhB,EAAQghB,SAEvB,IAAIsC,EAAO,IAAI9nB,EAAK,CAChByE,OAAQ,CACJE,MAAO+lB,EAAS/lB,MAChBoK,MAAO2b,EAAS3b,MAChBuP,SAAUoM,EAASpM,YAI3B,GAAI9Z,EAAQkd,SACRoG,EAAK/I,OAAOgJ,EAAWvC,GAClBrM,OAAOwR,EAASnF,QAErBsC,EAAK/I,OAAOyG,EAAUuC,GACjB5O,OAAOqM,EAAUmF,GAG1BtmB,GAAiByjB,GAEjB,OAAOA,EAGX,IAAI8C,GAAOxR,GAAahS,OAAO,CAC3B8B,KAAM,SAAS1E,EAASwV,GACpB,GAAIA,SAAsB,EAAKA,EAAe,IAAIwP,GAElDpQ,GAAarJ,GAAG7G,KAAKqP,KAAKrQ,KAAM1D,GAEhC0D,KAAK8R,aAAeA,EAEpB,IAAK9R,KAAK1D,QAAQ6V,QACdnS,KAAK1D,QAAU9D,EAAW,GAAIwH,KAAK1D,QAAS,CACxCqmB,OAAQ,CACJxQ,QAAS,OAEbyN,KAAM,CACFzN,QAAS,OAEboD,OAAQ,EACRqN,cAAe,EACfC,cAAe,IAIvB7iB,KAAK1D,QAAQwmB,WAAatqB,EAAW,GAAI,CACrCqO,MAAO7G,KAAK1D,QAAQsjB,KAAK/Y,MACzBpK,MAAOuD,KAAK1D,QAAQsjB,KAAKnjB,MACzB0V,QAASnS,KAAK1D,QAAQymB,gBAAkB7oB,GACzC8F,KAAK1D,QAAQwmB,WAAY,CACxBhb,KAAM9H,KAAK1D,QAAQumB,cACnB/U,MAAO9N,KAAK1D,QAAQymB,gBAGxB/iB,KAAK1D,QAAQ0mB,WAAaxqB,EAAW,GAAI,CACrCqO,MAAO7G,KAAK1D,QAAQsjB,KAAK/Y,MACzBpK,MAAOuD,KAAK1D,QAAQsjB,KAAKnjB,MACzB0V,QAASnS,KAAK1D,QAAQ2mB,gBAAkB/oB,GACzC8F,KAAK1D,QAAQ0mB,WAAY,CACxBlb,KAAM9H,KAAK1D,QAAQsmB,cACnB9U,MAAO9N,KAAK1D,QAAQ2mB,gBAGxBjjB,KAAKkjB,aAEL,IAAKljB,KAAK1D,QAAQ6mB,aACdnjB,KAAKojB,eAGTpjB,KAAKqjB,cACLrjB,KAAKsjB,eAGTJ,WAAY,aAGZK,YAAa,WACT,MAAO,CACHvf,IAAKhE,KAAK1D,QAAQqmB,OAAOa,KACzBjhB,IAAKvC,KAAKyjB,gBAIlBC,uBAAwB,SAASC,GAC7B,IAAIrW,EAAWqW,EAAarW,SAE5B,GAAI7P,GAAS6P,GAAW,CACpBqW,EAAa3F,cAAgB1Q,EAASQ,MACtC6V,EAAarW,SAAWA,EAAS9B,QAIzC4X,aAAc,WACV,IAAIthB,EAAS9B,KAEb,IAAI1D,EAAU0D,KAAK1D,QACnB,IAAIwR,EAAQxR,EAAQkd,SAAWhf,EAAQxB,EACvC,IAAI2qB,EAAenrB,EAAW,GAAK8D,EAAQqmB,OAAQ,CAC/C7U,MAAOA,EACP8E,OAAQtW,EAAQsW,SAEpB,IAAIgR,EAAOthB,KAAKC,IAAI,EAAGohB,EAAaC,MAEpC5jB,KAAK6jB,cAEL,GAAIF,EAAaxR,QAAS,CACtBnS,KAAK0jB,uBAAuBC,GAC5B,GAAIA,EAAarW,WAAa,OAAQ,CAClCqW,EAAarW,SAAW,EACxBhR,EAAQwnB,iBAAmB,KAG/B,IAAIC,EAAQ/jB,KAAKujB,cACjB,IAAK,IAAI3nB,EAAMmoB,EAAM/f,IAAKpI,EAAMmoB,EAAMxhB,IAAK3G,GAAOgoB,EAAM,CACpD,IAAII,EAAe,CAAEtc,MAAO9L,EAAKqoB,MAAOF,EAAMxhB,KAC9C,IAAI6c,EAAQtd,EAAOoiB,gBAAgBtoB,EAAK+nB,EAAcK,GACtD,GAAI5E,EAAO,CACPtd,EAAOc,OAAOwc,GACdtd,EAAO6gB,OAAOnjB,KAAK4f,OAMnCyE,YAAa,WACT7jB,KAAKmR,SAAW9R,GAAKW,KAAKmR,SAAU,SAAUwC,GAAS,QAASA,aAAiB4J,MACjFvd,KAAK2iB,OAAS,IAGlBwB,WAAY,WACR,IAAIriB,EAAS9B,KAEb,GAAIA,KAAK2d,MAAO,CACZ3d,KAAKmR,SAAW9R,GAAKW,KAAKmR,SAAU,SAAUwC,GAAS,OAAOA,IAAU7R,EAAO6b,QAC/E3d,KAAK2d,MAAQ1Z,YAIrB0D,MAAO,WACH3H,KAAK6jB,cACL7jB,KAAKmkB,cAGTC,QAAS,WACL,IAAI9iB,EAAMtB,KACV,IAAI1D,EAAUgF,EAAIhF,QAClB,IAAIyP,EAAMzK,EAAIyK,IACd,IAAIyN,EAAWld,EAAQkd,SACvB,IAAI6K,EAAS/nB,EAAQqmB,OAAO0B,OAC5B,IAAIC,EAAQD,EAAStY,EAAIJ,GAAKI,EAAIF,GAClC,IAAI0Y,EAAQF,EAAStY,EAAID,GAAKC,EAAIH,GAClC,IAAI4Y,EAAYloB,EAAQsjB,KAAKnjB,OAAS,EAEtC,OAAO+c,EACH,IAAIlO,EAAIgZ,EAAOvY,EAAIH,GAAI0Y,EAAOvY,EAAID,GAAK0Y,GACvC,IAAIlZ,EAAIS,EAAIJ,GAAI4Y,EAAOxY,EAAIF,GAAK2Y,EAAWD,IAGnDlB,YAAa,WACT,IAAI/mB,EAAU0D,KAAK1D,QACnB,IAAIohB,EAAellB,EAAW,CAC1B8U,SAAUhR,EAAQkd,UAAY,GAAK,EACnCgD,KAAM,GACN5J,OAAQ,EACR6R,WAAY,MACbnoB,EAAQqhB,OAEX,GAAID,EAAavL,SAAWuL,EAAalB,KAAM,CAC3C,IAAImB,EAAQ,IAAI7B,GAAQ4B,EAAalB,KAAMkB,GAC3C1d,KAAK4C,OAAO+a,GACZ3d,KAAK2d,MAAQA,IAIrB2F,YAAa,WACT,IAAIxhB,EAAS9B,KAEb,IAAI1D,EAAU0D,KAAK1D,QACnB,IAAIooB,EAAQpoB,EAAQooB,MACpB,IAAIC,EAAQD,EAAM3I,MAAQ,GAE1B/b,KAAK0kB,MAAQ,GAEb,IAAK,IAAIhoB,EAAI,EAAGA,EAAIioB,EAAM9oB,OAAQa,IAAK,CACnC,IAAI0H,EAAO5L,EAAW,GAAIksB,EAAOC,EAAMjoB,IACvC0H,EAAK9I,MAAQwG,EAAO8iB,eAAexgB,EAAK9I,OAExC,IAAIupB,EAAO,IAAI7F,GAAK,CAChB1jB,MAAO8I,EAAK9I,MACZkhB,KAAMpY,EAAKgb,MAAM5C,KACjB9H,SAAUtQ,GACXA,EAAMtC,EAAOgQ,cAEhB,GAAI+S,EAAKvoB,QAAQ6V,QAAS,CACtB,GAAI3V,EAAQqoB,EAAKvoB,QAAQghB,WACrB,GAAIhhB,EAAQkd,WAAatZ,GAAQ2kB,EAAKvoB,QAAQghB,SAAU,CAAExjB,EAAMU,IAC5DqqB,EAAKvoB,QAAQghB,SAAWhhB,EAAQwoB,QAAUhrB,EAAOU,OAC9C,IAAK8B,EAAQkd,WAAatZ,GAAQ2kB,EAAKvoB,QAAQghB,SAAU,CAAE1iB,GAAK7B,IACnE8rB,EAAKvoB,QAAQghB,SAAWhhB,EAAQwoB,QAAU/rB,EAAS6B,QAGvD,GAAI0B,EAAQkd,SACRqL,EAAKvoB,QAAQghB,SAAWhhB,EAAQwoB,QAAUhrB,EAAOU,OAEjDqqB,EAAKvoB,QAAQghB,SAAWhhB,EAAQwoB,QAAU/rB,EAAS6B,GAG3DkH,EAAOc,OAAOiiB,GACd/iB,EAAO4iB,MAAMllB,KAAKqlB,MAK9BD,eAAgB,SAAStpB,GACrB,OAAOA,GAGX4W,aAAc,WACVhB,GAAarJ,GAAGqK,aAAa7B,KAAKrQ,MAElCA,KAAK+kB,mBAGT3S,aAAc,WACVlB,GAAarJ,GAAGuK,aAAa/B,KAAKrQ,MAElCA,KAAK0Y,mBACL1Y,KAAK+f,cAGTiF,gBAAiB,WACb,IAAIC,EAAYjlB,KAAKklB,WACrB,IAAKD,EAAW,CACZA,EAAYjlB,KAAKklB,WAAa,IAAIntB,EAAM,CACpC6a,QAAS,IAEb5S,KAAK2S,aAAa3S,KAAKklB,YAG3B,OAAOD,GAGXE,YAAa,SAASC,GAClB,IAAI9oB,EAAU0D,KAAK1D,QACnB,IAAI8nB,EAAUpkB,KAAKokB,UACnB,IAAIC,EAAS/nB,EAAQqmB,OAAO0B,OAC5B,IAAIgB,EAAY/oB,EAAQ0mB,WAAW7Q,QAAU7V,EAAQ+oB,UAAY,EACjE,IAAIC,EAAkB,CAGlB9L,SAAUld,EAAQkd,UAGtB,SAAS0F,EAAOqG,EAAepD,EAAaqD,GACxC,IAAIvB,EAAQsB,EAAc1pB,OAC1B,IAAI+nB,EAAOthB,KAAKC,IAAI,EAAG4f,EAAYyB,MAEnC,GAAIzB,EAAYhQ,QACZ,IAAK,IAAIzV,EAAIylB,EAAYqB,KAAM9mB,EAAIunB,EAAOvnB,GAAKknB,EAAM,CACjD,GAAIpnB,EAAQgpB,IAAc9oB,EAAI8oB,IAAa,EACvC,SAGJF,EAAgBlD,MAAQiC,EAASD,EAAQvY,GAAKuY,EAAQvY,GAAKsW,EAAYra,KACvEwd,EAAgBjD,MAAQgC,EAASD,EAAQxY,GAAKuW,EAAYra,KAAOsc,EAAQxY,GACzE0Z,EAAgBhI,SAAWiI,EAAc7oB,GAEzC0oB,EAAUxiB,OAAOsf,GAAeoD,EAAiBnD,KAK7DjD,EAAOlf,KAAKylB,wBAAyBnpB,EAAQ0mB,YAC7C9D,EAAOlf,KAAK0lB,wBAAyBppB,EAAQwmB,WAAYuC,EAAY/oB,EAAQqpB,YAGjF5F,WAAY,WACR,IAAIzjB,EAAU0D,KAAK1D,QACnB,IAAIsjB,EAAOtjB,EAAQsjB,KACnB,IAAIwE,EAAUpkB,KAAKokB,UAEnB,GAAIxE,EAAKnjB,MAAQ,GAAKmjB,EAAKzN,QAAS,CAChC,IAAI/V,EAAO,IAAItE,EAAK,CAChByE,OAAQ,CACJE,MAAOmjB,EAAKnjB,MACZoK,MAAO+Y,EAAK/Y,MACZuP,SAAUwJ,EAAKxJ,YAQvBha,EAAKya,OAAOuN,EAAQzY,GAAIyY,EAAQxY,IAC3BqF,OAAOmT,EAAQvY,GAAIuY,EAAQtY,IAEhC,GAAIxP,EAAQspB,YACRzpB,GAAiBC,GAGrB,IAAIue,EAAQ3a,KAAK6lB,WAAa,IAAI9tB,EAClC4iB,EAAM/X,OAAOxG,GAEb4D,KAAKyS,OAAO7P,OAAO+X,GACnB3a,KAAKmlB,YAAYxK,KAIzBmL,kBAAmB,WACf,IAAIxpB,EAAU0D,KAAK1D,QACnB,IAAIypB,EAAW,EAEf,GAAIzpB,EAAQ0mB,WAAW7Q,SAAW7V,EAAQwmB,WAAW3Q,QACjD4T,EAAWzjB,KAAKC,IAAIjG,EAAQ0mB,WAAWlb,KAAMxL,EAAQwmB,WAAWhb,WAC7D,GAAIxL,EAAQ0mB,WAAW7Q,QAC1B4T,EAAWzpB,EAAQ0mB,WAAWlb,UAC3B,GAAIxL,EAAQwmB,WAAW3Q,QAC1B4T,EAAWzpB,EAAQwmB,WAAWhb,KAGlC,OAAOie,GAGXrN,iBAAkB,WACd,IAAIpX,EAAMtB,KACV,IAAI1D,EAAUgF,EAAIhF,QAClB,IAAIyP,EAAMzK,EAAIyK,IACd,IAAIkK,EAAa3Z,EAAQ2Z,WAEzB,GAAIA,EAAY,CACZjW,KAAKgmB,gBAAkBluB,EAAKoe,SAASnK,EAAI6B,SAAU,CAC/C2G,KAAM,CACF1N,MAAOoP,GAEX1Z,OAAQ,OAGZyD,KAAKyS,OAAO7P,OAAO5C,KAAKgmB,mBAIhCjB,gBAAiB,WACb,IAAIjjB,EAAS9B,KAEb,IAAI1D,EAAU0D,KAAK1D,QACnB,IAAI2pB,EAAY3pB,EAAQ2pB,WAAa,GACrC,IAAIzM,EAAWld,EAAQkd,SACvB,IAAI0M,EAAWlmB,KAAKkmB,SAEpB,GAAID,EAAUpqB,SAAW,EACrB,OAGJ,IAAI8e,EAAQ3a,KAAKmmB,eAAiB,IAAIpuB,EAAM,CACxC6a,QAAS,IAGb,IAAIwT,EAAU/mB,GAAKW,KAAKqmB,KAAKC,KAAM,SAAU/Z,GAAQ,OAAOA,EAAKjQ,QAAQkd,WAAa1X,EAAOxF,QAAQkd,WAAa,GAElH,IAAK,IAAI5d,EAAM,EAAGA,EAAMqqB,EAAUpqB,OAAQD,IAAO,CAC7C,IAAIwI,EAAO6hB,EAAUrqB,GACrB,IAAI2qB,OAAc,EAAIC,OAAc,EACpC,IAAI7C,EAAevf,EAAKgb,MACxB,IAAIA,OAAc,EAElB,GAAI5F,EAAU,CACV+M,GAASH,GAAWF,EAAS5B,OAAOF,UACpCoC,EAAQ1kB,EAAO2kB,QAAQriB,EAAK8D,KAAM9D,EAAKsiB,GAAI,UACxC,CACHH,EAAQzkB,EAAO2kB,QAAQriB,EAAK8D,KAAM9D,EAAKsiB,GAAI,MAC3CF,GAASJ,GAAWF,EAAS3B,OAAOH,UAGxC,GAAIT,EAAc,CACdA,EAAa9N,OAAS8N,EAAarG,UAAYxjB,EAC/CslB,EAAQtd,EAAO6kB,oBACXhD,EACAvf,EACA,IAAIkH,EACAib,EAAM5a,GACN6a,EAAM5a,GACN2a,EAAM1a,GACN2a,EAAM1a,KAMlB,GAAIya,EAAM9pB,UAAY,GAAK+pB,EAAMxa,WAAa,EAAG,CAC7C,IAAI4a,EAAW,IAAIzuB,EACf,CAAEouB,EAAM5a,GAAI6a,EAAM5a,IAClB,CAAE2a,EAAM9pB,QAAS+pB,EAAMxa,WAG3B,IAAI5P,EAAOtE,EAAKoe,SAAS0Q,EAAU,CAC/BrS,KAAM,CACF1N,MAAOzC,EAAKyC,MACZsN,QAAS/P,EAAK+P,SAElB5X,OAAQ,OAGZoe,EAAM/X,OAAOxG,GACb,GAAIgjB,EACAzE,EAAM/X,OAAOwc,IAKzBpf,KAAK2S,aAAagI,IAGtBgM,oBAAqB,SAASvH,EAAOhb,EAAM2H,GAEvC,GAAIqT,EAAMjN,UAAY,MAClB,OAAO,KAGX,IAAIqK,EAAO4C,EAAM5C,KACjB,IAAIqK,EAEJ,GAAIrqB,EAAQ4iB,IAAUA,EAAMjN,QAAS,CACjC,IAAI2U,EAAgB3nB,GAAYigB,GAChC,GAAI0H,EACAtK,EAAOsK,EAAc,CAAEtK,KAAMA,EAAMpY,KAAMA,SACtC,GAAIgb,EAAMxB,OACbpB,EAAOxc,KAAK8R,aAAa8L,OAAO4B,KAAKJ,EAAMxB,OAAQpB,GAGvD,IAAK4C,EAAMvY,MACPuY,EAAMvY,MAAQ7G,KAAK1D,QAAQqmB,OAAO9b,MAI1CggB,EAAU,IAAI/K,GAAQU,EAAM4C,GAC5ByH,EAAQxV,OAAOtF,GACf8a,EAAQ3U,eAER,OAAO2U,EAAQpU,QAGnBsU,gBAAiB,SAASX,GACtB,IAAI9pB,EAAU0D,KAAK1D,QACnB,IAAI0qB,EAAiB1qB,EAAQ0qB,eAC7B,IAAIC,EAAiB3qB,EAAQ2qB,eAC7B,IAAItB,EAAYrpB,EAAQqpB,UACxB,IAAInM,EAAWld,EAAQkd,SACvB,IAAI0N,EAAkBd,EAAQ9pB,QAAQsjB,KAAKzN,QAC3C,IAAIkT,EAAY4B,EAAe9U,QAAU7V,EAAQ+oB,UAAY,EAC7D,IAAIjB,EAAUgC,EAAQhC,UACtB,IAAI+C,EAAU/C,EAAQ5K,EAAW,KAAO,MACxC,IAAI4N,EAAc,CACdvH,UAAWuE,EAAQ5K,EAAW,KAAO,MACrCiJ,QAAS2B,EAAQ5K,EAAW,KAAO,MACnCA,SAAUA,GAEd,IAAIwJ,EAAa,GAEjB,IAAI1G,EAAYtc,KAAKglB,kBAErB,SAAS9F,EAAOqG,EAAe/C,EAAUgD,GACrC,IAAIvB,EAAQsB,EAAc1pB,OAC1B,IAAI+nB,EAAOthB,KAAKC,IAAI,EAAGigB,EAASoB,MAEhC,GAAIpB,EAASrQ,QACT,IAAK,IAAIzV,EAAI8lB,EAASgB,KAAM9mB,EAAIunB,EAAOvnB,GAAKknB,EAAM,CAC9C,IAAItQ,EAAMzW,EAAM0oB,EAAc7oB,IAC9B,IAAKwD,GAAQoT,EAAK0P,GACd,GAAItmB,EAAI8oB,IAAa,KAAO0B,GAAmBC,IAAY7T,GAAM,CAC7D8T,EAAY9J,SAAWhK,EACvBgJ,EAAU1Z,OAAO2f,GAAmB6E,EAAa5E,IAEjDQ,EAAWxjB,KAAK8T,KAOpC4L,EAAOlf,KAAKylB,wBAAyBwB,GACrC/H,EAAOlf,KAAK0lB,wBAAyBsB,EAAgB3B,EAAYM,GAEjE,OAAOrJ,EAAUnL,UAGrBE,OAAQ,SAAStF,GACb,IAAIzK,EAAMtB,KACV,IAAI1D,EAAUgF,EAAIhF,QAClB,IAAIqmB,EAASrhB,EAAIqhB,OACjB,IAAIhF,EAAQrc,EAAIqc,MAChB,IAAInE,EAAWld,EAAQkd,SACvB,IAAIyK,EAAQtB,EAAO9mB,OACnB,IAAIwrB,EAAS7N,EAAWxe,GAAQrB,EAChC,IAAI2tB,EAAY3J,EAAQA,EAAM5R,IAAIsb,KAAY,EAC9C,IAAIE,EAAQvnB,KAAK8lB,oBAAsBxpB,EAAQiZ,OAAS+R,EACxD,IAAIE,GAAWxnB,KAAKyR,WAAa,IAAI1F,KAAOA,EAC5C,IAAI0b,EAAUD,EAAQH,KACtB,IAAIK,EAAe,EAEnB,IAAK,IAAIhrB,EAAI,EAAGA,EAAIunB,EAAOvnB,IAAK,CAC5B,IAAIirB,EAAYhF,EAAOjmB,GAAGqP,IAAIsb,KAC9B,GAAIM,EAAYJ,GAASE,EACrBC,EAAeplB,KAAKC,IAAImlB,EAAcC,GAI9C,GAAInO,EACAxZ,KAAK+L,IAAM,IAAIT,EACXS,EAAIJ,GAAII,EAAIH,GACZG,EAAIJ,GAAK+b,EAAeH,EAAOxb,EAAID,SAGvC9L,KAAK+L,IAAM,IAAIT,EACXS,EAAIJ,GAAII,EAAIH,GACZG,EAAIF,GAAIE,EAAIH,GAAK8b,EAAeH,GAIxCvnB,KAAK4nB,eACL5nB,KAAK6nB,gBACL7nB,KAAK8nB,gBAGTC,uBAAwB,WACpB,OAAO/nB,KAAKylB,yBAGhBuC,eAAgB,SAAS5I,GACrB,OAAOA,EAAM1X,OAGjBmgB,cAAe,WACX,IAAI/lB,EAAS9B,KAEb,IAAIsB,EAAMtB,KACV,IAAI1D,EAAUgF,EAAIhF,QAClB,IAAIqmB,EAASrhB,EAAIqhB,OACjB,IAAIsF,EAAqBjoB,KAAKioB,qBAC9B,IAAIzO,EAAWld,EAAQkd,SACvB,IAAI6K,EAAS/nB,EAAQqmB,OAAO0B,OAC5B,IAAIkB,EAAgBvlB,KAAK+nB,yBAEzB,IAAK,IAAInsB,EAAM,EAAGA,EAAM+mB,EAAO9mB,OAAQD,IAAO,CAC1C,IAAIwjB,EAAQuD,EAAO/mB,GACnB,IAAIssB,EAASpmB,EAAOkmB,eAAe5I,GACnC,IAAIuI,EAAYnO,EAAW4F,EAAMrT,IAAIC,SAAWoT,EAAMrT,IAAItP,QAC1D,IAAI0rB,EAAoB5C,EAAc2C,GACtC,IAAIE,EAAmB7C,EAAc2C,EAAS,GAC9C,IAAIG,OAAsB,EAAIC,OAAoB,EAElD,GAAI9O,EAAU,CACV,GAAIyO,EAAoB,CACpB,IAAI3Z,EAAS6Z,GAAqBC,EAAmBD,GAAqB,EAC1EE,EAAgB/Z,EAAUqZ,EAAY,OAEtCU,EAAgBF,EAAqBR,EAAY,EAGrDW,EAAcD,OAEd,GAAIJ,EAAoB,CACpBI,EAAgBF,EAChBG,EAAcF,MACX,CACHC,EAAgBF,EAAqBR,EAAY,EACjDW,EAAcD,EAAgBV,EAItC7lB,EAAOymB,cAAcnJ,EAAOiF,EAAQgE,EAAeC,KAI3DC,cAAe,SAASnJ,EAAOiF,EAAQgE,EAAeC,GAClD,GAAIA,SAAqB,EAAKA,EAAcD,EAE5C,IAAI/rB,EAAU0D,KAAK1D,QACnB,IAAIkd,EAAWld,EAAQkd,SACvB,IAAI4K,EAAUpkB,KAAKokB,UACnB,IAAIoE,EAAcxoB,KAAK8lB,oBAAsBxpB,EAAQiZ,OACrD,IAAIkT,EAEJ,GAAIjP,EAAU,CACV,IAAIkP,EAAStE,EAAQvY,GAErB,GAAIwY,EAAQ,CACRqE,GAAUF,EACVpJ,EAAM9iB,QAAQ6hB,eAAiBrkB,MAC5B,CACH4uB,GAAUF,EAAcpJ,EAAMrT,IAAItP,QAClC2iB,EAAM9iB,QAAQ6hB,eAAiB3jB,EAGnCiuB,EAAWrJ,EAAMrT,IAAIE,KAAKyc,EAAQL,OAC/B,CACH,IAAIM,EAASvE,EAAQxY,GAErB,GAAIyY,EAAQ,CACRsE,GAAUH,EAAcpJ,EAAMrT,IAAIC,SAClCoT,EAAM9iB,QAAQ6hB,eAAiBplB,MAC5B,CACH4vB,GAAUH,EACVpJ,EAAM9iB,QAAQ6hB,eAAiBvjB,GAGnC6tB,EAAW,IAAInd,EACX+c,EAAeM,EACfL,EAAaK,EAASvJ,EAAMrT,IAAIC,UAIxCoT,EAAM/N,OAAOoX,IAGjBG,qBAAsB,SAASH,EAAUI,GACrC,GAAIJ,EAAShsB,QAAUosB,EACnB,OAAO,EAGX,GAAIJ,EAASzc,SAAW6c,EACpB,OAAQ,GAGZ,OAAQ,IAGZ/E,iBAAkB,WACd,IAAIhiB,EAAS9B,KAEb,IAAKA,KAAK1D,QAAQwnB,kBAAoB9jB,KAAK1D,QAAQkd,SAC/C,OAAO,MAGX,IAAI+L,EAAgBvlB,KAAKylB,wBACzB,IAAI9C,EAAS3iB,KAAK2iB,OAClB,IAAImG,EAAQxmB,KAAK0B,IAAI2e,EAAO9mB,OAAQ0pB,EAAc1pB,OAAS,GAC3D,IAAI2P,EAAQ,EAEZ,IAAK,IAAI5P,EAAM,EAAGA,EAAMktB,EAAOltB,IAAO,CAClC,IAAIa,EAAQ6F,KAAKsH,IAAI2b,EAAc3pB,EAAM,GAAK2pB,EAAc3pB,IAC5D,IAAI6sB,EAAW9F,EAAO/mB,GAAKmQ,IAC3B,IAAIgd,EAAajnB,EAAO8mB,qBAAqBH,EAAUhsB,GAEvD,GAAIssB,IAAe,EACfvd,EAAQud,EAGZ,GAAIvd,KAAW,GACX,MAIR,GAAIA,IAAU,EAAG,CACb,IAAK,IAAIwd,EAAQ,EAAGA,EAAQrG,EAAO9mB,OAAQmtB,IAAS,CAChDrG,EAAOqG,GAAO1sB,QAAQgR,SAAW9B,EACjCmX,EAAOqG,GAAO3X,OAAO,IAAI/F,GAG7B,OAAO,OAIfsc,aAAc,WACV,IAAItmB,EAAMtB,KACV,IAAI1D,EAAUgF,EAAIhF,QAClB,IAAIqhB,EAAQrc,EAAIqc,MAChB,IAAI0G,EAAS/nB,EAAQqmB,OAAO0B,OAC5B,IAAI7K,EAAWld,EAAQkd,SAEvB,GAAImE,EAAO,CACP,GAAInE,EAAU,CACVmE,EAAMrhB,QAAQwR,MAAQuW,EAAS7pB,EAAQV,EACvC6jB,EAAMrhB,QAAQuZ,OAAS8H,EAAMrhB,QAAQghB,aAClC,CACHK,EAAMrhB,QAAQwR,MAAQ6P,EAAMrhB,QAAQghB,SACpCK,EAAMrhB,QAAQuZ,OAASwO,EAASzpB,GAAM7B,EAG1C4kB,EAAMtM,OAAOrR,KAAK+L,OAI1B+b,aAAc,WACV,IAAIhmB,EAAS9B,KAEb,IAAK,IAAIpE,EAAM,EAAGA,EAAMoE,KAAK0kB,MAAM7oB,OAAQD,IAAO,CAC9C,IAAIwI,EAAOtC,EAAO4iB,MAAM9oB,GACxB,IAAIN,EAAQ8I,EAAK9H,QAAQhB,MACzB,IAAI2tB,OAAa,EAEjB,GAAIzsB,EAAQlB,GAAQ,CAChB,GAAIwG,EAAOonB,iBAAiB5tB,GACxB8I,EAAK8P,YAEL9P,EAAK+a,OAGT8J,EAAOnnB,EAAOqnB,SAAS7tB,QAEvB8I,EAAK+a,OAGT/a,EAAKiN,OAAO4X,GAAQnnB,EAAOsiB,aAInC+E,SAAU,SAAS7tB,GACf,OAAO0E,KAAKymB,QAAQnrB,IAGxBkR,QAAS,SAAS4c,GACd,IAAIhF,EAAUgF,EAAWhF,UACzB,IAAI5K,EAAWxZ,KAAK1D,QAAQkd,SAC5B,IAAIlG,EAAMkG,EAAWte,EAAID,EAEzB+E,KAAK+L,IAAIO,OAAO8X,EAAS9Q,GACzB,GAAIkG,EACAxZ,KAAK+L,IAAIW,OAAO,EAAG1M,KAAKokB,UAAUpY,SAAWoY,EAAQpY,eAErDhM,KAAK+L,IAAIW,OAAO1M,KAAKokB,UAAU3nB,QAAU2nB,EAAQ3nB,QAAS,GAE9DuD,KAAK+L,IAAIuH,EAAM,IAAMtT,KAAKokB,UAAU9Q,EAAM,GAAK8Q,EAAQ9Q,EAAM,GAC7DtT,KAAK+L,IAAIuH,EAAM,IAAMtT,KAAKokB,UAAU9Q,EAAM,GAAK8Q,EAAQ9Q,EAAM,IAGjE+V,cAAe,SAAS/tB,EAAOgB,EAAS4gB,GACpC,IAAIpb,EAAS9B,KAEb,IAAIwc,EACJ,IAAI8M,EAAOnqB,GAAY7C,GACvB,IAAIitB,EAAc,WACd,IAAKjtB,EAAQshB,OACT,OAAOtiB,EAGX,OAAOwG,EAAOgQ,aAAa8L,OAAOsD,WAC9B5kB,EAAQshB,OAAQ,CAAEtiB,GAASgB,EAAQuhB,UAI3C,GAAIyL,EAAM,CACN,IAAIE,EAAkBjyB,EAAE2H,OAAO,GAAIge,EAAS,CACxCV,WAAa,OAAO+M,KACpBjuB,MAAOA,EACPsiB,OAAQthB,EAAQshB,OAChBC,QAASvhB,EAAQuhB,UAGrBrB,EAAO8M,EAAKE,QAEZhN,EAAO+M,IAGX,OAAO/M,GAGXyM,KAAM,SAAS/gB,EAAOwe,EAAIoC,GACtB,IAAIG,EAAOjpB,KAAKymB,QAAQve,EAAMwe,EAAIoC,GAClC,GAAIG,EACA,OAAOA,EAAKrb,UAIpBmI,WAAY,WACR,IAAIhK,EAAM/L,KAAK+L,IAAI5B,QACnB,IAAIwY,EAAS3iB,KAAK2iB,OAClB,GAAIA,EAAO9mB,OAAQ,CACf,IAAI0Q,EAAOvM,KAAK1D,QAAQkd,SAAWte,EAAID,EACvC,GAAI+E,KAAK8R,aAAa6P,WAAWpV,GAAO,CACpC,IAAIlQ,EAAS2D,KAAKypB,iBAClB1d,EAAIQ,EAAO,IAAMlQ,EAAO+D,MACxB2L,EAAIQ,EAAO,IAAMlQ,EAAOgE,QACrB,CACH,GAAIsiB,EAAO,GAAGrmB,QAAQ6V,QAClBpG,EAAIG,KAAKyW,EAAO,GAAG5W,KAEvB,IAAI2d,EAAY/G,EAAOA,EAAO9mB,OAAS,GACvC,GAAI6tB,EAAUptB,QAAQ6V,QAClBpG,EAAIG,KAAKwd,EAAU3d,MAK/B,OAAOA,GAGX0d,eAAgB,WACZ,IAAI3nB,EAAS9B,KAEb,IAAIsB,EAAMtB,KAAK1D,QACf,IAAIkd,EAAWlY,EAAIkY,SACnB,IAAIsL,EAAUxjB,EAAIwjB,QAClB,IAAImD,EAAqBjoB,KAAKioB,qBAC9B,IAAI1C,EAAgBvlB,KAAK+nB,yBACzB,IAAI4B,EAAcnQ,EAAWte,EAAID,EACjC,IAAI0nB,EAAS3iB,KAAK2iB,OAClB,IAAIiH,EAAgB9E,EAAU,EAAI,EAClC,IAAI+E,EAAc/E,EAAU,EAAI,EAChC,IAAIgF,EAAiB,EACrB,IAAIC,EAAe,EAEnB,IAAK,IAAInuB,EAAM,EAAGA,EAAM+mB,EAAO9mB,OAAQD,IAAO,CAC1C,IAAIwjB,EAAQuD,EAAO/mB,GACnB,IAAIssB,EAASpmB,EAAOkmB,eAAe5I,GACnC,IAAI4K,OAAkB,EAAIC,OAAgB,EAE1C,GAAIhC,EAAoB,CACpB+B,EAAYzE,EAAc2C,EAAS0B,GACnCK,EAAU1E,EAAc2C,EAAS2B,QAEjCG,EAAYC,EAAU1E,EAAc2C,GAGxC4B,EAAiBxnB,KAAKC,IAAIunB,EAAgBE,EAAY5K,EAAMrT,IAAI4d,EAAc,IAC9EI,EAAeznB,KAAKC,IAAIwnB,EAAc3K,EAAMrT,IAAI4d,EAAc,GAAKM,GAGvE,MAAO,CACH7pB,MAAO0pB,EACPzpB,IAAK0pB,IAIbG,WAAY,SAAShiB,EAAMwe,EAAI1iB,EAAKzB,EAAKlG,GACrC,IAAIC,EAAU0D,KAAK1D,QAEnB,GAAK4L,EAAOlE,GAAO3H,EAAS,KAAOG,EAAQF,EAAQ0H,MAAQ1H,EAAQ0H,KAAOA,IAAUzB,EAAMmkB,GAAMrqB,EAAS,KAAOG,EAAQF,EAAQiG,MAAQA,GAAOjG,EAAQiG,KACnJ,OAAO,KAGX,GAAKmkB,EAAK1iB,GAAO3H,EAAS,GAAOkG,EAAM2F,GAAQ7L,EAAS,EACpD,MAAO,CACH2H,IAAKkE,EACL3F,IAAKmkB,GAIb,IAAIyD,EAAYzD,EAAKxe,EACrB,IAAIkiB,EAAWliB,EACf,IAAImiB,EAAW3D,EAEf,GAAIxe,EAAOlE,GAAO3H,EAAS,EAAG,CAC1B+tB,EAAW/mB,EAAW6E,EAAMlE,EAAKzB,GACjC8nB,EAAWhnB,EAAW6E,EAAOiiB,EAAWnmB,EAAMmmB,EAAW5nB,QACtD,GAAImkB,EAAKnkB,GAAOlG,EAAS,EAAG,CAC/BguB,EAAWhnB,EAAWqjB,EAAI1iB,EAAKzB,GAC/B6nB,EAAW/mB,EAAWqjB,EAAKyD,EAAWnmB,EAAKzB,EAAM4nB,GAGrD,MAAO,CACHnmB,IAAKomB,EACL7nB,IAAK8nB,IAIbC,WAAY,WACR,MAAO,CACHtmB,IAAKhE,KAAKuqB,UACVhoB,IAAKvC,KAAKwqB,YAIlBC,QAAS,WAOL,IAAInpB,EAAMtB,KAAK1D,QACf,IAAIkd,EAAWlY,EAAIkY,SACnB,IAAIsL,EAAUxjB,EAAIwjB,QAClB,OAAQtL,GAAY,EAAI,IAAMsL,GAAW,EAAI,IAGjD4F,SAAU,WACN,IAAIppB,EAAMtB,KAAK1D,QACf,IAAIkd,EAAWlY,EAAIkY,SACnB,IAAI4K,EAAUpkB,KAAKokB,UACnB,IAAIuG,EAAWnR,EAAW4K,EAAQpY,SAAWoY,EAAQ3nB,QACrD,IAAI8P,EAAOiN,EAAWte,EAAID,EAC1B,IAAI2vB,EAAU5qB,KAAKyqB,UACnB,IAAII,EAAYD,IAAY,EAAI,EAAI,EACpC,IAAIE,EAAave,EAAOse,EAAUtK,WAClC,IAAIV,EAAYuE,EAAQ0G,GAExB,MAAO,CACHve,KAAMA,EACNue,WAAYA,EACZF,QAASA,EACTxG,QAASA,EACTuG,SAAUA,EACV9K,UAAWA,IAInBkL,YAAa,SAAS1gB,GAClB,IAAI/I,EAAMtB,KAAK0qB,WACf,IAAIne,EAAOjL,EAAIiL,KACf,IAAIqe,EAAUtpB,EAAIspB,QAClB,IAAIE,EAAaxpB,EAAIwpB,WACrB,IAAI1G,EAAU9iB,EAAI8iB,QAClB,IAAIuG,EAAWrpB,EAAIqpB,SACnB,IAAIK,EAAWJ,EAAU,EAAIvgB,EAAMkC,GAAQ6X,EAAQ0G,GAAc1G,EAAQ0G,GAAczgB,EAAMkC,GAC7F,IAAIlQ,EAAS2uB,EAAWL,EAExB,OAAOtuB,GAGX4uB,aAAc,SAASC,EAAUnH,GAG7B,IAAIoH,EAAY,KAChB,IAAIthB,EAAQxG,EAAW6nB,GAAWC,EAAWA,GAE7C,IAAIhpB,EACJ,GAAI0H,EAAQ,EACR1H,EAAQ4hB,EAAQzhB,KAAK0B,IAAI,EAAG6F,QAE5B1H,EAAQ4hB,EAASA,GAAS,EAAIla,GAGlC,OAAO1H,GAGX8lB,mBAAoB,WAChB,OAAQjoB,KAAK1D,QAAQ8uB,WAGzBC,mBAAoB,eA8DpBC,IA1DJ3nB,GAAkB+e,GAAM,CACpBC,OAAQ,CACJxQ,QAAS,KACT7E,SAAU,EACV+W,OAAQ,MACRT,KAAM,EACNJ,KAAM,GAEV5D,KAAM,CACFnjB,MAAO,EACPoK,MAAO/N,EACPqZ,QAAS,MAEbwL,MAAO,CACHxL,QAAS,KACTmL,SAAUtkB,GAEdgqB,WAAY,CACRlV,MAAOvT,EACPuN,KAAM,EACN0b,KAAM,EACNI,KAAM,GAEVd,WAAY,CACRhV,MAAOvT,EACPuN,KAAM,EACN0b,KAAM,EACNI,KAAM,GAEV2H,kBAAmB,EACnBtI,cAAe1oB,EACfwoB,cAAe7oB,EACf+sB,eAAgB,CACZzD,KAAM,EACNI,KAAM,GAEVoD,eAAgB,CACZ7U,QAAS,MACT1V,MAAO,EACPoK,MAAO/N,EACP0qB,KAAM,EACNI,KAAM,GAGVrO,OAAQ,EACRpD,QAAS,KACT2S,QAAS,MACTsG,UAAW,KACX1G,MAAO,CACHtF,MAAO,CACH5C,KAAM,KAIdoJ,YAAa,KACbzC,aAAc,QAGC,gBACfqI,GAAU,UACVC,GAAU,UACVC,GAAQ,QACRC,GAAO,OACPC,GAAQ,QACRC,GAAS,SACTC,GAAQ,QAERC,GACAC,GAAkB,IAClBC,GAAkB,GAAKD,GACvBE,GAAgB,GAAKD,GACrBE,GAAe,GAAKD,GACpBE,GAAgB,EAAID,GACpBE,GAAiB,GAAKF,GACtBG,GAAgB,IAAMH,GACtBI,GAAgB,CAChBC,MAASF,GACTG,OAAUJ,GACVK,MAASN,GACTO,KAAQR,GACRS,MAASV,GACTW,QAAWZ,GACXa,QAAWd,GACXe,aAhBuB,GAmB3B,SAASC,GAAiB/hB,EAAGxE,GACzB,IAAIkD,EAAOsB,EAAEpK,UAAY4F,EACzB,IAAIwmB,EAAahiB,EAAEiiB,oBAAsBzmB,EAAEymB,oBAE3C,OAAOvjB,EAAQsjB,EAAahB,GAGhC,SAASkB,GAASC,EAAMC,GACpB,OAAO,IAAIzsB,KAAKwsB,EAAKvsB,UAAYwsB,GAGrC,SAASC,EAAOhyB,GACZ,IAAI4C,EAEJ,GAAI5C,aAAiBsF,KACjB1C,EAAS5C,OACN,GAAIA,EACP4C,EAAS,IAAI0C,KAAKtF,GAGtB,OAAO4C,EAGX,SAASqvB,GAAYH,EAAMI,GACvB,GAAIA,SAAsB,EAAKA,EAAe,EAE9C,IAAIC,EAAiB,EACrB,IAAIC,EAAMN,EAAKO,SAEf,IAAKtwB,MAAMqwB,GACP,MAAOA,IAAQF,EAAc,CACzB,GAAIE,IAAQ,EACRA,EAAM,OAENA,IAGJD,IAIR,OAAON,GAASC,GAAOK,EAAiBtB,IAG5C,SAASyB,GAAUR,EAAMR,GACrB,GAAIA,IAAU,GAAKQ,EAAKS,aAAe,GAAI,CACvCT,EAAKU,SAASV,EAAKS,WAAa,GAChC,OAAO,KAGX,OAAO,MAGX,SAASE,GAASX,EAAMR,GACpB,IAAIoB,EAAc,IAAIptB,KAAKwsB,GAE3BY,EAAYC,WAAW,EAAG,EAAG,GAE7B,IAAIC,GAAUd,EAAKF,oBAAsBc,EAAYd,qBAAuBjB,GAE5E,OAAOkB,GAASa,EAAaE,EAAStB,EAAQV,IAGlD,SAASiC,GAAYC,EAAW9yB,EAAOuK,EAAM2nB,GACzC,IAAItvB,EAASkwB,EAEb,GAAIA,EAAW,CACX,IAAIhB,EAAOE,EAAOc,GAClB,IAAIxB,EAAQQ,EAAKS,WAEjB,GAAIhoB,IAASimB,GAAO,CAChB5tB,EAAS,IAAI0C,KAAKwsB,EAAKiB,cAAgB/yB,EAAO,EAAG,GACjDsyB,GAAU1vB,EAAQ,QACf,GAAI2H,IAASgmB,GAAQ,CACxB3tB,EAAS,IAAI0C,KAAKwsB,EAAKiB,cAAejB,EAAKkB,WAAahzB,EAAO,GAC/DsyB,GAAU1vB,EAAQ0uB,QACf,GAAI/mB,IAAS+lB,GAAO,CACvB1tB,EAASiwB,GAAYZ,GAAYH,EAAMI,GAAelyB,EAAQ,EAAGqwB,IACjEiC,GAAU1vB,EAAQ0uB,QACf,GAAI/mB,IAAS8lB,GAAM,CACtBztB,EAAS,IAAI0C,KAAKwsB,EAAKiB,cAAejB,EAAKkB,WAAYlB,EAAKmB,UAAYjzB,GACxEsyB,GAAU1vB,EAAQ0uB,QACf,GAAI/mB,IAAS6lB,GAChBxtB,EAAS6vB,GAASX,EAAM9xB,QACrB,GAAIuK,IAAS4lB,GAAS,CACzBvtB,EAASivB,GAASC,EAAM9xB,EAAQ2wB,IAEhC,GAAI/tB,EAAOswB,aAAe,EACtBtwB,EAAOuwB,WAAW,QAEnB,GAAI5oB,IAAS2lB,GAChBttB,EAASivB,GAASC,EAAM9xB,EAAQ0wB,SAC7B,GAAInmB,IAASylB,GAChBptB,EAASivB,GAASC,EAAM9xB,GAG5B,GAAIuK,IAASylB,IAAgBptB,EAAOwwB,kBAAoB,EACpDxwB,EAAOywB,gBAAgB,GAI/B,OAAOzwB,EAGX,SAAS0wB,GAAUxB,EAAMvnB,EAAM2nB,GAC3B,OAAOW,GAAYb,EAAOF,GAAO,EAAGvnB,EAAM2nB,GAG9C,SAASqB,GAAST,EAAWvoB,EAAM2nB,GAC/B,IAAIJ,EAAOE,EAAOc,GAElB,GAAIhB,GAAQwB,GAAUxB,EAAMvnB,EAAM2nB,GAAc3sB,YAAcusB,EAAKvsB,UAC/D,OAAOusB,EAGX,OAAOe,GAAYf,EAAM,EAAGvnB,EAAM2nB,GAGtC,SAASsB,GAAa7jB,EAAGxE,GACrB,GAAIwE,GAAKxE,EACL,OAAOwE,EAAEpK,UAAY4F,EAAE5F,UAG3B,OAAQ,EAGZ,SAASkuB,GAAS9jB,EAAGxE,GACjB,OAAOwE,EAAEpK,UAAY4F,EAGzB,SAASuoB,GAAO1zB,GACZ,GAAID,GAAQC,GAAQ,CAChB,IAAI4C,EAAS,GACb,IAAK,IAAItC,EAAM,EAAGA,EAAMN,EAAMO,OAAQD,IAClCsC,EAAOsB,KAAKwvB,GAAO1zB,EAAMM,KAG7B,OAAOsC,OACJ,GAAI5C,EACP,OAAOgyB,EAAOhyB,GAAOuF,UAI7B,SAASouB,GAAWhkB,EAAGxE,GACnB,GAAIwE,GAAKxE,EACL,OAAOuoB,GAAO/jB,KAAO+jB,GAAOvoB,GAGhC,OAAOwE,IAAMxE,EAGjB,SAASyoB,GAAU9B,EAAMhtB,EAAO+uB,GAC5B,OAAOnC,GAAiBI,EAAMhtB,GAASmsB,GAAc4C,GAGzD,SAASC,GAAU9zB,EAAO8E,EAAO+uB,EAAUE,GACvC,IAAIjC,EAAOE,EAAOhyB,GAClB,IAAIg0B,EAAYhC,EAAOltB,GACvB,IAAIsH,EAEJ,GAAIynB,IAAatD,GACbnkB,EAAS0lB,EAAKkB,WAAagB,EAAUhB,YAAclB,EAAKiB,cAAgBiB,EAAUjB,eAAiB,GAC/Fa,GAAU9B,EAAM,IAAIxsB,KAAKwsB,EAAKiB,cAAejB,EAAKkB,YAAa3C,IAAQ,IAAI/qB,KAAKwsB,EAAKiB,cAAejB,EAAKkB,WAAa,EAAG,GAAGC,eAC7H,GAAIY,IAAarD,GACpBpkB,EAAQ0lB,EAAKiB,cAAgBiB,EAAUjB,cAAgBe,GAAUhC,EAAM,IAAIxsB,KAAKwsB,EAAKiB,cAAe,GAAIxC,GAAQ,GAAK,QAClH,GAAIsD,IAAaxD,IAAQwD,IAAavD,GACzClkB,EAAQwnB,GAAU9B,EAAMkC,EAAWH,QAEnCznB,EAAQqnB,GAAS3B,EAAMhtB,GAASmsB,GAAc4C,GAGlD,OAAOznB,EAAQ2nB,EAGnB,SAASE,GAAStkB,EAAGxE,EAAGZ,GACpB,IAAI8D,EAEJ,GAAI9D,IAASimB,GACTniB,EAAOlD,EAAE4nB,cAAgBpjB,EAAEojB,mBACxB,GAAIxoB,IAASgmB,GAChBliB,EAAO4lB,GAAStkB,EAAGxE,EAAGqlB,IAAS,GAAKrlB,EAAE6nB,WAAarjB,EAAEqjB,gBAClD,GAAIzoB,IAAS8lB,GAChBhiB,EAAOrH,KAAKK,MAAMosB,GAAStoB,EAAGwE,GAAKkhB,SAEnCxiB,EAAOrH,KAAKK,MAAMosB,GAAStoB,EAAGwE,GAAKshB,GAAc1mB,IAGrD,OAAO8D,EAGX,SAAS6lB,GAAapC,EAAMqC,GACxB,IAAIC,EAAM,EACV,IAAIC,EAAOF,EAAY5zB,OAAS,EAChC,IAAI6L,EAEJ,MAAOgoB,GAAOC,EAAM,CAChBjoB,EAAQpF,KAAKK,OAAO+sB,EAAMC,GAAQ,GAClC,IAAIC,EAAcH,EAAY/nB,GAE9B,GAAIkoB,EAAcxC,EAAM,CACpBsC,EAAMhoB,EAAQ,EACd,SAGJ,GAAIkoB,EAAcxC,EAAM,CACpBuC,EAAOjoB,EAAQ,EACf,SAGJ,MAAOunB,GAAWQ,EAAY/nB,EAAQ,GAAI0lB,GACtC1lB,IAGJ,OAAOA,EAGX,GAAI+nB,EAAY/nB,IAAU0lB,EACtB,OAAO1lB,EAGX,OAAOA,EAAQ,EAGnB,SAAS8Y,GAAUM,EAAasM,GAC5B,IAAIlvB,EACJ,GAAIZ,GAAS8vB,GACTlvB,EAAS4iB,EAAYN,UAAU4M,IAASE,EAAOF,QAE/ClvB,EAASovB,EAAOF,GAEpB,OAAOlvB,EAGX,SAAS2xB,GAAW/O,EAAagP,GAC7B,GAAIz0B,GAAQy0B,GAAQ,CAChB,IAAI5xB,EAAS,GACb,IAAK,IAAItC,EAAM,EAAGA,EAAMk0B,EAAMj0B,OAAQD,IAClCsC,EAAOsB,KAAKghB,GAAUM,EAAagP,EAAMl0B,KAG7C,OAAOsC,EAGX,OAAOsiB,GAAUM,EAAagP,GAGlC,SAASrP,GAASnkB,EAASwkB,GACvB,GAAI1jB,GAASd,EAAQkxB,cACjB,OAAOlxB,EAAQkxB,aAGnB,GAAI1M,GAAeA,EAAYL,SAC3B,OAAOK,EAAYL,WAGvB,OAAO,EAGX,IAAIsP,GAA4B,IAC5BC,GAAqB,GAEzB,SAASj0B,GAAQT,EAAOyI,GACpB,GAAIzI,aAAiBsF,KAAM,CACvB,IAAI/E,EAASkI,EAAIlI,OACjB,IAAK,IAAID,EAAM,EAAGA,EAAMC,EAAQD,IAC5B,GAAIqzB,GAAWlrB,EAAInI,GAAMN,GACrB,OAAOM,EAIf,OAAQ,EAGZ,OAAOmI,EAAIhI,QAAQT,GAGvB,IAAI20B,GAAevN,GAAKxjB,OAAO,CAC3BgkB,WAAY,WACRljB,KAAKkwB,OAAS,IAGlBC,eAAgB,WACZ,MAAO,IAGXhmB,MAAO,WACH,IAAIimB,EAAO,IAAIH,GAAa14B,EAAE2H,OAAO,GAAIc,KAAK1D,QAAS,CACnD+zB,WAAYrwB,KAAK1D,QAAQg0B,gBACzBtwB,KAAK8R,cACTse,EAAKhN,eAEL,OAAOgN,GAGXhf,gBAAiB,SAAS9U,GACtB,IAAI+zB,EAAa/zB,EAAQ+zB,YAAc,GACvC,IAAIE,EAAa/zB,EAAQF,EAAQ0H,KACjC,IAAIwsB,EAAah0B,EAAQF,EAAQiG,KACjCjG,EAAQg0B,cAAgBh0B,EAAQ+zB,WAAaA,EAE7C,IAAKE,GAAcC,IAAeH,EAAWx0B,OAAQ,CACjD,IAAImI,EAAMusB,EAAajuB,KAAKK,MAAMrG,EAAQ0H,KAAO,EACjD,IAAIzB,EAEJ,GAAIiuB,EACAjuB,EAAMjG,EAAQ8uB,UAAY9oB,KAAKK,MAAMrG,EAAQiG,KAAO,EAAID,KAAKI,KAAKpG,EAAQiG,UAE1EA,EAAM8tB,EAAWx0B,OAGrBS,EAAQ+zB,WAAa/zB,EAAQ+zB,WAAWhpB,MAAMrD,EAAKzB,GAGvD,OAAOjG,GAGXm0B,aAAc,WACV,IAAIn0B,EAAU0D,KAAK1D,QACnB,IAAIT,EAASS,EAAQ+zB,WAAWx0B,QAAU,EAC1C,IAAImI,EAAM5G,GAASd,EAAQ0H,KAAO1H,EAAQ0H,IAAM,EAAI,EACpD,IAAIzB,EAEJ,GAAInF,GAASd,EAAQiG,MAAQjG,EAAQiG,IAAM,IAAM,GAAKjG,EAAQiG,IAAMvC,KAAK0wB,aAAanuB,IAClFA,EAAM1G,GAAU,EAAIS,EAAQiG,IAAM,QAElCA,EAAM1G,GAAUS,EAAQ8uB,UAAY,EAAI,GAG5C,MAAO,CACHpnB,IAAKA,EACLzB,IAAKA,IAIbouB,kBAAmB,SAAS7H,GACxB,IAAIxsB,EAAU0D,KAAK1D,QACnB,IAAI0H,EAAM5G,GAASd,EAAQ0H,KAAO1H,EAAQ0H,IAAM,EAChD,IAAIzB,EAEJ,GAAInF,GAASd,EAAQiG,KACjBA,EAAMjG,EAAQiG,SACX,GAAInF,GAASd,EAAQ0H,KACxBzB,EAAMyB,EAAM1H,EAAQ+zB,WAAWx0B,YAE/B0G,EAAMvC,KAAK0wB,aAAanuB,KAAO,EAGnC,GAAIumB,EAAO,CACP,IAAI4H,EAAa1wB,KAAK0wB,aACtB1sB,EAAMX,EAAWW,EAAK,EAAG0sB,EAAWnuB,KACpCA,EAAMc,EAAWd,EAAK,EAAGmuB,EAAWnuB,KAGxC,MAAO,CACHyB,IAAKA,EACLzB,IAAKA,IAIbwhB,MAAO,WACH,IAAIznB,EAAU0D,KAAK1D,QACnB,IAAI0H,EAAM5G,GAASd,EAAQ0H,KAAO1H,EAAQ0H,IAAM,EAChD,IAAIzB,EAAMnF,GAASd,EAAQiG,KAAOjG,EAAQiG,IAAMvC,KAAK0wB,aAAanuB,IAElE,MAAO,CACHyB,IAAKA,EACLzB,IAAKA,IAIbquB,aAAc,WACV,OAAO5wB,KAAK+jB,SAGhB2M,WAAY,WACR,IAAIp0B,EAAU0D,KAAK1D,QACnB,MAAO,CAAE0H,IAAK,EAAGzB,IAAKD,KAAKC,IAAIvC,KAAK6wB,YAAc,EAAGv0B,EAAQg0B,cAAcz0B,SAAWS,EAAQ8uB,UAAY,EAAI,KAGlH0F,aAAc,WACV,IAAIxvB,EAAMtB,KAAKywB,eACf,IAAIzsB,EAAM1C,EAAI0C,IACd,IAAIzB,EAAMjB,EAAIiB,IACd,IAAI6hB,EAAUpkB,KAAKokB,UACnB,IAAItc,EAAO9H,KAAK1D,QAAQkd,SAAW4K,EAAQpY,SAAWoY,EAAQ3nB,QAC9D,IAAIoN,EAAQ/B,GAASvF,EAAMyB,GAAQ,GAEnC,MAAO,CACH6F,MAAOA,GAAS7J,KAAK1D,QAAQwoB,SAAW,EAAI,GAC5C/Y,IAAKqY,EACLpgB,IAAKA,EACLzB,IAAKA,IAIbslB,cAAe,WACXnF,GAAK7a,GAAGggB,cAAcxX,KAAKrQ,MAC3BA,KAAK+wB,wBAGTA,qBAAsB,WAClB,IAAIzvB,EAAMtB,KACV,IAAI+L,EAAMzK,EAAIyK,IACd,IAAI4W,EAASrhB,EAAIqhB,OAEjB,GAAIA,EAAO9mB,OAAS,EAAG,CACnB,IAAIm1B,EAAYhxB,KAAK1D,QAAQkd,SAAWte,EAAID,EAC5C,IAAImF,EAAQ2L,EAAIilB,EAAY,GAC5B,IAAI3wB,EAAM0L,EAAIilB,EAAY,GAC1B,IAAIC,EAAatO,EAAO,GACxB,IAAI+G,EAAYtmB,GAAKuf,GAErB,GAAIsO,EAAWllB,IAAIilB,EAAY,GAAK3wB,GAAO4wB,EAAWllB,IAAIilB,EAAY,GAAK5wB,EACvE6wB,EAAW30B,QAAQ6V,QAAU,MAEjC,GAAIuX,EAAU3d,IAAIilB,EAAY,GAAK3wB,GAAOqpB,EAAU3d,IAAIilB,EAAY,GAAK5wB,EACrEspB,EAAUptB,QAAQ6V,QAAU,QAKxCsT,sBAAuB,WACnB,OAAOzlB,KAAKkxB,WAAWlO,YAG3B0C,sBAAuB,WACnB,OAAO1lB,KAAKkxB,WAAWpO,YAG3BiF,uBAAwB,WACpB,OAAO/nB,KAAKkxB,WAAWC,YAG3BC,YAAa,SAASC,GAClB,IAAI/vB,EAAMtB,KAAKywB,eACf,IAAIzsB,EAAM1C,EAAI0C,IACd,IAAIzB,EAAMjB,EAAIiB,IACd,IAAIumB,EAAQxmB,KAAKI,KAAKH,GACtB,IAAIzD,EAAUwD,KAAKK,MAAMqB,GACzB,IAAIstB,EAAU,GAEd,MAAOxyB,GAAWgqB,EAAO,CACrBwI,EAAQ9xB,KAAKV,GACbA,GAAWuyB,EAGf,OAAOC,GAGXC,iBAAkB,SAASF,GACvB,IAAI/vB,EAAMtB,KAAK1D,QACf,IAAIkd,EAAWlY,EAAIkY,SACnB,IAAIsL,EAAUxjB,EAAIwjB,QAClB,IAAI7K,EAAQja,KAAK8wB,eACjB,IAAIjnB,EAAQoQ,EAAMpQ,MAClB,IAAIkC,EAAMkO,EAAMlO,IAChB,IAAI/H,EAAMiW,EAAMjW,IAChB,IAAIsP,EAAMvH,GAAKyN,EAAWte,EAAID,IAAM6pB,EAAU,EAAI,IAClD,IAAIwM,EAAUtxB,KAAKoxB,YAAYC,GAC/B,IAAIG,EAAY,GAEhB,IAAK,IAAI51B,EAAM,EAAGA,EAAM01B,EAAQz1B,OAAQD,IACpC41B,EAAUhyB,KAAK8T,EAAMzW,EAAMgN,GAASynB,EAAQ11B,GAAOoI,GAAM9K,IAG7D,OAAOs4B,GAGXN,SAAU,WACN,IAAI50B,EAAU0D,KAAK1D,QACnB,IAAIm1B,EAAQzxB,KAAKkwB,OACjB,IAAInM,EAAQ/jB,KAAKywB,eACjB,IAAIrM,EAAUpkB,KAAKokB,UACnB,IAAIsN,EAAOtN,EAAQjX,UAAY4W,EAAM/f,IAAM,IAAM+f,EAAMxhB,IAAMjG,EAAQwoB,QAAUxoB,EAAQ8uB,UAEvF,GAAIqG,EAAME,QAAUD,EAAM,CACtB,IAAIE,EAAWt1B,EAAQwmB,WAAW3Q,SAAW7V,EAAQ0qB,eAAe7U,QACpEsf,EAAME,MAAQD,EACdD,EAAMN,WAAanxB,KAAKuxB,iBAAiB,GACzCE,EAAMzO,WAAahjB,KAAK6xB,0BAA0BJ,EAAMN,WAAY/M,GACpEqN,EAAM3O,WAAa8O,EAAW5xB,KAAK6xB,0BAA0B7xB,KAAKuxB,iBAAiB,IAAMnN,GAAW,GAGxG,OAAOqN,GAGXI,0BAA2B,SAASL,EAAWpN,GAC3C,IAAKoN,EAAU31B,OACX,OAAO21B,EAGX,IAAIjlB,EAAOvM,KAAK1D,QAAQkd,SAAWte,EAAID,EACvC,IAAI62B,EAAU,SAAUxU,GAAY,OAAO8G,EAAQ7X,EAAO,IAAM+Q,GAAYA,GAAY8G,EAAQ7X,EAAO,IAEvG,IAAIlM,EAAMmxB,EAAU31B,OAAS,EAC7B,IAAIk2B,EAAa,EACjB,OAAQD,EAAQN,EAAUO,KAAgBA,GAAc1xB,EACpD0xB,IAGJ,IAAIC,EAAW3xB,EAEf,OAAQyxB,EAAQN,EAAUQ,KAAcA,GAAY,EAChDA,IAGJ,OAAOR,EAAUnqB,MAAM0qB,EAAYC,EAAW,IAGlDtH,SAAU,WACN,IAAIppB,EAAMtB,KAAK1D,QACf,IAAIkd,EAAWlY,EAAIkY,SACnB,IAAIsL,EAAUxjB,EAAIwjB,QAClB,IAAIV,EAAUpkB,KAAKokB,UACnB,IAAIuG,EAAWnR,EAAW4K,EAAQpY,SAAWoY,EAAQ3nB,QACrD,IAAI8P,EAAOiN,EAAWte,EAAID,EAC1B,IAAI2vB,EAAU9F,GAAW,EAAI,EAC7B,IAAI+F,EAAYD,IAAY,EAAI,EAAI,EACpC,IAAIE,EAAave,EAAOse,EAAUtK,WAClC,IAAIV,EAAYuE,EAAQ0G,GAExB,MAAO,CACHve,KAAMA,EACNue,WAAYA,EACZF,QAASA,EACTxG,QAASA,EACTuG,SAAUA,EACV9K,UAAWA,IAInB4K,QAAS,WAOL,IAAInpB,EAAMtB,KAAK1D,QACf,IAAIwoB,EAAUxjB,EAAIwjB,QAClB,OAAOA,GAAW,EAAI,GAG1B2B,QAAS,SAASve,EAAMwe,EAAIoC,GACxB,IAAIxsB,EAAU0D,KAAK1D,QACnB,IAAIwoB,EAAUxoB,EAAQwoB,QACtB,IAAIsG,EAAY9uB,EAAQ8uB,UACxB,IAAI9pB,EAAMtB,KAAK8wB,eACf,IAAIjnB,EAAQvI,EAAIuI,MAChB,IAAIkC,EAAMzK,EAAIyK,IACd,IAAI/H,EAAM1C,EAAI0C,IACd,IAAIiW,EAAQja,KAAK0qB,WACjB,IAAIsG,EAAY/W,EAAM1N,KACtB,IAAIsT,EAAY5F,EAAM4F,UAEtB,IAAIoS,EAAUlmB,EAAI5B,QAClB,IAAI+nB,GAAc11B,EAAQkqB,GAE1B,IAAItmB,EAAQqD,GAAeyE,EAAM,GACjC,IAAI7H,EAAMoD,GAAeijB,EAAItmB,GAC7BC,EAAMiC,KAAKC,IAAIlC,EAAM,EAAGD,GAIxBC,EAAMiC,KAAKC,IAAInC,EAAOC,GAEtB,IAAI8xB,EAAKtS,GAAazf,EAAQ4D,GAAO6F,EACrC,IAAIuoB,EAAKvS,GAAaxf,EAAM,EAAI2D,GAAO6F,EAEvC,GAAIqoB,GAAc9G,EACdgH,EAAKD,EAGT,GAAIrJ,EAAO,CACPqJ,EAAK9uB,EAAW8uB,EAAIpmB,EAAIilB,EAAY,GAAIjlB,EAAIilB,EAAY,IACxDoB,EAAK/uB,EAAW+uB,EAAIrmB,EAAIilB,EAAY,GAAIjlB,EAAIilB,EAAY,IAG5DiB,EAAQjB,EAAY,GAAKlM,EAAUsN,EAAKD,EACxCF,EAAQjB,EAAY,GAAKlM,EAAUqN,EAAKC,EAExC,OAAOH,GAGXI,UAAW,SAASpJ,GAChB,IAAIzP,EAAWxZ,KAAK1D,QAAQkd,SAC5B,IAAIwX,EAAYxX,EAAWte,EAAID,EAC/B,IAAImpB,EAAUpkB,KAAKokB,UACnB,IAAIkO,EAAerJ,EAAK9e,QAExBmoB,EAAatB,EAAY,GAAK3tB,EAAW4lB,EAAK+H,EAAY,GAAI5M,EAAQ4M,EAAY,GAAI5M,EAAQ4M,EAAY,IAC1GsB,EAAatB,EAAY,GAAK3tB,EAAW4lB,EAAK+H,EAAY,GAAI5M,EAAQ4M,EAAY,GAAI5M,EAAQ4M,EAAY,IAE1G,OAAOsB,GAGXrJ,KAAM,SAAS/gB,EAAMwe,EAAIoC,GACrB,IAAI9kB,EAAM1B,KAAKK,MAAM3C,KAAK1D,QAAQ0H,KAAO,GACzC,IAAI5D,EAAQ8H,EACZ,IAAI7H,EAAMqmB,EAEV,UAAWtmB,IAAU,SACjBA,EAAQJ,KAAKuyB,cAAcnyB,QACxB,GAAIhD,GAASgD,GAChBA,GAAS4D,EAGb,UAAW3D,IAAQ,SACfA,EAAML,KAAKuyB,cAAclyB,QACtB,GAAIjD,GAASiD,GAChBA,GAAO2D,EAGX,OAAO0e,GAAK7a,GAAGohB,KAAK5Y,KAAKrQ,KAAMI,EAAOC,EAAKyoB,IAG/C0J,mBAAoB,SAASnoB,GACzB,IAAI/I,EAAMtB,KAAK1D,QACf,IAAIwoB,EAAUxjB,EAAIwjB,QAClB,IAAIsG,EAAY9pB,EAAI8pB,UACpB,IAAI5R,EAAWlY,EAAIkY,SACnB,IAAIwX,EAAYxX,EAAWte,EAAID,EAC/B,IAAIgf,EAAQja,KAAK8wB,eACjB,IAAIjnB,EAAQoQ,EAAMpQ,MAClB,IAAIkC,EAAMkO,EAAMlO,IAChB,IAAI/H,EAAMiW,EAAMjW,IAChB,IAAIzB,EAAM0X,EAAM1X,IAChB,IAAIkwB,EAAa3N,EAAUviB,EAAMyB,EACjC,IAAI6b,EAAY9T,EAAIilB,EAAY,GAChC,IAAIvO,EAAU1W,EAAIilB,EAAY,GAC9B,IAAI1d,EAAMjJ,EAAM2mB,GAEhB,GAAI1d,EAAMuM,GAAavM,EAAMmP,EACzB,OAAO,KAGX,IAAInnB,EAAQm3B,GAAcnf,EAAMuM,GAAahW,EAC7C,IAAIF,EAAOrO,EAAQ,EAEnB,GAAI8vB,EACA9vB,EAAQgH,KAAKzF,MAAMvB,QAChB,GAAIqO,IAAS,GAAKrO,EAAQ,EAC7BA,IAGJ,OAAOgH,KAAKK,MAAMrH,IAGtBo3B,YAAa,SAASroB,GAClB,IAAI3C,EAAQ1H,KAAKwyB,mBAAmBnoB,GAEpC,GAAI3C,IAAU,KACV,OAAO,KAGX,OAAO1H,KAAK1D,QAAQ+zB,WAAW3oB,IAGnC6qB,cAAe,SAASj3B,GACpB,OAAO0E,KAAK2yB,WAAWr3B,GAASgH,KAAKK,MAAM3C,KAAK1D,QAAQ0H,KAAO,IAGnE4uB,WAAY,SAASlrB,EAAOoN,GACxB,IAAIxY,EAAU0D,KAAK1D,QAEnB,OAAQwY,EAAQxY,EAAQg0B,cAAgBh0B,EAAQ+zB,YAAY3oB,IAGhEmrB,gBAAiB,WACb,OAAQ7yB,KAAK1D,QAAQ+zB,YAAc,IAAIx0B,QAG3Ci3B,eAAgB,SAAS3wB,GACrB,IAAI7F,EAAU0D,KAAK1D,QACnB,IAAI8nB,EAAUpkB,KAAKokB,UACnB,IAAItc,EAAOxL,EAAQkd,SAAW4K,EAAQpY,SAAWoY,EAAQ3nB,QACzD,IAAIsnB,EAAQznB,EAAQ+zB,WAAWx0B,OAC/B,IAAIgO,EAAQ/B,EAAOic,EACnB,IAAI1nB,EAASQ,EAAMsF,EAAQ0H,EAAOtQ,GAElC,MAAO,CACHyK,IAAK3H,EACLkG,IAAKwhB,EAAQ1nB,IAIrB02B,WAAY,SAASlpB,EAAOwM,GACxB,IAAIiH,EAAWhb,KAAKsH,IAAI5J,KAAK+qB,YAAY1U,IACzC,IAAIoa,EAAezwB,KAAK2wB,oBACxB,IAAI5M,EAAQ0M,EAAaluB,IAAMkuB,EAAazsB,IAC5C,IAAI7B,EAAQnC,KAAKirB,aAAaphB,EAAOka,GACrC,IAAIiP,EAAW1V,EAAWnb,EAC1B,IAAI8wB,GAAY,EAAI3V,GAAYnb,EAChC,IAAI6B,EAAMysB,EAAazsB,IAAMgvB,EAC7B,IAAIzwB,EAAMkuB,EAAaluB,IAAM0wB,EAE7B,GAAI1wB,EAAMyB,EAAMgsB,GACZztB,EAAMyB,EAAMgsB,GAGhB,MAAO,CACHhsB,IAAKA,EACLzB,IAAKA,IAIb2wB,UAAW,SAASrpB,EAAOwM,GACvB,IAAI/U,EAAMtB,KAAK0wB,aACf,IAAIyC,EAAW7xB,EAAI0C,IACnB,IAAIovB,EAAW9xB,EAAIiB,IACnB,IAAIwhB,EAAQ/jB,KAAK+yB,WAAWlpB,EAAOwM,GAEnC,MAAO,CACHrS,IAAKX,EAAW0gB,EAAM/f,IAAKmvB,EAAUC,GACrC7wB,IAAKc,EAAW0gB,EAAMxhB,IAAK4wB,EAAUC,KAI7C3P,YAAa,WACT,IAAIF,EAAcvjB,KAAKujB,cAEvB,OAAOA,EAAYhhB,IAAMghB,EAAYvf,KAGzCuf,YAAa,WACT,IAAIjnB,EAAU0D,KAAK1D,QACnB,IAAI8uB,EAAY9uB,EAAQ8uB,UACxB,IAAIzH,EAAernB,EAAQqmB,OAC3B,IAAIrhB,EAAMtB,KAAK2wB,kBAAkB,MACjC,IAAI3sB,EAAM1C,EAAI0C,IACd,IAAIzB,EAAMjB,EAAIiB,IACd,IAAInC,EAAQkC,KAAKK,MAAMqB,GAEvB,IAAKonB,EAAW,CACZpnB,EAAM1B,KAAKK,MAAMqB,GACjBzB,EAAMD,KAAKI,KAAKH,OACb,CACHyB,EAAM1B,KAAKI,KAAKsB,GAChBzB,EAAMD,KAAKK,MAAMJ,GAGrB,IAAIihB,EAEJ,GAAIxf,EAAM2f,EAAaH,KACnBA,EAAOG,EAAaH,KAAOG,EAAaC,KAAOthB,KAAKI,MAAMsB,EAAM2f,EAAaH,MAAQG,EAAaC,WAElGJ,EAAOG,EAAaH,KAGxB,MAAO,CACHxf,IAAKwf,EAAOpjB,EACZmC,KAAMjG,EAAQ+zB,WAAWx0B,OAAS0G,GAAO6oB,EAAY,EAAI,GAAK,GAAKhrB,IAI3E8jB,gBAAiB,SAASxc,EAAOic,EAAcK,GAC3C,IAAI1nB,EAAU0D,KAAK1D,QACnB,IAAIoY,EAAWpY,EAAQ+2B,UAAY/2B,EAAQ+2B,UAAU3rB,GAAS,KAC9D,IAAIiN,EAAWlR,GAAenH,EAAQ+zB,WAAW3oB,GAAQ,IAEzDsc,EAAatP,SAAWA,EACxB,IAAI8H,EAAOxc,KAAKqpB,cAAc1U,EAAUgP,EAAcK,GAEtD,OAAO,IAAIzG,GAAU5I,EAAU6H,EAAM9U,EAAOgN,EAAUiP,IAG1DuF,iBAAkB,SAAS5tB,GACvB,IAAIyoB,EAAQ/jB,KAAK2wB,oBAEjB,OAAOruB,KAAKK,MAAMohB,EAAM/f,MAAQ1I,GAASA,GAASgH,KAAKI,KAAKqhB,EAAMxhB,MAGtE4mB,SAAU,SAAS7tB,GACf,IAAIgB,EAAU0D,KAAK1D,QACnB,IAAIoL,EAAQpM,EAAQgH,KAAKK,MAAMrG,EAAQ0H,KAAO,GAC9C,OAAOhE,KAAKymB,QAAQ/e,IAGxBogB,aAAc,WACVpF,GAAK7a,GAAGigB,aAAazX,KAAKrQ,MAC1BA,KAAKszB,uBAGTA,oBAAqB,WACjB,IAAIhyB,EAAMtB,KACV,IAAI0kB,EAAQpjB,EAAIojB,MAChB,IAAI3Y,EAAMzK,EAAIyK,IACd,GAAI2Y,GAASA,EAAM7oB,OAAQ,CACvB,IAAIm1B,EAAYhxB,KAAK1D,QAAQkd,SAAWte,EAAID,EAC5C,IAAImF,EAAQ2L,EAAIilB,EAAY,GAC5B,IAAI3wB,EAAM0L,EAAIilB,EAAY,GAE1B,IAAK,IAAIp1B,EAAM,EAAGA,EAAM8oB,EAAM7oB,OAAQD,IAAO,CACzC,IAAIipB,EAAOH,EAAM9oB,GACjB,GAAIipB,EAAK9Y,MAAQ1L,EAAMwkB,EAAK9Y,IAAIilB,EAAY,IAAMnM,EAAK9Y,IAAIilB,EAAY,GAAK5wB,GACxEykB,EAAK1F,UAMrBoU,IAAK,SAASpxB,GACV,IAAI4hB,EAAQ/jB,KAAK2wB,kBAAkB,MACnC,IAAIrvB,EAAMtB,KAAK8wB,eACf,IAAIjnB,EAAQvI,EAAIuI,MAChB,IAAIxN,EAASQ,EAAMsF,EAAQ0H,EAAOtQ,GAClC,IAAIm3B,EAAa1wB,KAAK0wB,aACtB,IAAI1sB,EAAM+f,EAAM/f,IAAM3H,EACtB,IAAIkG,EAAMwhB,EAAMxhB,IAAMlG,EAEtB,OAAO2D,KAAKkqB,WAAWlmB,EAAKzB,EAAK,EAAGmuB,EAAWnuB,IAAKlG,IAGxDm3B,YAAa,SAASpzB,EAAOC,GACzB,IAAIiB,EAAMtB,KAAK1D,QACf,IAAIwoB,EAAUxjB,EAAIwjB,QAClB,IAAItL,EAAWlY,EAAIkY,SACnB,IAAIwX,EAAYxX,EAAWte,EAAID,EAC/B,IAAI8oB,EAAQ/jB,KAAK2wB,kBAAkB,MACnC,IAAI1W,EAAQja,KAAK8wB,eACjB,IAAIjnB,EAAQoQ,EAAMpQ,MAClB,IAAIkC,EAAMkO,EAAMlO,IAChB,IAAI8T,EAAY9T,EAAIilB,GAAalM,EAAU,EAAI,IAE/C,IAAI2O,EAAYrzB,EAAM4wB,GAAanR,EACnC,IAAI6T,EAAUrzB,EAAI2wB,GAAanR,EAE/B,IAAI7b,EAAM+f,EAAM/f,IAAMyvB,EAAY5pB,EAClC,IAAItH,EAAMwhB,EAAM/f,IAAM0vB,EAAU7pB,EAChC,IAAI8pB,EAAWrxB,KAAK0B,IAAIA,EAAKzB,GAC7B,IAAIqxB,EAAWtxB,KAAKC,IAAIyB,EAAKzB,GAE7B,GAAIqxB,EAAWD,GAAY5D,GACvB,MAAO,CACH/rB,IAAK2vB,EACLpxB,IAAKqxB,IAKjBtJ,WAAY,WACR,OAAOtqB,KAAK+jB,SAGhB4O,WAAY,SAASr3B,GACjB,IAAIgB,EAAU0D,KAAK1D,QACnB,IAAIoL,EAAQ1H,KAAK6zB,eACb7zB,KAAK6zB,eAAerzB,IAAIlF,GAASS,GAAQT,EAAOgB,EAAQg0B,eAE5D,OAAO5oB,GAGXosB,oBAAqB,WACjB,IAAIx3B,EAAU0D,KAAK1D,QACnB,IAAI0H,EAAM,EAEV,GAAI5G,GAASd,EAAQ0H,KACjBA,EAAM1B,KAAKK,MAAMrG,EAAQ0H,KAG7B,IAAIzB,EACJ,GAAInF,GAASd,EAAQiG,KACjBA,EAAMjG,EAAQ8uB,UAAY9oB,KAAKK,MAAMrG,EAAQiG,KAAOD,KAAKI,KAAKpG,EAAQiG,KAAO,OAE7EA,EAAMvC,KAAK+zB,aAAe,EAG9B,MAAO,CACH/vB,IAAKA,EACLzB,IAAKA,IAIbyxB,cAAe,WACX,IAAKh0B,KAAK6zB,eAAgB,CACtB,IAAII,EAASj0B,KAAK6zB,eAAiB,IAAI9zB,GACvC,IAAIuwB,EAAgBtwB,KAAK1D,QAAQg0B,cACjC,IAAK,IAAI10B,EAAM,EAAGA,EAAM00B,EAAcz0B,OAAQD,IAC1Cq4B,EAAOtzB,IAAI2vB,EAAc10B,GAAMA,KAK3Cm4B,WAAY,WACR,OAAOzxB,KAAKC,IAAIvC,KAAK1D,QAAQg0B,cAAcz0B,OAAQmE,KAAK6wB,YAAc,MAmB1EqD,IAfJvwB,GAAkBssB,GAAc,CAC5BrsB,KAAM,WACN4V,SAAU,MACVyN,eAAgB,CACZ9U,QAAS,MACT1V,MAAO,EACPoK,MAAO/N,GAEX6pB,OAAQ,CACJ/P,OAAQ,GAEZwY,UAAW,MACXjI,aAAc,OAGK,KAEnBgR,GAAmB,CACnBpH,aAAc,eACdD,QAAS,WACTD,QAAS,QACTD,MAAO,QACPD,KAAM,MACND,MAAO,MACPD,OAAQ,UACRD,MAAO,QAGP4H,GAAiB,GAEjBC,GAAO,OACPC,GAAa,CACbhJ,GAAcE,GAASC,GAASC,GAAOC,GAAMC,GAAOC,GAAQC,IAE5DyI,GAAM,MAEV,SAASC,GAAcnE,GACnB,IAAItM,EAAQsM,EAAWoE,OACvB,IAAK1Q,EAAO,CACRA,EAAQsM,EAAWoE,OAAS3wB,GAAkBusB,GAC9CtM,EAAM/f,IAAMspB,EAAOvJ,EAAM/f,KACzB+f,EAAMxhB,IAAM+qB,EAAOvJ,EAAMxhB,KAG7B,OAAOwhB,EAGX,IAAI2Q,GAAiB18B,EAAMkH,OAAO,CAC9B8B,KAAM,SAAS1E,GACX0D,KAAK1D,QAAUA,GAGnBq4B,eAAgB,WACZ,MAAO,CACH3wB,IAAK,EACLzB,IAAK,IAIbqyB,aAAc,WACV,MAAO,IAGX9f,MAAO,WACH,MAAO,IAGXwV,WAAY,WACR,MAAO,IAGXuK,WAAY,WACR,OAAQ,GAGZ3tB,OAAQ,WACJ,MAAO,IAGXyrB,WAAY,WACR,OAAQ,GAGZmC,YAAa,WACT,OAAO,GAGXf,WAAY,WACR,OAAO,GAGXgB,OAAQ,WACJ,OAAO,QAIXC,GAAYh9B,EAAMkH,OAAO,CACzB8B,KAAM,SAASZ,EAAOC,EAAK/D,GACvB0D,KAAK1D,QAAUA,EACfA,EAAQ+yB,aAAe/yB,EAAQ+yB,cAAgB,EAE/C,IAAI4F,EAAkB34B,EAAQ24B,gBAC9B,IAAI7J,EAAY9uB,EAAQ8uB,UAExBprB,KAAKI,MAAQ+tB,GAAY/tB,EAAO,EAAG9D,EAAQ6yB,SAAU7yB,EAAQkxB,cAC7D,IAAI0H,EAAWl1B,KAAKm1B,iBAAiB90B,GACrC,IAAI+0B,GAAahK,GAAa6D,GAAW5uB,EAAK60B,KAAc54B,EAAQ+4B,WAEpEr1B,KAAKK,IAAML,KAAKm1B,iBAAiB90B,GAAM+qB,EAAWgK,EAAY,EAAI,GAElE,IAAIpxB,EAAM1H,EAAQ0H,KAAO5D,EACzBJ,KAAKs1B,WAAat1B,KAAKm1B,iBAAiBnxB,GACxChE,KAAKu1B,aAAeN,EAAkBj1B,KAAKs1B,WAAatxB,EAExD,IAAIzB,EAAMjG,EAAQiG,IAClB,IAAKA,EAAK,CACNvC,KAAKw1B,SAAWN,EAChBl1B,KAAKy1B,WAAaR,GAAmBG,EAAYp1B,KAAKK,IAAMA,MACzD,CACH,IAAIq1B,GAAQtK,GAAa6D,GAAW1sB,EAAKvC,KAAKm1B,iBAAiB5yB,KAAS,EAAI,EAC5EvC,KAAKw1B,SAAWx1B,KAAKm1B,iBAAiB5yB,EAAK,MAAOmzB,GAClD11B,KAAKy1B,WAAaR,EAAkBj1B,KAAKm1B,iBAAiB5yB,GAAM6oB,GAAa9uB,EAAQiG,IAGzF,GAAIvC,KAAKw1B,SAAWx1B,KAAKs1B,WACrBt1B,KAAKw1B,SAAWx1B,KAAKs1B,WAEzB,GAAIt1B,KAAKy1B,YAAcz1B,KAAKu1B,aACxBv1B,KAAKy1B,WAAaz1B,KAAKm1B,iBAAiBn1B,KAAKu1B,aAAc,MAAO,IAI1EX,aAAc,WACV,MAAO,CACH5wB,IAAKhE,KAAKu1B,aACVhzB,IAAKvC,KAAKy1B,aAIlBd,eAAgB,WACZ,IAAK30B,KAAK21B,SAAU,CAChB,IAAIr5B,EAAU0D,KAAK1D,QAEnB,IAAI6yB,EAAW7yB,EAAQ6yB,SACvB,IAAIE,EAAe/yB,EAAQ+yB,aAE3B,IAAIuG,EAASxG,GAAUpvB,KAAKu1B,aAAcv1B,KAAKs1B,WAAYnG,EAAUE,GACrE,IAAIwG,EAASzG,GAAUpvB,KAAKy1B,WAAYz1B,KAAKs1B,WAAYnG,EAAUE,GAEnErvB,KAAK21B,SAAW,CAAE3xB,IAAK4xB,EAAQrzB,IAAKszB,GAGxC,OAAO71B,KAAK21B,UAGhB7gB,MAAO,WACH,MAAO,CACH9Q,IAAKhE,KAAKI,MACVmC,IAAKvC,KAAKK,MAIlB0zB,WAAY,WACR,IAAI+B,EAAU91B,KAAK2yB,WAAW3yB,KAAKK,KAEnC,OAAOy1B,GAAW91B,KAAK1D,QAAQ8uB,UAAY,EAAI,IAGnDd,WAAY,WACR,MAAO,CACHtmB,IAAKhE,KAAKs1B,WACV/yB,IAAKvC,KAAKw1B,WAIlBX,WAAY,SAASv5B,GACjB,IAAIgB,EAAU0D,KAAK1D,QACnB,OAAOgG,KAAKK,MAAMysB,GAAU9zB,EAAO0E,KAAKs1B,WAAYh5B,EAAQ6yB,SAAU7yB,EAAQ+yB,gBAGlFsD,WAAY,SAASr3B,GACjB,IAAIgB,EAAU0D,KAAK1D,QACnB,OAAOgG,KAAKK,MAAMysB,GAAU9zB,EAAO0E,KAAKI,MAAO9D,EAAQ6yB,SAAU7yB,EAAQ+yB,gBAG7ED,UAAW,SAAS9zB,GAChB,IAAIgB,EAAU0D,KAAK1D,QACnB,OAAO8yB,GAAU9zB,EAAO0E,KAAKs1B,WAAYh5B,EAAQ6yB,SAAU7yB,EAAQ+yB,eAGvEyF,YAAa,WACT,IAAIe,EAAS71B,KAAK60B,WAAW70B,KAAKw1B,UAElC,OAAOK,EAAS,GAGpB3uB,OAAQ,WACJ,IAAIA,EAASlH,KAAKoH,QAClB,IAAKF,EAAQ,CACT,IAAI5K,EAAU0D,KAAK1D,QACnB,IAAIynB,EAAQ/jB,KAAKsqB,aACjBtqB,KAAKoH,QAAUF,EAAS,GAExB,IAAK,IAAIkmB,EAAOrJ,EAAM/f,IAAKopB,GAAQrJ,EAAMxhB,KAAM,CAC3C2E,EAAO1H,KAAK4tB,GACZA,EAAOe,GAAYf,EAAM9wB,EAAQ+yB,aAAc/yB,EAAQ6yB,SAAU7yB,EAAQkxB,eAIjF,OAAOtmB,GAGX6tB,OAAQ,SAASrtB,EAAOoN,GACpB,IAAIxY,EAAU0D,KAAK1D,QAEnB,OAAO6xB,GAAYrZ,EAAQ9U,KAAKI,MAAQJ,KAAKs1B,WAAYh5B,EAAQ+yB,aAAe3nB,EAAOpL,EAAQ6yB,SAAU7yB,EAAQkxB,eAGrH2H,iBAAkB,SAAS75B,EAAOy6B,EAAOL,GACrC,IAAIp0B,EAAMtB,KAAK1D,QACf,IAAI6yB,EAAW7tB,EAAI6tB,SACnB,IAAIE,EAAe/tB,EAAI+tB,aACvB,IAAI7B,EAAelsB,EAAIksB,aACvB,IAAIptB,EAAQJ,KAAKI,MAEjB,IAAIwjB,EAAOwL,GAAU9zB,EAAO8E,EAAO+uB,EAAUE,GAC7C,IAAI2G,EAAcD,EAAQzzB,KAAKI,KAAKkhB,GAAQthB,KAAKK,MAAMihB,GAEvD,GAAI8R,EACAM,GAAeN,EAGnB,OAAOvH,GAAY/tB,EAAO41B,EAAc3G,EAAcF,EAAU3B,MAIxE,SAASyI,GAAa35B,EAAS45B,EAAWC,GACtC,IAAIC,EAAiB5B,GAAcl4B,EAAQ+zB,YAC3C,IAAIgG,GAAQ/5B,EAAQiG,KAAO6zB,EAAe7zB,MAAQjG,EAAQ0H,KAAOoyB,EAAepyB,KAChF,IAAIsyB,EAAoBh6B,EAAQg6B,kBAChC,IAAIC,EAAgBj6B,EAAQi6B,cAC5B,IAAIC,EAAWl6B,EAAQ6yB,WAAaoF,GACpC,IAAIkC,EAAaP,EAAY5B,GAAWv4B,QAAQm6B,GAAa,EAC7D,IAAI/G,EAAWqH,EAAWlC,GAAWmC,KAAgBn6B,EAAQ6yB,SAC7D,IAAIuH,EAAQL,EAAO9J,GAAc4C,GACjC,IAAIwH,EAAaD,EACjB,IAAIE,EAAWhT,EAAMiT,EAErB,OAAQjT,GAAQ8S,GAASH,EAAe,CACpCK,EAAYA,GAAaN,EAAkBnH,GAAU9nB,MAAM,GAE3D,GACIwvB,EAAWD,EAAUE,cAChBD,GAAYX,IAAc/G,GAAY0H,EAAWV,GAE1D,GAAIU,EAAU,CACVjT,EAAOiT,EACPH,EAAQC,EAAa/S,OAClB,GAAIuL,IAAa/rB,GAAKkxB,IAAa,CACtC1Q,EAAOthB,KAAKI,KAAKi0B,EAAaJ,GAC9B,WACG,GAAIC,EAAU,CACjBrH,EAAWmF,GAAWmC,MAAiBrzB,GAAKkxB,IAC5CqC,EAAaN,EAAO9J,GAAc4C,GAClCyH,EAAY,SACT,CACH,GAAIF,EAAQH,EACR3S,EAAOthB,KAAKI,KAAKi0B,EAAaJ,GAElC,OAIRj6B,EAAQ+yB,aAAezL,EACvBtnB,EAAQ6yB,SAAWA,EAGvB,SAAS4H,GAAgBz6B,GACrB,IAAI+zB,EAAa/zB,EAAQ+zB,WACzB,IAAIpM,EAAQznB,EAAQ6zB,GAAcA,EAAWx0B,OAAS,EACtD,IAAIm7B,EAAUj9B,EACd,IAAIk9B,EAAcpxB,EAElB,IAAK,IAAIqxB,EAAa,EAAGA,EAAajT,EAAOiT,IAAc,CACvD,IAAIviB,EAAW0b,EAAW6G,GAE1B,GAAIviB,GAAYsiB,EAAc,CAC1B,IAAIttB,EAAOqjB,GAAiBrY,EAAUsiB,GACtC,GAAIttB,EAAO,EAAG,CACVqtB,EAAU10B,KAAK0B,IAAIgzB,EAASrtB,GAE5B,GAAIqtB,GAAW1K,GACXzmB,EAAOimB,QACJ,GAAIkL,GAAW3K,GAAiBF,GAAe,EAClDtmB,EAAOgmB,QACJ,GAAImL,GAAW5K,GAClBvmB,EAAO+lB,QACJ,GAAIoL,GAAW7K,GAClBtmB,EAAO8lB,QACJ,GAAIqL,GAAW9K,GAClBrmB,EAAO6lB,QACJ,GAAIsL,GAAW/K,GAClBpmB,EAAO4lB,QAEP5lB,EAAO2lB,IAKnByL,EAAetiB,EAGnBrY,EAAQ6yB,SAAWtpB,GAAQ8lB,GAG/B,SAASwL,GAAS76B,GACd,IAAI6yB,GAAY7yB,EAAQ6yB,UAAY,IAAIiI,cACxC,IAAIC,EAAalI,IAAaoF,KAAQr0B,GAAQivB,EAAUmF,IAExD,GAAI+C,EACAN,GAAgBz6B,GAGpB,GAAI6yB,IAAaoF,IAAOj4B,EAAQ+yB,eAAiBgF,GAC7C4B,GAAa35B,GAGjB,OAAOA,EAGX,IAAIg7B,GAAmBrH,GAAa/wB,OAAO,CACvCiL,MAAO,WACH,IAAIimB,EAAO,IAAIkH,GAAiB//B,EAAE2H,OAAO,GAAIc,KAAK1D,SAAU0D,KAAK8R,cACjEse,EAAKhN,eAEL,OAAOgN,GAGXD,eAAgB,WACZ,IAAI/vB,EAAQJ,KAAKu3B,UAAUziB,QAAQ9Q,IACnC,OAAOhE,KAAK1D,QAAQ6yB,SAAWnvB,KAAK1D,QAAQ+yB,aAAejvB,GAG/DgR,gBAAiB,SAAS9U,GACtB,OAAOA,GAGX4mB,WAAY,WACR+M,GAAapoB,GAAGqb,WAAW7S,KAAKrQ,MAEhC,IAAI8R,EAAe9R,KAAK8R,aACxB,IAAIgP,EAAchP,EAAamP,KAC/B,IAAI3kB,EAAU0D,KAAK1D,QAEnB,IAAI+zB,EAAa/zB,EAAQ+zB,YAAc,GACvC,IAAKA,EAAWmH,QAAS,CACrBnH,EAAaR,GAAW/O,EAAauP,GACrCA,EAAWmH,QAAU,KAGzBl7B,EAAU9D,EAAW,CACjBy8B,gBAAiB,MAClB34B,EAAS,CACR+zB,WAAYA,EACZrsB,IAAKwc,GAAUM,EAAaxkB,EAAQ0H,KACpCzB,IAAKie,GAAUM,EAAaxkB,EAAQiG,KACpCirB,aAAc/M,GAASnkB,EAASwkB,KAGpC,GAAIhP,EAAa2lB,SAAW3lB,EAAa6P,WAAWrlB,EAAQkd,SAAWte,EAAID,GACvEqB,EAAQ24B,gBAAkB,MAG9B34B,EAAQo7B,gBAAkBp7B,EAAQo7B,iBAAmBp7B,EAAQ6yB,SAC7D7yB,EAAQq7B,oBAAsBr7B,EAAQq7B,qBAAuBr7B,EAAQ+yB,aAErErvB,KAAK1D,QAAUA,EACfA,EAAQg0B,cAAgBD,EAExB,GAAIA,EAAWx0B,OAAS,EAAG,CACvB,IAAIkoB,EAAQyQ,GAAcnE,GAC1B,IAAIuH,EAAet7B,EAAQs7B,aAE3B53B,KAAKu3B,UAAY,IAAIvC,GAAUjR,EAAM/f,IAAK+f,EAAMxhB,IAAK40B,GAAS76B,IAE9D,GAAIs7B,EAAc,CACd,IAAIL,EAAYv3B,KAAKu3B,UAAU3C,eAE/B,IAAIiD,EAAkBtgC,EAAE2H,OAAO,GAAI5C,EAAS,CACxC8uB,UAAW,KACX6J,gBAAiB,MACjB9F,SAAU,MACVnrB,IAAKuzB,EAAUvzB,IACfzB,IAAKg1B,EAAUh1B,IACfg0B,cAAeqB,IAGnB,IAAIE,EAAmB93B,KAAKu3B,UAAUj7B,QAEtC25B,GAAa4B,EAAiBC,EAAiB3I,SAAU2I,EAAiBzI,cAE1ErvB,KAAK+3B,cAAgB,IAAI/C,GAAUjR,EAAM/f,IAAK+f,EAAMxhB,IAAKs1B,QAEzD73B,KAAK+3B,cAAgB/3B,KAAKu3B,cAG3B,CACHj7B,EAAQ6yB,SAAW7yB,EAAQ6yB,UAAYxD,GACvC3rB,KAAKu3B,UAAYv3B,KAAK+3B,cAAgB,IAAIrD,GAAep4B,GAG7D0D,KAAKg4B,YAAc,IAGvB5G,YAAa,SAASC,GAClB,IAAI/vB,EAAMtB,KACV,IAAIu3B,EAAYj2B,EAAIi2B,UACpB,IAAIQ,EAAgBz2B,EAAIy2B,cACxB,IAAIjD,EAAciD,EAAcjD,cAEhC,IAAK90B,KAAK1D,QAAQs7B,eAAiB9C,EAC/B,OAAO7E,GAAapoB,GAAGupB,YAAY/gB,KAAKrQ,KAAMqxB,GAGlD,IAAIC,EAAU,GACd,IAAIpqB,EAAS6wB,EAAc7wB,SAC3B,IAAI7K,EAAS,EAEb,IAAK2D,KAAK1D,QAAQ8uB,UAAW,CACzBlkB,EAASA,EAAOjB,OAAO8xB,EAAchD,OAAOD,IAC5Cz4B,EAAS,GAGb,IAAK,IAAIT,EAAM,EAAGA,EAAMsL,EAAOrL,OAAQD,IAAO,CAC1C01B,EAAQ9xB,KAAK+3B,EAAUnI,UAAUloB,EAAOtL,IAAQS,GAChD,GAAIg1B,IAAa,GAAKz1B,GAAO,EAAG,CAC5B,IAAIk6B,EAAUxE,EAAQz1B,OAAS,EAC/By1B,EAAQ2G,OAAOr8B,EAAK,EAAG01B,EAAQwE,EAAU,IAAMxE,EAAQwE,GAAWxE,EAAQwE,EAAU,IAAMzE,IAIlG,OAAOC,GAGXpI,iBAAkB,SAAS5tB,GACvB,IAAIyoB,EAAQ/jB,KAAK+jB,QACjB,IAAIsM,EAAarwB,KAAK1D,QAAQ+zB,YAAc,GAE5C,OAAOvB,GAAaxzB,EAAOyoB,EAAM/f,MAAQ,GAAK8qB,GAAaxzB,EAAOyoB,EAAMxhB,MAAQ,GAAK8tB,EAAWx0B,QAGpG+oB,eAAgB,SAAStpB,GACrB,OAAOklB,GAAUxgB,KAAK8R,aAAamP,KAAM3lB,IAG7C6tB,SAAU,SAAS7tB,GACf,OAAO0E,KAAKymB,QAAQnrB,IAGxBw3B,eAAgB,SAAS3wB,GACrB,IAAI7F,EAAU0D,KAAK1D,QACnB,IAAI6yB,EAAW7yB,EAAQ6yB,SACvB,IAAI3B,EAAelxB,EAAQkxB,aAC3B,IAAIhU,EAAWld,EAAQkd,SACvB,IAAI4K,EAAUpkB,KAAKokB,UACnB,IAAItc,EAAO0R,EAAW4K,EAAQpY,SAAWoY,EAAQ3nB,QACjD,IAAIsnB,EAAQ/jB,KAAK+jB,QACjB,IAAIla,EAAQ/B,GAAQic,EAAMxhB,IAAMwhB,EAAM/f,KACtC,IAAI3H,EAASQ,EAAMsF,EAAQ0H,EAAOtQ,GAElC,GAAIwqB,EAAM/f,KAAO+f,EAAMxhB,IAAK,CACxB,IAAI2F,EAAOilB,GAAS7wB,EAAQ0H,KAAO+f,EAAM/f,IAAK3H,GAC9C,IAAIqqB,EAAKyG,GAAS7wB,EAAQiG,KAAOwhB,EAAMxhB,IAAKlG,GAE5C0nB,EAAQ,CACJ/f,IAAKmqB,GAAYjmB,EAAM,EAAGinB,EAAU3B,GACpCjrB,IAAK4rB,GAAYzH,EAAI,EAAGyI,EAAU3B,IAI1C,OAAOzJ,GAGXR,YAAa,WACT,MAAO,CACHvf,IAAKhE,KAAK1D,QAAQqmB,OAAOa,KACzBjhB,IAAKvC,KAAK+3B,cAAcjD,gBAIhCvB,IAAK,SAASpxB,GACV,GAAInC,KAAKk4B,UACL,OAAO,KAGX,IAAI57B,EAAU0D,KAAK1D,QACnB,IAAI8nB,EAAUpkB,KAAKokB,UACnB,IAAItc,EAAOxL,EAAQkd,SAAW4K,EAAQpY,SAAWoY,EAAQ3nB,QACzD,IAAI6E,EAAMtB,KAAKu3B,UAAU3C,eACzB,IAAI5wB,EAAM1C,EAAI0C,IACd,IAAIzB,EAAMjB,EAAIiB,IACd,IAAI41B,EAAcn4B,KAAKu3B,UAAUziB,QACjC,IAAIjL,EAAQ/B,GAAQvF,EAAMyB,GAC1B,IAAI3H,EAASQ,EAAMsF,EAAQ0H,EAAOtQ,IAAsB+C,EAAQwoB,SAAW,EAAI,GAC/E,IAAI5c,EAAOilB,GAASnpB,EAAK3H,GACzB,IAAIqqB,EAAKyG,GAAS5qB,EAAKlG,GAEvB,IAAI+7B,EAAWp4B,KAAKkqB,WAAW8E,GAAO9mB,GAAO8mB,GAAOtI,GAAKsI,GAAOmJ,EAAYn0B,KAAMgrB,GAAOmJ,EAAY51B,KAAMlG,GAE3G,GAAI+7B,EAAU,CACVA,EAASp0B,IAAMspB,EAAO8K,EAASp0B,KAC/Bo0B,EAAS71B,IAAM+qB,EAAO8K,EAAS71B,KAC/B61B,EAASjJ,SAAW7yB,EAAQ6yB,SAC5BiJ,EAAS/I,aAAe/yB,EAAQ+yB,cAAgB,EAChD+I,EAASV,gBAAkBp7B,EAAQo7B,gBACnCU,EAAST,oBAAsBr7B,EAAQq7B,oBAEvC,OAAOS,IAIf5E,YAAa,SAASpzB,EAAOC,GACzB,GAAIL,KAAKk4B,UACL,OAAO,KAGX,IAAI1E,EAAcvD,GAAapoB,GAAG2rB,YAAYnjB,KAAKrQ,KAAMI,EAAOC,GAChE,IAAIg4B,EAAar4B,KAAKu3B,UAAU3C,eAChC,IAAI0D,EAAet4B,KAAKu3B,UAAU5C,iBAClC,IAAI9qB,EAAQklB,GAASsJ,EAAW91B,IAAK81B,EAAWr0B,MAAQs0B,EAAa/1B,IAAM+1B,EAAat0B,KACxF,IAAI1H,EAAU0D,KAAK1D,QAEnB,IAAI0H,EAAMmpB,GAASkL,EAAWr0B,IAAKwvB,EAAYxvB,IAAM6F,GACrD,IAAItH,EAAM4qB,GAASkL,EAAWr0B,IAAKwvB,EAAYjxB,IAAMsH,GAErD,MAAO,CACH7F,IAAKA,EACLzB,IAAKA,EACL4sB,SAAU7yB,EAAQo7B,iBAAmBp7B,EAAQ6yB,SAC7CE,aAAc/yB,EAAQq7B,qBAAuBr7B,EAAQ+yB,eAI7D0D,WAAY,SAASlpB,EAAOwM,GACxB,GAAIrW,KAAKk4B,UACL,MAAO,GAGX,IAAI57B,EAAU0D,KAAK1D,QACnB,IAAIi8B,EAAMj8B,EAAQo7B,kBAAoBnD,GACtC,IAAI4D,EAAcn4B,KAAKu3B,UAAUziB,QACjC,IAAIxT,EAAMtB,KAAKu3B,UAAU3C,eACzB,IAAIjB,EAAWryB,EAAI0C,IACnB,IAAI4vB,EAAWtyB,EAAIiB,IAEnB,IAAI+a,EAAWhb,KAAKsH,IAAI5J,KAAK+qB,YAAY1U,IACzC,IAAI0N,EAAQ6P,EAAWD,EACvB,IAAIxxB,EAAQnC,KAAKirB,aAAaphB,EAAOka,GACrC,IAAIiP,EAAW1wB,KAAKzF,MAAMygB,EAAWnb,GACrC,IAAI8wB,EAAW3wB,KAAKzF,OAAO,EAAIygB,GAAYnb,GAE3C,IAAI8X,EAAQja,KAAKu3B,UAAUj7B,QAC3B,IAAI6yB,EAAWlV,EAAMkV,SACrB,IAAInrB,EAAM,IAAIpD,KAAK+yB,EAAS9yB,UAAYmyB,GACxC,IAAIzwB,EAAM,IAAI3B,KAAKgzB,EAAS/yB,UAAYoyB,GAExC,GAAIsF,EAAK,CACL,IAAIjC,EAAoBh6B,EAAQg6B,kBAChC,IAAIC,EAAgBj6B,EAAQi6B,cAE5B,IAAIiC,EAAUp1B,GAAKkzB,EAAkBnH,IAAaoH,EAAgBhK,GAAc4C,GAChF,IAAIsJ,EAAY1J,GAAS6E,EAAUD,GACnC,IAAIhqB,EAAOolB,GAASxsB,EAAKyB,GACzB,IAAI00B,EAAgBpE,GAAWv4B,QAAQozB,GACvC,IAAIwJ,EAAkBtL,EAEtB,GAAI1jB,EAAO4iB,GAAc4C,IAAaA,IAAa7D,GAAc,CAC7D6D,EAAWmF,GAAWoE,EAAgB,GACtCC,EAAmBv1B,GAAKkzB,EAAkBnH,IAC1C9B,GAASoL,GAAalC,EAAgB,GAAKoC,EAAmBpM,GAAc4C,IAAa,EACzFnrB,EAAMmpB,GAASwG,EAAUtG,GACzB9qB,EAAM4qB,GAASyG,GAAWvG,QAEvB,GAAI1jB,EAAO6uB,GAAWrJ,IAAarD,GAAO,CAC7C,IAAI8M,EAAY,EAEhB,EAAG,CACCF,IACAvJ,EAAWmF,GAAWoE,GACtBE,EAAY,EACZvL,EAAQ,EAAId,GAAc4C,GAC1B,EAAG,CACCwJ,EAAmBrC,EAAkBnH,GAAUyJ,GAC/CA,UACKA,EAAYtC,EAAkBnH,GAAUtzB,QAAUwxB,EAAQsL,EAAmBF,SACjFtJ,IAAarD,IAASuB,EAAQsL,EAAmBF,GAE1DpL,GAASA,EAAQsL,EAAmBF,GAAa,EACjD,GAAIpL,EAAQ,EAAG,CACXrpB,EAAMmpB,GAASwG,GAAWtG,GAC1B9qB,EAAM4qB,GAASyG,EAAUvG,GACzBrpB,EAAMmpB,GAASnpB,EAAKX,EAAWd,EAAK41B,EAAYn0B,IAAKm0B,EAAY51B,KAAOA,GACxEA,EAAM4qB,GAAS5qB,EAAKc,EAAWW,EAAKm0B,EAAYn0B,IAAKm0B,EAAY51B,KAAOyB,KAKpF,GAAIA,GAAOzB,GAAOwsB,GAASxsB,EAAKyB,GAAO,EACnC,MAAO,CACHA,IAAKA,EACLzB,IAAKA,EACL4sB,SAAU7yB,EAAQo7B,iBAAmBp7B,EAAQ6yB,SAC7CE,aAAc/yB,EAAQq7B,qBAAuBr7B,EAAQ+yB,eAKjE6D,UAAW,SAASrpB,EAAOwM,GACvB,IAAI8hB,EAAcn4B,KAAKu3B,UAAUziB,QACjC,IAAIiP,EAAQ/jB,KAAK+yB,WAAWlpB,EAAOwM,GAEnC,GAAI0N,EAAO,CACP,GAAIA,EAAM/f,IAAMm0B,EAAYn0B,IACxB+f,EAAM/f,IAAMm0B,EAAYn0B,IAE5B,GAAI+f,EAAMxhB,IAAM41B,EAAY51B,IACxBwhB,EAAMxhB,IAAM41B,EAAY51B,IAIhC,OAAOwhB,GAGXA,MAAO,WACH,OAAO/jB,KAAKu3B,UAAU3C,gBAG1BxR,aAAc,WACV6M,GAAapoB,GAAGub,aAAa/S,KAAKrQ,MAClCA,KAAK64B,qBAGThV,YAAa,WACToM,GAAapoB,GAAGgc,YAAYxT,KAAKrQ,MACjCA,KAAKg4B,YAAc,IAGvBnQ,cAAe,WACX7nB,KAAK84B,qBACL7I,GAAapoB,GAAGggB,cAAcxX,KAAKrQ,OAGvC84B,mBAAoB,WAChB,IAAIx3B,EAAMtB,KACV,IAAI1D,EAAUgF,EAAIhF,QAClB,IAAI07B,EAAc12B,EAAI02B,YACtB,GAAIA,EAAYn8B,SAAW,EACvB,OAGJ,IAAIuoB,EAAUpkB,KAAKokB,UACnB,IAAI5K,EAAWld,EAAQkd,SACvB,IAAI6K,EAAS/nB,EAAQ07B,YAAY3T,QAAU/nB,EAAQqmB,OAAO0B,OAE1D,IAAI4M,EAAa+G,EAAY,GAC7B,GAAI/G,EAAY,CACZ,IAAI3T,EAAW9D,EAAW4K,EAAQxY,GAAMqlB,EAAWllB,IAAIC,SAAW,EAAKoY,EAAQzY,GAC/E3L,KAAKuoB,cAAc0I,EAAY5M,EAAQ/G,GAG3C,IAAIoM,EAAYsO,EAAY,GAC5B,GAAItO,EAAW,CACX,IAAIqP,EAAavf,EAAW4K,EAAQtY,GAAM4d,EAAU3d,IAAIC,SAAW,EAAKoY,EAAQvY,GAChF7L,KAAKuoB,cAAcmB,EAAWrF,EAAQ0U,KAI9CjV,iBAAkB,WACdmM,GAAapoB,GAAGic,iBAAiBzT,KAAKrQ,MACtCA,KAAKg5B,yBAGTjI,qBAAsB,WAClBd,GAAapoB,GAAGkpB,qBAAqB1gB,KAAKrQ,MAC1CA,KAAKi5B,yBAGTA,sBAAuB,WACnB,IAAI33B,EAAMtB,KACV,IAAIg4B,EAAc12B,EAAI02B,YACtB,IAAIrV,EAASrhB,EAAIqhB,OACjB,GAAIqV,EAAYn8B,SAAW,EACvB,OAGJ,SAASq9B,EAAKC,EAAY/Z,GACtB,IAAKA,EAAM9iB,QAAQ6V,SAAWiN,EAAMrT,IAAIsB,SAAS8rB,EAAWptB,KAAM,CAC9DqT,EAAM9iB,QAAQ6V,QAAU,MACxB,OAAO,KAGX,OAAO,MAGX,IAAIinB,EAAkBpB,EAAY,GAClC,GAAIoB,GAAmBA,EAAgB98B,QAAQ6V,QAC3C,IAAK,IAAIzV,EAAI,EAAGA,EAAIimB,EAAO9mB,OAAQa,IAAK,CACpC,IAAI2Q,EAAW6rB,EAAKE,EAAiBzW,EAAOjmB,IAC5C,IAAK2Q,EACD,MAKZ,IAAIgsB,EAAiBrB,EAAY,GACjC,GAAIqB,GAAkBA,EAAe/8B,QAAQ6V,QACzC,IAAK,IAAImnB,EAAM3W,EAAO9mB,OAAS,EAAGy9B,EAAM,IAAKA,EAAK,CAC9C,IAAIC,EAAaL,EAAKG,EAAgB1W,EAAO2W,IAC7C,IAAKC,EACD,QAMhBxjB,WAAY,WACR,IAAIhK,EAAMkkB,GAAapoB,GAAGkO,WAAW1F,KAAKrQ,MAC1C,IAAIg4B,EAAch4B,KAAKg4B,YAEvB,IAAK,IAAIt7B,EAAI,EAAGA,EAAIs7B,EAAYn8B,OAAQa,IAAK,CACzC,IAAI0iB,EAAQ4Y,EAAYt7B,GACxB,GAAI0iB,EAAM9iB,QAAQ6V,QACdpG,EAAIG,KAAKkT,EAAMrT,KAIvB,OAAOA,GAGXmY,gBAAiB,SAASxc,EAAOic,EAAcK,GAC3C,GAAIA,SAAsB,EAAKA,EAAe,GAE9C,IAAI1nB,EAAU0D,KAAK1D,QACnB,IAAIoY,EAAWpY,EAAQ+2B,YAAc/2B,EAAQs7B,aAAet7B,EAAQ+2B,UAAU3rB,GAAS,KACvF,IAAI0lB,EAAOptB,KAAK+3B,cAAchD,OAAOrtB,GACrC,IAAI8xB,EAAa7V,EAAa8V,YAAYz5B,KAAK+3B,cAAcz7B,QAAQ6yB,UAErExL,EAAa/F,OAAS+F,EAAa/F,QAAU4b,EAC7CxV,EAAatP,SAAWA,EAExB,IAAI8H,EAAOxc,KAAKqpB,cAAc+D,EAAMzJ,EAAcK,GAClD,GAAIxH,EACA,OAAO,IAAIe,GAAU6P,EAAM5Q,EAAM9U,EAAOgN,EAAUiP,IAI1DkV,kBAAmB,WACf,IAAI/2B,EAAS9B,KAEb,IAAIsB,EAAMtB,KAAK+3B,cACf,IAAIxC,EAAej0B,EAAIi0B,aACvB,IAAIE,EAAan0B,EAAIm0B,WACrB,IAAIn5B,EAAU0D,KAAK1D,QACnB,IAAIqnB,EAAepsB,EAAE2H,OAAO,GAAI5C,EAAQqmB,OAAQrmB,EAAQ07B,YAAa,CACjElqB,MAAO9U,EACP4Z,OAAQtW,EAAQsW,SAGpB,GAAI+Q,EAAaxR,UAAY,KACzB,OAGJnS,KAAK0jB,uBAAuBC,GAC5BA,EAAa3F,cAAgBhlB,EAE7B,GAAI2qB,EAAarW,WAAa,OAAQ,CAClCqW,EAAarW,SAAW,EACxBhR,EAAQ08B,sBAAwB,KAGpC,IAAIQ,EAAa7V,EAAa8V,YAAYz5B,KAAK+3B,cAAcz7B,QAAQ6yB,UACrExL,EAAa/F,OAAS+F,EAAa/F,QAAU4b,EAE7C,IAAIE,EAAc,SAAUhyB,EAAO0lB,EAAM5Q,GACrC,GAAIA,EAAM,CACN,IAAI4C,EAAQ,IAAI7B,GAAU6P,EAAM5Q,EAAM9U,EAAO,KAAMic,GACnD7hB,EAAOc,OAAOwc,GACdtd,EAAOk2B,YAAYx4B,KAAK4f,KAIhC,IAAIua,EAAY35B,KAAKqpB,cAAckM,EAAc5R,EAAc,CAAEjc,MAAO,EAAGuc,MAAO,IAClFyV,EAAY,EAAGnE,EAAcoE,GAE7B,IAAIC,EAAU55B,KAAKqpB,cAAcoM,EAAY9R,EAAc,CAAEjc,MAAO,EAAGuc,MAAO,IAC9EyV,EAAY,EAAGjE,EAAYmE,IAG/BZ,sBAAuB,WACnB,IAAIl3B,EAAS9B,KAEb,IAAI2iB,EAAS3iB,KAAKg4B,YAClB,IAAKh4B,KAAK1D,QAAQ08B,uBAAyBh5B,KAAK1D,QAAQkd,UAAYmJ,EAAO9mB,SAAW,EAClF,OAGJ,IAAIg+B,EAAc,SAAUza,EAAOmG,EAAe7d,GAC9C,IAAIjL,EAAQ6F,KAAKsH,IAAI2b,EAAc7d,EAAQ,GAAK6d,EAAc7d,IAAU,EACxE,IAAI8D,EAAQ1J,EAAO8mB,qBAAqBxJ,EAAMrT,IAAKtP,GACnD,GAAI+O,IAAU,EAAG,CACb4T,EAAM9iB,QAAQgR,SAAW9B,EACzB4T,EAAM/N,OAAO,IAAI/F,KAIzB,IAAIia,EAAgBvlB,KAAKylB,wBACzBoU,EAAYlX,EAAO,GAAI4C,EAAe,GACtCsU,EAAYlX,EAAO,GAAI4C,EAAeA,EAAc1pB,OAAS,IAGjE02B,cAAe,SAASj3B,GACpB,OAAO0E,KAAKu3B,UAAU1C,WAAWv5B,IAGrC2tB,KAAM,SAAS/gB,EAAMwe,EAAIoC,GACrB,IAAIgR,EAAY95B,KAAKu3B,UACrB,IAAIn3B,EAAQ8H,EACZ,IAAI7H,EAAMqmB,EAEV,GAAItmB,aAAiBQ,KACjBR,EAAQ05B,EAAU1K,UAAUhvB,GAGhC,GAAIC,aAAeO,KACfP,EAAMy5B,EAAU1K,UAAU/uB,GAG9B,IAAI4oB,EAAOjpB,KAAKymB,QAAQrmB,EAAOC,EAAKyoB,GACpC,GAAIG,EACA,OAAOA,EAAKrb,UAIpB6Y,QAAS,SAASxb,EAAGxE,EAAGqiB,GACpB,IAAI1oB,EAAQ6K,EACZ,IAAI5K,EAAMoG,EAEV,UAAWrG,IAAU9F,EACjB8F,EAAQJ,KAAKuyB,cAAcnyB,GAG/B,UAAWC,IAAQ/F,EACf+F,EAAML,KAAKuyB,cAAclyB,GAG7B,OAAO4vB,GAAapoB,GAAG4e,QAAQpW,KAAKrQ,KAAMI,EAAOC,EAAKyoB,IAG1DwB,WAAY,WACR,IAAIhuB,EAAU0D,KAAK1D,QACnB,IAAIynB,EAAQyQ,GAAcl4B,EAAQg0B,eAElC,MAAO,CACHtsB,IAAKspB,EAAOvJ,EAAM/f,KAClBzB,IAAK+qB,EAAOvJ,EAAMxhB,OAI1BqwB,WAAY,SAASlrB,EAAOoN,GACxB,OAAO9U,KAAKu3B,UAAUxC,OAAOrtB,EAAOoN,IAGxC+d,gBAAiB,WACb,OAAO7yB,KAAKu3B,UAAUzC,eAG1BrE,aAAc,WACV,OAAOzwB,KAAKu3B,UAAU5C,kBAG1B1M,mBAAoB,WAChB,OAAQjoB,KAAK+3B,cAAcz7B,QAAQ8uB,WAGvCC,mBAAoB,WAChB,GAAIrrB,KAAKk4B,UACL,OAGJl4B,KAAK1D,QAAQ+zB,WAAarwB,KAAKu3B,UAAUrwB,UAG7CwrB,YAAa,SAASroB,GAClB,IAAI3C,EAAQ1H,KAAKwyB,mBAAmBnoB,GAEpC,GAAI3C,IAAU,KACV,OAAO,KAGX,OAAO1H,KAAKu3B,UAAUxC,OAAOrtB,IAGjCirB,WAAY,SAASr3B,GACjB,OAAO0E,KAAKu3B,UAAU5E,WAAWr3B,IAGrCw4B,oBAAqB,WACjB,IAAI/P,EAAQ/jB,KAAKu3B,UAAUjN,aAC3B,MAAO,CACHtmB,IAAKhE,KAAKu3B,UAAU5E,WAAW5O,EAAM/f,KACrCzB,IAAKvC,KAAKu3B,UAAU5E,WAAW5O,EAAMxhB,OAI7CmuB,WAAY,WACR,OAAO1wB,KAAKu3B,UAAUziB,SAG1Bif,WAAY,WACR,OAAO/zB,KAAKu3B,UAAUxD,cAG1BmE,QAAS,WACL,OAAQl4B,KAAK1D,QAAQg0B,cAAcz0B,QAGvC+0B,aAAc,WACV,GAAI5wB,KAAK1D,QAAQ24B,kBAAoB,OAASj1B,KAAKk4B,UAC/C,OAAOl4B,KAAK+jB,QAGhB,IAAIznB,EAAU0D,KAAK1D,QACnB,IAAI+7B,EAAa7D,GAAcl4B,EAAQg0B,eAEvC,IAAIwJ,EAAY,IAAI9E,GAAUqD,EAAWr0B,IAAKq0B,EAAW91B,IAAKhL,EAAE2H,OAAO,GAAI5C,EAAS,CAChF8uB,UAAW,MACX6J,gBAAiB,KACjBI,WAAY/4B,EAAQ8uB,aAGxB,OAAO0O,EAAUlF,kBAyBzB,SAASmF,GAAY/1B,EAAKzB,EAAKy3B,GAC3B,IAAKh2B,IAAQzB,EACT,OAAO,EAGX,IAAI03B,EAEJ,GAAIj2B,GAAO,GAAKzB,GAAO,EAAG,CACtB,IAAI6nB,EAAWpmB,IAAQzB,EAAM,EAAIyB,EAEjC,IAAI2F,GAAQpH,EAAM6nB,GAAY7nB,EAC9B,GAAIy3B,IAAW,QAAWA,GAAUrwB,EAAOyqB,GACvC,OAAO,EAGX6F,EAAU33B,KAAKC,IAAI,EAAG6nB,GAAa7nB,EAAM6nB,GAAY,QAErD6P,EAAUj2B,EAGd,OAAOi2B,EAGX,SAASC,GAAYl2B,EAAKzB,EAAKy3B,GAC3B,IAAKh2B,IAAQzB,EACT,OAAO,EAGX,IAAI43B,EAEJ,GAAIn2B,GAAO,GAAKzB,GAAO,EAAG,CACtB,IAAI8nB,EAAWrmB,IAAQzB,EAAM,EAAIA,EAEjC,IAAIoH,EAAOrH,KAAKsH,KAAKygB,EAAWrmB,GAAOqmB,GACvC,GAAI2P,IAAW,QAAWA,GAAUrwB,EAAOyqB,GACvC,OAAO,EAGX+F,EAAU73B,KAAK0B,IAAI,EAAGqmB,GAAarmB,EAAMqmB,GAAY,QAErD8P,EAAU53B,EAGd,OAAO43B,EAGX,SAASx3B,GAAMrH,EAAOsoB,GAClB,OAAO/mB,EAAMyF,KAAKK,MAAMrH,EAAQsoB,GAAQA,EAAMrqB,GAGlD,SAASmJ,GAAKpH,EAAOsoB,GACjB,OAAO/mB,EAAMyF,KAAKI,KAAKpH,EAAQsoB,GAAQA,EAAMrqB,GAGjD,SAAS6gC,GAAgB9+B,GACrB,OAAOgH,KAAKC,IAAID,KAAK0B,IAAI1I,EAAO44B,KAAoBA,IA5ExDvwB,GAAkB2zB,GAAkB,CAChC1zB,KAAMxK,EACNupB,OAAQ,CACJ8W,YAAatF,IAEjB6D,YAAa,CACT7lB,QAAS,OAEbmkB,kBAAmB,CACfvJ,aAAc,CAAE,EAAG,GAAI,KACvBD,QAAS,CAAE,EAAG,EAAG,EAAG,GAAI,IACxBD,QAAS,CAAE,EAAG,EAAG,EAAG,GAAI,IACxBD,MAAO,CAAE,EAAG,EAAG,GACfD,KAAM,CAAE,EAAG,EAAG,GACdD,MAAO,CAAE,EAAG,GACZD,OAAQ,CAAE,EAAG,EAAG,EAAG,GACnBD,MAAO,CAAE,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,KAEjC+J,cAAe,KA6DnB,IAAI8D,GAAoB/3B,KAAKwH,IAAI,IAAKvQ,EAAoB,GAEtD+gC,GAAc5X,GAAKxjB,OAAO,CAC1B8B,KAAM,SAASupB,EAAWC,EAAWluB,EAASwV,GAC1C4Q,GAAK7a,GAAG7G,KAAKqP,KAAKrQ,KAAMzI,EAAE2H,OAAO,GAAI5C,EAAS,CAC1CiuB,UAAWA,EACXC,UAAWA,IACX1Y,IAGRV,gBAAiB,SAAS9U,GACtB,IAAIi+B,EAAcC,GAAgBl+B,EAAQiuB,UAAWjuB,EAAQkuB,UAAWluB,GACxE0D,KAAKy6B,aAAeC,GAAiBH,EAAaj+B,GAElD,OAAOq+B,GAAYJ,EAAaj+B,IAGpC4mB,WAAY,WACRljB,KAAKmzB,SAAWnzB,KAAKy6B,aAAaz2B,IAClChE,KAAKozB,SAAWpzB,KAAKy6B,aAAal4B,IAClCvC,KAAK46B,eAAiB56B,KAAKy6B,aAAapV,UACxCrlB,KAAKuqB,UAAYvqB,KAAK1D,QAAQiuB,UAC9BvqB,KAAKwqB,UAAYxqB,KAAK1D,QAAQkuB,WAGlCrgB,MAAO,WACH,OAAO,IAAImwB,GACPt6B,KAAKuqB,UACLvqB,KAAKwqB,UACLjzB,EAAE2H,OAAO,GAAIc,KAAK1D,SAClB0D,KAAK8R,eAIb2gB,WAAY,WACR,OAAO,GAGX1O,MAAO,WACH,IAAIznB,EAAU0D,KAAK1D,QACnB,MAAO,CAAE0H,IAAK1H,EAAQ0H,IAAKzB,IAAKjG,EAAQiG,MAG5Cs4B,aAAc,SAASC,GACnB,GAAIA,IAAc,EACd,OAAO,EAGX,IAAIx+B,EAAU0D,KAAK1D,QACnB,IAAIynB,EAAQznB,EAAQiG,IAAMjG,EAAQ0H,IAElC,OAAO1B,KAAKK,MAAM9F,EAAMknB,EAAQ+W,EAAW5hC,IAAoB,GAGnEq4B,iBAAkB,SAAS1rB,EAAM2f,GAC7B,IAAIlpB,EAAU0D,KAAK1D,QACnB,IAAIgF,EAAMtB,KAAK0qB,WACf,IAAIE,EAAUtpB,EAAIspB,QAClB,IAAIE,EAAaxpB,EAAIwpB,WACrB,IAAI1G,EAAU9iB,EAAI8iB,QAClB,IAAIuG,EAAWrpB,EAAIqpB,SACnB,IAAI5G,EAAQznB,EAAQiG,IAAMjG,EAAQ0H,IAClC,IAAI6F,EAAQ8gB,EAAW5G,EACvB,IAAIH,EAAO/d,EAAOgE,EAClB,IAAIkxB,EAAY/6B,KAAK66B,aAAah1B,GAClC,IAAI2rB,EAAY,GAChB,IAAIle,EAAM8Q,EAAQ0G,GAClB,IAAIkQ,EAAW,EAEf,GAAIxV,EACAwV,EAAWxV,EAAW3f,EAG1B,IAAK,IAAIjK,EAAM,EAAGA,EAAMm/B,EAAWn/B,IAAO,CACtC,GAAIA,EAAMo/B,IAAa,EACnBxJ,EAAUhyB,KAAK3C,EAAMyW,EAAKpa,IAG9Boa,EAAMA,EAAMsQ,EAAOgH,EAGvB,OAAO4G,GAGX/L,sBAAuB,WACnB,OAAOzlB,KAAKuxB,iBAAiBvxB,KAAK1D,QAAQ+oB,YAG9CK,sBAAuB,WACnB,OAAO1lB,KAAKuxB,iBAAiBvxB,KAAK1D,QAAQqpB,YAG9Cc,QAAS,SAASxb,EAAGxE,EAAGqiB,GACpB,GAAIA,SAAe,EAAKA,EAAQ,MAEhC,IAAIxsB,EAAU0D,KAAK1D,QACnB,IAAIgF,EAAMtB,KAAK0qB,WACf,IAAIne,EAAOjL,EAAIiL,KACf,IAAIqe,EAAUtpB,EAAIspB,QAClB,IAAIxG,EAAU9iB,EAAI8iB,QAClB,IAAIuG,EAAWrpB,EAAIqpB,SACnB,IAAI9K,EAAYve,EAAIue,UACpB,IAAI+D,EAAOgH,GAAWD,GAAYruB,EAAQiG,IAAMjG,EAAQ0H,MAExD,IAAI5D,EAAQqD,GAAewH,EAAGxE,GAAK,GACnC,IAAIpG,EAAMoD,GAAegD,EAAGwE,GAAK,GAEjC,GAAI6d,EAAO,CACP1oB,EAAQiD,EAAWjD,EAAO9D,EAAQ0H,IAAK1H,EAAQiG,KAC/ClC,EAAMgD,EAAWhD,EAAK/D,EAAQ0H,IAAK1H,EAAQiG,KAG/C,IAAI4vB,EAAK7vB,KAAK0B,IAAI5D,EAAOC,GAAO/D,EAAQ0H,IACxC,IAAIouB,EAAK9vB,KAAKC,IAAInC,EAAOC,GAAO/D,EAAQ0H,IAExC,IAAIiuB,EAAU,IAAI3mB,EAAI8Y,EAAQzY,GAAIyY,EAAQxY,GAAIwY,EAAQzY,GAAIyY,EAAQxY,IAClEqmB,EAAQ1lB,EAAO,GAAK6tB,GAAgBva,EAAY+D,GAAQgH,EAAU,EAAIuH,EAAKC,IAC3EH,EAAQ1lB,EAAO,GAAK6tB,GAAgBva,EAAY+D,GAAQgH,EAAU,EAAIwH,EAAKD,IAE3E,OAAOF,GAGXgJ,SAAU,SAAS5wB,GACf,IAAI/N,EAAU0D,KAAK1D,QACnB,IAAIiG,EAAMvI,OAAOsC,EAAQiG,KACzB,IAAIyB,EAAMhK,OAAOsC,EAAQ0H,KACzB,IAAI3H,EAAS2D,KAAK+qB,YAAY1gB,GAC9B,IAAI6wB,EAAc7+B,GAAUkG,EAAMyB,GAElC,GAAI3H,EAAS,GAAKA,EAAS,EACvB,OAAO,KAGX,IAAIf,EAAQ0I,EAAMk3B,EAClB,OAAOr+B,EAAMvB,EAAO/B,IAGxBu5B,eAAgB,SAAS3wB,GACrB,IAAI7F,EAAU0D,KAAK1D,QACnB,IAAIkd,EAAWld,EAAQkd,SACvB,IAAIsL,EAAUxoB,EAAQwoB,QACtB,IAAIviB,EAAMjG,EAAQiG,IAClB,IAAIyB,EAAM1H,EAAQ0H,IAClB,IAAI1C,EAAMtB,KAAK0qB,WACf,IAAIC,EAAWrpB,EAAIqpB,SACnB,IAAI5G,EAAQxhB,EAAMyB,EAClB,IAAI6F,EAAQ8gB,EAAW5G,EACvB,IAAI1nB,EAASQ,EAAMsF,EAAQ0H,EAAOtQ,GAElC,IAAKigB,GAAYsL,MAActL,GAAYsL,GACvCzoB,GAAUA,EAGd,MAAO,CACH2H,IAAKA,EAAM3H,EACXkG,IAAKA,EAAMlG,EACXA,OAAQA,IAIhBonB,YAAa,WACT,OAAOzjB,KAAK66B,aAAa76B,KAAK1D,QAAQ+oB,YAG1CnB,gBAAiB,SAASxc,EAAOic,EAAcK,GAC3C,IAAI1nB,EAAU0D,KAAK1D,QACnB,IAAIhB,EAAQuB,EAAMP,EAAQ0H,IAAO0D,EAAQpL,EAAQ+oB,UAAY9rB,GAC7D,IAAIijB,EAAOxc,KAAKqpB,cAAc/tB,EAAOqoB,EAAcK,GAEnD,OAAO,IAAIzG,GAAUjiB,EAAOkhB,EAAM9U,EAAO,KAAMic,IAGnDuF,iBAAkB,SAAS5tB,GACvB,IAAIyoB,EAAQ/jB,KAAK+jB,QACjB,OAAOA,EAAM/f,KAAO1I,GAASA,GAASyoB,EAAMxhB,KAGhDgxB,IAAK,SAASpxB,GACV,IAAI4hB,EAAQ/jB,KAAK8yB,eAAe3wB,GAChC,OAAOnC,KAAKkqB,WAAWnG,EAAM/f,IAAK+f,EAAMxhB,IAAKvC,KAAKmzB,SAAUnzB,KAAKozB,SAAUrP,EAAM1nB,SAGrFm3B,YAAa,SAASpzB,EAAOC,GACzB,IAAIoyB,EAAazyB,KAAKi7B,SAAS76B,GAC/B,IAAI+6B,EAAWn7B,KAAKi7B,SAAS56B,GAC7B,IAAI2D,EAAM1B,KAAK0B,IAAIyuB,EAAY0I,GAC/B,IAAI54B,EAAMD,KAAKC,IAAIkwB,EAAY0I,GAE/B,GAAIn7B,KAAKo7B,aAAap3B,EAAKzB,GACvB,MAAO,CACHyB,IAAKA,EACLzB,IAAKA,IAKjBwwB,WAAY,SAASlpB,EAAOwM,GACxB,IAAIiH,EAAWhb,KAAKsH,IAAI5J,KAAK+qB,YAAY1U,IACzC,IAAI0N,EAAQ/jB,KAAK1D,QAAQiG,IAAMvC,KAAK1D,QAAQ0H,IAC5C,IAAI7B,EAAQnC,KAAKirB,aAAaphB,EAAOka,GACrC,IAAIiP,EAAW1V,EAAWnb,EAC1B,IAAI8wB,GAAY,EAAI3V,GAAYnb,EAChC,IAAI6B,EAAMnH,EAAMmD,KAAK1D,QAAQ0H,IAAMgvB,EAAUz5B,GAC7C,IAAIgJ,EAAM1F,EAAMmD,KAAK1D,QAAQiG,IAAM0wB,EAAU15B,GAE7C,GAAIgJ,EAAMyB,EAAMq2B,GACZ93B,EAAMyB,EAAMq2B,GAGhB,MAAO,CACHr2B,IAAKA,EACLzB,IAAKA,IAIb2wB,UAAW,SAASrpB,EAAOwM,GACvB,IAAI/U,EAAMtB,KACV,IAAImzB,EAAW7xB,EAAI6xB,SACnB,IAAIC,EAAW9xB,EAAI8xB,SACnB,IAAIrP,EAAQ/jB,KAAK+yB,WAAWlpB,EAAOwM,GAEnC,MAAO,CACHrS,IAAKX,EAAW0gB,EAAM/f,IAAKmvB,EAAUC,GACrC7wB,IAAKc,EAAW0gB,EAAMxhB,IAAK4wB,EAAUC,GACrCiI,YAAa,QAIrBD,aAAc,SAASp3B,EAAKzB,GACxB,OAAOA,EAAMyB,EAAMq2B,MAI3B,SAASG,GAAgBjQ,EAAWC,EAAWluB,GAC3C,IAAI++B,EAAc/+B,EAAQ++B,YAE1B,IAAIC,EAAUvB,GAAYxP,EAAWC,EAAW6Q,GAChD,IAAIE,EAAUrB,GAAY3P,EAAWC,EAAW6Q,GAEhD,IAAIhW,EAAY3b,GAAc4xB,EAASC,GACvC,IAAIhB,EAAc,CACdlV,UAAWA,GAGf,GAAI/oB,EAAQk/B,mBAAqB,MAAO,CACpC,GAAIF,EAAU,GAAKG,GAAeH,EAASjW,EAAW,EAAI,GACtDiW,GAAWjW,EAGf,GAAIkW,EAAU,GAAKE,GAAeF,EAASlW,EAAW,EAAI,GACtDkW,GAAWlW,EAInBkV,EAAYv2B,IAAMrB,GAAM24B,EAASjW,GACjCkV,EAAYh4B,IAAMG,GAAK64B,EAASlW,GAEhC,OAAOkV,EAGX,SAASG,GAAiBH,EAAaj+B,GACnC,MAAO,CACH0H,IAAKxH,EAAQF,EAAQ0H,KAAO1B,KAAK0B,IAAIu2B,EAAYv2B,IAAK1H,EAAQ0H,KAAOu2B,EAAYv2B,IACjFzB,IAAK/F,EAAQF,EAAQiG,KAAOD,KAAKC,IAAIg4B,EAAYh4B,IAAKjG,EAAQiG,KAAOg4B,EAAYh4B,IACjF8iB,UAAWkV,EAAYlV,WAI/B,SAASqW,GAAgBp/B,EAAS2iB,GAC9B,IAAK,IAAIrjB,EAAM,EAAGA,EAAMqjB,EAAOpjB,OAAQD,IAAO,CAC1C,IAAIiC,EAAQohB,EAAOrjB,GACnB,GAAIU,EAAQuB,KAAW,KACnBvB,EAAQuB,GAASoG,WAK7B,SAAS02B,GAAYJ,EAAaoB,GAC9B,IAAIr/B,EAAUq/B,EACd,IAAIC,EAAYC,EAEhB,GAAIF,EAAa,CACbD,GAAgBC,EAAa,CAAE,MAAO,QAEtCC,EAAap/B,EAAQm/B,EAAY33B,KACjC63B,EAAar/B,EAAQm/B,EAAYp5B,KAEjC,IAAIu5B,EAAgBF,GAAcC,EAElC,GAAIC,EACA,GAAIH,EAAY33B,MAAQ23B,EAAYp5B,IAChC,GAAIo5B,EAAY33B,IAAM,EAClB23B,EAAY33B,IAAM,OAElB23B,EAAYp5B,IAAM,EAK9B,GAAIo5B,EAAYtW,UAAW,CACvBkV,EAAYv2B,IAAMrB,GAAM43B,EAAYv2B,IAAK23B,EAAYtW,WACrDkV,EAAYh4B,IAAMG,GAAK63B,EAAYh4B,IAAKo5B,EAAYtW,gBACjD,GAAIyW,EAAe,CACtBx/B,EAAU9D,EAAW+hC,EAAaoB,GAGlCpB,EAAYlV,UAAY3b,GAAcpN,EAAQ0H,IAAK1H,EAAQiG,MAInEg4B,EAAY5U,WAAarpB,EAAQ+oB,WAAakV,EAAYlV,WAAa,EAEvE,IAAInnB,EAAS1F,EAAW+hC,EAAaj+B,GACrC,GAAI4B,EAAO8F,KAAO9F,EAAOqE,IACrB,GAAIq5B,IAAeC,EACf39B,EAAOqE,IAAMrE,EAAO8F,IAAM9F,EAAOmnB,eAC9B,IAAKuW,GAAcC,EACtB39B,EAAO8F,IAAM9F,EAAOqE,IAAMrE,EAAOmnB,UAIzC,OAAOnnB,EAGX,SAASu9B,GAAengC,EAAOygC,EAASC,GACpC,IAAIC,EAAYp/B,EAAMyF,KAAKsH,IAAItO,EAAQygC,GAAUxiC,GACjD,IAAI2iC,EAAYH,GAAW,EAAIC,GAE/B,OAAOC,IAAc,GAAKA,EAAYC,EAG1Cv4B,GAAkB22B,GAAa,CAC3B12B,KAAM,UACNI,IAAK,EACLzB,IAAK,EACLiX,SAAU,KACVyN,eAAgB,CACZ9U,QAAS,KACT1V,MAAO,EACPoK,MAAO/N,GAEX6pB,OAAQ,CACJ/E,OAAQ,0BAEZhL,OAAQ,IAGZ,IAAIupB,GAAkB,IAElBC,GAAgB1Z,GAAKxjB,OAAO,CAC5B8B,KAAM,SAASupB,EAAWC,EAAWmQ,EAAa7oB,GAC9C,IAAI9N,EAAMspB,EAAO/C,GACjB,IAAIhoB,EAAM+qB,EAAO9C,GAEjB,IAAI1J,EAAchP,EAAamP,KAC/B,IAAI3kB,EAAUq+B,GAAe,GAC7Br+B,EAAU9D,EAAW8D,GAAW,GAAI,CAChC0H,IAAKwc,GAAUM,EAAaxkB,EAAQ0H,KACpCzB,IAAKie,GAAUM,EAAaxkB,EAAQiG,KACpCgpB,kBAAmBsE,GAAW/O,EAAaxkB,EAAQ+/B,oBAAsB//B,EAAQivB,mBACjFiC,aAAc/M,GAASnkB,EAASwkB,KAEpCxkB,EAAUggC,GAAct4B,EAAKzB,EAAKjG,GAElComB,GAAK7a,GAAG7G,KAAKqP,KAAKrQ,KAAM1D,EAASwV,GAEjC9R,KAAK8gB,YAAcA,EACnB9gB,KAAKuqB,UAAYvmB,EACjBhE,KAAKwqB,UAAYjoB,EAEjB,IAAIirB,EAAelxB,EAAQkxB,cAAgB,EAC3CxtB,KAAKmzB,SAAWnE,GAAOJ,GAAUI,GAAOhrB,GAAO,EAAG1H,EAAQ6yB,SAAU3B,IACpExtB,KAAKozB,SAAWpE,GAAOH,GAASG,GAAOzsB,GAAO,EAAGjG,EAAQ6yB,SAAU3B,KAGvErjB,MAAO,WACH,OAAO,IAAIiyB,GAAcp8B,KAAKuqB,UAAWvqB,KAAKwqB,UAAWjzB,EAAE2H,OAAO,GAAIc,KAAK1D,SAAU0D,KAAK8R,eAG9FiS,MAAO,WACH,IAAIznB,EAAU0D,KAAK1D,QACnB,MAAO,CAAE0H,IAAK1H,EAAQ0H,IAAKzB,IAAKjG,EAAQiG,MAG5Cs4B,aAAc,SAASC,GACnB,IAAIx+B,EAAU0D,KAAK1D,QAEnB,OAAOgG,KAAKK,MACR4sB,GAASjzB,EAAQ0H,IAAK1H,EAAQiG,IAAKjG,EAAQ6yB,UAAY2L,EAAY,IAI3EvJ,iBAAkB,SAAS3N,GACvB,IAAItnB,EAAU0D,KAAK1D,QACnB,IAAIgF,EAAMtB,KAAK0qB,WACf,IAAI6R,EAAMj7B,EAAIspB,QACd,IAAID,EAAWrpB,EAAIqpB,SACnB,IAAIvqB,EAAQkB,EAAIue,UAChB,IAAIkb,EAAY/6B,KAAK66B,aAAajX,GAClC,IAAI4Y,EAAYzN,GAASzyB,EAAQiG,IAAKjG,EAAQ0H,KAC9C,IAAI6F,EAAQ8gB,EAAW6R,EACvB,IAAIhP,EAAelxB,EAAQkxB,cAAgB,EAE3C,IAAIgE,EAAY,CAAEpxB,GAClB,IAAK,IAAI1D,EAAI,EAAGA,EAAIq+B,EAAWr+B,IAAK,CAChC,IAAI0wB,EAAOe,GAAY7xB,EAAQ0H,IAAKtH,EAAIknB,EAAMtnB,EAAQ6yB,SAAU3B,GAChE,IAAIla,EAAMlT,EAAQ2uB,GAAS3B,EAAM9wB,EAAQ0H,KAAO6F,EAAQ0yB,EAExD/K,EAAUhyB,KAAK3C,EAAMyW,EAAKpa,IAG9B,OAAOs4B,GAGX/L,sBAAuB,WACnB,OAAOzlB,KAAKuxB,iBAAiBvxB,KAAK1D,QAAQ+oB,YAG9CK,sBAAuB,WACnB,OAAO1lB,KAAKuxB,iBAAiBvxB,KAAK1D,QAAQqpB,YAG9Cc,QAAS,SAASxb,EAAGxE,EAAGqiB,GACpB,OAAOwR,GAAY/5B,UAAUkmB,QAAQpW,KACjCrQ,KAAMwgB,GAAUxgB,KAAK8gB,YAAa7V,GAAIuV,GAAUxgB,KAAK8gB,YAAara,GAAIqiB,IAI9EmS,SAAU,SAAS5wB,GACf,IAAI/O,EAAQg/B,GAAY/5B,UAAU06B,SAAS5qB,KAAKrQ,KAAMqK,GAEtD,OAAO/O,IAAU,KAAOgyB,EAAOhyB,GAAS,MAG5CmoB,YAAa,WACT,OAAOzjB,KAAK66B,aAAa76B,KAAK1D,QAAQ+oB,YAG1CnB,gBAAiB,SAASxc,EAAOic,EAAcK,GAC3C,IAAI1nB,EAAU0D,KAAK1D,QACnB,IAAID,EAASqL,EAAQpL,EAAQ+oB,UAC7B,IAAImI,EAAelxB,EAAQkxB,cAAgB,EAC3C,IAAIJ,EAAO9wB,EAAQ0H,IAEnB,GAAI3H,EAAS,EACT+wB,EAAOe,GAAYf,EAAM/wB,EAAQC,EAAQ6yB,SAAU3B,GAGvD,IAAIgM,EAAa7V,EAAa8V,YAAYn9B,EAAQ6yB,UAClDxL,EAAa/F,OAAS+F,EAAa/F,QAAU4b,EAE7C,IAAIhd,EAAOxc,KAAKqpB,cAAc+D,EAAMzJ,EAAcK,GAClD,OAAO,IAAIzG,GAAU6P,EAAM5Q,EAAM9U,EAAO,KAAMic,IAGlDmP,eAAgB,SAAS3wB,GACrB,IAAI7F,EAAU0D,KAAK1D,QACnB,IAAI8nB,EAAUpkB,KAAKokB,UACnB,IAAI5K,EAAWld,EAAQkd,SACvB,IAAIsL,EAAUxoB,EAAQwoB,QACtB,IAAIhd,EAAO0R,EAAW4K,EAAQpY,SAAWoY,EAAQ3nB,QACjD,IAAIsnB,EAAQ/jB,KAAK+jB,QACjB,IAAIla,EAAQ/B,EAAOinB,GAAShL,EAAMxhB,IAAKwhB,EAAM/f,KAE7C,IAAI3H,EAASQ,EAAMsF,EAAQ0H,EAAOtQ,GAClC,IAAKigB,GAAYsL,MAActL,GAAYsL,GACvCzoB,GAAUA,EAGd,IAAI6L,EAAOilB,GAAS7wB,EAAQ0H,IAAK3H,GACjC,IAAIqqB,EAAKyG,GAAS7wB,EAAQiG,IAAKlG,GAE/B,MAAO,CACH2H,IAAKkE,EACL3F,IAAKmkB,EACLrqB,OAAQA,IAIhB6sB,iBAAkB,SAAS5tB,GACvB,IAAIyoB,EAAQ/jB,KAAK+jB,QAEjB,OAAO+K,GAAaxzB,EAAOyoB,EAAM/f,MAAQ,GAAK8qB,GAAaxzB,EAAOyoB,EAAMxhB,MAAQ,GAGpFgxB,IAAK,SAASpxB,GACV,IAAI4hB,EAAQ/jB,KAAK8yB,eAAe3wB,EAAO,MACvC,IAAIs6B,EAAgBz8B,KAAKkqB,WAAW8E,GAAOjL,EAAM/f,KAAMgrB,GAAOjL,EAAMxhB,KAAMvC,KAAKmzB,SAAUnzB,KAAKozB,SAAUrP,EAAM1nB,QAE9G,GAAIogC,EACA,MAAO,CACHz4B,IAAKspB,EAAOmP,EAAcz4B,KAC1BzB,IAAK+qB,EAAOmP,EAAcl6B,OAKtCixB,YAAa,SAASpzB,EAAOC,GACzB,IAAIoyB,EAAazyB,KAAKi7B,SAAS76B,GAC/B,IAAI+6B,EAAWn7B,KAAKi7B,SAAS56B,GAC7B,IAAI2D,EAAM1B,KAAK0B,IAAIyuB,EAAY0I,GAC/B,IAAI54B,EAAMD,KAAKC,IAAIkwB,EAAY0I,GAE/B,MAAO,CACHn3B,IAAKspB,EAAOtpB,GACZzB,IAAK+qB,EAAO/qB,KAIpBwwB,WAAY,SAASlpB,EAAOwM,GACxB,IAAIiH,EAAWhb,KAAKsH,IAAI5J,KAAK+qB,YAAY1U,IACzC,IAAI0N,EAAQ/jB,KAAK1D,QAAQiG,IAAMvC,KAAK1D,QAAQ0H,IAC5C,IAAI7B,EAAQnC,KAAKirB,aAAaphB,EAAOka,GACrC,IAAIiP,EAAW1V,EAAWnb,EAC1B,IAAI8wB,GAAY,EAAI3V,GAAYnb,EAChC,IAAI6B,EAAMspB,EAAO0B,GAAOhvB,KAAK1D,QAAQ0H,KAAOgvB,GAC5C,IAAIzwB,EAAM+qB,EAAO0B,GAAOhvB,KAAK1D,QAAQiG,KAAO0wB,GAE5C,GAAI1wB,EAAMyB,EAAMm4B,GACZ55B,EAAM+qB,EAAO0B,GAAOhrB,GAAOm4B,IAG/B,MAAO,CACHn4B,IAAKA,EACLzB,IAAKA,IAIb2wB,UAAW,SAASrpB,EAAOwM,GACvB,IAAI0N,EAAQ/jB,KAAK+yB,WAAWlpB,EAAOwM,GACnC,IAAIrS,EAAMspB,EAAOjqB,EAAW2rB,GAAOjL,EAAM/f,KAAMhE,KAAKmzB,SAAUnzB,KAAKozB,WACnE,IAAI7wB,EAAM+qB,EAAOjqB,EAAW2rB,GAAOjL,EAAMxhB,KAAMvC,KAAKmzB,SAAUnzB,KAAKozB,WAEnE,MAAO,CACHpvB,IAAKA,EACLzB,IAAKA,MAKjB,SAASm6B,GAAUv6B,GACf,IAAI0D,EAAO6lB,GAEX,GAAIvpB,GAASmqB,GACTzmB,EAAOimB,QACJ,GAAI3pB,GAASkqB,GAChBxmB,EAAOgmB,QACJ,GAAI1pB,GAASiqB,GAChBvmB,EAAO+lB,QACJ,GAAIzpB,GAASgqB,GAChBtmB,EAAO8lB,GAGX,OAAO9lB,EAGX,SAASy2B,GAAc/R,EAAWC,EAAWluB,GACzC,IAAI0H,EAAM1H,EAAQ0H,KAAOumB,EACzB,IAAIhoB,EAAMjG,EAAQiG,KAAOioB,EACzB,IAAI2E,EAAW7yB,EAAQ6yB,WAAa5sB,GAAOyB,EAAM04B,GAAU1P,GAAiBzqB,EAAKyB,IAAQ0nB,IACzF,IAAIiR,EAAepQ,GAAc4C,GACjC,IAAI3B,EAAelxB,EAAQkxB,cAAgB,EAC3C,IAAI8N,EAAU1M,GAAUI,GAAOhrB,GAAO,EAAGmrB,EAAU3B,IAAiBF,EAAO/qB,GAC3E,IAAIg5B,EAAU1M,GAASG,GAAOzsB,GAAO,EAAG4sB,EAAU3B,GAClD,IAAIoP,EAAgBtgC,EAAQ+oB,UAAY/oB,EAAQ+oB,UAAYphB,UAC5D,IAAIohB,EAAYuX,GAAiBl6B,GACbgH,GAAc4xB,EAAQz6B,UAAW06B,EAAQ16B,WACzC87B,GACAA,EACpB,IAAIE,EAActN,GAAS+L,EAASC,EAASpM,GAC7C,IAAIwH,EAAaj0B,GAAKm6B,EAAaxX,GACnC,IAAIyX,EAAanG,EAAakG,EAC9B,IAAIE,EAAOz6B,KAAKK,MAAMm6B,EAAa,GACnC,IAAIE,EAAOF,EAAaC,EAExB,IAAKzgC,EAAQ6yB,gBACF7yB,EAAQ6yB,SAGnB7yB,EAAQ6yB,SAAW7yB,EAAQ6yB,UAAYA,EACvC7yB,EAAQ0H,IAAM1H,EAAQ0H,KAAOmqB,GAAYmN,GAAUyB,EAAM5N,EAAU3B,GACnElxB,EAAQiG,IAAMjG,EAAQiG,KAAO4rB,GAAYoN,EAASyB,EAAM7N,EAAU3B,GAClElxB,EAAQqpB,UAAYrpB,EAAQqpB,WAAaN,EAAY,EACrD/oB,EAAQ+oB,UAAYA,EAEpB,OAAO/oB,EAGXqH,GAAkBy4B,GAAe,CAC7Bx4B,KAAMxK,EACN6tB,eAAgB,CACZ9U,QAAS,KACT1V,MAAO,EACPoK,MAAO/N,GAEX6pB,OAAQ,CACJ8W,YAAatF,MAIrB,IAAI8I,GAAqB,GACrBC,GAAoB,KAEpBC,GAAkBza,GAAKxjB,OAAO,CAC9B8B,KAAM,SAASupB,EAAWC,EAAWluB,EAASwV,GAE1C,IAAI6oB,EAAcniC,EAAW,CAAE6sB,UAAW4X,GAAoBj5B,IAAKumB,EAAWhoB,IAAKioB,GAAaluB,GAChG,IAAI8gC,EAAOzC,EAAYtV,UACvB,IAAIkW,EAAU8B,GAAc7S,EAAW4S,GACvC,IAAI9B,EAAUgC,GAAc/S,EAAWC,EAAWmQ,GAClD,IAAI5W,EAAQwZ,GAAUjC,EAASC,EAASZ,EAAar+B,GAErDq+B,EAAYp4B,IAAMwhB,EAAMxhB,IACxBo4B,EAAY32B,IAAM+f,EAAM/f,IACxB22B,EAAYhV,UAAYrpB,EAAQqpB,WAAa9oB,EAAMugC,EAAO,EAAG7jC,GAE7DmpB,GAAK7a,GAAG7G,KAAKqP,KAAKrQ,KAAM26B,EAAa7oB,GAErC9R,KAAKmzB,SAAW32B,EAAQF,EAAQ0H,KAAO1B,KAAK0B,IAAIs3B,EAASh/B,EAAQ0H,KAAOs3B,EACxEt7B,KAAKozB,SAAW52B,EAAQF,EAAQiG,KAAOD,KAAKC,IAAIg5B,EAASj/B,EAAQiG,KAAOg5B,EACxEv7B,KAAKw9B,OAAS3gC,EAAMkN,GAAIga,EAAM/f,IAAKo5B,GAAO7jC,GAC1CyG,KAAKy9B,OAAS5gC,EAAMkN,GAAIga,EAAMxhB,IAAK66B,GAAO7jC,GAC1CyG,KAAKuqB,UAAYA,EACjBvqB,KAAKwqB,UAAYA,EAEjBxqB,KAAKojB,gBAGTjZ,MAAO,WACH,OAAO,IAAIgzB,GACPn9B,KAAKuqB,UACLvqB,KAAKwqB,UACLjzB,EAAE2H,OAAO,GAAIc,KAAK1D,SAClB0D,KAAK8R,eAIb2gB,WAAY,WACR,OAAOzyB,KAAK1D,QAAQ0H,KAGxByiB,QAAS,SAASxb,EAAGxE,EAAGqiB,GACpB,IAAIxnB,EAAMtB,KACV,IAAI1D,EAAUgF,EAAIhF,QAClB,IAAIkhC,EAASl8B,EAAIk8B,OACjB,IAAIC,EAASn8B,EAAIm8B,OACjB,IAAIL,EAAO9gC,EAAQ+oB,UACnB,IAAIrhB,EAAM1H,EAAQ0H,IAClB,IAAIzB,EAAMjG,EAAQiG,IAClB,IAAI0X,EAAQja,KAAK0qB,WACjB,IAAIne,EAAO0N,EAAM1N,KACjB,IAAIqe,EAAU3Q,EAAM2Q,QACpB,IAAIxG,EAAUnK,EAAMmK,QACpB,IAAIuG,EAAW1Q,EAAM0Q,SACrB,IAAI9K,EAAY5F,EAAM4F,UACtB,IAAI+D,EAAOgH,GAAWD,GAAY8S,EAASD,IAC3C,IAAIp9B,EAAQqD,GAAewH,EAAGxE,GAAK,GACnC,IAAIpG,EAAMoD,GAAegD,EAAGwE,GAAK,GAEjC,GAAI7K,GAAS,GAAKC,GAAO,EACrB,OAAO,KAGX,GAAIyoB,EAAO,CACP1oB,EAAQiD,EAAWjD,EAAO4D,EAAKzB,GAC/BlC,EAAMgD,EAAWhD,EAAK2D,EAAKzB,GAG/BnC,EAAQ2J,GAAI3J,EAAOg9B,GACnB/8B,EAAM0J,GAAI1J,EAAK+8B,GAEf,IAAIjL,EAAK7vB,KAAK0B,IAAI5D,EAAOC,GAAOm9B,EAChC,IAAIpL,EAAK9vB,KAAKC,IAAInC,EAAOC,GAAOm9B,EAEhC,IAAIvL,EAAU,IAAI3mB,EAAI8Y,EAAQzY,GAAIyY,EAAQxY,GAAIwY,EAAQzY,GAAIyY,EAAQxY,IAClEqmB,EAAQ1lB,EAAO,GAAK6tB,GAAgBva,EAAY+D,GAAQgH,EAAU,EAAIuH,EAAKC,IAC3EH,EAAQ1lB,EAAO,GAAK6tB,GAAgBva,EAAY+D,GAAQgH,EAAU,EAAIwH,EAAKD,IAE3E,OAAOF,GAGXgJ,SAAU,SAAS5wB,GACf,IAAI/I,EAAMtB,KACV,IAAI1D,EAAUgF,EAAIhF,QAClB,IAAIkhC,EAASl8B,EAAIk8B,OACjB,IAAIC,EAASn8B,EAAIm8B,OACjB,IAAIL,EAAO9gC,EAAQ+oB,UACnB,IAAIpL,EAAQja,KAAK0qB,WACjB,IAAIne,EAAO0N,EAAM1N,KACjB,IAAIqe,EAAU3Q,EAAM2Q,QACpB,IAAI/K,EAAY5F,EAAM4F,UACtB,IAAI8K,EAAW1Q,EAAM0Q,SACrB,IAAI/G,GAAS6Z,EAASD,GAAU7S,EAChC,IAAItuB,EAASuuB,GAAWvgB,EAAMkC,GAAQsT,GACtC,IAAIqb,EAAc7+B,EAASunB,EAE3B,GAAIvnB,EAAS,GAAKA,EAASsuB,EACvB,OAAO,KAGX,IAAIrvB,EAAQkiC,EAAStC,EAErB,OAAOr+B,EAAMyF,KAAKwH,IAAIszB,EAAM9hC,GAAQ/B,IAGxCwqB,MAAO,WACH,IAAIznB,EAAU0D,KAAK1D,QACnB,MAAO,CAAE0H,IAAK1H,EAAQ0H,IAAKzB,IAAKjG,EAAQiG,MAG5CuwB,eAAgB,SAAS3wB,GACrB,IAAIb,EAAMtB,KACV,IAAI1D,EAAUgF,EAAIhF,QAClB,IAAIkhC,EAASl8B,EAAIk8B,OACjB,IAAIC,EAASn8B,EAAIm8B,OACjB,IAAI3Y,EAAUxoB,EAAQwoB,QACtB,IAAItL,EAAWld,EAAQkd,SACvB,IAAI4jB,EAAO9gC,EAAQ+oB,UACnB,IAAIjB,EAAUpkB,KAAKokB,UACnB,IAAItc,EAAO0R,EAAW4K,EAAQpY,SAAWoY,EAAQ3nB,QACjD,IAAIoN,EAAQ/B,GAAQ21B,EAASD,GAC7B,IAAInhC,EAASQ,EAAMsF,EAAQ0H,EAAOtQ,GAElC,IAAKigB,GAAYsL,MAActL,GAAYsL,GACvCzoB,GAAUA,EAGd,MAAO,CACH2H,IAAK1B,KAAKwH,IAAIszB,EAAMI,EAASnhC,GAC7BkG,IAAKD,KAAKwH,IAAIszB,EAAMK,EAASphC,GAC7BA,OAAQA,IAIhBonB,YAAa,WACT,IAAIia,EAAWp7B,KAAKK,MAAM3C,KAAKy9B,QAC/B,IAAIxZ,EAAQ3hB,KAAKK,MAAM+6B,EAAW19B,KAAKw9B,QAAU,EAEjD,OAAOvZ,GAGXwB,sBAAuB,WACnB,IAAI4H,EAAQ,GAEZrtB,KAAK29B,4BAA4B,SAAUrgB,GACvC+P,EAAM7tB,KAAK8d,IACZ,CAAEsG,KAAM,EAAGJ,KAAM,IAEpB,OAAO6J,GAGXlI,YAAa,SAASC,GAClB,IAAI9oB,EAAU0D,KAAK1D,QACnB,IAAI0mB,EAAa1mB,EAAQ0mB,WACzB,IAAIF,EAAaxmB,EAAQwmB,WACzB,IAAItJ,EAAWld,EAAQkd,SACvB,IAAI6K,EAAS/nB,EAAQqmB,OAAO0B,OAC5B,IAAID,EAAUpkB,KAAKokB,UACnB,IAAIiJ,EAAQ,GACZ,IAAI/H,EAAkB,CAGlB9L,SAAUA,GAGd,SAAS0F,EAAO0e,EAAczb,GAC1BmD,EAAgBlD,MAAQiC,EAASD,EAAQvY,GAAKuY,EAAQvY,GAAKsW,EAAYra,KACvEwd,EAAgBjD,MAAQgC,EAASD,EAAQxY,GAAKuW,EAAYra,KAAOsc,EAAQxY,GACzE0Z,EAAgBhI,SAAWsgB,EAE3BxY,EAAUxiB,OAAOsf,GAAeoD,EAAiBnD,IAGrD,GAAIa,EAAW7Q,QACXnS,KAAK29B,4BAA4Bze,EAAQ8D,GAG7C,GAAIF,EAAW3Q,QACXnS,KAAK69B,4BAA4B3e,EAAQ4D,GAG7C,OAAOuK,GAGXtG,gBAAiB,SAASX,GACtB,IAAI9pB,EAAU0D,KAAK1D,QACnB,IAAI0qB,EAAiB1qB,EAAQ0qB,eAC7B,IAAIC,EAAiB3qB,EAAQ2qB,eAC7B,IAAIzN,EAAWld,EAAQkd,SACvB,IAAI4K,EAAUgC,EAAQhC,UACtB,IAAIgD,EAAc,CACdvH,UAAWuE,EAAQ5K,EAAW,KAAO,MACrCiJ,QAAS2B,EAAQ5K,EAAW,KAAO,MACnCA,SAAUA,GAEd,IAAIwJ,EAAa,GAEjB,IAAI1G,EAAYtc,KAAKglB,kBACrB,SAAS9F,EAAO0e,EAAcpb,GAC1B,IAAKtiB,GAAQ09B,EAAc5a,GAAa,CACpCoE,EAAY9J,SAAWsgB,EACvBthB,EAAU1Z,OAAO2f,GAAmB6E,EAAa5E,IAEjDQ,EAAWxjB,KAAKo+B,IAIxB,GAAI3W,EAAe9U,QACfnS,KAAK29B,4BAA4Bze,EAAQ+H,GAG7C,GAAID,EAAe7U,QACfnS,KAAK69B,4BAA4B3e,EAAQ8H,GAG7C,OAAO1K,EAAUnL,UAGrBwsB,4BAA6B,SAASp+B,EAAU4iB,GAC5C,IAAI7gB,EAAMtB,KAAK0qB,WACf,IAAI7K,EAAYve,EAAIue,UACpB,IAAI+D,EAAOtiB,EAAIsiB,KACf,IAAI3J,EAAQja,KACZ,IAAIw9B,EAASvjB,EAAMujB,OACnB,IAAIC,EAASxjB,EAAMwjB,OAEnB,IAAK,IAAIK,EAAQx7B,KAAKI,KAAK86B,GAAUrb,EAAYqB,KAAMsa,GAASL,EAAQK,GAAS3b,EAAYyB,KAAM,CAC/F,IAAItG,EAAWzgB,EAAMgjB,EAAY+D,GAAQka,EAAQN,GAASjkC,GAC1DgG,EAAS+d,EAAU6E,KAI3B0b,4BAA6B,SAASt+B,EAAU4iB,GAC5C,IAAIrgB,EAAS9B,KAEb,IAAIsB,EAAMtB,KAAK1D,QACf,IAAI0H,EAAM1C,EAAI0C,IACd,IAAIzB,EAAMjB,EAAIiB,IACd,IAAIojB,EAAYrkB,EAAIqkB,UACpB,IAAIyX,EAAO97B,EAAI+jB,UACf,IAAIpL,EAAQja,KAAK0qB,WACjB,IAAI7K,EAAY5F,EAAM4F,UACtB,IAAI+D,EAAO3J,EAAM2J,KACjB,IAAIma,EAAQ/9B,KACZ,IAAIw9B,EAASO,EAAMP,OACnB,IAAIC,EAASM,EAAMN,OACnB,IAAIr9B,EAAQkC,KAAKK,MAAM66B,GAEvB,IAAK,IAAIM,EAAQ19B,EAAO09B,EAAQL,EAAQK,IAAS,CAC7C,IAAIE,EAAel8B,EAAOm8B,sBAAsBH,GAChD,IAAK,IAAIliC,EAAMumB,EAAYqB,KAAM5nB,EAAM+pB,EAAW/pB,GAAOumB,EAAYyB,KAAM,CACvE,IAAItoB,EAAQ0iC,EAAa1iC,MAAQM,EAAMoiC,EAAaE,UACpD,GAAI5iC,EAAQiH,EACR,MAEJ,GAAIjH,GAAS0I,EAAK,CACd,IAAIsZ,EAAWzgB,EAAMgjB,EAAY+D,GAAQ7Z,GAAIzO,EAAO8hC,GAAQI,GAASjkC,GACrEgG,EAAS+d,EAAU6E,OAMnC+B,gBAAiB,SAASxc,EAAOic,EAAcK,GAC3C,IAAI8Z,EAAQx7B,KAAKI,KAAK1C,KAAKw9B,OAAS91B,GACpC,IAAIpM,EAAQgH,KAAKwH,IAAI9J,KAAK1D,QAAQ+oB,UAAWyY,GAC7C,IAAIthB,EAAOxc,KAAKqpB,cAAc/tB,EAAOqoB,EAAcK,GAEnD,OAAO,IAAIzG,GAAUjiB,EAAOkhB,EAAM9U,EAAO,KAAMic,IAGnDuF,iBAAkB,SAAS5tB,GACvB,IAAIyoB,EAAQ/jB,KAAK+jB,QACjB,OAAOA,EAAM/f,KAAO1I,GAASA,GAASyoB,EAAMxhB,KAGhDgxB,IAAK,SAASpxB,GACV,IAAI4hB,EAAQ/jB,KAAK8yB,eAAe3wB,GAChC,OAAOnC,KAAKkqB,WAAWnG,EAAM/f,IAAK+f,EAAMxhB,IAAKvC,KAAKmzB,SAAUnzB,KAAKozB,SAAUrP,EAAM1nB,SAGrFm3B,YAAa,SAASpzB,EAAOC,GACzB,IAAIoyB,EAAazyB,KAAKi7B,SAAS76B,GAC/B,IAAI+6B,EAAWn7B,KAAKi7B,SAAS56B,GAC7B,IAAI2D,EAAM1B,KAAK0B,IAAIyuB,EAAY0I,GAC/B,IAAI54B,EAAMD,KAAKC,IAAIkwB,EAAY0I,GAE/B,MAAO,CACHn3B,IAAKA,EACLzB,IAAKA,IAIbwwB,WAAY,SAASlpB,EAAOwM,GACxB,IAAI/U,EAAMtB,KAAK1D,QACf,IAAI8gC,EAAO97B,EAAI+jB,UACf,IAAImY,EAASzzB,GAAI/J,KAAK1D,QAAQ0H,IAAKo5B,GACnC,IAAIK,EAAS1zB,GAAI/J,KAAK1D,QAAQiG,IAAK66B,GACnC,IAAI9f,EAAWhb,KAAKsH,IAAI5J,KAAK+qB,YAAY1U,IACzC,IAAI0N,EAAQ0Z,EAASD,EACrB,IAAIr7B,EAAQnC,KAAKirB,aAAaphB,EAAOka,GACrC,IAAI/f,EAAM1B,KAAKwH,IAAIszB,EAAMI,EAASlgB,EAAWnb,GAC7C,IAAII,EAAMD,KAAKwH,IAAIszB,EAAMK,GAAU,EAAIngB,GAAYnb,GAEnD,GAAII,EAAMyB,EAAMk5B,GACZ36B,EAAMyB,EAAMk5B,GAGhB,MAAO,CACHl5B,IAAKA,EACLzB,IAAKA,IAIb2wB,UAAW,SAASrpB,EAAOwM,GACvB,IAAI0N,EAAQ/jB,KAAK+yB,WAAWlpB,EAAOwM,GACnC,IAAI/U,EAAMtB,KACV,IAAImzB,EAAW7xB,EAAI6xB,SACnB,IAAIC,EAAW9xB,EAAI8xB,SAEnB,MAAO,CACHpvB,IAAKX,EAAW0gB,EAAM/f,IAAKmvB,EAAUC,GACrC7wB,IAAKc,EAAW0gB,EAAMxhB,IAAK4wB,EAAUC,KAI7C6K,sBAAuB,SAASH,GAC5B,IAAIx8B,EAAMtB,KAAK1D,QACf,IAAIqpB,EAAYrkB,EAAIqkB,UACpB,IAAIyX,EAAO97B,EAAI+jB,UACf,IAAI/pB,EAAQgH,KAAKwH,IAAIszB,EAAMU,GAC3B,IAAIK,EAAY77B,KAAKwH,IAAIszB,EAAMU,EAAQ,GACvC,IAAIM,EAAaD,EAAY7iC,EAC7B,IAAI4iC,EAAYE,EAAazY,EAE7B,MAAO,CACHrqB,MAAOA,EACP4iC,UAAWA,IAInBxT,SAAU,WACN,IAAI2T,EAAO3b,GAAK7a,GAAG6iB,SAASra,KAAKrQ,MACjCq+B,EAAKza,KAAOya,EAAKzT,SAAWyT,EAAK1T,UAAY3qB,KAAKy9B,OAASz9B,KAAKw9B,SAEhE,OAAOa,KAIf,SAASd,GAAUjC,EAASC,EAASZ,EAAar+B,GAC9C,IAAI0H,EAAM22B,EAAY32B,IACtB,IAAIzB,EAAMo4B,EAAYp4B,IAEtB,GAAI/F,EAAQm+B,EAAYpP,oBAAsBoP,EAAYpP,mBAAqB,EAC3E+S,KAGJ,IAAK9hC,EAAQF,EAAQiG,KACjBA,EAAMg5B,OACH,GAAIj/B,EAAQiG,KAAO,EACtB+7B,KAGJ,IAAK9hC,EAAQF,EAAQ0H,KACjBA,EAAMs3B,OACH,GAAIh/B,EAAQ0H,KAAO,EACtBs6B,KAGJ,MAAO,CACHt6B,IAAKA,EACLzB,IAAKA,GAIb,SAAS+6B,GAAct5B,EAAKzB,EAAKjG,GAC7B,IAAI8gC,EAAO9gC,EAAQ+oB,UACnB,IAAIiW,EAAUt3B,EACd,GAAIA,GAAO,EACPs3B,EAAU/4B,GAAO,EAAID,KAAKwH,IAAIszB,GAAO,GAAK,OACvC,IAAK9gC,EAAQ++B,YAChBC,EAAUh5B,KAAKwH,IAAIszB,EAAM96B,KAAKK,MAAMoH,GAAI/F,EAAKo5B,KAEjD,OAAO9B,EAGX,SAAS+B,GAAc96B,EAAK66B,GACxB,IAAImB,EAAkB1hC,EAAMkN,GAAIxH,EAAK66B,GAAO7jC,GAAqB,EACjE,IAAIgiC,EACJ,GAAIh5B,GAAO,EACPg5B,EAAU6B,OACP,GAAImB,IAAoB,IAAMA,EAAkB,IAAOA,EAAkB,IAC5EhD,EAAUj5B,KAAKwH,IAAIszB,EAAMrzB,GAAIxH,EAAK66B,GAAQ,SAE1C7B,EAAUj5B,KAAKwH,IAAIszB,EAAM96B,KAAKI,KAAKqH,GAAIxH,EAAK66B,KAGhD,OAAO7B,EAGX,SAAS+C,KACL,MAAM,IAAIE,MAAM,6DAGpB,SAASz0B,GAAI7M,EAAGkgC,GACZ,OAAO96B,KAAKyH,IAAI7M,GAAKoF,KAAKyH,IAAIqzB,GAGlCz5B,GAAkBw5B,GAAiB,CAC/Bv5B,KAAM,MACNyhB,UAAW4X,GACXtX,UAAW,EACX4F,kBAAmB,EACnB/R,SAAU,KACVyN,eAAgB,CACZ9U,QAAS,KACT1V,MAAO,EACPoK,MAAO/N,GAEX8Z,OAAQ,EACRuQ,aAAc,OAGlB,IAAIsb,GAAiB,CACjB1X,gBAAiB,SAASX,GACtB,IAAI9pB,EAAU0D,KAAK1D,QACnB,IAAImP,EAASnJ,KAAKsH,IAAI5J,KAAK+L,IAAIxB,SAASpN,EAAIipB,EAAQhC,UAAUxY,IAC9D,IAAIqZ,EAAY,GAChB,IAAIyZ,EAAY,MAChB,IAAIC,EAAaC,EAEjB,GAAItiC,EAAQ2qB,eAAe9U,QAAS,CAChCwsB,EAAc3+B,KAAK6+B,oBAAoBzY,GACvCsY,EAAY,KAEZzZ,EAAYjlB,KAAK8+B,qBACbH,EAAalzB,EAAQnP,EAAQ2qB,gBAIrC,GAAI3qB,EAAQ0qB,eAAe7U,QAAS,CAChCysB,EAAc5+B,KAAK++B,oBAAoB3Y,EAASsY,GAEhD97B,GAAOqiB,EAAWjlB,KAAKg/B,qBACnBJ,EAAanzB,EAAQnP,EAAQ0qB,eAAgBZ,EAASsY,IAI9D,OAAOzZ,GAGX6Z,qBAAsB,SAAS3uB,EAAQ1E,EAAQnP,GAC3C,OAAO0D,KAAKi/B,gBAAgB9uB,EAAQ1E,EAAQnP,IAGhD0iC,qBAAsB,SAAS7uB,EAAQ1E,EAAQnP,EAAS8pB,EAASsY,GAC7D,IAAIQ,EAAiBl/B,KAAKk/B,gBAAkBl/B,KAAKk/B,eAAezzB,EAAQ2a,EAASsY,GACjF,OAAO1+B,KAAKi/B,gBAAgB9uB,EAAQ1E,EAAQnP,EAAS4iC,IAGzDD,gBAAiB,SAAS9uB,EAAQ1E,EAAQnP,EAAS4iC,GAC/C,IAAI/gC,EAAQ,CACR5B,OAAQ,CACJE,MAAOH,EAAQG,MACfoK,MAAOvK,EAAQuK,MACfuP,SAAU9Z,EAAQ8Z,WAI1B,IAAI7L,EAASvK,KAAK+L,IAAIxB,SACtB,IAAI40B,EAAS,IAAI/mC,EAAO,CAAEmS,EAAOrN,EAAGqN,EAAOpN,GAAKsO,GAChD,IAAI6Q,EAAYtc,KAAKglB,kBAErB,IAAK,IAAItoB,EAAI,EAAGA,EAAIyT,EAAOtU,OAAQa,IAAK,CACpC,IAAIkjB,EAAO,IAAI9nB,EAAKqG,GACpB,GAAI+gC,EACAC,EAAO1zB,OAASyzB,EAAe/uB,EAAOzT,IAG1CkjB,EAAK/I,OAAOsoB,EAAO50B,QACd0G,OAAOkuB,EAAOnuB,QAAQb,EAAOzT,GAAK,MAEvC4f,EAAU1Z,OAAOgd,GAGrB,OAAOtD,EAAUnL,UAGrBiuB,eAAgB,SAAShZ,EAASte,EAAM0b,EAAMI,EAAMyb,GAChD,IAAIv9B,EAAS9B,KAEb,IAAIs/B,EAAOt/B,KAAKu/B,UAAUz3B,EAAM0b,EAAMI,EAAMyb,GAC5C,IAAI/iC,EAAU8pB,EAAQ9pB,QACtB,IAAIkjC,EAAiBljC,EAAQ6V,UAAY7V,EAAQsjB,MAAQ,IAAIzN,UAAY,MAEzE,OAAOpQ,GAAIu9B,EAAM,SAAUrnB,GACvB,IAAIwnB,EAAQ39B,EAAO49B,cAAcznB,GAEjC,IAAKunB,GAAkBC,IAAU,GAC7B,OAAOA,MAMnBE,GAAoB1P,GAAa/wB,OAAO,CACxC6kB,MAAO,WACH,MAAO,CAAE/f,IAAK,EAAGzB,IAAKvC,KAAK1D,QAAQ+zB,WAAWx0B,SAGlDwV,OAAQ,SAAStF,GACb/L,KAAK+L,IAAMA,EACX/L,KAAK4/B,gBAGTxb,QAAS,WACL,OAAOpkB,KAAK+L,KAGhB6zB,aAAc,WACV,IAAI99B,EAAS9B,KAEb,IAAIsB,EAAMtB,KACV,IAAI2iB,EAASrhB,EAAIqhB,OACjB,IAAIgB,EAAeriB,EAAIhF,QAAQqmB,OAC/B,IAAIa,EAAOG,EAAaH,MAAQ,EAChC,IAAII,EAAOD,EAAaC,MAAQ,EAChC,IAAIic,EAAa,IAAIv0B,EAErB,IAAK,IAAI5O,EAAI,EAAGA,EAAIimB,EAAO9mB,OAAQa,IAAK,CACpCimB,EAAOjmB,GAAG2U,OAAOwuB,GACjB,IAAIpX,EAAW9F,EAAOjmB,GAAGqP,IAEzB4W,EAAOjmB,GAAG2U,OAAOvP,EAAO2kB,QAAQjD,EAAO9mB,EAAIknB,GAAMhV,YAC7C,EAAG6Z,EAAShsB,QAASgsB,EAASzc,aAK1CuzB,UAAW,SAASz3B,EAAMg4B,EAAYC,EAAYV,GAC9C,GAAIA,SAAoB,EAAKA,EAAa,MAE1C,IAAI/iC,EAAU0D,KAAK1D,QACnB,IAAI+zB,EAAa/zB,EAAQ+zB,WAAWx0B,OACpC,IAAImkC,EAAW3P,EAAavoB,GAAQ,EACpC,IAAIm4B,EAAW,IAAMD,EACrB,IAAIxc,EAAOsc,GAAc,EACzB,IAAIlc,EAAOmc,GAAc,EACzB,IAAIT,EAAO,GACX,IAAI9zB,EAAQ,EAEZ,IAAK,IAAI9O,EAAI8mB,EAAM9mB,EAAIsjC,EAAUtjC,GAAKknB,EAAM,CACxC,GAAItnB,EAAQwoB,QACRtZ,EAAQ,IAAM9O,EAAIujC,OAElBz0B,EAAQ9O,EAAIujC,EAGhBz0B,EAAQ3O,EAAM2O,EAAOtS,GAAmB,IAExC,KAAMmmC,GAAcn/B,GAAQsL,EAAO6zB,IAC/BC,EAAK9/B,KAAKgM,GAIlB,OAAO8zB,GAGXY,eAAgB,WACZ,OAAOlgC,KAAKu/B,UAAU,IAG1BY,eAAgB,WACZ,OAAOngC,KAAKu/B,UAAU,KAG1BG,cAAe,SAASU,GACpB,OAAQ,IAAMA,EAAWpgC,KAAK1D,QAAQ+R,YAAc,KAGxDswB,YAAa,WACT,IAAI78B,EAAS9B,KAEb,OAAO+B,GAAI/B,KAAKkgC,iBAAkB,SAAUE,GAAY,OAAOt+B,EAAO49B,cAAcU,MAGxFrgB,WAAY,WACR,MAAO,IAGX8e,oBAAqB,SAASzY,GAC1B,IAAIa,EAAiBjnB,KAAK1D,QAAQ2qB,eAClC,OAAOjnB,KAAKo/B,eAAehZ,EAAS,EAAGa,EAAezD,KAAMyD,EAAerD,OAG/Emb,oBAAqB,SAAS3Y,EAASsY,GACnC,IAAIp9B,EAAMtB,KAAK1D,QACf,IAAI0qB,EAAiB1lB,EAAI0lB,eACzB,IAAIC,EAAiB3lB,EAAI2lB,eACzB,IAAI4X,EAAsBH,EAAY1+B,KAAKu/B,UAAU,EAAGtY,EAAezD,KAAMyD,EAAerD,MAAQ,KAEpG,OAAO5jB,KAAKo/B,eAAehZ,EAAS,GAAKY,EAAexD,KAAMwD,EAAepD,KAAMib,IAGvFK,eAAgB,SAASzzB,EAAQ2a,EAASsY,GACtC,GAAItY,EAAQ9pB,QAAQsH,OAAShL,EAAK,CAC9B,IAAIynC,EAAa98B,GAAI,KAAOvD,KAAK1D,QAAQ+zB,WAAWx0B,OAAS,IAC7D,IAAIykC,EAAch+B,KAAKqI,IAAI01B,GAAc50B,EACzC,IAAIkzB,EAAc3+B,KAAK2+B,cAEvB,IAAIO,EAAiB,SAAS1zB,GAC1B,IAAKkzB,GAAax+B,GAAQsL,EAAOmzB,GAC7B,OAAOlzB,EAGX,OAAO60B,GAEX,OAAOpB,IAIfna,gBAAiB,WACb,IAAIjjB,EAAS9B,KAEb,IAAIimB,EAAYjmB,KAAK1D,QAAQ2pB,WAAa,GAE1C,IAAItL,EAAQ3a,KAAKmmB,eAAiB,IAAIpuB,EAAM,CACxC6a,QAAS,IAGb,IAAK,IAAIlW,EAAI,EAAGA,EAAIupB,EAAUpqB,OAAQa,IAAK,CACvC,IAAI6jC,EAAOta,EAAUvpB,GACrB,IAAIusB,EAAOnnB,EAAO0+B,aAAaD,GAC/B,IAAIrO,EAAapwB,EAAO2kB,QAAQ8Z,EAAKr4B,MAErC,IAAI60B,EAAOwD,EAAKr4B,KAAO5F,KAAKK,MAAM49B,EAAKr4B,MACvC+gB,EAAK5a,YAAc0uB,EAAO7K,EAAW1mB,MAErC,IAAIwxB,EAAO16B,KAAKI,KAAK69B,EAAK7Z,IAAM6Z,EAAK7Z,GACrCuC,EAAKzd,QAAUwxB,EAAOD,GAAQ7K,EAAW1mB,MAEzC,IAAIi1B,EAAOlwB,GAAazR,QAAQ0R,WAAWyY,EAAM,CAC7C1U,KAAM,CACF1N,MAAO05B,EAAK15B,MACZsN,QAASosB,EAAKpsB,SAElB5X,OAAQ,CACJ4X,QAASosB,EAAKpsB,WAGtBwG,EAAM/X,OAAO69B,GAGjBzgC,KAAK2S,aAAagI,IAGtB6lB,aAAc,SAASD,GACnB,OAAOvgC,KAAKymB,QAAQ8Z,EAAKr4B,KAAMq4B,EAAK7Z,GAAK,IAG7CD,QAAS,SAASve,EAAMwe,GACpB,IAAIpqB,EAAU0D,KAAK1D,QACnB,IAAI8uB,EAAY9uB,EAAQ8uB,UACxB,IAAIrf,EAAM/L,KAAK+L,IACf,IAAIuzB,EAAOt/B,KAAK2+B,cAChB,IAAI+B,EAAYpB,EAAKzjC,OACrB,IAAI8kC,EAAY,IAAMD,EACtB,IAAIE,EAAY14B,EAEhB,GAAI5L,EAAQwoB,UAAYsG,EACpBwV,GAAaA,EAAY,GAAKF,EAGlCE,EAAYv9B,EAAWf,KAAKK,MAAMi+B,GAAY,EAAGF,EAAY,GAC7D,IAAIG,EAAYvB,EAAKsB,GAErB,GAAIxV,EAAW,CACXyV,EAAYA,EAAYF,EAAY,EAEpC,GAAIE,EAAY,EACZA,GAAa,IAIrB,IAAIC,EAAUz9B,EAAWf,KAAKI,KAAKgkB,GAAMka,GAAYA,EAAWF,EAAY,GAC5E,IAAIK,EAAQD,EAAUF,EAAY,EAClC,IAAIp1B,EAAQm1B,EAAYI,EAExB,OAAO,IAAI5yB,GAAKpC,EAAIxB,SAAU,EAAGwB,EAAIC,SAAW,EAAG60B,EAAWr1B,IAGlEyd,KAAM,SAAS/gB,EAAMwe,GACjB,IAAIuC,EAAOjpB,KAAKymB,QAAQve,EAAMwe,GAC9B,IAAIrY,EAAa4a,EAAK5a,WAAa,IACnC,IAAIiB,EAAWjB,EAAa4a,EAAKzd,MAEjC,OAAO,IAAItT,EAASwY,IAAI,CAAEuY,EAAK1e,OAAOrN,EAAG+rB,EAAK1e,OAAOpN,GAAK,CACtDkR,WAAYA,EACZiB,SAAUA,EACVqB,QAASsY,EAAKxd,OACdmF,QAASqY,EAAKxd,UAItB+mB,mBAAoB,SAASnoB,GACzB,IAAIvI,EAAS9B,KAEb,IAAInE,EAASmE,KAAK1D,QAAQ+zB,WAAWx0B,OACrC,IAAI6L,EAAQ,KAEZ,IAAK,IAAIhL,EAAI,EAAGA,EAAIb,EAAQa,IAAK,CAC7B,IAAIusB,EAAOnnB,EAAO2kB,QAAQ/pB,GAC1B,GAAIusB,EAAKhc,cAAc5C,GAAQ,CAC3B3C,EAAQhL,EACR,OAIR,OAAOgL,KAgBXs5B,IAZJr9B,GAAkBg8B,GAAmB,CACjCtxB,WAAY,GACZsU,OAAQ,CACJpN,OAAQhX,GAAW,KAEvB0oB,eAAgB,CACZ9U,QAAS,MAEbiZ,UAAW,OAEf5yB,EAAWmnC,GAAkBp/B,UAAWk+B,IAExB/b,GAAKxjB,OAAO,CACxB8B,KAAM,SAAS1E,EAASwV,GACpB4Q,GAAK7a,GAAG7G,KAAKqP,KAAKrQ,KAAM1D,EAASwV,GAEjC,IAAImvB,EAAkBjhC,KAAK1D,QAE3B2kC,EAAgBtb,UAAYsb,EAAgBtb,WAAasb,EAAgB5b,UAAY,GAGzFwV,aAAc,SAASC,GACnB,OAAOR,GAAY/5B,UAAUs6B,aAAaxqB,KAAKrQ,KAAM86B,GAAa,GAGtEzpB,OAAQ,SAAStF,GACb/L,KAAK+L,IAAMA,EACX/L,KAAK4/B,gBAGTA,aAAc,WACV,IAAI99B,EAAS9B,KAEb,IAAIsB,EAAMtB,KACV,IAAI1D,EAAUgF,EAAIhF,QAClB,IAAIqmB,EAASrhB,EAAIqhB,OACjB,IAAIgB,EAAeriB,EAAIhF,QAAQqmB,OAC/B,IAAIa,EAAOG,EAAaH,MAAQ,EAChC,IAAII,EAAOD,EAAaC,MAAQ,EAEhC,IAAIic,EAAa,IAAIv0B,EACrB,IAAIg0B,EAAOt/B,KAAKu/B,UAAUjjC,EAAQ+oB,UAAW7B,EAAMI,GAEnD,IAAK,IAAIlnB,EAAI,EAAGA,EAAIimB,EAAO9mB,OAAQa,IAAK,CACpCimB,EAAOjmB,GAAG2U,OAAOwuB,GACjB,IAAIpX,EAAW9F,EAAOjmB,GAAGqP,IAEzB4W,EAAOjmB,GAAG2U,OAAOvP,EAAO2kB,QAAQ6Y,EAAK5iC,IAAIkS,YAAY,EAAG6Z,EAAShsB,QAASgsB,EAASzc,aAI3FoY,QAAS,WACL,OAAOpkB,KAAK+L,KAGhBwzB,UAAW,SAASz3B,EAAMg4B,EAAYC,EAAYV,GAC9C,GAAIA,SAAoB,EAAKA,EAAa,MAE1C,IAAIr7B,EAAMhE,KAAK1D,QAAQ0H,IACvB,IAAI+2B,EAAY/6B,KAAK66B,aAAa/yB,GAClC,IAAIw3B,EAAO,GACX,IAAI9b,EAAOsc,GAAc,EACzB,IAAIlc,EAAOmc,GAAc,EAEzB,IAAK,IAAIrjC,EAAI8mB,EAAM9mB,EAAIq+B,EAAWr+B,GAAKknB,EAAM,CACzC,IAAI9kB,GAAW,IAAMkF,EAAMtH,EAAIoL,GAAQ,IACvC,KAAMu3B,GAAcn/B,GAAQpB,EAASugC,IACjCC,EAAK9/B,KAAKV,GAIlB,OAAOwgC,GAGXY,eAAgB,WACZ,OAAOlgC,KAAKu/B,UAAUv/B,KAAK1D,QAAQ+oB,YAGvC8a,eAAgB,WACZ,OAAOngC,KAAKu/B,UAAUv/B,KAAK1D,QAAQqpB,YAGvC+Z,cAAe,SAAShjC,GACpB,OAAQ,IAAMA,EAAIsD,KAAK1D,QAAQ+R,YAAc,KAGjD0R,WAAY,WACR,MAAO,IAGX8e,oBAAqB,SAASzY,GAC1B,IAAIa,EAAiBjnB,KAAK1D,QAAQ2qB,eAClC,OAAOjnB,KAAKo/B,eAAehZ,EAASpmB,KAAK1D,QAAQ+oB,UAAW4B,EAAezD,KAAMyD,EAAerD,OAGpGmb,oBAAqB,SAAS3Y,EAASsY,GACnC,IAAIpiC,EAAU0D,KAAK1D,QACnB,IAAI0qB,EAAiB1qB,EAAQ0qB,eAC7B,IAAIC,EAAiB3qB,EAAQ2qB,eAC7B,IAAI4X,EAAsBH,EAAY1+B,KAAKu/B,UAAUjjC,EAAQ+oB,UAAW4B,EAAezD,KAAMyD,EAAerD,MAAQ,KAEpH,OAAO5jB,KAAKo/B,eAAehZ,EAAS9pB,EAAQqpB,UAAWqB,EAAexD,KAAMwD,EAAepD,KAAMib,IAGrG2B,aAAc,SAASD,GACnB,OAAOvgC,KAAKymB,QAAQ8Z,EAAKr4B,KAAMq4B,EAAK7Z,KAGxCD,QAAS,SAASxb,EAAGxE,GACjB,IAAInF,EAAMtB,KACV,IAAI1D,EAAUgF,EAAIhF,QAClB,IAAIyP,EAAMzK,EAAIyK,IACd,IAAIsC,EAAa/R,EAAQ+R,WACzB,IAAIjO,EAAQiD,EAAW4H,EAAG3O,EAAQ0H,IAAK1H,EAAQiG,KAC/C,IAAIlC,EAAMgD,EAAWoD,GAAKrG,EAAOA,EAAO9D,EAAQiG,KAEhD,GAAIjG,EAAQwoB,QAAS,CACjB1kB,IAAU,EACVC,IAAQ,EAGZD,GAAS,IAAMA,EAAQiO,GAAc,IACrChO,GAAO,IAAMA,EAAMgO,GAAc,IAEjC,GAAIhO,EAAMD,EAAO,CACb,IAAI8gC,EAAM9gC,EACVA,EAAQC,EACRA,EAAM6gC,EAGV,OAAO,IAAI/yB,GAAKpC,EAAIxB,SAAU,EAAGwB,EAAIC,SAAW,EAAG5L,EAAOC,EAAMD,IAGpE6oB,KAAM,SAAS/gB,EAAMwe,GACjB,GAAIA,SAAY,EAAKA,EAAKxe,EAE1B,IAAI5L,EAAU0D,KAAK1D,QACnB,IAAI8D,EAAQ,IAAM9D,EAAQ+R,WAC1B,IAAI4a,EAAOjpB,KAAKymB,QAAQve,EAAMwe,GAC9B,IAAI1iB,EAAM1B,KAAK0B,IAAIkE,EAAMwe,GACzB,IAAInkB,EAAMD,KAAKC,IAAI2F,EAAMwe,GACzB,IAAIrY,EAAYiB,EAEhB,GAAIhT,EAAQwoB,QAAS,CACjBzW,EAAarK,EACbsL,EAAW/M,MACR,CACH8L,EAAa,IAAM9L,EACnB+M,EAAW,IAAMtL,EAGrBqK,GAAcA,EAAajO,GAAS,IACpCkP,GAAYA,EAAWlP,GAAS,IAEhC,OAAO,IAAIlI,EAASwY,IAAI,CAAEuY,EAAK1e,OAAOrN,EAAG+rB,EAAK1e,OAAOpN,GAAK,CACtDkR,WAAYA,EACZiB,SAAUA,EACVqB,QAASsY,EAAKxd,OACdmF,QAASqY,EAAKxd,UAItBwvB,SAAU,SAAS5wB,GACf,IAAI/N,EAAU0D,KAAK1D,QACnB,IAAIiO,EAASvK,KAAK+L,IAAIxB,SACtB,IAAIY,EAAKd,EAAMnN,EAAIqN,EAAOrN,EAC1B,IAAIkO,EAAKf,EAAMlN,EAAIoN,EAAOpN,EAC1B,IAAIsN,EAAQnI,KAAKzF,MAAMiG,GAAIR,KAAK6+B,MAAM/1B,EAAID,KAC1C,IAAI/K,EAAQ9D,EAAQ+R,WAEpB,IAAK/R,EAAQwoB,QAAS,CAClBra,IAAU,EACVrK,IAAU,EAGd,OAAQqK,EAAQrK,EAAQ,KAAO,KAGnCkqB,WAAY,WACR,MAAO,CACHtmB,IAAK,EACLzB,IAAKD,KAAK8+B,GAAK,OAiCvBC,IA5BJ19B,GAAkBq9B,GAAW,CACzBp9B,KAAM,QACNyK,WAAY,EACZyW,QAAS,MACTO,UAAW,GACXrhB,IAAK,EACLzB,IAAK,IACLogB,OAAQ,CACJpN,OAAQhX,GAAW,KAEvB0oB,eAAgB,CACZpgB,MAAO/N,EACPqZ,QAAS,KACT1V,MAAO,GAEXuqB,eAAgB,CACZngB,MAAO,UAIfrO,EAAWwoC,GAAUzgC,UAAWk+B,GAAgB,CAC5C1Z,gBAAiB4a,GAAkBp/B,UAAUwkB,gBAC7C4Z,YAAagB,GAAkBp/B,UAAUo+B,YACzC5a,MAAOuW,GAAY/5B,UAAUwjB,MAC7BN,YAAa6W,GAAY/5B,UAAUkjB,YACnCS,gBAAiBoW,GAAY/5B,UAAU2jB,kBAGf,CACxB5nB,QAAS,CACL2qB,eAAgB,CACZ9U,QAAS,OAIjB4S,gBAAiB,WACb,IAAIjjB,EAAS9B,KAEb,IAAIsB,EAAMtB,KAAK1D,QACf,IAAIsH,EAAOtC,EAAI2lB,eAAerjB,KAC9B,IAAIqiB,EAAY3kB,EAAI2kB,UAAW,GAAIA,SAAmB,EAAKA,EAAY,GACvE,IAAIG,EAAUpmB,KAAKkmB,SAASob,UAC5B,IAAI3C,EAAcvY,EAAQuY,cAC1B,IAAIp0B,EAAS6b,EAAQra,IAAIxB,SACzB,IAAIoQ,EAAQ3a,KAAKmmB,eAAiB,IAAIpuB,EAAM,CACxC6a,QAAS,IAGb,IAAK,IAAIlW,EAAI,EAAGA,EAAIupB,EAAUpqB,OAAQa,IAAK,CACvC,IAAI6jC,EAAOta,EAAUvpB,GACrB,IAAI6kC,EAAY,CACZhtB,KAAM,CACF1N,MAAO05B,EAAK15B,MACZsN,QAASosB,EAAKpsB,SAElB5X,OAAQ,CACJ4X,QAASosB,EAAKpsB,UAItB,IAAI8U,EAAOnnB,EAAO2kB,QAAQ8Z,EAAKr4B,KAAMq4B,EAAK7Z,GAAI,MAC9C,IAAI+Z,EAAO,IAAItyB,GAAK5D,EAAQA,EAAOpN,EAAI8rB,EAAKnd,GAAIvB,EAAOpN,EAAI8rB,EAAKrd,GAAI,EAAG,KAEvE,IAAI41B,OAAc,EAClB,GAAI59B,IAAShL,EACT4oC,EAAQjxB,GAAazR,QAAQ0R,WAAWiwB,EAAMc,QAE9CC,EAAQ1pC,EAAK6e,WAAW7U,EAAO2/B,eAAehB,EAAM9B,GAAc4C,GAAWzwB,QAGjF6J,EAAM/X,OAAO4+B,GAGjBxhC,KAAK2S,aAAagI,IAGtB8mB,eAAgB,SAAShB,EAAMtwB,GAC3B,IAAIuxB,EAAc,GAClB,IAAIC,EAAc,GAClB,IAAIp3B,EAAS,CAAEk2B,EAAKl2B,OAAOrN,EAAGujC,EAAKl2B,OAAOpN,GAC1C,IAAIykC,EAAc,IAAIxpC,EAAOmS,EAAQk2B,EAAKryB,aAC1C,IAAIyzB,EAAc,IAAIzpC,EAAOmS,EAAQk2B,EAAKh1B,QAE1C,IAAK,IAAI/O,EAAI,EAAGA,EAAIyT,EAAOtU,OAAQa,IAAK,CACpCglC,EAAYliC,KAAKoiC,EAAY5wB,QAAQb,EAAOzT,GAAK,MACjDilC,EAAYniC,KAAKqiC,EAAY7wB,QAAQb,EAAOzT,GAAK,MAGrDglC,EAAY5c,UACZ4c,EAAYliC,KAAKkiC,EAAY,IAC7BC,EAAYniC,KAAKmiC,EAAY,IAE7B,OAAOA,EAAY17B,OAAOy7B,IAG9B3a,gBAAiB,SAASX,GACtB,IAAI9pB,EAAU0D,KAAK1D,QACnB,IAAI0mB,EAAahjB,KAAK8hC,8BACtB,IAAInD,EAAcvY,EAAQuY,cAC1B,IAAIp0B,EAAS6b,EAAQra,IAAIxB,SACzB,IAAI0a,EAAY,GAEhB,GAAI3oB,EAAQ2qB,eAAe9U,QACvB8S,EAAYjlB,KAAKi/B,gBACb10B,EAAQyY,EAAY2b,EAAariC,EAAQ2qB,gBAIjD,GAAI3qB,EAAQ0qB,eAAe7U,QAAS,CAChC,IAAI2Q,EAAa9iB,KAAK+hC,8BACtBn/B,GAAOqiB,EAAWjlB,KAAKi/B,gBACnB10B,EAAQuY,EAAY6b,EAAariC,EAAQ0qB,iBAIjD,OAAO/B,GAGXga,gBAAiB,SAAS10B,EAAQ8iB,EAAOld,EAAQ7T,GAC7C,IAAI6B,EAAQ,CACR5B,OAAQ,CACJE,MAAOH,EAAQG,MACfoK,MAAOvK,EAAQuK,MACfuP,SAAU9Z,EAAQ8Z,WAG1B,IAAIoN,EAAOlnB,EAAQknB,KAAM,GAAIA,SAAc,EAAKA,EAAO,EACvD,IAAII,EAAOtnB,EAAQsnB,KAAM,GAAIA,SAAc,EAAKA,EAAO,EACvD,IAAItH,EAAYtc,KAAKglB,kBAErB,IAAK,IAAIkD,EAAS1E,EAAM0E,EAASmF,EAAMxxB,OAAQqsB,GAAUtE,EAAM,CAC3D,IAAIoe,EAAaz3B,EAAOpN,EAAIkwB,EAAMnF,GAClC,GAAI8Z,EAAa,EAAG,CAChB,IAAI7C,EAAS,IAAI/mC,EAAO,CAAEmS,EAAOrN,EAAGqN,EAAOpN,GAAK6kC,GAChD,GAAI1lC,EAAQsH,OAAShL,EACjB0jB,EAAU1Z,OAAO,IAAIjL,EAAQS,OAAO+mC,EAAQhhC,QACzC,CACH,IAAIyhB,EAAO,IAAI9nB,EAAKqG,GACpB,IAAK,IAAI8jC,EAAU,EAAGA,EAAU9xB,EAAOtU,OAAQomC,IAC3CriB,EAAK3O,OAAOkuB,EAAOnuB,QAAQb,EAAO8xB,GAAW,MAGjDriB,EAAK9O,QACLwL,EAAU1Z,OAAOgd,KAK7B,OAAOtD,EAAUnL,UAGrB8pB,SAAU,SAAS5wB,GACf,IAAI+Z,EAAUpkB,KAAKokB,UACnB,IAAIgC,EAAUpmB,KAAKkmB,SAASob,UAC5B,IAAI3C,EAAcvY,EAAQuY,cAC1B,IAAIp0B,EAAS6b,EAAQra,IAAIxB,SACzB,IAAIkB,EAASpB,EAAMa,WAAWX,GAC9B,IAAIsE,EAAWpD,EAEf,GAAIzL,KAAK1D,QAAQ2qB,eAAerjB,OAAShL,GAAO+lC,EAAY9iC,OAAS,EAAG,CACpE,IAAIsP,EAAKd,EAAMnN,EAAIqN,EAAOrN,EAC1B,IAAIkO,EAAKf,EAAMlN,EAAIoN,EAAOpN,EAC1B,IAAIsN,GAAS3H,GAAIR,KAAK6+B,MAAM/1B,EAAID,IAAO,KAAO,IAE9CwzB,EAAY5uB,KAAK,SAAS9E,EAAGxE,GACzB,OAAOy7B,GAAgBj3B,EAAGR,GAASy3B,GAAgBz7B,EAAGgE,KAK1D,IAAI03B,EAAWD,GAAgBvD,EAAY,GAAIA,EAAY,IAAM,EACjE,IAAIc,EAAQyC,GAAgBz3B,EAAOk0B,EAAY,IAC/C,IAAIyD,EAAQ,GAAKD,EACjB,IAAIE,EAAO,IAAM5C,EAAQ2C,EAEzBvzB,EAAWpD,GAAUnJ,KAAKuI,IAAItH,GAAI8+B,IAAS//B,KAAKuI,IAAItH,GAAI6+B,KAG5D,OAAOpiC,KAAKsiC,WAAW/hC,UAAU06B,SAAS5qB,KACtCrQ,KAAM,IAAIkK,GAAMka,EAAQzY,GAAIyY,EAAQtY,GAAK+C,OAKrD,SAASqzB,GAAgBj3B,EAAGxE,GACxB,OAAO,IAAMnE,KAAKsH,IAAItH,KAAKsH,IAAIqB,EAAIxE,GAAK,KAG5C,IAAI87B,GAAmBjI,GAAYp7B,OAAO,CACtC4iC,4BAA6B,WACzB,OAAO9hC,KAAKuxB,iBAAiBvxB,KAAK1D,QAAQ+oB,YAG9C0c,4BAA6B,WACzB,IAAIzlC,EAAU0D,KAAK1D,QACnB,IAAIkmC,EAAgB,EAEpB,GAAIlmC,EAAQ2qB,eAAe9U,QACvBqwB,EAAgBlmC,EAAQ+oB,UAE5B,OAAOrlB,KAAKuxB,iBAAiBj1B,EAAQqpB,UAAW6c,IAGpDF,SAAU,WACN,OAAOhI,MAMXmI,IAFJjqC,EAAW+pC,GAAiBhiC,UAAW8gC,IAEZlE,GAAgBj+B,OAAO,CAC9C4iC,4BAA6B,WACzB,IAAItQ,EAAY,GAEhBxxB,KAAK29B,4BAA4B,SAASrgB,GACtCkU,EAAUhyB,KAAK8d,IAChBtd,KAAK1D,QAAQ2qB,gBAEhB,OAAOuK,GAGXuQ,4BAA6B,WACzB,IAAIvQ,EAAY,GAEhBxxB,KAAK69B,4BAA4B,SAASvgB,GACtCkU,EAAUhyB,KAAK8d,IAChBtd,KAAK1D,QAAQ0qB,gBAEhB,OAAOwK,GAGX8Q,SAAU,WACN,OAAOnF,OAMXuF,IAFJlqC,EAAWiqC,GAAqBliC,UAAW8gC,IAE9B,MACTsB,GAA6B,IAE7BC,GAAiB5qC,EAAMkH,OAAO,CAC9B8B,KAAM,SAASmU,GAEXnV,KAAKmV,OAASA,GAGlB0tB,QAAS,SAASC,GACd,IAAIhhC,EAAS9B,KAEb,IAAIkN,EAAS41B,EAAWz7B,MAAM,GAC9B,IAAI1K,EAAW,GACf,IAAIwY,EAASnV,KAAKmV,OAClB,IAAItZ,EAASqR,EAAOrR,OAEpB,GAAIA,EAAS,EAAG,CACZmE,KAAK+iC,iBAAiB,EAAG71B,GACzBrR,EAASqR,EAAOrR,OAGpB,GAAIA,EAAS,GAAMA,IAAW,GAAKqR,EAAO,GAAG9C,OAAO8C,EAAO,IACvD,OAAOvQ,EAGX,IAAIqmC,EAAK91B,EAAO,GAChB,IAAIilB,EAAKjlB,EAAO,GAChB,IAAIklB,EAAKllB,EAAO,GAEhBvQ,EAAS6C,KAAK,IAAIjH,EAAQyqC,IAE1B,MAAOA,EAAG54B,OAAO8C,EAAOrR,EAAS,IAAK,CAClCsZ,EAAS,KACTjI,EAAO+1B,MACPpnC,IAGJ,GAAIA,IAAW,EAAG,CACd,IAAIqnC,EAAUljC,KAAKkjC,QAAQF,EAAG7Q,EAAIl3B,EAAGC,GAErCkI,GAAKzG,GAAUwmC,WACXnjC,KAAKojC,kBAAkBF,EAASF,EAAI7Q,EAAIl3B,EAAGC,IAG/CyB,EAAS6C,KAAK,IAAIjH,EACd45B,EACAnyB,KAAKqjC,mBAAmBH,EAASF,EAAI7Q,EAAIl3B,EAAGC,KAGhD,OAAOyB,EAGX,IAAI2mC,EAAqBC,EAEzB,GAAIpuB,EAAQ,CACR6tB,EAAK91B,EAAOrR,EAAS,GAAIs2B,EAAKjlB,EAAO,GAAIklB,EAAKllB,EAAO,GACrD,IAAIs2B,EAAgBxjC,KAAKwjC,cAAcR,EAAI7Q,EAAIC,GAC/CkR,EAAsBE,EAAc,GACpCD,EAAmBC,EAAc,OAC9B,CACH,IAAIC,EAAYzjC,KAAKkjC,QAAQF,EAAI7Q,EAAIl3B,EAAEC,GACvCooC,EAAsBtjC,KAAKojC,kBAAkBK,EAAWT,EAAI7Q,EAAIl3B,EAAGC,GAGvE,IAAIwoC,EAAMJ,EACV,IAAK,IAAI1nC,EAAM,EAAGA,GAAOC,EAAS,EAAGD,IAAO,CACxCkG,EAAOihC,iBAAiBnnC,EAAKsR,GAC7BrR,EAASqR,EAAOrR,OAChB,GAAID,EAAM,GAAKC,EAAQ,CACnBmnC,EAAK91B,EAAOtR,GAAMu2B,EAAKjlB,EAAOtR,EAAM,GAAIw2B,EAAKllB,EAAOtR,EAAM,GAC1D,IAAI+nC,EAAkB7hC,EAAO0hC,cAAcR,EAAG7Q,EAAGC,GAEjDhvB,GAAKzG,GAAUwmC,WAAWO,GAC1BA,EAAMC,EAAgB,GAEtB,IAAIC,EAAMD,EAAgB,GAC1BhnC,EAAS6C,KAAK,IAAIjH,EAAQ45B,EAAIyR,KAItC,GAAIzuB,EAAQ,CACR6tB,EAAK91B,EAAOrR,EAAS,GAAIs2B,EAAKjlB,EAAOrR,EAAS,GAAIu2B,EAAKllB,EAAO,GAC9D,IAAI22B,EAAkB7jC,KAAKwjC,cAAcR,EAAI7Q,EAAIC,GAEjDhvB,GAAKzG,GAAUwmC,WAAWO,GAC1B/mC,EAAS6C,KAAK,IAAIjH,EACd45B,EACA0R,EAAgB,KAGpBzgC,GAAKzG,GAAUwmC,WAAWU,EAAgB,IAC1ClnC,EAAS6C,KAAK,IAAIjH,EACd65B,EACAmR,QAED,CACH,IAAIO,EAAY9jC,KAAKkjC,QAAQ/Q,EAAIC,EAAIn3B,EAAGC,GAExCkI,GAAKzG,GAAUwmC,WAAWO,GAC1B/mC,EAAS6C,KAAK,IAAIjH,EACd65B,EACApyB,KAAKqjC,mBAAmBS,EAAW3R,EAAIC,EAAIn3B,EAAGC,KAItD,OAAOyB,GAGXomC,iBAAkB,SAASnnC,EAAKsR,GAC5B,MAAOA,EAAOtR,EAAM,KAAOsR,EAAOtR,GAAKwO,OAAO8C,EAAOtR,EAAM,KAAOsR,EAAOtR,EAAM,GAAGwO,OAAO8C,EAAOtR,EAAM,KAClGsR,EAAO+qB,OAAOr8B,EAAM,EAAG,IAI/BmoC,WAAY,SAASf,EAAI7Q,EAAIC,GACzB,IAAI2R,EAAa,MAEjB,GAAIf,EAAG9lC,IAAMi1B,EAAGj1B,EACZ6mC,EAAa,UACV,GAAI5R,EAAGj1B,IAAMk1B,EAAGl1B,GACnB,GAAKi1B,EAAGh1B,EAAIi1B,EAAGj1B,GAAK6lC,EAAG7lC,GAAKg1B,EAAGh1B,GAAOi1B,EAAGj1B,EAAIg1B,EAAGh1B,GAAKg1B,EAAGh1B,GAAK6lC,EAAG7lC,EAC5D4mC,EAAa,SAEd,CACH,IAAIl8B,EAAK7H,KAAKgkC,aAAahB,EAAG7Q,GAC9B,IAAIrmB,EAAK9L,KAAKikC,kBAAkBp8B,EAAIuqB,EAAGl1B,GACvC,KAAM8lC,EAAG7lC,GAAKg1B,EAAGh1B,GAAKi1B,EAAGj1B,GAAK2O,MACxBqmB,EAAGh1B,GAAK6lC,EAAG7lC,GAAKi1B,EAAGj1B,GAAK2O,GAC1Bi4B,EAAa,KAIrB,OAAOA,GAGXG,OAAQ,SAASlB,EAAI7Q,EAAIC,GACrB,IAAIvqB,EAAK7H,KAAKgkC,aAAahB,EAAI7Q,GAC/B,IAAIrmB,EAAK9L,KAAKikC,kBAAkBp8B,EAAIuqB,EAAGl1B,GAEvC,OAAQ8lC,EAAG9lC,IAAMi1B,EAAGj1B,GAAKi1B,EAAGj1B,IAAMk1B,EAAGl1B,GAAML,EAAMiP,EAAI,KAAOjP,EAAMu1B,EAAGj1B,EAAG,IAG5E6mC,aAAc,SAAS7R,EAAIC,GACvB,IAAInnB,GAAKmnB,EAAGj1B,EAAIg1B,EAAGh1B,IAAMi1B,EAAGl1B,EAAIi1B,EAAGj1B,GACnC,IAAIuJ,EAAI0rB,EAAGh1B,EAAI8N,EAAIknB,EAAGj1B,EAEtB,MAAO,CAAEuJ,EAAGwE,IAGhBu4B,cAAe,SAASR,EAAI7Q,EAAIC,GAC5B,IAAI+R,EAASlpC,EACb,IAAImpC,EAASlpC,EACb,IAAImpC,EAAW,MACf,IAAIC,EAAoB,MACxB,IAAIpB,EAEJ,GAAIljC,KAAKkkC,OAAOlB,EAAI7Q,EAAIC,GACpB8Q,EAAUljC,KAAKkjC,QAAQF,EAAI7Q,EAAIl3B,EAAGC,OAC/B,CACH,IAAIqpC,EAAY,CACZrnC,EAAG8C,KAAKwkC,mBAAmBxB,EAAI7Q,EAAIC,EAAIn3B,GACvCkC,EAAG6C,KAAKwkC,mBAAmBxB,EAAI7Q,EAAIC,EAAIl3B,IAG3C,GAAIqpC,EAAUrnC,GAAKqnC,EAAUpnC,EAAG,CAC5B+lC,EAAUljC,KAAKkjC,QAAQF,EAAI5Q,EAAIn3B,EAAGC,GAClCmpC,EAAW,SACR,CACH,GAAIrkC,KAAK+jC,WAAWf,EAAI7Q,EAAIC,GAAK,CAC7B+R,EAASjpC,EACTkpC,EAASnpC,EAGb,GAAIspC,EAAUJ,GACVjB,EAAU,MACP,CACH,IAAIuB,EACJ,GAAKrS,EAAGgS,GAAUpB,EAAGoB,IAAWpB,EAAGoB,IAAWjS,EAAGiS,IAC5CpB,EAAGoB,GAAUhS,EAAGgS,IAAWjS,EAAGiS,IAAWpB,EAAGoB,GAC7CK,EAAOC,IAAYtS,EAAGgS,GAAUpB,EAAGoB,KAAYjS,EAAGgS,GAAUnB,EAAGmB,UAE/DM,GAAQC,IAAYtS,EAAG+R,GAAUnB,EAAGmB,KAAYhS,EAAGiS,GAAUpB,EAAGoB,KAGpElB,EAAUP,GAA6B8B,EACvCH,EAAoB,OAKhC,IAAIjB,EAAqBrjC,KAAKqjC,mBAAmBH,EAASF,EAAI7Q,EAAIgS,EAAQC,GAE1E,GAAIE,EAAmB,CACnB,IAAIK,EAAYR,EAChBA,EAASC,EACTA,EAASO,EAGb,IAAIvB,EAAoBpjC,KAAKojC,kBAAkBF,EAAS/Q,EAAIC,EAAI+R,EAAQC,GAExE,GAAIC,EAAU,CACVrkC,KAAK4kC,qBAAqB5B,EAAI7Q,EAAIkR,EAAoBH,GACtDljC,KAAK4kC,qBAAqBzS,EAAIC,EAAIgR,EAAmBF,GAGzD,MAAO,CAAEG,EAAoBD,IAGjCwB,qBAAsB,SAASzS,EAAIC,EAAIyS,EAAI3B,GACvC,GAAI/Q,EAAGh1B,EAAIi1B,EAAGj1B,GACV,GAAIi1B,EAAGj1B,EAAI0nC,EAAG1nC,EAAG,CACb0nC,EAAG3nC,EAAIi1B,EAAGj1B,GAAKk1B,EAAGj1B,EAAIg1B,EAAGh1B,GAAK+lC,EAC9B2B,EAAG1nC,EAAIi1B,EAAGj1B,OACP,GAAI0nC,EAAG1nC,EAAIg1B,EAAGh1B,EAAG,CACpB0nC,EAAG3nC,EAAIk1B,EAAGl1B,GAAKk1B,EAAGj1B,EAAIg1B,EAAGh1B,GAAK+lC,EAC9B2B,EAAG1nC,EAAIg1B,EAAGh1B,QAGd,GAAI0nC,EAAG1nC,EAAIi1B,EAAGj1B,EAAG,CACb0nC,EAAG3nC,EAAIi1B,EAAGj1B,GAAKi1B,EAAGh1B,EAAIi1B,EAAGj1B,GAAK+lC,EAC9B2B,EAAG1nC,EAAIi1B,EAAGj1B,OACP,GAAIg1B,EAAGh1B,EAAI0nC,EAAG1nC,EAAG,CACpB0nC,EAAG3nC,EAAIk1B,EAAGl1B,GAAKi1B,EAAGh1B,EAAIi1B,EAAGj1B,GAAK+lC,EAC9B2B,EAAG1nC,EAAIg1B,EAAGh1B,IAKtB+lC,QAAS,SAASF,EAAI7Q,EAAIgS,EAAQC,GAC9B,IAAIlnC,EAAIi1B,EAAGgS,GAAUnB,EAAGmB,GACxB,IAAIhnC,EAAIg1B,EAAGiS,GAAUpB,EAAGoB,GACxB,IAAIlB,EAEJ,GAAIhmC,IAAM,EACNgmC,EAAU,OAEVA,EAAU/lC,EAAID,EAGlB,OAAOgmC,GAGXsB,mBAAoB,SAASxB,EAAI7Q,EAAIC,EAAIv0B,GACrC,OAAQu0B,EAAGv0B,GAASs0B,EAAGt0B,IAAUs0B,EAAGt0B,GAASmlC,EAAGnlC,IACnCu0B,EAAGv0B,GAASs0B,EAAGt0B,IAAUs0B,EAAGt0B,GAASmlC,EAAGnlC,IAGzDulC,kBAAmB,SAASF,EAASF,EAAI8B,EAAIX,EAAQC,GACjD,IAAIW,EAAK/B,EAAGmB,GACZ,IAAIa,EAAKF,EAAGX,GACZ,IAAIt1B,GAAYm2B,EAAKD,GAAMrC,GAE3B,OAAO1iC,KAAKqK,MAAM06B,EAAKl2B,EAAUm0B,EAAGoB,GAAUv1B,EAAWq0B,EAASiB,EAAQC,IAG9Ef,mBAAoB,SAASH,EAASF,EAAI8B,EAAIX,EAAQC,GAClD,IAAIW,EAAK/B,EAAGmB,GACZ,IAAIa,EAAKF,EAAGX,GACZ,IAAIt1B,GAAYm2B,EAAKD,GAAMrC,GAE3B,OAAO1iC,KAAKqK,MAAM26B,EAAKn2B,EAAUi2B,EAAGV,GAAUv1B,EAAWq0B,EAASiB,EAAQC,IAG9E/5B,MAAO,SAAS46B,EAAQC,EAAQf,EAAQC,GACpC,IAAIe,EAAe,IAAIjtC,EAASgS,MAChCi7B,EAAahB,GAAUc,EACvBE,EAAaf,GAAUc,EAEvB,OAAOC,GAGXlB,kBAAmB,SAASp8B,EAAI3K,GAC5B,IAAIrB,EAASgM,EAAGhM,OAChB,IAAIqC,EAAS,EAEb,IAAK,IAAIxB,EAAI,EAAGA,EAAIb,EAAQa,IACxBwB,GAAUoE,KAAKwH,IAAI5M,EAAER,GAAKmL,EAAGnL,GAEjC,OAAOwB,KAIf,SAASwmC,GAAWppC,GAChB,OAAOA,GAAS,GAAK,EAAI,EAG7B1D,EAAQwtC,UAAY/tB,GAEpB5f,MAAMe,WAAWf,MAAMG,QAAS,CAC5BwD,UAAWA,GACX4mB,SAAUA,GACVtY,cAAeA,GACfQ,MAAOA,GACPoB,IAAKA,EACL6C,KAAMA,GACNiC,OAAQA,GACRG,aAAcA,GACd+F,aAAcA,GACdpF,aAAcA,GACdoE,WAAYA,GACZ+C,YAAaA,GACbiB,aAAcA,GACdgC,KAAMA,GACNQ,QAASA,GACTuB,MAAOA,GACPE,UAAWA,GACXmF,KAAMA,GACN1D,KAAMA,GACNiR,aAAcA,GACdqH,iBAAkBA,GAClB8E,cAAeA,GACf9B,YAAaA,GACb6C,gBAAiBA,GACjB6D,UAAWA,GACXrB,kBAAmBA,GACnB4C,iBAAkBA,GAClBE,qBAAsBA,GACtBG,eAAgBA,GAChBlnB,UAAWA,GACXlgB,SAAUA,GACVS,YAAaA,GACbE,iBAAkBA,GAClBY,UAAWA,GACXQ,oBAAqBA,GACrB/E,WAAYA,EACZuF,cAAeA,GACfQ,WAAYA,GACZY,YAAaA,GACbxG,OAAQD,EACR2G,KAAMA,GACNI,WAAYA,GACZM,QAASA,GACTG,QAASA,GACTC,iBAAkBA,GAClBY,iBAAkBA,GAClB1F,QAASA,GACT5C,WAAYA,EACZ2E,SAAUA,GACVK,SAAUA,GACVH,SAAUA,GACVyE,IAAKA,GACLE,gBAAiBA,GACjByB,WAAYA,GACZC,kBAAmBA,GACnBG,kBAAmBA,GACnBpG,WAAYA,GACZwG,KAAMA,GACNiC,aAAcA,GACdS,cAAeA,GACfyB,cAAeA,GACfC,oBAAqBA,GACrB1D,KAAMA,GACNhC,OAAQA,GACRC,WAAYA,GACZ7K,MAAOA,EACPwE,QAASA,EACTsG,IAAKA,GACLC,cAAeA,GACfC,YAAaA,GACbC,iBAAkBA,GAClBC,aAAcA,GACdC,QAASA,GACTC,KAAMA,GACNC,WAAYA,EACZ8B,aAAc1N,MAAM0N,aACpB7B,UAAWA,GACXC,IAAKA,GACL1G,MAAOA,EACP2G,aAAcA,GACdC,eAAgBA,GAChBupB,iBAAkBA,GAClBmB,YAAaA,GACbhB,SAAUA,GACV0B,SAAUA,GACVC,aAAcA,GACdC,SAAUA,GACVE,WAAYA,GACZG,UAAWA,GACXG,SAAUA,GACVX,UAAWA,GACXY,aAAcA,GACdjC,YAAaA,GACbD,OAAQA,EACR9M,UAAWA,GACXqP,WAAYA,GACZb,OAAQA,GACRvO,SAAUA,OAr1Pd,CA01PoB,mBAAVnpB,QAAwBA,OAAO+tC,IAAM/tC,OAAS,SAASguC,EAAIC,EAAIC,IAAMA,GAAMD,OACrF,SAAajuC,QACTA,OAAO,oBAAoB,CACvB,gBAEL,WAEH,IAAUC,EA2FPC,OAAOC,MAAMC,OAzFRE,EAAUH,MAAMG,QAChBoqB,EAAWpqB,EAAQoqB,SACnByjB,EAAOhuC,MAAME,QAEjBC,EAAQ8tC,YAAc,CAAC,OAAQ,aAAc,eAAgB,eAE7D9tC,EAAQ+tC,YAAc,CAClBzmC,OAAQ,SAAS2E,EAAO+hC,GACpB,IAAK/hC,EAAMgiC,aACP,MAAM,IAAIrH,MAAM,oDAGpB36B,EAAMiiC,UAAY9lC,KAAK8lC,UACvBjiC,EAAMkiC,YAAc/lC,KAAK+lC,YACzBliC,EAAMmiC,UAAYhmC,KAAKgmC,UAEvB,IAAKJ,EAAY,CACb/hC,EAAMoiC,IAAMjmC,KAAKimC,IACjBpiC,EAAMqiC,aAAelmC,KAAKkmC,eAIlCJ,UAAW,SAASxpC,GAChB,OAAOmpC,EAAKK,UAAU9lC,KAAK6lC,eAAgBvpC,IAG/CypC,YAAa,SAASzpC,GAClB,OAAOmpC,EAAKM,YAAY/lC,KAAK6lC,aAAavpC,GAAUA,IAGxD0pC,UAAW,SAAS1pC,GAChB,OAAOmpC,EAAKO,UAAUhmC,KAAK6lC,eAAgBvpC,IAG/C2pC,IAAK,WACD,GAAIR,EAAKQ,IAAIE,QACT,OAAOV,EAAKQ,IAAIG,YAAYpmC,KAAK6lC,qBAEjC,MAAM,IAAIrH,MAAM,8EAIxB0H,aAAc,WACV,IAAKzuC,MAAMQ,QAAQouC,OACf,OAAO,KAGX,GAAIZ,EAAKY,OAAOF,QAAS,CACrB,IAAI7pB,EAAY/kB,EAAE,WAAW+uC,IAAI,CAC7BC,QAAS,OACT9pC,MAAOuD,KAAKvE,QAAQgB,QACpBuP,OAAQhM,KAAKvE,QAAQuQ,WACtBw6B,SAAS9hC,SAAS+hC,MAErB,IAAIC,EAAU,IAAIjB,EAAKY,OAAOF,QAAQ7pB,EAAU,IAChDoqB,EAAQjB,KAAKzlC,KAAK6lC,gBAClB,IAAIc,EAAQD,EAAQE,aAAaC,YAEjCH,EAAQn1B,UACR+K,EAAUwqB,SAEV,OAAOH,OAEP,MAAM,IAAInI,MAAM,oFAK5Bxc,EAAStB,YAAY7gB,SAAS,CAC3B+d,OAAQ,SAASA,GACb,OAAOnmB,MAAMmmB,OAAOhc,MAAM,KAAM,CAACgc,GAAQ3X,OAAO1K,MAAMgF,UAAU8G,MAAMgJ,KAAK1O,UAAW,MAE1F4e,SAAU9oB,MAAM8oB,SAChBC,UAAW/oB,MAAM+oB,UACjBC,SAAU,WACN,OAAOhpB,MAAMomB,UAAUkpB,UAAUC,SAASvmB,YAIjDuB,EAAS/iB,gBAAgBY,SAAS,CAC/Bd,QAAStH,MAAMuH,WAGlBpH,EAAQqvC,QAAUrvC,EAAQsS,MAC1BtS,EAAQsvC,MAAQtvC,EAAQ0T,IACxB1T,EAAQuvC,QAAU,SAASjlC,GACvB,OAAOtK,EAAQqK,gBAAgBC,EAAEklC,kBA9FzC,CAmGoB,mBAAV9vC,QAAwBA,OAAO+tC,IAAM/tC,OAAS,SAASguC,EAAIC,EAAIC,IAAOA,GAAMD,OACtF,SAAajuC,QACTA,OAAO,qBAAqB,CACxB,4BACA,uBAEL,WAEH,IAAI+vC,EAAW,CACXC,GAAI,eACJ7mC,KAAM,OACN8mC,YAAa,6BACb5yB,SAAU,UACV6yB,QAAS,CAAE,OAAQ,WACnBC,OAAQ,QAbZ,CAgBoB,mBAAVnwC,QAAwBA,OAAO+tC,IAAM/tC,OAAS,SAASguC,EAAIC,EAAIC,IAAOA,GAAMD"}