/**
 * Kendo UI v2022.3.913 (http://www.telerik.com/kendo-ui)
 * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(define){define("kendo.core.min",["jquery"],function(){var t={id:"core",name:"Core",category:"framework",description:"The core of the Kendo framework."},i={name:"@progress/kendo-ui",productName:"Kendo UI",productCodes:["KENDOUICOMPLETE","KENDOUI","KENDOUI","KENDOUICOMPLETE"],publishDate:0,version:"",licensingDocsUrl:"https://docs.telerik.com/kendo-ui/intro/installation/using-license-code"},g=jQuery,m=window,R=void 0,z=m.kendo=m.kendo||{cultures:{}},d=g.extend,r=g.each,u=Array.isArray,a=g.noop,p=Math,n,o=m.JSON||{},c={},v=/%/,s=/\{(\d+)(:[^\}]+)?\}/g,y=/(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+)?/i,b=/^(\+|-?)\d+(\.?)\d*$/,w="function",_="string",x="number",k="object",C="null",S="boolean",T="undefined",A="prefix",M="aria-labelledby",D="aria-label",E="_label",I={},P={},B=[].slice,O=["themeColor","fillMode","shape","size","rounded","positionMode"],L=function(){var e,t,i,n,r,a,o=arguments[0]||{},s=1,u=arguments.length,l=false;if(typeof o==="boolean"){l=o;o=arguments[s]||{};s++}if(typeof o!=="object"&&typeof o!=="function")o={};if(s===u){o=this;s--}for(;s<u;s++)if((r=arguments[s])!=null)for(n in r){if(n=="filters"||n=="concat"||n==":")continue;e=o[n];i=r[n];if(o===i)continue;if(l&&i&&(jQuery.isPlainObject(i)||(t=Array.isArray(i)))){if(t){t=false;a=e&&Array.isArray(e)?e:[]}else a=e&&jQuery.isPlainObject(e)?e:{};o[n]=L(l,a,i)}else if(i!==R)o[n]=i}return o};function F(){}z.version="2022.3.913".replace(/^\s+|\s+$/g,""),F.extend=function(e){var t=function(){},i,n=this,r=e&&e.init?e.init:function(){n.apply(this,arguments)},a;t.prototype=n.prototype;a=r.fn=r.prototype=new t;for(i in e)if(e[i]!=null&&e[i].constructor===Object)a[i]=d(true,{},t.prototype[i],e[i]);else a[i]=e[i];a.constructor=r;r.extend=n.extend;return r},F.prototype._initOptions=function(e){this.options=Ye({},this.options,e)};var V=z.isFunction=function(e){return typeof e==="function"},N=function(){this._defaultPrevented=true},H=function(){return this._defaultPrevented===true},U=F.extend({init:function(){this._events={}},bind:function(e,t,i){var n=this,r,a=typeof e===_?[e]:e,o,s,l,c=typeof t===w,u;if(t===R){for(r in e)n.bind(r,e[r]);return n}for(r=0,o=a.length;r<o;r++){e=a[r];l=c?t:t[e];if(l){if(i){s=l;l=function(){n.unbind(e,l);s.apply(n,arguments)};l.original=s}u=n._events[e]=n._events[e]||[];u.push(l)}}return n},one:function(e,t){return this.bind(e,t,true)},first:function(e,t){var i=this,n,r=typeof e===_?[e]:e,a,o,s=typeof t===w,l;for(n=0,a=r.length;n<a;n++){e=r[n];o=s?t:t[e];if(o){l=i._events[e]=i._events[e]||[];l.unshift(o)}}return i},trigger:function(e,t){var i=this,n=i._events[e],r,a;if(n){t=t||{};t.sender=i;t._defaultPrevented=false;t.preventDefault=N;t.isDefaultPrevented=H;n=n.slice();for(r=0,a=n.length;r<a;r++)n[r].call(i,t);return t._defaultPrevented===true}return false},unbind:function(e,t){var i=this,n=i._events[e],r;if(e===R)i._events={};else if(n)if(t){for(r=n.length-1;r>=0;r--)if(n[r]===t||n[r].original===t)n.splice(r,1)}else i._events[e]=[];return i}});function j(e,t){if(t)return"'"+e.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'";else{var i=e.charAt(0),n=e.substring(1);if(i==="=")return"+("+n+")+";else if(i===":")return"+$kendoHtmlEncode("+n+")+";else return";"+e+";$kendoOutput+="}}var G=/^\w+/,W=/\$\{([^}]*)\}/g,q=/\\\}/g,Y=/__CURLY__/g,$=/\\#/g,X=/__SHARP__/g,K=["","0","00","000","0000"];function l(e,t,i){e=e+"";t=t||2;i=t-e.length;if(i)return K[t].substring(0,i)+e;return e}n={paramName:"data",useWithBlock:true,render:function(e,t){var i,n,r="";for(i=0,n=t.length;i<n;i++)r+=e(t[i]);return r},compile:function(t,e){var i=d({},this,e),n=i.paramName,r=n.match(G)[0],a=i.useWithBlock,o="var $kendoOutput, $kendoHtmlEncode = kendo.htmlEncode;",s,l,u;if(V(t))return t;o+=a?"with("+n+"){":"";o+="$kendoOutput=";l=t.replace(q,"__CURLY__").replace(W,"#=$kendoHtmlEncode($1)#").replace(Y,"}").replace($,"__SHARP__").split("#");for(u=0;u<l.length;u++)o+=j(l[u],u%2===0);o+=a?";}":";";o+="return $kendoOutput;";o=o.replace(X,"#");try{s=new Function(r,o);s._slotCount=Math.floor(l.length/2);return s}catch(e){throw new Error(z.format("Invalid template:'{0}' Generated code:'{1}'",t,o))}}};var Q=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,Z,J={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},ee,te={}.toString;if(typeof Date.prototype.toJSON!==w){Date.prototype.toJSON=function(){var e=this;return isFinite(e.valueOf())?l(e.getUTCFullYear(),4)+"-"+l(e.getUTCMonth()+1)+"-"+l(e.getUTCDate())+"T"+l(e.getUTCHours())+":"+l(e.getUTCMinutes())+":"+l(e.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}function ie(e){Q.lastIndex=0;return Q.test(e)?'"'+e.replace(Q,function(e){var t=J[e];return typeof t===_?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function ne(e,t){var i,n,r,a,o=h,s,l=t[e],u;if(l&&typeof l===k&&typeof l.toJSON===w)l=l.toJSON(e);if(typeof ee===w)l=ee.call(t,e,l);u=typeof l;if(u===_)return ie(l);else if(u===x)return isFinite(l)?String(l):C;else if(u===S||u===C)return String(l);else if(u===k){if(!l)return C;h+=Z;s=[];if(te.apply(l)==="[object Array]"){a=l.length;for(i=0;i<a;i++)s[i]=ne(i,l)||C;r=s.length===0?"[]":h?"[\n"+h+s.join(",\n"+h)+"\n"+o+"]":"["+s.join(",")+"]";h=o;return r}if(ee&&typeof ee===k){a=ee.length;for(i=0;i<a;i++)if(typeof ee[i]===_){n=ee[i];r=ne(n,l);if(r)s.push(ie(n)+(h?": ":":")+r)}}else for(n in l)if(Object.hasOwnProperty.call(l,n)){r=ne(n,l);if(r)s.push(ie(n)+(h?": ":":")+r)}r=s.length===0?"{}":h?"{\n"+h+s.join(",\n"+h)+"\n"+o+"}":"{"+s.join(",")+"}";h=o;return r}}if(typeof o.stringify!==w)o.stringify=function(e,t,i){var n;h="";Z="";if(typeof i===x)for(n=0;n<i;n+=1)Z+=" ";else if(typeof i===_)Z=i;ee=t;if(t&&typeof t!==w&&(typeof t!==k||typeof t.length!==x))throw new Error("JSON.stringify");return ne("",{"":e})};var re=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|"[^"]*"|'[^']*'/g,ae=/^(n|c|p|e)(\d*)$/i,oe=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g,se=/\,/g,le="",ue=".",ce=",",he="#",fe="0",de="??",pe="en-US",ve={}.toString;function ge(e){if(e){if(e.numberFormat)return e;if(typeof e===_){var t=z.cultures;return t[e]||t[e.split("-")[0]]||null}return null}return null}function me(e){if(e)e=ge(e);return e||z.cultures.current}function _e(r,e,t){t=me(t);var a=t.calendars.standard,o=a.days,s=a.months;e=a.patterns[e]||e;return e.replace(re,function(e){var t;var i;var n;if(e==="d")i=r.getDate();else if(e==="dd")i=l(r.getDate());else if(e==="ddd")i=o.namesAbbr[r.getDay()];else if(e==="dddd")i=o.names[r.getDay()];else if(e==="M")i=r.getMonth()+1;else if(e==="MM")i=l(r.getMonth()+1);else if(e==="MMM")i=s.namesAbbr[r.getMonth()];else if(e==="MMMM")i=s.names[r.getMonth()];else if(e==="yy")i=l(r.getFullYear()%100);else if(e==="yyyy")i=l(r.getFullYear(),4);else if(e==="h")i=r.getHours()%12||12;else if(e==="hh")i=l(r.getHours()%12||12);else if(e==="H")i=r.getHours();else if(e==="HH")i=l(r.getHours());else if(e==="m")i=r.getMinutes();else if(e==="mm")i=l(r.getMinutes());else if(e==="s")i=r.getSeconds();else if(e==="ss")i=l(r.getSeconds());else if(e==="f")i=p.floor(r.getMilliseconds()/100);else if(e==="ff"){i=r.getMilliseconds();if(i>99)i=p.floor(i/10);i=l(i)}else if(e==="fff")i=l(r.getMilliseconds(),3);else if(e==="tt")i=r.getHours()<12?a.AM[0]:a.PM[0];else if(e==="zzz"){t=r.getTimezoneOffset();n=t<0;i=p.abs(t/60).toString().split(".")[0];t=p.abs(t)-i*60;i=(n?"+":"-")+l(i);i+=":"+l(t)}else if(e==="zz"||e==="z"){i=r.getTimezoneOffset()/60;n=i<0;i=p.abs(i).toString().split(".")[0];i=(n?"+":"-")+(e==="zz"?l(i):i)}return i!==R?i:e.slice(1,e.length-1)})}function ye(e,t,c){c=me(c);var i=c.numberFormat,h=i[ue],f=i.decimals,d=i.pattern[0],p=[],v,g,m,_,y,n=e<0,b,r,w,x,k=le,C=le,a,S,o,T,A,s,l,u,M,D,E,I,P,B=-1,O;if(e===R)return le;if(!isFinite(e))return e;if(!t)return c.name.length?e.toLocaleString():e.toString();y=ae.exec(t);if(y){t=y[1].toLowerCase();g=t==="c";m=t==="p";if(g||m){i=g?i.currency:i.percent;h=i[ue];f=i.decimals;v=i.symbol;d=i.pattern[n?0:1]}_=y[2];if(_)f=+_;if(t==="e"){var z=_?e.toExponential(f):e.toExponential();return z.replace(ue,i[ue])}if(m)e*=100;e=we(e,f);n=e<0;e=e.split(ue);b=e[0];r=e[1];if(n)b=b.substring(1);C=be(b,0,b.length,i);if(r)C+=h+r;if(t==="n"&&!n)return C;e=le;for(a=0,S=d.length;a<S;a++){o=d.charAt(a);if(o==="n")e+=C;else if(o==="$"||o==="%")e+=v;else e+=o}return e}if(t.indexOf("'")>-1||t.indexOf('"')>-1||t.indexOf("\\")>-1)t=t.replace(oe,function(e){var t=e.charAt(0).replace("\\",""),i=e.slice(1).replace(t,"");p.push(i);return de});t=t.split(";");if(n&&t[1]){t=t[1];A=true}else if(e===0&&t[2]){t=t[2];if(t.indexOf(he)==-1&&t.indexOf(fe)==-1)return t}else t=t[0];E=t.indexOf("%");I=t.indexOf("$");m=E!=-1;g=I!=-1;if(m)e*=100;if(g&&t[I-1]==="\\"){t=t.split("\\").join("");g=false}if(g||m){i=g?i.currency:i.percent;h=i[ue];f=i.decimals;v=i.symbol}T=t.indexOf(ce)>-1;if(T)t=t.replace(se,le);s=t.indexOf(ue);S=t.length;if(s!=-1){r=e.toString().split("e");if(r[1])r=we(e,Math.abs(r[1]));else r=r[0];r=r.split(ue)[1]||le;u=t.lastIndexOf(fe)-s;l=t.lastIndexOf(he)-s;M=u>-1;D=l>-1;a=r.length;if(!M&&!D){t=t.substring(0,s)+t.substring(s+1);S=t.length;s=-1;a=0}if(M&&u>l)a=u;else if(l>u)if(D&&a>l){var L=we(e,l,n);while(L.charAt(L.length-1)===fe&&l>0&&l>u){l--;L=we(e,l,n)}a=l}else if(M&&a<u)a=u}e=we(e,a,n);l=t.indexOf(he);P=u=t.indexOf(fe);if(l==-1&&u!=-1)B=u;else if(l!=-1&&u==-1)B=l;else B=l>u?u:l;l=t.lastIndexOf(he);u=t.lastIndexOf(fe);if(l==-1&&u!=-1)O=u;else if(l!=-1&&u==-1)O=l;else O=l>u?l:u;if(B==S)O=B;if(B!=-1){C=e.toString().split(ue);b=C[0];r=C[1]||le;w=b.length;x=r.length;if(n&&e*-1>=0)n=false;e=t.substring(0,B);if(n&&!A)e+="-";for(a=B;a<S;a++){o=t.charAt(a);if(s==-1){if(O-a<w){e+=b;break}}else{if(u!=-1&&u<a)k=le;if(s-a<=w&&s-a>-1){e+=b;a=s}if(s===a){e+=(r?h:le)+r;a+=O-s+1;continue}}if(o===fe){e+=o;k=o}else if(o===he)e+=k}if(T)e=be(e,B+(n&&!A?1:0),Math.max(O,w+B),i);if(O>=B)e+=t.substring(O+1);if(g||m){C=le;for(a=0,S=e.length;a<S;a++){o=e.charAt(a);C+=o==="$"||o==="%"?v:o}e=C}S=p.length;if(S)for(a=0;a<S;a++)e=e.replace(de,p[a])}return e}z.cultures["en-US"]={name:pe,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSize:[3],percent:{pattern:["-n %","n %"],decimals:2,",":",",".":".",groupSize:[3],symbol:"%"},currency:{name:"US Dollar",abbr:"USD",pattern:["($n)","$n"],decimals:2,",":",",".":".",groupSize:[3],symbol:"$"}},calendars:{standard:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December"],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},AM:["AM","am","AM"],PM:["PM","pm","PM"],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",m:"MMMM dd",M:"MMMM dd",s:"yyyy'-'MM'-'ddTHH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"},"/":"/",":":":",firstDay:0,twoDigitYearMax:2029}}},z.culture=function(e){var t=z.cultures,i;if(e!==R){i=ge(e)||t[pe];i.calendar=i.calendars.standard;t.current=i}else return t.current},z.findCulture=ge,z.getCulture=me,z.culture(pe);var be=function(e,c,t,i){var h=e.indexOf(i[ue]);var f=i.groupSize.slice();var n=f.shift();var r,a;var o,s,l;var u;t=h!==-1?h:t+1;r=e.substring(c,t);a=r.length;if(a>=n){o=a;s=[];while(o>-1){l=r.substring(o-n,o);if(l)s.push(l);o-=n;u=f.shift();n=u!==R?u:n;if(n===0){if(o>0)s.push(r.substring(0,o));break}}r=s.reverse().join(i[ce]);e=e.substring(0,c)+r+e.substring(t)}return e},we=function(e,t,i){t=t||0;e=e.toString().split("e");e=Math.round(+(e[0]+"e"+(e[1]?+e[1]+t:t)));if(i)e=-e;e=e.toString().split("e");e=+(e[0]+"e"+(e[1]?+e[1]-t:-t));return e.toFixed(Math.min(t,20))},xe=function(e,t,i){if(t)if(ve.call(e)==="[object Date]")return _e(e,t,i);else if(typeof e===x)return ye(e,t,i);return e!==R?e:""},ke=(z.format=function(e){var r=arguments;return e.replace(s,function(e,t,i){var n=r[parseInt(t,10)+1];return xe(n,i?i.substring(1):"")})},z._extractFormat=function(e){if(e.slice(0,3)==="{0:")e=e.slice(3,e.length-1);return e},z._activeElement=function(){try{return document.activeElement}catch(e){return document.documentElement.activeElement}},z._round=we,z._outerWidth=function(e,t){return g(e).outerWidth(t||false)||0},z._outerHeight=function(e,t){return g(e).outerHeight(t||false)||0},z.toString=xe,/\u00A0/g),Ce=/\s/g,Se=/[eE][\-+]?[0-9]+/,Te=/[+|\-]\d{1,2}/,Ae=/[+|\-]\d{1,2}:?\d{2}/,Me=/^\/Date\((.*?)\)\/$/,De=/[+-]\d*/,Ee=[[],["G","g","F"],["D","d","y","m","T","t"]],Ie=[["yyyy-MM-ddTHH:mm:ss.fffffffzzz","yyyy-MM-ddTHH:mm:ss.fffffff","yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:ss.fff","ddd MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mmzzz","yyyy-MM-ddTHH:mmzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-dd HH:mm:ss","yyyy/MM/dd HH:mm:ss"],["yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm","yyyy/MM/dd HH:mm"],["yyyy/MM/dd","yyyy-MM-dd","HH:mm:ss","HH:mm"]],Pe={2:/^\d{1,2}/,3:/^\d{1,3}/,4:/^\d{4}/},Be={}.toString;function Oe(e,t,i){return!(e>=t&&e<=i)}function ze(e){return e.charAt(0)}function Le(e){return g.map(e,ze)}function Re(e,t){if(!t&&e.getHours()===23)e.setHours(e.getHours()+2)}function Fe(e){var t=0,i=e.length,n=[];for(;t<i;t++)n[t]=(e[t]+"").toLowerCase();return n}function Ve(e){var t={},i;for(i in e)t[i]=Fe(e[i]);return t}function Ne(u,l,h,f){if(!u)return null;var d=function(e){var t=0;while(l[w]===e){t++;w++}if(t>0)w-=1;return t},p=function(e){var t=Pe[e]||new RegExp("^\\d{1,"+e+"}"),i=u.substr(c,e).match(t);if(i){i=i[0];c+=i.length;return parseInt(i,10)}return null},v=function(e,t){var i=0,n=e.length,r,a,o=0,s=0,l;for(;i<n;i++){r=e[i];a=r.length;l=u.substr(c,a);if(t)l=l.toLowerCase();if(l==r&&a>o){o=a;s=i}}if(o){c+=o;return s+1}return null},g=function(){var e=false;if(u.charAt(c)===l[w]){c++;e=true}return e},e=h.calendars.standard,t=null,m=null,i=null,n=null,_=null,y=null,b=null,w=0,c=0,x=false,k=new Date,C=e.twoDigitYearMax||2029,S=k.getFullYear(),r,a,T,A,M,D,E,I,P,o,s,B,O;if(!l)l="d";A=e.patterns[l];if(A)l=A;l=l.split("");T=l.length;for(;w<T;w++){r=l[w];if(x)if(r==="'")x=false;else g();else if(r==="d"){a=d("d");if(!e._lowerDays)e._lowerDays=Ve(e.days);if(i!==null&&a>2)continue;i=a<3?p(2):v(e._lowerDays[a==3?"namesAbbr":"names"],true);if(i===null||Oe(i,1,31))return null}else if(r==="M"){a=d("M");if(!e._lowerMonths)e._lowerMonths=Ve(e.months);m=a<3?p(2):v(e._lowerMonths[a==3?"namesAbbr":"names"],true);if(m===null||Oe(m,1,12))return null;m-=1}else if(r==="y"){a=d("y");t=p(a);if(t===null)return null;if(a==2){if(typeof C==="string")C=S+parseInt(C,10);t=S-S%100+t;if(t>C)t-=100}}else if(r==="h"){d("h");n=p(2);if(n==12)n=0;if(n===null||Oe(n,0,11))return null}else if(r==="H"){d("H");n=p(2);if(n===null||Oe(n,0,23))return null}else if(r==="m"){d("m");_=p(2);if(_===null||Oe(_,0,59))return null}else if(r==="s"){d("s");y=p(2);if(y===null||Oe(y,0,59))return null}else if(r==="f"){a=d("f");O=u.substr(c,a).match(Pe[3]);b=p(a);if(b!==null){b=parseFloat("0."+O[0],10);b=z._round(b,3);b*=1e3}if(b===null||Oe(b,0,999))return null}else if(r==="t"){a=d("t");I=e.AM;P=e.PM;if(a===1){I=Le(I);P=Le(P)}M=v(P);if(!M&&!v(I))return null}else if(r==="z"){D=true;a=d("z");if(u.substr(c,1)==="Z"){g();continue}E=u.substr(c,6).match(a>2?Ae:Te);if(!E)return null;E=E[0].split(":");o=E[0];s=E[1];if(!s&&o.length>3){c=o.length-2;s=o.substring(c);o=o.substring(0,c)}o=parseInt(o,10);if(Oe(o,-12,13))return null;if(a>2){s=E[0][0]+s;s=parseInt(s,10);if(isNaN(s)||Oe(s,-59,59))return null}}else if(r==="'"){x=true;g()}else if(!g())return null}if(f&&!/^\s*$/.test(u.substr(c)))return null;B=n!==null||_!==null||y||null;if(t===null&&m===null&&i===null&&B){t=S;m=k.getMonth();i=k.getDate()}else{if(t===null)t=S;if(i===null)i=1}if(M&&n<12)n+=12;if(D){if(o)n+=-o;if(s)_+=-s;u=new Date(Date.UTC(t,m,i,n,_,y,b))}else{u=new Date(t,m,i,n,_,y,b);Re(u,n)}if(t<100)u.setFullYear(t);if(u.getDate()!==i&&D===R)return null;return u}function He(e){var t=e.substr(0,1)==="-"?-1:1;e=e.substring(1);e=parseInt(e.substr(0,2),10)*60+parseInt(e.substring(2),10);return t*e}function Ue(e){var t=p.max(Ee.length,Ie.length);var i=e.calendar||e.calendars.standard;var n=i.patterns;var r,a,o;var s=[];for(o=0;o<t;o++){r=Ee[o];for(a=0;a<r.length;a++)s.push(n[r[a]]);s=s.concat(Ie[o])}return s}function je(e,t,i,n){if(Be.call(e)==="[object Date]")return e;var r=0;var a=null;var o;var s;if(e&&e.indexOf("/D")===0){a=Me.exec(e);if(a){a=a[1];s=De.exec(a.substring(1));a=new Date(parseInt(a,10));if(s){s=He(s[0]);a=z.timezone.apply(a,0);a=z.timezone.convert(a,0,-1*s)}return a}}i=z.getCulture(i);if(!t)t=Ue(i);t=u(t)?t:[t];o=t.length;for(;r<o;r++){a=Ne(e,t[r],i,n);if(a)return a}return a}function Ge(e){var t=e.css(z.support.transitions.css+"box-shadow")||e.css("box-shadow"),i=t?t.match(y)||[0,0,0,0,0]:[0,0,0,0,0],n=p.max(+i[3],+(i[4]||0));return{left:-i[1]+n,right:+i[1]+n,bottom:+i[2]+n}}function We(e,t){var i,n=z._outerWidth,r=z._outerHeight,a=e.parent(),c=n(m);a.removeClass("k-animation-container-sm");if(!a.hasClass("k-animation-container")){var o=e[0].style.width,s=e[0].style.height,l=v.test(o),u=v.test(s),h=e.hasClass("k-tooltip")||e.is(".k-menu-horizontal.k-context-menu");i=l||u;if(!l&&(!t||t&&o||h))o=t?n(e)+1:n(e);if(!u&&(!t||t&&s)||e.is(".k-menu-horizontal.k-context-menu"))s=r(e);e.wrap(g("<div/>").addClass("k-animation-container").attr("role","region").css({width:o,height:s}));a=e.parent();if(i)e.css({width:"100%",height:"100%",boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"})}else qe(e,t);if(c<n(a)){a.addClass("k-animation-container-sm");qe(e,t)}return a}function qe(e,t){var i,n=z._outerWidth,r=z._outerHeight,a=e.parent(".k-animation-container"),o=a[0].style;if(a.is(":hidden"))a.css({display:"",position:""});i=v.test(o.width)||v.test(o.height);if(!i)a.css({width:t?n(e)+1:n(e),height:r(e),boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"})}function Ye(e){var t=1,i=arguments.length;for(t=1;t<i;t++)$e(e,arguments[t]);return e}function $e(e,t){var i=z.data.ObservableArray,n=z.data.LazyObservableArray,r=z.data.DataSource,c=z.data.HierarchicalDataSource,a,o,s,l,u;for(a in t){o=t[a];s=typeof o;if(s===k&&o!==null)l=o.constructor;else l=null;if(l&&l!==Array&&l!==i&&l!==n&&l!==r&&l!==c&&l!==RegExp&&(!z.isFunction(m.ArrayBuffer)||l!==ArrayBuffer)&&!(o instanceof HTMLElement))if(o instanceof Date)e[a]=new Date(o.getTime());else if(V(o.clone))e[a]=o.clone();else{u=e[a];if(typeof u===k)e[a]=u||{};else e[a]={};$e(e[a],o)}else if(s!==T)e[a]=o}return e}function Xe(e,t,i){for(var n in t)if(t.hasOwnProperty(n)&&t[n].test(e))return n;return i!==R?i:e}function Ke(e){return e.replace(/([a-z][A-Z])/g,function(e){return e.charAt(0)+"-"+e.charAt(1).toLowerCase()})}function Qe(e){return e.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()})}function Ze(e,t){var i={},n;if(document.defaultView&&document.defaultView.getComputedStyle){n=document.defaultView.getComputedStyle(e,"");if(t)g.each(t,function(e,t){i[t]=n.getPropertyValue(t)})}else{n=e.currentStyle;if(t)g.each(t,function(e,t){i[t]=n[Qe(t)]})}if(!z.size(i))i=n;return i}function Je(e){if(e&&e.className&&typeof e.className==="string"&&e.className.indexOf("k-auto-scrollable")>-1)return true;var t=Ze(e,["overflow"]).overflow;return t.indexOf("auto")>-1||t.indexOf("scroll")>-1}function et(e,i){var t=c.browser.webkit;var n=c.browser.mozilla;var r=c.browser.version;var a,o;if(e instanceof g&&i!==R){e.each(function(e,t){et(t,i)});return}else a=e instanceof g?e[0]:e;if(!a)return;o=c.isRtl(e);if(i!==R)if(o&&t&&(r<85||c.browser.safari))a.scrollLeft=a.scrollWidth-a.clientWidth-i;else if(o&&(n||t)&&i>0)a.scrollLeft=-i;else a.scrollLeft=i;else if(o&&t&&(r<85||c.browser.safari))return a.scrollWidth-a.clientWidth-a.scrollLeft;else return Math.abs(a.scrollLeft)}z.parseDate=function(e,t,i){return je(e,t,i,false)},z.parseExactDate=function(e,t,i){return je(e,t,i,true)},z.parseInt=function(e,t){var i=z.parseFloat(e,t);if(i)i=i|0;return i},z.parseFloat=function(e,t,i){if(!e&&e!==0)return null;if(typeof e===x)return e;e=e.toString();t=z.getCulture(t);var n=t.numberFormat,r=n.percent,a=n.currency,o=a.symbol,s=r.symbol,l=e.indexOf("-"),u,c;if(Se.test(e)){e=parseFloat(e.replace(n["."],"."));if(isNaN(e))e=null;return e}if(l>0)return null;else l=l>-1;if(e.indexOf(o)>-1||i&&i.toLowerCase().indexOf("c")>-1){n=a;u=n.pattern[0].replace("$",o).split("n");if(e.indexOf(u[0])>-1&&e.indexOf(u[1])>-1){e=e.replace(u[0],"").replace(u[1],"");l=true}}else if(e.indexOf(s)>-1){c=true;n=r;o=s}e=e.replace("-","").replace(o,"").replace(ke," ").split(n[","].replace(ke," ")).join("").replace(Ce,"").replace(n["."],".");e=parseFloat(e);if(isNaN(e))e=null;else if(l)e*=-1;if(e&&c)e/=100;return e},c._scrollbar=R,c.scrollbar=function(e){if(!isNaN(c._scrollbar)&&!e)return c._scrollbar;else{var t=document.createElement("div"),i;t.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block";t.innerHTML="&nbsp;";document.body.appendChild(t);c._scrollbar=i=t.offsetWidth-t.scrollWidth;document.body.removeChild(t);return i}},c.isRtl=function(e){return g(e).closest(".k-rtl").length>0};var tt=document.createElement("table");try{tt.innerHTML="<tr><td></td></tr>";c.tbodyInnerHtml=true}catch(e){c.tbodyInnerHtml=false}c.touch="ontouchstart"in m;var it=document.documentElement.style,nt=c.transitions=false,rt=c.transforms=false,at="HTMLElement"in m?HTMLElement.prototype:[];c.hasHW3D="WebKitCSSMatrix"in m&&"m11"in new m.WebKitCSSMatrix||"MozPerspective"in it||"msPerspective"in it,c.cssFlexbox="flexWrap"in it||"WebkitFlexWrap"in it||"msFlexWrap"in it,r(["Moz","webkit","O","ms"],function(){var e=this.toString(),t=typeof tt.style[e+"Transition"]===_;if(t||typeof tt.style[e+"Transform"]===_){var i=e.toLowerCase();rt={css:i!="ms"?"-"+i+"-":"",prefix:e,event:i==="o"||i==="webkit"?i:""};if(t){nt=rt;nt.event=nt.event?nt.event+"TransitionEnd":"transitionend"}return false}}),tt=null,c.transforms=rt,c.transitions=nt,c.devicePixelRatio=m.devicePixelRatio===R?1:m.devicePixelRatio;try{c.screenWidth=m.outerWidth||m.screen?m.screen.availWidth:m.innerWidth;c.screenHeight=m.outerHeight||m.screen?m.screen.availHeight:m.innerHeight}catch(e){c.screenWidth=m.screen.availWidth;c.screenHeight=m.screen.availHeight}c.detectOS=function(e){var t=false,i,n=[],r=!/mobile safari/i.test(e),a={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.?(\d+(\.\d+)?)?/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},o={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},s={tablet:/playbook|ipad|fire/i},l={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i};for(var u in a)if(a.hasOwnProperty(u)){n=e.match(a[u]);if(n){if(u=="windows"&&"plugins"in navigator)return false;t={};t.device=u;t.tablet=Xe(u,s,false);t.browser=Xe(e,l,"default");t.name=Xe(u,o);t[t.name]=true;t.majorVersion=n[2];t.minorVersion=(n[3]||"0").replace("_",".");i=t.minorVersion.replace(".","").substr(0,2);t.flatVersion=t.majorVersion+i+new Array(3-(i.length<3?i.length:2)).join("0");t.cordova=typeof m.PhoneGap!==T||typeof m.cordova!==T;t.appMode=m.navigator.standalone||/file|local|wmapp/.test(m.location.protocol)||t.cordova;if(t.android&&(c.devicePixelRatio<1.5&&t.flatVersion<400||r)&&(c.screenWidth>800||c.screenHeight>800))t.tablet=u;break}}return t};var ot=c.mobileOS=c.detectOS(navigator.userAgent);if(c.wpDevicePixelRatio=ot.wp?screen.width/320:0,c.hasNativeScrolling=false,ot.ios||ot.android&&ot.majorVersion>2||ot.wp)c.hasNativeScrolling=ot;if(c.delayedClick=function(){if(c.touch){if(ot.ios)return true;if(ot.android){if(!c.browser.chrome)return true;if(c.browser.version<32)return false;return!(g("meta[name=viewport]").attr("content")||"").match(/user-scalable=no/i)}}return false},c.mouseAndTouchPresent=c.touch&&!(c.mobileOS.ios||c.mobileOS.android),c.detectBrowser=function(e){var t=false,i=[],n=[],r={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome|crios)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(var a in r)if(r.hasOwnProperty(a)){i=e.match(r[a]);if(i){t={};t[a]=true;t[i[1].toLowerCase().split(" ")[0].split("/")[0]]=true;t.version=parseInt(document.documentMode||i[2],10);if(t.chrome){n=e.match(/(edg)[ \/]([\w.]+)/i);if(n)t.chromiumEdge=true}break}}return t},c.browser=c.detectBrowser(navigator.userAgent),!ot&&c.touch&&c.browser.safari)ot=c.mobileOS={ios:true,tablet:"tablet",device:"ipad"};c.detectClipboardAccess=function(){var e={copy:document.queryCommandSupported?document.queryCommandSupported("copy"):false,cut:document.queryCommandSupported?document.queryCommandSupported("cut"):false,paste:document.queryCommandSupported?document.queryCommandSupported("paste"):false};if(c.browser.chrome){e.paste=false;if(c.browser.version>=43){e.copy=true;e.cut=true}}return e},c.clipboard=c.detectClipboardAccess(),c.zoomLevel=function(){try{var e=c.browser;var t=0;var i=document.documentElement;if(e.msie&&e.version==11&&i.scrollHeight>i.clientHeight&&!c.touch)t=c.scrollbar();return c.touch?i.clientWidth/m.innerWidth:e.msie&&e.version>=10?((top||m).document.documentElement.offsetWidth+t)/(top||m).innerWidth:1}catch(e){return 1}};var st=c.browser,e="",lt=g(document.documentElement),ut=parseInt(st.version,10);if(st.msie)e="ie";else if(st.mozilla)e="ff";else if(st.safari)e="safari";else if(st.webkit)e="webkit";else if(st.opera)e="opera";else if(st.edge)e="edge";if(e)e="k-"+e+" k-"+e+ut;if(c.mobileOS)e+=" k-mobile";if(!c.cssFlexbox)e+=" k-no-flexbox";lt.addClass(e),c.eventCapture=document.documentElement.addEventListener;var ct=document.createElement("input"),ht=(c.placeholder="placeholder"in ct,c.propertyChangeEvent="onpropertychange"in ct,c.input=function(){var e=["number","date","time","month","week","datetime","datetime-local"];var t=e.length;var i="test";var n={};var r=0;var a;for(;r<t;r++){a=e[r];ct.setAttribute("type",a);ct.value=i;n[a.replace("-","")]=ct.type!=="text"&&ct.value!==i}return n}(),ct.style.cssText="float:left;",c.cssFloat=!!ct.style.cssFloat,ct=null,c.stableSort=function(){var e=513;var t=[{index:0,field:"b"}];for(var i=1;i<e;i++)t.push({index:i,field:"a"});t.sort(function(e,t){return e.field>t.field?1:e.field<t.field?-1:0});return t[0].index===1}(),c.matchesSelector=at.webkitMatchesSelector||at.mozMatchesSelector||at.msMatchesSelector||at.oMatchesSelector||at.matchesSelector||at.matches||function(e){var t=document.querySelectorAll?(this.parentNode||document).querySelectorAll(e)||[]:g(e),i=t.length;while(i--)if(t[i]==this)return true;return false},c.matchMedia="matchMedia"in m,c.pushState=m.history&&m.history.pushState,c.hashChange="onhashchange"in m,c.customElements="registerElement"in m.document,c.browser.chrome),ft=c.browser.crios,dt=c.browser.mozilla,pt=c.browser.safari;function vt(e){var t=0,i;for(i in e)if(e.hasOwnProperty(i)&&i!="toJSON")t++;return t}function gt(e,t,i){if(!t)t="offset";var n=e[t]();var r={top:n.top,right:n.right,bottom:n.bottom,left:n.left};if(c.browser.msie&&(c.pointers||c.msPointers)&&!i){var a=c.isRtl(e)?1:-1;r.top-=m.pageYOffset-document.documentElement.scrollTop;r.left-=m.pageXOffset+a*document.documentElement.scrollLeft}return r}c.msPointers=!ht&&m.MSPointerEvent,c.pointers=!ht&&!ft&&!dt&&!pt&&m.PointerEvent,c.kineticScrollNeeded=ot&&(c.touch||c.msPointers||c.pointers);var mt={left:{reverse:"right"},right:{reverse:"left"},down:{reverse:"up"},up:{reverse:"down"},top:{reverse:"bottom"},bottom:{reverse:"top"},in:{reverse:"out"},out:{reverse:"in"}};function _t(e){var t={};r(typeof e==="string"?e.split(" "):e,function(e){t[e]=this});return t}function yt(e){return new z.effects.Element(e)}var bt={};function wt(e,t,i,n){if(typeof e===_){if(V(t)){n=t;t=400;i=false}if(V(i)){n=i;i=false}if(typeof t===S){i=t;t=400}e={effects:e,duration:t,reverse:i,complete:n}}return d({effects:{},duration:400,reverse:false,init:a,teardown:a,hide:false},e,{completeCallback:e.complete,complete:a})}function xt(e,t,i,n,r){var a=0,o=e.length,s;for(;a<o;a++){s=g(e[a]);s.queue(function(){bt.promise(s,wt(t,i,n,r))})}return e}function kt(i,e,t,n){if(e){e=e.split(" ");r(e,function(e,t){i.toggleClass(t,n)})}return i}if(g.extend(bt,{enabled:true,Element:function(e){this.element=g(e)},promise:function(e,t){if(!e.is(":visible"))e.css({display:e.data("olddisplay")||"block"}).css("display");if(t.hide)e.data("olddisplay",e.css("display")).hide();if(t.init)t.init();if(t.completeCallback)t.completeCallback(e);e.dequeue()},disable:function(){this.enabled=false;this.promise=this.promiseShim},enable:function(){this.enabled=true;this.promise=this.animatedPromise}}),bt.promiseShim=bt.promise,!("kendoAnimate"in g.fn))d(g.fn,{kendoStop:function(e,t){return this.stop(e,t)},kendoAnimate:function(e,t,i,n){return xt(this,e,t,i,n)},kendoAddClass:function(e,t){return z.toggleClass(this,e,t,true)},kendoRemoveClass:function(e,t){return z.toggleClass(this,e,t,false)},kendoToggleClass:function(e,t,i){return z.toggleClass(this,e,t,i)}});var Ct=/&/g,St=/</g,Tt=/"/g,At=/'/g,Mt=/>/g;function Dt(e){return(""+e).replace(Ct,"&amp;").replace(St,"&lt;").replace(Mt,"&gt;").replace(Tt,"&quot;").replace(At,"&#39;")}function Et(t){var i;try{i=m.decodeURIComponent(t)}catch(e){i=t.replace(/%u([\dA-F]{4})|%([\dA-F]{2})/gi,function(e,t,i){return String.fromCharCode(parseInt("0x"+(t||i),16))})}return i}var It=function(e){return e.target};if(c.touch){It=function(e){var t="originalEvent"in e?e.originalEvent.changedTouches:"changedTouches"in e?e.changedTouches:null;return t?document.elementFromPoint(t[0].clientX,t[0].clientY):e.target};r(["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap"],function(e,t){g.fn[t]=function(e){return this.on(t,e)}})}if(c.touch)if(!c.mobileOS){c.mousedown="mousedown touchstart";c.mouseup="mouseup touchend";c.mousemove="mousemove touchmove";c.mousecancel="mouseleave touchcancel";c.click="click";c.resize="resize"}else{c.mousedown="touchstart";c.mouseup="touchend";c.mousemove="touchmove";c.mousecancel="touchcancel";c.click="touchend";c.resize="orientationchange"}else if(c.pointers){c.mousemove="pointermove";c.mousedown="pointerdown";c.mouseup="pointerup";c.mousecancel="pointercancel";c.click="pointerup";c.resize="orientationchange resize"}else if(c.msPointers){c.mousemove="MSPointerMove";c.mousedown="MSPointerDown";c.mouseup="MSPointerUp";c.mousecancel="MSPointerCancel";c.click="MSPointerUp";c.resize="orientationchange resize"}else{c.mousemove="mousemove";c.mousedown="mousedown";c.mouseup="mouseup";c.mousecancel="mouseleave";c.click="click";c.resize="resize"}var Pt=function(e,t){var i=t||"d",n,r,a,o,s=1;for(r=0,a=e.length;r<a;r++){o=e[r];if(o!==""){n=o.indexOf("[");if(n!==0)if(n==-1)o="."+o;else{s++;o="."+o.substring(0,n)+" || {})"+o.substring(n)}s++;i+=o+(r<a-1?" || {})":")")}}return new Array(s).join("(")+i},Bt=/^([a-z]+:)?\/\//i,Ot=(d(z,{widgets:[],_widgetRegisteredCallbacks:[],ui:z.ui||{},fx:z.fx||yt,effects:z.effects||bt,mobile:z.mobile||{},data:z.data||{},dataviz:z.dataviz||{},drawing:z.drawing||{},spreadsheet:{messages:{}},keys:{INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110},support:z.support||c,animate:z.animate||xt,ns:"",attr:function(e){return"data-"+z.ns+e},getShadows:Ge,wrap:We,deepExtend:Ye,getComputedStyles:Ze,isScrollable:Je,scrollLeft:et,size:vt,toCamelCase:Qe,toHyphens:Ke,getOffset:z.getOffset||gt,parseEffects:z.parseEffects||_t,toggleClass:z.toggleClass||kt,directions:z.directions||mt,Observable:U,Class:F,Template:n,template:n.compile.bind(n),render:n.render.bind(n),stringify:o.stringify.bind(o),eventTarget:It,htmlEncode:Dt,unescape:Et,isLocalUrl:function(e){return e&&!Bt.test(e)},expr:function(e,t,i){e=e||"";if(typeof t==_){i=t;t=false}i=i||"d";if(e&&e.charAt(0)!=="[")e="."+e;if(t){e=e.replace(/"([^.]*)\.([^"]*)"/g,'"$1_$DOT$_$2"');e=e.replace(/'([^.]*)\.([^']*)'/g,"'$1_$DOT$_$2'");e=Pt(e.split("."),i);e=e.replace(/_\$DOT\$_/g,".")}else e=i+e;return e},getter:function(e,t){var i=e+t;return I[i]=I[i]||new Function("d","return "+z.expr(e,t))},setter:function(e){return P[e]=P[e]||new Function("d,value",z.expr(e)+"=value")},accessor:function(e){return{get:z.getter(e),set:z.setter(e)}},guid:function(){var e="",t,i,n="abcdef";e+=n[Math.floor(Math.random()*Math.floor(n.length))];for(t=1;t<32;t++){i=p.random()*16|0;if(t==8||t==12||t==16||t==20)e+="-";e+=(t==12?4:t==16?i&3|8:i).toString(16)}return e},roleSelector:function(e){return e.replace(/(\S+)/g,"["+z.attr("role")+"=$1],").slice(0,-1)},directiveSelector:function(e){var t=e.split(" ");if(t)for(var i=0;i<t.length;i++)if(t[i]!="view")t[i]=t[i].replace(/(\w*)(view|bar|strip|over)$/,"$1-$2");return t.join(" ").replace(/(\S+)/g,"kendo-mobile-$1,").slice(0,-1)},triggeredByInput:function(e){return/^(label|input|textarea|select)$/i.test(e.target.tagName)},onWidgetRegistered:function(e){for(var t=0,i=z.widgets.length;t<i;t++)e(z.widgets[t]);z._widgetRegisteredCallbacks.push(e)},logToConsole:function(e,t){var i=m.console;if(!z.suppressLog&&typeof i!="undefined"&&i.log)i[t||"log"](e)}}),U.extend({init:function(e,t){var i=this;mi();i.element=z.jQuery(e).handler(i);i.angular("init",t);U.fn.init.call(i);var n=t?t.dataSource:null;var r;if(t)r=(i.componentTypes||{})[(t||{}).componentType];if(n)t=d({},t,{dataSource:{}});t=i.options=d(true,{},i.options,i.defaults,r||{},t);if(n)t.dataSource=n;if(!i.element.attr(z.attr("role")))i.element.attr(z.attr("role"),(t.name||"").toLowerCase());i.element.data("kendo"+t.prefix+t.name,i);i.bind(i.events,t)},events:[],options:{prefix:""},_hasBindingTarget:function(){return!!this.element[0].kendoBindingTarget},_tabindex:function(e){e=e||this.wrapper;var t=this.element,i="tabindex",n=e.attr(i)||t.attr(i);t.removeAttr(i);e.attr(i,!isNaN(n)?n:0)},setOptions:function(e){this._clearCssClasses(e);this._setEvents(e);g.extend(this.options,e);this._applyCssClasses()},_setEvents:function(e){var t=this,i=0,n=t.events.length,r;for(;i<n;i++){r=t.events[i];if(t.options[r]&&e[r]){t.unbind(r,t.options[r]);if(t._events&&t._events[r])delete t._events[r]}}t.bind(t.events,e)},resize:function(e){var t=this.getSize(),i=this._size;if(e||(t.width>0||t.height>0)&&(!i||t.width!==i.width||t.height!==i.height)){this._size=t;this._resize(t,e);this.trigger("resize",t)}},getSize:function(){return z.dimensions(this.element)},size:function(e){if(!e)return this.getSize();else this.setSize(e)},setSize:g.noop,_resize:g.noop,destroy:function(){var e=this;e.element.removeData("kendo"+e.options.prefix+e.options.name);e.element.removeData("handler");e.unbind()},_destroy:function(){this.destroy()},angular:function(){},_muteAngularRebind:function(e){this._muteRebind=true;e.call(this);this._muteRebind=false},_applyCssClasses:function(e){var t=this.__proto__.options,i=this.options,n=e||this.wrapper||this.element,r=[],a,o,s,l;if(!z.cssProperties.propertyDictionary[t.name])return;for(a=0;a<O.length;a++){o=O[a];l=this.options._altname||t.name;if(t.hasOwnProperty(o))if(o==="themeColor"){s=z.cssProperties.getValidClass({widget:l,propName:"fillMode",value:i.fillMode});if(s&&s.length)r.push(z.cssProperties.getValidClass({widget:l,propName:o,value:i[o],fill:i.fillMode}))}else r.push(z.cssProperties.getValidClass({widget:l,propName:o,value:i[o]}))}n.addClass(r.join(" "))},_ariaLabel:function(e){var t=this,i=t.element,n=i.attr("id"),r=g('label[for="'+n+'"]'),a=i.attr(D),o=i.attr(M),s;if(e[0]===i[0])return;if(a)e.attr(D,a);else if(o)e.attr(M,o);else if(r.length){s=r.attr("id")||t._generateLabelId(r,n||z.guid());e.attr(M,s)}},_clearCssClasses:function(e,t){var i=this.__proto__.options,n=this.options,r=t||this.wrapper||this.element,a,o,s;if(!z.cssProperties.propertyDictionary[i.name])return;for(a=0;a<O.length;a++){o=O[a];s=this.options._altname||i.name;if(i.hasOwnProperty(o)&&e.hasOwnProperty(o))if(o==="themeColor")r.removeClass(z.cssProperties.getValidClass({widget:s,propName:o,value:n[o],fill:n.fillMode}));else{if(o==="fillMode")r.removeClass(z.cssProperties.getValidClass({widget:s,propName:"themeColor",value:n.themeColor,fill:n.fillMode}));r.removeClass(z.cssProperties.getValidClass({widget:s,propName:o,value:n[o]}))}}},_generateLabelId:function(e,t){var i=t+E;e.attr("id",i);return i}})),zt=Ot.extend({dataItems:function(){return this.dataSource.flatView()},_angularItems:function(e){var t=this;t.angular(e,function(){return{elements:t.items(),data:g.map(t.dataItems(),function(e){return{dataItem:e}})}})}}),Lt=(z.dimensions=function(e,t){var i=e[0];if(t)e.css(t);return{width:i.offsetWidth,height:i.offsetHeight}},z.notify=a,/template$/i),Rt=/^\s*(?:\{(?:.|\r\n|\n)*\}|\[(?:.|\r\n|\n)*\])\s*$/,Ft=/^\{(\d+)(:[^\}]+)?\}|^\[[A-Za-z_]+\]$/,Vt=/([A-Z])/g;function Nt(e,t){var i;if(t.indexOf("data")===0){t=t.substring(4);t=t.charAt(0).toLowerCase()+t.substring(1)}t=t.replace(Vt,"-$1");i=e.getAttribute("data-"+z.ns+t);if(i===null)i=R;else if(i==="null")i=null;else if(i==="true")i=true;else if(i==="false")i=false;else if(b.test(i)&&t!="mask"&&t!="format")i=parseFloat(i);else if(Rt.test(i)&&!Ft.test(i))i=new Function("return ("+i+")")();return i}function Ht(e,t,i){var n={},r,a,o=e.getAttribute("data-"+z.ns+"role");for(r in t){a=Nt(e,r);if(a!==R){if(Lt.test(r)&&o!="drawer")if(typeof a==="string"){if(g("#"+a).length)a=z.template(g("#"+a).html());else if(i)a=z.template(i[a])}else a=e.getAttribute(r);n[r]=a}}return n}function Ut(e,t){return g.contains(e,t)?-1:1}function jt(){var e=g(this);return g.inArray(e.attr("data-"+z.ns+"role"),["slider","rangeslider","breadcrumb"])>-1||e.is(":visible")}z.initWidget=function(e,t,i){var n,r,a,o,c,s,h,l,f,d;if(!i)i=z.ui.roles;else if(i.roles)i=i.roles;e=e.nodeType?e:e[0];s=e.getAttribute("data-"+z.ns+"role");if(!s)return;f=s.indexOf(".")===-1;if(f)a=i[s];else a=z.getter(s)(m);var p=g(e).data(),v=a?"kendo"+a.fn.options.prefix+a.fn.options.name:"";if(f)d=new RegExp("^kendo.*"+s+"$","i");else d=new RegExp("^"+v+"$","i");for(var u in p)if(u.match(d))if(u===v)n=p[u];else return p[u];if(!a)return;l=Nt(e,"dataSource");t=g.extend({},Ht(e,g.extend({},a.fn.options,a.fn.defaults)),t);if(l)if(typeof l===_)t.dataSource=z.getter(l)(m);else t.dataSource=l;for(o=0,c=a.fn.events.length;o<c;o++){r=a.fn.events[o];h=Nt(e,r);if(h!==R)t[r]=z.getter(h)(m)}if(!n)n=new a(e,t);else if(!g.isEmptyObject(t))n.setOptions(t);return n},z.rolesFromNamespaces=function(e){var t=[],i,n;if(!e[0])e=[z.ui,z.dataviz.ui];for(i=0,n=e.length;i<n;i++)t[i]=e[i].roles;return d.apply(null,[{}].concat(t.reverse()))},z.init=function(e){var t=z.rolesFromNamespaces(B.call(arguments,1));g(e).find("[data-"+z.ns+"role]").addBack().each(function(){z.initWidget(this,{},t)})},z.destroy=function(e){g(e).find("[data-"+z.ns+"role]").addBack().each(function(){var e=g(this).data();for(var t in e)if(t.indexOf("kendo")===0&&typeof e[t].destroy===w)e[t].destroy()})},z.resize=function(e,t){var i=g(e).find("[data-"+z.ns+"role]").addBack().filter(jt);if(!i.length)return;var n=g.makeArray(i);n.sort(Ut);g.each(n,function(){var e=z.widgetInstance(g(this));if(e)e.resize(t)})},z.parseOptions=Ht,d(z.ui,{Widget:Ot,DataBoundWidget:zt,roles:{},progress:function(e,t,i){var n=e.find(".k-loading-mask"),r=z.support,c=r.browser,a,o,s,l,u;i=g.extend({},{width:"100%",height:"100%",top:e.scrollTop(),opacity:false},i);u=i.opacity?"k-loading-mask k-opaque":"k-loading-mask";if(t){if(!n.length){a=r.isRtl(e);o=a?"right":"left";l=z.scrollLeft(e);s=c.webkit?!a?0:e[0].scrollWidth-e.width()-2*l:0;n=g(z.format("<div class='{0}'><span role='alert' aria-live='polite' class='k-loading-text'>{1}</span><div class='k-loading-image'></div><div class='k-loading-color'></div></div>",u,z.ui.progress.messages.loading)).width(i.width).height(i.height).css("top",i.top).css(o,Math.abs(l)+s).prependTo(e)}}else if(n)n.remove()},plugin:function(e,t,i){var o=e.fn.options.name,n;t=t||z.ui;i=i||"";t[o]=e;t.roles[o.toLowerCase()]=e;n="getKendo"+i+o;o="kendo"+i+o;var r={name:o,widget:e,prefix:i||""};z.widgets.push(r);for(var a=0,s=z._widgetRegisteredCallbacks.length;a<s;a++)z._widgetRegisteredCallbacks[a](r);g.fn[o]=function(n){var r=this,a;if(typeof n===_){a=B.call(arguments,1);this.each(function(){var e=g.data(this,o),t,i;if(!e)throw new Error(z.format("Cannot call method '{0}' of {1} before it is initialized",n,o));t=e[n];if(typeof t!==w)throw new Error(z.format("Cannot find method '{0}' of {1}",n,o));i=t.apply(e,a);if(i!==R){r=i;return false}})}else this.each(function(){return new e(this,n)});return r};g.fn[o].widget=e;g.fn[n]=function(){return this.data(o)}}}),z.ui.progress.messages={loading:"Loading..."};var Gt={bind:function(){return this},nullObject:true,options:{}},Wt=Ot.extend({init:function(e,t){Ot.fn.init.call(this,e,t);this.element.autoApplyNS();this.wrapper=this.element;this.element.addClass("km-widget")},destroy:function(){Ot.fn.destroy.call(this);this.element.kendoDestroy()},options:{prefix:"Mobile"},events:[],view:function(){var e=this.element.closest(z.roleSelector("view splitview modalview drawer"));return z.widgetInstance(e,z.mobile.ui)||Gt},viewHasNativeScrolling:function(){var e=this.view();return e&&e.options.useNativeScrolling},container:function(){var e=this.element.closest(z.roleSelector("view layout modalview drawer splitview"));return z.widgetInstance(e.eq(0),z.mobile.ui)||Gt}});function qt(e,t){var i=e.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(i)?!e.disabled:i==="a"?e.href||t:t)&&Yt(e)}function Yt(e){return g.expr.pseudos.visible(e)&&!g(e).parents().addBack().filter(function(){return g.css(this,"visibility")==="hidden"}).length}d(z.mobile,{init:function(e){z.init(e,z.mobile.ui,z.ui,z.dataviz.ui)},appLevelNativeScrolling:function(){return z.mobile.application&&z.mobile.application.options&&z.mobile.application.options.useNativeScrolling},roles:{},ui:{Widget:Wt,DataBoundWidget:zt.extend(Wt.prototype),roles:{},plugin:function(e){z.ui.plugin(e,z.mobile.ui,"Mobile")}}}),Ye(z.dataviz,{init:function(e){z.init(e,z.dataviz.ui)},ui:{roles:{},themes:{},views:[],plugin:function(e){z.ui.plugin(e,z.dataviz.ui)}},roles:{}}),z.touchScroller=function(e,i){if(!i)i={};i.useNative=true;return g(e).map(function(e,t){t=g(t);if(c.kineticScrollNeeded&&z.mobile.ui.Scroller&&!t.data("kendoMobileScroller")){t.kendoMobileScroller(i);return t.data("kendoMobileScroller")}else return false})[0]},z.preventDefault=function(e){e.preventDefault()},z.widgetInstance=function(e,t){var i=e.data(z.ns+"role"),n=[],r,a,o=e.data("kendoView");if(i){if(i==="content")i="scroller";if(i==="editortoolbar"){var s=e.data("kendoEditorToolbar");if(s)return s}if(i==="view"&&o)return o;if(t)if(t[0])for(r=0,a=t.length;r<a;r++)n.push(t[r].roles[i]);else n.push(t.roles[i]);else n=[z.ui.roles[i],z.dataviz.ui.roles[i],z.mobile.ui.roles[i]];if(i.indexOf(".")>=0)n=[z.getter(i)(m)];for(r=0,a=n.length;r<a;r++){var l=n[r];if(l){var u=e.data("kendo"+l.fn.options.prefix+l.fn.options.name);if(u)return u}}}},z.onResize=function(e){var t=e;if(c.mobileOS.android)t=function(){setTimeout(e,600)};g(m).on(c.resize,t);return t},z.unbindResize=function(e){g(m).off(c.resize,e)},z.attrValue=function(e,t){return e.data(z.ns+t)},z.days={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},g.extend(g.expr.pseudos,{kendoFocusable:function(e){var t=g.attr(e,"tabindex");return qt(e,!isNaN(t)&&t>-1)}});var $t=["mousedown","mousemove","mouseenter","mouseleave","mouseover","mouseout","mouseup","click"],Xt="label, input, [data-rel=external]",f={setupMouseMute:function(){var e=0,t=$t.length,i=document.documentElement;if(f.mouseTrap||!c.eventCapture)return;f.mouseTrap=true;f.bustClick=false;f.captureMouse=false;var n=function(e){if(f.captureMouse)if(e.type==="click"){if(f.bustClick&&!g(e.target).is(Xt)){e.preventDefault();e.stopPropagation()}}else e.stopPropagation()};for(;e<t;e++)i.addEventListener($t[e],n,true)},muteMouse:function(e){f.captureMouse=true;if(e.data.bustClick)f.bustClick=true;clearTimeout(f.mouseTrapTimeoutID)},unMuteMouse:function(){clearTimeout(f.mouseTrapTimeoutID);f.mouseTrapTimeoutID=setTimeout(function(){f.captureMouse=false;f.bustClick=false},400)}},Kt={down:"touchstart mousedown",move:"mousemove touchmove",up:"mouseup touchend touchcancel",cancel:"mouseleave touchcancel"};if(c.touch&&(c.mobileOS.ios||c.mobileOS.android))Kt={down:"touchstart",move:"touchmove",up:"touchend touchcancel",cancel:"touchcancel"};else if(c.pointers)Kt={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"};else if(c.msPointers)Kt={down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel MSPointerLeave"};if(c.msPointers&&!("onmspointerenter"in m))g.each({MSPointerEnter:"MSPointerOver",MSPointerLeave:"MSPointerOut"},function(e,a){g.event.special[e]={delegateType:a,bindType:a,handle:function(e){var t,i=this,n=e.relatedTarget,r=e.handleObj;if(!n||n!==i&&!g.contains(i,n)){e.type=r.origType;t=r.handler.apply(this,arguments);e.type=a}return t}}});var Qt=function(e){return Kt[e]||e},Zt=/([^ ]+)/g,Jt=(z.applyEventMap=function(e,t){e=e.replace(Zt,Qt);if(t)e=e.replace(Zt,"$1."+t);return e},z.keyDownHandler=function(e,t){var i=t._events.kendoKeydown;if(!i)return true;i=i.slice();e.sender=t;e.preventKendoKeydown=false;for(var n=0,r=i.length;n<r;n++)i[n].call(t,e);return!e.preventKendoKeydown},g.fn.on);function ei(e,t){return new ei.fn.init(e,t)}L(true,ei,g),(((ei.fn=ei.prototype=new g).constructor=ei).fn.init=function(e,t){if(t&&t instanceof g&&!(t instanceof ei))t=ei(t);return g.fn.init.call(this,e,t,ti)}).prototype=ei.fn;var ti=ei(document),ii=(d(ei.fn,{handler:function(e){this.data("handler",e);return this},autoApplyNS:function(e){this.data("kendoNS",e||z.guid());return this},on:function(){var e=this,t=e.data("kendoNS");if(arguments.length===1)return Jt.call(e,arguments[0]);var i=e,n=B.call(arguments);if(typeof n[n.length-1]===T)n.pop();var r=n[n.length-1],a=z.applyEventMap(n[0],t);if(c.mouseAndTouchPresent&&a.search(/mouse|click/)>-1&&this[0]!==document.documentElement){f.setupMouseMute();var o=n.length===2?null:n[1],s=a.indexOf("click")>-1&&a.indexOf("touchend")>-1;Jt.call(this,{touchstart:f.muteMouse,touchend:f.unMuteMouse},o,{bustClick:s})}if(arguments[0].indexOf("keydown")!==-1&&n[1]&&n[1].options){n[0]=a;var l=n[1];var u=n[n.length-1];n[n.length-1]=function(e){if(z.keyDownHandler(e,l))return u.apply(this,[e])};Jt.apply(e,n);return e}if(typeof r===_){i=e.data("handler");r=i[r];n[n.length-1]=function(e){r.call(i,e)}}n[0]=a;Jt.apply(e,n);return e},kendoDestroy:function(e){e=e||this.data("kendoNS");if(e)this.off("."+e);return this}}),z.jQuery=ei,z.eventMap=Kt,z.timezone=function(){var u={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};var c={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6};function s(e,t){var i;var n;var r;var a=t[3];var o=t[4];var s=t[5];var l=t[8];if(!l)t[8]=l={};if(l[e])return l[e];if(!isNaN(o))i=new Date(Date.UTC(e,u[a],o,s[0],s[1],s[2],0));else if(o.indexOf("last")===0){i=new Date(Date.UTC(e,u[a]+1,1,s[0]-24,s[1],s[2],0));n=c[o.substr(4,3)];r=i.getUTCDay();i.setUTCDate(i.getUTCDate()+n-r-(n>r?7:0))}else if(o.indexOf(">=")>=0){i=new Date(Date.UTC(e,u[a],o.substr(5),s[0],s[1],s[2],0));n=c[o.substr(0,3)];r=i.getUTCDay();i.setUTCDate(i.getUTCDate()+n-r+(n<r?7:0))}else if(o.indexOf("<=")>=0){i=new Date(Date.UTC(e,u[a],o.substr(5),s[0],s[1],s[2],0));n=c[o.substr(0,3)];r=i.getUTCDay();i.setUTCDate(i.getUTCDate()+n-r-(n>r?7:0))}return l[e]=i}function a(e,t,i){t=t[i];if(!t){var n=i.split(":");var r=0;if(n.length>1)r=n[0]*60+Number(n[1]);return[-1e6,"max","-","Jan",1,[0,0,0],r,"-"]}var a=new Date(e).getUTCFullYear();t=jQuery.grep(t,function(e){var t=e[0];var i=e[1];return t<=a&&(i>=a||t==a&&i=="only"||i=="max")});t.push(e);t.sort(function(e,t){if(typeof e!="number")e=Number(s(a,e));if(typeof t!="number")t=Number(s(a,t));return e-t});var o=t[jQuery.inArray(e,t)-1]||t[t.length-1];return isNaN(o)?o:null}function o(e,t,i){var n=t[i];if(typeof n==="string")n=t[n];if(!n)throw new Error('Timezone "'+i+'" is either incorrect, or kendo.timezones.min.js is not included.');for(var r=n.length-1;r>=0;r--){var a=n[r][3];if(a&&e>a)break}var o=n[r+1];if(!o)throw new Error('Timezone "'+i+'" not found on '+e+".");return o}function l(e,t,i,n){if(typeof e!=x)e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());var r=o(e,t,n);return{zone:r,rule:a(e,i,r[1])}}function e(e,t){if(t=="Etc/UTC"||t=="Etc/GMT")return 0;var i=l(e,this.zones,this.rules,t);var n=i.zone;var r=i.rule;return z.parseFloat(r?n[0]-r[6]:n[0])}function t(e,t){var i=l(e,this.zones,this.rules,t);var n=i.zone;var r=i.rule;var a=n[2];if(a.indexOf("/")>=0)return a.split("/")[r&&+r[6]?1:0];else if(a.indexOf("%s")>=0)return a.replace("%s",!r||r[7]=="-"?"":r[7]);return a}function i(e,t,i){var n=i;var r;if(typeof t==_)t=this.offset(e,t);if(typeof i==_)i=this.offset(e,i);var a=e.getTimezoneOffset();e=new Date(e.getTime()+(t-i)*6e4);var o=e.getTimezoneOffset();if(typeof n==_)n=this.offset(e,n);r=o-a+(i-n);return new Date(e.getTime()+r*6e4)}function n(e,t){return this.convert(e,e.getTimezoneOffset(),t)}function r(e,t){return this.convert(e,t,e.getTimezoneOffset())}function h(e){return this.apply(new Date(e),"Etc/UTC")}return{zones:{},rules:{},offset:e,convert:i,apply:n,remove:r,abbr:t,toLocalDate:h}}(),z.date=function(){var a=6e4,o=864e5;function r(e,t){if(t===0&&e.getHours()===23){e.setHours(e.getHours()+2);return true}return false}function n(e,t,i){var n=e.getHours();i=i||1;t=(t-e.getDay()+7*i)%7;e.setDate(e.getDate()+t);r(e,n)}function i(e,t,i){e=new Date(e);n(e,t,i);return e}function h(e){return new Date(e.getFullYear(),e.getMonth(),1)}function e(e){var t=new Date(e.getFullYear(),e.getMonth()+1,0),i=h(e),n=Math.abs(t.getTimezoneOffset()-i.getTimezoneOffset());if(n)t.setHours(i.getHours()+n/60);return t}function f(e){return new Date(e.getFullYear(),0,1)}function d(e){return new Date(e.getFullYear(),11,31)}function p(e,t){if(t!==1)return u(i(e,t,-1),4);return u(e,4-(e.getDay()||7))}function s(e,t){var i=new Date(e.getFullYear(),0,1,-6);var n=p(e,t);var r=n.getTime()-i.getTime();var a=Math.floor(r/o);return 1+Math.floor(a/7)}function v(e,t){if(t===R)t=z.culture().calendar.firstDay;var i=u(e,-7);var n=u(e,7);var r=s(e,t);if(r===0)return s(i,t)+1;if(r===53&&s(n,t)>1)return 1;return r}function t(e){e=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0);r(e,0);return e}function g(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function l(e){return c(e).getTime()-t(c(e))}function m(e,t,i){var n=l(t),r=l(i),a;if(!e||n==r)return true;if(t>=i)i+=o;a=l(e);if(n>a)a+=o;if(r<n)r+=o;return a>=n&&a<=r}function _(e,t,i){var n=t.getTime(),r=i.getTime(),a;if(n>=r)r+=o;a=e.getTime();return a>=n&&a<=r}function u(e,t){var i=e.getHours();e=new Date(e);y(e,t*o);r(e,i);return e}function y(e,t,i){var n=e.getTimezoneOffset();var r;e.setTime(e.getTime()+t);if(!i){r=e.getTimezoneOffset()-n;e.setTime(e.getTime()+r*a)}}function b(e,t){e=new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds());r(e,t.getHours());return e}function w(){return t(new Date)}function x(e){return t(e).getTime()==w().getTime()}function c(e){var t=new Date(1980,1,1,0,0,0);if(e)t.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());return t}function k(e,t){var i=new Date(e);return new Date(i.setFullYear(i.getFullYear()+t))}return{adjustDST:r,dayOfWeek:i,setDayOfWeek:n,getDate:t,isInDateRange:_,isInTimeRange:m,isToday:x,nextDay:function(e){return u(e,1)},previousDay:function(e){return u(e,-1)},toUtcTime:g,MS_PER_DAY:o,MS_PER_HOUR:60*a,MS_PER_MINUTE:a,setTime:y,setHours:b,addDays:u,today:w,toInvariantTime:c,firstDayOfMonth:h,lastDayOfMonth:e,weekInYear:v,getMilliseconds:l,firstDayOfYear:f,lastDayOfYear:d,nextYear:function(e){return k(e,1)},previousYear:function(e){return k(e,-1)}}}(),z.stripWhitespace=function(t){if(document.createNodeIterator){var e=document.createNodeIterator(t,NodeFilter.SHOW_TEXT,function(e){return e.parentNode==t?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},false);while(e.nextNode())if(e.referenceNode&&!e.referenceNode.textContent.trim())e.referenceNode.parentNode.removeChild(e.referenceNode)}else for(var i=0;i<t.childNodes.length;i++){var n=t.childNodes[i];if(n.nodeType==3&&!/\S/.test(n.nodeValue)){t.removeChild(n);i--}if(n.nodeType==1)z.stripWhitespace(n)}},m.requestAnimationFrame||m.webkitRequestAnimationFrame||m.mozRequestAnimationFrame||m.oRequestAnimationFrame||m.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)}),ni=(z.animationFrame=function(e){ii.call(m,e)},[]),ri=(z.queueAnimation=function(e){ni[ni.length]=e;if(ni.length===1)z.runNextAnimation()},z.runNextAnimation=function(){z.animationFrame(function(){if(ni[0]){ni.shift()();if(ni[0])z.runNextAnimation()}})},z.parseQueryStringParams=function(e){var t=e.split("?")[1]||"",i={},n=t.split(/&|=/),r=n.length,a=0;for(;a<r;a+=2)if(n[a]!=="")i[decodeURIComponent(n[a])]=decodeURIComponent(n[a+1]);return i},z.elementUnderCursor=function(e){if(typeof e.x.client!="undefined")return document.elementFromPoint(e.x.client,e.y.client)},z.wheelDeltaY=function(e){var t=e.originalEvent,i=t.wheelDeltaY,n;if(t.wheelDelta){if(i===R||i)n=t.wheelDelta}else if(t.detail&&t.axis===t.VERTICAL_AXIS)n=-t.detail*10;return n},z.throttle=function(r,a){var o;var s=0;if(!a||a<=0)return r;var e=function(){var e=this;var t=+new Date-s;var i=arguments;function n(){r.apply(e,i);s=+new Date}if(!s)return n();if(o)clearTimeout(o);if(t>a)n();else o=setTimeout(n,a-t)};e.cancel=function(){clearTimeout(o)};return e},z.caret=function(e,t,i){var n;var r=t!==R;if(i===R)i=t;if(e[0])e=e[0];if(r&&e.disabled)return;try{if(e.selectionStart!==R)if(r){e.focus();var a=c.mobileOS;if(a.wp||a.android)setTimeout(function(){e.setSelectionRange(t,i)},0);else e.setSelectionRange(t,i)}else t=[e.selectionStart,e.selectionEnd];else if(document.selection){if(g(e).is(":visible"))e.focus();n=e.createTextRange();if(r){n.collapse(true);n.moveStart("character",t);n.moveEnd("character",i-t);n.select()}else{var o=n.duplicate(),s,l;n.moveToBookmark(document.selection.createRange().getBookmark());o.setEndPoint("EndToStart",n);s=o.text.length;l=s+n.text.length;t=[s,l]}}}catch(e){t=[]}return t},z.compileMobileDirective=function(t,i){var e=m.angular;t.attr("data-"+z.ns+"role",t[0].tagName.toLowerCase().replace("kendo-mobile-","").replace("-",""));e.element(t).injector().invoke(["$compile",function(e){e(t)(i);if(!/^\$(digest|apply)$/.test(i.$$phase))i.$digest()}]);return z.widgetInstance(t,z.mobile.ui)},z.antiForgeryTokens=function(){var e={},t=g("meta[name=csrf-token],meta[name=_csrf]").attr("content"),i=g("meta[name=csrf-param],meta[name=_csrf_header]").attr("content");g("input[name^='__RequestVerificationToken']").each(function(){e[this.name]=this.value});if(i!==R&&t!==R)e[i]=t;return e},z.cycleForm=function(e){var t=e.find("input, .k-widget, .k-dropdownlist, .k-combobox").first();var i=e.find("button, .k-button").last();function n(e){var t=z.widgetInstance(e);if(t&&t.focus)t.focus();else e.trigger("focus")}i.on("keydown",function(e){if(e.keyCode==z.keys.TAB&&!e.shiftKey){e.preventDefault();n(t)}});t.on("keydown",function(e){if(e.keyCode==z.keys.TAB&&e.shiftKey){e.preventDefault();n(i)}})},z.focusElement=function(t){var i=[];var e=t.parentsUntil("body").filter(function(e,t){var i=z.getComputedStyles(t,["overflow"]);return i.overflow!=="visible"}).add(m);e.each(function(e,t){i[e]=g(t).scrollTop()});try{t[0].setActive()}catch(e){t[0].focus()}e.each(function(e,t){g(t).scrollTop(i[e])})},z.focusNextElement=function(){if(document.activeElement){var e=g(":kendoFocusable");var t=e.index(document.activeElement);if(t>-1){var i=e[t+1]||e[0];i.focus()}}},z.trim=function(e){if(!!e)return e.toString().trim();else return""},z.getWidgetFocusableElement=function(e){var t=e.closest(":kendoFocusable"),i=z.widgetInstance(e),n;if(t.length)n=t;else if(i)n=i.options.name==="Editor"?g(i.body):i.wrapper.find(":kendoFocusable").first();else n=e;return n},z.addAttribute=function(e,t,i){var n=e.attr(t)||"";if(n.indexOf(i)<0)e.attr(t,(n+" "+i).trim())},z.removeAttribute=function(e,t,i){var n=e.attr(t)||"";e.attr(t,n.replace(i,"").trim())},z.toggleAttribute=function(e,t,i){var n=e.attr(t)||"";if(n.indexOf(i)<0)z.addAttribute(e,t,i);else z.removeAttribute(e,t,i)},z.matchesMedia=function(e){var t=z._bootstrapToMedia(e)||e;return c.matchMedia&&m.matchMedia(t).matches},z._bootstrapToMedia=function(e){return{xs:"(max-width: 576px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)"}[e]},z.fileGroupMap={audio:[".aif",".iff",".m3u",".m4a",".mid",".mp3",".mpa",".wav",".wma",".ogg",".wav",".wma",".wpl"],video:[".3g2",".3gp",".avi",".asf",".flv",".m4u",".rm",".h264",".m4v",".mkv",".mov",".mp4",".mpg",".rm",".swf",".vob",".wmv"],image:[".ai",".dds",".heic",".jpe","jfif",".jif",".jp2",".jps",".eps",".bmp",".gif",".jpeg",".jpg",".png",".ps",".psd",".svg",".svgz",".tif",".tiff"],txt:[".doc",".docx",".log",".pages",".tex",".wpd",".wps",".odt",".rtf",".text",".txt",".wks"],presentation:[".key",".odp",".pps",".ppt",".pptx"],data:[".xlr",".xls",".xlsx"],programming:[".tmp",".bak",".msi",".cab",".cpl",".cur",".dll",".dmp",".drv",".icns",".ico",".link",".sys",".cfg",".ini",".asp",".aspx",".cer",".csr",".css",".dcr",".htm",".html",".js",".php",".rss",".xhtml"],pdf:[".pdf"],config:[".apk",".app",".bat",".cgi",".com",".exe",".gadget",".jar",".wsf"],zip:[".7z",".cbr",".gz",".sitx",".arj",".deb",".pkg",".rar",".rpm",".tar.gz",".z",".zip",".zipx"],"disc-image":[".dmg",".iso",".toast",".vcd",".bin",".cue",".mdf"]},z.getFileGroup=function(e,t){var i=z.fileGroupMap;var n=Object.keys(i);var r="file";if(e===R||!e.length)return r;for(var a=0;a<n.length;a+=1){var o=i[n[a]];if(o.indexOf(e.toLowerCase())>-1)return t?"file-"+n[a]:n[a]}return r},z.getFileSizeMessage=function(e){var t=["Bytes","KB","MB","GB","TB"];if(e===0)return"0 Byte";var i=parseInt(Math.floor(Math.log(e)/Math.log(1024)),10);return Math.round(e/Math.pow(1024,i),2)+" "+t[i]},z.selectorFromClasses=function(e){return"."+e.split(" ").join(".")},["base","primary","secondary","tertiary","inherit","info","success","warning","error","dark","light","inverse"]),ai=["solid","outline","flat"],oi=["rectangle","square"],si=[["small","sm"],["medium","md"],["large","lg"]],li=[["small","sm"],["medium","md"],["large","lg"]],ui=["fixed","static","sticky","absolute"],ci=["both","horizontal","vertical"],hi=["auto","hidden","visible","scroll","clip"];function fi(e,t,i,n){var r=g("<form>").attr({action:i,method:"POST",target:n});var a=z.antiForgeryTokens();a.fileName=t;var o=e.split(";base64,");a.contentType=o[0].replace("data:","");a.base64=o[1];for(var s in a)if(a.hasOwnProperty(s))g("<input>").attr({value:a[s],name:s,type:"hidden"}).appendTo(r);r.appendTo("body").submit().remove()}z.cssProperties=function(){var n={},e={};function t(e,t){var i=z.cssProperties.propertyDictionary;if(!i[e])i[e]={};i[e][A]=t}function i(e,t){var i=z.cssProperties.propertyDictionary,n,r,a,o,s,l;for(n=0;n<t.length;n++){a=t[n].prop;s=t[n].values;if(!i[e][a])i[e][a]={};o=i[e][a];for(r=0;r<s.length;r++){l=s[r];if(u(s[r]))o[l[0]]=l[1];else o[l]=l}}}function r(e,t,i){if(!n[e])n[e]={};n[e][t]=i||t}function a(e,t){for(var i=0;i<t.length;i++)if(u(t[i]))r(e,t[i][0],t[i][1]);else r(e,t[i])}function o(e){var t=e.widget,i=e.propName,n=e.value,c=e.fill,r=z.cssProperties,a=r.defaultValues[i],o=r.propertyDictionary[t],s,l,u;if(!o)return"";s=o[i];l=s?s[n]||a[n]:a[n];if(l){if(i==="themeColor")u=o[A]+c+"-";else if(i==="positionMode")u="k-pos-";else if(i==="rounded")u="k-rounded-";else if(i==="resize")u="k-resize-";else if(i==="overflow")u="k-overflow-";else u=o[A];return u+l}else return""}a("themeColor",ri);a("fillMode",ai);a("shape",oi);a("size",si);a("positionMode",ui);a("rounded",li);a("resize",ci);a("overflow",hi);return{positionModeValues:ui,roundedValues:li,sizeValues:si,shapeValues:oi,fillModeValues:ai,themeColorValues:ri,defaultValues:n,propertyDictionary:e,registerValues:i,getValidClass:o,registerPrefix:t}}(),z.registerCssClass=function(e,t,i){if(!z.propertyToCssClassMap[e])z.propertyToCssClassMap[e]={};z.propertyToCssClassMap[e][t]=i||t},z.registerCssClasses=function(e,t){for(var i=0;i<t.length;i++)if(u(t[i]))z.registerCssClass(e,t[i][0],t[i][1]);else z.registerCssClass(e,t[i])},z.getValidCssClass=function(e,t,i){var n=z.propertyToCssClassMap[t][i];if(n)return e+n},z.propertyToCssClassMap={},z.registerCssClasses("themeColor",ri),z.registerCssClasses("fill",ai),z.registerCssClasses("shape",oi),z.registerCssClasses("size",si),z.registerCssClasses("positionMode",ui),z.whenAll=function(e){var n=arguments.length==1&&Array.isArray(e)?e:Array.prototype.slice.call(arguments),t=n.length,r=t,a=g.Deferred(),i=0,o=0,u=Array(t),c=Array(t),s=Array(t),l;function h(e,t,i){return function(){if(i!=n)o++;a.notifyWith(t[e]=this,i[e]=Array.prototype.slice.call(arguments));if(!--r)a[(!o?"resolve":"reject")+"With"](t,i)}}for(;i<t;i++)if((l=n[i])&&z.isFunction(l.promise))l.promise().done(h(i,s,n)).fail(h(i,u,c));else{a.notifyWith(this,l);--r}if(!r)a.resolveWith(s,n);return a.promise()};var di=document.createElement("a"),pi="download"in di&&!z.support.browser.edge;function vi(e,t){var i=e;if(typeof e=="string"){var n=e.split(";base64,");var r=n[0];var a=atob(n[1]);var o=new Uint8Array(a.length);for(var s=0;s<a.length;s++)o[s]=a.charCodeAt(s);i=new Blob([o.buffer],{type:r})}navigator.msSaveBlob(i,t)}function gi(e,t){if(m.Blob&&e instanceof Blob)e=URL.createObjectURL(e);di.download=t;di.href=e;var i=document.createEvent("MouseEvents");i.initMouseEvent("click",true,false,m,0,0,0,0,0,false,false,false,false,0,null);di.dispatchEvent(i);setTimeout(function(){URL.revokeObjectURL(e)})}z.saveAs=function(e){var t=fi;if(!e.forceProxy)if(pi)t=gi;else if(navigator.msSaveBlob)t=vi;t(e.dataURI,e.fileName,e.proxyURL,e.proxyTarget)},z.proxyModelSetters=function e(i){var n={};Object.keys(i||{}).forEach(function(t){Object.defineProperty(n,t,{get:function(){return i[t]},set:function(e){i[t]=e;i.dirty=true}})});return n},z.getSeriesColors=function(){var e='<div class="k-var--series-a"></div>'+'<div class="k-var--series-b"></div>'+'<div class="k-var--series-c"></div>'+'<div class="k-var--series-d"></div>'+'<div class="k-var--series-e"></div>'+'<div class="k-var--series-f"></div>',t=g(e),i=[];t.appendTo(g("body"));t.each(function(e,t){i.push(g(t).css("background-color"))});t.remove();return i},z.isElement=function(e){return e instanceof Element||e instanceof HTMLDocument},z.defaults=z.defaults||{},z.setDefaults=function(e,t){var i=e.split(".");var n=z.defaults;e=i.pop();i.forEach(function(e){if(n[e]===R)n[e]={};n=n[e]});if(t.constructor===Object)n[e]=Ye({},n[e],t);else n[e]=t},z.class2type={},jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){z.class2type["[object "+t+"]"]=t.toLowerCase()}),z.type=function(e){if(e==null)return e+"";return typeof e==="object"||typeof e==="function"?z.class2type[Object.prototype.toString.call(e)]||"object":typeof e};var KendoLicensing={validatePackage:function(){},setScriptKey:function(){}};function mi(){KendoLicensing.validatePackage(i)}return m.KendoLicensing={setScriptKey:KendoLicensing.setScriptKey},window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.fx.min",["kendo.core.min"],function(){var e={id:"fx",name:"Effects",category:"framework",description:"Required for animation effects in all Kendo UI widgets.",depends:["core"]},v=window.kendo.jQuery,d=void 0,h=window.kendo,g=h.effects,o=v.each,m=v.extend,l=h.support,n=l.browser,_=l.transforms,y=l.transitions,p={scale:0,scalex:0,scaley:0,scale3d:0},w={translate:0,translatex:0,translatey:0,translate3d:0},s=typeof document.documentElement.style.zoom!=="undefined"&&!_,u=/matrix3?d?\s*\(.*,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?/i,x=/^(-?[\d\.\-]+)?[\w\s]*,?\s*(-?[\d\.\-]+)?[\w\s]*/i,c=/translatex?$/i,k=/(zoom|fade|expand)(\w+)/,C=/(zoom|fade|expand)/,r=/[xy]$/i,S=["perspective","rotate","rotatex","rotatey","rotatez","rotate3d","scale","scalex","scaley","scalez","scale3d","skew","skewx","skewy","translate","translatex","translatey","translatez","translate3d","matrix","matrix3d"],T=["rotate","scale","scalex","scaley","skew","skewx","skewy","translate","translatex","translatey","matrix"],A={rotate:"deg",scale:"",skew:"px",translate:"px"},i=_.css,M=Math.round,D="",E="px",I="none",P="auto",B="width",O="height",z="hidden",L="origin",R="abortId",F="overflow",V="translate",N="position",H="completeCallback",U=i+"transition",b=i+"transform",j=i+"backface-visibility",G=i+"perspective",W="1500px",q="perspective("+W+")",f={left:{reverse:"right",property:"left",transition:"translatex",vertical:false,modifier:-1},right:{reverse:"left",property:"left",transition:"translatex",vertical:false,modifier:1},down:{reverse:"up",property:"top",transition:"translatey",vertical:true,modifier:1},up:{reverse:"down",property:"top",transition:"translatey",vertical:true,modifier:-1},top:{reverse:"bottom"},bottom:{reverse:"top"},in:{reverse:"out",modifier:-1},out:{reverse:"in",modifier:1},vertical:{reverse:"vertical"},horizontal:{reverse:"horizontal"}};if(h.directions=f,m(v.fn,{kendoStop:function(e,t){if(y)return g.stopQueue(this,e||false,t||false);else return this.stop(e,t)}}),_&&!y){o(T,function(e,n){v.fn[n]=function(e){if(typeof e=="undefined")return J(this,n);else{var t=v(this)[0],i=n+"("+e+A[n.replace(r,"")]+")";if(t.style.cssText.indexOf(b)==-1)v(this).css(b,i);else t.style.cssText=t.style.cssText.replace(new RegExp(n+"\\(.*?\\)","i"),i)}return this};v.fx.step[n]=function(e){v(e.elem)[n](e.now)}});var Y=v.fx.prototype.cur;v.fx.prototype.cur=function(){if(T.indexOf(this.prop)!=-1)return parseFloat(v(this.elem)[this.prop]());return Y.apply(this,arguments)}}function $(e){return parseInt(e,10)}function X(e,t){return $(e.css(t))}function K(e){var t=[];for(var i in e)t.push(i);return t}function Q(e){for(var t in e)if(S.indexOf(t)!=-1&&T.indexOf(t)==-1)delete e[t];return e}function Z(e,t){var i=[],n={},r,a,o,s;for(a in t){r=a.toLowerCase();s=_&&S.indexOf(r)!=-1;if(!l.hasHW3D&&s&&T.indexOf(r)==-1)delete t[a];else{o=t[a];if(s)i.push(a+"("+o+")");else n[a]=o}}if(i.length)n[b]=i.join(" ");return n}if(h.toggleClass=function(i,e,t,n){if(e){e=e.split(" ");if(y){t=m({exclusive:"all",duration:400,ease:"ease-out"},t);i.css(U,t.exclusive+" "+t.duration+"ms "+t.ease);setTimeout(function(){i.css(U,"").css(O)},t.duration)}o(e,function(e,t){i.toggleClass(t,n)})}return i},h.parseEffects=function(e,s){var l={};if(typeof e==="string")o(e.split(" "),function(e,t){var i=!C.test(t),n=t.replace(k,function(e,t,i){return t+":"+i.toLowerCase()}),r=n.split(":"),a=r[1],o={};if(r.length>1)o.direction=s&&i?f[a].reverse:a;l[r[0]]=o});else o(e,function(e){var t=this.direction;if(t&&s&&!C.test(e))this.direction=f[t].reverse;l[e]=this});return l},y)m(g,{transition:function(e,t,i){var n,r=0,a=e.data("keys")||[],o;i=m({duration:200,ease:"ease-out",complete:null,exclusive:"all"},i);var s=false;var l=function(){if(!s){s=true;if(o){clearTimeout(o);o=null}e.removeData(R).dequeue().css(U,"").css(U);i.complete.call(e)}};i.duration=v.fx?v.fx.speeds[i.duration]||i.duration:i.duration;n=Z(e,t);v.merge(a,K(n));if(v.hasOwnProperty("uniqueSort"))e.data("keys",v.uniqueSort(a)).height();else e.data("keys",v.unique(a)).height();e.css(U,i.exclusive+" "+i.duration+"ms "+i.ease).css(U);e.css(n).css(b);if(y.event){e.one(y.event,l);if(i.duration!==0)r=500}o=setTimeout(l,i.duration+r);e.data(R,o);e.data(H,l)},stopQueue:function(e,t,i){var n,r=e.data("keys"),a=!i&&r,o=e.data(H);if(a)n=h.getComputedStyles(e[0],r);if(o)o();if(a)e.css(n);return e.removeData("keys").stop(t)}});function J(e,t){if(_){var i=e.css(b);if(i==I)return t=="scale"?1:0;var n=i.match(new RegExp(t+"\\s*\\(([\\d\\w\\.]+)")),r=0;if(n)r=$(n[1]);else{n=i.match(u)||[0,0,0,0,0];t=t.toLowerCase();if(c.test(t))r=parseFloat(n[3]/n[2]);else if(t=="translatey")r=parseFloat(n[4]/n[2]);else if(t=="scale")r=parseFloat(n[2]);else if(t=="rotate")r=parseFloat(Math.atan2(n[2],n[1]))}return r}else return parseFloat(e.css(t))}var ee=h.Class.extend({init:function(e,t){var i=this;i.element=e;i.effects=[];i.options=t;i.restore=[]},run:function(e){var t=this,i,n,r,c=e.length,a=t.element,o=t.options,s=v.Deferred(),l={},u={},h,f,d;t.effects=e;s.done(t.complete.bind(t));a.data("animating",true);for(n=0;n<c;n++){i=e[n];i.setReverse(o.reverse);i.setOptions(o);t.addRestoreProperties(i.restore);i.prepare(l,u);f=i.children();for(r=0,d=f.length;r<d;r++)f[r].duration(o.duration).run()}for(var p in o.effects)m(u,o.effects[p].properties);if(!a.is(":visible"))m(l,{display:a.data("olddisplay")||"block"});if(_&&!o.reset){h=a.data("targetTransform");if(h)l=m(h,l)}l=Z(a,l);if(_&&!y)l=Q(l);a.css(l).css(b);for(n=0;n<c;n++)e[n].setup();if(o.init)o.init();a.data("targetTransform",u);g.animate(a,u,m({},o,{complete:s.resolve}));return s.promise()},stop:function(){v(this.element).kendoStop(true,true)},addRestoreProperties:function(e){var t=this.element,i,n=0,r=e.length;for(;n<r;n++){i=e[n];this.restore.push(i);if(!t.data(i))t.data(i,t.css(i))}},restoreCallback:function(){var e=this.element;for(var t=0,i=this.restore.length;t<i;t++){var n=this.restore[t];e.css(n,e.data(n))}},complete:function(){var e=this,t=0,i=e.element,n=e.options,r=e.effects,a=r.length;i.removeData("animating").dequeue();if(n.hide)i.data("olddisplay",i.css("display")).hide();this.restoreCallback();if(s&&!_)setTimeout(this.restoreCallback.bind(this),0);for(;t<a;t++)r[t].teardown();if(n.completeCallback)n.completeCallback(i)}}),a=(g.promise=function(e,t){var i=[],n,r=new ee(e,t),a=h.parseEffects(t.effects),o;t.effects=a;for(var s in a){n=g[te(s)];if(n){o=new n(e,a[s].direction);i.push(o)}}if(i[0])r.run(i);else{if(!e.is(":visible"))e.css({display:e.data("olddisplay")||"block"}).css("display");if(t.init)t.init();e.dequeue();r.complete()}},m(g,{animate:function(e,f,t){var i=t.transition!==false;delete t.transition;if(y&&"transition"in g&&i)g.transition(e,f,t);else if(_)e.animate(Q(f),{queue:false,show:false,hide:false,duration:t.duration,complete:t.complete});else e.each(function(){var c=v(this),h={};o(S,function(u,e){var t,i=f?f[e]+" ":null;if(i){var n=f;if(e in p&&f[e]!==d){t=i.match(x);if(_)m(n,{scale:+t[0]})}else if(e in w&&f[e]!==d){var r=c.css(N),a=r=="absolute"||r=="fixed";if(!c.data(V))if(a)c.data(V,{top:X(c,"top")||0,left:X(c,"left")||0,bottom:X(c,"bottom"),right:X(c,"right")});else c.data(V,{top:X(c,"marginTop")||0,left:X(c,"marginLeft")||0});var o=c.data(V);t=i.match(x);if(t){var s=e==V+"y"?+null:+t[1],l=e==V+"y"?+t[1]:+t[2];if(a){if(!isNaN(o.right)){if(!isNaN(s))m(n,{right:o.right-s})}else if(!isNaN(s))m(n,{left:o.left+s});if(!isNaN(o.bottom)){if(!isNaN(l))m(n,{bottom:o.bottom-l})}else if(!isNaN(l))m(n,{top:o.top+l})}else{if(!isNaN(s))m(n,{marginLeft:o.left+s});if(!isNaN(l))m(n,{marginTop:o.top+l})}}}if(!_&&e!="scale"&&e in n)delete n[e];if(n)m(h,n)}});if(n.msie)delete h.scale;c.animate(h,{queue:false,show:false,hide:false,duration:t.duration,complete:t.complete})})}}),g.animatedPromise=g.promise,h.Class.extend({init:function(e,t){var i=this;i.element=e;i._direction=t;i.options={};i._additionalEffects=[];if(!i.restore)i.restore=[]},reverse:function(){this._reverse=true;return this.run()},play:function(){this._reverse=false;return this.run()},add:function(e){this._additionalEffects.push(e);return this},direction:function(e){this._direction=e;return this},duration:function(e){this._duration=e;return this},compositeRun:function(){var e=this,t=new ee(e.element,{reverse:e._reverse,duration:e._duration}),i=e._additionalEffects.concat([e]);return t.run(i)},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var e=this,t=e.element,i=0,n=e.restore,c=n.length,r,a=v.Deferred(),o={},s={},l,u=e.children(),h=u.length;a.done(e._complete.bind(e));t.data("animating",true);for(i=0;i<c;i++){r=n[i];if(!t.data(r))t.data(r,t.css(r))}for(i=0;i<h;i++)u[i].duration(e._duration).run();e.prepare(o,s);if(!t.is(":visible"))m(o,{display:t.data("olddisplay")||"block"});if(_){l=t.data("targetTransform");if(l)o=m(l,o)}o=Z(t,o);if(_&&!y)o=Q(o);t.css(o).css(b);e.setup();t.data("targetTransform",s);g.animate(t,s,{duration:e._duration,complete:a.resolve});return a.promise()},stop:function(){var e=0,t=this.children(),i=t.length;for(e=0;e<i;e++)t[e].stop();v(this.element).kendoStop(true,true);return this},restoreCallback:function(){var e=this.element;for(var t=0,i=this.restore.length;t<i;t++){var n=this.restore[t];e.css(n,e.data(n))}},_complete:function(){var e=this,t=e.element;t.removeData("animating").dequeue();e.restoreCallback();if(e.shouldHide())t.data("olddisplay",t.css("display")).hide();if(s&&!_)setTimeout(e.restoreCallback.bind(e),0);e.teardown()},setOptions:function(e){m(true,this.options,e)},children:function(){return[]},shouldHide:v.noop,setup:v.noop,prepare:v.noop,teardown:v.noop,directions:[],setReverse:function(e){this._reverse=e;return this}}));function te(e){return e.charAt(0).toUpperCase()+e.substring(1)}function t(t,e){var r=a.extend(e),i=r.prototype.directions;g[te(t)]=r;g.Element.prototype[t]=function(e,t,i,n){return new r(this.element,e,t,i,n)};o(i,function(e,n){g.Element.prototype[t+te(n)]=function(e,t,i){return new r(this.element,n,e,t,i)}})}var ie=["left","right","up","down"],ne=["in","out"];function re(e,l,u,c){t(e,{directions:ne,startValue:function(e){this._startValue=e;return this},endValue:function(e){this._endValue=e;return this},shouldHide:function(){return this._shouldHide},prepare:function(e,t){var i=this,n,r,a=this._direction==="out",o=i.element.data(l),s=!(isNaN(o)||o==u);if(s)n=o;else if(typeof this._startValue!=="undefined")n=this._startValue;else n=a?u:c;if(typeof this._endValue!=="undefined")r=this._endValue;else r=a?c:u;if(this._reverse){e[l]=r;t[l]=n}else{e[l]=n;t[l]=r}i._shouldHide=t[l]===c}})}t("slideIn",{directions:ie,divisor:function(e){this.options.divisor=e;return this},prepare:function(e,t){var i=this,n,r=i.element,a=h._outerWidth,o=h._outerHeight,s=f[i._direction],c=-s.modifier*(s.vertical?o(r):a(r)),l=c/(i.options&&i.options.divisor||1)+E,u="0px";if(i._reverse){n=e;e=t;t=n}if(_){e[s.transition]=l;t[s.transition]=u}else{e[s.property]=l;t[s.property]=u}}}),t("tile",{directions:ie,init:function(e,t,i){a.prototype.init.call(this,e,t);this.options={previous:i}},previousDivisor:function(e){this.options.previousDivisor=e;return this},children:function(){var e=this,t=e._reverse,i=e.options.previous,n=e.options.previousDivisor||1,r=e._direction;var a=[h.fx(e.element).slideIn(r).setReverse(t)];if(i)a.push(h.fx(i).slideIn(f[r].reverse).divisor(n).setReverse(!t));return a}}),re("fade","opacity",1,0),re("zoom","scale",1,.01),t("slideMargin",{prepare:function(e,t){var i=this,n=i.element,r=i.options,a=n.data(L),o=r.offset,s,l=i._reverse;if(!l&&a===null)n.data(L,parseFloat(n.css("margin-"+r.axis)));s=n.data(L)||0;t["margin-"+r.axis]=!l?s+o:s}}),t("slideTo",{prepare:function(e,t){var i=this,n=i.element,r=i.options,a=r.offset.split(","),o=i._reverse;if(_){t.translatex=!o?a[0]:0;t.translatey=!o?a[1]:0}else{t.left=!o?a[0]:0;t.top=!o?a[1]:0}n.css("left")}}),t("expand",{directions:["horizontal","vertical"],restore:[F],prepare:function(e,c){var t=this,i=t.element,n=t.options,r=t._reverse,a=t._direction==="vertical"?O:B,o=i[0].style[a],s=i.data(a),l=parseFloat(s||o),u=M(i.css(a,P)[a]());e.overflow=z;l=n&&n.reset?u||l:l||u;c[a]=(r?0:l)+E;e[a]=(r?l:0)+E;if(s===d)i.data(a,o)},shouldHide:function(){return this._reverse},teardown:function(){var e=this,t=e.element,i=e._direction==="vertical"?O:B,n=t.data(i);if(n==P||n===D)setTimeout(function(){t.css(i,P).css(i)},0)}});var ae={position:"absolute",marginLeft:0,marginTop:0,scale:1},oe=(t("transfer",{init:function(e,t){this.element=e;this.options={target:t};this.restore=[]},setup:function(){this.element.appendTo(document.body)},prepare:function(e,t){var i=this,n=i.element,r=g.box(n),a=g.box(i.options.target),o=J(n,"scale"),s=g.fillScale(a,r),l=g.transformOrigin(a,r);m(e,ae);t.scale=1;n.css(b,"scale(1)").css(b);n.css(b,"scale("+o+")");e.top=r.top;e.left=r.left;e.transformOrigin=l.x+E+" "+l.y+E;if(i._reverse)e.scale=s;else t.scale=s}}),{top:"rect(auto auto $size auto)",bottom:"rect($size auto auto auto)",left:"rect(auto $size auto auto)",right:"rect(auto auto auto $size)"}),se={top:{start:"rotatex(0deg)",end:"rotatex(180deg)"},bottom:{start:"rotatex(-180deg)",end:"rotatex(0deg)"},left:{start:"rotatey(0deg)",end:"rotatey(-180deg)"},right:{start:"rotatey(180deg)",end:"rotatey(0deg)"}};function le(e,t){var i=h.directions[t].vertical,n=e[i?O:B]()/2+"px";return oe[t].replace("$size",n)}t("turningPage",{directions:ie,init:function(e,t,i){a.prototype.init.call(this,e,t);this._container=i},prepare:function(e,t){var i=this,n=i._reverse,r=n?f[i._direction].reverse:i._direction,a=se[r];e.zIndex=1;if(i._clipInHalf)e.clip=le(i._container,h.directions[r].reverse);e[j]=z;t[b]=q+(n?a.start:a.end);e[b]=q+(n?a.end:a.start)},setup:function(){this._container.append(this.element)},face:function(e){this._face=e;return this},shouldHide:function(){var e=this,t=e._reverse,i=e._face;return t&&!i||!t&&i},clipInHalf:function(e){this._clipInHalf=e;return this},temporary:function(){this.element.addClass("temp-page");return this}}),t("staticPage",{directions:ie,init:function(e,t,i){a.prototype.init.call(this,e,t);this._container=i},restore:["clip"],prepare:function(e,t){var i=this,n=i._reverse?f[i._direction].reverse:i._direction;e.clip=le(i._container,n);e.opacity=.999;t.opacity=1},shouldHide:function(){var e=this,t=e._reverse,i=e._face;return t&&!i||!t&&i},face:function(e){this._face=e;return this}}),t("pageturn",{directions:["horizontal","vertical"],init:function(e,t,i,n){a.prototype.init.call(this,e,t);this.options={};this.options.face=i;this.options.back=n},children:function(){var e=this,t=e.options,i=e._direction==="horizontal"?"left":"top",n=h.directions[i].reverse,r=e._reverse,a,o=t.face.clone(true).removeAttr("id"),s=t.back.clone(true).removeAttr("id"),l=e.element;if(r){a=i;i=n;n=a}return[h.fx(t.face).staticPage(i,l).face(true).setReverse(r),h.fx(t.back).staticPage(n,l).setReverse(r),h.fx(o).turningPage(i,l).face(true).clipInHalf(true).temporary().setReverse(r),h.fx(s).turningPage(n,l).clipInHalf(true).temporary().setReverse(r)]},prepare:function(e,t){e[G]=W;e.transformStyle="preserve-3d";e.opacity=.999;t.opacity=1},teardown:function(){this.element.find(".temp-page").remove()}}),t("flip",{directions:["horizontal","vertical"],init:function(e,t,i,n){a.prototype.init.call(this,e,t);this.options={};this.options.face=i;this.options.back=n},children:function(){var e=this,t=e.options,i=e._direction==="horizontal"?"left":"top",n=h.directions[i].reverse,r=e._reverse,a,o=e.element;if(r){a=i;i=n;n=a}return[h.fx(t.face).turningPage(i,o).face(true).setReverse(r),h.fx(t.back).turningPage(n,o).setReverse(r)]},prepare:function(e){e[G]=W;e.transformStyle="preserve-3d"}});var ue=!l.mobileOS.android,ce=".km-touch-scrollbar, .km-actionsheet-wrapper",he=(t("replace",{_before:v.noop,_after:v.noop,init:function(e,t,i){a.prototype.init.call(this,e);this._previous=v(t);this._transitionClass=i},duration:function(){throw new Error("The replace effect does not support duration setting; the effect duration may be customized through the transition class rule")},beforeTransition:function(e){this._before=e;return this},afterTransition:function(e){this._after=e;return this},_both:function(){return v().add(this._element).add(this._previous)},_containerClass:function(){var e=this._direction,t="k-fx k-fx-start k-fx-"+this._transitionClass;if(e)t+=" k-fx-"+e;if(this._reverse)t+=" k-fx-reverse";return t},complete:function(e){if(!this.deferred||e&&v(e.target).is(ce))return;var t=this.container;t.removeClass("k-fx-end").removeClass(this._containerClass()).off(y.event,this.completeProxy);this._previous.hide().removeClass("k-fx-current");this.element.removeClass("k-fx-next");if(ue)t.css(F,"");if(!this.isAbsolute)this._both().css(N,"");this.deferred.resolve();delete this.deferred},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var e=this,t=e.element,i=e._previous,n=t.parents().filter(i.parents()).first(),r=e._both(),a=v.Deferred(),o=t.css(N),s;if(!n.length)n=t.parent();this.container=n;this.deferred=a;this.isAbsolute=o=="absolute";if(!this.isAbsolute)r.css(N,"absolute");if(ue){s=n.css(F);n.css(F,"hidden")}if(!y)this.complete();else{t.addClass("k-fx-hidden");n.addClass(this._containerClass());this.completeProxy=this.complete.bind(this);n.on(y.event,this.completeProxy);h.animationFrame(function(){t.removeClass("k-fx-hidden").addClass("k-fx-next");i.css("display","").addClass("k-fx-current");e._before(i,t);h.animationFrame(function(){n.removeClass("k-fx-start").addClass("k-fx-end");e._after(i,t)})})}return a.promise()},stop:function(){this.complete()}}),h.Class.extend({init:function(){var e=this;e._tickProxy=e._tick.bind(e);e._started=false},tick:v.noop,done:v.noop,onEnd:v.noop,onCancel:v.noop,start:function(){if(!this.enabled())return;if(!this.done()){this._started=true;h.animationFrame(this._tickProxy)}else this.onEnd()},enabled:function(){return true},cancel:function(){this._started=false;this.onCancel()},_tick:function(){var e=this;if(!e._started)return;e.tick();if(!e.done())h.animationFrame(e._tickProxy);else{e._started=false;e.onEnd()}}})),fe=he.extend({init:function(e){var t=this;m(t,e);he.fn.init.call(t)},done:function(){return this.timePassed()>=this.duration},timePassed:function(){return Math.min(this.duration,new Date-this.startDate)},moveTo:function(e){var t=this,i=t.movable;t.initial=i[t.axis];t.delta=e.location-t.initial;t.duration=typeof e.duration=="number"?e.duration:300;t.tick=t._easeProxy(e.ease);t.startDate=new Date;t.start()},_easeProxy:function(e){var t=this;return function(){t.movable.moveAxis(t.axis,e(t.timePassed(),t.initial,t.delta,t.duration))}}});return m(fe,{easeOutExpo:function(e,t,i,n){return e==n?t+i:i*(-Math.pow(2,-10*e/n)+1)+t},easeOutBack:function(e,t,i,n,r){r=1.70158;return i*((e=e/n-1)*e*((r+1)*e+r)+1)+t}}),g.Animation=he,g.Transition=fe,g.createEffect=t,g.box=function(e){e=v(e);var t=e.offset();t.width=h._outerWidth(e);t.height=h._outerHeight(e);return t},g.transformOrigin=function(e,t){var i=(e.left-t.left)*t.width/(t.width-e.width),n=(e.top-t.top)*t.height/(t.height-e.height);return{x:isNaN(i)?0:i,y:isNaN(n)?0:n}},g.fillScale=function(e,t){return Math.min(e.width/t.width,e.height/t.height)},g.fitScale=function(e,t){return Math.max(e.width/t.width,e.height/t.height)},window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.router.min",["kendo.core.min"],function(){var e={id:"router",name:"Router",category:"framework",description:"The Router class is responsible for tracking the application state and navigating between the application states.",depends:["core"],hidden:false},n=window.kendo.jQuery,i=void 0,t=window.kendo,s="change",f="back",d="same",p=t.support,a=window.location,o=window.history,v=50,g=t.support.browser.msie,m=/^#*/,l=window.document;function u(e,t){if(!t)return e;if(e+"/"===t)e=t;var i=new RegExp("^"+t,"i");if(!i.test(e))e=t+"/"+e;return a.protocol+"//"+(a.host+"/"+e).replace(/\/\/+/g,"/")}function _(e){return e?"#!":"#"}function y(e){var t=a.href;if(e==="#!"&&t.indexOf("#")>-1&&t.indexOf("#!")<0)return null;return t.split(e)[1]||""}function r(e,t){if(t.indexOf(e)===0)return t.substr(e.length).replace(/\/\//g,"/");else return t}var b=t.Class.extend({back:function(){if(g)setTimeout(function(){o.back()});else o.back()},forward:function(){if(g)setTimeout(function(){o.forward()});else o.forward()},length:function(){return o.length},replaceLocation:function(e){a.replace(e)}}),w=b.extend({init:function(e){this.root=e},navigate:function(e){o.pushState({},l.title,u(e,this.root))},replace:function(e){o.replaceState({},l.title,u(e,this.root))},normalize:function(e){return r(this.root,e)},current:function(){var e=a.pathname;if(a.search)e+=a.search;return r(this.root,e)},change:function(e){n(window).bind("popstate.kendo",e)},stop:function(){n(window).unbind("popstate.kendo")},normalizeCurrent:function(e){var t,i=e.root,n=a.pathname,r=y(_(e.hashBang));if(i===n+"/")t=i;if(i===n&&r)t=u(r.replace(m,""),i);if(t)o.pushState({},l.title,t)}});function x(e){return e.replace(/^(#)?/,"#")}function k(e){return e.replace(/^(#(!)?)?/,"#!")}var C=b.extend({init:function(e){this._id=t.guid();this.prefix=_(e);this.fix=e?k:x},navigate:function(e){a.hash=this.fix(e)},replace:function(e){this.replaceLocation(this.fix(e))},normalize:function(e){if(e.indexOf(this.prefix)<0)return e;else return e.split(this.prefix)[1]},change:function(e){if(p.hashChange)n(window).on("hashchange."+this._id,e);else this._interval=setInterval(e,v)},stop:function(){n(window).off("hashchange."+this._id);clearInterval(this._interval)},current:function(){return y(this.prefix)},normalizeCurrent:function(e){var t=a.pathname,i=e.root;if(e.pushState&&i!==t){this.replaceLocation(i+this.prefix+r(i,t));return true}return false}}),S=t.Observable.extend({start:function(e){e=e||{};this.bind([s,f,d],e);if(this._started)return;this._started=true;e.root=e.root||"/";var t=this.createAdapter(e),i;if(t.normalizeCurrent(e))return;i=t.current();n.extend(this,{adapter:t,root:e.root,historyLength:t.length(),current:i,locations:[i]});t.change(this._checkUrl.bind(this))},createAdapter:function(e){return p.pushState&&e.pushState?new w(e.root):new C(e.hashBang)},stop:function(){if(!this._started)return;this.adapter.stop();this.unbind(s);this._started=false},change:function(e){this.bind(s,e)},replace:function(t,e){this._navigate(t,e,function(e){e.replace(t);this.locations[this.locations.length-1]=this.current})},navigate:function(t,e){if(t==="#:back"){this.backCalled=true;this.adapter.back();return}this._navigate(t,e,function(e){e.navigate(t);this.locations.push(this.current)})},_navigate:function(e,t,i){var n=this.adapter;e=n.normalize(e);if(this.current===e||this.current===decodeURIComponent(e)){this.trigger(d);return}if(!t)if(this.trigger(s,{url:e,decode:false}))return;this.current=e;i.call(this,n);this.historyLength=n.length()},_checkUrl:function(){var e=this.adapter,t=e.current(),i=e.length(),n=this.historyLength===i,r=t===this.locations[this.locations.length-2]&&n,a=this.backCalled,o=this.current;if(t===null||this.current===t||this.current===decodeURIComponent(t))return true;this.historyLength=i;this.backCalled=false;this.current=t;if(r&&this.trigger("back",{url:o,to:t})){e.forward();this.current=o;return}if(this.trigger(s,{url:t,backButtonPressed:!a})){if(r)e.forward();else{e.back();this.historyLength--}this.current=o;return}if(r)this.locations.pop();else this.locations.push(t)}}),c=(t.History=S,t.History.HistoryAdapter=b,t.History.HashAdapter=C,t.History.PushStateAdapter=w,t.absoluteURL=u,t.history=new S,window.kendo),h=c.history,T=c.Observable,A="init",M="routeMissing",D="change",E="back",I="same",P=/\((.*?)\)/g,B=/(\(\?)?:\w+/g,O=/\*\w+/g,z=/[\-{}\[\]+?.,\\\^$|#\s]/g;function L(e,t){return t?e:"([^/]+)"}function R(e,t){return new RegExp("^"+e.replace(z,"\\$&").replace(P,"(?:$1)?").replace(B,L).replace(O,"(.*?)")+"$",t?"i":"")}function F(e){return e.replace(/(\?.*)|(#.*)/g,"")}var V=c.Class.extend({init:function(e,t,i){if(!(e instanceof RegExp))e=R(e,i);this.route=e;this._callback=t},callback:function(e,t,i){var n,r=0,a,o=c.parseQueryStringParams(e);o._back=t;e=F(e);n=this.route.exec(e).slice(1);a=n.length;if(i)for(;r<a;r++)if(typeof n[r]!=="undefined")n[r]=decodeURIComponent(n[r]);n.push(o);this._callback.apply(null,n)},worksWith:function(e,t,i){if(this.route.test(F(e))){this.callback(e,t,i);return true}else return false}}),N=T.extend({init:function(e){if(!e)e={};T.fn.init.call(this);this.routes=[];this.pushState=e.pushState;this.hashBang=e.hashBang;this.root=e.root;this.ignoreCase=e.ignoreCase!==false;this.bind([A,M,D,I,E],e)},destroy:function(){h.unbind(D,this._urlChangedProxy);h.unbind(I,this._sameProxy);h.unbind(E,this._backProxy);this.unbind()},start:function(){var t=this,e=function(){t._same()},i=function(e){t._back(e)},n=function(e){t._urlChanged(e)};h.start({same:e,change:n,back:i,pushState:t.pushState,hashBang:t.hashBang,root:t.root});var r={url:h.current||"/",preventDefault:$.noop};if(!t.trigger(A,r))t._urlChanged(r);this._urlChangedProxy=n;this._backProxy=i},route:function(e,t){this.routes.push(new V(e,t,this.ignoreCase))},navigate:function(e,t){c.history.navigate(e,t)},replace:function(e,t){c.history.replace(e,t)},_back:function(e){if(this.trigger(E,{url:e.url,to:e.to}))e.preventDefault()},_same:function(){this.trigger(I)},_urlChanged:function(e){var t=e.url;var i=!!e.decode;var n=e.backButtonPressed;if(!t)t="/";if(this.trigger(D,{url:e.url,params:c.parseQueryStringParams(e.url),backButtonPressed:n})){e.preventDefault();return}var r=0,a=this.routes,o,s=a.length;for(;r<s;r++){o=a[r];if(o.worksWith(t,n,i))return}if(this.trigger(M,{url:t,params:c.parseQueryStringParams(t),backButtonPressed:n}))e.preventDefault()}});return c.Router=N,window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.data.odata.min",["kendo.core.min"],function(){var e={id:"data.odata",name:"OData",category:"framework",depends:["core"],hidden:true},n=window.kendo.jQuery,g=void 0,d=window.kendo,l=n.extend,u="\r\n",c="\r\n\r\n",h=d.isFunction,m={eq:"eq",neq:"ne",gt:"gt",gte:"ge",lt:"lt",lte:"le",contains:"substringof",doesnotcontain:"substringof",endswith:"endswith",startswith:"startswith",isnull:"eq",isnotnull:"ne",isnullorempty:"eq",isnotnullorempty:"ne",isempty:"eq",isnotempty:"ne"},_=l({},m,{contains:"contains"}),s={pageSize:n.noop,page:n.noop,filter:function(e,t,i){if(t){t=b(t,i);if(t)e.$filter=t}},sort:function(e,t){var i=n.map(t,function(e){var t=e.field.replace(/\./g,"/");if(e.dir==="desc")t+=" desc";return t}).join(",");if(i)e.$orderby=i},skip:function(e,t){if(t)e.$skip=t},take:function(e,t){if(t)e.$top=t}},y={read:{dataType:"jsonp"}};function b(e,t){var i=[],c=e.logic||"and",n,r,a,o,s,l,u,h,f=e.filters;for(n=0,r=f.length;n<r;n++){e=f[n];a=e.field;u=e.value;l=e.operator;if(e.filters)e=b(e,t);else{h=e.ignoreCase;a=a.replace(/\./g,"/");e=m[l];if(t)e=_[l];if(l==="isnullorempty")e=d.format("{0} {1} null or {0} {1} ''",a,e);else if(l==="isnotnullorempty")e=d.format("{0} {1} null and {0} {1} ''",a,e);else if(l==="isnull"||l==="isnotnull")e=d.format("{0} {1} null",a,e);else if(l==="isempty"||l==="isnotempty")e=d.format("{0} {1} ''",a,e);else if(e&&u!==g){o=d.type(u);if(o==="string"){s="'{1}'";u=u.replace(/'/g,"''");if(h===true)a="tolower("+a+")"}else if(o==="date")if(t){s="{1:yyyy-MM-ddTHH:mm:ss+00:00}";u=d.timezone.apply(u,"Etc/UTC")}else s="datetime'{1:yyyy-MM-ddTHH:mm:ss}'";else s="{1}";if(e.length>3)if(e!=="substringof")s="{0}({2},"+s+")";else{s="{0}("+s+",{2})";if(l==="doesnotcontain")if(t){s="{0}({2},'{1}') eq -1";e="indexof"}else s+=" eq false"}else s="{2} {0} "+s;e=d.format(s,e,u,a)}}i.push(e)}e=i.join(" "+c+" ");if(i.length>1)e="("+e+")";return e}function i(e){for(var t in e)if(t.indexOf("@odata")===0)delete e[t]}function t(){return Math.floor((1+Math.random())*65536).toString(16).substr(1)}function f(e){return e+t()+"-"+t()+"-"+t()}function p(e,t){var i=u+"--"+e;if(t)i+="--";return i}function w(e,t,i,n){var r=e.options[n].url;var a=d.format("{0} ",i);if(h(r))return a+r(t);else return a+r}function x(e,t){var i="";i+=p(e,false);i+=u+"Content-Type: application/http";i+=u+"Content-Transfer-Encoding: binary";i+=u+"Content-ID: "+t;return i}function k(e){var t="";t+=u+"Content-Type: application/json;odata=minimalmetadata";t+=u+"Prefer: return=representation";t+=c+d.stringify(e);return t}function C(e,t,i,n,r,a){var o="";for(var s=0;s<e.length;s++){o+=x(t,i);o+=c+w(r,e[s],r.options[n].type,n)+" HTTP/1.1";if(!a)o+=k(e[s]);o+=u;i++}return o}function v(e,t,i,n,r,a,o){var s="";s+=S(t,i);s+=C(e,i,n,a,r,o);s+=p(i,true);s+=u;return s}function S(e,t){var i="";i+="--"+e+u;i+="Content-Type: multipart/mixed; boundary="+t+u;return i}function o(e,t){var i=l({},e.options.batch);var n=f("sf_batch_");var r="";var a=0;var o=e.options.batch.url;var s=f("sf_changeset_");i.type=e.options.batch.type;i.url=h(o)?o():o;i.headers=l(i.headers||{},{"Content-Type":"multipart/mixed; boundary="+n});if(t.updated.length){r+=v(t.updated,n,s,a,e,"update",false);a+=t.updated.length;s=f("sf_changeset_")}if(t.destroyed.length){r+=v(t.destroyed,n,s,a,e,"destroy",true);a+=t.destroyed.length;s=f("sf_changeset_")}if(t.created.length)r+=v(t.created,n,s,a,e,"create",false);r+=p(n,true);i.data=r;return i}function T(e){var t=e.match(/--changesetresponse_[a-z0-9-]+$/gm);var i=0;var n=[];var r;var a;var o;var s;var l;n.push({models:[],passed:true});for(var u=0;u<t.length;u++){s=t[u];if(s.lastIndexOf("--",s.length-1)){if(u<t.length-1)n.push({models:[],passed:true});continue}if(!i)i=e.indexOf(s);else i=e.indexOf(s,i+s.length);r=e.substring(i,e.indexOf("--",i+1));a=r.match(/^HTTP\/1\.\d (\d{3}) (.*)$/gm).pop();o=d.parseFloat(a.match(/\d{3}/g).pop());if(o>=200&&o<=299){l=r.match(/\{.*\}/gm);if(l)n[n.length-1].models.push(JSON.parse(l[0]))}else n[n.length-1].passed=false}return n}return l(true,d.data,{schemas:{odata:{type:"json",data:function(e){return e.d.results||[e.d]},total:"d.__count"}},transports:{odata:{read:{cache:true,dataType:"jsonp",jsonp:"$callback"},update:{cache:true,dataType:"json",contentType:"application/json",type:"PUT"},create:{cache:true,dataType:"json",contentType:"application/json",type:"POST"},destroy:{cache:true,dataType:"json",type:"DELETE"},parameterMap:function(e,t,i){var n,r,a,o;e=e||{};t=t||"read";o=(this.options||y)[t];o=o?o.dataType:"json";if(t==="read"){n={$inlinecount:"allpages"};if(o!="json")n.$format="json";for(a in e)if(s[a])s[a](n,e[a],i);else n[a]=e[a]}else{if(o!=="json")throw new Error("Only json dataType can be used for "+t+" operation.");if(t!=="destroy"){for(a in e){r=e[a];if(typeof r==="number")e[a]=r+""}n=d.stringify(e)}}return n}}}}),l(true,d.data,{schemas:{"odata-v4":{type:"json",data:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)i(e[t]);return e}else{e=n.extend({},e);i(e);if(e.value)return e.value;return[e]}},total:function(e){return e["@odata.count"]}}},transports:{"odata-v4":{batch:{type:"POST"},read:{cache:true,dataType:"json"},update:{cache:true,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"PUT"},create:{cache:true,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"POST"},destroy:{cache:true,dataType:"json",type:"DELETE"},parameterMap:function(e,t){var i=d.data.transports.odata.parameterMap(e,t,true);if(t=="read"){i.$count=true;delete i.$inlinecount}if(i&&i.$filter)i.$filter=i.$filter.replace(/('[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}')/gi,function(e){return e.substring(1,e.length-1)});return i},submit:function(r){var e=this;var t=o(e,r.data);var a=r.data;if(!a.updated.length&&!a.destroyed.length&&!a.created.length)return;n.ajax(l(true,{},{success:function(e){var t=T(e);var i=0;var n;if(a.updated.length){n=t[i];if(n.passed)r.success(n.models.length?n.models:[],"update");i++}if(a.destroyed.length){n=t[i];if(n.passed)r.success([],"destroy");i++}if(a.created.length){n=t[i];if(n.passed)r.success(n.models,"create")}},error:function(e,t,i){r.error(e,t,i)}},t))}}}}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.data.xml.min",["kendo.core.min"],function(){var i={id:"data.xml",name:"XML",category:"framework",depends:["core"],hidden:true},r=window.kendo.jQuery,h=void 0,f=window.kendo,d=Array.isArray,p=r.isPlainObject,v=r.map,g=r.each,m=r.extend,t=f.getter,n,e=f.Class.extend({init:function(e){var i=this,t=e.total,r=e.model,n=e.parse,a=e.errors,o=e.serialize,s=e.data;if(r){if(p(r)){var c=e.modelBase||f.data.Model;if(r.fields)g(r.fields,function(e,t){if(p(t)&&t.field){if(!f.isFunction(t.field))t=m(t,{field:i.getter(t.field)})}else t={field:i.getter(t)};r.fields[e]=t});var l=r.id;if(l){var u={};u[i.xpathToMember(l,true)]={field:i.getter(l)};r.fields=m(u,r.fields);r.id=i.xpathToMember(l)}r=c.define(r)}i.model=r}if(t)if(typeof t=="string"){t=i.getter(t);i.total=function(e){return parseInt(t(e),10)}}else if(typeof t=="function")i.total=t;if(a)if(typeof a=="string"){a=i.getter(a);i.errors=function(e){return a(e)||null}}else if(typeof a=="function")i.errors=a;if(s)if(typeof s=="string"){s=i.xpathToMember(s);i.data=function(e){var t=i.evaluate(e,s),n;t=d(t)?t:[t];if(i.model&&r.fields){n=new i.model;return v(t,function(e){if(e){var t={},i;for(i in r.fields)t[i]=n._parse(i,r.fields[i].field(e));return t}})}return t}}else if(typeof s=="function")i.data=s;if(typeof n=="function"){var h=i.parse;i.parse=function(e){var t=n.call(i,e);return h.call(i,t)}}if(typeof o=="function")i.serialize=o},total:function(e){return this.data(e).length},errors:function(e){return e?e.errors:null},serialize:function(e){return e},parseDOM:function(e){var t={},i,n,r,a,o,s,l=e.attributes,c=l.length,u;for(u=0;u<c;u++){s=l[u];t["@"+s.nodeName]=s.nodeValue}for(n=e.firstChild;n;n=n.nextSibling){r=n.nodeType;if(r===3||r===4)t["#text"]=n.nodeValue;else if(r===1){i=this.parseDOM(n);a=n.nodeName;o=t[a];if(d(o))o.push(i);else if(o!==h)o=[o,i];else o=i;t[a]=o}}return t},evaluate:function(e,t){var i=t.split("."),n,r,a,o,s;while(n=i.shift()){e=e[n];if(d(e)){r=[];t=i.join(".");for(s=0,a=e.length;s<a;s++){o=this.evaluate(e[s],t);o=d(o)?o:[o];r.push.apply(r,o)}return r}}return e},parse:function(e){var t,i,n={};t=e.documentElement||r.parseXML(e).documentElement;i=this.parseDOM(t);n[t.nodeName]=i;return n},xpathToMember:function(e,t){if(!e)return"";e=e.replace(/^\//,"").replace(/\//g,".");if(e.indexOf("@")>=0)return e.replace(/\.?(@.*)/,t?"$1":'["$1"]');if(e.indexOf("text()")>=0)return e.replace(/(\.?text\(\))/,t?"#text":'["#text"]');return e},getter:function(e){return t(this.xpathToMember(e),true)}});return r.extend(true,f.data,{XmlDataReader:e,readers:{xml:e}}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.data.min",["kendo.core.min","kendo.data.odata.min","kendo.data.xml.min"],function(){var e={id:"data",name:"Data source",category:"framework",description:"Powerful component for using local and remote data.Fully supports CRUD, Sorting, Paging, Filtering, Grouping, and Aggregates.",depends:["core"],features:[{id:"data-odata",name:"OData",description:"Support for accessing Open Data Protocol (OData) services.",depends:["data.odata"]},{id:"data-signalr",name:"SignalR",description:"Support for binding to SignalR hubs.",depends:["data.signalr"]},{id:"data-XML",name:"XML",description:"Support for binding to XML.",depends:["data.xml"]}]},m=window.kendo.jQuery,T=void 0,v=m.extend,w=m.isPlainObject,x=m.isEmptyObject,c=Array.isArray,r=m.grep,t=m.ajax,k,C=m.each,S=m.noop,_=window.kendo,d=_.isFunction,o=_.Observable,i=_.Class,g="string",f="function",n="asc",a="create",s="read",l="update",h="destroy",p="change",A="sync",M="get",D="error",E="requestStart",I="progress",P="requestEnd",B="itemsLoaded",O="itemLoad",z=[a,s,l,h],L=function(e){return e},R=_.getter,F=_.stringify,y=Math,V=[].push,N,H=[].pop,U=[].splice,j=[].shift,G=[].slice,W=[].unshift,q={}.toString,Y=_.support.stableSort,$=/^\/Date\((.*?)\)\/$/,X=[],K=o.extend({init:function(e,t){var i=this;i.type=t||u;o.fn.init.call(i);i.length=e.length;i.wrapAll(e,i);i._loadPromises=[];i._loadedNodes=[]},at:function(e){return this[e]},toJSON:function(e){var t,i=this.length,n,r=new Array(i);for(t=0;t<i;t++){n=this[t];if(n instanceof u)n=n.toJSON(e);r[t]=n}return r},parent:S,wrapAll:function(e,t){var i=this,n,r,a=function(){return i};t=t||[];for(n=0,r=e.length;n<r;n++)t[n]=i.wrap(e[n],a);return t},wrap:function(i,e){var n=this,t;if(i!==null&&q.call(i)==="[object Object]"){t=i instanceof n.type||i instanceof ae;if(!t){i=i instanceof u?i.toJSON():i;i=new n.type(i)}i.parent=e;i.bind(p,function(e){var t=i.hasOwnProperty("hasSubgroups");n.trigger(p,{field:e.field,node:e.node,index:e.index,items:e.items||[this],action:e.node||t?e.action||"itemloaded":"itemchange"})});i.bind(O,function(t){n._loadPromises.push(t.promise);n._loading=true;t.promise.done(function(){n._loadedNodes.push(t.node);var e=n._loadPromises.indexOf(t.promise);n._loadPromises.splice(e,1);if(!n._loadPromises.length){n._loading=false;n.trigger(B,{collection:n,nodes:n._loadedNodes});n._loadedNodes=[]}})})}return i},loading:function(){return this._loading},push:function(){var e=this.length,t=this.wrapAll(arguments),i;i=V.apply(this,t);if(!this.omitChangeEvent)this.trigger(p,{action:"add",index:e,items:t});return i},slice:G,sort:[].sort,join:[].join,pop:function(){var e=this.length,t=H.apply(this);if(e)this.trigger(p,{action:"remove",index:e-1,items:[t]});return t},splice:function(e,t,i){var n=this.wrapAll(G.call(arguments,2)),r,a,o;r=U.apply(this,[e,t].concat(n));if(r.length){if(!this.omitChangeEvent)this.trigger(p,{action:"remove",index:e,items:r});for(a=0,o=r.length;a<o;a++)if(r[a]&&r[a].children)r[a].unbind(p)}if(i)if(!this.omitChangeEvent)this.trigger(p,{action:"add",index:e,items:n});return r},shift:function(){var e=this.length,t=j.apply(this);if(e)this.trigger(p,{action:"remove",index:0,items:[t]});return t},unshift:function(){var e=this.wrapAll(arguments),t;t=W.apply(this,e);this.trigger(p,{action:"add",index:0,items:e});return t},indexOf:function(e){var t=this,i,n;for(i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},forEach:function(e,t){var i=0;var n=this.length;var r=t||window;for(;i<n;i++)e.call(r,this[i],i,this)},map:function(e,t){var i=0;var n=[];var r=this.length;var a=t||window;for(;i<r;i++)n[i]=e.call(a,this[i],i,this);return n},reduce:function(e){var t=0,i,n=this.length;if(arguments.length==2)i=arguments[1];else if(t<n)i=this[t++];for(;t<n;t++)i=e(i,this[t],t,this);return i},reduceRight:function(e){var t=this.length-1,i;if(arguments.length==2)i=arguments[1];else if(t>0)i=this[t--];for(;t>=0;t--)i=e(i,this[t],t,this);return i},filter:function(e,t){var i=0;var n=[];var r;var a=this.length;var o=t||window;for(;i<a;i++){r=this[i];if(e.call(o,r,i,this))n[n.length]=r}return n},find:function(e,t){var i=0;var n;var r=this.length;var a=t||window;for(;i<r;i++){n=this[i];if(e.call(a,n,i,this))return n}},every:function(e,t){var i=0;var n;var r=this.length;var a=t||window;for(;i<r;i++){n=this[i];if(!e.call(a,n,i,this))return false}return true},some:function(e,t){var i=0;var n;var r=this.length;var a=t||window;for(;i<r;i++){n=this[i];if(e.call(a,n,i,this))return true}return false},remove:function(e){var t=this.indexOf(e);if(t!==-1)this.splice(t,1)},empty:function(){this.splice(0,this.length)}});if(typeof Symbol!=="undefined"&&Symbol.iterator&&!K.prototype[Symbol.iterator])K.prototype[Symbol.iterator]=[][Symbol.iterator];var Q=K.extend({init:function(e,t,i){var n=function(){return this};o.fn.init.call(this);this.type=t||u;if(i)this._events=i;for(var r=0;r<e.length;r++)this[r]=e[r];this.length=r;this._parent=n.bind(this)},at:function(e){var t=this[e];if(!(t instanceof this.type))t=this[e]=this.wrap(t,this._parent);else t.parent=this._parent;return t}});function Z(n,r,a,o){return function(e){var t={},i;for(i in e)t[i]=e[i];if(o)t.field=a+"."+e.field;else t.field=a;if(r==p&&n._notifyChange)n._notifyChange(t);n.trigger(r,t)}}function J(e){return typeof e==="object"&&Object.getPrototypeOf(e)===Object.getPrototypeOf({})||Object.getPrototypeOf(e)===Object.getPrototypeOf(new Date)||typeof e!=="object"}function ee(e,t){var i=[];var n=[];var r,a;e=e||{};if(!J(e))n=Object.getOwnPropertyNames(Object.getPrototypeOf(e));r=Object.getOwnPropertyNames(e).concat(n);a=X.filter(function(e){return r.indexOf(e)<0});while(e){Object.getOwnPropertyNames(e).forEach(function(e){if(i.indexOf(e)===-1&&(!t||a.indexOf(e)<0))i.push(e)});e=Object.getPrototypeOf(e)}return i}X=ee({},false);var u=o.extend({init:function(t){var i=this,n,e=ee(t,true),r=function(){return i};o.fn.init.call(this);this._handlers={};e.forEach(function(e){n=t[e];if(typeof n==="object"&&n&&!n.getTime&&e.charAt(0)!="_")n=i.wrap(n,e,r);i[e]=n});i.uid=_.guid()},shouldSerialize:function(e,t){return this.hasOwnProperty(e)&&e!=="_handlers"&&e!=="_events"&&(t&&t[e]||typeof this[e]!==f)&&e!=="uid"},forEach:function(e){for(var t in this)if(this.shouldSerialize(t))e(this[t],t)},toJSON:function(e){var t={},i,n;for(n in this)if(this.shouldSerialize(n,e)){i=this[n];if(i instanceof u||i instanceof K)i=i.toJSON(e);t[n]=i}return t},get:function(e){var t=this,i;t.trigger(M,{field:e});if(e==="this")i=t;else i=_.getter(e,true)(t);return i},_set:function(e,t){var i=this;var n=e.indexOf(".")>=0;if(n){var r=e.split("."),a="";while(r.length>1){a+=r.shift();var o=_.getter(a,true)(i);if(o instanceof u){o.set(r.join("."),t);return n}a+="."}}_.setter(e)(i,t);return n},set:function(e,t){var i=this,n=false,r=e.indexOf(".")>=0,a=_.getter(e,true)(i);if(a!==t){if(a instanceof o&&this._handlers[e]){if(this._handlers[e].get)a.unbind(M,this._handlers[e].get);a.unbind(p,this._handlers[e].change)}n=i.trigger("set",{field:e,value:t});if(!n){if(!r)t=i.wrap(t,e,function(){return i});if(!i._set(e,t)||e.indexOf("(")>=0||e.indexOf("[")>=0)i.trigger(p,{field:e})}}return n},parent:S,wrap:function(e,t,i){var n=this;var r;var a;var o=q.call(e);if(e!=null&&(o==="[object Object]"||o==="[object Array]")){var s=e instanceof K;var l=e instanceof Je;if(o==="[object Object]"&&!l&&!s){if(!(e instanceof u))e=new u(e);r=Z(n,M,t,true);e.bind(M,r);a=Z(n,p,t,true);e.bind(p,a);n._handlers[t]={get:r,change:a}}else if(o==="[object Array]"||s||l){if(!s&&!l)e=new K(e);a=Z(n,p,t,false);e.bind(p,a);n._handlers[t]={change:a}}e.parent=i}return e}});function te(e,t){if(e===t)return true;var i=_.type(e),n=_.type(t),r;if(i!==n)return false;if(i==="date")return e.getTime()===t.getTime();if(i!=="object"&&i!=="array")return false;for(r in e)if(!te(e[r],t[r]))return false;return true}var ie={number:function(e){if(typeof e===g&&e.toLowerCase()==="null")return null;return _.parseFloat(e)},date:function(e){if(typeof e===g&&e.toLowerCase()==="null")return null;return _.parseDate(e)},boolean:function(e){if(typeof e===g)if(e.toLowerCase()==="null")return null;else return e.toLowerCase()==="true";return e!=null?!!e:e},string:function(e){if(typeof e===g&&e.toLowerCase()==="null")return null;return e!=null?e+"":e},default:function(e){return e}},ne={string:"",number:0,date:new Date,boolean:false,default:""};function re(e,t){var i,n;for(n in e){i=e[n];if(w(i)&&i.field&&i.field===t)return i;else if(i===t)return i}return null}var ae=u.extend({init:function(e){var t=this;if(!e||m.isEmptyObject(e)){e=m.extend({},t.defaults,e);if(t._initializers)for(var i=0;i<t._initializers.length;i++){var n=t._initializers[i];e[n]=t.defaults[n]()}}u.fn.init.call(t,e);t.dirty=false;t.dirtyFields={};if(t.idField){t.id=t.get(t.idField);if(t.id===T)t.id=t._defaultId}},shouldSerialize:function(e){return u.fn.shouldSerialize.call(this,e)&&e!=="uid"&&!(this.idField!=="id"&&e==="id")&&e!=="dirty"&&e!=="dirtyFields"&&e!=="_accessors"},_parse:function(e,t){var i=this,n=e,r=i.fields||{},a;e=r[e];if(!e)e=re(r,n);if(e){a=e.parse;if(!a&&e.type)a=ie[e.type.toLowerCase()]}return a?a(t):t},_notifyChange:function(e){var t=e.action;if(t=="add"||t=="remove"){this.dirty=true;this.dirtyFields[e.field]=true}},editable:function(e){e=(this.fields||{})[e];return e?e.editable!==false:true},set:function(e,t){var i=this;var n=i.dirty;if(i.editable(e)){t=i._parse(e,t);if(!te(t,i.get(e))){i.dirty=true;i.dirtyFields[e]=true;if(u.fn.set.call(i,e,t)&&!n){i.dirty=n;if(!i.dirty)i.dirtyFields[e]=false}}else i.trigger("equalSet",{field:e,value:t})}},accept:function(e){var t=this,i=function(){return t},n;for(n in e){var r=e[n];if(n.charAt(0)!="_")r=t.wrap(e[n],n,i);t._set(n,r)}if(t.idField)t.id=t.get(t.idField);t.dirty=false;t.dirtyFields={}},isNew:function(){return this.id===this._defaultId}}),oe=(ae.define=function(e,t){if(t===T){t=e;e=ae}var i,n=v({defaults:{}},t),r,a,c,o,s,h,f={},l,u=n.id,d=[];if(u)n.idField=u;if(n.id)delete n.id;if(u)n.defaults[u]=n._defaultId="";if(q.call(n.fields)==="[object Array]"){for(s=0,h=n.fields.length;s<h;s++){a=n.fields[s];if(typeof a===g)f[a]={};else if(a.field)f[a.field]=a}n.fields=f}for(r in n.fields){a=n.fields[r];c=a.type||"default";o=null;l=r;r=typeof a.field===g?a.field:r;if(!a.nullable){o=n.defaults[l!==r?l:r]=a.defaultValue!==T?a.defaultValue:ne[c.toLowerCase()];if(typeof o==="function")d.push(r)}if(t.id===r)n._defaultId=o;n.defaults[l!==r?l:r]=o;a.parse=a.parse||ie[c]}if(d.length>0)n._initializers=d;i=e.extend(n);i.define=function(e){return ae.define(i,e)};if(n.fields){i.fields=n.fields;i.idField=n.idField}return i},{selector:function(e){return d(e)?e:R(e)},compare:function(e){var i=this.selector(e);return function(e,t){e=i(e);t=i(t);if(e==null&&t==null)return 0;if(e==null)return-1;if(t==null)return 1;if(e.localeCompare)return e.localeCompare(t);return e>t?1:e<t?-1:0}},create:function(e){var i=e.compare||this.compare(e.field);if(e.dir=="desc")return function(e,t){return i(t,e,true)};return i},combine:function(a){return function(e,t){var i=a[0](e,t),n,r;for(n=1,r=a.length;n<r;n++)i=i||a[n](e,t);return i}}}),se=v({},oe,{asc:function(e){var r=this.selector(e);return function(e,t){var i=r(e);var n=r(t);if(i&&i.getTime&&n&&n.getTime){i=i.getTime();n=n.getTime()}if(i===n)return e.__position-t.__position;if(i==null)return-1;if(n==null)return 1;if(i.localeCompare)return i.localeCompare(n);return i>n?1:-1}},desc:function(e){var r=this.selector(e);return function(e,t){var i=r(e);var n=r(t);if(i&&i.getTime&&n&&n.getTime){i=i.getTime();n=n.getTime()}if(i===n)return e.__position-t.__position;if(i==null)return 1;if(n==null)return-1;if(n.localeCompare)return n.localeCompare(i);return i<n?1:-1}},create:function(e){return this[e.dir](e.field)}}),le=(k=function(e,t){var i,n=e.length,r=new Array(n);for(i=0;i<n;i++)r[i]=t(e[i],i,e);return r},function(){function o(e){if(typeof e=="string")e=e.replace(/[\r\n]+/g,"");return JSON.stringify(e)}function e(r){return function(e,t,i,n){t+="";if(i){e="("+e+" + '').toString()"+(n?".toLocaleLowerCase('"+n+"')":".toLowerCase()");t=n?t.toLocaleLowerCase(n):t.toLowerCase()}return r(e,o(t),i)}}function r(e,t,i,n,r){if(i!=null){if(typeof i===g){var a=$.exec(i);if(a)i=new Date(+a[1]);else if(n){i=o(r?i.toLocaleLowerCase(r):i.toLowerCase());t="(("+t+" || '')+'')"+(r?".toLocaleLowerCase('"+r+"')":".toLowerCase()")}else i=o(i)}if(i.getTime){t="("+t+"&&"+t+".getTime?"+t+".getTime():"+t+")";i=i.getTime()}}return t+" "+e+" "+i}function i(e){for(var t="/^",i=false,n=0;n<e.length;++n){var r=e.charAt(n);if(i)t+="\\"+r;else if(r=="~"){i=true;continue}else if(r=="*")t+=".*";else if(r=="?")t+=".";else if(".+^$()[]{}|\\/\n\r\u2028\u2029".indexOf(r)>=0)t+="\\"+r;else t+=r;i=false}return t+"$/"}return{quote:function(e){if(e&&e.getTime)return"new Date("+e.getTime()+")";return o(e)},eq:function(e,t,i,n){return r("==",e,t,i,n)},neq:function(e,t,i,n){return r("!=",e,t,i,n)},gt:function(e,t,i){return r(">",e,t,i)},gte:function(e,t,i){return r(">=",e,t,i)},lt:function(e,t,i){return r("<",e,t,i)},lte:function(e,t,i){return r("<=",e,t,i)},startswith:e(function(e,t){return e+".lastIndexOf("+t+", 0) == 0"}),doesnotstartwith:e(function(e,t){return e+".lastIndexOf("+t+", 0) == -1"}),endswith:e(function(e,t){var i=t?t.length-2:0;return e+".indexOf("+t+", "+e+".length - "+i+") >= 0"}),doesnotendwith:e(function(e,t){var i=t?t.length-2:0;return e+".indexOf("+t+", "+e+".length - "+i+") < 0"}),contains:e(function(e,t){return e+".indexOf("+t+") >= 0"}),doesnotcontain:e(function(e,t){return e+".indexOf("+t+") == -1"}),matches:e(function(e,t){t=t.substring(1,t.length-1);return i(t)+".test("+e+")"}),doesnotmatch:e(function(e,t){t=t.substring(1,t.length-1);return"!"+i(t)+".test("+e+")"}),isempty:function(e){return e+" === ''"},isnotempty:function(e){return e+" !== ''"},isnull:function(e){return"("+e+" == null)"},isnotnull:function(e){return"("+e+" != null)"},isnullorempty:function(e){return"("+e+" === null) || ("+e+" === '')"},isnotnullorempty:function(e){return"("+e+" !== null) && ("+e+" !== '')"}}}());function b(e){this.data=e||[]}function ue(e,t){if(e){var i=typeof e===g?{field:e,dir:t}:e,n=c(i)?i:i!==T?[i]:[];return r(n,function(e){return!!e.dir})}}function ce(e,t){var i={};if(e){var n=typeof e===g?{field:e,dir:t}:e,r=c(n)?n:n!==T?[n]:[];for(var a=0;a<r.length;a++)i[r[a].field]={dir:r[a].dir,index:a+1}}return i}b.filterExpr=function(e){var t=[],c={and:" && ",or:" || "},i,n,r,a,o=[],s=[],l,u,h=e.filters;for(i=0,n=h.length;i<n;i++){r=h[i];l=r.field;u=r.operator;if(r.filters){a=b.filterExpr(r);r=a.expression.replace(/__o\[(\d+)\]/g,function(e,t){t=+t;return"__o["+(s.length+t)+"]"}).replace(/__f\[(\d+)\]/g,function(e,t){t=+t;return"__f["+(o.length+t)+"]"});s.push.apply(s,a.operators);o.push.apply(o,a.fields)}else{if(typeof l===f){a="__f["+o.length+"](d)";o.push(l)}else a=_.expr(l);if(typeof u===f){r="__o["+s.length+"]("+a+", "+le.quote(r.value)+")";s.push(u)}else r=le[(u||"eq").toLowerCase()](a,r.value,r.ignoreCase!==T?r.ignoreCase:true,e.accentFoldingFiltering)}t.push(r)}return{expression:"("+t.join(c[e.logic])+")",fields:o,operators:s}};var he={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain",isnull:"isnull",isempty:"isempty",isnotempty:"isnotempty"};function fe(e){var t,i,n,r,a=e.filters;if(a)for(t=0,i=a.length;t<i;t++){n=a[t];r=n.operator;if(r&&typeof r===g)n.operator=he[r.toLowerCase()]||r;fe(n)}}function de(e){if(e&&!x(e)){if(c(e)||!e.filters)e={logic:"and",filters:c(e)?e:[e]};fe(e);return e}}function pe(e,t){if(e.logic||t.logic)return false;return e.field===t.field&&e.value===t.value&&e.operator===t.operator}function ve(e){e=e||{};if(x(e))return{logic:"and",filters:[]};return de(e)}function ge(e,t){if(t.logic||e.field>t.field)return 1;else if(e.field<t.field)return-1;else return 0}function me(e,t){e=ve(e);t=ve(t);if(e.logic!==t.logic)return false;var i,n;var r=(e.filters||[]).slice();var a=(t.filters||[]).slice();if(r.length!==a.length)return false;r=r.sort(ge);a=a.sort(ge);for(var o=0;o<r.length;o++){i=r[o];n=a[o];if(i.logic&&n.logic){if(!me(i,n))return false}else if(!pe(i,n))return false}return true}function _e(e){return c(e)?e:[e]}function ye(e,t,i,n){var r=typeof e===g?{field:e,dir:t,compare:i,skipItemSorting:n}:e,a=c(r)?r:r!==T?[r]:[];return k(a,function(e){return{field:e.field,dir:e.dir||"asc",aggregates:e.aggregates,compare:e.compare,skipItemSorting:e.skipItemSorting}})}function be(e,t,i){var n=ye(e,t,i);for(var r=0;r<n.length;r++)delete n[r].compare;return n}function we(e){var t=c(e)?e:[e];for(var i=0;i<t.length;i++)if(t[i]&&d(t[i].compare))return true;return false}function xe(e,t){if(e&&e.getTime&&t&&t.getTime)return e.getTime()===t.getTime();return e===t}function ke(e,t,i,n,r,a){t=t||[];var o,s,l,c=t.length;for(o=0;o<c;o++){s=t[o];l=s.aggregate;var u=s.field;e[u]=e[u]||{};a[u]=a[u]||{};a[u][l]=a[u][l]||{};e[u][l]=Ce[l.toLowerCase()](e[u][l],i,_.accessor(u),n,r,a[u][l])}}b.normalizeFilter=de,b.compareFilters=me,b.prototype={toArray:function(){return this.data},range:function(e,t){return new b(this.data.slice(e,e+t))},skip:function(e){return new b(this.data.slice(e))},take:function(e){return new b(this.data.slice(0,e))},select:function(e){return new b(k(this.data,e))},order:function(e,t,i){var n={dir:t};if(e)if(e.compare)n.compare=e.compare;else n.field=e;if(i)return new b(this.data.sort(oe.create(n)));return new b(this.data.slice(0).sort(oe.create(n)))},orderBy:function(e,t){return this.order(e,"asc",t)},orderByDescending:function(e,t){return this.order(e,"desc",t)},sort:function(e,t,i,n){var r,a,o=ue(e,t),s=[];i=i||oe;if(o.length){for(r=0,a=o.length;r<a;r++)s.push(i.create(o[r]));return this.orderBy({compare:i.combine(s)},n)}return this},filter:function(e){var t,i,n,r,a,o=this.data,s,l,c=[],u;e=de(e);if(!e||e.filters.length===0)return this;r=b.filterExpr(e);s=r.fields;l=r.operators;a=u=new Function("d, __f, __o","return "+r.expression);if(s.length||l.length)u=function(e){return a(e,s,l)};for(t=0,n=o.length;t<n;t++){i=o[t];if(u(i))c.push(i)}return new b(c)},group:function(n,r,a){n=ye(n||[]);r=r||this.data;var e=this,t=new b(e.data),o;if(n.length>0){o=n[0];if(a&&a.groupPaging)t=new b(r).groupAllData(o,r).select(function(e){var t=new b(r).filter([{field:e.field,operator:"eq",value:e.value,ignoreCase:false}]);var i=n.length>1?new b(e.items).group(n.slice(1),t.toArray(),a).toArray():e.items;return{field:e.field,value:e.value,hasSubgroups:n.length>1,items:i,aggregates:t.aggregate(o.aggregates),uid:_.guid(),itemCount:i.length,subgroupCount:i.length}});else t=t.groupBy(o).select(function(e){var t=new b(r).filter([{field:e.field,operator:"eq",value:e.value,ignoreCase:false}]);return{field:e.field,value:e.value,items:n.length>1?new b(e.items).group(n.slice(1),t.toArray()).toArray():e.items,hasSubgroups:n.length>1,aggregates:t.aggregate(o.aggregates)}})}return t},groupBy:function(e){var c=this;if(x(e)||!this.data.length)return new b([]);var t=e.field,i=e.skipItemSorting?this.data:this._sortForGrouping(t,e.dir||"asc"),n=_.accessor(t),r,a=n.get(i[0],t),o={field:t,value:a,items:[]},s,l,h,u=[o];for(l=0,h=i.length;l<h;l++){r=i[l];s=n.get(r,t);if(!xe(a,s)){a=s;o={field:t,value:a,items:[]};u.push(o)}o.items.push(r)}u=c._sortGroups(u,e);return new b(u)},groupAllData:function(e,t){if(x(e)||this.data&&!this.data.length)return new b([]);var i=e.field,n=e.skipItemSorting?t:new b(t).sort(i,e.dir||"asc",se).toArray(),c=_.accessor(i),r,a=c.get(n[0],i),o={field:i,value:a,items:[]},s,l,h,u=[o];for(l=0,h=n.length;l<h;l++){r=n[l];s=c.get(r,i);if(!xe(a,s)){a=s;o={field:i,value:a,items:[]};u.push(o)}o.items.push(r)}u=this._sortGroups(u,e);return new b(u)},_sortForGrouping:function(e,t){var i,n,r=this.data;if(!Y){for(i=0,n=r.length;i<n;i++)r[i].__position=i;r=new b(r).sort(e,t,se).toArray();for(i=0,n=r.length;i<n;i++)delete r[i].__position;return r}return this.sort(e,t).toArray()},_sortGroups:function(e,t){var i=e;if(t&&d(t.compare))i=new b(i).order({compare:t.compare},t.dir||n).toArray();return i},aggregate:function(e){var t,i,n={},r={};if(e&&e.length)for(t=0,i=this.data.length;t<i;t++)ke(n,e,this.data[t],t,i,r);return n}};var Ce={sum:function(e,t,i){var n=i.get(t);if(!Se(e))e=n;else if(Se(n))e+=n;return e},count:function(e){return(e||0)+1},average:function(e,t,i,n,r,a){var o=i.get(t);if(a.count===T)a.count=0;if(!Se(e))e=o;else if(Se(o))e+=o;if(Se(o))a.count++;if(n==r-1&&Se(e))e=e/a.count;return e},max:function(e,t,i){var n=i.get(t);if(!Se(e)&&!Te(e))e=n;if(e<n&&(Se(n)||Te(n)))e=n;return e},min:function(e,t,i){var n=i.get(t);if(!Se(e)&&!Te(e))e=n;if(e>n&&(Se(n)||Te(n)))e=n;return e}};function Se(e){return typeof e==="number"&&!isNaN(e)}function Te(e){return e&&e.getTime}function Ae(e){var t,i=e.length,n=new Array(i);for(t=0;t<i;t++)n[t]=e[t].toJSON();return n}b.normalizeGroup=ye,b.normalizeSort=ue,b.process=function(e,t,i){t=t||{};var n=t.group;var r=we(ye(n||[]));var a=new b(e),c=be(n||[]),h=ue(t.sort||[]),o=r?h:c.concat(h),f,s,d=t.filterCallback,p=t.filter,l=t.skip,u=t.take;if(o&&i)a=a.sort(o,T,T,i);if(p){a=a.filter(p);if(d)a=d(a);s=a.toArray().length}if(o){if(!i)a=a.sort(o);if(n)e=a.toArray()}if(r){a=a.group(n,e,t);if(l!==T&&u!==T&&!t.groupPaging){a=new b(Ve(a.toArray())).range(l,u);f=k(c,function(e){return v({},e,{skipItemSorting:true})});a=a.group(f,e,t)}}else{if(l!==T&&u!==T){s=a.data.length;if(l+u>s&&t.virtual){l-=l+u-s;l=l<0?0:l}a=a.range(l,u)}if(n&&(!x(n)||n.length!==0))a=a.group(n,e,t)}return{total:s,data:a.toArray()}};var Me=i.extend({init:function(e){this.data=e.data},read:function(e){e.success(this.data)},update:function(e){e.success(e.data)},create:function(e){e.success(e.data)},destroy:function(e){e.success(e.data)}}),De=i.extend({init:function(i){var e=this,n;i=e.options=v({},e.options,i);C(z,function(e,t){if(typeof i[t]===g)i[t]={url:i[t]}});e.cache=i.cache?Ee.create(i.cache):{find:S,add:S};n=i.parameterMap;if(i.submit)e.submit=i.submit;if(d(i.push))e.push=i.push;if(!e.push)e.push=L;e.parameterMap=d(n)?n:function(e){var i={};C(e,function(e,t){if(e in n){e=n[e];if(w(e)){t=e.value(t);e=e.key}}i[e]=t});return i}},options:{parameterMap:L},create:function(e){return t(this.setup(e,a))},read:function(t){var e=this,i,n,r,a=e.cache;t=e.setup(t,s);i=t.success||S;n=t.error||S;r=a.find(t.data);if(r!==T)i(r);else{t.success=function(e){a.add(t.data,e);i(e)};m.ajax(t)}},update:function(e){return t(this.setup(e,l))},destroy:function(e){return t(this.setup(e,h))},setup:function(e,t){e=e||{};var i=this,n,r=i.options[t],a=d(r.data)?r.data(e.data):r.data;e=v(true,{},r,e);n=v(true,{},a,e.data);e.data=i.parameterMap(n,t);if(d(e.url))e.url=e.url(n);return e}}),Ee=i.extend({init:function(){this._store={}},add:function(e,t){if(e!==T)this._store[F(e)]=t},find:function(e){return this._store[F(e)]},clear:function(){this._store={}},remove:function(e){delete this._store[F(e)]}});function Ie(e,t,u,c,i){var n,r,a,o,s={},l;for(o=0,l=e.length;o<l;o++){n=e[o];for(r in t){a=i[r];if(a&&a!==r){if(!s[a])s[a]=_.setter(a);s[a](n,t[r](n));delete n[r]}}}}function Pe(e,t,i,u,n){var r,a,o,s,l;for(s=0,l=e.length;s<l;s++){r=e[s];for(a in t){r[a]=i._parse(a,t[a](r));o=n[a];if(o&&o!==a)delete r[o]}}}function Be(e,t,i,n,r){var a,o,s,l;for(o=0,l=e.length;o<l;o++){a=e[o];s=n[a.field];if(s&&s!=a.field)a.field=s;a.value=i._parse(a.field,a.value);if(a.items)if(a.hasSubgroups)Be(a.items,t,i,n,r);else Pe(a.items,t,i,n,r)}}function Oe(t,i,n,r,a,o){return function(e){e=t(e);return ze(i,n,r,a,o)(e)}}function ze(t,i,n,r,a){return function(e){if(e&&!x(n)){if(q.call(e)!=="[object Array]"&&!(e instanceof K))e=[e];i(e,n,new t,r,a)}return e||[]}}Ee.create=function(e){var t={inmemory:function(){return new Ee}};if(w(e)&&d(e.find))return e;if(e===true)return new Ee;return t[e]()};var Le=i.extend({init:function(e){var t=this,i,n,r,c;e=e||{};for(i in e){n=e[i];t[i]=typeof n===g?R(n):n}c=e.modelBase||ae;if(w(t.model))t.model=r=c.define(t.model);var h=t.data.bind(t);t._dataAccessFunction=h;if(t.model){var f=t.groups.bind(t),d=t.serialize.bind(t),a={},o={},p={},s={},v=false,l,u;r=t.model;if(r.fields){C(r.fields,function(e,t){var i;l=e;if(w(t)&&t.field)l=t.field;else if(typeof t===g)l=t;if(w(t)&&t.from)i=t.from;v=v||i&&i!==e||l!==e;u=i||l;o[e]=u.indexOf(".")!==-1?R(u,true):R(u);p[e]=R(e);a[i||l]=e;s[e]=i||l});if(!e.serialize&&v)t.serialize=Oe(d,r,Ie,p,a,s)}t._dataAccessFunction=h;t._wrapDataAccessBase=ze(r,Pe,o,a,s);t.data=Oe(h,r,Pe,o,a,s);t.groups=Oe(f,r,Be,o,a,s)}},errors:function(e){return e?e.errors:null},parse:L,data:L,total:function(e){return e.length},groups:L,aggregates:function(){return{}},serialize:function(e){return e}});function Re(e,t){var i;var n;if(t.items&&t.items.length)for(var r=0;r<t.items.length;r++){i=e.items[e.items.length-1];n=t.items[r];if(i&&n)if(i.hasSubgroups&&i.value==n.value)Re(i,n);else if(i.field&&i.value==n.value){i.items.omitChangeEvent=true;i.items.push.apply(i.items,n.items);i.items.omitChangeEvent=false}else{e.items.omitChangeEvent=true;e.items.push.apply(e.items,[n]);e.items.omitChangeEvent=false}else if(n){e.items.omitChangeEvent=true;e.items.push.apply(e.items,[n]);e.items.omitChangeEvent=false}}}function Fe(e,t,i,n){var r,a=0,o;while(t.length&&n){r=t[a];o=r.items;var s=o.length;if(e&&e.field===r.field&&e.value===r.value){if(e.hasSubgroups&&e.items.length)Fe(e.items[e.items.length-1],r.items,i,n);else{o=o.slice(i,i+n);e.items=e.items.concat(o)}t.splice(a--,1)}else if(r.hasSubgroups&&o.length){Fe(r,o,i,n);if(!r.items.length)t.splice(a--,1)}else{o=o.slice(i,i+n);r.items=o;if(!r.items.length)t.splice(a--,1)}if(o.length===0)i-=s;else{i=0;n-=o.length}if(++a>=t.length)break}if(a<t.length)t.splice(a,t.length-a)}function Ve(e,t){var i=[];var n=(e||[]).length;var r;var a;var o=d(t)?t:function(e,t){return e[t]};for(var s=0;s<n;s++){r=o(e,s);if(r.hasSubgroups)i=i.concat(Ve(r.items));else{a=r.items;for(var l=0;l<a.length;l++)i.push(o(a,l))}}return i}function Ne(e){var t,i=[],n,r,a;for(t=0,n=e.length;t<n;t++){var o=e.at(t);if(o.items)if(o.hasSubgroups)i=i.concat(Ne(o.items));else{r=o.items;for(a=0;a<r.length;a++)i.push(r.at(a))}}return i}function He(e,t){var i,n,r;if(t)for(i=0,n=e.length;i<n;i++){r=e.at(i);if(r.items)if(r.hasSubgroups)He(r.items,t);else r.items=new Q(r.items,t,r.items._events)}}function Ue(e,t){for(var i=0;i<e.length;i++)if(e[i].hasSubgroups){if(Ue(e[i].items,t))return true}else if(t(e[i].items,e[i]))return true}function je(e,t,i,n){for(var r=0;r<e.length;r++){if(e[r].data===t)break;if(Ge(e[r].data,i,n))break}}function Ge(e,t,i){for(var n=0,r=e.length;n<r;n++)if(e[n]&&e[n].hasSubgroups)return Ge(e[n].items,t,i);else if(e[n]===t||e[n]===i){e[n]=i;return true}}function We(e,t,i,n,r){for(var a=0,o=e.length;a<o;a++){var s=e[a];if(!s||s instanceof n)continue;if(s.hasSubgroups!==T&&!r)We(s.items,t,i,n,r);else for(var l=0;l<t.length;l++)if(t[l]===s){e[a]=t.at(l);je(i,t,s,e[a]);break}}}function qe(e,t){if(!e)return;var i=e.length;var n;var r;for(r=0;r<i;r++){n=e[r];if(n.uid&&n.uid==t.uid){e.splice(r,1);return n}}}function Ye(e,t){if(t)return Xe(e,function(e){return e.uid&&e.uid==t.uid||e[t.idField]===t.id&&t.id!==t._defaultId});return-1}function $e(e,t){if(t)return Xe(e,function(e){return e.uid==t.uid});return-1}function Xe(e,t){var i,n;if(!e)return;for(i=0,n=e.length;i<n;i++)if(t(e[i]))return i;return-1}function Ke(e,t){if(e&&!x(e)){var i=e[t];var n;if(w(i))n=i.from||i.field||t;else n=e[t]||t;if(d(n))return t;return n}return t}function Qe(e,t){var i,n,r={};for(var a in e)if(a!=="filters")r[a]=e[a];if(e.filters){r.filters=[];for(i=0,n=e.filters.length;i<n;i++)r.filters[i]=Qe(e.filters[i],t)}else r.field=Ke(t.fields,r.field);return r}function Ze(e,t){var i,n,r=[],a,o;for(i=0,n=e.length;i<n;i++){a={};o=e[i];for(var s in o)a[s]=o[s];a.field=Ke(t.fields,a.field);if(a.aggregates&&c(a.aggregates))a.aggregates=Ze(a.aggregates,t);r.push(a)}return r}var Je=o.extend({init:function(e){var t=this,i,n;if(e)n=e.data;e=t.options=v({},t.options,e);t._map={};t._prefetch={};t._data=[];t._pristineData=[];t._ranges=[];t._view=[];t._pristineTotal=0;t._destroyed=[];t._pageSize=e.pageSize;t._page=e.page||(e.pageSize?1:T);t._sort=ue(e.sort);t._sortFields=ce(e.sort);t._filter=de(e.filter);t._group=ye(e.group);t._aggregate=e.aggregate;t._total=e.total;t._groupPaging=e.groupPaging;if(t._groupPaging)t._groupsState={};t._shouldDetachObservableParents=true;o.fn.init.call(t);t.transport=et.create(e,n,t);if(d(t.transport.push))t.transport.push({pushCreate:t._pushCreate.bind(t),pushUpdate:t._pushUpdate.bind(t),pushDestroy:t._pushDestroy.bind(t)});if(e.offlineStorage!=null)if(typeof e.offlineStorage=="string"){var r=e.offlineStorage;t._storage={getItem:function(){return JSON.parse(localStorage.getItem(r))},setItem:function(e){localStorage.setItem(r,F(t.reader.serialize(e)))}}}else t._storage=e.offlineStorage;t.reader=new _.data.readers[e.schema.type||"json"](e.schema);i=t.reader.model||{};t._detachObservableParents();t._data=t._observe(t._data);t._online=true;t.bind(["push",D,p,E,A,P,I],e)},options:{data:null,schema:{modelBase:ae},offlineStorage:null,serverSorting:false,serverPaging:false,serverFiltering:false,serverGrouping:false,serverAggregates:false,batch:false,inPlaceSort:false},clone:function(){return this},online:function(e){if(e!==T){if(this._online!=e){this._online=e;if(e)return this.sync()}return m.Deferred().resolve().promise()}else return this._online},offlineData:function(e){if(this.options.offlineStorage==null)return null;if(e!==T)return this._storage.setItem(e);return this._storage.getItem()||[]},_isServerGrouped:function(){var e=this.group()||[];return this.options.serverGrouping&&e.length},_isServerGroupPaged:function(){return this._isServerGrouped()&&this._groupPaging},_isGroupPaged:function(){var e=this._group||[];return this._groupPaging&&e.length},_pushCreate:function(e){this._push(e,"pushCreate")},_pushUpdate:function(e){this._push(e,"pushUpdate")},_pushDestroy:function(e){this._push(e,"pushDestroy")},_push:function(e,t){var i=this._readData(e);if(!i)i=e;this[t](i)},_flatData:function(e,t){if(e){if(this._isServerGrouped())return Ne(e);if(!t)for(var i=0;i<e.length;i++)e.at(i)}return e},parent:S,get:function(e){var t,i,n=this._flatData(this._data,this.options.useRanges);for(t=0,i=n.length;t<i;t++)if(n[t].id==e)return n[t]},getByUid:function(e){return this._getByUid(e,this._data)},_getByUid:function(e,t){var i,n,r=this._flatData(t,this.options.useRanges);if(!r)return;for(i=0,n=r.length;i<n;i++)if(r[i].uid==e)return r[i]},indexOf:function(e){return $e(this._data,e)},at:function(e){return this._data.at(e)},data:function(e){var t=this;if(e!==T){t._detachObservableParents();t._data=this._observe(e);t._pristineData=e.slice(0);t._storeData();t._ranges=[];t.trigger("reset");t._addRange(t._data);t._total=t._data.length;t._pristineTotal=t._total;t._process(t._data)}else{if(t._data)for(var i=0;i<t._data.length;i++)t._data.at(i);return t._data}},view:function(e){if(e===T)return this._view;else this._view=this._observeView(e)},_observeView:function(e){var t=this;We(e,t._data,t._ranges,t.reader.model||u,t._isServerGrouped());var i=new Q(e,t.reader.model);i.parent=function(){return t.parent()};return i},flatView:function(){var e=this.group()||[];if(e.length)return Ne(this._view);else return this._view},add:function(e){return this.insert(this._data.length,e)},_createNewModel:function(e){if(this.reader.model)return new this.reader.model(e);if(e instanceof u)return e;return new u(e)},insert:function(e,t){if(!t){t=e;e=0}if(!(t instanceof ae))t=this._createNewModel(t);if(this._isServerGrouped())this._data.splice(e,0,this._wrapInEmptyGroup(t));else this._data.splice(e,0,t);this._insertModelInRange(e,t);return t},pushInsert:function(e,t){var i=this;var n=i._getCurrentRangeSpan();if(!t){t=e;e=0}if(!c(t))t=[t];var r=[];var a=this.options.autoSync;this.options.autoSync=false;try{for(var o=0;o<t.length;o++){var s=t[o];var l=this.insert(e,s);r.push(l);var u=l.toJSON();if(this._isServerGrouped())u=this._wrapInEmptyGroup(u);this._pristineData.push(u);if(n&&n.length)m(n).last()[0].pristineData.push(u);e++}}finally{this.options.autoSync=a}if(r.length)this.trigger("push",{type:"create",items:r})},pushCreate:function(e){this.pushInsert(this._data.length,e)},pushUpdate:function(e){if(!c(e))e=[e];var t=[];for(var i=0;i<e.length;i++){var n=e[i];var r=this._createNewModel(n);var a=this.get(r.id);if(a){t.push(a);a.accept(n);a.trigger(p);this._updatePristineForModel(a,n)}else this.pushCreate(n)}if(t.length)this.trigger("push",{type:"update",items:t})},pushDestroy:function(e){var t=this._removeItems(e);if(t.length)this.trigger("push",{type:"destroy",items:t})},_removeItems:function(e,t){if(!c(e))e=[e];var i=typeof t!=="undefined"?t:true;var n=[];var r=this.options.autoSync;this.options.autoSync=false;try{for(var a=0;a<e.length;a++){var o=e[a];var s=this._createNewModel(o);var l=false;this._eachItem(this._data,function(e){for(var t=0;t<e.length;t++){var i=e.at(t);if(i.id===s.id){n.push(i);e.splice(t,1);l=true;break}}});if(l&&i){this._removePristineForModel(s);this._destroyed.pop()}}}finally{this.options.autoSync=r}return n},pushMove:function(e,t){var i=this._moveItems(e,t);if(i.length)this.trigger("push",{type:"update",items:i})},_moveItems:function(n,e){if(!c(e))e=[e];var r=[];var t=this.options.autoSync;this.options.autoSync=false;try{for(var i=0;i<e.length;i++){var a=e[i];var o=this._createNewModel(a);this._eachItem(this._data,function(e){for(var t=0;t<e.length;t++){var i=e.at(t);if(i.id===o.id){r.push(i);e.splice(n>=t?--n:n,0,e.splice(t,1)[0]);n++;break}}})}}finally{this.options.autoSync=t}return r},remove:function(t){var i,e=this,n=e._isServerGrouped();if(n&&t.uid&&(!t.isNew||!t.isNew()))e._pushInDestroyed(t);this._eachItem(e._data,function(e){i=qe(e,t);if(i&&n)return true});this._removeModelFromRanges(t);return t},destroyed:function(){return this._destroyed},created:function(){var e,t,i=[],n=this._flatData(this._data,this.options.useRanges);for(e=0,t=n.length;e<t;e++)if(n[e].isNew&&n[e].isNew())i.push(n[e]);return i},updated:function(){var e,t,i=[],n=this._flatData(this._data,this.options.useRanges);for(e=0,t=n.length;e<t;e++)if(n[e].isNew&&!n[e].isNew()&&n[e].dirty)i.push(n[e]);return i},sync:function(){var i=this,e=[],t=[],n=i._destroyed;var r=m.Deferred().resolve().promise();if(i.online()){if(!i.reader.model)return r;e=i.created();t=i.updated();var a=[];if(i.options.batch&&i.transport.submit)a=i._sendSubmit(e,t,n);else{a.push.apply(a,i._send("create",e));a.push.apply(a,i._send("update",t));a.push.apply(a,i._send("destroy",n))}r=m.when.apply(null,a).then(function(){var e,t;for(e=0,t=arguments.length;e<t;e++)if(arguments[e])i._accept(arguments[e]);i._storeData(true);i._syncEnd();i._change({action:"sync"});i.trigger(A);if(i._isServerGroupPaged())i.read()})}else{i._storeData(true);i._syncEnd();i._change({action:"sync"})}return r},_syncEnd:S,cancelChanges:function(e){var t=this;if(e instanceof _.data.Model)t._cancelModel(e);else{t._destroyed=[];t._detachObservableParents();t._data=t._observe(t._pristineData);if(t.options.serverPaging)t._total=t._pristineTotal;t._ranges=[];t._addRange(t._data,0);t._changesCanceled();t._change();t._markOfflineUpdatesAsDirty();if(t._isServerGrouped())t.read()}},_changesCanceled:S,_markOfflineUpdatesAsDirty:function(){var e=this;if(e.options.offlineStorage!=null)e._eachItem(e._data,function(e){for(var t=0;t<e.length;t++){var i=e.at(t);if(i.__state__=="update"||i.__state__=="create")i.dirty=true}})},hasChanges:function(){var e,t,i=this._flatData(this._data,this.options.useRanges);if(this._destroyed.length)return true;for(e=0,t=i.length;e<t;e++)if(i[e].isNew&&i[e].isNew()||i[e].dirty)return true;return false},_accept:function(e){var t=this,i=e.models,n=e.response,r=0,a=t._isServerGrouped(),o=t._pristineData,s=e.type,l;t.trigger(P,{response:n,type:s});if(n&&!x(n)){n=t.reader.parse(n);if(t._handleCustomErrors(n))return;n=t.reader.data(n);if(!c(n))n=[n]}else n=m.map(i,function(e){return e.toJSON()});if(s==="destroy")t._destroyed=[];for(r=0,l=i.length;r<l;r++)if(s!=="destroy"){i[r].accept(n[r]);if(s==="create")o.push(a?t._wrapInEmptyGroup(i[r].toJSON()):n[r]);else if(s==="update")t._updatePristineForModel(i[r],n[r])}else t._removePristineForModel(i[r])},_updatePristineForModel:function(e,i){this._executeOnPristineForModel(e,function(e,t){_.deepExtend(t[e],i)})},_executeOnPristineForModel:function(i,n){this._eachPristineItem(function(e){var t=Ye(e,i);if(t>-1){n(t,e);return true}})},_removePristineForModel:function(e){this._executeOnPristineForModel(e,function(e,t){t.splice(e,1)})},_readData:function(e){var t=!this._isServerGrouped()?this.reader.data:this.reader.groups;return t.call(this.reader,e)},_eachPristineItem:function(i){var n=this;var e=n.options;var t=n._getCurrentRangeSpan();n._eachItem(n._pristineData,i);if(e.serverPaging&&e.useRanges)C(t,function(e,t){n._eachItem(t.pristineData,i)})},_eachItem:function(e,t){if(e&&e.length)if(this._isServerGrouped())Ue(e,t);else t(e)},_pristineForModel:function(t){var i,n,e=function(e){n=Ye(e,t);if(n>-1){i=e[n];return true}};this._eachPristineItem(e);return i},_cancelModel:function(i){var n=this;var r=this._pristineForModel(i);this._eachItem(this._data,function(e){var t=$e(e,i);if(t>=0)if(r&&(!i.isNew()||r.__state__)){e[t].accept(r);if(r.__state__=="update")e[t].dirty=true}else{n._modelCanceled(i);e.splice(t,1);n._removeModelFromRanges(i)}})},_modelCanceled:S,_submit:function(r,e){var a=this;a.trigger(E,{type:"submit"});a.trigger(I);a.transport.submit(v({success:function(e,t){var i=m.grep(r,function(e){return e.type==t})[0];if(i)i.resolve({response:e,models:i.models,type:t})},error:function(e,t,i){for(var n=0;n<r.length;n++)r[n].reject(e);a.error(e,t,i)}},e))},_sendSubmit:function(t,i,n){var e=this,r=[];if(e.options.batch){if(t.length)r.push(m.Deferred(function(e){e.type="create";e.models=t}));if(i.length)r.push(m.Deferred(function(e){e.type="update";e.models=i}));if(n.length)r.push(m.Deferred(function(e){e.type="destroy";e.models=n}));e._submit(r,{data:{created:e.reader.serialize(Ae(t)),updated:e.reader.serialize(Ae(i)),destroyed:e.reader.serialize(Ae(n))}})}return r},_promise:function(e,t,i){var r=this;return m.Deferred(function(n){r.trigger(E,{type:i});r.trigger(I);r.transport[i].call(r.transport,v({success:function(e){n.resolve({response:e,models:t,type:i})},error:function(e,t,i){n.reject(e);r.error(e,t,i)}},e))}).promise()},_send:function(e,t){var i=this,n,r,a=[],o=i.reader.serialize(Ae(t));if(i.options.batch){if(t.length)a.push(i._promise({data:{models:o}},t,e))}else for(n=0,r=t.length;n<r;n++)a.push(i._promise({data:o[n]},[t[n]],e));return a},read:function(e){var t=this,i=t._params(e);var n=m.Deferred();t._queueRequest(i,function(){var e=t.trigger(E,{type:"read"});if(!e){t.trigger(I);t._ranges=[];t.trigger("reset");if(t.online())t.transport.read({data:i,success:function(e){t._ranges=[];t.success(e,i);n.resolve()},error:function(){var e=G.call(arguments);t.error.apply(t,e);n.reject.apply(n,e)}});else if(t.options.offlineStorage!=null){t.success(t.offlineData(),i);n.resolve()}}else{t._dequeueRequest();n.resolve(e)}});return n.promise()},_readAggregates:function(e){return this.reader.aggregates(e)},success:function(e){var t=this,c=t.options,i,n;t.trigger(P,{response:e,type:"read"});if(t.online()){e=t.reader.parse(e);if(t._handleCustomErrors(e)){t._dequeueRequest();return}t._total=t.reader.total(e);if(t._isServerGroupPaged())t._serverGroupsTotal=t._total;if(t._pageSize>t._total){t._pageSize=t._total;if(t.options.pageSize&&t.options.pageSize>t._pageSize)t._pageSize=t.options.pageSize}if(t._aggregate&&c.serverAggregates)t._aggregateResult=t._readAggregates(e);e=t._readData(e);t._destroyed=[]}else{e=t._readData(e);i=[];var r={};var a=t.reader.model;var h=a?a.idField:"id";var o;for(o=0;o<this._destroyed.length;o++){var f=this._destroyed[o][h];r[f]=f}for(o=0;o<e.length;o++){var s=e[o];var d=s.__state__;if(d=="destroy"){if(!r[s[h]])this._pushInDestroyed(this._createNewModel(s))}else i.push(s)}e=i;t._total=e.length}t._pristineTotal=t._total;n=t._skip&&t._data.length&&t._skip<t._data.length;if(t.options.endless){if(n)t._pristineData.splice(t._skip,t._pristineData.length);i=e.slice(0);for(var l=0;l<i.length;l++)t._pristineData.push(i[l])}else t._pristineData=e.slice(0);t._detachObservableParents();if(t.options.endless){t._data.unbind(p,t._changeHandler);if(t._isServerGrouped()&&t._data[t._data.length-1].value===e[0].value){Re(t._data[t._data.length-1],e[0]);e.shift()}e=t._observe(e);if(n)t._data.splice(t._skip,t._data.length);for(var u=0;u<e.length;u++)t._data.push(e[u]);t._data.bind(p,t._changeHandler)}else t._data=t._observe(e);t._markOfflineUpdatesAsDirty();t._storeData();t._addRange(t._data);t._process(t._data);t._dequeueRequest()},_detachObservableParents:function(){if(this._data&&this._shouldDetachObservableParents)for(var e=0;e<this._data.length;e++)if(this._data[e].parent)this._data[e].parent=S},_storeData:function(e){var a=this._isServerGrouped();var o=this.reader.model;function s(e){var t=[];for(var i=0;i<e.length;i++){var n=e.at(i);var r=n.toJSON();if(a&&n.items)r.items=s(n.items);else{r.uid=n.uid;if(o)if(n.isNew())r.__state__="create";else if(n.dirty)r.__state__="update"}t.push(r)}return t}if(this.options.offlineStorage!=null){var t=s(this._data);var i=[];for(var n=0;n<this._destroyed.length;n++){var r=this._destroyed[n].toJSON();r.__state__="destroy";i.push(r)}this.offlineData(t.concat(i));if(e)this._pristineData=this.reader.reader?this.reader.reader._wrapDataAccessBase(t):this.reader._wrapDataAccessBase(t)}},_addRange:function(e,t){var i=this,n=typeof t!=="undefined"?t:i._skip||0,r,a={data:e,pristineData:e.toJSON(),timestamp:i._timeStamp()};if(this._isGroupPaged()){r=n+e.length;a.outerStart=n;a.outerEnd=r}else r=n+i._flatData(e,true).length;a.start=n;a.end=r;i._ranges.push(a);i._sortRanges();if(i._isGroupPaged()){if(!i._groupsFlat)i._groupsFlat=[];i._appendToGroupsFlat(a.data);i._updateOuterRangesLength()}},_appendToGroupsFlat:function(e){var t=e.length;for(var i=0;i<t;i++)this._groupsFlat.push(e[i])},_getGroupByUid:function(e){var t=this._groupsFlat.length;var i;for(var n=0;n<t;n++){i=this._groupsFlat[n];if(i.uid===e)return i}},_sortRanges:function(){this._ranges.sort(function(e,t){return e.start-t.start})},error:function(e,t,i){this._dequeueRequest();this.trigger(P,{});this.trigger(D,{xhr:e,status:t,errorThrown:i})},_params:function(e){var t=this,i=v({take:t.take(),skip:t.skip(),page:t.page(),pageSize:t.pageSize(),sort:t._sort,filter:t._filter,group:t._group,aggregate:t._aggregate,groupPaging:!!t._groupPaging},e);if(!t.options.serverPaging){delete i.take;delete i.skip;delete i.page;delete i.pageSize}if(!t.options.serverGrouping)delete i.group;else if(t.reader.model&&i.group)i.group=Ze(i.group,t.reader.model);if(!t.options.serverFiltering)delete i.filter;else if(t.reader.model&&i.filter)i.filter=Qe(i.filter,t.reader.model);if(!t.options.serverSorting)delete i.sort;else if(t.reader.model&&i.sort)i.sort=Ze(i.sort,t.reader.model);if(!t.options.serverAggregates)delete i.aggregate;else if(t.reader.model&&i.aggregate)i.aggregate=Ze(i.aggregate,t.reader.model);if(!t.options.groupPaging)delete i.groupPaging;return i},_queueRequest:function(e,t){var i=this;if(!i._requestInProgress){i._requestInProgress=true;i._pending=T;t()}else i._pending={callback:t.bind(i),options:e}},_dequeueRequest:function(){var e=this;e._requestInProgress=false;if(e._pending)e._queueRequest(e._pending.options,e._pending.callback)},_handleCustomErrors:function(e){if(this.reader.errors){var t=this.reader.errors(e);if(t){this.trigger(D,{xhr:null,status:"customerror",errorThrown:"custom error",errors:t});return true}}return false},_shouldWrap:function(e){var t=this.reader.model;if(t&&e.length)return!(e[0]instanceof t);return false},_observe:function(e){var t=this,i=t.reader.model;t._shouldDetachObservableParents=true;if(e instanceof K){t._shouldDetachObservableParents=false;if(t._shouldWrap(e)){e.type=t.reader.model;e.wrapAll(e,e)}}else{var n=t.pageSize()&&!t.options.serverPaging?Q:K;e=new n(e,t.reader.model);e.parent=function(){return t.parent()}}if(t._isServerGrouped())He(e,i);if(t._changeHandler&&t._data&&t._data instanceof K&&!(t.options.useRanges&&t.options.serverPaging))t._data.unbind(p,t._changeHandler);else t._changeHandler=t._change.bind(t);return e.bind(p,t._changeHandler)},_updateTotalForAction:function(e,t){var i=this;var n=parseInt(i._total,10);if(!Se(i._total))n=parseInt(i._pristineTotal,10);if(e==="add")n+=t.length;else if(e==="remove")n-=t.length;else if(e!=="itemchange"&&e!=="sync"&&!i.options.serverPaging)n=i._pristineTotal;else if(e==="sync")n=i._pristineTotal=parseInt(i._total,10);i._total=n},_pushInDestroyed:function(t){var e=this._destroyed.find(function(e){return e.uid===t.uid});if(!e)this._destroyed.push(t)},_change:function(t){var i=this,e,n,r=t?t.action:"";if(r==="remove")for(e=0,n=t.items.length;e<n;e++)if(!t.items[e].isNew||!t.items[e].isNew())i._pushInDestroyed(t.items[e]);if(i.options.autoSync&&(r==="add"||r==="remove"||r==="itemchange")){var a=function(e){if(e.action==="sync"){i.unbind("change",a);i._updateTotalForAction(r,t.items)}};i.first("change",a);i.sync()}else{i._updateTotalForAction(r,t?t.items:[]);i._process(i._data,t)}},_calculateAggregates:function(e,t){t=t||{};var i=new b(e),n=t.aggregate,r=t.filter;if(r)i=i.filter(r);return i.aggregate(n)},_process:function(e,t){var i=this,n={},r;if(i.options.serverPaging!==true){n.skip=i._skip;n.take=i._take||i._pageSize;if(n.skip===T&&i._page!==T&&i._pageSize!==T)n.skip=(i._page-1)*i._pageSize;if(i.options.useRanges)n.skip=i.currentRangeStart()}if(i.options.serverSorting!==true)n.sort=i._sort;if(i.options.serverFiltering!==true)n.filter=i._filter;if(i.options.serverGrouping!==true)n.group=i._group;if(i.options.serverAggregates!==true)n.aggregate=i._aggregate;if(i.options.serverGrouping)i._clearEmptyGroups(e);n.groupPaging=i._groupPaging;if(i._isGroupPaged()&&t&&(t.action==="page"||t.action==="expandGroup"||t.action==="collapseGroup"))r=i._queryProcess(e,{aggregate:i._aggregate});else r=i._queryProcess(e,n);if(i._filter&&t&&t.action==="add"){var a=t.items[0],o=r.data;var s=o.find(function(e){return e.uid===a.uid});if(!s){r.data.splice(a.index,0,a);r.total++}}if(i.options.serverAggregates!==true)i._aggregateResult=i._calculateAggregates(r.dataToAggregate||e,n);i._setView(r,n,t);i._setFilterTotal(r.total,false);t=t||{};t.items=t.items||i._view;i.trigger(p,t)},_setView:function(e,t,i){var n=this;if(n._isGroupPaged()&&!n._isServerGrouped())if(i&&(i.action==="page"||i.action==="expandGroup"||i.action==="collapseGroup")){n.view(e.data);n._updateOuterRangesLength()}else{n._ranges=[];var r=new b(e.data);n._addRange(n._observe(e.data));if(t.skip+t.take>e.data.length)t.skip=e.data.length-t.take;n.view(r.range(t.skip,t.take).toArray())}else n.view(e.data)},_clearEmptyGroups:function(e){for(var t=e.length-1;t>=0;t--){var i=e[t];if(i.hasSubgroups)this._clearEmptyGroups(i.items);if(i.items&&!i.items.length&&!i.itemCount)U.apply(i.parent(),[t,1])}},_queryProcess:function(e,t){if(this.options.inPlaceSort)return b.process(e,t,this.options.inPlaceSort);else return b.process(e,t)},_mergeState:function(e){var t=this;if(e!==T){t._pageSize=e.pageSize;t._page=e.page;t._sort=e.sort;t._filter=e.filter;t._group=e.group;t._aggregate=e.aggregate;t._skip=t._currentRangeStart=e.skip;t._take=e.take;if(t._skip===T){t._skip=t._currentRangeStart=t.skip();e.skip=t.skip()}if(t._take===T&&t._pageSize!==T){t._take=t._pageSize;e.take=t._take}if(t.options.virtual)e.virtual=t.options.virtual;if(e.sort){t._sort=e.sort=ue(e.sort);t._sortFields=ce(e.sort)}if(e.filter)t._filter=e.filter=t.options.accentFoldingFiltering&&!m.isEmptyObject(e.filter)?m.extend({},de(e.filter),{accentFoldingFiltering:t.options.accentFoldingFiltering}):de(e.filter);if(e.group)t._group=e.group=ye(e.group);if(e.aggregate)t._aggregate=e.aggregate=_e(e.aggregate)}return e},query:function(e){var t;var i=this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates;if(i||(this._data===T||this._data.length===0)&&!this._destroyed.length){if(this.options.endless){var n=e.pageSize-this.pageSize();if(n>0){n=this.pageSize();e.page=e.pageSize/n;e.pageSize=n}else{e.page=1;this.options.endless=false}}return this.read(this._mergeState(e))}var r=this.trigger(E,{type:"read"});if(!r){this.trigger(I);if(e)e.groupPaging=this._groupPaging;t=this._queryProcess(this._data,this._mergeState(e));this._setFilterTotal(t.total,true);this._aggregateResult=this._calculateAggregates(t.dataToAggregate||this._data,e);this._setView(t,e);this.trigger(P,{type:"read"});this.trigger(p,{items:t.data,action:e?e.action:""})}return m.Deferred().resolve(r).promise()},_hasExpandedSubGroups:function(e){var t=false;var i=e.items?e.items.length:0;if(!e.hasSubgroups)return false;for(var n=0;n<i;n++)if(this._groupsState[e.items[n].uid]){t=true;break}return t},_findGroupedRange:function(e,t,i,n,c){var r=this;var h=e.length;var a;var o;var f;var s;var d;for(var l=0;l<h;l++){a=e[l];if(i.taken>=i.take)break;if(!r._getGroupByUid(a.uid))r._groupsFlat.push(a);if(r._groupsState[a.uid]){if(r._isServerGroupPaged()){if(r._fetchGroupItems(a,i,n,c)){r._fetchingGroupItems=true;return}s=(a.subgroupCount||a.itemCount)+1;d=i.skip-i.skipped;if(!r._hasExpandedSubGroups(a)&&d>s){i.skipped+=s;continue}}if(i.includeParents&&i.skipped<i.skip){i.skipped++;a.excludeHeader=true}else if(i.includeParents){i.taken++;a.excludeHeader=false}if(a.hasSubgroups&&a.items&&a.items.length){a.currentItems=[];if(!n)n=[];n.push(a);r._findGroupedRange(a.items,a.currentItems,i,n,c);n.pop();if(a.currentItems.length||i.taken>0)t.push(a);else a.excludeHeader=false}else{o=[];f=a.items.length;for(var u=0;u<f;u++){if(i.skipped<i.skip){i.skipped++;continue}if(i.taken>=i.take)break;o.push(a.items[u]);i.taken++}if(o.length||i.taken>0){a.currentItems=o;t.push(a)}else a.excludeHeader=false}}else{if(i.skipped<i.skip){i.skipped++;continue}t.push(a);i.taken++}}},_expandedSubGroupItemsCount:function(e,t,i){var n=this;var r=0;var a;var o=typeof t==="number";var s=o?t:e.subgroupCount;var l;if(!e.hasSubgroups)return r;for(var u=0;u<s;u++){a=e.items[u];if(!a)break;if(a.hasSubgroups&&n._groupsState[e.uid]){l=n._expandedSubGroupItemsCount(a,s,true);r+=l;if(o)s-=l}else if(!a.hasSubgroups&&n._groupsState[a.uid]){l=a.items?a.items.length:0;r+=l;if(o)s-=l}if(i){r+=1;if(o)s-=1}if(o&&r>s)return r}return r},_fetchGroupItems:function(e,t,i,n){var r=this;var a;var o;var s;var c=e.hasSubgroups?e.subgroupCount:e.itemCount;var h=t.take;var l=t.skipped;var u=r.take();var f;if(t.includeParents)if(l<t.skip)l+=1;else h-=1;if(!e.items||e.items&&!e.items.length){r.getGroupItems(e,t,i,n,0);return true}else{f=this._expandedSubGroupItemsCount(e,t.skip-l);a=Math.max(t.skip-(l+f),0);if(a>=c)return false;o=e.items[a];s=e.items[Math.min(a+h,c-1)];if(o.notFetched){r.getGroupItems(e,t,i,n,y.max(y.floor(a/u),0)*u,y.round((a+u)/u));return true}if(s.notFetched){r.getGroupItems(e,t,i,n,y.max(y.floor((a+u)/u),0)*u,y.round((a+u)/u));return true}}},getGroupItems:function(e,t,i,n,r,c){var a=this;var o;var s;var l;var u;if(!e.items)e.items=[];o=a.take();s=this._composeItemsFilter(e,i);l={page:c||1,pageSize:o,skip:r,take:o,filter:s,aggregate:a._aggregate,sort:a._sort};u=a.findSubgroups(e);if(u&&u.length){l.group=u;l.groupPaging=true}clearTimeout(a._timeout);a._timeout=setTimeout(function(){a._queueRequest(l,function(){if(!a.trigger(E,{type:"read"}))a.transport.read({data:l,success:a._groupItemsSuccessHandler(e,t.skip,a.take(),n,r),error:function(){var e=G.call(arguments);a.error.apply(a,e)}});else a._dequeueRequest()})},100)},_groupItemsSuccessHandler:function(a,o,s,l,u){var c=this;var h=c._timeStamp();l=d(l)?l:S;var f=c.options.schema&&c.options.schema.total?c.options.schema.total:"Total";return function(e){var t;var i=ae.define(c.options.schema.model);var n;c._dequeueRequest();c.trigger(P,{response:e,type:"read"});if(d(f))n=f(e);else n=e[f];e=c.reader.parse(e);if(a.hasSubgroups){t=c.reader.groups(e);a.subgroupCount=n}else{t=c.reader.data(e);t=t.map(function(e){return new i(e)})}a.items.omitChangeEvent=true;for(var r=0;r<n;r++)if(r>=u&&r<u+s)a.items.splice(r,1,t[r-u]);else if(!a.items[r])a.items.splice(r,0,{notFetched:true});a.items.omitChangeEvent=false;c._updateRangePristineData(a);c._fetchingGroupItems=false;if(!a.countAdded){c._serverGroupsTotal+=n;a.countAdded=true}c.range(o,s,l,"expandGroup");if(h>=c._currentRequestTimeStamp||!c._skipRequestsInProgress)c.trigger(p,{})}},findSubgroups:function(e){var t=this._group.map(function(e){return e.field}).indexOf(e.field);return this._group.slice(t+1,this._group.length)},_composeItemsFilter:function(e,t){var i=this.filter()||{logic:"and",filters:[]};i.logic="and";i=v(true,{},i);i.filters.push({field:e.field,operator:"eq",value:e.value});if(t)for(var n=0;n<t.length;n++)i.filters.push({field:t[n].field,operator:"eq",value:t[n].value});return i},_updateRangePristineData:function(e){var t=this;var i=t._ranges;var c=i.length;var n;var r;var a;var o;var s;var h;for(var l=0;l<c;l++){a=i[l];o=a.data.length;s=[];n=null;for(var u=0;u<o;u++){r=a.data[u];s.push(u);if(r.uid===e.uid||r.hasSubgroups&&r.items.length&&t._containsSubGroup(r,e,s))break;s.pop()}if(s.length){n=i[l].pristineData;while(s.length>1){h=s.splice(0,1)[0];n=n[h].items}n[s[0]]=t._cloneGroup(e);break}}},_containsSubGroup:function(e,t,i){var n=this;var r=e.items.length;var a;if(e.hasSubgroups&&r)for(var o=0;o<r;o++){a=e.items[o];i.push(o);if(a.uid===t.uid||a.hasSubgroups&&a.items.length&&n._containsSubGroup(a,t,i))return true;i.pop()}},_cloneGroup:function(e){var t=this;e=typeof e.toJSON=="function"?e.toJSON():e;if(e.items&&e.items.length)e.items=e.items.map(function(e){return t._cloneGroup(e)});return e},_setFilterTotal:function(e,t){var i=this;if(!i.options.serverFiltering)if(e!==T)i._total=e;else if(t)i._total=i._data.length},fetch:function(t){var i=this;var e=function(e){if(e!==true&&d(t))t.call(i)};return this._query().done(e)},_query:function(e){var t=this;return t.query(v({},{page:t.page(),pageSize:t.pageSize(),sort:t.sort(),filter:t.filter(),group:t.group(),aggregate:t.aggregate()},e))},next:function(e){var t=this,i=t.page(),n=t.total();e=e||{};if(!i||n&&i+1>t.totalPages())return;t._skip=t._currentRangeStart=i*t.take();i+=1;e.page=i;t._query(e);return i},prev:function(e){var t=this,i=t.page();e=e||{};if(!i||i===1)return;t._skip=t._currentRangeStart=t._skip-t.take();i-=1;e.page=i;t._query(e);return i},page:function(e){var t=this,i;if(e!==T){e=y.max(y.min(y.max(e,1),t.totalPages()),1);var n=t.take();if(t._isGroupPaged()){e-=1;t.range(e*n,n,null,"page");return}t._query(t._pageableQueryOptions({page:e}));return}i=t.skip();return i!==T?y.round((i||0)/(t.take()||1))+1:T},pageSize:function(e){var t=this;if(e!==T){t._query(t._pageableQueryOptions({pageSize:e,page:1}));return}return t.take()},sort:function(e){var t=this;if(e!==T){t.trigger("sort");t._query({sort:e});return}return t._sort},filter:function(e){var t=this;if(e===T)return t._filter;t.trigger("reset");t._query({filter:e,page:1})},group:function(e){var t=this;var i={group:e};if(t._groupPaging){if(e!==T&&(!e||!e.length))t._ranges=[];i.page=1}if(e!==T){t._query(i);return}return t._group},getGroupsFlat:function(e){var t,i=[],n;for(t=0,n=e.length;t<n;t++){var r=e[t];if(r.hasSubgroups)i=i.concat(this.getGroupsFlat(r.items));i.push(r)}return i},total:function(){return parseInt(this._total||0,10)},groupsTotal:function(e){var t=this;if(!t._group.length)return t.total();if(t._isServerGrouped()){if(t._serverGroupsTotal)return t._serverGroupsTotal;t._serverGroupsTotal=t.total();return t._serverGroupsTotal}return t._calculateGroupsTotal(t._ranges.length?t._ranges[0].data:[],e)},_calculateGroupsTotal:function(e,t,i,n){var r=this;i=i||"items";var a;var o;if(r._group.length&&e){a=0;o=e.length;for(var s=0;s<o;s++)a+=r.groupCount(e[s],t,i,n);r._groupsTotal=a;return a}r._groupsTotal=r._data.length;return r._groupsTotal},groupCount:function(e,t,i,n){var r=this;var a=0;if(e.hasSubgroups&&r._groupsState[e.uid]){if(t&&!e.excludeHeader||n)a+=1;e[i].forEach(function(e){a+=r.groupCount(e,t,i,n)})}else if(r._groupsState[e.uid]){if(t&&!e.excludeHeader||n)a++;a+=e[i]?e[i].length:0}else a++;return a},countGroupRange:function(e){var t=0;var i=e.length;for(var n=0;n<i;n++)t+=this.groupCount(e[n],true);return t},aggregate:function(e){var t=this;if(e!==T){t._query({aggregate:e});return}return t._aggregate},aggregates:function(){var e=this._aggregateResult;if(x(e))e=this._emptyAggregates(this.aggregate());return e},_emptyAggregates:function(e){var t={};if(!x(e)){var i={};if(!c(e))e=[e];for(var n=0;n<e.length;n++){i[e[n].aggregate]=0;t[e[n].field]=i}}return t},_pageableQueryOptions:function(e){return e},_wrapInEmptyGroup:function(e){var t=this.group(),i,n,r,a;for(r=t.length-1,a=0;r>=a;r--){n=t[r];i={value:e.get?e.get(n.field):e[n.field],field:n.field,items:i?[i]:[e],hasSubgroups:!!i,aggregates:this._emptyAggregates(n.aggregates)}}return i},totalPages:function(){var e=this,t=e.pageSize()||e.total(),i=e._isGroupPaged()?e.groupsTotal(true):e.total();return y.ceil((i||0)/t)},inRange:function(e,t){var i=this,n=y.min(e+t,i.total());if(!i.options.serverPaging&&i._data.length>0)return true;return i._findRange(e,n).length>0},lastRange:function(){var e=this._ranges;return e[e.length-1]||{start:0,end:0,data:[]}},firstItemUid:function(){var e=this._ranges;return e.length&&e[0].data.length&&e[0].data[0].uid},enableRequestsInProgress:function(){this._skipRequestsInProgress=false},_timeStamp:function(){return(new Date).getTime()},range:function(e,t,i,n){this._currentRequestTimeStamp=this._timeStamp();this._skipRequestsInProgress=true;var r=this._isGroupPaged()?this.groupsTotal(true):this.total();if(n==="expandGroup"||n==="collapseGroup")this._updateOuterRangesLength();e=y.min(e||0,r);i=d(i)?i:S;var a=this,o=y.max(y.floor(e/t),0)*t,s=y.min(o+t,r),l;l=a._findRange(e,y.min(e+t,r),i);if((l.length||r===0)&&!a._fetchingGroupItems){a._processRangeData(l,e,t,a._originalPageSkip||o,a._originalSize||s,{action:n});a._originalPageSkip=null;a._originalSize=null;i();return}if(a._isGroupPaged()){a._originalPageSkip=o;a._originalSize=s;o=y.max(y.floor(a._adjustPageSkip(e,t)/t),0)*t;s=y.min(o+t,r)}if(t!==T&&!a._fetchingGroupItems)if(a._isGroupPaged()&&!a._groupRangeExists(o,t)||!a._rangeExists(o,s))a.prefetch(o,t,function(){if(e>o&&s<a.total()&&!a._rangeExists(s,y.min(s+t,a.total())))a.prefetch(s,t,function(){a.range(e,t,i)});else a.range(e,t,i)});else if(o<e)a.prefetch(s,t,function(){a.range(e,t,i)})},_findRange:function(e,t,c){var i=this,n=i._ranges,r,a=[],o,s,h,f,d,p,v,g=i.options,m=g.serverSorting||g.serverPaging||g.serverFiltering||g.serverGrouping||g.serverAggregates,_,y,b,l={take:t-e,skip:e,skipped:0,taken:0,includeParents:true},u,w=i._isGroupPaged(),x=w?"outerStart":"start",k=w?"outerEnd":"end",C;for(o=0,b=n.length;o<b;o++){r=n[o];if(w){if(r.outerStart>=t)return[];if(e>r.outerEnd){l.skipped+=r.outerEnd-(u||0);u=r.outerEnd;continue}if(typeof u!=="undefined"&&u!=r.outerStart)l.skipped+=r.outerStart-u;if(l.skipped>l.skip)return[];if(typeof u==="undefined"&&e>0&&r.start>0)l.skipped=r.outerStart;s=o;while(true){this._findGroupedRange(r.data,a,l,null,c);C=i._calculateGroupsTotal(a,true,"currentItems");if(C>=l.take)return a;if(i._fetchingGroupItems)return[];s++;if(n[s]&&n[s].outerStart===r.outerEnd)r=n[s];else break}}else if(e>=r[x]&&e<=r[k]){y=0;for(s=o;s<b;s++){r=n[s];_=i._flatData(r.data,true);if(_.length&&e+y>=r.start){d=r.data;p=r.end;if(!m){if(g.inPlaceSort)v=i._queryProcess(r.data,{filter:i.filter()});else{var S=be(i.group()||[]).concat(ue(i.sort()||[]));v=i._queryProcess(r.data,{sort:S,filter:i.filter()})}_=d=v.data;if(v.total!==T)p=v.total}h=0;if(e+y>r.start)h=e+y-r.start;f=_.length;if(p>t)f=f-(p-t);y+=f-h;a=i._mergeGroups(a,d,h,f);if(t<=r.end&&y==t-e)return a}}break}u=r.outerEnd}return[]},_getRangesMismatch:function(e){var t=this;var i=t._ranges;var n=0;var r=0;while(true){var a=i[r];if(!a||a.outerStart>e)break;if(a.outerEnd!=a.end)n=a.outerEnd-a.end;r++}return n},_mergeGroups:function(e,t,i,n){if(this._isServerGrouped()){var r=t.toJSON(),a;if(e.length)a=e[e.length-1];Fe(a,r,i,n);return e.concat(r)}return e.concat(t.slice(i,n))},_processRangeData:function(e,t,i,n,r,a){var o=this;o._pending=T;o._skip=t>o.skip()&&!o._omitPrefetch?y.min(r,(o.totalPages()-1)*o.take()):n;o._currentRangeStart=t;o._take=i;var s=o.options.serverPaging;var l=o.options.serverSorting;var u=o.options.serverFiltering;var c=o.options.serverAggregates;try{o.options.serverPaging=true;if(!o._isServerGrouped()&&!(o.group()&&o.group().length))o.options.serverSorting=true;o.options.serverFiltering=true;o.options.serverPaging=true;o.options.serverAggregates=true;if(s){o._detachObservableParents();o._data=e=o._observe(e)}o._process(e,a)}finally{o.options.serverPaging=s;o.options.serverSorting=l;o.options.serverFiltering=u;o.options.serverAggregates=c}},skip:function(){var e=this;if(e._skip===T)return e._page!==T?(e._page-1)*(e.take()||1):T;return e._skip},currentRangeStart:function(){return this._currentRangeStart||0},take:function(){return this._take||this._pageSize},_prefetchSuccessHandler:function(o,s,l,u){var c=this;var h=c._timeStamp();return function(e){var t=false,i={start:o,end:s,data:[],timestamp:c._timeStamp()},n,r,a;c._dequeueRequest();c.trigger(P,{response:e,type:"read"});e=c.reader.parse(e);a=c._readData(e);if(a.length){for(n=0,r=c._ranges.length;n<r;n++)if(c._ranges[n].start===o){t=true;i=c._ranges[n];if(!c._isGroupPaged()){i.pristineData=a;i.data=c._observe(a);i.end=i.start+c._flatData(i.data,true).length;c._sortRanges()}break}if(!t)c._addRange(c._observe(a),o)}c._total=c.reader.total(e);if(u||(h>=c._currentRequestTimeStamp||!c._skipRequestsInProgress))if(l&&a.length)l();else c.trigger(p,{})}},prefetch:function(e,t,i){var n=this,r=y.min(e+t,n.total()),a={take:t,skip:e,page:e/t+1,pageSize:t,sort:n._sort,filter:n._filter,group:n._group,aggregate:n._aggregate};if(n._isGroupPaged()&&!n._isServerGrouped()&&n._groupRangeExists(e,r)){if(i)i();return}if(n._isServerGroupPaged()&&!n._groupRangeExists(e,r)||!n._rangeExists(e,r)){clearTimeout(n._timeout);n._timeout=setTimeout(function(){n._queueRequest(a,function(){if(!n.trigger(E,{type:"read"})){if(n._omitPrefetch)n.trigger(I);n.transport.read({data:n._params(a),success:n._prefetchSuccessHandler(e,r,i),error:function(){var e=G.call(arguments);n.error.apply(n,e)}})}else n._dequeueRequest()})},100)}else if(i)i()},_multiplePrefetch:function(e,t,i){var n=this,r=y.min(e+t,n.total()),a={take:t,skip:e,page:e/t+1,pageSize:t,sort:n._sort,filter:n._filter,group:n._group,aggregate:n._aggregate};if(!n._rangeExists(e,r)){if(!n.trigger(E,{type:"read"}))n.transport.read({data:n._params(a),success:n._prefetchSuccessHandler(e,r,i,true)})}else if(i)i()},_adjustPageSkip:function(e,t){var i=this;var n=i._getPrevRange(e);var r;var a=i.total();var o;if(n){o=i._getRangesMismatch(e);if(!o)return e;e-=o}r=y.max(y.floor(e/t),0)*t;if(r>a)while(true){r-=t;if(r<a)break}return r},_getNextRange:function(e){var t=this,i=t._ranges,n,r;for(n=0,r=i.length;n<r;n++)if(i[n].start<=e&&i[n].end>=e)return i[n]},_getPrevRange:function(e){var t=this,i=t._ranges,n,r,a=i.length;for(n=a-1;n>=0;n--)if(i[n].outerStart<=e){r=i[n];break}return r},_rangeExists:function(e,t){var i=this,n=i._ranges,r,a;for(r=0,a=n.length;r<a;r++)if(n[r].start<=e&&n[r].end>=t)return true;return false},_groupRangeExists:function(e,t){var i=this,n=i._ranges,r,a,o=0,s=i.groupsTotal(true);if(t>s&&!i._isServerGrouped())t=s;for(r=0,a=n.length;r<a;r++){var l=n[r];if(l.outerStart<=e&&l.outerEnd>=e)o+=l.outerEnd-e;else if(l.outerStart<=t&&l.outerEnd>=t)o+=t-l.outerStart}return o>=t-e},_getCurrentRangeSpan:function(){var e=this;var t=e._ranges;var i=e.currentRangeStart();var n=i+(e.take()||0);var r=[];var a;var o;var s=t.length;for(o=0;o<s;o++){a=t[o];if(a.start<=i&&a.end>=i||a.start>=i&&a.start<=n)r.push(a)}return r},_removeModelFromRanges:function(e){var t=this;var i;for(var n=0,r=this._ranges.length;n<r;n++){i=this._ranges[n];t._removeModelFromRange(i,e)}t._updateRangesLength()},_removeModelFromRange:function(e,n){this._eachItem(e.data,function(e){if(!e)return;for(var t=0;t<e.length;t++){var i=e[t];if(i.uid&&i.uid==n.uid){[].splice.call(e,t,1);break}}})},_insertModelInRange:function(e,t){var i=this;var n=i._ranges||[];var r=n.length;var a;var o;for(o=0;o<r;o++){a=n[o];if(a.start<=e&&a.end>=e){if(!i._getByUid(t.uid,a.data))if(i._isServerGrouped())a.data.splice(e,0,i._wrapInEmptyGroup(t));else a.data.splice(e,0,t);break}}i._updateRangesLength()},_updateRangesLength:function(){var e=this;var t=e._ranges||[];var i=t.length;var n=false;var r=0;var a=0;var o;var s;var l;for(l=0;l<i;l++){s=t[l];o=e._isGroupPaged()?s.data.length:e._flatData(s.data,true).length;a=o-y.abs(s.end-s.start);if(!n&&a!==0){n=true;r=a;s.end+=r;continue}if(n){s.start+=r;s.end+=r}}},_updateOuterRangesLength:function(){var e=this;var t=e._ranges||[];var i=t.length;var n=0;var r;var a;var o;var s;for(a=0;a<i;a++){r=t[a];s=e._isGroupPaged()?e._calculateGroupsTotal(r.data,true,"items",true):e._flatData(r.data,true).length;if(o){if(o.end!=r.start)n=r.start-o.end;r.outerStart=o.outerEnd+n;n=0}else r.outerStart=r.start;r.outerEnd=r.outerStart+s;o=r}}}),et={};function tt(e,t){e=m(e)[0];var i=e.options;var c=t[0];var h=t[1];var n=[];var r,a;var o;var s;var l;var u;for(r=0,a=i.length;r<a;r++){l={};s=i[r];o=s.parentNode;if(o===e)o=null;if(s.disabled||o&&o.disabled)continue;if(o)l.optgroup=o.label;l[c.field]=s.text;u=s.attributes.value;if(u&&u.specified)u=s.value;else u=s.text;l[h.field]=u;n.push(l)}return n}function it(c,e){var t=m(c)[0].tBodies[0],i=t?t.rows:[],n,r,a,h=e.length,o=[],f,s,l,u;for(n=0,r=i.length;n<r;n++){s={};u=true;f=i[n].cells;for(a=0;a<h;a++){l=f[a];if(l.nodeName.toLowerCase()!=="th"){u=false;s[e[a].field]=l.innerHTML}}if(!u)o.push(s)}return o}et.create=function(e,t,i){var n,r=e.transport?m.extend({},e.transport):null;if(r){r.read=typeof r.read===g?{url:r.read}:r.read;if(e.type==="jsdo")r.dataSource=i;if(e.type){_.data.transports=_.data.transports||{};_.data.schemas=_.data.schemas||{};if(!_.data.transports[e.type])_.logToConsole("Unknown DataSource transport type '"+e.type+"'.\nVerify that registration scripts for this type are included after Kendo UI on the page.","warn");else if(!w(_.data.transports[e.type]))n=new _.data.transports[e.type](v(r,{data:t}));else r=v(true,{},_.data.transports[e.type],r);e.schema=v(true,{},_.data.schemas[e.type],e.schema)}if(!n)n=d(r.read)?r:new De(r)}else n=new Me({data:e.data||[]});return n},Je.create=function(e){if(c(e)||e instanceof K)e={data:e};var t=e||{},i=t.data,n=t.fields,r=t.table,a=t.select,o,s,l={},u;if(!i&&n&&!t.transport)if(r)i=it(r,n);else if(a){i=tt(a,n);if(t.group===T&&i[0]&&i[0].optgroup!==T)t.group="optgroup"}if(_.data.Model&&n&&(!t.schema||!t.schema.model)){for(o=0,s=n.length;o<s;o++){u=n[o];if(u.type)l[u.field]=u}if(!x(l))t.schema=v(true,t.schema,{model:{fields:l}})}t.data=i;a=null;t.select=null;r=null;t.table=null;return t instanceof Je?t:new Je(t)};var nt=ae.define({idField:"id",init:function(e){var t=this,i=t.hasChildren||e&&e.hasChildren,n="items",r={};_.data.Model.fn.init.call(t,e);if(typeof t.children===g)n=t.children;r={schema:{data:n,model:{hasChildren:i,id:t.idField,fields:t.fields}}};if(typeof t.children!==g)v(r,t.children);r.data=e;if(!i)i=r.schema.data;if(typeof i===g)i=_.getter(i);if(d(i)){var a=i.call(t,t);if(a&&a.length===0)t.hasChildren=false;else t.hasChildren=!!a}t._childrenOptions=r;if(t.hasChildren)t._initChildren();t._loaded=!!(e&&e._loaded)},_initChildren:function(){var i=this;var e,t,n;if(!(i.children instanceof at)){e=i.children=new at(i._childrenOptions);t=e.transport;n=t.parameterMap;t.parameterMap=function(e,t){e[i.idField||"id"]=i.id;if(n)e=n.call(i,e,t);return e};e.parent=function(){return i};e.bind(p,function(e){e.node=e.node||i;i.trigger(p,e)});e.bind(D,function(e){var t=i.parent();if(t){e.node=e.node||i;t.trigger(D,e)}});e.bind(B,function(e){var t=i.parent();if(t)t.trigger(B,e)});i._updateChildrenField()}},append:function(e){this._initChildren();this.loaded(true);this.children.add(e)},hasChildren:false,level:function(){var e=this.parentNode(),t=0;while(e&&e.parentNode){t++;e=e.parentNode?e.parentNode():null}return t},_updateChildrenField:function(){var e=this._childrenOptions.schema.data;this[e||"items"]=this.children.data()},_childrenLoaded:function(){this._loaded=true;this._updateChildrenField()},load:function(){var e={};var t="_query";var i,n;if(this.hasChildren){this._initChildren();i=this.children;e[this.idField||"id"]=this.id;if(!this._loaded){i._data=T;t="read"}i.one(p,this._childrenLoaded.bind(this));if(this._matchFilter)e.filter={field:"_matchFilter",operator:"eq",value:true};n=i[t](e);if(!this._loaded)this.trigger(O,{promise:n,node:this})}else this.loaded(true);return n||m.Deferred().resolve().promise()},parentNode:function(){var e=this.parent();return e.parent()},loaded:function(e){if(e!==T)this._loaded=e;else return this._loaded},shouldSerialize:function(e){return ae.fn.shouldSerialize.call(this,e)&&e!=="children"&&e!=="_loaded"&&e!=="hasChildren"&&e!=="_childrenOptions"}});function rt(i){return function(){var e=this._data,t=Je.fn[i].apply(this,G.call(arguments));if(this._data!=e)this._attachBubbleHandlers();return t}}var at=Je.extend({init:function(e){var t=nt.define({children:e});if(e.filter&&!e.serverFiltering){this._hierarchicalFilter=e.filter;e.filter=null}Je.fn.init.call(this,v(true,{},{schema:{modelBase:t,model:t}},e));this._attachBubbleHandlers()},_attachBubbleHandlers:function(){var t=this;t._data.bind(D,function(e){t.trigger(D,e)});t._data.bind(B,function(e){t.trigger(B,e)})},loading:function(){if(this._data)return this._data.loading()||this._childrenLoading();return false},_childrenLoading:function(){var t=false;this._data.forEach(function(e){if(e.hasChildren&&e.children.loading())t=true});return t},read:function(e){var t=Je.fn.read.call(this,e);if(this._hierarchicalFilter)if(this._data&&this._data.length>0)this.filter(this._hierarchicalFilter);else{this.options.filter=this._hierarchicalFilter;this._filter=de(this.options.filter);this._hierarchicalFilter=null}return t},remove:function(e){var t=e.parentNode(),i=this,n;if(t&&t._initChildren)i=t.children;n=Je.fn.remove.call(i,e);if(t&&!i.data().length)t.hasChildren=false;return n},success:rt("success"),data:rt("data"),insert:function(e,t){var i=this.parent();if(i&&i._initChildren){i.hasChildren=true;i._initChildren()}return Je.fn.insert.call(this,e,t)},filter:function(e){if(e===T)return this._filter;if(!this.options.serverFiltering&&this._markHierarchicalQuery(e))e={logic:"or",filters:[e,{field:"_matchFilter",operator:"equals",value:true}]};this.trigger("reset");this._query({filter:e,page:1})},_markHierarchicalQuery:function(e){var t;var i;var n;var r;var a;var o=this.options.accentFoldingFiltering;e=o?m.extend({},de(e),{accentFoldingFiltering:o}):de(e);if(!e||e.filters.length===0){this._updateHierarchicalFilter(function(){return true});return false}t=b.filterExpr(e);n=t.fields;r=t.operators;i=a=new Function("d, __f, __o","return "+t.expression);if(n.length||r.length)a=function(e){return i(e,n,r)};this._updateHierarchicalFilter(a);return true},_updateHierarchicalFilter:function(e){var t;var i=this._data;var n=false;for(var r=0;r<i.length;r++){t=i[r];if(t.hasChildren){t._matchFilter=t.children._updateHierarchicalFilter(e);if(!t._matchFilter)t._matchFilter=e(t)}else t._matchFilter=e(t);if(t._matchFilter)n=true}return n},_find:function(e,t){var i,n,r,a;var o=this._data;if(!o)return;r=Je.fn[e].call(this,t);if(r)return r;o=this._flatData(this._data);for(i=0,n=o.length;i<n;i++){a=o[i].children;if(!(a instanceof at))continue;r=a[e](t);if(r)return r}},get:function(e){return this._find("get",e)},getByUid:function(e){return this._find("getByUid",e)}});function ot(e,t){var c=m(e).children(),i,h,f=[],n,d=t[0].field,p=t[1]&&t[1].field,v=t[2]&&t[2].field,g=t[3]&&t[3].field,r,a,o,s,l;function u(e,t){return e.filter(t).add(e.find(t))}for(i=0,h=c.length;i<h;i++){n={_loaded:true};r=c.eq(i);o=r[0].firstChild;l=r.children();e=l.filter("ul");l=l.filter(":not(ul)");a=r.attr("data-id");if(a)n.id=a;if(o)n[d]=o.nodeType==3?o.nodeValue:l.text();if(p)n[p]=u(l,"a").attr("href");if(g)n[g]=u(l,"img").attr("src");if(v){s=u(l,".k-sprite").prop("className");n[v]=s&&_.trim(s.replace("k-sprite",""))}if(e.length)n.items=ot(e.eq(0),t);if(r.attr("data-hasChildren")=="true")n.hasChildren=true;f.push(n)}return f}at.create=function(e){e=e&&e.push?{data:e}:e;var t=e||{},i=t.data,n=t.fields,r=t.list;if(i&&i._dataSource)return i._dataSource;if(!i&&n&&!t.transport)if(r)i=ot(r,n);t.data=i;return t instanceof at?t:new at(t)};var st=_.Observable.extend({init:function(e,t,i){_.Observable.fn.init.call(this);this._prefetching=false;this.dataSource=e;this.prefetch=!i;var n=this;e.bind("change",function(){n._change()});e.bind("reset",function(){n._reset()});this._syncWithDataSource();this.setViewSize(t)},setViewSize:function(e){this.viewSize=e;this._recalculate()},at:function(e){var t=this.pageSize,i=true;if(e>=this.total()){this.trigger("endreached",{index:e});return null}if(!this.useRanges)return this.dataSource.view()[e];if(this.useRanges){if(e<this.dataOffset||e>=this.skip+t)i=this.range(Math.floor(e/t)*t);if(e===this.prefetchThreshold)this._prefetch();if(e===this.midPageThreshold)this.range(this.nextMidRange,true);else if(e===this.nextPageThreshold)this.range(this.nextFullRange);else if(e===this.pullBackThreshold)if(this.offset===this.skip)this.range(this.previousMidRange);else this.range(this.previousFullRange);if(i)return this.dataSource.at(e-this.dataOffset);else{this.trigger("endreached",{index:e});return null}}},indexOf:function(e){return this.dataSource.data().indexOf(e)+this.dataOffset},total:function(){return parseInt(this.dataSource.total(),10)},next:function(){var e=this,t=e.pageSize,i=e.skip-e.viewSize+t,n=y.max(y.floor(i/t),0)*t;this.offset=i;this.dataSource.prefetch(n,t,function(){e._goToRange(i,true)})},range:function(e,t){if(this.offset===e)return true;var i=this,n=this.pageSize,r=y.max(y.floor(e/n),0)*n,a=this.dataSource;if(t)r+=n;if(a.inRange(e,n)){this.offset=e;this._recalculate();this._goToRange(e);return true}else if(this.prefetch){a.prefetch(r,n,function(){i.offset=e;i._recalculate();i._goToRange(e,true)});return false}return true},syncDataSource:function(){var e=this.offset;this.offset=null;this.range(e)},destroy:function(){this.unbind()},_prefetch:function(){var e=this,t=this.pageSize,i=this.skip+t,n=this.dataSource;if(!n.inRange(i,t)&&!this._prefetching&&this.prefetch){this._prefetching=true;this.trigger("prefetching",{skip:i,take:t});n.prefetch(i,t,function(){e._prefetching=false;e.trigger("prefetched",{skip:i,take:t})})}},_goToRange:function(e,t){if(this.offset!==e)return;this.dataOffset=e;this._expanding=t;this.dataSource.range(e,this.pageSize);this.dataSource.enableRequestsInProgress()},_reset:function(){this._syncPending=true},_change:function(){var e=this.dataSource;this.length=this.useRanges?e.lastRange().end:e.view().length;if(this._syncPending){this._syncWithDataSource();this._recalculate();this._syncPending=false;this.trigger("reset",{offset:this.offset})}this.trigger("resize");if(this._expanding)this.trigger("expand");delete this._expanding},_syncWithDataSource:function(){var e=this.dataSource;this._firstItemUid=e.firstItemUid();this.dataOffset=this.offset=e.skip()||0;this.pageSize=e.pageSize();this.useRanges=e.options.serverPaging},_recalculate:function(){var e=this.pageSize,t=this.offset,i=this.viewSize,n=Math.ceil(t/e)*e;this.skip=n;this.midPageThreshold=n+e-1;this.nextPageThreshold=n+i-1;this.prefetchThreshold=n+Math.floor(e/3*2);this.pullBackThreshold=this.offset-1;this.nextMidRange=n+e-i;this.nextFullRange=n;this.previousMidRange=t-i;this.previousFullRange=n-e}}),lt=_.Observable.extend({init:function(e,t){var i=this;_.Observable.fn.init.call(i);this.dataSource=e;this.batchSize=t;this._total=0;this.buffer=new st(e,t*3);this.buffer.bind({endreached:function(e){i.trigger("endreached",{index:e.index})},prefetching:function(e){i.trigger("prefetching",{skip:e.skip,take:e.take})},prefetched:function(e){i.trigger("prefetched",{skip:e.skip,take:e.take})},reset:function(){i._total=0;i.trigger("reset")},resize:function(){i._total=Math.ceil(this.length/i.batchSize);i.trigger("resize",{total:i.total(),offset:this.offset})}})},syncDataSource:function(){this.buffer.syncDataSource()},at:function(e){var t=this.buffer,i=e*this.batchSize,n=this.batchSize,r=[],a;if(t.offset>i)t.at(t.offset-1);for(var o=0;o<n;o++){a=t.at(i+o);if(a===null)break;r.push(a)}return r},total:function(){return this._total},destroy:function(){this.buffer.destroy();this.unbind()}});return v(true,_.data,{readers:{json:Le},Query:b,DataSource:Je,HierarchicalDataSource:at,Node:nt,Comparer:oe,ObservableObject:u,ObservableArray:K,LazyObservableArray:Q,LocalTransport:Me,RemoteTransport:De,Cache:Ee,DataReader:Le,Model:ae,Buffer:st,BatchBuffer:lt}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.binder.min",["kendo.core.min","kendo.data.min"],function(){var e={id:"binder",name:"MVVM",category:"framework",description:"Model View ViewModel (MVVM) is a design pattern which helps developers separate the Model (the data) from the View (the UI).",depends:["core","data"]},h=window.kendo.jQuery,g=void 0,d=window.kendo,n=d.Observable,f=d.data.ObservableObject,m=d.data.ObservableArray,v={}.toString,s={},t=d.Class,_="value",c="source",y="events",u="checked",b="css",a=true,o="function",p="change",i=document.createElement("a");try{delete i.test}catch(e){a=false}var w=n.extend({init:function(e,t){var i=this;n.fn.init.call(i);i.source=e[0];i.parents=e;i.path=t;i.dependencies={};i.dependencies[t]=true;i.observable=i.source instanceof n;i._access=function(e){i.dependencies[e.field]=true};if(i.observable){i._change=function(e){i.change(e)};i.source.bind(p,i._change)}},_parents:function(){var e=this.parents;var t=this.get();if(t&&typeof t.parent=="function"){var i=t.parent();if(h.inArray(i,e)<0)e=[i].concat(e)}return e},change:function(e){var t,i,n=e.field,r=this;if(r.path==="this")r.trigger(p,e);else for(t in r.dependencies)if(t.indexOf(n)===0){i=t.charAt(n.length);if(!i||i==="."||i==="["){r.trigger(p,e);break}}},start:function(e){e.bind("get",this._access)},stop:function(e){e.unbind("get",this._access)},get:function(){var e=this,t=e.source,i=0,n=e.path,r=t;if(!e.observable)return r;e.start(e.source);r=t.get(n);while(r===g&&t){t=e.parents[++i];if(t instanceof f)r=t.get(n)}if(r===g){t=e.source;while(r===g&&t){t=t.parent();if(t instanceof f)r=t.get(n)}}if(typeof r==="function"){i=n.lastIndexOf(".");if(i>0)t=t.get(n.substring(0,i));e.start(t);if(t!==e.source)r=r.call(t,e.source);else r=r.call(t);e.stop(t)}if(t&&t!==e.source){e.currentSource=t;t.unbind(p,e._change).bind(p,e._change)}e.stop(e.source);return r},set:function(e){var t=this.currentSource||this.source;var i=d.getter(this.path)(t);if(typeof i==="function")if(t!==this.source)i.call(t,this.source,e);else i.call(t,e);else t.set(this.path,e)},destroy:function(){if(this.observable){this.source.unbind(p,this._change);if(this.currentSource)this.currentSource.unbind(p,this._change)}this.unbind()}}),x=w.extend({get:function(){var e=this.source,t=this.path,i=0,n;n=e.get(t);while(!n&&e){e=this.parents[++i];if(e instanceof f)n=e.get(t)}if(!n)return;return n.bind(e)}}),k=w.extend({init:function(e,t,i){var n=this;w.fn.init.call(n,e,t);n.template=i},render:function(e){var t;this.start(this.source);t=d.render(this.template,e);this.stop(this.source);return t}}),r=t.extend({init:function(e,t,i){this.element=e;this.bindings=t;this.options=i},bind:function(e,t){var i=this;e=t?e[t]:e;e.bind(p,function(e){i.refresh(t||e)});i.refresh(t)},destroy:function(){}}),l=r.extend({dataType:function(){var e=this.element.getAttribute("data-"+d.ns+"type")||this.element.type||"text";return e.toLowerCase()},parsedValue:function(){return this._parseValue(this.element.value,this.dataType())},_parseValue:function(e,t){if(t=="date")e=d.parseDate(e,"yyyy-MM-dd");else if(t=="datetime-local")e=d.parseDate(e,["yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm"]);else if(t=="number")e=d.parseFloat(e);else if(t=="boolean"){e=e.toLowerCase();if(d.parseFloat(e)!==null)e=Boolean(d.parseFloat(e));else e=e.toLowerCase()==="true"}return e}});function C(u,c,s){return r.extend({init:function(e,t,i){var n=this;r.fn.init.call(n,e.element[0],t,i);n.widget=e;n._dataBinding=n.dataBinding.bind(n);n._dataBound=n.dataBound.bind(n);n._itemChange=n.itemChange.bind(n)},itemChange:function(e){B(e.item[0],e.data,this._ns(e.ns),[e.data].concat(this.bindings[u]._parents()))},dataBinding:function(e){var t,i,n=this.widget,r=e.removedItems||n.items();for(t=0,i=r.length;t<i;t++)L(r[t],false)},_ns:function(e){e=e||d.ui;var t=[d.ui,d.dataviz.ui,d.mobile.ui];t.splice(h.inArray(e,t),1);t.unshift(e);return d.rolesFromNamespaces(t)},dataBound:function(e){var t,i,n=this.widget,r=e.addedItems||n.items(),a=n[c],o,s,l=d.data.HierarchicalDataSource;if(l&&a instanceof l)return;if(r.length){o=e.addedDataItems||a.flatView();s=this.bindings[u]._parents();for(t=0,i=o.length;t<i;t++)if(r[t])B(r[t],o[t],this._ns(e.ns),[o[t]].concat(s))}},refresh:function(e){var t=this,i,n=t.widget,r,a,o;e=e||{};if(!e.action){t.destroy();n.bind("dataBinding",t._dataBinding);n.bind("dataBound",t._dataBound);n.bind("itemChange",t._itemChange);i=t.bindings[u].get();if(n[c]instanceof d.data.DataSource&&n[c]!=i)if(i instanceof d.data.DataSource)n[s](i);else if(i&&i._dataSource)n[s](i._dataSource);else{r=d.ui.Select&&n instanceof d.ui.Select;a=d.ui.MultiSelect&&n instanceof d.ui.MultiSelect;o=d.ui.DropDownTree&&n instanceof d.ui.DropDownTree;if(!o)n[c].data(i);else n.treeview[c].data(i);if(t.bindings.value&&(r||a))n.value(N(t.bindings.value.get(),n.options.dataValueField))}}},destroy:function(){var e=this.widget;e.unbind("dataBinding",this._dataBinding);e.unbind("dataBound",this._dataBound);e.unbind("itemChange",this._itemChange)}})}s.attr=r.extend({refresh:function(e){this.element.setAttribute(e,this.bindings.attr[e].get())}}),s.css=r.extend({init:function(e,t,i){r.fn.init.call(this,e,t,i);this.classes={}},refresh:function(e){var t=h(this.element),i=this.bindings.css[e],n=this.classes[e]=i.get();if(n)t.addClass(e);else t.removeClass(e)}}),s.style=r.extend({refresh:function(e){this.element.style[e]=this.bindings.style[e].get()||""}}),s.enabled=r.extend({refresh:function(){if(this.bindings.enabled.get())this.element.removeAttribute("disabled");else this.element.setAttribute("disabled","disabled")}}),s.readonly=r.extend({refresh:function(){if(this.bindings.readonly.get())this.element.setAttribute("readonly","readonly");else this.element.removeAttribute("readonly")}}),s.disabled=r.extend({refresh:function(){if(this.bindings.disabled.get())this.element.setAttribute("disabled","disabled");else this.element.removeAttribute("disabled")}}),s.events=r.extend({init:function(e,t,i){r.fn.init.call(this,e,t,i);this.handlers={}},refresh:function(e){var t=h(this.element),i=this.bindings.events[e],n=this.handlers[e];if(n)t.off(e,n);n=this.handlers[e]=i.get();t.on(e,i.source,n)},destroy:function(){var e=h(this.element),t;for(t in this.handlers)e.off(t,this.handlers[t])}}),s.text=r.extend({refresh:function(){var e=this.bindings.text.get();var t=this.element.getAttribute("data-"+d.ns+"format")||"";if(e==null)e="";h(this.element).text(d.toString(e,t))}}),s.visible=r.extend({refresh:function(){if(this.bindings.visible.get())this.element.style.display="";else this.element.style.display="none"}}),s.invisible=r.extend({refresh:function(){if(!this.bindings.invisible.get())this.element.style.display="";else this.element.style.display="none"}}),s.html=r.extend({refresh:function(){this.element.innerHTML=this.bindings.html.get()}}),s.value=l.extend({init:function(e,t,i){l.fn.init.call(this,e,t,i);this._change=this.change.bind(this);this.eventName=i.valueUpdate||p;h(this.element).on(this.eventName,this._change);this._initChange=false},change:function(){this._initChange=this.eventName!=p;this.bindings[_].set(this.parsedValue());this._initChange=false},refresh:function(){if(!this._initChange){var e=this.bindings[_].get();if(e==null)e="";var t=this.dataType();if(t=="date")e=d.toString(e,"yyyy-MM-dd");else if(t=="datetime-local")e=d.toString(e,"yyyy-MM-ddTHH:mm:ss");this.element.value=e}this._initChange=false},destroy:function(){h(this.element).off(this.eventName,this._change)}}),s.source=r.extend({init:function(e,t,i){r.fn.init.call(this,e,t,i);var n=this.bindings.source.get();if(n instanceof d.data.DataSource&&i.autoBind!==false)n.fetch()},refresh:function(e){var t=this,i=t.bindings.source.get();if(i instanceof m||i instanceof d.data.DataSource){e=e||{};if(e.action=="add")t.add(e.index,e.items);else if(e.action=="remove")t.remove(e.index,e.items);else if(e.action!="itemchange")t.render()}else t.render()},container:function(){var e=this.element;if(e.nodeName.toLowerCase()=="table"){if(!e.tBodies[0])e.appendChild(document.createElement("tbody"));e=e.tBodies[0]}return e},template:function(){var e=this.options,t=e.template,i=this.container().nodeName.toLowerCase();if(!t){if(i=="select")if(e.valueField||e.textField)t=d.format('<option value="#:{0}#">#:{1}#</option>',e.valueField||e.textField,e.textField||e.valueField);else t="<option>#:data#</option>";else if(i=="tbody")t="<tr><td>#:data#</td></tr>";else if(i=="ul"||i=="ol")t="<li>#:data#</li>";else t="#:data#";t=d.template(t)}return t},add:function(e,t){var i=this.container(),n,r,a,o,s=i.cloneNode(false),l=i.children[e];h(s).html(d.render(this.template(),t));if(s.children.length){n=this.bindings.source._parents();for(r=0,a=t.length;r<a;r++){o=s.children[0];i.insertBefore(o,l||null);B(o,t[r],this.options.roles,[t[r]].concat(n))}}},remove:function(e,t){var i,n=this.container();for(i=0;i<t.length;i++){var r=n.children[e];L(r,true);if(r.parentNode==n)n.removeChild(r)}},render:function(){var e=this.bindings.source.get(),t,i,n,r=this.container(),a=this.template();if(e==null)return;if(e instanceof d.data.DataSource)e=e.view();if(!(e instanceof m)&&v.call(e)!=="[object Array]")e=[e];if(this.bindings.template){R(r,true);h(r).html(this.bindings.template.render(e));if(r.children.length){t=this.bindings.source._parents();for(i=0,n=e.length;i<n;i++)B(r.children[i],e[i],this.options.roles,[e[i]].concat(t))}}else h(r).html(d.render(a,e))}}),s.input={checked:l.extend({init:function(e,t,i){l.fn.init.call(this,e,t,i);this._change=this.change.bind(this);h(this.element).change(this._change)},change:function(){var e=this.element;var t=this.value();if(e.type=="radio"){t=this.parsedValue();this.bindings[u].set(t)}else if(e.type=="checkbox"){var i=this.bindings[u].get();var n;if(i instanceof m){t=this.parsedValue();if(t instanceof Date){for(var r=0;r<i.length;r++)if(i[r]instanceof Date&&+i[r]===+t){n=r;break}}else n=i.indexOf(t);if(n>-1)i.splice(n,1);else i.push(t)}else this.bindings[u].set(t)}},refresh:function(){var e=this.bindings[u].get(),t=e,i=this.dataType(),n=this.element;if(n.type=="checkbox")if(t instanceof m){var r=-1;e=this.parsedValue();if(e instanceof Date){for(var a=0;a<t.length;a++)if(t[a]instanceof Date&&+t[a]===+e){r=a;break}}else r=t.indexOf(e);n.checked=r>=0}else n.checked=t;else if(n.type=="radio"){if(i=="date")e=d.toString(e,"yyyy-MM-dd");else if(i=="datetime-local")e=d.toString(e,"yyyy-MM-ddTHH:mm:ss");if(e!==null&&typeof e!=="undefined"&&n.value===e.toString())n.checked=true;else n.checked=false}},value:function(){var e=this.element,t=e.value;if(e.type=="checkbox")t=e.checked;return t},destroy:function(){h(this.element).off(p,this._change)}})},s.select={source:s.source.extend({refresh:function(e){var t=this,i=t.bindings.source.get();if(i instanceof m||i instanceof d.data.DataSource){e=e||{};if(e.action=="add")t.add(e.index,e.items);else if(e.action=="remove")t.remove(e.index,e.items);else if(e.action=="itemchange"||e.action===g){t.render();if(t.bindings.value)if(t.bindings.value){var n=N(t.bindings.value.get(),h(t.element).data("valueField"));if(n===null)t.element.selectedIndex=-1;else t.element.value=n}}}else t.render()}}),value:l.extend({init:function(e,t,i){l.fn.init.call(this,e,t,i);this._change=this.change.bind(this);h(this.element).change(this._change)},parsedValue:function(){var e=this.dataType();var t=[];var i,n,r,a;for(r=0,a=this.element.options.length;r<a;r++){n=this.element.options[r];if(n.selected){i=n.attributes.value;if(i&&i.specified)i=n.value;else i=n.text;t.push(this._parseValue(i,e))}}return t},change:function(){var e=[],t=this.element,i,n=this.options.valueField||this.options.textField,r=this.options.valuePrimitive,a,o,s,l,u;for(l=0,u=t.options.length;l<u;l++){a=t.options[l];if(a.selected){s=a.attributes.value;if(s&&s.specified)s=a.value;else s=a.text;if(n)e.push(s);else e.push(this._parseValue(s,this.dataType()))}}if(n){i=this.bindings.source.get();if(i instanceof d.data.DataSource)i=i.view();for(o=0;o<e.length;o++)for(l=0,u=i.length;l<u;l++){var c=i[l].get(n);var h=String(c)===e[o];if(h){e[o]=i[l];break}}}s=this.bindings[_].get();if(s instanceof m)s.splice.apply(s,[0,s.length].concat(e));else if(!r&&(s instanceof f||s===null||s===g||!n))this.bindings[_].set(e[0]);else this.bindings[_].set(e[0].get(n))},refresh:function(){var e,t=this.element,i=t.options,n=this.bindings[_].get(),r=n,a=this.options.valueField||this.options.textField,o=false,s=this.dataType(),l;if(!(r instanceof m))r=new m([n]);t.selectedIndex=-1;for(var u=0;u<r.length;u++){n=r[u];if(a&&n instanceof f)n=n.get(a);if(s=="date")n=d.toString(r[u],"yyyy-MM-dd");else if(s=="datetime-local")n=d.toString(r[u],"yyyy-MM-ddTHH:mm:ss");for(e=0;e<i.length;e++){l=i[e].value;if(l===""&&n!=="")l=i[e].text;if(n!=null&&l==n.toString()){i[e].selected=true;o=true}}}},destroy:function(){h(this.element).off(p,this._change)}})},s.widget={events:r.extend({init:function(e,t,i){r.fn.init.call(this,e.element[0],t,i);this.widget=e;this.handlers={}},refresh:function(e){var t=this.bindings.events[e],i=this.handlers[e];if(i)this.widget.unbind(e,i);i=t.get();this.handlers[e]=function(e){e.data=t.source;i(e);if(e.data===t.source)delete e.data};this.widget.bind(e,this.handlers[e])},destroy:function(){var e;for(e in this.handlers)this.widget.unbind(e,this.handlers[e])}}),checked:r.extend({init:function(e,t,i){r.fn.init.call(this,e.element[0],t,i);this.widget=e;this._change=this.change.bind(this);this.widget.bind(p,this._change)},change:function(){this.bindings[u].set(this.value())},refresh:function(){if(this.element.type==="radio")this.widget.check(this.bindings[u].get().toString()===this.value());else this.widget.check(this.bindings[u].get()===true)},value:function(){var e=this.element,t=e.value;if(t=="on"||t=="off"||this.element.type=="checkbox")t=e.checked;return t},destroy:function(){this.widget.unbind(p,this._change)}}),start:r.extend({init:function(e,t,i){r.fn.init.call(this,e.element[0],t,i);this._change=this.change.bind(this);this.widget=e;this.widget.bind(p,this._change)},change:function(){this.bindings.start.set(this.widget.range().start)},refresh:function(){var e=this;var t=this.bindings.start.get();var i=e.widget._range?e.widget._range.end:null;this.widget.range({start:t,end:i})},destroy:function(){this.widget.unbind(p,this._change)}}),end:r.extend({init:function(e,t,i){r.fn.init.call(this,e.element[0],t,i);this._change=this.change.bind(this);this.widget=e;this.widget.bind(p,this._change)},change:function(){this.bindings.end.set(this.widget.range().end)},refresh:function(){var e=this;var t=this.bindings.end.get();var i=e.widget._range?e.widget._range.start:null;this.widget.range({start:i,end:t})},destroy:function(){this.widget.unbind(p,this._change)}}),visible:r.extend({init:function(e,t,i){r.fn.init.call(this,e.element[0],t,i);this.widget=e},refresh:function(){var e=this.bindings.visible.get();this.widget.wrapper[0].style.display=e?"":"none"}}),invisible:r.extend({init:function(e,t,i){r.fn.init.call(this,e.element[0],t,i);this.widget=e},refresh:function(){var e=this.bindings.invisible.get();this.widget.wrapper[0].style.display=e?"none":""}}),floatingLabel:r.extend({init:function(e,t,i){r.fn.init.call(this,e.element[0],t,i);if(!e.floatingLabel)return;e.floatingLabel.refresh()}}),enabled:r.extend({init:function(e,t,i){r.fn.init.call(this,e.element[0],t,i);this.widget=e},refresh:function(){if(this.widget.enable)this.widget.enable(this.bindings.enabled.get())}}),disabled:r.extend({init:function(e,t,i){r.fn.init.call(this,e.element[0],t,i);this.widget=e},refresh:function(){if(this.widget.enable)this.widget.enable(!this.bindings.disabled.get())}}),source:C("source","dataSource","setDataSource"),value:r.extend({init:function(e,t,i){r.fn.init.call(this,e.element[0],t,i);this.widget=e;this._change=this.change.bind(this);this.widget.first(p,this._change);var n=this.bindings.value.get();this._valueIsObservableObject=!i.valuePrimitive&&(n==null||n instanceof f);this._valueIsObservableArray=n instanceof m;this._initChange=false},_source:function(){var e;if(this.widget.dataItem){e=this.widget.dataItem();if(e&&e instanceof f)return[e]}if(this.bindings.source)e=this.bindings.source.get();if(!e||e instanceof d.data.DataSource)e=this.widget.dataSource.flatView();return e},change:function(){var e=this.widget.value(),t=this.options.dataValueField||this.options.dataTextField,i=v.call(e)==="[object Array]",n=this._valueIsObservableObject,r,c,a=[],o,s,l,h,u;this._initChange=true;if(t)if(e===""&&(n||this.options.valuePrimitive))e=null;else{u=this._source();if(i){c=e.length;a=e.slice(0)}for(l=0,h=u.length;l<h;l++){o=u[l];s=o.get(t);if(i){for(r=0;r<c;r++)if(s==a[r]){a[r]=o;break}}else if(s==e){e=n?o:s;break}}if(a[0])if(this._valueIsObservableArray)e=a;else if(n||!t)e=a[0];else e=a[0].get(t)}this.bindings.value.set(e);this._initChange=false},refresh:function(){if(!this._initChange){var e=this.widget;var t=e.options;var i=t.dataTextField;var n=t.dataValueField||i;var r=this.bindings.value.get();var a=t.text||"";var o=0,s;var l=[];if(r===g)r=null;if(n)if(r instanceof m){for(s=r.length;o<s;o++)l[o]=r[o].get(n);r=l}else if(r instanceof f){a=r.get(i);r=r.get(n)}if(t.autoBind===false&&!t.cascadeFrom&&e.listView&&!e.listView.bound()){if(i===n&&!a)a=r;if(!a&&(r||r===0)&&t.valuePrimitive)e.value(r);else e._preselect(r,a)}else e.value(r)}this._initChange=false},destroy:function(){this.widget.unbind(p,this._change)}}),dropdowntree:{value:r.extend({init:function(e,t,i){r.fn.init.call(this,e.element[0],t,i);this.widget=e;this._change=this.change.bind(this);this.widget.first(p,this._change);this._initChange=false},change:function(){var e=this,t=e.bindings[_].get(),c=e.options.valuePrimitive,h=e.widget.treeview.select(),f=e.widget._isMultipleSelection()?e.widget._getAllChecked():e.widget.treeview.dataItem(h)||e.widget.value(),i=c||e.widget.options.autoBind===false?e.widget.value():f;var d=this.options.dataValueField||this.options.dataTextField;i=i.slice?i.slice(0):i;e._initChange=true;if(t instanceof m){var n=[];var p=i.length;var r=0,a=0;var o=t[r];var s=false;var v;var l;var u;while(o!==g){u=false;for(a=0;a<p;a++){if(c)s=i[a]==o;else{l=i[a];l=l.get?l.get(d):l;s=l==(o.get?o.get(d):o)}if(s){i.splice(a,1);p-=1;u=true;break}}if(!u){n.push(o);S(t,r,1);v=r}else r+=1;o=t[r]}S(t,t.length,0,i);if(n.length)t.trigger("change",{action:"remove",items:n,index:v});if(i.length)t.trigger("change",{action:"add",items:i,index:t.length-1})}else e.bindings[_].set(i);e._initChange=false},refresh:function(){if(!this._initChange){var e=this.options,t=this.widget,i=e.dataValueField||e.dataTextField,n=this.bindings.value.get(),r=n,a=0,o,s=[],l;if(i)if(n instanceof m){for(o=n.length;a<o;a++){l=n[a];s[a]=l.get?l.get(i):l}n=s}else if(n instanceof f)n=n.get(i);if(e.autoBind===false&&e.valuePrimitive!==true)t._preselect(r,n);else t.value(n)}},destroy:function(){this.widget.unbind(p,this._change)}})},gantt:{dependencies:C("dependencies","dependencies","setDependenciesDataSource")},multiselect:{value:r.extend({init:function(e,t,i){r.fn.init.call(this,e.element[0],t,i);this.widget=e;this._change=this.change.bind(this);this.widget.first(p,this._change);this._initChange=false},change:function(){var e=this,t=e.bindings[_].get(),c=e.options.valuePrimitive,i=c?e.widget.value():e.widget.dataItems();var h=this.options.dataValueField||this.options.dataTextField;i=i.slice(0);e._initChange=true;if(t instanceof m){var n=[];var f=i.length;var r=0,a=0;var o=t[r];var s=false;var d;var l;var u;while(o!==g){u=false;for(a=0;a<f;a++){if(c)s=i[a]==o;else{l=i[a];l=l.get?l.get(h):l;s=l==(o.get?o.get(h):o)}if(s){i.splice(a,1);f-=1;u=true;break}}if(!u){n.push(o);S(t,r,1);d=r}else r+=1;o=t[r]}S(t,t.length,0,i);if(n.length)t.trigger("change",{action:"remove",items:n,index:d});if(i.length)t.trigger("change",{action:"add",items:i,index:t.length-1})}else e.bindings[_].set(i);e._initChange=false},refresh:function(){if(!this._initChange){var e=this.options,t=this.widget,i=e.dataValueField||e.dataTextField,n=this.bindings.value.get(),r=n,a=0,o,s=[],l;if(n===g)n=null;if(i)if(n instanceof m){for(o=n.length;a<o;a++){l=n[a];s[a]=l.get?l.get(i):l}n=s}else if(n instanceof f)n=n.get(i);if(e.autoBind===false&&e.valuePrimitive!==true&&!t._isBound())t._preselect(r,n);else t.value(n)}},destroy:function(){this.widget.unbind(p,this._change)}})},scheduler:{source:C("source","dataSource","setDataSource").extend({dataBound:function(e){var t;var i;var n=this.widget;var r=e.addedItems||n.items();var a,o;if(r.length){a=e.addedDataItems||n.dataItems();o=this.bindings.source._parents();for(t=0,i=a.length;t<i;t++)B(r[t],a[t],this._ns(e.ns),[a[t]].concat(o))}}})},grid:{source:C("source","dataSource","setDataSource").extend({dataBound:function(e){var t,i,n=this.widget,r=e.addedItems||n.items(),a,o;if(r.length){o=e.addedDataItems||n.dataItems();a=this.bindings.source._parents();for(t=0,i=o.length;t<i;t++)B(r[t],o[t],this._ns(e.ns),[o[t]].concat(a))}}})},badge:{text:r.extend({init:function(e,t,i){r.fn.init.call(this,e.element[0],t,i);this.widget=e},refresh:function(){var e=this.bindings.text.get();if(e==null)e="";this.widget.text(e)}})}};var S=function(e,t,i,n){n=n||[];i=i||0;var r=n.length;var a=e.length;var o=[].slice.call(e,t+i);var s=o.length;var l;if(r){r=t+r;l=0;for(;t<r;t++){e[t]=n[l];l++}e.length=r}else if(i){e.length=t;i+=t;while(t<i)delete e[--i]}if(s){s=t+s;l=0;for(;t<s;t++){e[t]=o[l];l++}e.length=s}t=e.length;while(t<a){delete e[t];t++}},T=t.extend({init:function(e,t){this.target=e;this.options=t;this.toDestroy=[]},bind:function(e){var t,i,n,r,a,o,s=this instanceof A,l=this.binders();for(t in e)if(t==_)i=true;else if(t==c)n=true;else if(t==y&&!s)r=true;else if(t==u)a=true;else if(t==b)o=true;else this.applyBinding(t,e,l);if(n)this.applyBinding(c,e,l);if(i)this.applyBinding(_,e,l);if(a)this.applyBinding(u,e,l);if(r&&!s)this.applyBinding(y,e,l);if(o&&!s)this.applyBinding(b,e,l);if(s&&this.target&&this.target.floatingLabel)this.applyBinding("floatingLabel",e,l)},binders:function(){return s[this.target.nodeName.toLowerCase()]||{}},applyBinding:function(e,t,i){var n=i[e]||s[e],r=this.toDestroy,a,o=t[e];if(n){n=new n(this.target,t,this.options);r.push(n);if(o instanceof w){n.bind(o);r.push(o)}else for(a in o){n.bind(o,a);r.push(o[a])}}else if(e!=="template")throw new Error("The "+e+" binding is not supported by the "+this.target.nodeName.toLowerCase()+" element")},destroy:function(){var e,t,i=this.toDestroy;for(e=0,t=i.length;e<t;e++)i[e].destroy()}}),A=T.extend({binders:function(){return s.widget[this.target.options.name.toLowerCase()]||{}},applyBinding:function(e,t,i){var n=i[e]||s.widget[e],r=this.toDestroy,a,o=t[e];if(n){n=new n(this.target,t,this.target.options);r.push(n);if(o instanceof w){n.bind(o);r.push(o)}else for(a in o){n.bind(o,a);r.push(o[a])}}else throw new Error("The "+e+" binding is not supported by the "+this.target.options.name+" widget")}});function M(e,t){var i=d.initWidget(e,{},t);if(i)return new A(i)}var D=/[A-Za-z0-9_\-]+:(\{([^}]*)\}|[^,}]+)/g,E=/\s/g;function I(e){var t={},i,n,r,a,o,s,l;l=e.match(D);for(i=0,n=l.length;i<n;i++){r=l[i];a=r.indexOf(":");o=r.substring(0,a);s=r.substring(a+1);if(s.charAt(0)=="{")s=I(s);t[o]=s}return t}function P(e,t,i){var n,r={};for(n in e)r[n]=new i(t,e[n]);return r}function B(e,t,i,n){if(!e||e.getAttribute("data-"+d.ns+"stop"))return;var c=e.getAttribute("data-"+d.ns+"role"),r,a=e.getAttribute("data-"+d.ns+"bind"),o=[],h=true,s,l={},u;n=n||[t];if(c||a)z(e,false);if(c)u=M(e,i);if(a){a=I(a.replace(E,""));if(!u){l=d.parseOptions(e,{textField:"",valueField:"",template:"",valueUpdate:p,valuePrimitive:false,autoBind:true},t);l.roles=i;u=new T(e,l)}u.source=t;s=P(a,n,w);if(l.template)s.template=new k(n,"",l.template);if(s.click){a.events=a.events||{};a.events.click=a.click;s.click.destroy();delete s.click}if(s.source)h=false;if(a.attr)s.attr=P(a.attr,n,w);if(a.style)s.style=P(a.style,n,w);if(a.events)s.events=P(a.events,n,x);if(a.css)s.css=P(a.css,n,w);u.bind(s)}if(u)e.kendoBindingTarget=u;var f=e.children;if(h&&f&&!e.getAttribute("data-"+d.ns+"stop")){for(r=0;r<f.length;r++)o[r]=f[r];for(r=0;r<o.length;r++)B(o[r],t,i,n)}}function O(e,t){var i,n,r,a=d.rolesFromNamespaces([].slice.call(arguments,2));t=d.observable(t);e=h(e);for(i=0,n=e.length;i<n;i++){r=e[i];if(r.nodeType===1)B(r,t,a)}}function z(e,t){var i=e.kendoBindingTarget;if(i){i.destroy();if(a)delete e.kendoBindingTarget;else if(e.removeAttribute)e.removeAttribute("kendoBindingTarget");else e.kendoBindingTarget=null}if(t){var n=d.widgetInstance(h(e));if(n&&typeof n.destroy===o)n.destroy()}}function L(e,t){z(e,t);R(e,t)}function R(e,t){var i=e.children;if(i)for(var n=0,r=i.length;n<r;n++)L(i[n],t)}function F(e){var t,i;e=h(e);for(t=0,i=e.length;t<i;t++)L(e[t],false)}function V(e,t){var i=e.element,n=i[0].kendoBindingTarget;if(n)O(i,n.source,t)}function N(e,t){var i=[];var n=0;var r;var a;if(!t)return e;if(e instanceof m){for(r=e.length;n<r;n++){a=e[n];i[n]=a.get?a.get(t):a[t]}e=i}else if(e instanceof f)e=e.get(t);return e}return d.unbind=F,d.bind=O,d.data.binders=s,d.data.Binder=r,d.notify=V,d.observable=function(e){if(!(e instanceof f))e=new f(e);return e},d.observableHierarchy=function(e){var t=d.data.HierarchicalDataSource.create(e);function n(e){var t,i;for(t=0;t<e.length;t++){e[t]._initChildren();i=e[t].children;i.fetch();e[t].items=i.data();n(e[t].items)}}t.fetch();n(t.data());t._data._dataSource=t;return t._data},window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.view.min",["kendo.core.min","kendo.binder.min","kendo.fx.min"],function(){var e={id:"view",name:"View",category:"framework",description:"The View class instantiates and handles the events of a certain screen from the application.",depends:["core","binder","fx"],hidden:false},a=window.kendo.jQuery,t=void 0,c=window.kendo,s=c.attr,f=c.ui,d=c.attrValue,p=c.directiveSelector,r=c.Observable,n=c.ui.Widget,o=c.roleSelector,v="SCRIPT",g="init",m="transitionStart",_="transitionEnd",y="show",b="hide",w="attach",x="detach",k=/unrecognized expression/,C=/<body[^>]*>(([\u000a\u000d\u2028\u2029]|.)*)<\/body>/i,S="loadStart",T="loadComplete",l="showStart",A="sameViewRequested",M="viewShow",D="viewTypeDetermined",u="after",h={content:"k-content",view:"k-view",stretchedView:"k-stretched-view",widget:"k-widget",header:"k-header",footer:"k-footer"},i=c.ui.Widget.extend({init:function(e,t){var i=this;t=t||{};i.id=c.guid();r.fn.init.call(i);this.options=a.extend({},this.options,t);i.content=e;if(i.options.renderOnInit)n.fn.init.call(i,i._createElement(),t);if(i.options.wrapInSections)i._renderSections();i.tagName=t.tagName||"div";i.model=t.model;i._wrap=t.wrap!==false;this._evalTemplate=t.evalTemplate||false;this._useWithBlock=t.useWithBlock;i._fragments={};i.bind([g,y,b,m,_],t)},options:{name:"View",renderOnInit:false,wrapInSections:false,detachOnHide:true,detachOnDestroy:true},render:function(e){var t=this,i=!t.element;if(i)t.element=t._createElement();if(e)a(e).append(t.element);if(i){c.bind(t.element,t.model);t.trigger(g)}if(e){t._eachFragment(w);t.trigger(y)}return t.element},clone:function(){return new E(this)},triggerBeforeShow:function(){return true},triggerBeforeHide:function(){return true},showStart:function(){var e=this;var t=e.render();if(t)t.css("display","");this.trigger(l,{view:this})},showEnd:function(){},hideEnd:function(){this.hide()},beforeTransition:function(e){this.trigger(m,{type:e})},afterTransition:function(e){this.trigger(_,{type:e})},hide:function(){if(this.options.detachOnHide){this._eachFragment(x);a(this.element).detach()}this.trigger(b)},destroy:function(){var e=this;var t=e.element;if(t){n.fn.destroy.call(e);c.unbind(t);c.destroy(t);if(e.options.detachOnDestroy)t.remove()}},purge:function(){var e=this;e.destroy();a(e.element).add(e.content).add(e.wrapper).off().remove()},fragments:function(e){a.extend(this._fragments,e)},_eachFragment:function(e){for(var t in this._fragments)this._fragments[t][e](this,t)},_createElement:function(){var t=this,e="<"+t.tagName+">",i,n;try{n=a(document.getElementById(t.content)||t.content);if(n[0].tagName===v)n=n.html()}catch(e){if(k.test(e.message))n=t.content}if(typeof n==="string"){n=n.replace(/^\s+|\s+$/g,"");if(t._evalTemplate)n=c.template(n,{useWithBlock:t._useWithBlock})(t.model||{});i=a(e).append(n);if(!t._wrap)i=i.contents()}else{i=n;if(t._evalTemplate){var r=a(c.template(a("<div />").append(i.clone(true)).html(),{useWithBlock:t._useWithBlock})(t.model||{}));if(a.contains(document,i[0]))i.replaceWith(r);i=r}if(t._wrap)i=i.wrapAll(e).parent()}return i},_renderSections:function(){var e=this;if(e.options.wrapInSections){e._wrapper();e._createContent();e._createHeader();e._createFooter()}},_wrapper:function(){var e=this;var t=e.content;if(t.is(o("view")))e.wrapper=e.content;else e.wrapper=t.wrap("<div data-"+c.ns+'stretch="true" data-'+c.ns+'role="view" data-'+c.ns+'init-widgets="false"></div>').parent();var i=e.wrapper;i.attr("id",e.id);i.addClass(h.view);i.addClass(h.widget);i.attr("role","view")},_createContent:function(){var e=this;var t=a(e.wrapper);var i=o("content");if(!t.children(i)[0]){var n=t.children().filter(function(){var e=a(this);if(!e.is(o("header"))&&!e.is(o("footer")))return e});n.wrap("<div "+s("role")+'="content"></div>')}this.contentElement=t.children(o("content"));this.contentElement.addClass(h.stretchedView).addClass(h.content)},_createHeader:function(){var e=this;var t=e.wrapper;this.header=t.children(o("header")).addClass(h.header)},_createFooter:function(){var e=this;var t=e.wrapper;this.footer=t.children(o("footer")).addClass(h.footer)}}),E=c.Class.extend({init:function(e){a.extend(this,{element:e.element.clone(true),transition:e.transition,id:e.id});e.element.parent().append(this.element)},hideEnd:function(){this.element.remove()},beforeTransition:a.noop,afterTransition:a.noop}),I=i.extend({init:function(e,t){i.fn.init.call(this,e,t);this.containers={}},container:function(e){var t=this.containers[e];if(!t){t=this._createContainer(e);this.containers[e]=t}return t},showIn:function(e,t,i){this.container(e).show(t,i)},_createContainer:function(e){var t=this.render(),i=t.find(e),n;if(!i.length&&t.is(e))if(t.is(e))i=t;else throw new Error("can't find a container with the specified "+e+" selector");n=new z(i);n.bind("accepted",function(e){e.view.render(i)});return n}}),P=i.extend({attach:function(e,t){e.element.find(t).replaceWith(this.render())},detach:function(){}}),B=/^(\w+)(:(\w+))?( (\w+))?$/;function O(e){if(!e)return{};var t=e.match(B)||[];return{type:t[1],direction:t[3],reverse:t[5]==="reverse"}}var z=r.extend({init:function(e){r.fn.init.call(this);this.container=e;this.history=[];this.view=null;this.running=false},after:function(){this.running=false;this.trigger("complete",{view:this.view});this.trigger("after")},end:function(){this.view.showEnd();this.previous.hideEnd();this.after()},show:function(e,t,i){if(!e.triggerBeforeShow()||this.view&&!this.view.triggerBeforeHide()){this.trigger("after");return false}i=i||e.id;var n=this,r=e===n.view?e.clone():n.view,a=n.history,o=a[a.length-2]||{},s=o.id===i,l=t||(s?a[a.length-1].transition:e.transition),u=O(l);if(n.running)n.effect.stop();if(l==="none")l=null;n.trigger("accepted",{view:e});n.view=e;n.previous=r;n.running=true;if(!s)a.push({id:i,transition:l});else a.pop();if(!r){e.showStart();e.showEnd();n.after();return true}if(!l||!c.effects.enabled){e.showStart();n.end()}else{e.element.addClass("k-fx-hidden");e.showStart();if(s&&!t)u.reverse=!u.reverse;n.effect=c.fx(e.element).replace(r.element,u.type).beforeTransition(function(){e.beforeTransition("show");r.beforeTransition("hide")}).afterTransition(function(){e.afterTransition("show");r.afterTransition("hide")}).direction(u.direction).setReverse(u.reverse);n.effect.run().then(function(){n.end()})}return true},destroy:function(){var e=this;var t=e.view;if(t&&t.destroy)t.destroy()}}),L=r.extend({init:function(e){var t=this,i,n;r.fn.init.call(t);t.options=e;a.extend(t,e);t.sandbox=a("<div />");n=t.container;i=t._hideViews(n);t.rootView=i.first();t.layouts={};t.viewContainer=new c.ViewContainer(t.container);t.viewContainer.bind("accepted",function(e){e.view.params=t.params});t.viewContainer.bind("complete",function(e){t.trigger(M,{view:e.view})});t.viewContainer.bind(u,function(){t.trigger(u)});this.bind(this.events,e)},events:[l,u,M,S,T,A,D],destroy:function(){var e=this;var t=e.viewContainer;c.destroy(e.container);for(var i in e.layouts)this.layouts[i].destroy();if(t)t.destroy()},view:function(){return this.viewContainer.view},showView:function(e,t,i){e=e.replace(new RegExp("^"+this.remoteViewURLPrefix),"");if(e===""&&this.remoteViewURLPrefix)e="/";if(e.replace(/^#/,"")===this.url){this.trigger(A);return false}this.trigger(l);var n=this,r=n._findViewElement(e),a=c.widgetInstance(r);n.url=e.replace(/^#/,"");n.params=i;if(a&&a.reload){a.purge();r=[]}this.trigger(D,{remote:r.length===0,url:e});if(r[0]){if(!a)a=n._createView(r);return n.viewContainer.show(a,t,e)}else return true},append:function(e,t){var i=this.sandbox,n=(t||"").split("?")[0],r=this.container,a,o;if(C.test(e))e=RegExp.$1;i[0].innerHTML=e;r.append(i.children("script, style"));a=this._hideViews(i);o=a.first();if(!o.length)a=o=i.wrapInner("<div data-role=view />").children();if(n)o.hide().attr(s("url"),n);r.append(a);return this._createView(o)},_locate:function(e){return this.$angular?p(e):o(e)},_findViewElement:function(e){var t,i=e.split("?")[0];if(!i)return this.rootView;t=this.container.children("["+s("url")+"='"+i+"']");if(!t[0]&&i.indexOf("/")===-1)t=this.container.children(i.charAt(0)==="#"?i:"#"+i);if(!t[0])t=this._findViewElementById(e);return t},_findViewElementById:function(e){var t=this.container.children("[id='"+e+"']");return t},_createView:function(e){return this._createSpaView(e)},_createMobileView:function(e){return c.initWidget(e,{defaultTransition:this.transition,loader:this.loader,container:this.container,getLayout:this.getLayoutProxy,modelScope:this.modelScope,reload:d(e,"reload")},f.roles)},_createSpaView:function(e){var t=(this.options||{}).viewOptions||{};return new c.View(e,{renderOnInit:t.renderOnInit,wrap:t.wrap||false,wrapInSections:t.wrapInSections,detachOnHide:t.detachOnHide,detachOnDestroy:t.detachOnDestroy})},_hideViews:function(e){return e.children(this._locate("view")).hide()}});return c.ViewEngine=L,c.ViewContainer=z,c.Fragment=P,c.Layout=I,c.View=i,c.ViewClone=E,window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.data.signalr.min",["kendo.data.min"],function(){var e={id:"data.signalr",name:"SignalR",category:"framework",depends:["data"],hidden:true},s=window.kendo.jQuery,l=window.kendo,t=l.isFunction;function u(e){return e&&t(e.done)&&t(e.fail)}function c(e){return e&&t(e.then)&&t(e.catch)}var i=l.data.RemoteTransport.extend({init:function(e){var t=e&&e.signalr?e.signalr:{};var i=t.promise;if(!i)throw new Error('The "promise" option must be set.');if(!u(i)&&!c(i))throw new Error('The "promise" option must be a Promise.');this.promise=i;var n=t.hub;if(!n)throw new Error('The "hub" option must be set.');if(typeof n.on!="function"||typeof n.invoke!="function")throw new Error('The "hub" option is not a valid SignalR hub proxy.');this.hub=n;l.data.RemoteTransport.fn.init.call(this,e)},push:function(e){var t=this.options.signalr.client||{};if(t.create)this.hub.on(t.create,e.pushCreate);if(t.update)this.hub.on(t.update,e.pushUpdate);if(t.destroy)this.hub.on(t.destroy,e.pushDestroy)},_crud:function(e,t){var i=this.hub;var n=this.promise;var r=this.options.signalr.server;if(!r||!r[t])throw new Error(l.format('The "server.{0}" option must be set.',t));var a=[r[t]];var o=this.parameterMap(e.data,t);if(!s.isEmptyObject(o))a.push(o);if(u(n))n.done(function(){i.invoke.apply(i,a).done(e.success).fail(e.error)});else if(c(n))n.then(function(){i.invoke.apply(i,a).then(e.success).catch(e.error)})},read:function(e){this._crud(e,"read")},create:function(e){this._crud(e,"create")},update:function(e){this._crud(e,"update")},destroy:function(e){this._crud(e,"destroy")}});return s.extend(true,l.data,{transports:{signalr:i}}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.userevents.min",["kendo.core.min"],function(){var e={id:"userevents",name:"User Events",category:"framework",depends:["core"],hidden:true},u=window.kendo.jQuery,t=void 0,l=window.kendo,c=l.support,i=l.Class,m=l.Observable,a=Date.now,h=u.extend,n=c.mobileOS,o=n&&n.android,_=800,r=300,y=c.browser.msie?5:0,b="press",w="hold",x="select",k="start",f="move",d="end",C="cancel",p="tap",S="doubleTap",T="release",A="gesturestart",M="gesturechange",D="gestureend",E="gesturetap",s={api:0,touch:0,mouse:9,pointer:9},I=!c.touch||c.mouseAndTouchPresent;function P(e,t){var i=e.x.location,n=e.y.location,r=t.x.location,a=t.y.location,o=i-r,s=n-a;return{center:{x:(i+r)/2,y:(n+a)/2},distance:Math.sqrt(o*o+s*s)}}function v(e){var t=[],i=e.originalEvent,n=e.currentTarget,r=0,a,o,s;if(e.api)t.push({id:2,event:e,target:e.target,currentTarget:e.target,location:e,type:"api"});else if(e.type.match(/touch/)){o=i?i.changedTouches:[];for(a=o.length;r<a;r++){s=o[r];t.push({location:s,event:e,target:s.target,currentTarget:n,id:s.identifier,type:"touch"})}}else if(c.pointers||c.msPointers)t.push({location:i,event:e,target:e.target,currentTarget:n,id:i.pointerId,type:"pointer"});else t.push({id:1,event:e,target:e.target,currentTarget:n,location:e,type:"mouse"});return t}var B=i.extend({init:function(e,t){var i=this;i.axis=e;i._updateLocationData(t);i.startLocation=i.location;i.velocity=i.delta=0;i.timeStamp=a()},move:function(e){var t=this,i=e["page"+t.axis],n=a(),r=n-t.timeStamp||1;if(!i&&o)return;t.delta=i-t.location;t._updateLocationData(e);t.initialDelta=i-t.startLocation;t.velocity=t.delta/r;t.timeStamp=n},_updateLocationData:function(e){var t=this,i=t.axis;t.location=e["page"+i];t.client=e["client"+i];t.screen=e["screen"+i]}}),O=i.extend({init:function(e,t,i){h(this,{x:new B("X",i.location),y:new B("Y",i.location),type:i.type,useClickAsTap:e.useClickAsTap,threshold:e.threshold||s[i.type],userEvents:e,target:t,currentTarget:i.currentTarget,initialTouch:i.target,id:i.id,pressEvent:i,_clicks:e._clicks,supportDoubleTap:e.supportDoubleTap,_moved:false,_finished:false})},press:function(){this._holdTimeout=setTimeout(this._hold.bind(this),this.userEvents.minHold);this._trigger(b,this.pressEvent)},_tap:function(e){var t=this;t.userEvents._clicks++;if(t.userEvents._clicks==1)t._clickTimeout=setTimeout(function(){if(t.userEvents._clicks==1)t._trigger(p,e);else t._trigger(S,e);t.userEvents._clicks=0},r)},_hold:function(){this._trigger(w,this.pressEvent)},move:function(e){var t=this;var i=e.type!=="api"&&t.userEvents._shouldNotMove;if(t._finished||i)return;t.x.move(e.location);t.y.move(e.location);if(!t._moved){if(t._withinIgnoreThreshold())return;if(!g.current||g.current===t.userEvents)t._start(e);else return t.dispose()}if(!t._finished)t._trigger(f,e)},end:function(e){this.endTime=a();if(this._finished)return;this._finished=true;this._trigger(T,e);if(this._moved)this._trigger(d,e);else if(!this.useClickAsTap)if(this.supportDoubleTap)this._tap(e);else this._trigger(p,e);clearTimeout(this._holdTimeout);this.dispose()},dispose:function(){var e=this.userEvents,t=e.touches;this._finished=true;this.pressEvent=null;clearTimeout(this._holdTimeout);t.splice(u.inArray(this,t),1)},skip:function(){this.dispose()},cancel:function(){this.dispose()},isMoved:function(){return this._moved},_start:function(e){clearTimeout(this._holdTimeout);this.startTime=a();this._moved=true;this._trigger(k,e)},_trigger:function(e,t){var i=this,n=t.event,r={touch:i,x:i.x,y:i.y,target:i.target,event:n};if(i.userEvents.notify(e,r))n.preventDefault()},_withinIgnoreThreshold:function(){var e=this.x.initialDelta,t=this.y.initialDelta;return Math.sqrt(e*e+t*t)<=this.threshold}});function z(e){var t=l.eventMap.up.split(" "),i=0,n=t.length;for(;i<n;i++)e(t[i])}var g=m.extend({init:function(e,t){var i=this,n,r=l.guid();t=t||{};n=i.filter=t.filter;i.threshold=t.threshold||y;i.minHold=t.minHold||_;i.touches=[];i._maxTouches=t.multiTouch?2:1;i.allowSelection=t.allowSelection;i.captureUpIfMoved=t.captureUpIfMoved;i.useClickAsTap=!t.fastTap&&!c.delayedClick();i.eventNS=r;i._clicks=0;i.supportDoubleTap=t.supportDoubleTap;e=u(e).handler(i);m.fn.init.call(i);h(i,{element:e,surface:t.global&&I?u(e[0].ownerDocument.documentElement):u(t.surface||e),stopPropagation:t.stopPropagation,pressed:false});i.surface.handler(i).on(l.applyEventMap("move",r),"_move").on(l.applyEventMap("up cancel",r),"_end");e.on(l.applyEventMap("down",r),n,"_start");if(i.useClickAsTap)e.on(l.applyEventMap("click",r),n,"_click");if(c.pointers||c.msPointers)if(c.browser.version<11){var a="pinch-zoom double-tap-zoom";e.css("-ms-touch-action",t.touchAction&&t.touchAction!="none"?a+" "+t.touchAction:a)}else e.css("touch-action",t.touchAction||"none");if(t.preventDragEvent)e.on(l.applyEventMap("dragstart",r),l.preventDefault);e.on(l.applyEventMap("mousedown",r),n,{root:e},"_select");if(i.captureUpIfMoved&&c.eventCapture){var o=i.surface[0],s=i.preventIfMoving.bind(i);z(function(e){o.addEventListener(e,s,true)})}i.bind([b,w,p,S,k,f,d,T,C,A,M,D,E,x],t)},preventIfMoving:function(e){if(this._isMoved())e.preventDefault()},destroy:function(){var t=this;if(t._destroyed)return;t._destroyed=true;if(t.captureUpIfMoved&&c.eventCapture){var i=t.surface[0];z(function(e){i.removeEventListener(e,t.preventIfMoving)})}t.element.kendoDestroy(t.eventNS);t.surface.kendoDestroy(t.eventNS);t.element.removeData("handler");t.surface.removeData("handler");t._disposeAll();t.unbind();delete t.surface;delete t.element;delete t.currentTarget},capture:function(){g.current=this},cancel:function(){this._disposeAll();this.trigger(C)},notify:function(e,t){var i=this,n=i.touches;if(this._isMultiTouch()){switch(e){case f:e=M;break;case d:e=D;break;case p:e=E;break}h(t,{touches:n},P(n[0],n[1]))}return this.trigger(e,h(t,{type:e}))},press:function(e,t,i){this._apiCall("_start",e,t,i)},move:function(e,t){this._apiCall("_move",e,t)},end:function(e,t){this._apiCall("_end",e,t)},_isMultiTouch:function(){return this.touches.length>1},_maxTouchesReached:function(){return this.touches.length>=this._maxTouches},_disposeAll:function(){var e=this.touches;while(e.length>0)e.pop().dispose()},_isMoved:function(){return u.grep(this.touches,function(e){return e.isMoved()}).length},_select:function(e){if(!this.allowSelection||this.trigger(x,{event:e}))e.preventDefault()},_start:function(e){var t=this,i=0,n=t.filter,r,a=v(e),o=a.length,s,l=e.which;if(l&&l>1||t._maxTouchesReached())return;g.current=null;t.currentTarget=e.currentTarget;if(t.stopPropagation)e.stopPropagation();for(;i<o;i++){if(t._maxTouchesReached())break;s=a[i];if(n)r=u(s.currentTarget);else r=t.element;if(!r.length)continue;s=new O(t,r,s);t.touches.push(s);s.press();if(t._isMultiTouch())t.notify("gesturestart",{})}},_move:function(e){this._eachTouch("move",e)},_end:function(e){this._eachTouch("end",e)},_click:function(e){var t={touch:{initialTouch:e.target,target:u(e.currentTarget),endTime:a(),x:{location:e.pageX,client:e.clientX},y:{location:e.pageY,client:e.clientY}},x:e.pageX,y:e.pageY,target:u(e.currentTarget),event:e,type:"tap"};if(this.trigger("tap",t))e.preventDefault()},_eachTouch:function(e,t){var i=this,n={},r=v(t),a=i.touches,o,s,l,u;for(o=0;o<a.length;o++){s=a[o];n[s.id]=s}for(o=0;o<r.length;o++){l=r[o];u=n[l.id];if(u)u[e](l)}},_apiCall:function(e,t,i,n){this[e]({api:true,pageX:t,pageY:i,clientX:t,clientY:i,target:u(n||this.element)[0],stopPropagation:u.noop,preventDefault:u.noop})}});return g.defaultThreshold=function(e){y=e},g.minHold=function(e){_=e},l.getTouches=v,l.touchDelta=P,l.UserEvents=g,window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.draganddrop.min",["kendo.core.min","kendo.userevents.min"],function(){var e={id:"draganddrop",name:"Drag & drop",category:"framework",description:"Drag & drop functionality for any DOM element.",depends:["core","userevents"]},l=window.kendo.jQuery,d=void 0,u=window.kendo,p=u.support,h=window.document,v=l(window),t=u.Class,a=u.ui.Widget,r=u.Observable,g=u.UserEvents,o=l.extend,m=u.getOffset,_={},s={},c={},n,y=u.elementUnderCursor,b="keyup",f="change",w="dragstart",i="hold",x="drag",k="dragend",C="dragcancel",S="hintDestroyed",T="dragenter",A="dragleave",M="drop";function D(e,t){try{return l.contains(e,t)||e==t}catch(e){return false}}function E(e,t){return parseInt(e.css(t),10)||0}function I(e,t){return Math.min(Math.max(e,t.min),t.max)}function P(e,t){var i=m(e),n=u._outerWidth,r=u._outerHeight,a=i.left+E(e,"borderLeftWidth")+E(e,"paddingLeft"),o=i.top+E(e,"borderTopWidth")+E(e,"paddingTop"),s=a+e.width()-n(t,true),l=o+e.height()-r(t,true);return{x:{min:a,max:s},y:{min:o,max:l}}}function B(e,t,i){var n,r,a=0,o=t&&t.length,s=i&&i.length;while(e&&e.parentNode){for(a=0;a<o;a++){n=t[a];if(n.element[0]===e)return{target:n,targetElement:e}}for(a=0;a<s;a++){r=i[a];if(l.contains(r.element[0],e)&&p.matchesSelector.call(e,r.options.filter))return{target:r,targetElement:e}}e=e.parentNode}return d}var O=r.extend({init:function(e,t){var i=this,n=e[0];i.capture=false;if(n.addEventListener){l.each(u.eventMap.down.split(" "),function(){n.addEventListener(this,i._press.bind(i),true)});l.each(u.eventMap.up.split(" "),function(){n.addEventListener(this,i._release.bind(i),true)})}else{l.each(u.eventMap.down.split(" "),function(){n.attachEvent(this,i._press.bind(i))});l.each(u.eventMap.up.split(" "),function(){n.attachEvent(this,i._release.bind(i))})}r.fn.init.call(i);i.bind(["press","release"],t||{})},captureNext:function(){this.capture=true},cancelCapture:function(){this.capture=false},_press:function(e){var t=this;t.trigger("press");if(t.capture)e.preventDefault()},_release:function(e){var t=this;t.trigger("release");if(t.capture){e.preventDefault();t.cancelCapture()}}}),z=r.extend({init:function(e){var t=this;r.fn.init.call(t);t.forcedEnabled=false;l.extend(t,e);t.scale=1;if(t.horizontal){t.measure="offsetWidth";t.scrollSize="scrollWidth";t.axis="x"}else{t.measure="offsetHeight";t.scrollSize="scrollHeight";t.axis="y"}},makeVirtual:function(){l.extend(this,{virtual:true,forcedEnabled:true,_virtualMin:0,_virtualMax:0})},virtualSize:function(e,t){if(this._virtualMin!==e||this._virtualMax!==t){this._virtualMin=e;this._virtualMax=t;this.update()}},outOfBounds:function(e){return e>this.max||e<this.min},forceEnabled:function(){this.forcedEnabled=true},getSize:function(){return this.container[0][this.measure]},getTotal:function(){return this.element[0][this.scrollSize]},rescale:function(e){this.scale=e},update:function(e){var t=this,i=t.virtual?t._virtualMax:t.getTotal(),n=i*t.scale,r=t.getSize();if(i===0&&!t.forcedEnabled)return;t.max=t.virtual?-t._virtualMin:0;t.size=r;t.total=n;t.min=Math.min(t.max,r-n);t.minScale=r/i;t.centerOffset=(n-r)/2;t.enabled=t.forcedEnabled||n>r;if(!e)t.trigger(f,t)}}),L=r.extend({init:function(e){var t=this;r.fn.init.call(t);t.x=new z(o({horizontal:true},e));t.y=new z(o({horizontal:false},e));t.container=e.container;t.forcedMinScale=e.minScale;t.maxScale=e.maxScale||100;t.bind(f,e)},rescale:function(e){this.x.rescale(e);this.y.rescale(e);this.refresh()},centerCoordinates:function(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}},refresh:function(){var e=this;e.x.update();e.y.update();e.enabled=e.x.enabled||e.y.enabled;e.minScale=e.forcedMinScale||Math.min(e.x.minScale,e.y.minScale);e.fitScale=Math.max(e.x.minScale,e.y.minScale);e.trigger(f)}}),R=r.extend({init:function(e){var t=this;o(t,e);r.fn.init.call(t)},outOfBounds:function(){return this.dimension.outOfBounds(this.movable[this.axis])},dragMove:function(e){var t=this,i=t.dimension,n=t.axis,r=t.movable,a=r[n]+e;if(!i.enabled)return;if(a<i.min&&e<0||a>i.max&&e>0)e*=t.resistance;r.translateAxis(n,e);t.trigger(f,t)}}),F=t.extend({init:function(e){var c=this,h,f,t,d;o(c,{elastic:true},e);t=c.elastic?.5:0;d=c.movable;c.x=h=new R({axis:"x",dimension:c.dimensions.x,resistance:t,movable:d});c.y=f=new R({axis:"y",dimension:c.dimensions.y,resistance:t,movable:d});c.userEvents.bind(["press","move","end","gesturestart","gesturechange"],{gesturestart:function(e){c.gesture=e;c.offset=c.dimensions.container.offset()},press:function(e){if(l(e.event.target).closest("a").is("[data-navigate-on-press=true]"))e.sender.cancel()},gesturechange:function(e){var t=c.gesture,i=t.center,n=e.center,r=e.distance/t.distance,a=c.dimensions.minScale,o=c.dimensions.maxScale,s;if(d.scale<=a&&r<1)r+=(1-r)*.8;if(d.scale*r>=o)r=o/d.scale;var l=d.x+c.offset.left,u=d.y+c.offset.top;s={x:(l-i.x)*r+n.x-l,y:(u-i.y)*r+n.y-u};d.scaleWith(r);h.dragMove(s.x);f.dragMove(s.y);c.dimensions.rescale(d.scale);c.gesture=e;e.preventDefault()},move:function(e){if(e.event.target.tagName.match(/textarea|input/i))return;if(h.dimension.enabled||f.dimension.enabled){h.dragMove(e.x.delta);f.dragMove(e.y.delta);e.preventDefault()}else e.touch.skip()},end:function(e){e.preventDefault()}})}}),V=p.transitions.prefix+"Transform",N;if(p.hasHW3D)N=function(e,t,i){return"translate3d("+e+"px,"+t+"px,0) scale("+i+")"};else N=function(e,t,i){return"translate("+e+"px,"+t+"px) scale("+i+")"};var H=r.extend({init:function(e){var t=this;r.fn.init.call(t);t.element=l(e);t.element[0].style.webkitTransformOrigin="left top";t.x=0;t.y=0;t.scale=1;t._saveCoordinates(N(t.x,t.y,t.scale))},translateAxis:function(e,t){this[e]+=t;this.refresh()},scaleTo:function(e){this.scale=e;this.refresh()},scaleWith:function(e){this.scale*=e;this.refresh()},translate:function(e){this.x+=e.x;this.y+=e.y;this.refresh()},moveAxis:function(e,t){this[e]=t;this.refresh()},moveTo:function(e){o(this,e);this.refresh()},refresh:function(){var e=this,t=e.x,i=e.y,n;if(e.round){t=Math.round(t);i=Math.round(i)}n=N(t,i,e.scale);if(n!=e.coordinates){if(u.support.browser.msie&&u.support.browser.version<10){e.element[0].style.position="absolute";e.element[0].style.left=e.x+"px";e.element[0].style.top=e.y+"px"}else e.element[0].style[V]=n;e._saveCoordinates(n);e.trigger(f)}},_saveCoordinates:function(e){this.coordinates=e}});function U(e,t){var i=t.options.group,n=e[i],r;a.fn.destroy.call(t);if(n.length>1){for(r=0;r<n.length;r++)if(n[r]==t){n.splice(r,1);break}}else{n.length=0;delete e[i]}}var j=a.extend({init:function(e,t){var i=this;a.fn.init.call(i,e,t);var n=i.options.group;if(!(n in s))s[n]=[i];else s[n].push(i)},events:[T,A,M],options:{name:"DropTarget",group:"default"},destroy:function(){U(s,this)},_trigger:function(e,t){var i=this,n=_[i.options.group];if(n)return i.trigger(e,o({},t.event,{draggable:n,dropTarget:t.dropTarget}))},_over:function(e){this._trigger(T,e)},_out:function(e){this._trigger(A,e)},_drop:function(e){var t=this,i=_[t.options.group];if(i)i.dropped=!t._trigger(M,e)}}),G=(j.destroyGroup=function(e){var t=s[e]||c[e],i;if(t){for(i=0;i<t.length;i++)a.fn.destroy.call(t[i]);t.length=0;delete s[e];delete c[e]}},j._cache=s,j.extend({init:function(e,t){var i=this;a.fn.init.call(i,e,t);var n=i.options.group;if(!(n in c))c[n]=[i];else c[n].push(i)},destroy:function(){U(c,this)},options:{name:"DropTargetArea",group:"default",filter:null}})),W=a.extend({init:function(e,t){var i=this;a.fn.init.call(i,e,t);i._activated=false;i.userEvents=new g(i.element,{global:true,allowSelection:true,filter:i.options.filter,threshold:i.options.distance,start:i._start.bind(i),hold:i._hold.bind(i),move:i._drag.bind(i),end:i._end.bind(i),cancel:i._cancel.bind(i),select:i._select.bind(i)});if(u.support.touch)i.element.find(i.options.filter).css("touch-action","none");i._afterEndHandler=i._afterEnd.bind(i);i._captureEscape=i._captureEscape.bind(i)},events:[i,w,x,k,C,S],options:{name:"Draggable",distance:u.support.touch?0:5,group:"default",cursorOffset:null,axis:null,container:null,filter:null,ignore:null,holdToDrag:false,autoScroll:false,dropped:false},cancelHold:function(){this._activated=false},_captureEscape:function(e){var t=this;if(e.keyCode===u.keys.ESC){t._trigger(C,{event:e});t.userEvents.cancel()}},_updateHint:function(e){var t=this,i,n=t.options,r=t.boundaries,a=n.axis,o=t.options.cursorOffset;if(o)i={left:e.x.location+o.left,top:e.y.location+o.top};else{t.hintOffset.left+=e.x.delta;t.hintOffset.top+=e.y.delta;i=l.extend({},t.hintOffset)}if(r){i.top=I(i.top,r.y);i.left=I(i.left,r.x)}if(a==="x")delete i.top;else if(a==="y")delete i.left;t.hint.css(i)},_shouldIgnoreTarget:function(e){var t=this.options.ignore;return t&&l(e).is(t)},_select:function(e){if(!this._shouldIgnoreTarget(e.event.target))e.preventDefault()},_start:function(t){var i=this,e=i.options,n=e.container?l(e.container):null,r=e.hint;if(this._shouldIgnoreTarget(t.touch.initialTouch)||e.holdToDrag&&!i._activated){i.userEvents.cancel();return}i.currentTarget=t.target;i.currentTargetOffset=m(i.currentTarget);if(r){if(i.hint)i.hint.stop(true,true).remove();i.hint=u.isFunction(r)?l(r.call(i,i.currentTarget)):r;var a=m(i.currentTarget);i.hintOffset=a;i.hint.css({position:"absolute",zIndex:2e4,left:a.left,top:a.top}).appendTo(h.body);i.angular("compile",function(){i.hint.removeAttr("ng-repeat");var e=l(t.target);while(!e.data("$$kendoScope")&&e.length)e=e.parent();return{elements:i.hint.get(),scopeFrom:e.data("$$kendoScope")}})}_[e.group]=i;i.dropped=false;if(n)i.boundaries=P(n,i.hint);l(h).on(b,i._captureEscape);if(i._trigger(w,t)){i.userEvents.cancel();i._afterEnd()}i.userEvents.capture()},_hold:function(e){this.currentTarget=e.target;if(this._trigger(i,e))this.userEvents.cancel();else this._activated=true},_drag:function(e){e.preventDefault();var t=this._elementUnderCursor(e);if(this.options.autoScroll&&this._cursorElement!==t){this._scrollableParent=$(t);this._cursorElement=t}this._lastEvent=e;this._processMovement(e,t);if(this.options.autoScroll)if(this._scrollableParent[0]){var i=X(e.x.location,e.y.location,q(this._scrollableParent));this._scrollCompenstation=l.extend({},this.hintOffset);this._scrollVelocity=i;if(i.y===0&&i.x===0){clearInterval(this._scrollInterval);this._scrollInterval=null}else if(!this._scrollInterval)this._scrollInterval=setInterval(this._autoScroll.bind(this),50)}if(this.hint)this._updateHint(e)},_processMovement:function(i,e){this._withDropTarget(e,function(e,t){if(!e){if(n){n._trigger(A,o(i,{dropTarget:l(n.targetElement)}));n=null}return}if(n){if(t===n.targetElement)return;n._trigger(A,o(i,{dropTarget:l(n.targetElement)}))}e._trigger(T,o(i,{dropTarget:l(t)}));n=o(e,{targetElement:t})});this._trigger(x,o(i,{dropTarget:n,elementUnderCursor:e}))},_autoScroll:function(){var e=this._scrollableParent[0],t=this._scrollVelocity,i=this._scrollCompenstation;if(!e)return;var c=this._elementUnderCursor(this._lastEvent);this._processMovement(this._lastEvent,c);var n,r;var a=e===Y()[0];if(a){n=h.body.scrollHeight>v.height();r=h.body.scrollWidth>v.width()}else{n=e.offsetHeight<=e.scrollHeight;r=e.offsetWidth<=e.scrollWidth}var o=e.scrollTop+t.y;var s=n&&o>0&&o<e.scrollHeight;var l=e.scrollLeft+t.x;var u=r&&l>0&&l<e.scrollWidth;if(s)e.scrollTop+=t.y;else if(n&&o<0)e.scrollTop=0;if(u)e.scrollLeft+=t.x;else if(r&&l<0)e.scrollLeft=0;if(this.hint&&a&&(u||s)){if(s)i.top+=t.y;if(u)i.left+=t.x;this.hint.css(i)}},_end:function(i){this._withDropTarget(this._elementUnderCursor(i),function(e,t){if(e){e._drop(o({},i,{dropTarget:l(t)}));n=null}});clearInterval(this._scrollInterval);this._scrollInterval=null;this._cancel(this._trigger(k,i))},_cancel:function(e){var t=this;t._scrollableParent=null;this._cursorElement=null;clearInterval(this._scrollInterval);t._activated=false;if(t.hint&&!t.dropped)setTimeout(function(){t.hint.stop(true,true);if(e)t._afterEndHandler();else t.hint.animate(t.currentTargetOffset,"fast",t._afterEndHandler)},0);else t._afterEnd()},_trigger:function(e,t){var i=this;return i.trigger(e,o({},t.event,{x:t.x,y:t.y,currentTarget:i.currentTarget,initialTarget:t.touch?t.touch.initialTouch:null,dropTarget:t.dropTarget,elementUnderCursor:t.elementUnderCursor}))},_elementUnderCursor:function(e){var t=y(e),i=this.hint;if(i&&D(i[0],t)){i.hide();t=y(e);if(!t)t=y(e);i.show()}return t},_withDropTarget:function(e,t){var i,n=this.options.group,r=s[n],a=c[n];if(r&&r.length||a&&a.length){i=B(e,r,a);if(i)t(i.target,i.targetElement);else t()}},destroy:function(){var e=this;a.fn.destroy.call(e);e._afterEnd();e.userEvents.destroy();this._scrollableParent=null;this._cursorElement=null;clearInterval(this._scrollInterval);e.currentTarget=null},_afterEnd:function(){var e=this;if(e.hint)e.hint.remove();delete _[e.options.group];e.trigger("destroy");e.trigger(S);l(h).off(b,e._captureEscape)}});function q(e){var t=Y()[0],i,n,r;if(e[0]===t){n=t.scrollTop;r=t.scrollLeft;return{top:n,left:r,bottom:n+v.height(),right:r+v.width()}}else{i=e.offset();i.bottom=i.top+e.height();i.right=i.left+e.width();return i}}function Y(){return l(u.support.browser.edge||u.support.browser.safari?h.body:h.documentElement)}function $(e){var t=Y();if(!e||e===h.body||e===h.documentElement)return t;var i=l(e)[0];while(i&&!u.isScrollable(i)&&i!==h.body)i=i.parentNode;if(i===h.body)return t;return l(i)}function X(e,t,i){var n={x:0,y:0};var r=50;if(e-i.left<r)n.x=-(r-(e-i.left));else if(i.right-e<r)n.x=r-(i.right-e);if(t-i.top<r)n.y=-(r-(t-i.top));else if(i.bottom-t<r)n.y=r-(i.bottom-t);return n}return u.ui.plugin(j),u.ui.plugin(G),u.ui.plugin(W),u.TapCapture=O,u.containerBoundaries=P,o(u.ui,{Pane:F,PaneDimensions:L,Movable:H}),u.ui.Draggable.utils={autoScrollVelocity:X,scrollableViewPort:q,findScrollableParent:$},window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.mobile.scroller.min",["kendo.fx.min","kendo.draganddrop.min"],function(){var e={id:"mobile.scroller",name:"Scroller",category:"mobile",description:"The Kendo Mobile Scroller widget enables touch friendly kinetic scrolling for the contents of a given DOM element.",depends:["fx","draganddrop"]},f=window.kendo.jQuery,a=void 0,d=window.kendo,o,s=d.effects,l=d.mobile.ui,p=f.extend,v=l.Widget,u=d.Class,_=d.ui.Movable,y=d.ui.Pane,b=d.ui.PaneDimensions,c=s.Transition,n=s.Animation,g=Math.abs,h=500,w=.7,x=.96,k=10,r=55,C=.5,S=5,t="km-scroller-release",i="km-scroller-refresh",T="pull",m="change",A="resize",M="scroll",D=2,E=n.extend({init:function(e){var t=this;n.fn.init.call(t);p(t,e);t.userEvents.bind("gestureend",t.start.bind(t));t.tapCapture.bind("press",t.cancel.bind(t))},enabled:function(){return this.movable.scale<this.dimensions.minScale},done:function(){return this.dimensions.minScale-this.movable.scale<.01},tick:function(){var e=this.movable;e.scaleWith(1.1);this.dimensions.rescale(e.scale)},onEnd:function(){var e=this.movable;e.scaleTo(this.dimensions.minScale);this.dimensions.rescale(e.scale)}}),I=n.extend({init:function(e){var t=this;n.fn.init.call(t);p(t,e,{transition:new c({axis:e.axis,movable:e.movable,onEnd:function(){t._end()}})});t.tapCapture.bind("press",function(){t.cancel()});t.userEvents.bind("end",t.start.bind(t));t.userEvents.bind("gestureend",t.start.bind(t));t.userEvents.bind("tap",t.onEnd.bind(t))},onCancel:function(){this.transition.cancel()},freeze:function(e){var t=this;t.cancel();t._moveTo(e)},onEnd:function(){var e=this;if(e.paneAxis.outOfBounds())e._snapBack();else e._end()},done:function(){return g(this.velocity)<1},start:function(e){var t=this,i;if(!t.dimension.enabled)return;if(t.paneAxis.outOfBounds())if(t.transition._started){t.transition.cancel();t.velocity=Math.min(e.touch[t.axis].velocity*t.velocityMultiplier,r);n.fn.start.call(t)}else t._snapBack();else{i=e.touch.id===D?0:e.touch[t.axis].velocity;t.velocity=Math.max(Math.min(i*t.velocityMultiplier,r),-r);t.tapCapture.captureNext();n.fn.start.call(t)}},tick:function(){var e=this,t=e.dimension,i=e.paneAxis.outOfBounds()?C:e.friction,n=e.velocity*=i,r=e.movable[e.axis]+n;if(!e.elastic&&t.outOfBounds(r)){r=Math.max(Math.min(r,t.max),t.min);e.velocity=0}e.movable.moveAxis(e.axis,r)},_end:function(){this.tapCapture.cancelCapture();this.end()},_snapBack:function(){var e=this,t=e.dimension,i=e.movable[e.axis]>t.max?t.max:t.min;e._moveTo(i)},_moveTo:function(e){this.transition.moveTo({location:e,duration:h,ease:c.easeOutExpo})}}),P=n.extend({init:function(e){var t=this;d.effects.Animation.fn.init.call(this);p(t,e,{origin:{},destination:{},offset:{}})},tick:function(){this._updateCoordinates();this.moveTo(this.origin)},done:function(){return g(this.offset.y)<S&&g(this.offset.x)<S},onEnd:function(){this.moveTo(this.destination);if(this.callback)this.callback.call()},setCoordinates:function(e,t){this.offset={};this.origin=e;this.destination=t},setCallback:function(e){if(e&&d.isFunction(e))this.callback=e;else e=a},_updateCoordinates:function(){this.offset={x:(this.destination.x-this.origin.x)/4,y:(this.destination.y-this.origin.y)/4};this.origin={y:this.origin.y+this.offset.y,x:this.origin.x+this.offset.x}}}),B=u.extend({init:function(e){var t=this,i=e.axis==="x",n=f('<div role="scrollbar" aria-controls="'+e.controlsId+'" class="km-touch-scrollbar km-'+(i?"horizontal":"vertical")+'-scrollbar" />');if(i)n.attr("aria-orientation","horizontal");p(t,e,{element:n,elementSize:0,movable:new _(n),scrollMovable:e.movable,alwaysVisible:e.alwaysVisible,size:i?"width":"height"});t.scrollMovable.bind(m,t.refresh.bind(t));t.container.append(n);if(e.alwaysVisible)t.show()},refresh:function(){var e=this,t=e.axis,i=e.dimension,n=i.size,r=e.scrollMovable,a=n/i.total,o=Math.round(-r[t]*a),s=Math.round(n*a);if(a>=1)this.element.css("display","none");else this.element.css("display","");if(o+s>n)s=n-o;else if(o<0){s+=o;o=0}if(e.elementSize!=s){e.element.css(e.size,s+"px");e.elementSize=s}e._ariaValue(o,i.size-e.elementSize);e.movable.moveAxis(t,o)},show:function(){this.element.css({opacity:w,visibility:"visible"})},hide:function(){if(!this.alwaysVisible)this.element.css({opacity:0})},_ariaValue:function(e,t){var i=this.element;if(e>t)e=t;i.attr("aria-valuemax",t);i.attr("aria-valuenow",e)}}),O=v.extend({init:function(e,t){var o=this;v.fn.init.call(o,e,t);e=o.element;o._native=o.options.useNative&&d.support.hasNativeScrolling;if(o._native){e.addClass("km-native-scroller").prepend('<div class="km-scroll-header"/>');p(o,{scrollElement:e,fixedContainer:e.children().first()});return}e.css("overflow","hidden").addClass("km-scroll-wrapper").wrapInner('<div class="km-scroll-container"/>').prepend('<div class="km-scroll-header"/>');var i=e.children().eq(1),n=new d.TapCapture(e),r=new _(i),s=new b({element:i,container:e,forcedEnabled:o.options.zoom}),l=this.options.avoidScrolling,u=new d.UserEvents(e,{touchAction:"pan-y",fastTap:true,allowSelection:true,preventDragEvent:true,captureUpIfMoved:true,multiTouch:o.options.zoom,supportDoubleTap:o.options.supportDoubleTap,start:function(e){s.refresh();var t=g(e.x.velocity),i=g(e.y.velocity),n=t*2>=i,r=f.contains(o.fixedContainer[0],e.event.target),a=i*2>=t;if(!r&&!l(e)&&o.enabled&&(s.x.enabled&&n||s.y.enabled&&a))u.capture();else u.cancel()}}),a=new y({movable:r,dimensions:s,userEvents:u,elastic:o.options.elastic}),c=new E({movable:r,dimensions:s,userEvents:u,tapCapture:n}),h=new P({moveTo:function(e){o.scrollTo(e.x,e.y)}});r.bind(m,function(){o.scrollTop=-r.y;o.scrollLeft=-r.x;o.trigger(M,{scrollTop:o.scrollTop,scrollLeft:o.scrollLeft})});if(o.options.mousewheelScrolling)e.on("DOMMouseScroll mousewheel",this._wheelScroll.bind(this));p(o,{movable:r,dimensions:s,zoomSnapBack:c,animatedScroller:h,userEvents:u,pane:a,tapCapture:n,pulled:false,enabled:true,scrollElement:i,scrollTop:0,scrollLeft:0,fixedContainer:e.children().first()});o._initAxis("x");o._initAxis("y");o._wheelEnd=function(){o._wheel=false;o.userEvents.end(0,o._wheelY)};s.refresh();if(o.options.pullToRefresh)o._initPullToRefresh()},_wheelScroll:function(e){if(e.ctrlKey)return;if(!this._wheel){this._wheel=true;this._wheelY=0;this.userEvents.press(0,this._wheelY)}clearTimeout(this._wheelTimeout);this._wheelTimeout=setTimeout(this._wheelEnd,50);var t=d.wheelDeltaY(e);if(t){this._wheelY+=t;this.userEvents.move(0,this._wheelY)}e.preventDefault()},makeVirtual:function(){this.dimensions.y.makeVirtual()},virtualSize:function(e,t){this.dimensions.y.virtualSize(e,t)},height:function(){return this.dimensions.y.size},scrollHeight:function(){return this.scrollElement[0].scrollHeight},scrollWidth:function(){return this.scrollElement[0].scrollWidth},options:{name:"Scroller",zoom:false,pullOffset:140,visibleScrollHints:false,elastic:true,useNative:false,mousewheelScrolling:true,avoidScrolling:function(){return false},pullToRefresh:false,messages:{pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"}},events:[T,M,A],_resize:function(){if(!this._native)this.contentResized()},setOptions:function(e){var t=this;v.fn.setOptions.call(t,e);if(e.pullToRefresh)t._initPullToRefresh()},reset:function(){if(this._native)this.scrollElement.scrollTop(0);else{this.movable.moveTo({x:0,y:0});this._scale(1)}},contentResized:function(){this.dimensions.refresh();if(this.pane.x.outOfBounds())this.movable.moveAxis("x",this.dimensions.x.min);if(this.pane.y.outOfBounds())this.movable.moveAxis("y",this.dimensions.y.min)},zoomOut:function(){var e=this.dimensions;e.refresh();this._scale(e.fitScale);this.movable.moveTo(e.centerCoordinates())},enable:function(){this.enabled=true},disable:function(){this.enabled=false},scrollTo:function(e,t){if(this._native){d.scrollLeft(this.scrollElement,g(e));this.scrollElement.scrollTop(g(t))}else{this.dimensions.refresh();this.movable.moveTo({x:e,y:t})}},animatedScrollTo:function(e,t,i){var n,r;if(this._native)this.scrollTo(e,t);else{n={x:this.movable.x,y:this.movable.y};r={x:e,y:t};this.animatedScroller.setCoordinates(n,r);this.animatedScroller.setCallback(i);this.animatedScroller.start()}},pullHandled:function(){var e=this;e.refreshHint.removeClass(i);e.hintContainer.html(e.pullTemplate({}));e.yinertia.onEnd();e.xinertia.onEnd();e.userEvents.cancel()},destroy:function(){v.fn.destroy.call(this);if(this.userEvents)this.userEvents.destroy()},_scale:function(e){this.dimensions.rescale(e);this.movable.scaleTo(e)},_initPullToRefresh:function(){var e=this;e.dimensions.y.forceEnabled();e.pullTemplate=d.template(e.options.messages.pullTemplate);e.releaseTemplate=d.template(e.options.messages.releaseTemplate);e.refreshTemplate=d.template(e.options.messages.refreshTemplate);e.scrollElement.prepend('<span class="km-scroller-pull"><span class="km-icon"></span><span class="km-loading-left"></span><span class="km-loading-right"></span><span class="km-template">'+e.pullTemplate({})+"</span></span>");e.refreshHint=e.scrollElement.children().first();e.hintContainer=e.refreshHint.children(".km-template");e.pane.y.bind("change",e._paneChange.bind(e));e.userEvents.bind("end",e._dragEnd.bind(e))},_dragEnd:function(){var e=this;if(!e.pulled)return;e.pulled=false;e.refreshHint.removeClass(t).addClass(i);e.hintContainer.html(e.refreshTemplate({}));e.yinertia.freeze(e.options.pullOffset/2);e.trigger("pull")},_paneChange:function(){var e=this;if(e.movable.y/C>e.options.pullOffset){if(!e.pulled){e.pulled=true;e.refreshHint.removeClass(i).addClass(t);e.hintContainer.html(e.releaseTemplate({}))}}else if(e.pulled){e.pulled=false;e.refreshHint.removeClass(t);e.hintContainer.html(e.pullTemplate({}))}},_initAxis:function(e){var t=this,i=t.element.attr("id"),n=t.movable,r=t.dimensions[e],a=t.tapCapture,o=t.pane[e],s;if(!i){i=d.guid();t.element.attr("id",i)}s=new B({axis:e,movable:n,dimension:r,container:t.element,alwaysVisible:t.options.visibleScrollHints,controlsId:i});r.bind(m,function(){s.refresh()});o.bind(m,function(){s.show()});t[e+"inertia"]=new I({axis:e,paneAxis:o,movable:n,tapCapture:a,userEvents:t.userEvents,dimension:r,elastic:t.options.elastic,friction:t.options.friction||x,velocityMultiplier:t.options.velocityMultiplier||k,end:function(){s.hide();t.trigger("scrollEnd",{axis:e,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft})}})}});return l.plugin(O),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.popup.min",["kendo.core.min"],function(){var e={id:"popup",name:"Pop-up",category:"framework",depends:["core"],advanced:true},P=window.kendo.jQuery,f=void 0,B=window.kendo,t=B.ui,a=t.Widget,i=B.Class,O=B.support,z=B.getOffset,L=B._outerWidth,R=B._outerHeight,d="open",s="close",n="deactivate",o="activate",y="center",l="left",b="right",p="top",w="bottom",V="absolute",v="hidden",g="body",N="location",H="position",u="visible",m="effects",c="k-active",_="k-state-border",x=/k-state-border-(\w+)/,k=".k-picker-wrap, .k-dropdown-wrap, .k-link",C="down",S=P(document.documentElement),T=P(window),A="scroll",M,D=O.transitions.css+"transform",F=P.extend,r=".kendoPopup",h=["font-size","font-family","font-stretch","font-style","font-weight","line-height"];function E(e,t){if(!e||!t)return false;return e===t||P.contains(e,t)}var I=a.extend({init:function(e,t){var i=this,n;t=t||{};if(t.isRtl){t.origin=t.origin||w+" "+b;t.position=t.position||p+" "+b}a.fn.init.call(i,e,t);e=i.element;t=i.options;i.collisions=t.collision?t.collision.split(" "):[];i.downEvent=B.applyEventMap(C,B.guid());if(i.collisions.length===1)i.collisions.push(i.collisions[0]);n=P(i.options.anchor).closest(".k-popup,.k-group").filter(":not([class^=km-])");t.appendTo=P(P(t.appendTo)[0]||n[0]||document.body);i.element.hide().addClass("k-popup k-group k-reset").toggleClass("k-rtl",!!t.isRtl).css({position:V}).appendTo(t.appendTo).attr("aria-hidden",true).on("mouseenter"+r,function(){i._hovered=true}).on("wheel"+r,function(e){var t=P(e.target).find(".k-list");var i=t.parent();if(t.length&&t.is(":visible")&&(i.scrollTop()===0&&e.originalEvent.deltaY<0||i.scrollTop()===i.prop("scrollHeight")-i.prop("offsetHeight")&&e.originalEvent.deltaY>0))e.preventDefault()}).on("mouseleave"+r,function(){i._hovered=false});i.wrapper=P();if(t.animation===false)t.animation={open:{effects:{}},close:{hide:true,effects:{}}};F(t.animation.open,{complete:function(){i.wrapper.css({overflow:u});i._activated=true;i._trigger(o)}});F(t.animation.close,{complete:function(){i._animationClose()}});i._mousedownProxy=function(e){i._mousedown(e)};if(O.mobileOS.android)i._resizeProxy=function(e){setTimeout(function(){i._resize(e)},600)};else i._resizeProxy=function(e){i._resize(e)};if(t.toggleTarget)P(t.toggleTarget).on(t.toggleEvent+r,i.toggle.bind(i))},events:[d,o,s,n],options:{name:"Popup",toggleEvent:"click",origin:w+" "+l,position:p+" "+l,anchor:g,appendTo:null,collision:"flip fit",viewport:window,copyAnchorStyles:true,autosize:false,modal:false,adjustSize:{width:0,height:0},animation:{open:{effects:"slideIn:down",transition:true,duration:200},close:{duration:100,hide:true}},omitOriginOffsets:false},_animationClose:function(){var e=this;var t=e.wrapper.data(N);e.wrapper.hide();if(t)e.wrapper.css(t);if(e.options.anchor!=g)e._hideDirClass();e._closing=false;e._trigger(n)},destroy:function(){var e=this,t=e.options,i=e.element.off(r),n;a.fn.destroy.call(e);if(t.toggleTarget)P(t.toggleTarget).off(r);if(!t.modal){S.off(e.downEvent,e._mousedownProxy);e._toggleResize(false)}B.destroy(e.element.children());i.removeData();if(t.appendTo[0]===document.body){n=i.parent(".k-animation-container");if(n[0])n.remove();else i.remove()}},open:function(e,t){var i=this,n={isFixed:!isNaN(parseInt(t,10)),x:e,y:t},r=i.element,a=i.options,o,s,l=P(a.anchor),c=r[0]&&r.hasClass("km-widget"),u=r.find("[role='listbox']");if(!i.visible()){if(a.copyAnchorStyles){if(c&&h[0]=="font-size")h.shift();r.css(B.getComputedStyles(l[0],h))}if(r.data("animating")||i._trigger(d))return;i._activated=false;if(!a.modal){S.off(i.downEvent,i._mousedownProxy).on(i.downEvent,i._mousedownProxy);i._toggleResize(false);i._toggleResize(true)}i.wrapper=s=B.wrap(r,a.autosize).css({overflow:v,display:"block",position:V}).attr("aria-hidden",false);if(u.attr("aria-label"))s.attr("aria-label",u.attr("aria-label"));else if(u.attr("aria-labelledby"))s.attr("aria-labelledby",u.attr("aria-labelledby"));if(O.mobileOS.android)s.css(D,"translatez(0)");s.css(H);if(P(a.appendTo)[0]==document.body)s.css(p,"-10000px");i.flipped=i._position(n);o=i._openAnimation();if(a.anchor!=g)i._showDirClass(o);if(!r.is(":visible")&&r.data("olddisplay")===f){r.show();r.data("olddisplay",r.css("display"));r.hide()}r.data(m,o.effects).kendoStop(true).kendoAnimate(o).attr("aria-hidden",false)}},_location:function(e){var t=this,i=t.element,n=t.options,r,a=P(n.anchor),o=i[0]&&i.hasClass("km-widget");if(n.copyAnchorStyles){if(o&&h[0]=="font-size")h.shift();i.css(B.getComputedStyles(a[0],h))}t.wrapper=r=B.wrap(i,n.autosize).css({overflow:v,display:"block",position:V});if(O.mobileOS.android)r.css(D,"translatez(0)");r.css(H);if(P(n.appendTo)[0]==document.body)r.css(p,"-10000px");t._position(e||{});var s=r.offset();return{width:B._outerWidth(r),height:B._outerHeight(r),left:s.left,top:s.top}},_openAnimation:function(){var e=F(true,{},this.options.animation.open);e.effects=B.parseEffects(e.effects,this.flipped);return e},_hideDirClass:function(){var e=P(this.options.anchor);var t=((e.attr("class")||"").match(x)||["","down"])[1];var i=_+"-"+t;e.removeClass(i).children(k).removeClass(c).removeClass(i);this.element.removeClass(_+"-"+B.directions[t].reverse)},_showDirClass:function(e){var t=e.effects.slideIn?e.effects.slideIn.direction:"down";var i=_+"-"+t;P(this.options.anchor).addClass(i).children(k).addClass(c).addClass(i);this.element.addClass(_+"-"+B.directions[t].reverse)},position:function(){if(this.visible())this.flipped=this._position()},toggle:function(){var e=this;e[e.visible()?s:d]()},visible:function(){return this.element.is(":"+u)},close:function(i){var e=this,t=e.options,n,r,a,o;if(e.visible()){n=e.wrapper[0]?e.wrapper:B.wrap(e.element).hide();e._toggleResize(false);if(e._closing||e._trigger(s)){e._toggleResize(true);return}e.element.find(".k-popup").each(function(){var e=P(this),t=e.data("kendoPopup");if(t)t.close(i)});S.off(e.downEvent,e._mousedownProxy);if(i)r={hide:true,effects:{}};else{r=F(true,{},t.animation.close);a=e.element.data(m);o=r.effects;if(!o&&!B.size(o)&&a&&B.size(a)){r.effects=a;r.reverse=true}e._closing=true}e.element.kendoStop(true).attr("aria-hidden",true);n.css({overflow:v}).attr("aria-hidden",true);e.element.kendoAnimate(r);if(i)e._animationClose()}},_trigger:function(e){return this.trigger(e,{type:e})},_resize:function(e){var t=this;if(O.resize.indexOf(e.type)!==-1){clearTimeout(t._resizeTimeout);t._resizeTimeout=setTimeout(function(){t._position();t._resizeTimeout=null},50)}else if(!t._hovered||t._activated&&t.element.find(".k-list").length>0)t.close()},_toggleResize:function(e){var t=e?"on":"off";var i=O.resize;if(!(O.mobileOS.ios||O.mobileOS.android||O.browser.safari))i+=" "+A;if(e&&!this.scrollableParents)this.scrollableParents=this._scrollableParents();if(this.scrollableParents&&this.scrollableParents.length)this.scrollableParents[t](A,this._resizeProxy);T[t](i,this._resizeProxy)},_mousedown:function(e){var t=this,i=t.element[0],n=t.options,r=P(n.anchor)[0],a=n.toggleTarget,o=B.eventTarget(e),s=P(o).closest(".k-popup"),l=s.parent().parent(".km-shim").length;s=s[0];if(!l&&s&&s!==t.element[0])return;if(P(e.target).closest("a").data("rel")==="popover")return;if(!E(i,o)&&!E(r,o)&&!(a&&E(P(a)[0],o)))t.close()},_fit:function(e,t,i){var n=0;if(e+t>i)n=i-(e+t);if(e<0)n=-e;return n},_flip:function(e,t,i,n,r,a,o){var s=0;o=o||t;if(a!==r&&a!==y&&r!==y){if(e+o>n)s+=-(i+t);if(e+s<0)s+=i+t}return s},_scrollableParents:function(){return P(this.options.anchor).parentsUntil("body").filter(function(e,t){return B.isScrollable(t)})},_position:function(e){var t=this,c=t.element,i=t.wrapper,n=t.options,r=P(n.viewport),a=O.zoomLevel(),h=!!(r[0]==window&&window.innerWidth&&a<=1.02),o=P(n.anchor),f=n.origin.toLowerCase().split(" "),d=n.position.toLowerCase().split(" "),p=t.collisions,v,g,s,m=10002,_=0,y=document.documentElement,b,w,l,x;if(n.viewport===window)w={top:window.pageYOffset||document.documentElement.scrollTop||0,left:window.pageXOffset||document.documentElement.scrollLeft||0};else w=r.offset();if(h){l=window.innerWidth;x=window.innerHeight}else{l=r.width();x=r.height()}if(h&&y.scrollHeight-y.clientHeight>0){var k=n.isRtl?-1:1;l-=k*B.support.scrollbar()}v=o.parents().filter(i.siblings());if(v[0]){s=Math.max(Number(v.css("zIndex")),0);if(s)m=s+10;else{g=o.parentsUntil(v);for(b=g.length;_<b;_++){s=Number(P(g[_]).css("zIndex"));if(s&&m<s)m=s+10}}}i.css("zIndex",m);if(e&&e.isFixed)i.css({left:e.x,top:e.y});else i.css(t._align(f,d));var C=z(i,H,o[0]===i.offsetParent()[0]),S=z(i),T=o.offsetParent().parent(".k-animation-container,.k-popup,.k-group");if(T.length){C=z(i,H,true);S=z(i)}S.top-=w.top;S.left-=w.left;if(!t.wrapper.data(N))i.data(N,F({},C));var A=F({},S),u=F({},C),M=n.adjustSize;if(p[0]==="fit")u.top+=t._fit(A.top,R(i)+M.height,x/a);if(p[1]==="fit")u.left+=t._fit(A.left,L(i)+M.width,l/a);var D=F({},u);var E=R(c);var I=R(i);if(!i.height()&&E)I=I+E;if(p[0]==="flip")u.top+=t._flip(A.top,E,R(o),x/a,f[0],d[0],I);if(p[1]==="flip")u.left+=t._flip(A.left,L(c),L(o),l/a,f[1],d[1],L(i));c.css(H,V);i.css(u);return u.left!=D.left||u.top!=D.top},_align:function(e,t){var i=this,n=i.wrapper,r=P(i.options.anchor),a=e[0],c=e[1],h=t[0],f=t[1],d=z(r),p=P(i.options.appendTo),o,v=L(n),g=R(n)||R(n.children().first()),m=L(r),_=R(r),s=i.options.omitOriginOffsets?0:d.top,l=i.options.omitOriginOffsets?0:d.left,u=Math.round;if(p[0]!=document.body){o=z(p);s-=o.top;l-=o.left}if(a===w)s+=_;if(a===y)s+=u(_/2);if(h===w)s-=g;if(h===y)s-=u(g/2);if(c===b)l+=m;if(c===y)l+=u(m/2);if(f===b)l-=v;if(f===y)l-=u(v/2);return{top:s,left:l}}}),U=(t.plugin(I),B.support.stableSort),j="kendoTabKeyTrap",G="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex], *[contenteditable]",W=i.extend({init:function(e){this.element=P(e);this.element.autoApplyNS(j)},trap:function(){this.element.on("keydown",this._keepInTrap.bind(this))},removeTrap:function(){this.element.kendoDestroy(j)},destroy:function(){this.element.kendoDestroy(j);this.element=f},shouldTrap:function(){return true},_keepInTrap:function(e){if(e.which!==9||!this.shouldTrap()||e.isDefaultPrevented())return;var t=this._focusableElements();var i=this._sortFocusableElements(t);var n=this._nextFocusable(e,i);this._focus(n);e.preventDefault()},_focusableElements:function(){var e=this.element.find(G).filter(function(e,t){return t.tabIndex>=0&&P(t).is(":visible")&&!P(t).is("[disabled]")});if(this.element.is("[tabindex]"))e.push(this.element[0]);return e},_sortFocusableElements:function(e){var t;if(U)t=e.sort(function(e,t){return e.tabIndex-t.tabIndex});else{var i="__k_index";e.each(function(e,t){t.setAttribute(i,e)});t=e.sort(function(e,t){return e.tabIndex===t.tabIndex?parseInt(e.getAttribute(i),10)-parseInt(t.getAttribute(i),10):e.tabIndex-t.tabIndex});e.removeAttr(i)}return t},_nextFocusable:function(e,t){var i=t.length;var n=t.index(e.target);return t.get((n+(e.shiftKey?-1:1))%i)},_focus:function(e){if(e.nodeName=="IFRAME"){e.contentWindow.document.body.focus();return}e.focus();if(e.nodeName=="INPUT"&&e.setSelectionRange&&this._haveSelectionRange(e))e.setSelectionRange(0,e.value.length)},_haveSelectionRange:function(e){var t=e.type.toLowerCase();return t==="text"||t==="search"||t==="url"||t==="tel"||t==="password"}});return t.Popup.TabKeyTrap=W,window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.tooltip.min",["kendo.core.min","kendo.popup.min","kendo.fx.min"],function(){var e={id:"tooltip",name:"Tooltip",category:"web",description:"The Tooltip widget displays a popup hint for a given html element.",depends:["core","popup"],features:[{id:"tooltip-fx",name:"Animation",description:"Support for animation",depends:["fx"]}]},c=window.kendo.jQuery,d=void 0,u=window.kendo,r=u.ui.Widget,p=u.ui.Popup,v=u.isFunction,g=c.isPlainObject,n=c.extend,a=c(document),m=u.isLocalUrl,_="_tb_active",o="aria-describedby",y="show",b="hide",w="error",s="contentLoad",x="requestStart",l="k-content-frame",k='<div role="tooltip" class="k-widget k-tooltip#if (!autoHide) {# k-tooltip-closable#}#">'+'<div class="k-tooltip-content"></div>'+'#if (!autoHide) {# <div class="k-tooltip-button"><a href="\\#" class="k-icon k-i-close" title="Close"></a></div> #}#'+'#if (callout){ #<div class="k-callout k-callout-#=dir#"></div>#}#'+"</div>",C=u.template("<iframe frameborder='0' class='"+l+"' src='#= content.url #'>"+"This page requires frames in order to show content"+"</iframe>"),h=".kendoTooltip",S={bottom:{origin:"bottom center",position:"top center"},top:{origin:"top center",position:"bottom center"},left:{origin:"center left",position:"center right",collision:"fit flip"},right:{origin:"center right",position:"center left",collision:"fit flip"},center:{position:"center center",origin:"center center"}},T={top:"bottom",bottom:"top",left:"right",right:"left",center:"center"},A={bottom:"n",top:"s",left:"e",right:"w",center:"n"},M={horizontal:{offset:"top",size:"outerHeight"},vertical:{offset:"left",size:"outerWidth"}},t=function(e){return e.target.data(u.ns+"title")};function D(e){while(e.length){if(i(e))break;e=e.parent()}}function i(e){var t=e.data(u.ns+"title");if(t){e.attr("title",t);e.removeData(u.ns+"title");return true}}function E(e){var t=e.attr("title");if(t){e.data(u.ns+"title",t);e.attr("title","");return true}}function I(e){while(e.length&&!e.is("body")){if(E(e))break;e=e.parent()}}var f=r.extend({init:function(e,t){var i=this,n;r.fn.init.call(i,e,t);n=i.options.position.match(/left|right/)?"horizontal":"vertical";i.dimensions=M[n];if(u.support.touch&&this._isShownOnMouseEnter())i.element.on(u.support.mousedown+h,i.options.filter,i._showOn.bind(i));i.element.on(i.options.showOn+h,i.options.filter,i._showOn.bind(i))},options:{name:"TooltipBase",filter:"",offset:0,showAfter:100,hideAfter:100,callout:true,position:"bottom",showOn:"mouseenter",animation:{open:{effects:"fade:in",duration:0},close:{duration:40,hide:true}}},destroy:function(){var e=this.popup;if(e){e.element.off(h);e.destroy()}clearTimeout(this.timeout);r.fn.destroy.call(this)},hide:function(){if(this.popup)this.popup.close()},show:function(e){e=e||this.element;this._saveTitle(e);this._show(e)},target:function(){if(this.popup)return this.popup.options.anchor;return null},_showOn:function(e){var t=this;var i=c(e.currentTarget);if(t._isShownOnClick()&&!t._isShownOnMouseEnter())t._show(i);else if(t._isShownOnFocus()){t._saveTitle(i);t._show(i)}else{clearTimeout(t.timeout);t.timeout=setTimeout(function(){t._show(i)},t.options.showAfter)}},_isShownOnFocus:function(){return this.options.showOn&&this.options.showOn.match(/focus/)},_isShownOnMouseEnter:function(){return this.options.showOn&&this.options.showOn.match(/mouseenter/)},_isShownOnClick:function(){return this.options.showOn&&this.options.showOn.match(/click/)},_positionCallout:function(){var e=this,t=e.options.position,i=e.dimensions,n=i.offset,r=e.popup,a=r.options.anchor,o=c(a).offset(),s=c(r.element).offset(),l=A[r.flipped?T[t]:t],u=o[n]-s[n]+c(a)[i.size]()/2;e._offset(t,e.options.offset);e.arrow.removeClass("k-callout-n k-callout-s k-callout-w k-callout-e").addClass("k-callout-"+l).css(n,u)},_offset:function(e,t,i){var n=this,r=e=="top"||e=="left",a=n.popup.flipped,o=r&&a||!r&&!a?1:-1,s=r?"margin-"+e:"margin-"+T[e],l=(i||u._outerWidth(n.arrow))/2+t;n.popup.wrapper.css(s,l*o+"px")},_addDescribedBy:function(){var e=this,t=e.popup.options.anchor,i=t[0].id||e.element[0].id||u.guid(),n=[];if(t.attr(o))n.push(t.attr(o));if(i){n.push(i+_);t.attr(o,n.join(" "));e.popup.element.attr("id",i+_)}},_removeDescribedBy:function(e){var t=this.popup.element.attr("id"),i=e.attr(o),n,r,a;if(!i)return;n=i.split(" ");if(n&&n.length>0)r=n.filter(function(e){return e!==t});if(r&&r.length>0){a=r.join(" ");e.attr(o,a)}else e.removeAttr(o)},_openPopup:function(){if(!this.popup)return;this.popup._hovered=true;this.popup.open()}}),P=(u.ui.plugin(f),f.extend({init:function(e,t){var i=this,n;f.fn.init.call(i,e,t);n=i.options.position.match(/left|right/)?"horizontal":"vertical";i.dimensions=M[n];i._documentKeyDownHandler=i._documentKeyDown.bind(i);if(this._isShownOnMouseEnter()||this._isShownOnClick())i.element.on("mouseenter"+h,i.options.filter,i._mouseenter.bind(i));if(this.options.autoHide&&this._isShownOnMouseEnter())i.element.on("mouseleave"+h,i.options.filter,i._mouseleave.bind(i));if(this.options.autoHide&&this._isShownOnFocus())i.element.on("blur"+h,i.options.filter,i._blur.bind(i));if(u.support.touch)i.element.on(u.support.mousedown+h,i.options.filter,i._mouseenter.bind(i))},options:{name:"Tooltip",filter:"",content:t,showAfter:100,callout:true,offset:0,position:"bottom",showOn:"mouseenter",autoHide:true,width:null,height:null,animation:{open:{effects:"fade:in",duration:0},close:{duration:40,hide:true}}},events:[y,b,s,w,x],_mouseenter:function(e){I(c(e.currentTarget))},_saveTitle:function(e){I(e)},_appendContent:function(e){var t=this,i=t.options.content,n=t.content,r=t.options.iframe,a;if(g(i)&&i.url){if(!("iframe"in t.options))r=!m(i.url);t.trigger(x,{options:i,target:e});if(!r){n.empty();u.ui.progress(n,true);t._ajaxRequest(i)}else{n.hide();a=n.find("."+l)[0];if(a)a.src=i.url||a.src;else n.html(C({content:i}));n.find("."+l).off("load"+h).on("load"+h,function(){t.trigger(s);n.show()})}}else if(i&&v(i)){i=i({sender:this,target:e});n.html(i||"")}else n.html(i);t.angular("compile",function(){return{elements:n}})},_ajaxRequest:function(e){var i=this,t=function(e){u.ui.progress(i.content,false);i.content.html(e);if(u._outerHeight(i.popup.element)>u._outerHeight(i.popup.wrapper)){i.popup.wrapper.css("height",u._outerHeight(i.popup.element)+"px");i.popup.position();i._positionCallout()}i.trigger(s)};jQuery.ajax(n({type:"GET",dataType:"html",cache:false,error:function(e,t){u.ui.progress(i.content,false);i.trigger(w,{status:t,xhr:e})},success:t.bind(i)},e))},_documentKeyDown:function(e){if(e.keyCode===u.keys.ESC)this.hide()},refresh:function(){var e=this,t=e.popup;if(t&&t.options.anchor)e._appendContent(t.options.anchor)},_show:function(e){var t=this,i=t.target();if(!t.popup)t._initPopup();if(i&&i[0]!=e[0]){t.popup.close();t.popup.element.kendoStop(true,true)}if(!i||i[0]!=e[0]){t._appendContent(e);t.popup.options.anchor=e}t.popup.one("deactivate",function(){D(e);t._removeDescribedBy(e);this.element.removeAttr("id").attr("aria-hidden",true);a.off("keydown"+h,t._documentKeyDownHandler)});t._openPopup()},_initPopup:function(){var e=this,t=e.options,i=c(u.template(k)({callout:t.callout&&t.position!=="center",dir:A[t.position],autoHide:t.autoHide}));e.popup=new p(i,n({autosize:true,activate:function(){e._addDescribedBy();if(t.callout)e._positionCallout();else e._offset(e.options.position,e.options.offset);this.element.removeAttr("aria-hidden");a.on("keydown"+h,e._documentKeyDownHandler);e.trigger(y);e.popup._hovered=d},close:function(){e.trigger(b)},copyAnchorStyles:false,animation:t.animation},S[t.position]));i.css({width:t.width,height:t.height});e.content=i.find(".k-tooltip-content");e.arrow=i.find(".k-callout");if(t.autoHide&&this._isShownOnMouseEnter())i.on("mouseleave"+h,e._mouseleave.bind(e));else i.on("click"+h,".k-tooltip-button",e._closeButtonClick.bind(e))},_closeButtonClick:function(e){e.preventDefault();this.hide()},_mouseleave:function(e){var t=this;clearTimeout(t.timeout);t.timeout=setTimeout(function(){t._closePopup(e.currentTarget)},t.options.hideAfter)},_blur:function(e){this._closePopup(e.currentTarget)},_closePopup:function(e){if(this.popup&&!this.popup._hovered)this.popup.close();else D(c(e))},destroy:function(){this.element.off(h);a.off("keydown"+h,this._documentKeyDownHandler);f.fn.destroy.call(this)}}));return u.ui.plugin(P),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("drawing/util.min",["kendo.core.min"],function(){var t=window.kendo.jQuery;function e(){return t.Deferred()}function i(e){return t.when.apply(t,e)}function n(e,t){if(!t)return;if(typeof t.__proto__==="function")e.__proto__=t;else for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]}return kendo.drawing.util=kendo.drawing.util||{},kendo.deepExtend(kendo.drawing.util,{createPromise:e,promiseAll:i,extendStatic:n}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.color.min",["kendo.core.min"],function(){var t={id:"color",name:"Color utils",category:"framework",advanced:true,description:"Color utilities used across components",depends:["core"]},e=(window.kendo=window.kendo||{},kendo.Class),n=kendo.support,a={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},r=n.browser,d=function(e){var t=Object.keys(a);t.push("transparent");var i=new RegExp("^("+t.join("|")+")(\\W|$)","i");d=function(e){return i.exec(e)};return i.exec(e)},o=e.extend({init:function(){},toHSV:function(){return this},toRGB:function(){return this},toHex:function(e){return this.toBytes().toHex(e)},toBytes:function(){return this},toCss:function(e){return"#"+this.toHex(e)},toCssRgba:function(){var e=this.toBytes();return"rgba("+e.r+", "+e.g+", "+e.b+", "+parseFloat(Number(this.a).toFixed(3))+")"},toDisplay:function(){if(r.msie&&r.version<9)return this.toCss();return this.toCssRgba()},equals:function(e){return e===this||e!==null&&e!==undefined&&this.toCssRgba()===u(e).toCssRgba()},diff:function(e){if(e===null)return NaN;var t=this.toBytes();var i=e.toBytes();return Math.sqrt(Math.pow((t.r-i.r)*.3,2)+Math.pow((t.g-i.g)*.59,2)+Math.pow((t.b-i.b)*.11,2))},clone:function(){var e=this.toBytes();if(e===this)e=new s(e.r,e.g,e.b,e.a);return e}}),f=o.extend({init:function(e,t,i,n){o.fn.init.call(this);this.r=e;this.g=t;this.b=i;this.a=n},toHSV:function(){var e=this;var t=e.r;var i=e.g;var n=e.b;var r=Math.min(t,i,n);var a=Math.max(t,i,n);var o=a-r;var s=a;var l,u;if(o===0)return new c(0,0,s,this.a);if(a!==0){u=o/a;if(t===a)l=(i-n)/o;else if(i===a)l=2+(n-t)/o;else l=4+(t-i)/o;l*=60;if(l<0)l+=360}else{u=0;l=-1}return new c(l,u,s,this.a)},toHSL:function(){var e=this;var t=e.r;var i=e.g;var n=e.b;var r=Math.max(t,i,n);var a=Math.min(t,i,n);var o,s,l=(r+a)/2;if(r===a)o=s=0;else{var u=r-a;s=l>.5?u/(2-r-a):u/(r+a);switch(r){case t:o=(i-n)/u+(i<n?6:0);break;case i:o=(n-t)/u+2;break;case n:o=(t-i)/u+4;break;default:break}}return new p(o*60,s*100,l*100,this.a)},toBytes:function(){return new s(this.r*255,this.g*255,this.b*255,this.a)}}),s=f.extend({init:function(e,t,i,n){f.fn.init.call(this,Math.round(e),Math.round(t),Math.round(i),n)},toRGB:function(){return new f(this.r/255,this.g/255,this.b/255,this.a)},toHSV:function(){return this.toRGB().toHSV()},toHSL:function(){return this.toRGB().toHSL()},toHex:function(e){var t=i(this.r,2)+i(this.g,2)+i(this.b,2);if(e&&e.alpha)t+=i(Math.round(this.a*255),2);return t},toBytes:function(){return this}});function i(e,t,i){if(i===void 0)i="0";var n=e.toString(16);while(t>n.length)n=i+n;return n}var c=o.extend({init:function(e,t,i,n){o.fn.init.call(this);this.h=e;this.s=t;this.v=i;this.a=n},toRGB:function(){var e=this;var t=e.h;var i=e.s;var n=e.v;var r,a,o;if(i===0)r=a=o=n;else{t/=60;var c=Math.floor(t);var h=t-c;var s=n*(1-i);var l=n*(1-i*h);var u=n*(1-i*(1-h));switch(c){case 0:r=n;a=u;o=s;break;case 1:r=l;a=n;o=s;break;case 2:r=s;a=n;o=u;break;case 3:r=s;a=l;o=n;break;case 4:r=u;a=s;o=n;break;default:r=n;a=s;o=l;break}}return new f(r,a,o,this.a)},toHSL:function(){return this.toRGB().toHSL()},toBytes:function(){return this.toRGB().toBytes()}}),p=o.extend({init:function(e,t,i,n){o.fn.init.call(this);this.h=e;this.s=t;this.l=i;this.a=n},toRGB:function(){var e=this.h/360;var t=this.s/100;var i=this.l/100;var n,r,a;if(t===0)n=r=a=i;else{var o=i<.5?i*(1+t):i+t-i*t;var s=2*i-o;n=l(s,o,e+1/3);r=l(s,o,e);a=l(s,o,e-1/3)}return new f(n,r,a,this.a)},toHSV:function(){return this.toRGB().toHSV()},toBytes:function(){return this.toRGB().toBytes()}});function l(e,t,i){var n=i;if(n<0)n+=1;if(n>1)n-=1;if(n<1/6)return e+(t-e)*6*n;if(n<1/2)return t;if(n<2/3)return e+(t-e)*(2/3-n)*6;return e}function v(e){return parseFloat(parseFloat(parseInt(e,16)/255).toFixed(3))}function u(e,t){var i,n;if(e==null||e==="none")return null;if(e instanceof o)return e;var r=e.toLowerCase();if(i=d(r)){if(i[1]==="transparent")r=new f(1,1,1,0);else r=u(a[i[1]],t);r.match=[i[1]];return r}if(i=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\b/i.exec(r))n=new s(parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16),1);else if(i=/^#?([0-9a-f])([0-9a-f])([0-9a-f])\b/i.exec(r))n=new s(parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16),1);else if(i=/^#?([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])\b/i.exec(r))n=new s(parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16),v(i[4]+i[4]));else if(i=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\b/i.exec(r))n=new s(parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16),v(i[4]));else if(i=/^rgb\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/.exec(r))n=new s(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),1);else if(i=/^rgba\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9.]+)\s*\)/.exec(r))n=new s(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),parseFloat(i[4]));else if(i=/^rgb\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*\)/.exec(r))n=new f(parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3])/100,1);else if(i=/^rgba\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9.]+)\s*\)/.exec(r))n=new f(parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3])/100,parseFloat(i[4]));if(n)n.match=i;else if(!t)throw new Error("Cannot parse color: "+r);return n}var g=180,h=e.extend({init:function(e){var t=this;if(arguments.length===1){var i=h.formats;var n=this.resolveColor(e);for(var r=0;r<i.length;r++){var a=i[r].re;var o=i[r].process;var s=a.exec(n);if(s){var l=o(s);t.r=l[0];t.g=l[1];t.b=l[2]}}}else{this.r=arguments[0];this.g=arguments[1];this.b=arguments[2]}this.r=this.normalizeByte(this.r);this.g=this.normalizeByte(this.g);this.b=this.normalizeByte(this.b)},toHex:function(){var e=this.padDigit;var t=this.r.toString(16);var i=this.g.toString(16);var n=this.b.toString(16);return"#"+e(t)+e(i)+e(n)},resolveColor:function(e){var t=e||"black";if(t.charAt(0)==="#")t=t.substr(1,6);t=t.replace(/ /g,"");t=t.toLowerCase();t=h.namedColors[t]||t;return t},normalizeByte:function(e){if(e<0||isNaN(e))return 0;return e>255?255:e},padDigit:function(e){return e.length===1?"0"+e:e},brightness:function(e){var t=Math.round;this.r=t(this.normalizeByte(this.r*e));this.g=t(this.normalizeByte(this.g*e));this.b=t(this.normalizeByte(this.b*e));return this},percBrightness:function(){return Math.sqrt(.241*this.r*this.r+.691*this.g*this.g+.068*this.b*this.b)},isDark:function(){return this.percBrightness()<g}});h.fromBytes=function(e,t,i,n){return new s(e,t,i,n!=null?n:1)},h.fromRGB=function(e,t,i,n){return new f(e,t,i,n!=null?n:1)},h.fromHSV=function(e,t,i,n){return new c(e,t,i,n!=null?n:1)},h.fromHSL=function(e,t,i,n){return new p(e,t,i,n!=null?n:1)},h.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],h.namedColors=a,kendo.deepExtend(kendo,{parseColor:u,namedColors:a,Color:h})})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("util/text-metrics.min",["kendo.core.min"],function(){var t=window.kendo.jQuery,i=(window.kendo.util=window.kendo.util||{},kendo.Class.extend({init:function(e){this._size=e;this._length=0;this._map={}},put:function(e,t){var i=this._map;var n={key:e,value:t};i[e]=n;if(!this._head)this._head=this._tail=n;else{this._tail.newer=n;n.older=this._tail;this._tail=n}if(this._length>=this._size){i[this._head.key]=null;this._head=this._head.newer;this._head.older=null}else this._length++},get:function(e){var t=this._map[e];if(t){if(t===this._head&&t!==this._tail){this._head=t.newer;this._head.older=null}if(t!==this._tail){if(t.older){t.older.newer=t.newer;t.newer.older=t.older}t.older=this._tail;t.newer=null;this._tail.newer=t;this._tail=t}return t.value}}})),n=/\r?\n|\r|\t/g,r=" ";function f(e){return String(e).replace(n,r)}function d(e){var t=[];for(var i in e)t.push(i+e[i]);return t.sort().join("")}function p(e){var t=2166136261;for(var i=0;i<e.length;++i){t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);t^=e.charCodeAt(i)}return t>>>0}function v(){return{width:0,height:0,baseline:0}}var o={baselineMarkerSize:1},g;if(typeof document!=="undefined"){g=document.createElement("div");g.style.cssText="position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;"+"padding: 0 !important; margin: 0 !important; border: 0 !important;"+"line-height: normal !important; visibility: hidden !important; white-space: pre!important;"}var a=kendo.Class.extend({init:function(e){this._cache=new i(1e3);this.options=t.extend({},o,e)},measure:function(e,t,i){if(i===void 0)i={};if(typeof e==="undefined"||e===null)return v();var c=d(t);var n=p(e+c);var r=this._cache.get(n);if(r)return r;var a=v();var o=i.box||g;var s=this._baselineMarker().cloneNode(false);for(var l in t){var u=t[l];if(typeof u!=="undefined")o.style[l]=u}var h=i.normalizeText!==false?f(e):String(e);o.textContent=h;o.appendChild(s);document.body.appendChild(o);if(h.length){a.width=o.offsetWidth-this.options.baselineMarkerSize;a.height=o.offsetHeight;a.baseline=s.offsetTop+this.options.baselineMarkerSize}if(a.width>0&&a.height>0)this._cache.put(n,a);o.parentNode.removeChild(o);return a},_baselineMarker:function(){var e=document.createElement("div");e.style.cssText="display: inline-block; vertical-align: baseline;width: "+this.options.baselineMarkerSize+"px; height: "+this.options.baselineMarkerSize+"px;overflow: hidden;";return e}});function e(e,t,i){return a.current.measure(e,t,i)}a.current=new a,kendo.deepExtend(kendo.util,{LRUCache:i,TextMetrics:a,measureText:e,objectKey:d,hashKey:p,normalizeText:f})})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("drawing/kendo-drawing.min",["./util.min","kendo.color.min","../util/text-metrics.min"],function(){var p=window.kendo.jQuery;window.kendo=window.kendo||{};var e,t=kendo.drawing.util,h=t.extendStatic,o=kendo.Class,s=kendo.util,i,l=kendo.support.browser,v=t.createPromise,u=t.promiseAll,n=function(e){function t(){e.apply(this,arguments)}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;t.prototype.observers=function e(){this._observers=this._observers||[];return this._observers};t.prototype.addObserver=function e(t){if(!this._observers)this._observers=[t];else this._observers.push(t);return this};t.prototype.removeObserver=function e(t){var i=this.observers();var n=i.indexOf(t);if(n!==-1)i.splice(n,1);return this};t.prototype.trigger=function e(t,i){var n=this._observers;if(n&&!this._suspended)for(var r=0;r<n.length;r++){var a=n[r];if(a[t])a[t](i)}return this};t.prototype.optionsChange=function e(t){if(t===void 0)t={};t.element=this;this.trigger("optionsChange",t)};t.prototype.geometryChange=function e(){this.trigger("geometryChange",{element:this})};t.prototype.suspend=function e(){this._suspended=(this._suspended||0)+1;return this};t.prototype.resume=function e(){this._suspended=Math.max((this._suspended||0)-1,0);return this};t.prototype._observerField=function e(t,i){if(this[t])this[t].removeObserver(this);this[t]=i;i.addObserver(this)};return t}(o);function c(e,t){e.push.apply(e,t);return e}var r={1:"i",10:"x",100:"c",2:"ii",20:"xx",200:"cc",3:"iii",30:"xxx",300:"ccc",4:"iv",40:"xl",400:"cd",5:"v",50:"l",500:"d",6:"vi",60:"lx",600:"dc",7:"vii",70:"lxx",700:"dcc",8:"viii",80:"lxxx",800:"dccc",9:"ix",90:"xc",900:"cm",1e3:"m"};function F(e){var t=[1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1];var i="";while(e>0)if(e<t[0])t.shift();else{i+=r[t[0]];e-=t[0]}return i}var f="undefined";function d(e){return typeof e!==f}var g=1;function m(){return"kdef"+g++}var _=Math.PI/180,b=Number.MAX_VALUE,w=-Number.MAX_VALUE;function V(e){return e/_}var x=String.fromCharCode;function k(e){var t="";for(var i=0;i<e.length;i++){var n=e.charCodeAt(i);if(55296<=n&&n<=56319){var r=n;var a=e.charCodeAt(++i);if(!isNaN(a))n=(r-55296)*1024+(a-56320)+65536}if(n<128)t+=x(n);else if(n<2048){t+=x(192|n>>>6);t+=x(128|n&63)}else if(n<65536){t+=x(224|n>>>12);t+=x(128|n>>>6&63);t+=x(128|n&63)}else if(n<1114111){t+=x(240|n>>>18);t+=x(128|n>>>12&63);t+=x(128|n>>>6&63);t+=x(128|n&63)}}return t}var C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function S(e){var t="";var i=0;var n=k(e);while(i<n.length){var r=n.charCodeAt(i++);var a=n.charCodeAt(i++);var o=n.charCodeAt(i++);var s=r>>2;var c=(r&3)<<4|a>>4;var l=(a&15)<<2|o>>6;var u=o&63;if(isNaN(a))l=u=64;else if(isNaN(o))u=64;t=t+C.charAt(s)+C.charAt(c)+C.charAt(l)+C.charAt(u)}return t}function T(e){if(d((e.x||{}).location))return{x:e.x.location,y:e.y.location};return{x:e.pageX||e.clientX||0,y:e.pageY||e.clientY||0}}function A(e){if(e===void 0)e={};return e.touch?e.touch.initialTouch:e.target}function M(e){return e===""||e===null||e==="none"||e==="transparent"||!d(e)}function y(e){if(e)return e[e.length-1]}function D(e,t,i){return Math.max(Math.min(e,i),t)}function E(e,o){if(e.length<2)return e.slice();function a(e,t){var i=[],n=0,r=0,a=0;while(n<e.length&&r<t.length)if(o(e[n],t[r])<=0)i[a++]=e[n++];else i[a++]=t[r++];if(n<e.length)i.push.apply(i,e.slice(n));if(r<t.length)i.push.apply(i,t.slice(r));return i}return function e(t){if(t.length<=1)return t;var i=Math.floor(t.length/2);var n=t.slice(0,i);var r=t.slice(i);n=e(n);r=e(r);return a(n,r)}(e)}var I=Date.now||function(){return(new Date).getTime()};function N(e){return e*_}function H(e){if(e)return Math.pow(10,e);return 1}function z(e,t){var i=H(t);return Math.round(e*i)/i}function U(e,t){return d(e)?e:t}function j(e,t){for(var i in t){var n=i.trim().split(" ");for(var r=0;r<n.length;r++)e.addEventListener(n[r],t[i],false)}}function G(e){var t=e.getBoundingClientRect();var i=document.documentElement;return{top:t.top+(window.pageYOffset||i.scrollTop)-(i.clientTop||0),left:t.left+(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}}function W(e,t){var i={};var n=window.getComputedStyle(e)||{};var r=Array.isArray(t)?t:[t];for(var a=0;a<r.length;a++){var o=r[a];i[o]=n[o]}return i}function q(e){if(isNaN(e))return e;return e+"px"}function Y(e,t){if(t){var i=t.width;var n=t.height;if(d(i))e.style.width=q(i);if(d(n))e.style.height=q(n)}else{var r=W(e,["width","height"]);return{width:parseInt(r.width,10),height:parseInt(r.height,10)}}}function $(e,t){if(t===void 0)t={};for(var i in t){var n=i.trim().split(" ");for(var r=0;r<n.length;r++)e.removeEventListener(n[r],t[i],false)}}function X(e){var t=W(e,["paddingLeft","paddingTop"]);var i=t.paddingLeft;var n=t.paddingTop;return{top:parseFloat(n),left:parseFloat(i)}}var a=function(o){function u(e,t,i,n,r,a){if(e===void 0)e=0;if(t===void 0)t=0;if(i===void 0)i=0;if(n===void 0)n=0;if(r===void 0)r=0;if(a===void 0)a=0;o.call(this);this.a=e;this.b=t;this.c=i;this.d=n;this.e=r;this.f=a}h(u,o);u.prototype=Object.create(o&&o.prototype);u.prototype.constructor=u;u.fn=u.prototype;u.fn.init=u.fn.constructor;u.prototype.multiplyCopy=function e(t){return new u(this.a*t.a+this.c*t.b,this.b*t.a+this.d*t.b,this.a*t.c+this.c*t.d,this.b*t.c+this.d*t.d,this.a*t.e+this.c*t.f+this.e,this.b*t.e+this.d*t.f+this.f)};u.prototype.invert=function e(){var t=this;var i=t.a;var n=t.b;var r=t.c;var a=t.d;var o=t.e;var s=t.f;var l=i*a-n*r;if(l===0)return null;return new u(a/l,-n/l,-r/l,i/l,(r*s-a*o)/l,(n*o-i*s)/l)};u.prototype.clone=function e(){return new u(this.a,this.b,this.c,this.d,this.e,this.f)};u.prototype.equals=function e(t){if(!t)return false;return this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.e===t.e&&this.f===t.f};u.prototype.round=function e(t){this.a=z(this.a,t);this.b=z(this.b,t);this.c=z(this.c,t);this.d=z(this.d,t);this.e=z(this.e,t);this.f=z(this.f,t);return this};u.prototype.toArray=function e(t){var i=[this.a,this.b,this.c,this.d,this.e,this.f];if(d(t))for(var n=0;n<i.length;n++)i[n]=z(i[n],t);return i};u.prototype.toString=function e(t,i){if(i===void 0)i=",";return this.toArray(t).join(i)};u.translate=function e(t,i){return new u(1,0,0,1,t,i)};u.unit=function e(){return new u(1,0,0,1,0,0)};u.rotate=function e(t,i,n){var r=new u;r.a=Math.cos(N(t));r.b=Math.sin(N(t));r.c=-r.b;r.d=r.a;r.e=i-i*r.a+n*r.b||0;r.f=n-n*r.a-i*r.b||0;return r};u.scale=function e(t,i){return new u(t,0,0,i,0,0)};return u}(o),K=(a.IDENTITY=a.unit(),/matrix\((.*)\)/);function Q(e){var t=e.match(K);if(t===null||t.length!==2)return a.unit();var i=t[1].split(",").map(function(e){return parseFloat(e)});return new(Function.prototype.bind.apply(a,[null].concat(i)))}function Z(e){var t=getComputedStyle(e).transform;if(t==="none")return a.unit();return Q(t)}function J(e){if(!e)return a.unit();var t=Z(e);var i=e.parentElement;while(i){var n=Z(i);t=t.multiplyCopy(n);i=i.parentElement}t.b=t.c=t.e=t.f=0;return t}var ee={append:c,arabicToRoman:F,createPromise:v,defined:d,definitionId:m,deg:V,encodeBase64:S,eventCoordinates:T,eventElement:A,isTransparent:M,last:y,limitValue:D,mergeSort:E,now:I,promiseAll:u,rad:N,round:z,valueOrDefault:U,bindEvents:j,elementOffset:G,elementSize:Y,elementStyles:W,unbindEvents:$,elementPadding:X,elementScale:J,DEG_TO_RAD:_,MAX_NUM:b,MIN_NUM:w},te={}.toString,ie=function(a){function c(e,t){var i=this;if(t===void 0)t="";a.call(this);this.prefix=t;for(var n in e){var r=e[n];r=i._wrap(r,n);i[n]=r}}h(c,a);c.prototype=Object.create(a&&a.prototype);c.prototype.constructor=c;c.fn=c.prototype;c.fn.init=c.fn.constructor;c.prototype.get=function e(t){var i=t.split(".");var n=this;while(i.length&&n){var r=i.shift();n=n[r]}return n};c.prototype.set=function e(t,i){var n=this.get(t);if(n!==i){this._set(t,this._wrap(i,t));this.optionsChange({field:this.prefix+t,value:i})}};c.prototype._set=function u(e,t){var i=this;var n=e.indexOf(".")>=0;var r=this;var a=e;if(n){var o=a.split(".");var s=this.prefix;while(o.length>1){a=o.shift();s+=a+".";var l=r[a];if(!l){l=new c({},s);l.addObserver(i);r[a]=l}r=l}a=o[0]}r._clear(a);r[a]=t};c.prototype._clear=function e(t){var i=this[t];if(i&&i.removeObserver)i.removeObserver(this)};c.prototype._wrap=function e(t,i){var n=te.call(t);var r=t;if(r!==null&&d(r)&&n==="[object Object]"){if(!(t instanceof c)&&!(t instanceof o))r=new c(r,this.prefix+i+".");r.addObserver(this)}return r};return c}(n);function ne(t){return function(e){if(this[t]!==e){this[t]=e;this.geometryChange()}return this}}function re(e){return function(){return this[e]}}function ae(e,t){for(var i=0;i<t.length;i++){var n=t[i];var r=n.charAt(0).toUpperCase()+n.substring(1,n.length);e["set"+r]=ne(n);e["get"+r]=re(n)}}var oe=function(e,t){var i=function(e){function t(){e.apply(this,arguments)}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;return t}(e);ae(i.prototype,t);return i};function se(e){if(e&&typeof e.matrix==="function")return e.matrix();return e}var L=function(i){function o(e,t){i.call(this);this.x=e||0;this.y=t||0}h(o,i);o.prototype=Object.create(i&&i.prototype);o.prototype.constructor=o;o.fn=o.prototype;o.fn.init=o.fn.constructor;var e={ZERO:{}};o.prototype.equals=function e(t){return t&&t.x===this.x&&t.y===this.y};o.prototype.clone=function e(){return new o(this.x,this.y)};o.prototype.rotate=function e(t,i){var n=o.create(i)||o.ZERO;return this.transform(a.rotate(t,n.x,n.y))};o.prototype.translate=function e(t,i){this.x+=t;this.y+=i;this.geometryChange();return this};o.prototype.translateWith=function e(t){return this.translate(t.x,t.y)};o.prototype.move=function e(t,i){this.x=this.y=0;return this.translate(t,i)};o.prototype.scale=function e(t,i){if(i===void 0)i=t;this.x*=t;this.y*=i;this.geometryChange();return this};o.prototype.scaleCopy=function e(t,i){return this.clone().scale(t,i)};o.prototype.transform=function e(t){var i=se(t);var n=this;var r=n.x;var a=n.y;this.x=i.a*r+i.c*a+i.e;this.y=i.b*r+i.d*a+i.f;this.geometryChange();return this};o.prototype.transformCopy=function e(t){var i=this.clone();if(t)i.transform(t);return i};o.prototype.distanceTo=function e(t){var i=this.x-t.x;var n=this.y-t.y;return Math.sqrt(i*i+n*n)};o.prototype.round=function e(t){this.x=z(this.x,t);this.y=z(this.y,t);this.geometryChange();return this};o.prototype.toArray=function e(t){var i=d(t);var n=i?z(this.x,t):this.x;var r=i?z(this.y,t):this.y;return[n,r]};o.prototype.toString=function e(t,i){if(i===void 0)i=" ";var n=this;var r=n.x;var a=n.y;if(d(t)){r=z(r,t);a=z(a,t)}return r+i+a};o.create=function e(t,i){if(d(t)){if(t instanceof o)return t;else if(arguments.length===1&&t.length===2)return new o(t[0],t[1]);return new o(t,i)}};o.min=function e(){var t=arguments;var i=b;var n=b;for(var r=0;r<arguments.length;r++){var a=t[r];i=Math.min(a.x,i);n=Math.min(a.y,n)}return new o(i,n)};o.max=function e(){var t=arguments;var i=w;var n=w;for(var r=0;r<arguments.length;r++){var a=t[r];i=Math.max(a.x,i);n=Math.max(a.y,n)}return new o(i,n)};o.minPoint=function e(){return new o(w,w)};o.maxPoint=function e(){return new o(b,b)};e.ZERO.get=function(){return new o(0,0)};Object.defineProperties(o,e);return o}(oe(n,["x","y"])),le=function(i){function n(e,t){i.call(this);this.width=e||0;this.height=t||0}h(n,i);n.prototype=Object.create(i&&i.prototype);n.prototype.constructor=n;n.fn=n.prototype;n.fn.init=n.fn.constructor;var e={ZERO:{}};n.prototype.equals=function e(t){return t&&t.width===this.width&&t.height===this.height};n.prototype.clone=function e(){return new n(this.width,this.height)};n.prototype.toArray=function e(t){var i=d(t);var n=i?z(this.width,t):this.width;var r=i?z(this.height,t):this.height;return[n,r]};n.create=function e(t,i){if(d(t)){if(t instanceof n)return t;else if(arguments.length===1&&t.length===2)return new n(t[0],t[1]);return new n(t,i)}};e.ZERO.get=function(){return new n(0,0)};Object.defineProperties(n,e);return n}(oe(n,["width","height"])),P=function(n){function o(e,t,i){if(e===void 0)e=new L;if(t===void 0)t=new le;if(i===void 0)i=0;n.call(this);this.setOrigin(e);this.setSize(t);this.setCornerRadius(i)}h(o,n);o.prototype=Object.create(n&&n.prototype);o.prototype.constructor=o;o.fn=o.prototype;o.fn.init=o.fn.constructor;o.prototype.clone=function e(){return new o(this.origin.clone(),this.size.clone())};o.prototype.equals=function e(t){return t&&t.origin.equals(this.origin)&&t.size.equals(this.size)};o.prototype.setOrigin=function e(t){this._observerField("origin",L.create(t));this.geometryChange();return this};o.prototype.getOrigin=function e(){return this.origin};o.prototype.setCornerRadius=function e(t){this.cornerRadius=Array.isArray(t)?t:[t,t];this.geometryChange();return this};o.prototype.getCornerRadius=function e(){return this.cornerRadius};o.prototype.setSize=function e(t){this._observerField("size",le.create(t));this.geometryChange();return this};o.prototype.getSize=function e(){return this.size};o.prototype.width=function e(){return this.size.width};o.prototype.height=function e(){return this.size.height};o.prototype.topLeft=function e(){return this.origin.clone()};o.prototype.bottomRight=function e(){return this.origin.clone().translate(this.width(),this.height())};o.prototype.topRight=function e(){return this.origin.clone().translate(this.width(),0)};o.prototype.bottomLeft=function e(){return this.origin.clone().translate(0,this.height())};o.prototype.center=function e(){return this.origin.clone().translate(this.width()/2,this.height()/2)};o.prototype.bbox=function e(t){var i=this.topLeft().transformCopy(t);var n=this.topRight().transformCopy(t);var r=this.bottomRight().transformCopy(t);var a=this.bottomLeft().transformCopy(t);return o.fromPoints(i,n,r,a)};o.prototype.transformCopy=function e(t){return o.fromPoints(this.topLeft().transform(t),this.bottomRight().transform(t))};o.prototype.expand=function e(t,i){if(i===void 0)i=t;this.size.width+=2*t;this.size.height+=2*i;this.origin.translate(-t,-i);return this};o.prototype.expandCopy=function e(t,i){return this.clone().expand(t,i)};o.prototype.containsPoint=function e(t){var i=this.origin;var n=this.bottomRight();return!(t.x<i.x||t.y<i.y||n.x<t.x||n.y<t.y)};o.prototype._isOnPath=function e(t,i){var n=this.expandCopy(i,i);var r=this.expandCopy(-i,-i);return n.containsPoint(t)&&!r.containsPoint(t)};o.fromPoints=function e(){var t=L.min.apply(null,arguments);var i=L.max.apply(null,arguments);var n=new le(i.x-t.x,i.y-t.y);return new o(t,n)};o.union=function e(t,i){return o.fromPoints(L.min(t.topLeft(),i.topLeft()),L.max(t.bottomRight(),i.bottomRight()))};o.intersect=function e(t,i){var n={left:t.topLeft().x,top:t.topLeft().y,right:t.bottomRight().x,bottom:t.bottomRight().y};var r={left:i.topLeft().x,top:i.topLeft().y,right:i.bottomRight().x,bottom:i.bottomRight().y};if(n.left<=r.right&&r.left<=n.right&&n.top<=r.bottom&&r.top<=n.bottom)return o.fromPoints(new L(Math.max(n.left,r.left),Math.max(n.top,r.top)),new L(Math.min(n.right,r.right),Math.min(n.bottom,r.bottom)))};return o}(n),ue=function(t){function i(e){if(e===void 0)e=a.unit();t.call(this);this._matrix=e}h(i,t);i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.fn=i.prototype;i.fn.init=i.fn.constructor;i.prototype.clone=function e(){return new i(this._matrix.clone())};i.prototype.equals=function e(t){return t&&t._matrix.equals(this._matrix)};i.prototype.translate=function e(t,i){this._matrix=this._matrix.multiplyCopy(a.translate(t,i));this._optionsChange();return this};i.prototype.scale=function e(t,i,n){if(i===void 0)i=t;if(n===void 0)n=null;var r=n;if(r){r=L.create(r);this._matrix=this._matrix.multiplyCopy(a.translate(r.x,r.y))}this._matrix=this._matrix.multiplyCopy(a.scale(t,i));if(r)this._matrix=this._matrix.multiplyCopy(a.translate(-r.x,-r.y));this._optionsChange();return this};i.prototype.rotate=function e(t,i){var n=L.create(i)||L.ZERO;this._matrix=this._matrix.multiplyCopy(a.rotate(t,n.x,n.y));this._optionsChange();return this};i.prototype.multiply=function e(t){var i=se(t);this._matrix=this._matrix.multiplyCopy(i);this._optionsChange();return this};i.prototype.matrix=function e(t){if(t){this._matrix=t;this._optionsChange();return this}return this._matrix};i.prototype._optionsChange=function e(){this.optionsChange({field:"transform",value:this})};return i}(n);function ce(e){if(e===null)return null;if(e instanceof ue)return e;return new ue(e)}var he=function(t){function e(e){t.call(this);this._initOptions(e)}h(e,t);e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;var i={nodeType:{}};i.nodeType.get=function(){return"Rect"};e.prototype._initOptions=function e(t){if(t===void 0)t={};var i=t.clip;var n=t.transform;if(n)t.transform=ce(n);if(i&&!i.id)i.id=m();this.options=new ie(t);this.options.addObserver(this)};e.prototype.transform=function e(t){if(d(t))this.options.set("transform",ce(t));else return this.options.get("transform")};e.prototype.parentTransform=function e(){var t=this;var i;while(t.parent){t=t.parent;var n=t.transform();if(n)i=n.matrix().multiplyCopy(i||a.unit())}if(i)return ce(i)};e.prototype.currentTransform=function e(t){if(t===void 0)t=this.parentTransform();var i=this.transform();var n=se(i);var r=se(t);var a;if(n&&r)a=r.multiplyCopy(n);else a=n||r;if(a)return ce(a)};e.prototype.visible=function e(t){if(d(t)){this.options.set("visible",t);return this}return this.options.get("visible")!==false};e.prototype.clip=function e(t){var i=this.options;if(d(t)){if(t&&!t.id)t.id=m();i.set("clip",t);return this}return i.get("clip")};e.prototype.opacity=function e(t){if(d(t)){this.options.set("opacity",t);return this}return U(this.options.get("opacity"),1)};e.prototype.clippedBBox=function e(t){var i=this._clippedBBox(t);if(i){var n=this.clip();return n?P.intersect(i,n.bbox(t)):i}};e.prototype.containsPoint=function e(t,i){if(this.visible()){var n=this.currentTransform(i);var r=t;if(n)r=t.transformCopy(n.matrix().invert());return this._hasFill()&&this._containsPoint(r)||this._isOnPath&&this._hasStroke()&&this._isOnPath(r)}return false};e.prototype._hasFill=function e(){var t=this.options.fill;return t&&!M(t.color)};e.prototype._hasStroke=function e(){var t=this.options.stroke;return t&&t.width>0&&!M(t.color)};e.prototype._clippedBBox=function e(t){return this.bbox(t)};Object.defineProperties(e.prototype,i);return e}(n);function fe(e,t,i,n){var r=0;var a=0;if(n){r=Math.atan2(n.c*i,n.a*t);if(n.b!==0)a=Math.atan2(n.d*i,n.b*t)}return{x:r,y:a}}var de=Math.PI/2,pe=function(i){function t(e,t){if(e===void 0)e=new L;if(t===void 0)t=0;i.call(this);this.setCenter(e);this.setRadius(t)}h(t,i);t.prototype=Object.create(i&&i.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;t.prototype.setCenter=function e(t){this._observerField("center",L.create(t));this.geometryChange();return this};t.prototype.getCenter=function e(){return this.center};t.prototype.equals=function e(t){return t&&t.center.equals(this.center)&&t.radius===this.radius};t.prototype.clone=function e(){return new t(this.center.clone(),this.radius)};t.prototype.pointAt=function e(t){return this._pointAt(N(t))};t.prototype.bbox=function u(e){var t=this;var i=fe(this.center,this.radius,this.radius,e);var n=L.maxPoint();var r=L.minPoint();for(var a=0;a<4;a++){var o=t._pointAt(i.x+a*de).transformCopy(e);var s=t._pointAt(i.y+a*de).transformCopy(e);var l=new L(o.x,s.y);n=L.min(n,l);r=L.max(r,l)}return P.fromPoints(n,r)};t.prototype._pointAt=function e(t){var i=this;var n=i.center;var r=i.radius;return new L(n.x+r*Math.cos(t),n.y+r*Math.sin(t))};t.prototype.containsPoint=function e(t){var i=this;var n=i.center;var r=i.radius;var a=Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)<=Math.pow(r,2);return a};t.prototype._isOnPath=function e(t,i){var n=this;var r=n.center;var a=n.radius;var o=r.distanceTo(t);return a-i<=o&&o<=a+i};return t}(oe(n,["radius"])),ve="Gradient",ge=function(e){return function(e){function t(){e.apply(this,arguments)}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;t.prototype.fill=function e(t,i){var n=this.options;if(d(t)){if(t&&t.nodeType!==ve){var r={color:t};if(d(i))r.opacity=i;n.set("fill",r)}else n.set("fill",t);return this}return n.get("fill")};t.prototype.stroke=function e(t,i,n){if(d(t)){this.options.set("stroke.color",t);if(d(i))this.options.set("stroke.width",i);if(d(n))this.options.set("stroke.opacity",n);return this}return this.options.get("stroke")};return t}(e)},me=a.IDENTITY.toString(),_e=function(e){return function(e){function t(){e.apply(this,arguments)}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;t.prototype.bbox=function e(t){var i=se(this.currentTransform(t));var n=i?i.toString():me;var e;if(this._bboxCache&&this._matrixHash===n)e=this._bboxCache.clone();else{e=this._bbox(i);this._bboxCache=e?e.clone():null;this._matrixHash=n}var r=this.options.get("stroke.width");if(r&&e)e.expand(r/2);return e};t.prototype.geometryChange=function e(){delete this._bboxCache;this.trigger("geometryChange",{element:this})};return t}(e)};function ye(e){var t="_"+e;return function(e){if(d(e)){this._observerField(t,e);this.geometryChange();return this}return this[t]}}function be(e,t){for(var i=0;i<t.length;i++)e[t[i]]=ye(t[i])}var we=function(e,t){if(t===void 0)t=["geometry"];var i=function(e){function t(){e.apply(this,arguments)}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;return t}(e);be(i.prototype,t);return i},xe="#000",ke=function(i){function e(e,t){if(e===void 0)e=new pe;if(t===void 0)t={};i.call(this,t);this.geometry(e);if(!d(this.options.stroke))this.stroke(xe)}h(e,i);e.prototype=Object.create(i&&i.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;var t={nodeType:{}};t.nodeType.get=function(){return"Circle"};e.prototype.rawBBox=function e(){return this._geometry.bbox()};e.prototype._bbox=function e(t){return this._geometry.bbox(t)};e.prototype._containsPoint=function e(t){return this.geometry().containsPoint(t)};e.prototype._isOnPath=function e(t){return this.geometry()._isOnPath(t,this.options.stroke.width/2)};Object.defineProperties(e.prototype,t);return e}(ge(_e(we(he)))),Ce=10;function Se(e,t,i){if(i===void 0)i=Ce;return z(Math.abs(e-t),i)===0}function Te(e,t,i){return e<t||Se(e,t,i)}function Ae(e,t,i,n){var r=t.x-e.x;var a=n.x-i.x;var o=t.y-e.y;var s=n.y-i.y;var l=e.x-i.x;var c=e.y-i.y;var h=r*s-a*o;var f=(r*c-o*l)/h;var u=(a*c-s*l)/h;if(f>=0&&f<=1&&u>=0&&u<=1)return new L(e.x+u*r,e.y+u*o)}var Me=45,De=Math.pow,Ee,Ie=function(i){function u(e,t){if(e===void 0)e=new L;if(t===void 0)t={};i.call(this);this.setCenter(e);this.radiusX=t.radiusX;this.radiusY=t.radiusY||t.radiusX;this.startAngle=t.startAngle;this.endAngle=t.endAngle;this.anticlockwise=t.anticlockwise||false;this.xRotation=t.xRotation}h(u,i);u.prototype=Object.create(i&&i.prototype);u.prototype.constructor=u;u.fn=u.prototype;u.fn.init=u.fn.constructor;u.prototype.clone=function e(){return new u(this.center,{radiusX:this.radiusX,radiusY:this.radiusY,startAngle:this.startAngle,endAngle:this.endAngle,anticlockwise:this.anticlockwise})};u.prototype.setCenter=function e(t){this._observerField("center",L.create(t));this.geometryChange();return this};u.prototype.getCenter=function e(){return this.center};u.prototype.pointAt=function e(t){var i=this.center;var n=N(t);return new L(i.x+this.radiusX*Math.cos(n),i.y+this.radiusY*Math.sin(n))};u.prototype.curvePoints=function e(){var c=this;var t=this.startAngle;var h=this.anticlockwise?-1:1;var e=[this.pointAt(t)];var i=this._arcInterval();var n=i.endAngle-i.startAngle;var r=Math.ceil(n/Me);var f=n/r;var a=t;var o;if(this.xRotation)o=ce().rotate(this.xRotation,this.center);for(var s=1;s<=r;s++){var l=a+h*f;var u=c._intervalCurvePoints(a,l,o);e.push(u.cp1,u.cp2,u.p2);a=l}return e};u.prototype.bbox=function c(e){var t=this;var i=this._arcInterval();var n=i.startAngle;var r=i.endAngle;var h=fe(this.center,this.radiusX,this.radiusY,e);var f=V(h.x);var d=V(h.y);var p=this.pointAt(r).transformCopy(e);var a=Oe(f,n);var o=Oe(d,n);var s=this.pointAt(n).transformCopy(e);var l=L.min(s,p);var u=L.max(s,p);while(a<r||o<r){var v=void 0;if(a<r){v=t.pointAt(a).transformCopy(e);a+=90}var g=void 0;if(o<r){g=t.pointAt(o).transformCopy(e);o+=90}s=new L(v.x,g.y);l=L.min(l,s);u=L.max(u,s)}return P.fromPoints(l,u)};u.prototype._arcInterval=function e(){var t=this;var i=t.startAngle;var n=t.endAngle;var r=t.anticlockwise;if(r){var a=i;i=n;n=a}if(i>n||r&&i===n)n+=360;return{startAngle:i,endAngle:n}};u.prototype._intervalCurvePoints=function c(e,t,i){var n=this.pointAt(e);var r=this.pointAt(t);var a=this._derivativeAt(e);var o=this._derivativeAt(t);var s=(N(t)-N(e))/3;var l=new L(n.x+s*a.x,n.y+s*a.y);var u=new L(r.x-s*o.x,r.y-s*o.y);if(i){n.transform(i);r.transform(i);l.transform(i);u.transform(i)}return{p1:n,cp1:l,cp2:u,p2:r}};u.prototype._derivativeAt=function e(t){var i=N(t);return new L(-this.radiusX*Math.sin(i),this.radiusY*Math.cos(i))};u.prototype.containsPoint=function e(t){var i=this._arcInterval();var c=i.endAngle-i.startAngle;var n=this;var r=n.center;var a=n.radiusX;var o=n.radiusY;var s=r.distanceTo(t);var h=Math.atan2(t.y-r.y,t.x-r.x);var f=a*o/Math.sqrt(De(a,2)*De(Math.sin(h),2)+De(o,2)*De(Math.cos(h),2));var d=this.pointAt(this.startAngle).round(Ce);var p=this.pointAt(this.endAngle).round(Ce);var l=Ae(r,t.round(Ce),d,p);var e;if(c<180)e=l&&Te(r.distanceTo(l),s)&&Te(s,f);else{var u=Pe(r.x,r.y,a,o,t.x,t.y);if(u!==360)u=(360+u)%360;var v=i.startAngle<=u&&u<=i.endAngle;e=v&&Te(s,f)||!v&&(!l||l.equals(t))}return e};u.prototype._isOnPath=function e(t,i){var n=this._arcInterval();var r=this.center;var a=Pe(r.x,r.y,this.radiusX,this.radiusY,t.x,t.y);if(a!==360)a=(360+a)%360;var o=n.startAngle<=a&&a<=n.endAngle;return o&&this.pointAt(a).distanceTo(t)<=i};u.fromPoints=function e(t,i,n,r,a,o,s){var l=Be({x1:t.x,y1:t.y,x2:i.x,y2:i.y,rx:n,ry:r,largeArc:a,swipe:o,rotation:s});return new u(l.center,{startAngle:l.startAngle,endAngle:l.endAngle,radiusX:l.radiusX,radiusY:l.radiusY,xRotation:l.xRotation,anticlockwise:o===0})};return u}(oe(n,["radiusX","radiusY","startAngle","endAngle","anticlockwise"]));function Pe(e,t,i,n,r,a){var o=z((r-e)/i,3);var s=z((a-t)/n,3);return z(V(Math.atan2(s,o)))}function Be(e){var c=e.x1;var h=e.y1;var f=e.x2;var d=e.y2;var t=e.rx;var i=e.ry;var p=e.largeArc;var v=e.swipe;var n=e.rotation;if(n===void 0)n=0;var g=N(n);var r=Math.cos(g);var m=Math.sin(g);var _=r*(c-f)/2+m*(h-d)/2;var y=-m*(c-f)/2+r*(h-d)/2;var b=p!==v?1:-1;var w=Math.pow(_,2);var x=Math.pow(y,2);var a=Math.pow(t,2);var o=Math.pow(i,2);var k=w/a+x/o;if(k>1){k=Math.sqrt(w/a+x/o);t=k*t;a=Math.pow(t,2);i=k*i;o=Math.pow(i,2)}var C=b*Math.sqrt((a*o-a*x-o*w)/(a*x+o*w));if(isNaN(C))C=0;var S=C*(t*y)/i;var T=-C*(i*_)/t;var A=r*S-m*T+(c+f)/2;var M=m*S+r*T+(h+d)/2;var s=(_-S)/t;var l=(y-T)/i;var D=-(_+S)/t;var E=-(y+T)/i;var I=(l>=0?1:-1)*V(Math.acos(s/Math.sqrt(s*s+l*l)));var P=z((s*D+l*E)/(Math.sqrt(s*s+l*l)*Math.sqrt(D*D+E*E)),10);var u=(s*E-l*D>=0?1:-1)*V(Math.acos(P));if(!v&&u>0)u-=360;if(v&&u<0)u+=360;var B=I+u;var O=B>=0?1:-1;B=Math.abs(B)%360*O;return{center:new L(A,M),startAngle:I,endAngle:B,radiusX:t,radiusY:i,xRotation:n}}function Oe(e,t){var i=e;while(i<t)i+=90;return i}var ze=[].push,Le=[].pop,Re=[].splice,Fe=[].shift,Ve=[].slice,Ne=[].unshift,He=function(t){function e(e){if(e===void 0)e=[];t.call(this);this.length=0;this._splice(0,e.length,e)}h(e,t);e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;e.prototype.elements=function e(t){if(t){this._splice(0,this.length,t);this._change();return this}return this.slice(0)};e.prototype.push=function e(){var t=arguments;var i=ze.apply(this,t);this._add(t);return i};e.prototype.slice=function e(){return Ve.call(this)};e.prototype.pop=function e(){var t=this.length;var i=Le.apply(this);if(t)this._remove([i]);return i};e.prototype.splice=function e(t,i){var n=Ve.call(arguments,2);var r=this._splice(t,i,n);this._change();return r};e.prototype.shift=function e(){var t=this.length;var i=Fe.apply(this);if(t)this._remove([i]);return i};e.prototype.unshift=function e(){var t=arguments;var i=Ne.apply(this,t);this._add(t);return i};e.prototype.indexOf=function e(t){var i=this;var n=this.length;for(var r=0;r<n;r++)if(i[r]===t)return r;return-1};e.prototype._splice=function e(t,i,n){var r=Re.apply(this,[t,i].concat(n));this._clearObserver(r);this._setObserver(n);return r};e.prototype._add=function e(t){this._setObserver(t);this._change()};e.prototype._remove=function e(t){this._clearObserver(t);this._change()};e.prototype._setObserver=function e(t){var i=this;for(var n=0;n<t.length;n++)t[n].addObserver(i)};e.prototype._clearObserver=function e(t){var i=this;for(var n=0;n<t.length;n++)t[n].removeObserver(i)};e.prototype._change=function e(){};return e}(n),Ue=function(e){function t(){e.apply(this,arguments)}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;t.prototype._change=function e(){this.geometryChange()};return t}(He);function je(e,t,i){var n=V(Math.atan2(t.y-e.y,t.x-e.x));var r=i.transformCopy(ce().rotate(-n,e));return r.x<e.x}function Ge(e,t,i){var n=1-e;return Math.pow(n,3)*i[0][t]+3*Math.pow(n,2)*e*i[1][t]+3*Math.pow(e,2)*n*i[2][t]+Math.pow(e,3)*i[3][t]}function We(e,t){return[-e[0][t]+3*e[1][t]-3*e[2][t]+e[3][t],3*(e[0][t]-2*e[1][t]+e[2][t]),3*(-e[0][t]+e[1][t]),e[0][t]]}var qe=function(i){function a(e,t){if(e===void 0)e=0;if(t===void 0)t=0;i.call(this);this.real=e;this.img=t}h(a,i);a.prototype=Object.create(i&&i.prototype);a.prototype.constructor=a;a.fn=a.prototype;a.fn.init=a.fn.constructor;a.prototype.add=function e(t){return new a(z(this.real+t.real,Ce),z(this.img+t.img,Ce))};a.prototype.addConstant=function e(t){return new a(this.real+t,this.img)};a.prototype.negate=function e(){return new a(-this.real,-this.img)};a.prototype.multiply=function e(t){return new a(this.real*t.real-this.img*t.img,this.real*t.img+this.img*t.real)};a.prototype.multiplyConstant=function e(t){return new a(this.real*t,this.img*t)};a.prototype.nthRoot=function e(t){var i=Math.atan2(this.img,this.real);var n=Math.sqrt(Math.pow(this.img,2)+Math.pow(this.real,2));var r=Math.pow(n,1/t);return new a(r*Math.cos(i/t),r*Math.sin(i/t))};a.prototype.equals=function e(t){return this.real===t.real&&this.img===t.img};a.prototype.isReal=function e(){return this.img===0};return a}(o);function Ye(e){return e<0?-1:1}function $e(e,t,i){var n=Math.sqrt(Math.pow(t,2)-4*e*i);return[(-t+n)/(2*e),(-t-n)/(2*e)]}function Xe(e,t,i,c){if(e===0)return $e(t,i,c);var h=(3*e*i-Math.pow(t,2))/(3*Math.pow(e,2));var n=(2*Math.pow(t,3)-9*e*t*i+27*Math.pow(e,2)*c)/(27*Math.pow(e,3));var r=Math.pow(h/3,3)+Math.pow(n/2,2);var f=new qe(0,1);var a=-t/(3*e);var o,s,l,d,p,v,g;if(r<0){o=new qe(-n/2,Math.sqrt(-r)).nthRoot(3);s=new qe(-n/2,-Math.sqrt(-r)).nthRoot(3)}else{o=-n/2+Math.sqrt(r);o=new qe(Ye(o)*Math.pow(Math.abs(o),1/3));s=-n/2-Math.sqrt(r);s=new qe(Ye(s)*Math.pow(Math.abs(s),1/3))}l=o.add(s);v=o.add(s).multiplyConstant(-1/2);g=o.add(s.negate()).multiplyConstant(Math.sqrt(3)/2);d=v.add(f.multiply(g));p=v.add(f.negate().multiply(g));var u=[];if(l.isReal())u.push(z(l.real+a,Ce));if(d.isReal())u.push(z(d.real+a,Ce));if(p.isReal())u.push(z(p.real+a,Ce));return u}function Ke(e,t,i,n,r){var a=We(e,n);var o=Xe(a[0],a[1],a[2],a[3]-t[n]);var s;for(var l=0;l<o.length;l++)if(0<=o[l]&&o[l]<=1){s=Ge(o[l],i,e);if(Math.abs(s-t[i])<=r)return true}}function Qe(e,t,i){var n=We(e,"x");var r=Xe(n[0],n[1],n[2],n[3]-t.x);var a,o;var s=0;for(var l=0;l<r.length;l++){a=Ge(r[l],"y",e);o=Se(a,t.y)||a>t.y;if(o&&((r[l]===0||r[l]===1)&&i.bottomRight().x>t.x||0<r[l]&&r[l]<1))s++}return s}function Ze(e,t,i){var n;if(e.x!==t.x){var r=Math.min(e.x,t.x);var a=Math.max(e.x,t.x);var o=Math.min(e.y,t.y);var s=Math.max(e.y,t.y);var l=r<=i.x&&i.x<a;if(o===s)n=i.y<=o&&l;else n=l&&(s-o)*((e.x-t.x)*(e.y-t.y)>0?i.x-r:a-i.x)/(a-r)+o-i.y>=0}return n?1:0}function Je(e){var t="_"+e;return function(e){if(d(e)){this._observerField(t,L.create(e));this.geometryChange();return this}return this[t]}}function et(e,t){for(var i=0;i<t.length;i++)e[t[i]]=Je(t[i])}var tt=function(e,t){var i=function(e){function t(){e.apply(this,arguments)}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;return t}(e);et(i.prototype,t);return i},it,nt=function(n){function e(e,t,i){n.call(this);this.anchor(e||new L);this.controlIn(t);this.controlOut(i)}h(e,n);e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;e.prototype.bboxTo=function e(t,i){var n=this.anchor().transformCopy(i);var r=t.anchor().transformCopy(i);var a;if(this.controlOut()&&t.controlIn())a=this._curveBoundingBox(n,this.controlOut().transformCopy(i),t.controlIn().transformCopy(i),r);else a=this._lineBoundingBox(n,r);return a};e.prototype._lineBoundingBox=function e(t,i){return P.fromPoints(t,i)};e.prototype._curveBoundingBox=function u(e,t,i,n){var r=[e,t,i,n];var a=this._curveExtremesFor(r,"x");var o=this._curveExtremesFor(r,"y");var s=rt([a.min,a.max,e.x,n.x]);var l=rt([o.min,o.max,e.y,n.y]);return P.fromPoints(new L(s.min,l.min),new L(s.max,l.max))};e.prototype._curveExtremesFor=function e(t,i){var n=this._curveExtremes(t[0][i],t[1][i],t[2][i],t[3][i]);return{min:Ge(n.min,i,t),max:Ge(n.max,i,t)}};e.prototype._curveExtremes=function c(e,t,i,h){var n=e-3*t+3*i-h;var r=-2*(e-2*t+i);var f=e-t;var a=Math.sqrt(r*r-4*n*f);var o=0;var s=1;if(n===0){if(r!==0)o=s=-f/r}else if(!isNaN(a)){o=(-r+a)/(2*n);s=(-r-a)/(2*n)}var l=Math.max(Math.min(o,s),0);if(l<0||l>1)l=0;var u=Math.min(Math.max(o,s),1);if(u>1||u<0)u=1;return{min:l,max:u}};e.prototype._intersectionsTo=function e(t,i){var n;if(this.controlOut()&&t.controlIn())n=Qe([this.anchor(),this.controlOut(),t.controlIn(),t.anchor()],i,this.bboxTo(t));else n=Ze(this.anchor(),t.anchor(),i);return n};e.prototype._isOnCurveTo=function c(e,t,i,n){var h=this.bboxTo(e).expand(i,i);if(h.containsPoint(t)){var r=this.anchor();var a=this.controlOut();var o=e.controlIn();var s=e.anchor();if(n==="start"&&r.distanceTo(t)<=i)return!je(r,a,t);else if(n==="end"&&s.distanceTo(t)<=i)return!je(s,o,t);var l=[r,a,o,s];if(Ke(l,t,"x","y",i)||Ke(l,t,"y","x",i))return true;var u=ce().rotate(45,t);var f=[r.transformCopy(u),a.transformCopy(u),o.transformCopy(u),s.transformCopy(u)];return Ke(f,t,"x","y",i)||Ke(f,t,"y","x",i)}};e.prototype._isOnLineTo=function e(t,i,n){var r=this.anchor();var a=t.anchor();var o=V(Math.atan2(a.y-r.y,a.x-r.x));var s=new P([r.x,r.y-n/2],[r.distanceTo(a),n]);return s.containsPoint(i.transformCopy(ce().rotate(-o,r)))};e.prototype._isOnPathTo=function e(t,i,n,r){var a;if(this.controlOut()&&t.controlIn())a=this._isOnCurveTo(t,i,n/2,r);else a=this._isOnLineTo(t,i,n);return a};return e}(tt(n,["anchor","controlIn","controlOut"]));function rt(e){var t=e.length;var i=b;var n=w;for(var r=0;r<t;r++){n=Math.max(n,e[r]);i=Math.min(i,e[r])}return{min:i,max:n}}var at={Circle:pe,Arc:Ie,Rect:P,Point:L,Segment:nt,Matrix:a,Size:le,toMatrix:se,Transformation:ue,transform:ce},ot=.333,st=.01,lt="x",ut="y";function ct(c,e){var t=c.slice(0);var i=[];var n=t.length;if(n>2){ht(0,t);n=t.length}if(n<2||n===2&&t[0].equals(t[1]))return i;var r=t[0];var a=t[1];var o=t[2];i.push(new nt(r));while(r.equals(t[n-1])){e=true;t.pop();n--}if(n===2){var h=mt(r,a,lt,ut);y(i).controlOut(yt(h,r,a,lt,ut));i.push(new nt(a,bt(h,r,a,lt,ut)));return i}var s,f;if(e){r=t[n-1];a=t[0];o=t[1];var d=vt(r,a,o);s=d[1];f=d[0]}else{var p=mt(r,a,lt,ut);s=yt(p,r,a,lt,ut)}var l=s;for(var u=0;u<=n-3;u++){ht(u,t);n=t.length;if(u+3<=n){r=t[u];a=t[u+1];o=t[u+2];var v=vt(r,a,o);y(i).controlOut(l);l=v[1];var g=v[0];i.push(new nt(a,g))}}if(e){r=t[n-2];a=t[n-1];o=t[0];var m=vt(r,a,o);y(i).controlOut(l);i.push(new nt(a,m[0]));y(i).controlOut(m[1]);i.push(new nt(o,f))}else{var _=mt(a,o,lt,ut);y(i).controlOut(l);i.push(new nt(o,bt(_,a,o,lt,ut)))}return i}function ht(e,t){while(t[e+1]&&(t[e].equals(t[e+1])||t[e+1].equals(t[e+2])))t.splice(e+1,1)}function ft(e,t,i){var n=false;if(e.x===t.x)n=true;else if(t.x===i.x){if(t.y<i.y&&e.y<=t.y||i.y<t.y&&t.y<=e.y)n=true}else{var r=pt(e,t);var a=xt(r,i.x);if(!(e.y<=t.y&&i.y<=a)&&!(t.y<=e.y&&i.y>=a))n=true}return n}function dt(e,t,i){var n=pt(e,t);var r=xt(n,i.x);return e.x===t.x&&t.x===i.x||z(r,1)===z(i.y,1)}function pt(e,t){var i=(t.y-e.y)/(t.x-e.x);var n=e.y-i*e.x;return[n,i]}function vt(e,t,i){var n=lt;var r=ut;var a=false;var o=false;var s;if(dt(e,t,i))s=mt(e,t,lt,ut);else{var l={x:_t(e,t,i,lt),y:_t(e,t,i,ut)};if(l.x&&l.y){s=mt(e,i,lt,ut);a=true}else{if(ft(e,t,i)){n=ut;r=lt}if(l[n])s=0;else{var u;if(i[r]<e[r]&&e[r]<=t[r]||e[r]<i[r]&&t[r]<=e[r])u=kt((i[r]-e[r])*(t[n]-e[n]));else u=-kt((i[n]-e[n])*(t[r]-e[r]));s=st*u;o=true}}}var c=bt(s,e,t,n,r);if(o){var h=n;n=r;r=h}var f=yt(s,t,i,n,r);if(a){gt(e,t,c,s);gt(t,i,f,s)}return[c,f]}function gt(e,t,i,n){if(e.y<t.y){if(t.y<i.y){i.x=e.x+(t.y-e.y)/n;i.y=t.y}else if(i.y<e.y){i.x=t.x-(t.y-e.y)/n;i.y=e.y}}else if(i.y<t.y){i.x=e.x-(e.y-t.y)/n;i.y=t.y}else if(e.y<i.y){i.x=t.x+(e.y-t.y)/n;i.y=e.y}}function mt(e,t,i,n){var r=t[i]-e[i];var a=t[n]-e[n];var o;if(r===0)o=0;else o=a/r;return o}function _t(e,t,i,n){return i[n]>t[n]&&t[n]>e[n]||i[n]<t[n]&&t[n]<e[n]}function yt(e,t,i,n,r){var a=t[n];var o=i[n];var s=(o-a)*ot;return wt(a+s,t[r]+s*e,n,r)}function bt(e,t,i,n,r){var a=t[n];var o=i[n];var s=(o-a)*ot;return wt(o-s,i[r]-s*e,n,r)}function wt(e,t,i,n){var r=new L;r[i]=e;r[n]=t;return r}function xt(e,t){var i=e.length;var n=0;for(var r=0;r<i;r++)n+=Math.pow(t,r)*e[r];return n}function kt(e){return e<=0?-1:1}var Ct={l:function(e,t){var i=t.parameters;var n=t.position;for(var r=0;r<i.length;r+=2){var a=new L(i[r],i[r+1]);if(t.isRelative)a.translateWith(n);e.lineTo(a.x,a.y);n.x=a.x;n.y=a.y}},c:function(e,t){var i=t.parameters;var n=t.position;for(var r=0;r<i.length;r+=6){var a=new L(i[r],i[r+1]);var o=new L(i[r+2],i[r+3]);var s=new L(i[r+4],i[r+5]);if(t.isRelative){o.translateWith(n);a.translateWith(n);s.translateWith(n)}e.curveTo(a,o,s);n.x=s.x;n.y=s.y}},v:function(e,t){var i=t.isRelative?0:t.position.x;St(t.parameters,true,i);this.l(e,t)},h:function(e,t){var i=t.isRelative?0:t.position.y;St(t.parameters,false,i);this.l(e,t)},a:function(e,t){var i=t.parameters;var n=t.position;for(var r=0;r<i.length;r+=7){var a=i[r];var o=i[r+1];var s=i[r+2];var l=i[r+3];var c=i[r+4];var u=new L(i[r+5],i[r+6]);if(t.isRelative)u.translateWith(n);if(n.x!==u.x||n.y!==u.y){e.arcTo(u,a,o,l,c,s);n.x=u.x;n.y=u.y}}},s:function(e,t){var i=t.parameters;var n=t.position;var r=t.previousCommand;var a;if(r==="s"||r==="c")a=y(y(e.paths).segments).controlIn();for(var o=0;o<i.length;o+=4){var s=new L(i[o],i[o+1]);var l=new L(i[o+2],i[o+3]);var u=void 0;if(t.isRelative){s.translateWith(n);l.translateWith(n)}if(a)u=Tt(a,n);else u=n.clone();a=s;e.curveTo(u,s,l);n.x=l.x;n.y=l.y}},q:function(e,t){var i=t.parameters;var n=t.position;for(var r=0;r<i.length;r+=4){var a=new L(i[r],i[r+1]);var o=new L(i[r+2],i[r+3]);if(t.isRelative){a.translateWith(n);o.translateWith(n)}var s=Mt(n,a,o);e.curveTo(s.controlOut,s.controlIn,o);n.x=o.x;n.y=o.y}},t:function(e,t){var i=t.parameters;var n=t.position;var r=t.previousCommand;var a;if(r==="q"||r==="t"){var o=y(y(e.paths).segments);a=o.controlIn().clone().translateWith(n.scaleCopy(-1/3)).scale(3/2)}for(var s=0;s<i.length;s+=2){var l=new L(i[s],i[s+1]);if(t.isRelative)l.translateWith(n);if(a)a=Tt(a,n);else a=n.clone();var u=Mt(n,a,l);e.curveTo(u.controlOut,u.controlIn,l);n.x=l.x;n.y=l.y}}};function St(e,t,i){var n=t?0:1;for(var r=0;r<e.length;r+=2)e.splice(r+n,0,i)}function Tt(e,t){if(e&&t)return t.scaleCopy(2).translate(-e.x,-e.y)}var At=1/3;function Mt(e,t,i){var n=t.clone().scale(2/3);return{controlOut:n.clone().translateWith(e.scaleCopy(At)),controlIn:n.translateWith(i.scaleCopy(At))}}var Dt=/([a-df-z]{1})([^a-df-z]*)(z)?/gi,Et=/[,\s]?([+\-]?(?:\d*\.\d+|\d+)(?:[eE][+\-]?\d+)?)/g,It="m",Pt="z";function Bt(e){var i=[];e.replace(Et,function(e,t){i.push(parseFloat(t))});return i}function Ot(s,e){var l=new L;var u;e.replace(Dt,function(e,t,i,n){var r=t.toLowerCase();var a=r===t;var o=Bt(i.trim());if(r===It){if(a){l.x+=o[0];l.y+=o[1]}else{l.x=o[0];l.y=o[1]}s.moveTo(l.x,l.y);if(o.length>2){r="l";o.splice(0,2)}}if(Ct[r]){Ct[r](s,{parameters:o,position:l,isRelative:a,previousCommand:u});if(n&&n.toLowerCase()===Pt)s.close()}else if(r!==It)throw new Error("Error while parsing SVG path. Unsupported command: "+r);u=r});return s}function zt(e,t,i){var n;for(var r=0;r<e.length;r++){var a=e[r];if(a.visible()){var o=t?a.bbox(i):a.rawBBox();if(o)if(n)n=P.union(n,o);else n=o}}return n}function Lt(e,t){var i;for(var n=0;n<e.length;n++){var r=e[n];if(r.visible()){var a=r.clippedBBox(t);if(a)if(i)i=P.union(i,a);else i=a}}return i}var Rt=" ",Ft=function(i){return function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];return e.map(function(e){return e.toString(i)}).join(Rt)}},Vt=function(e,t){return e.controlOut()&&t.controlIn()?"C":"L"},B=function(t){function f(e){t.call(this,e);this.segments=new Ue;this.segments.addObserver(this);if(!d(this.options.stroke)){this.stroke("#000");if(!d(this.options.stroke.lineJoin))this.options.set("stroke.lineJoin","miter")}}h(f,t);f.prototype=Object.create(t&&t.prototype);f.prototype.constructor=f;f.fn=f.prototype;f.fn.init=f.fn.constructor;var e={nodeType:{}};e.nodeType.get=function(){return"Path"};f.prototype.moveTo=function e(t,i){this.suspend();this.segments.elements([]);this.resume();this.lineTo(t,i);return this};f.prototype.lineTo=function e(t,i){var n=d(i)?new L(t,i):t;var r=new nt(n);this.segments.push(r);return this};f.prototype.curveTo=function e(t,i,n){if(this.segments.length>0){var r=y(this.segments);var a=new nt(n,i);this.suspend();r.controlOut(t);this.resume();this.segments.push(a)}return this};f.prototype.arc=function e(t,i,n,r,a){if(this.segments.length>0){var o=y(this.segments);var s=o.anchor();var l=N(t);var u=new L(s.x-n*Math.cos(l),s.y-r*Math.sin(l));var e=new Ie(u,{startAngle:t,endAngle:i,radiusX:n,radiusY:r,anticlockwise:a});this._addArcSegments(e)}return this};f.prototype.arcTo=function u(e,t,i,n,r,a){if(this.segments.length>0){var o=y(this.segments);var s=o.anchor();var l=Ie.fromPoints(s,L.create(e),t,i,n,r,a);this._addArcSegments(l)}return this};f.prototype._addArcSegments=function e(t){var i=this;this.suspend();var n=t.curvePoints();for(var r=1;r<n.length;r+=3)i.curveTo(n[r],n[r+1],n[r+2]);this.resume();this.geometryChange()};f.prototype.close=function e(){this.options.closed=true;this.geometryChange();return this};f.prototype.rawBBox=function e(){return this._bbox()};f.prototype.toString=function u(e){var t="";var i=this.segments;var n=i.length;if(n>0){var r=[];var a=Ft(e);var o;for(var s=1;s<n;s++){var l=Vt(i[s-1],i[s]);if(l!==o){o=l;r.push(l)}if(l==="L")r.push(a(i[s].anchor()));else r.push(a(i[s-1].controlOut(),i[s].controlIn(),i[s].anchor()))}t="M"+a(i[0].anchor())+Rt+r.join(Rt);if(this.options.closed)t+="Z"}return t};f.prototype._containsPoint=function e(t){var i=this.segments;var n=i.length;var r=0;var a,o;for(var s=1;s<n;s++){a=i[s-1];o=i[s];r+=a._intersectionsTo(o,t)}if(this.options.closed||!i[0].anchor().equals(i[n-1].anchor()))r+=Ze(i[0].anchor(),i[n-1].anchor(),t);return r%2!==0};f.prototype._isOnPath=function e(t,i){var n=this.segments;var r=n.length;var a=i||this.options.stroke.width;if(r>1){if(n[0]._isOnPathTo(n[1],t,a,"start"))return true;for(var o=2;o<=r-2;o++)if(n[o-1]._isOnPathTo(n[o],t,a))return true;if(n[r-2]._isOnPathTo(n[r-1],t,a,"end"))return true}return false};f.prototype._bbox=function e(t){var i=this.segments;var n=i.length;var r;if(n===1){var a=i[0].anchor().transformCopy(t);r=new P(a,le.ZERO)}else if(n>0)for(var o=1;o<n;o++){var s=i[o-1].bboxTo(i[o],t);if(r)r=P.union(r,s);else r=s}return r};f.parse=function e(t,i){return Nt.parse(t,i)};f.fromRect=function c(e,h){var t=new f(h);var i=e.cornerRadius;var n=i[0];var r=i[1];if(n===0&&r===0)t.moveTo(e.topLeft()).lineTo(e.topRight()).lineTo(e.bottomRight()).lineTo(e.bottomLeft()).close();else{var a=e.origin;var o=a.x;var s=a.y;var l=e.width();var u=e.height();n=D(n,0,l/2);r=D(r,0,u/2);t.moveTo(o+n,s).lineTo(o+l-n,s).arcTo([o+l,s+r],n,r,false).lineTo(o+l,s+u-r).arcTo([o+l-n,s+u],n,r,false).lineTo(o+n,s+u).arcTo([o,s+u-r],n,r,false).lineTo(o,s+r).arcTo([o+n,s],n,r,false)}return t};f.fromPoints=function e(t,i){if(t){var n=new f(i);for(var r=0;r<t.length;r++){var a=L.create(t[r]);if(a)if(r===0)n.moveTo(a);else n.lineTo(a)}return n}};f.curveFromPoints=function e(t,i){if(t){var n=ct(t);var r=new f(i);r.segments.push.apply(r.segments,n);return r}};f.fromArc=function e(t,i){var n=new f(i);var r=t.startAngle;var a=t.pointAt(r);n.moveTo(a.x,a.y);n.arc(r,t.endAngle,t.radiusX,t.radiusY,t.anticlockwise);return n};Object.defineProperties(f.prototype,e);return f}(ge(_e(he))),Nt=function(t){function r(e){t.call(this,e);this.paths=new Ue;this.paths.addObserver(this);if(!d(this.options.stroke))this.stroke("#000")}h(r,t);r.prototype=Object.create(t&&t.prototype);r.prototype.constructor=r;r.fn=r.prototype;r.fn.init=r.fn.constructor;var e={nodeType:{}};r.parse=function e(t,i){var n=new r(i);return Ot(n,t)};r.prototype.toString=function e(t){var i=this.paths;var n="";if(i.length>0){var r=[];for(var a=0;a<i.length;a++)r.push(i[a].toString(t));n=r.join(Rt)}return n};e.nodeType.get=function(){return"MultiPath"};r.prototype.moveTo=function e(t,i){var n=new B;n.moveTo(t,i);this.paths.push(n);return this};r.prototype.lineTo=function e(t,i){if(this.paths.length>0)y(this.paths).lineTo(t,i);return this};r.prototype.curveTo=function e(t,i,n){if(this.paths.length>0)y(this.paths).curveTo(t,i,n);return this};r.prototype.arc=function e(t,i,n,r,a){if(this.paths.length>0)y(this.paths).arc(t,i,n,r,a);return this};r.prototype.arcTo=function e(t,i,n,r,a,o){if(this.paths.length>0)y(this.paths).arcTo(t,i,n,r,a,o);return this};r.prototype.close=function e(){if(this.paths.length>0)y(this.paths).close();return this};r.prototype._bbox=function e(t){return zt(this.paths,true,t)};r.prototype.rawBBox=function e(){return zt(this.paths,false)};r.prototype._containsPoint=function e(t){var i=this.paths;for(var n=0;n<i.length;n++)if(i[n]._containsPoint(t))return true;return false};r.prototype._isOnPath=function e(t){var i=this.paths;var n=this.options.stroke.width;for(var r=0;r<i.length;r++)if(i[r]._isOnPath(t,n))return true;return false};r.prototype._clippedBBox=function e(t){return Lt(this.paths,this.currentTransform(t))};Object.defineProperties(r.prototype,e);return r}(ge(_e(he))),Ht="#000",Ut=function(i){function e(e,t){if(e===void 0)e=new Ie;if(t===void 0)t={};i.call(this,t);this.geometry(e);if(!d(this.options.stroke))this.stroke(Ht)}h(e,i);e.prototype=Object.create(i&&i.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;var t={nodeType:{}};t.nodeType.get=function(){return"Arc"};e.prototype._bbox=function e(t){return this._geometry.bbox(t)};e.prototype.rawBBox=function e(){return this.geometry().bbox()};e.prototype.toPath=function e(){var t=new B;var i=this.geometry().curvePoints();if(i.length>0){t.moveTo(i[0].x,i[0].y);for(var n=1;n<i.length;n+=3)t.curveTo(i[n],i[n+1],i[n+2])}return t};e.prototype._containsPoint=function e(t){return this.geometry().containsPoint(t)};e.prototype._isOnPath=function e(t){return this.geometry()._isOnPath(t,this.options.stroke.width/2)};Object.defineProperties(e.prototype,t);return e}(ge(_e(we(he)))),jt="12px sans-serif",Gt="#000",Wt=function(n){function e(e,t,i){if(t===void 0)t=new L;if(i===void 0)i={};n.call(this,i);this.content(e);this.position(t);if(!this.options.font)this.options.font=jt;if(!d(this.options.fill))this.fill(Gt)}h(e,n);e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;var t={nodeType:{}};t.nodeType.get=function(){return"Text"};e.prototype.content=function e(t){if(d(t)){this.options.set("content",t);return this}return this.options.get("content")};e.prototype.measure=function e(){var t=s.measureText(this.content(),{font:this.options.get("font")});return t};e.prototype.rect=function e(){var t=this.measure();var i=this.position().clone();return new P(i,[t.width,t.height])};e.prototype.bbox=function e(t){var i=se(this.currentTransform(t));return this.rect().bbox(i)};e.prototype.rawBBox=function e(){return this.rect().bbox()};e.prototype._containsPoint=function e(t){return this.rect().containsPoint(t)};Object.defineProperties(e.prototype,t);return e}(ge(tt(he,["position"]))),qt=function(n){function e(e,t,i){if(t===void 0)t=new P;if(i===void 0)i={};n.call(this,i);this.src(e);this.rect(t)}h(e,n);e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;var t={nodeType:{}};t.nodeType.get=function(){return"Image"};e.prototype.src=function e(t){if(d(t)){this.options.set("src",t);return this}return this.options.get("src")};e.prototype.bbox=function e(t){var i=se(this.currentTransform(t));return this._rect.bbox(i)};e.prototype.rawBBox=function e(){return this._rect.bbox()};e.prototype._containsPoint=function e(t){return this._rect.containsPoint(t)};e.prototype._hasFill=function e(){return this.src()};Object.defineProperties(e.prototype,t);return e}(we(he,["rect"])),Yt=function(e,a){return function(e){function t(){e.apply(this,arguments)}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;t.prototype.traverse=function e(t){var i=this[a];for(var n=0;n<i.length;n++){var r=i[n];if(r.traverse)r.traverse(t);else t(r)}return this};return t}(e)},$t=function(t){function e(e){t.call(this,e);this.children=[]}h(e,t);e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;var i={nodeType:{}};i.nodeType.get=function(){return"Group"};e.prototype.childrenChange=function e(t,i,n){this.trigger("childrenChange",{action:t,items:i,index:n})};e.prototype.append=function e(){c(this.children,arguments);this._reparent(arguments,this);this.childrenChange("add",arguments);return this};e.prototype.insert=function e(t,i){this.children.splice(t,0,i);i.parent=this;this.childrenChange("add",[i],t);return this};e.prototype.insertAt=function e(t,i){return this.insert(i,t)};e.prototype.remove=function e(t){var i=this.children.indexOf(t);if(i>=0){this.children.splice(i,1);t.parent=null;this.childrenChange("remove",[t],i)}return this};e.prototype.removeAt=function e(t){if(0<=t&&t<this.children.length){var i=this.children[t];this.children.splice(t,1);i.parent=null;this.childrenChange("remove",[i],t)}return this};e.prototype.clear=function e(){var t=this.children;this.children=[];this._reparent(t,null);this.childrenChange("remove",t,0);return this};e.prototype.bbox=function e(t){return zt(this.children,true,this.currentTransform(t))};e.prototype.rawBBox=function e(){return zt(this.children,false)};e.prototype._clippedBBox=function e(t){return Lt(this.children,this.currentTransform(t))};e.prototype.currentTransform=function e(t){return he.prototype.currentTransform.call(this,t)||null};e.prototype.containsPoint=function e(t,i){if(this.visible()){var n=this.children;var r=this.currentTransform(i);for(var a=0;a<n.length;a++)if(n[a].containsPoint(t,r))return true}return false};e.prototype._reparent=function e(t,i){var n=this;for(var r=0;r<t.length;r++){var a=t[r];var o=a.parent;if(o&&o!==n&&o.remove)o.remove(a);a.parent=i}};Object.defineProperties(e.prototype,i);return e}(Yt(he,"children"));function Xt(e,t,i){var n=i.transform()||ce();var r=n.matrix();r.e+=e.x-t.origin.x;r.f+=e.y-t.origin.y;n.matrix(r);i.transform(n)}function Kt(e,t,i,n,r){var a;if(i==="start")a=t.origin[n];else if(i==="end")a=t.origin[n]+t.size[r]-e;else a=t.origin[n]+(t.size[r]-e)/2;return a}function Qt(e,t,i,n,r){var a;if(i==="start")a=t.origin[n]+t.size[r]-e;else if(i==="end")a=t.origin[n];else a=t.origin[n]+(t.size[r]-e)/2;return a}var Zt={alignContent:"start",justifyContent:"start",alignItems:"start",spacing:0,orientation:"horizontal",lineSpacing:0,wrap:true,revers:false},Jt=function(e,t){e.forEach(t)},ei=function(e,t){var i=e.length;for(var n=i-1;n>=0;n--)t(e[n],n)},ti=function(i){function e(e,t){i.call(this,p.extend({},Zt,t));this._rect=e;this._fieldMap={}}h(e,i);e.prototype=Object.create(i&&i.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;e.prototype.rect=function e(t){if(t){this._rect=t;return this}return this._rect};e.prototype._initMap=function e(){var t=this.options;var i=this._fieldMap;if(t.orientation==="horizontal"){i.sizeField="width";i.groupsSizeField="height";i.groupAxis="x";i.groupsAxis="y"}else{i.sizeField="height";i.groupsSizeField="width";i.groupAxis="y";i.groupsAxis="x"}if(t.reverse){this.forEach=ei;this.justifyAlign=Qt}else{this.forEach=Jt;this.justifyAlign=Kt}};e.prototype.reflow=function c(){var h=this;if(!this._rect||this.children.length===0)return;this._initMap();if(this.options.transform)this.transform(null);var n=this.options;var e=this._rect;var f=this._initGroups();var d=f.groups;var p=f.groupsSize;var t=this._fieldMap;var r=t.sizeField;var a=t.groupsSizeField;var o=t.groupAxis;var s=t.groupsAxis;var v=new L;var g=new L;var m=new le;var _=Kt(p,e,n.alignContent,s,a);var y,l,u;var b=function(e,t){var i=l.elements[t];g[o]=y;g[s]=Kt(e.size[a],u,n.alignItems,s,a);Xt(g,e,i);y+=e.size[r]+n.spacing};for(var w=0;w<d.length;w++){l=d[w];v[o]=y=h.justifyAlign(l.size,e,n.justifyContent,o,r);v[s]=_;m[r]=l.size;m[a]=l.lineSize;u=new P(v,m);h.forEach(l.bboxes,b);_+=l.lineSize+n.lineSpacing}if(!n.wrap&&l.size>e.size[r]){var i=e.size[r]/u.size[r];var x=u.topLeft().scale(i,i);var k=u.size[a]*i;var C=Kt(k,e,n.alignContent,s,a);var S=ce();if(o==="x")S.translate(e.origin.x-x.x,C-x.y);else S.translate(C-x.x,e.origin.y-x.y);S.scale(i,i);this.transform(S)}};e.prototype._initGroups=function c(){var e=this;var t=this;var i=t.options;var n=t.children;var r=i.lineSpacing;var h=i.wrap;var f=i.spacing;var d=this._fieldMap.sizeField;var a=this._newGroup();var p=[];var o=function(){p.push(a);v+=a.lineSize+r};var v=-r;for(var s=0;s<n.length;s++){var l=n[s];var u=n[s].clippedBBox();if(l.visible()&&u)if(h&&a.size+u.size[d]+f>e._rect.size[d])if(a.bboxes.length===0){e._addToGroup(a,u,l);o();a=e._newGroup()}else{o();a=e._newGroup();e._addToGroup(a,u,l)}else e._addToGroup(a,u,l)}if(a.bboxes.length)o();return{groups:p,groupsSize:v}};e.prototype._addToGroup=function e(t,i,n){t.size+=i.size[this._fieldMap.sizeField]+this.options.spacing;t.lineSize=Math.max(i.size[this._fieldMap.groupsSizeField],t.lineSize);t.bboxes.push(i);t.elements.push(n)};e.prototype._newGroup=function e(){return{lineSize:0,size:-this.options.spacing,bboxes:[],elements:[]}};return e}($t),ii=function(i){function e(e,t){if(e===void 0)e=new P;if(t===void 0)t={};i.call(this,t);this.geometry(e);if(!d(this.options.stroke))this.stroke("#000")}h(e,i);e.prototype=Object.create(i&&i.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;var t={nodeType:{}};t.nodeType.get=function(){return"Rect"};e.prototype._bbox=function e(t){return this._geometry.bbox(t)};e.prototype.rawBBox=function e(){return this._geometry.bbox()};e.prototype._containsPoint=function e(t){return this._geometry.containsPoint(t)};e.prototype._isOnPath=function e(t){return this.geometry()._isOnPath(t,this.options.stroke.width/2)};Object.defineProperties(e.prototype,t);return e}(ge(_e(we(he))));function ni(e,t,i,n,r){for(var a=0;a<e.length;a++){var o=e[a].clippedBBox();if(o){var s=o.origin.clone();s[n]=Kt(o.size[r],t,i||"start",n,r);Xt(s,o,e[a])}}}function ri(e,t,i){ni(e,t,i,"x","width")}function ai(e,t,i){ni(e,t,i,"y","height")}function oi(e,t,i,n){if(e.length>1){var r=new L;var a=e[0].bbox;for(var o=1;o<e.length;o++){var s=e[o].element;var l=e[o].bbox;r[t]=a.origin[t]+a.size[n];r[i]=l.origin[i];Xt(r,l,s);l.origin[t]=r[t];a=l}}}function si(e){var t=[];for(var i=0;i<e.length;i++){var n=e[i];var r=n.clippedBBox();if(r)t.push({element:n,bbox:r})}return t}function li(e){oi(si(e),"x","y","width")}function ui(e){oi(si(e),"y","x","height")}function ci(e,c,t){var h=c.size[t];var i=[];var n=[];var r=0;var a,o;var s=function(){n.push({element:a,bbox:o})};for(var l=0;l<e.length;l++){a=e[l];o=a.clippedBBox();if(o){var u=o.size[t];if(r+u>h)if(n.length){i.push(n);n=[];s();r=u}else{s();i.push(n);n=[];r=0}else{s();r+=u}}}if(n.length)i.push(n);return i}function hi(c,e,t,i,n){var h=ci(c,e,n);var r=e.origin.clone();var a=[];for(var o=0;o<h.length;o++){var s=h[o];var l=s[0];r[i]=l.bbox.origin[i];Xt(r,l.bbox,l.element);l.bbox.origin[t]=r[t];oi(s,t,i,n);a.push([]);for(var u=0;u<s.length;u++)a[o].push(s[u].element)}return a}function fi(e,t){return hi(e,t,"x","y","width")}function di(e,t){return hi(e,t,"y","x","height")}function pi(e,t){var i=e.clippedBBox();if(i){var n=i.size;var r=t.size;if(r.width<n.width||r.height<n.height){var a=Math.min(r.width/n.width,r.height/n.height);var o=e.transform()||ce();o.scale(a,a);e.transform(o)}}}var vi=function(e){function t(){e.apply(this,arguments)}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;t.prototype._change=function e(){this.optionsChange({field:"stops"})};return t}(He);function gi(t){return function(e){if(d(e)){this.options.set(t,e);return this}return this.options.get(t)}}function mi(e,t){for(var i=0;i<t.length;i++)e[t[i]]=gi(t[i])}var _i,yi,bi=function(n){function r(e,t,i){n.call(this);this.options=new ie({offset:e,color:t,opacity:d(i)?i:1});this.options.addObserver(this)}h(r,n);r.prototype=Object.create(n&&n.prototype);r.prototype.constructor=r;r.fn=r.prototype;r.fn.init=r.fn.constructor;r.create=function e(t){if(d(t)){var i;if(t instanceof r)i=t;else if(t.length>1)i=new r(t[0],t[1],t[2]);else i=new r(t.offset,t.color,t.opacity);return i}};return r}(function(e,t){var i=function(e){function t(){e.apply(this,arguments)}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;return t}(e);mi(i.prototype,t);return i}(n,["offset","color","opacity"])),wi=function(t){function e(e){if(e===void 0)e={};t.call(this);this.stops=new vi(this._createStops(e.stops));this.stops.addObserver(this);this._userSpace=e.userSpace;this.id=m()}h(e,t);e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;var i={nodeType:{}};i.nodeType.get=function(){return"Gradient"};e.prototype.userSpace=function e(t){if(d(t)){this._userSpace=t;this.optionsChange();return this}return this._userSpace};e.prototype._createStops=function e(t){if(t===void 0)t=[];var i=[];for(var n=0;n<t.length;n++)i.push(bi.create(t[n]));return i};e.prototype.addStop=function e(t,i,n){this.stops.push(new bi(t,i,n))};e.prototype.removeStop=function e(t){var i=this.stops.indexOf(t);if(i>=0)this.stops.splice(i,1)};e.prototype.optionsChange=function e(t){this.trigger("optionsChange",{field:"gradient"+(t?"."+t.field:""),value:this})};e.prototype.geometryChange=function e(){this.optionsChange()};Object.defineProperties(e.prototype,i);return e}(n),xi,ki=function(t){function e(e){if(e===void 0)e={};t.call(this,e);this.start(e.start||new L);this.end(e.end||new L(1,0))}h(e,t);e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;return e}(tt(wi,["start","end"])),Ci=function(t){function e(e){if(e===void 0)e={};t.call(this,e);this.center(e.center||new L);this._radius=d(e.radius)?e.radius:1;this._fallbackFill=e.fallbackFill}h(e,t);e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;e.prototype.radius=function e(t){if(d(t)){this._radius=t;this.geometryChange();return this}return this._radius};e.prototype.fallbackFill=function e(t){if(d(t)){this._fallbackFill=t;this.optionsChange();return this}return this._fallbackFill};return e}(tt(wi,["center"]));function Si(e){return.5-Math.cos(e*Math.PI)/2}function Ti(e){return e}function Ai(e,t,i,n){var r=1.70158,a=0,o=n;if(e===0)return i;if(e===1)return i+n;if(!a)a=.5;if(o<Math.abs(n)){o=n;r=a/4}else r=a/(2*Math.PI)*Math.asin(n/o);return o*Math.pow(2,-10*e)*Math.sin((Number(e)-r)*(1.1*Math.PI)/a)+n+i}var Mi={swing:Si,linear:Ti,easeOutElastic:Ai},Di,Ei=function(e){function t(){e.call(this);this._items=[]}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;var i={current:{}};i.current.get=function(){if(!Di)Di=new t;return Di};t.prototype.register=function e(t,i){this._items.push({name:t,type:i})};t.prototype.create=function e(t,i){var n=this._items;var r;if(i&&i.type){var a=i.type.toLowerCase();for(var o=0;o<n.length;o++)if(n[o].name.toLowerCase()===a){r=n[o];break}}if(r)return new r.type(t,i)};Object.defineProperties(t,i);return t}(o),Ii=function(i){function e(e,t){i.call(this);this.options=p.extend({},this.options,t);this.element=e}h(e,i);e.prototype=Object.create(i&&i.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;var t={options:{}};e.create=function e(t,i,n){return Ei.current.create(t,i,n)};t.options.get=function(){return this._options||{duration:500,easing:"swing"}};t.options.set=function(e){this._options=e};e.prototype.setup=function e(){};e.prototype.step=function e(){};e.prototype.play=function e(){var a=this;var t=this.options;var o=t.duration;var i=t.delay;if(i===void 0)i=0;var s=Mi[t.easing];var l=I()+i;var u=l+o;if(o===0){this.step(1);this.abort()}else setTimeout(function(){var r=function(){if(a._stopped)return;var e=I();var t=D(e-l,0,o);var i=t/o;var n=s(i,t,0,1,o);a.step(n);if(e<u)kendo.animationFrame(r);else a.abort()};r()},i)};e.prototype.abort=function e(){this._stopped=true};e.prototype.destroy=function e(){this.abort()};Object.defineProperties(e.prototype,t);return e}(o),Pi,Bi=function(e){function t(){e.apply(this,arguments)}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;var i={current:{}};i.current.get=function(){if(!Pi)Pi=new t;return Pi};t.prototype.parse=function e(t,i){var n=new Nt(i);return Ot(n,t)};Object.defineProperties(t,i);return t}(o),Oi=function(t){function e(e){t.call(this);this.childNodes=[];this.parent=null;if(e){this.srcElement=e;this.observe()}}h(e,t);e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;e.prototype.destroy=function e(){var t=this;if(this.srcElement)this.srcElement.removeObserver(this);var i=this.childNodes;for(var n=0;n<i.length;n++)t.childNodes[n].destroy();this.parent=null};e.prototype.load=function e(){};e.prototype.observe=function e(){if(this.srcElement)this.srcElement.addObserver(this)};e.prototype.append=function e(t){this.childNodes.push(t);t.parent=this};e.prototype.insertAt=function e(t,i){this.childNodes.splice(i,0,t);t.parent=this};e.prototype.remove=function e(t,i){var n=this;var r=t+i;for(var a=t;a<r;a++)n.childNodes[a].removeSelf();this.childNodes.splice(t,i)};e.prototype.removeSelf=function e(){this.clear();this.destroy()};e.prototype.clear=function e(){this.remove(0,this.childNodes.length)};e.prototype.invalidate=function e(){if(this.parent)this.parent.invalidate()};e.prototype.geometryChange=function e(){this.invalidate()};e.prototype.optionsChange=function e(){this.invalidate()};e.prototype.childrenChange=function e(t){if(t.action==="add")this.load(t.items,t.index);else if(t.action==="remove")this.remove(t.index,t.items.length);this.invalidate()};return e}(o),zi=["click","mouseenter","mouseleave","mousemove","resize"],Li=function(i){function e(e,t){i.call(this);this.options=p.extend({},t);this.element=e;this.element._kendoExportVisual=this.exportVisual.bind(this);this._click=this._handler("click");this._mouseenter=this._handler("mouseenter");this._mouseleave=this._handler("mouseleave");this._mousemove=this._handler("mousemove");this._visual=new $t;Y(e,this.options);this.bind(zi,this.options);this._enableTracking()}h(e,i);e.prototype=Object.create(i&&i.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;e.prototype.draw=function e(t){this._visual.children.push(t)};e.prototype.clear=function e(){this._visual.children=[]};e.prototype.destroy=function e(){this._visual=null;this.element._kendoExportVisual=null;this.unbind()};e.prototype.eventTarget=function e(t){var i=this;var n=A(t);var r;while(!r&&n){r=n._kendoNode;if(n===i.element)break;n=n.parentElement}if(r)return r.srcElement};e.prototype.exportVisual=function e(){return this._visual};e.prototype.getSize=function e(){return Y(this.element)};e.prototype.currentSize=function e(t){if(t)this._size=t;else return this._size};e.prototype.setSize=function e(t){Y(this.element,t);this.currentSize(t);this._resize()};e.prototype.resize=function e(t){var i=this.getSize();var n=this.currentSize();if(t||(i.width>0||i.height>0)&&(!n||i.width!==n.width||i.height!==n.height)){this.currentSize(i);this._resize(i,t);this.trigger("resize",i)}};e.prototype.size=function e(t){if(!t)return this.getSize();this.setSize(t)};e.prototype.suspendTracking=function e(){this._suspendedTracking=true};e.prototype.resumeTracking=function e(){this._suspendedTracking=false};e.prototype._enableTracking=function e(){};e.prototype._resize=function e(){};e.prototype._handler=function e(i){var n=this;return function(e){var t=n.eventTarget(e);if(t&&!n._suspendedTracking)n.trigger(i,{element:t,originalEvent:e,type:i})}};e.prototype._elementOffset=function e(){var t=this.element;var i=X(t);var n=G(t);var r=n.left;var a=n.top;return{left:r+i.left,top:a+i.top}};e.prototype._surfacePoint=function e(t){var i=this._elementOffset();var n=T(t);var r=n.x-i.left;var a=n.y-i.top;var o=J(this.element).invert();var s=new L(r,a).transform(o);return s};return e}(kendo.Observable);function Ri(e,t){return d(t)&&t!==null?" "+e+'="'+t+'" ':""}function Fi(e){var t="";for(var i=0;i<e.length;i++)t+=Ri(e[i][0],e[i][1]);return t}function Vi(e){var t="";for(var i=0;i<e.length;i++){var n=e[i][1];if(d(n))t+=e[i][0]+":"+n+";"}if(t!=="")return t}var Ni={},Hi="http://www.w3.org/2000/svg",Ui="none",ji=3,Gi=function(e,t){e.innerHTML=t};if(typeof document!=="undefined"){var Wi="<svg xmlns='"+Hi+"'></svg>";var qi=document.createElement("div");var Yi=typeof DOMParser!=="undefined";qi.innerHTML=Wi;if(Yi&&qi.firstChild.namespaceURI!==Hi)Gi=function(e,t){var i=new DOMParser;var n=i.parseFromString(t,"text/xml");var r=document.adoptNode(n.documentElement);e.innerHTML="";e.appendChild(r)}}var $i=Gi,Xi="transform",Ki={clip:"clip-path",fill:"fill"};function Qi(e,t){return e==="clip"||e==="fill"&&(!t||t.nodeType==="Gradient")}function Zi(){var e=document.getElementsByTagName("base")[0];var t=document.location.href;var i="";if(e&&!(l||{}).msie){var n=t.indexOf("#");if(n!==-1)t=t.substring(0,n);i=t}return i}var Ji=function(r){function e(e,t){r.call(this,e);this.definitions={};this.options=t}h(e,r);e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;e.prototype.destroy=function e(){if(this.element){this.element._kendoNode=null;this.element=null}this.clearDefinitions();r.prototype.destroy.call(this)};e.prototype.load=function e(t,i){var n=this;for(var r=0;r<t.length;r++){var a=t[r];var o=a.children;var s=new Ni[a.nodeType](a,n.options);if(d(i))n.insertAt(s,i);else n.append(s);s.createDefinitions();if(o&&o.length>0)s.load(o);var l=n.element;if(l)s.attachTo(l,i)}};e.prototype.root=function e(){var e=this;while(e.parent)e=e.parent;return e};e.prototype.attachTo=function e(t,i){var n=document.createElement("div");$i(n,"<svg xmlns='"+Hi+"' version='1.1'>"+this.render()+"</svg>");var r=n.firstChild.firstChild;if(r){if(d(i))t.insertBefore(r,t.childNodes[i]||null);else t.appendChild(r);this.setElement(r)}};e.prototype.setElement=function e(t){if(this.element)this.element._kendoNode=null;this.element=t;this.element._kendoNode=this;var i=this.childNodes;for(var n=0;n<i.length;n++){var r=t.childNodes[n];i[n].setElement(r)}};e.prototype.clear=function e(){this.clearDefinitions();if(this.element)this.element.innerHTML="";var t=this.childNodes;for(var i=0;i<t.length;i++)t[i].destroy();this.childNodes=[]};e.prototype.removeSelf=function e(){if(this.element){var t=this.element.parentNode;if(t)t.removeChild(this.element);this.element=null}r.prototype.removeSelf.call(this)};e.prototype.template=function e(){return this.renderChildren()};e.prototype.render=function e(){return this.template()};e.prototype.renderChildren=function e(){var t=this.childNodes;var i="";for(var n=0;n<t.length;n++)i+=t[n].render();return i};e.prototype.optionsChange=function e(t){var i=t.field;var n=t.value;if(i==="visible")this.css("display",n?"":Ui);else if(Ki[i]&&Qi(i,n))this.updateDefinition(i,n);else if(i==="opacity")this.attr("opacity",n);else if(i==="cursor")this.css("cursor",n);else if(i==="id")if(n)this.attr("id",n);else this.removeAttr("id");r.prototype.optionsChange.call(this,t)};e.prototype.attr=function e(t,i){if(this.element)this.element.setAttribute(t,i)};e.prototype.allAttr=function e(t){var i=this;for(var n=0;n<t.length;n++)i.attr(t[n][0],t[n][1])};e.prototype.css=function e(t,i){if(this.element)this.element.style[t]=i};e.prototype.allCss=function e(t){var i=this;for(var n=0;n<t.length;n++)i.css(t[n][0],t[n][1])};e.prototype.removeAttr=function e(t){if(this.element)this.element.removeAttribute(t)};e.prototype.mapTransform=function e(t){var i=[];if(t)i.push([Xi,"matrix("+t.matrix().toString(6)+")"]);return i};e.prototype.renderTransform=function e(){return Fi(this.mapTransform(this.srcElement.transform()))};e.prototype.transformChange=function e(t){if(t)this.allAttr(this.mapTransform(t));else this.removeAttr(Xi)};e.prototype.mapStyle=function e(){var t=this.srcElement.options;var i=[["cursor",t.cursor]];if(t.visible===false)i.push(["display",Ui]);return i};e.prototype.renderStyle=function e(){return Ri("style",Vi(this.mapStyle(true)))};e.prototype.renderOpacity=function e(){return Ri("opacity",this.srcElement.options.opacity)};e.prototype.renderId=function e(){return Ri("id",this.srcElement.options.id)};e.prototype.createDefinitions=function e(){var t=this.srcElement;var i=this.definitions;if(t){var n=t.options;var r;for(var a in Ki){var o=n.get(a);if(o&&Qi(a,o)){i[a]=o;r=true}}if(r)this.definitionChange({action:"add",definitions:i})}};e.prototype.definitionChange=function e(t){if(this.parent)this.parent.definitionChange(t)};e.prototype.updateDefinition=function e(t,i){var n=this.definitions;var r=n[t];var a=Ki[t];var o={};if(r){o[t]=r;this.definitionChange({action:"remove",definitions:o});delete n[t]}if(!i){if(r)this.removeAttr(a)}else{o[t]=i;this.definitionChange({action:"add",definitions:o});n[t]=i;this.attr(a,this.refUrl(i.id))}};e.prototype.clearDefinitions=function e(){var t=this.definitions;this.definitionChange({action:"remove",definitions:t});this.definitions={}};e.prototype.renderDefinitions=function e(){return Fi(this.mapDefinitions())};e.prototype.mapDefinitions=function e(){var t=this;var i=this.definitions;var n=[];for(var r in i)n.push([Ki[r],t.refUrl(i[r].id)]);return n};e.prototype.refUrl=function e(t){var i=(this.options||{}).skipBaseHref;var n=this.baseUrl().replace(/'/g,"\\'");var r=i?"":n;return"url("+r+"#"+t+")"};e.prototype.baseUrl=function e(){return Zi()};return e}(Oi),en=function(e){function t(){e.apply(this,arguments)}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;t.prototype.template=function e(){return"<stop "+this.renderOffset()+" "+this.renderStyle()+" />"};t.prototype.renderOffset=function e(){return Ri("offset",this.srcElement.offset())};t.prototype.mapStyle=function e(){var t=this.srcElement;return[["stop-color",t.color()],["stop-opacity",t.opacity()]]};t.prototype.optionsChange=function e(t){if(t.field==="offset")this.attr(t.field,t.value);else if(t.field==="color"||t.field==="opacity")this.css("stop-"+t.field,t.value)};return t}(Ji),tn=function(t){function e(e){t.call(this,e);this.id=e.id;this.loadStops()}h(e,t);e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;e.prototype.loadStops=function e(){var t=this;var i=this.srcElement.stops;var n=this.element;for(var r=0;r<i.length;r++){var a=new en(i[r]);t.append(a);if(n)a.attachTo(n)}};e.prototype.optionsChange=function e(t){if(t.field==="gradient.stops"){Oi.prototype.clear.call(this);this.loadStops()}else if(t.field==="gradient")this.allAttr(this.mapCoordinates())};e.prototype.renderCoordinates=function e(){return Fi(this.mapCoordinates())};e.prototype.mapSpace=function e(){return["gradientUnits",this.srcElement.userSpace()?"userSpaceOnUse":"objectBoundingBox"]};return e}(Ji),nn=function(e){function t(){e.apply(this,arguments)}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;t.prototype.template=function e(){return"<linearGradient id='"+this.id+"' "+this.renderCoordinates()+">"+this.renderChildren()+"</linearGradient>"};t.prototype.mapCoordinates=function e(){var t=this.srcElement;var i=t.start();var n=t.end();var r=[["x1",i.x],["y1",i.y],["x2",n.x],["y2",n.y],this.mapSpace()];return r};return t}(tn),rn=function(e){function t(){e.apply(this,arguments)}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;t.prototype.template=function e(){return"<radialGradient id='"+this.id+"' "+this.renderCoordinates()+">"+this.renderChildren()+"</radialGradient>"};t.prototype.mapCoordinates=function e(){var t=this.srcElement;var i=t.center();var n=t.radius();var r=[["cx",i.x],["cy",i.y],["r",n],this.mapSpace()];return r};return t}(tn),an=function(t){function e(e){t.call(this);this.srcElement=e;this.id=e.id;this.load([e])}h(e,t);e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;e.prototype.template=function e(){return"<clipPath id='"+this.id+"'>"+this.renderChildren()+"</clipPath>"};return e}(Ji),on=function(e){function t(){e.call(this);this.definitionMap={}}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;t.prototype.attachTo=function e(t){this.element=t};t.prototype.template=function e(){return"<defs>"+this.renderChildren()+"</defs>"};t.prototype.definitionChange=function e(t){var i=t.definitions;var n=t.action;if(n==="add")this.addDefinitions(i);else if(n==="remove")this.removeDefinitions(i)};t.prototype.createDefinition=function e(t,i){var n;if(t==="clip")n=an;else if(t==="fill")if(i instanceof ki)n=nn;else if(i instanceof Ci)n=rn;return new n(i)};t.prototype.addDefinitions=function e(t){var i=this;for(var n in t)i.addDefinition(n,t[n])};t.prototype.addDefinition=function e(t,i){var n=this;var r=n.element;var a=n.definitionMap;var o=i.id;var s=a[o];if(!s){var l=this.createDefinition(t,i);a[o]={element:l,count:1};this.append(l);if(r)l.attachTo(this.element)}else s.count++};t.prototype.removeDefinitions=function e(t){var i=this;for(var n in t)i.removeDefinition(t[n])};t.prototype.removeDefinition=function e(t){var i=this.definitionMap;var n=t.id;var r=i[n];if(r){r.count--;if(r.count===0){this.remove(this.childNodes.indexOf(r.element),1);delete i[n]}}};return t}(Ji),sn=function(t){function e(e){t.call(this);this.options=e;this.defs=new on}h(e,t);e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;e.prototype.attachTo=function e(t){this.element=t;this.defs.attachTo(t.firstElementChild)};e.prototype.clear=function e(){Oi.prototype.clear.call(this)};e.prototype.template=function e(){return this.defs.render()+this.renderChildren()};e.prototype.definitionChange=function e(t){this.defs.definitionChange(t)};return e}(Ji),ln={dot:[1.5,3.5],dash:[4,3.5],longdash:[8,3.5],dashdot:[3.5,3.5,1.5,3.5],longdashdot:[8,3.5,1.5,3.5],longdashdotdot:[8,3.5,1.5,3.5,1.5,3.5]},un="solid",cn="butt",hn={"fill.opacity":"fill-opacity","stroke.color":"stroke","stroke.width":"stroke-width","stroke.opacity":"stroke-opacity"},fn=function(n){function e(){n.apply(this,arguments)}h(e,n);e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;e.prototype.geometryChange=function e(){this.attr("d",this.renderData());this.invalidate()};e.prototype.optionsChange=function e(t){switch(t.field){case"fill":if(t.value)this.allAttr(this.mapFill(t.value));else this.removeAttr("fill");break;case"fill.color":this.allAttr(this.mapFill({color:t.value}));break;case"stroke":if(t.value)this.allAttr(this.mapStroke(t.value));else this.removeAttr("stroke");break;case"transform":this.transformChange(t.value);break;default:var i=hn[t.field];if(i)this.attr(i,t.value);break}n.prototype.optionsChange.call(this,t)};e.prototype.content=function e(){if(this.element)this.element.textContent=this.srcElement.content()};e.prototype.renderData=function e(){return this.srcElement.toString(ji)||undefined};e.prototype.mapStroke=function e(t){var i=[];if(t&&!M(t.color)){i.push(["stroke",t.color]);i.push(["stroke-width",t.width]);i.push(["stroke-linecap",this.renderLinecap(t)]);i.push(["stroke-linejoin",t.lineJoin]);if(d(t.opacity))i.push(["stroke-opacity",t.opacity]);if(d(t.dashType))i.push(["stroke-dasharray",this.renderDashType(t)])}else i.push(["stroke",Ui]);return i};e.prototype.renderStroke=function e(){return Fi(this.mapStroke(this.srcElement.options.stroke))};e.prototype.renderDashType=function e(t){var i=t.dashType;var n=t.width;if(n===void 0)n=1;if(i&&i!==un){var r=ln[i.toLowerCase()];var a=[];for(var o=0;o<r.length;o++)a.push(r[o]*n);return a.join(" ")}};e.prototype.renderLinecap=function e(t){var i=t.dashType;var n=t.lineCap;return i&&i!=="solid"?cn:n};e.prototype.mapFill=function e(t){var i=[];if(!(t&&t.nodeType==="Gradient"))if(t&&!M(t.color)){i.push(["fill",t.color]);if(d(t.opacity))i.push(["fill-opacity",t.opacity])}else i.push(["fill",Ui]);return i};e.prototype.renderFill=function e(){return Fi(this.mapFill(this.srcElement.options.fill))};e.prototype.template=function e(){return"<path "+this.renderId()+" "+this.renderStyle()+" "+this.renderOpacity()+" "+Ri("d",this.renderData())+""+this.renderStroke()+this.renderFill()+this.renderDefinitions()+this.renderTransform()+"></path>"};return e}(Ji),dn=function(e){function t(){e.apply(this,arguments)}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;t.prototype.renderData=function e(){return this.srcElement.toPath().toString(ji)};return t}(fn),pn=function(e){function t(){e.apply(this,arguments)}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;t.prototype.geometryChange=function e(){var t=this.center();this.attr("cx",t.x);this.attr("cy",t.y);this.attr("r",this.radius());this.invalidate()};t.prototype.center=function e(){return this.srcElement.geometry().center};t.prototype.radius=function e(){return this.srcElement.geometry().radius};t.prototype.template=function e(){return"<circle "+this.renderId()+" "+this.renderStyle()+" "+this.renderOpacity()+"cx='"+this.center().x+"' cy='"+this.center().y+"' r='"+this.radius()+"'"+this.renderStroke()+" "+this.renderFill()+" "+this.renderDefinitions()+this.renderTransform()+" ></circle>"};return t}(fn),vn=function(i){function e(){i.apply(this,arguments)}h(e,i);e.prototype=Object.create(i&&i.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;e.prototype.template=function e(){return"<g"+(this.renderId()+this.renderTransform()+this.renderStyle()+this.renderOpacity()+this.renderDefinitions())+">"+this.renderChildren()+"</g>"};e.prototype.optionsChange=function e(t){if(t.field==="transform")this.transformChange(t.value);i.prototype.optionsChange.call(this,t)};return e}(Ji),gn=function(i){function e(){i.apply(this,arguments)}h(e,i);e.prototype=Object.create(i&&i.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;e.prototype.geometryChange=function e(){this.allAttr(this.mapPosition());this.invalidate()};e.prototype.optionsChange=function e(t){if(t.field==="src")this.allAttr(this.mapSource());i.prototype.optionsChange.call(this,t)};e.prototype.mapPosition=function e(){var t=this.srcElement.rect();var i=t.topLeft();return[["x",i.x],["y",i.y],["width",t.width()+"px"],["height",t.height()+"px"]]};e.prototype.renderPosition=function e(){return Fi(this.mapPosition())};e.prototype.mapSource=function e(t){var i=this.srcElement.src();if(t)i=kendo.htmlEncode(i);return[["xlink:href",i]]};e.prototype.renderSource=function e(){return Fi(this.mapSource(true))};e.prototype.template=function e(){return"<image preserveAspectRatio='none' "+this.renderId()+" "+this.renderStyle()+" "+this.renderTransform()+" "+this.renderOpacity()+this.renderPosition()+" "+this.renderSource()+" "+this.renderDefinitions()+">"+"</image>"};return e}(fn),mn=function(e){function t(){e.apply(this,arguments)}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;t.prototype.renderData=function e(){return this.srcElement.toString(ji)||"undefined"};return t}(fn),_n=function(e){function t(){e.apply(this,arguments)}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;t.prototype.geometryChange=function e(){var t=this.srcElement.geometry();this.attr("x",t.origin.x);this.attr("y",t.origin.y);this.attr("width",t.size.width);this.attr("height",t.size.height);this.attr("rx",t.cornerRadius[0]);this.attr("ry",t.cornerRadius[1]);this.invalidate()};t.prototype.size=function e(){return this.srcElement.geometry().size};t.prototype.origin=function e(){return this.srcElement.geometry().origin};t.prototype.rx=function e(){return this.srcElement.geometry().cornerRadius[0]};t.prototype.ry=function e(){return this.srcElement.geometry().cornerRadius[1]};t.prototype.template=function e(){return"<rect "+this.renderId()+" "+this.renderStyle()+" "+this.renderOpacity()+" x='"+this.origin().x+"' y='"+this.origin().y+"' "+"rx='"+this.rx()+"' ry='"+this.ry()+"' "+"width='"+this.size().width+"' height='"+this.size().height+"' "+this.renderStroke()+" "+this.renderFill()+" "+this.renderDefinitions()+" "+this.renderTransform()+" />"};return t}(fn),yn=/&(?:[a-zA-Z]+|#\d+);/g;function bn(e){if(!e||typeof e!=="string"||!yn.test(e))return e;var t=bn._element;yn.lastIndex=0;return e.replace(yn,function(e){t.innerHTML=e;return t.textContent||t.innerText})}if(typeof document!=="undefined")bn._element=document.createElement("span");var wn=function(r){function e(){r.apply(this,arguments)}h(e,r);e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;e.prototype.geometryChange=function e(){var t=this.pos();this.attr("x",t.x);this.attr("y",t.y);this.invalidate()};e.prototype.optionsChange=function e(t){if(t.field==="font"){this.attr("style",Vi(this.mapStyle()));this.geometryChange()}else if(t.field==="content")r.prototype.content.call(this,this.srcElement.content());r.prototype.optionsChange.call(this,t)};e.prototype.mapStyle=function e(t){var i=r.prototype.mapStyle.call(this,t);var n=this.srcElement.options.font;if(t)n=kendo.htmlEncode(n);i.push(["font",n],["white-space","pre"]);return i};e.prototype.pos=function e(){var e=this.srcElement.position();var t=this.srcElement.measure();return e.clone().setY(e.y+t.baseline)};e.prototype.renderContent=function e(){var t=this.srcElement.content();t=bn(t);t=kendo.htmlEncode(t);return s.normalizeText(t)};e.prototype.renderTextAnchor=function e(){var t;if((this.options||{}).rtl&&!(l.msie||l.edge))t="end";return Ri("text-anchor",t)};e.prototype.template=function e(){return"<text "+this.renderId()+" "+this.renderTextAnchor()+" "+this.renderStyle()+" "+this.renderOpacity()+"x='"+this.pos().x+"' y='"+this.pos().y+"' "+this.renderStroke()+" "+this.renderTransform()+" "+this.renderDefinitions()+this.renderFill()+">"+this.renderContent()+"</text>"};return e}(fn),xn=(Ni.Arc=dn,Ni.Circle=pn,Ni.Group=vn,Ni.Image=gn,Ni.MultiPath=mn,Ni.Path=fn,Ni.Rect=_n,Ni.Text=wn,"rtl");function kn(e){var t;try{t=e.getScreenCTM?e.getScreenCTM():null}catch(e){}if(t){var i=-t.e%1;var n=-t.f%1;var r=e.style;if(i!==0||n!==0){r.left=i+"px";r.top=n+"px"}}}var Cn=function(i){function e(e,t){i.call(this,e,t);this._root=new sn(p.extend({rtl:W(e,"direction").direction===xn},this.options));$i(this.element,this._template());this._rootElement=this.element.firstElementChild;kn(this._rootElement);this._root.attachTo(this._rootElement);j(this.element,{click:this._click,mouseover:this._mouseenter,mouseout:this._mouseleave,mousemove:this._mousemove});this.resize()}h(e,i);e.prototype=Object.create(i&&i.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;var t={type:{}};t.type.get=function(){return"svg"};e.prototype.destroy=function e(){if(this._root){this._root.destroy();this._root=null;this._rootElement=null;$(this.element,{click:this._click,mouseover:this._mouseenter,mouseout:this._mouseleave,mousemove:this._mousemove})}i.prototype.destroy.call(this)};e.prototype.translate=function e(t){var i=Math.round(t.x)+" "+Math.round(t.y)+" "+this._size.width+" "+this._size.height;this._offset=t;this._rootElement.setAttribute("viewBox",i)};e.prototype.draw=function e(t){i.prototype.draw.call(this,t);this._root.load([t])};e.prototype.clear=function e(){i.prototype.clear.call(this);this._root.clear()};e.prototype.svg=function e(){return"<?xml version='1.0' ?>"+this._template()};e.prototype.exportVisual=function e(){var t=this;var i=t._visual;var n=t._offset;if(n){var r=new $t;r.children.push(i);r.transform(ce().translate(-n.x,-n.y));i=r}return i};e.prototype._resize=function e(){if(this._offset)this.translate(this._offset)};e.prototype._template=function e(){return"<svg style='width: 100%; height: 100%; overflow: hidden;' xmlns='"+Hi+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>"+this._root.render()+"</svg>"};Object.defineProperties(e.prototype,t);return e}(Li),Sn={};function Tn(e,t){var i=t.segments;if(i.length===0)return;var n=i[0];var r=n.anchor();e.moveTo(r.x,r.y);for(var a=1;a<i.length;a++){n=i[a];r=n.anchor();var o=i[a-1];var s=o.controlOut();var l=n.controlIn();if(s&&l)e.bezierCurveTo(s.x,s.y,l.x,l.y,r.x,r.y);else e.lineTo(r.x,r.y)}if(t.options.closed)e.closePath()}var An=function(i){function e(e){i.call(this,e);if(e)this.initClip()}h(e,i);e.prototype=Object.create(i&&i.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;e.prototype.initClip=function e(){var t=this.srcElement.clip();if(t){this.clip=t;t.addObserver(this)}};e.prototype.clear=function e(){if(this.srcElement)this.srcElement.removeObserver(this);this.clearClip();i.prototype.clear.call(this)};e.prototype.clearClip=function e(){if(this.clip){this.clip.removeObserver(this);delete this.clip}};e.prototype.setClip=function e(t){if(this.clip){t.beginPath();Tn(t,this.clip);t.clip()}};e.prototype.optionsChange=function e(t){if(t.field==="clip"){this.clearClip();this.initClip()}i.prototype.optionsChange.call(this,t)};e.prototype.setTransform=function e(t){if(this.srcElement){var i=this.srcElement.transform();if(i)t.transform.apply(t,i.matrix().toArray(6))}};e.prototype.loadElements=function e(t,i,n){var r=this;for(var a=0;a<t.length;a++){var o=t[a];var s=o.children;var l=new Sn[o.nodeType](o,n);if(s&&s.length>0)l.load(s,i,n);if(d(i))r.insertAt(l,i);else r.append(l)}};e.prototype.load=function e(t,i,n){this.loadElements(t,i,n);this.invalidate()};e.prototype.setOpacity=function e(t){if(this.srcElement){var i=this.srcElement.opacity();if(d(i))this.globalAlpha(t,i)}};e.prototype.globalAlpha=function e(t,i){var n=i;if(n&&t.globalAlpha)n*=t.globalAlpha;t.globalAlpha=n};e.prototype.visible=function e(){var t=this.srcElement;return!t||t&&t.options.visible!==false};return e}(Oi),Mn=function(e){function t(){e.apply(this,arguments)}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;t.prototype.renderTo=function e(t){if(!this.visible())return;t.save();this.setTransform(t);this.setClip(t);this.setOpacity(t);var i=this.childNodes;for(var n=0;n<i.length;n++){var r=i[n];if(r.visible())r.renderTo(t)}t.restore()};return t}(Yt(An,"childNodes")),Dn=1e3/60,En=function(n){function e(e,t){n.call(this);this.canvas=e;this.size=t;this.ctx=e.getContext("2d");var i=this._invalidate.bind(this);this.invalidate=kendo.throttle(function(){kendo.animationFrame(i)},Dn)}h(e,n);e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;e.prototype.destroy=function e(){n.prototype.destroy.call(this);this.canvas=null;this.ctx=null};e.prototype.load=function e(t,i,n){this.loadElements(t,i,n);this._invalidate()};e.prototype._rescale=function e(t){var i=this;var n=i.canvas;var r=i.size;n.width=r.width*t;n.height=r.height*t;this.ctx.scale(t,t)};e.prototype._devicePixelRatio=function e(){if(typeof window.devicePixelRatio==="number")return window.devicePixelRatio;return 1};e.prototype._invalidate=function e(t){if(!this.ctx)return;var i=t&&t.fixedScale;var n=i?1:this._devicePixelRatio();this._rescale(n);this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);this.renderTo(this.ctx)};return e}(Yt(Mn,"childNodes")),In=function(e){function t(){e.call(this);this.shapes=[]}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;t.prototype._add=function e(t,i){this.shapes.push({bbox:i,shape:t});t._quadNode=this};t.prototype.pointShapes=function e(t){var i=this.shapes;var n=i.length;var r=[];for(var a=0;a<n;a++)if(i[a].bbox.containsPoint(t))r.push(i[a].shape);return r};t.prototype.insert=function e(t,i){this._add(t,i)};t.prototype.remove=function e(t){var i=this.shapes;var n=i.length;for(var r=0;r<n;r++)if(i[r].shape===t){i.splice(r,1);break}};return t}(o),Pn=function(o){function s(e){o.call(this);this.children=[];this.rect=e}h(s,o);s.prototype=Object.create(o&&o.prototype);s.prototype.constructor=s;s.fn=s.prototype;s.fn.init=s.fn.constructor;s.prototype.inBounds=function e(t){var i=this.rect;var n=i.bottomRight();var r=t.bottomRight();var e=i.origin.x<=t.origin.x&&i.origin.y<=t.origin.y&&r.x<=n.x&&r.y<=n.y;return e};s.prototype.pointShapes=function e(t){var i=this.children;var n=i.length;var r=o.prototype.pointShapes.call(this,t);for(var a=0;a<n;a++)c(r,i[a].pointShapes(t));return r};s.prototype.insert=function e(t,i){var n=this.children;var r=false;if(this.inBounds(i)){if(this.shapes.length<4)this._add(t,i);else{if(!n.length)this._initChildren();for(var a=0;a<n.length;a++)if(n[a].insert(t,i)){r=true;break}if(!r)this._add(t,i)}r=true}return r};s.prototype._initChildren=function e(){var t=this;var i=t.rect;var n=t.children;var r=i.center();var a=i.width()/2;var o=i.height()/2;n.push(new s(new P([i.origin.x,i.origin.y],[a,o])),new s(new P([r.x,i.origin.y],[a,o])),new s(new P([i.origin.x,r.y],[a,o])),new s(new P([r.x,r.y],[a,o])))};return s}(In),Bn=3e3,On=1e4,zn=75,Ln=function(e){function t(){e.call(this);this.initRoots()}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;t.prototype.initRoots=function e(){this.rootMap={};this.root=new In;this.rootElements=[]};t.prototype.clear=function e(){var t=this;var i=this.rootElements;for(var n=0;n<i.length;n++)t.remove(i[n]);this.initRoots()};t.prototype.pointShape=function e(t){var i=(this.rootMap[Math.floor(t.x/Bn)]||{})[Math.floor(t.y/Bn)];var n=this.root.pointShapes(t);if(i)n=n.concat(i.pointShapes(t));this.assignZindex(n);n.sort(Rn);for(var r=0;r<n.length;r++)if(n[r].containsPoint(t))return n[r]};t.prototype.assignZindex=function e(t){var i=this;for(var n=0;n<t.length;n++){var r=t[n];var a=0;var o=Math.pow(On,zn);var s=[];while(r){s.push(r);r=r.parent}while(s.length){r=s.pop();a+=((r.parent?r.parent.children:i.rootElements).indexOf(r)+1)*o;o/=On}t[n]._zIndex=a}};t.prototype.optionsChange=function e(t){if(t.field==="transform"||t.field==="stroke.width")this.bboxChange(t.element)};t.prototype.geometryChange=function e(t){this.bboxChange(t.element)};t.prototype.bboxChange=function e(t){var i=this;if(t.nodeType==="Group")for(var n=0;n<t.children.length;n++)i.bboxChange(t.children[n]);else{if(t._quadNode)t._quadNode.remove(t);this._insertShape(t)}};t.prototype.add=function e(t){var i=Array.isArray(t)?t.slice(0):[t];c(this.rootElements,i);this._insert(i)};t.prototype.childrenChange=function e(t){var i=this;if(t.action==="remove")for(var n=0;n<t.items.length;n++)i.remove(t.items[n]);else this._insert(Array.prototype.slice.call(t.items,0))};t.prototype._insert=function e(t){var i=this;var n;while(t.length>0){n=t.pop();n.addObserver(i);if(n.nodeType==="Group")c(t,n.children);else i._insertShape(n)}};t.prototype._insertShape=function e(t){var i=t.bbox();if(i){var n=this.getSectors(i);var r=n[0][0];var a=n[1][0];if(this.inRoot(n))this.root.insert(t,i);else{var o=this.rootMap;if(!o[r])o[r]={};if(!o[r][a])o[r][a]=new Pn(new P([r*Bn,a*Bn],[Bn,Bn]));o[r][a].insert(t,i)}}};t.prototype.remove=function e(t){var i=this;t.removeObserver(this);if(t.nodeType==="Group"){var n=t.children;for(var r=0;r<n.length;r++)i.remove(n[r])}else if(t._quadNode){t._quadNode.remove(t);delete t._quadNode}};t.prototype.inRoot=function e(t){return t[0].length>1||t[1].length>1};t.prototype.getSectors=function e(t){var i=t.bottomRight();var n=Math.floor(i.x/Bn);var r=Math.floor(i.y/Bn);var a=[[],[]];for(var o=Math.floor(t.origin.x/Bn);o<=n;o++)a[0].push(o);for(var s=Math.floor(t.origin.y/Bn);s<=r;s++)a[1].push(s);return a};return t}(o);function Rn(e,t){if(e._zIndex<t._zIndex)return 1;if(e._zIndex>t._zIndex)return-1;return 0}var Fn=function e(t){t.bind("mouseenter",this._mouseenter.bind(this));t.bind("mouseleave",this._mouseleave.bind(this));this.element=t.element};function Vn(e,t){for(var i=0;i<t.length;i++){var n=t[i];var r=kendo.parseColor(n.color());r.a*=n.opacity();e.addColorStop(n.offset(),r.toCssRgba())}}Fn.prototype.clear=function e(){this._resetCursor()},Fn.prototype.destroy=function e(){this._resetCursor();delete this.element},Fn.prototype._mouseenter=function e(t){var i=this._shapeCursor(t);if(!i)this._resetCursor();else{if(!this._current)this._defaultCursor=this._getCursor();this._setCursor(i)}},Fn.prototype._mouseleave=function e(){this._resetCursor()},Fn.prototype._shapeCursor=function e(t){var i=t.element;while(i&&!d(i.options.cursor))i=i.parent;if(i)return i.options.cursor},Fn.prototype._getCursor=function e(){if(this.element)return this.element.style.cursor},Fn.prototype._setCursor=function e(t){if(this.element){this.element.style.cursor=t;this._current=t}},Fn.prototype._resetCursor=function e(){if(this._current){this._setCursor(this._defaultCursor||"");delete this._current}};var Nn=function(e){function t(){e.apply(this,arguments)}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;t.prototype.renderTo=function e(t){t.save();this.setTransform(t);this.setClip(t);this.setOpacity(t);t.beginPath();this.renderPoints(t,this.srcElement);this.setLineDash(t);this.setLineCap(t);this.setLineJoin(t);this.setFill(t);this.setStroke(t);t.restore()};t.prototype.setFill=function e(t){var i=this.srcElement.options.fill;var n=false;if(i)if(i.nodeType==="Gradient"){this.setGradientFill(t,i);n=true}else if(!M(i.color)){t.fillStyle=i.color;t.save();this.globalAlpha(t,i.opacity);t.fill();t.restore();n=true}return n};t.prototype.setGradientFill=function e(t,i){var n=this.srcElement.rawBBox();var r;if(i instanceof ki){var a=i.start();var o=i.end();r=t.createLinearGradient(a.x,a.y,o.x,o.y)}else if(i instanceof Ci){var s=i.center();r=t.createRadialGradient(s.x,s.y,0,s.x,s.y,i.radius())}Vn(r,i.stops);t.save();if(!i.userSpace())t.transform(n.width(),0,0,n.height(),n.origin.x,n.origin.y);t.fillStyle=r;t.fill();t.restore()};t.prototype.setStroke=function e(t){var i=this.srcElement.options.stroke;if(i&&!M(i.color)&&i.width>0){t.strokeStyle=i.color;t.lineWidth=U(i.width,1);t.save();this.globalAlpha(t,i.opacity);t.stroke();t.restore();return true}};t.prototype.dashType=function e(){var t=this.srcElement.options.stroke;if(t&&t.dashType)return t.dashType.toLowerCase()};t.prototype.setLineDash=function e(t){var i=this.dashType();if(i&&i!==un){var n=ln[i];if(t.setLineDash)t.setLineDash(n);else{t.mozDash=n;t.webkitLineDash=n}}};t.prototype.setLineCap=function e(t){var i=this.dashType();var n=this.srcElement.options.stroke;if(i&&i!==un)t.lineCap=cn;else if(n&&n.lineCap)t.lineCap=n.lineCap};t.prototype.setLineJoin=function e(t){var i=this.srcElement.options.stroke;if(i&&i.lineJoin)t.lineJoin=i.lineJoin};t.prototype.renderPoints=function e(t,i){Tn(t,i)};return t}(An),Hn=function(e){function t(){e.apply(this,arguments)}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;t.prototype.renderPoints=function e(t){var i=this.srcElement.toPath();Tn(t,i)};return t}(Nn),Un=function(e){function t(){e.apply(this,arguments)}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;t.prototype.renderPoints=function e(t){var i=this.srcElement.geometry();var n=i.center;var r=i.radius;t.arc(n.x,n.y,r,0,Math.PI*2)};return t}(Nn),jn=function(r){function e(e,t){r.call(this,e);this.onLoad=this.onLoad.bind(this);this.onError=this.onError.bind(this);this.loading=v();var i=this.img=new Image;var n=e.src();if(t&&!/^data:/i.test(n))i.crossOrigin=t;if(n)i.src=n;if(i.complete)this.onLoad();else{i.onload=this.onLoad;i.onerror=this.onError}}h(e,r);e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;e.prototype.renderTo=function e(t){if(this.loading.state()==="resolved"){t.save();this.setTransform(t);this.setClip(t);this.drawImage(t);t.restore()}};e.prototype.optionsChange=function e(t){if(t.field==="src"){this.loading=v();this.img.src=this.srcElement.src()}else r.prototype.optionsChange.call(this,t)};e.prototype.onLoad=function e(){this.loading.resolve();this.invalidate()};e.prototype.onError=function e(){this.loading.reject(new Error("Unable to load image '"+this.img.src+"'. Check for connectivity and verify CORS headers."))};e.prototype.drawImage=function e(t){var i=this.srcElement.rect();var n=i.topLeft();t.drawImage(this.img,n.x,n.y,i.width(),i.height())};return e}(Nn),Gn=function(e){function t(){e.apply(this,arguments)}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;t.prototype.renderPoints=function e(t){var i=this.srcElement.paths;for(var n=0;n<i.length;n++)Tn(t,i[n])};return t}(Nn),Wn=function(l){function e(){l.apply(this,arguments)}h(e,l);e.prototype=Object.create(l&&l.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;e.prototype.renderPoints=function e(t){var i=this.srcElement.geometry();var n=i.cornerRadius;var r=n[0];var a=n[1];if(r===0&&a===0){var o=i.origin;var s=i.size;t.rect(o.x,o.y,s.width,s.height)}else l.prototype.renderPoints.call(this,t,B.fromRect(i))};return e}(Nn),qn=function(e){function t(){e.apply(this,arguments)}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;t.prototype.renderTo=function e(t){var i=this.srcElement;var n=i.position();var r=i.measure();t.save();this.setTransform(t);this.setClip(t);this.setOpacity(t);t.beginPath();t.font=i.options.font;t.textAlign="left";if(this.setFill(t))t.fillText(i.content(),n.x,n.y+r.baseline);if(this.setStroke(t)){this.setLineDash(t);t.strokeText(i.content(),n.x,n.y+r.baseline)}t.restore()};return t}(Nn),Yn=(Sn.Arc=Hn,Sn.Circle=Un,Sn.Group=Mn,Sn.Image=jn,Sn.MultiPath=Gn,Sn.Path=Nn,Sn.Rect=Wn,Sn.Text=qn,function(r){function e(e,t){r.call(this,e,t);this.element.innerHTML=this._template(this);var i=this.element.firstElementChild;var n=Y(e);i.width=n.width;i.height=n.height;this._rootElement=i;this._root=new En(i,n);this._mouseTrackHandler=this._trackMouse.bind(this);j(this.element,{click:this._mouseTrackHandler,mousemove:this._mouseTrackHandler})}h(e,r);e.prototype=Object.create(r&&r.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;var t={type:{}};t.type.get=function(){return"canvas"};e.prototype.destroy=function e(){r.prototype.destroy.call(this);if(this._root){this._root.destroy();this._root=null}if(this._searchTree){this._searchTree.clear();delete this._searchTree}if(this._cursor){this._cursor.destroy();delete this._cursor}$(this.element,{click:this._mouseTrackHandler,mousemove:this._mouseTrackHandler})};e.prototype.draw=function e(t){r.prototype.draw.call(this,t);this._root.load([t],undefined,this.options.cors);if(this._searchTree)this._searchTree.add([t])};e.prototype.clear=function e(){r.prototype.clear.call(this);this._root.clear();if(this._searchTree)this._searchTree.clear();if(this._cursor)this._cursor.clear()};e.prototype.eventTarget=function e(t){if(this._searchTree){var i=this._surfacePoint(t);var n=this._searchTree.pointShape(i);return n}};e.prototype.image=function e(){var t=this;var i=t._root;var n=t._rootElement;var r=[];i.traverse(function(e){if(e.loading)r.push(e.loading)});var a=v();var o=function(){i._invalidate({fixedScale:true});try{var e=n.toDataURL();a.resolve(e)}catch(e){a.reject(e)}};u(r).then(o,o);return a};e.prototype.suspendTracking=function e(){r.prototype.suspendTracking.call(this);if(this._searchTree){this._searchTree.clear();delete this._searchTree}};e.prototype.resumeTracking=function e(){r.prototype.resumeTracking.call(this);if(!this._searchTree){this._searchTree=new Ln;var t=this._root.childNodes;var i=[];for(var n=0;n<t.length;n++)i.push(t[n].srcElement);this._searchTree.add(i)}};e.prototype._resize=function e(){this._rootElement.width=this._size.width;this._rootElement.height=this._size.height;this._root.size=this._size;this._root.invalidate()};e.prototype._template=function e(){return"<canvas style='width: 100%; height: 100%;'></canvas>"};e.prototype._enableTracking=function e(){this._searchTree=new Ln;this._cursor=new Fn(this);r.prototype._enableTracking.call(this)};e.prototype._trackMouse=function e(t){if(this._suspendedTracking)return;var i=this.eventTarget(t);if(t.type!=="click"){var n=this._currentShape;if(n&&n!==i)this.trigger("mouseleave",{element:n,originalEvent:t,type:"mouseleave"});if(i&&n!==i)this.trigger("mouseenter",{element:i,originalEvent:t,type:"mouseenter"});this.trigger("mousemove",{element:i,originalEvent:t,type:"mousemove"});this._currentShape=i}else if(i)this.trigger("click",{element:i,originalEvent:t,type:"click"})};Object.defineProperties(e.prototype,t);return e}(Li)),$n,Xn,Kn=function(){return typeof document!=="undefined"},Qn=function(){return Kn()&&document.createElement("canvas").getContext},Zn=function(){return Kn()&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")},Jn=function(e){function t(){e.call(this);this._items=[{name:"svg",type:Cn},{name:"canvas",type:Yn}]}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;var i={support:{},current:{}};i.support.get=function(){if(!Xn)Xn={canvas:Qn(),svg:Zn()};return Xn};i.current.get=function(){if(!$n)$n=new t;return $n};t.prototype.create=function e(t,i){var n=this._items;var r=n[0];if(i&&i.type){var a=i.type.toLowerCase();for(var o=0;o<n.length;o++)if(n[o].name===a){r=n[o];break}}if(r)return new r.type(t,i);kendo.logToConsole("Warning: Unable to create Kendo UI Drawing Surface. Possible causes:\n"+"- The browser does not support SVG and Canvas. User agent: "+navigator.userAgent)};Object.defineProperties(t,i);return t}(o),er=function(e){function t(){e.apply(this,arguments)}h(t,e);t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.fn=t.prototype;t.fn.init=t.fn.constructor;var i={support:{}};i.support.get=function(){return Jn.support};t.create=function e(t,i){return Jn.current.create(t,i)};Object.defineProperties(t,i);return t}(Li);function tr(e){var t=new sn({skipBaseHref:true});var i=e.clippedBBox();var n=e;if(i){var r=i.getOrigin();var a=new $t;a.transform(ce().translate(-r.x,-r.y));a.children.push(e);n=a}t.load([n]);var o="<?xml version='1.0' ?><svg xmlns='"+Hi+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>"+t.render()+"</svg>";t.destroy();return o}var ir={Surface:Cn,RootNode:sn,Node:Ji,GroupNode:vn,ArcNode:dn,CircleNode:pn,RectNode:_n,ImageNode:gn,TextNode:wn,PathNode:fn,MultiPathNode:mn,DefinitionNode:on,ClipNode:an,GradientStopNode:en,LinearGradientNode:nn,RadialGradientNode:rn,exportGroup:tr},nr={Surface:Yn,RootNode:En,Node:An,GroupNode:Mn,ArcNode:Hn,CircleNode:Un,RectNode:Wn,ImageNode:jn,TextNode:qn,PathNode:Nn,MultiPathNode:Gn};function rr(e,c){var t={width:"800px",height:"600px",cors:"Anonymous"};var i=e;var n=e.clippedBBox();if(n){var r=n.getOrigin();i=new $t;i.transform(ce().translate(-r.x,-r.y));i.children.push(e);var a=n.getSize();t.width=a.width+"px";t.height=a.height+"px"}var o=p.extend(t,c);var s=document.createElement("div");var l=s.style;l.display="none";l.width=o.width;l.height=o.height;document.body.appendChild(s);var u=new Yn(s,o);u.suspendTracking();u.draw(i);var h=u.image();var f=function(){u.destroy();document.body.removeChild(s)};h.then(f,f);return h}function ar(e,t){var i=tr(e);if(!t||!t.raw)i="data:image/svg+xml;base64,"+S(i);return v().resolve(i)}var or=l||{};function sr(e){return Array.prototype.slice.call(e)}var lr="KENDO-PSEUDO-ELEMENT",ur={},O={};O._root=O;var cr,hr=typeof window!=="undefined"?or.msie||or.edge:false,fr=function(n){function e(e,t,i){n.call(this,e,t.getOrigin(),i);this._pdfRect=t}h(e,n);e.prototype=Object.create(n&&n.prototype);e.prototype.constructor=e;e.fn=e.prototype;e.fn.init=e.fn.constructor;e.prototype.rect=function e(){return this._pdfRect};e.prototype.rawBBox=function e(){return this._pdfRect};return e}(Wt);function dr(e,t){if(e.classList)e.classList.add(t);else e.className+=" "+t}function pr(e,i){if(e.classList)e.classList.remove(i);else e.className=e.className.split(/\s+/).reduce(function(e,t){if(t!=i)e.push(t);return e},[]).join(" ")}function vr(t,i){Object.keys(i).forEach(function(e){t.style[e]=i[e]})}var gr=typeof Element!=="undefined"&&Element.prototype&&function(e){if(e.matches)return function(e,t){return e.matches(t)};if(e.webkitMatchesSelector)return function(e,t){return e.webkitMatchesSelector(t)};if(e.mozMatchesSelector)return function(e,t){return e.mozMatchesSelector(t)};if(e.msMatchesSelector)return function(e,t){return e.msMatchesSelector(t)};return function(e){return[].indexOf.call(document.querySelectorAll(e),this)!==-1}}(Element.prototype);function mr(e,t){if(e.closest)return e.closest(t);while(e&&!/^\[object (?:HTML)?Document\]$/.test(String(e))){if(e.nodeType==1&&gr(e,t))return e;e=e.parentNode}}var _r=function(s){if(s)return function e(t){var i=t.cloneNode(false);if(t.nodeType==1){var n=s(t),r=s(i),a;var o=n.data();for(a in o)r.data(a,o[a]);if(/^canvas$/i.test(t.tagName))i.getContext("2d").drawImage(t,0,0);else if(/^(?:input|select|textarea|option)$/i.test(t.tagName)){i.removeAttribute("id");i.removeAttribute("name");if(!/^textarea$/i.test(t.tagName))i.value=t.value;i.checked=t.checked;i.selected=t.selected}for(a=t.firstChild;a;a=a.nextSibling)i.appendChild(e(a))}return i};else return function e(t){var i=function e(t){var i=t.cloneNode(false);if(t._kendoExportVisual)i._kendoExportVisual=t._kendoExportVisual;for(var n=t.firstChild;n;n=n.nextSibling)i.appendChild(e(n));return i}(t);var n=t.querySelectorAll("canvas");if(n.length)sr(i.querySelectorAll("canvas")).forEach(function(e,t){e.getContext("2d").drawImage(n[t],0,0)});var r=t.querySelectorAll("input, select, textarea, option");sr(i.querySelectorAll("input, select, textarea, option")).forEach(function(e,t){e.removeAttribute("id");e.removeAttribute("name");if(!/^textarea$/i.test(e.tagName))e.value=r[t].value;e.checked=r[t].checked;e.selected=r[t].selected});return i}}(typeof window!=="undefined"&&window.kendo&&window.kendo.jQuery);function yr(e){if(typeof e=="number")return{x:e,y:e};if(Array.isArray(e))return{x:e[0],y:e[1]};return{x:e.x,y:e.y}}function br(l,u){if(!u)u={};var c=v();if(!l)return c.reject("No element to export");if(typeof window.getComputedStyle!="function")throw new Error("window.getComputedStyle is missing.  You are using an unsupported browser, or running in IE8 compatibility mode.  Drawing HTML is supported in Chrome, Firefox, Safari and IE9+.");kendo.pdf.defineFont(Tr(l.ownerDocument));var h=yr(u.scale||1);function f(e){var t=new $t;var i=e.getBoundingClientRect();Jr(t,[h.x,0,0,h.y,-i.left*h.x,-i.top*h.y]);O._clipbox=false;O._matrix=a.unit();O._stackingContext={element:e,group:t};if(u.avoidLinks===true)O._avoidLinks="a";else O._avoidLinks=u.avoidLinks;dr(e,"k-pdf-export");ka(e,t);pr(e,"k-pdf-export");return t}Lr([l],function(){var e=u&&u.forcePageBreak;var i=u&&u.paperSize&&u.paperSize!="auto";var t=kendo.pdf.getPaperOptions(function(e,t){if(e=="paperSize")return i?u[e]:"A4";return e in u?u[e]:t});var n=i&&t.paperSize[0];var r=i&&t.paperSize[1];var a=u.margin&&t.margin;var o=Boolean(a);if(e||r){if(!a)a={left:0,top:0,right:0,bottom:0};if(n)n/=h.x;if(r)r/=h.y;a.left/=h.x;a.right/=h.x;a.top/=h.y;a.bottom/=h.y;var s=new $t({pdf:{multiPage:true,paperSize:i?t.paperSize:"auto",_ignoreMargin:o}});d(function(i){if(u.progress){var n=false,r=0;(function e(){if(r<i.pages.length){var t=f(i.pages[r]);s.append(t);u.progress({page:t,pageNum:++r,totalPages:i.pages.length,cancel:function(){n=true}});if(!n)setTimeout(e);else i.container.parentNode.removeChild(i.container)}else{i.container.parentNode.removeChild(i.container);c.resolve(s)}})()}else{i.pages.forEach(function(e){s.append(f(e))});i.container.parentNode.removeChild(i.container);c.resolve(s)}},l,e,n?n-a.left-a.right:null,r?r-a.top-a.bottom:null,a,u)}else c.resolve(f(l))});function x(n){if(n!=null){if(typeof n=="string")n=kendo.template(n.replace(/^\s+|\s+$/g,""));if(typeof n=="function")return function(e){var t=n(e);if(t&&typeof t=="string"){var i=document.createElement("div");i.innerHTML=t;t=i.firstElementChild}return t};return function(){return n.cloneNode(true)}}}function d(a,e,d,t,l,i,u){var o=x(u.template);var p=e.ownerDocument;var n=[];var c=u._destructive?e:_r(e);var r=p.createElement("KENDO-PDF-DOCUMENT");var h=0;sr(c.querySelectorAll("tfoot")).forEach(function(e){e.parentNode.appendChild(e)});sr(c.querySelectorAll("ol")).forEach(function(e){sr(e.children).forEach(function(e,t){e.setAttribute("kendo-split-index",t)})});vr(r,{display:"block",position:"absolute",boxSizing:"content-box",left:"-10000px",top:"-10000px"});if(t){vr(r,{width:t+"px",paddingLeft:i.left+"px",paddingRight:i.right+"px"});vr(c,{overflow:"hidden"})}e.parentNode.insertBefore(r,e);r.appendChild(c);if(u.beforePageBreak)zr([r],function(){u.beforePageBreak(r,s)});else zr([r],s);function s(){if(d!="-"||l)g(c);{var e=_();c.parentNode.insertBefore(e,c);e.appendChild(c)}if(o)n.forEach(function(e,t){var i=o({element:e,pageNum:t+1,totalPages:n.length});if(i)e.appendChild(i)});Lr(n,a.bind(null,{pages:n,container:r}))}function v(e){if(u.keepTogether&&gr(e,u.keepTogether)&&e.offsetHeight<=l-h)return true;var t=e.tagName;if(/^h[1-6]$/i.test(t)&&e.offsetHeight>=l-h)return false;return e.getAttribute("data-kendo-chart")||/^(?:img|tr|thead|th|tfoot|iframe|svg|object|canvas|input|textarea|select|video|h[1-6])/i.test(e.tagName)}function g(e){if(e.tagName=="TABLE")vr(e,{tableLayout:"fixed"});if(v(e))return;var t=jr(e);var i=parseFloat(R(t,"padding-bottom"));var n=parseFloat(R(t,"border-bottom-width"));var r=h;h+=i+n;var a=true;for(var o=e.firstChild;o;o=o.nextSibling)if(o.nodeType==1){a=false;if(gr(o,d)){f(o);continue}if(!l){g(o);continue}if(!/^(?:static|relative)$/.test(R(jr(o),"position")))continue;var s=y(o);if(s==1)f(o);else if(s)if(v(o))f(o);else g(o);else g(o)}else if(o.nodeType==3&&l){b(o,a);a=false}h=r}function m(e){var t=e.parentNode,i=t.firstChild;if(e===i)return true;if(e===t.children[0]){if(i.nodeType==7||i.nodeType==8)return true;if(i.nodeType==3)return!/\S/.test(i.data)}return false}function f(e){if(e.nodeType==1&&e!==c&&m(e))return f(e.parentNode);var t,i,n,r,a;t=mr(e,"table");i=t&&t.querySelector("colgroup");if(u.repeatHeaders){n=t&&t.querySelector("thead");r=mr(e,".k-grid.k-widget");if(r&&r.querySelector(".k-auto-scrollable"))a=r.querySelector(".k-grid-header")}var o=_();var s=p.createRange();s.setStartBefore(c);s.setEndBefore(e);o.appendChild(s.extractContents());c.parentNode.insertBefore(o,c);w(e.parentNode);if(t){t=mr(e,"table");if(u.repeatHeaders&&n)t.insertBefore(n.cloneNode(true),t.firstChild);if(i)t.insertBefore(i.cloneNode(true),t.firstChild)}if(u.repeatHeaders&&a){r=mr(e,".k-grid.k-widget");r.insertBefore(a.cloneNode(true),r.firstChild)}}function _(){var e=p.createElement("KENDO-PDF-PAGE");vr(e,{display:"block",boxSizing:"content-box",width:t?t+"px":"auto",padding:i.top+"px "+i.right+"px "+i.bottom+"px "+i.left+"px",position:"relative",height:l?l+"px":"auto",overflow:l||t?"hidden":"visible",clear:"both"});if(u&&u.pageClassName)e.className=u.pageClassName;n.push(e);return e}function y(e){var t=e.getBoundingClientRect();if(t.width===0||t.height===0)return 0;var i=c.getBoundingClientRect().top;var n=l-h;return t.height>n?3:t.top-i>n?1:t.bottom-i>n?2:0}function b(r,e){if(!/\S/.test(r.data))return;var t=r.data.length;var a=p.createRange();a.selectNodeContents(r);var i=y(a);if(!i)return;var n=r;if(i==1)if(e)f(r.parentNode);else f(r);else{(function e(t,i,n){a.setEnd(r,i);if(t==i||i==n)return i;if(y(a))return e(t,t+i>>1,i);else return e(i,i+n>>1,n)})(0,t>>1,t);if(!/\S/.test(a.toString())&&e)f(r.parentNode);else{n=r.splitText(a.endOffset);var o=_();a.setStartBefore(c);o.appendChild(a.extractContents());c.parentNode.insertBefore(o,c);w(n.parentNode)}}b(n)}function w(e){var t=mr(e,"li");if(t){t.setAttribute("kendo-no-bullet","1");w(t.parentNode)}}}return c}function wr(e){var t=new $t;O._clipbox=false;O._matrix=a.unit();O._stackingContext={element:e,group:t};Fr(e,jr(e),t);if(e.firstChild.nodeType==3)wa(e,e.firstChild,t);else ca(e,t);Vr();return t}var xr=function(){var a=/^((-webkit-|-moz-|-o-|-ms-)?linear-gradient\s*)\(/;var f=/^([-0-9.]+%)/;var o=/^([-0-9.]+px)/;var d=/^(left|right|top|bottom|to|center)\W/;var p=/^([-0-9.]+(deg|grad|rad|turn)|0)/;var l=/^(\s+)/;var v=/^(\()/;var g=/^(\))/;var m=/^(,)/;var _=/^(url)\(/;var y=/^(.*?)\)/;var s={},t={};function i(u){var e=u;if(Ar(s,e))return s[e];function i(){var e=l.exec(u);if(e)u=u.substr(e[1].length)}function c(e){i();var t=e.exec(u);if(t){u=u.substr(t[1].length);return t[1]}}function h(){var e=kendo.parseColor(u,true);var t,i;if(e){var n=/^#[0-9a-f]+/i.exec(u)||/^rgba?\(.*?\)/i.exec(u)||/^..*?\b/.exec(u);u=u.substr(n[0].length);e=e.toRGB();if(!(t=c(o)))i=c(f);return{color:e,length:t,percent:i}}}function t(e){var t;var i,n;var r=[];var a=false;if(c(v)){t=c(p);if(t=="0")t="0deg";if(t){t=Zr(t);c(m)}else{i=c(d);if(i=="to")i=c(d);else if(i&&/^-/.test(e))a=true;n=c(d);c(m)}if(/-moz-/.test(e)&&t==null&&i==null){var o=c(f),s=c(f);a=true;if(o=="0%")i="left";else if(o=="100%")i="right";if(s=="0%")n="top";else if(s=="100%")n="bottom";c(m)}while(u&&!c(g)){var l=h();if(!l)break;r.push(l);c(m)}return{type:"linear",angle:t,to:i&&n?i+" "+n:i?i:n?n:null,stops:r,reverse:a}}}function n(){if(c(v)){var e=c(y);e=e.replace(/^['"]+|["']+$/g,"");c(g);return{type:"url",url:e}}}var r;if(r=c(a))r=t(r);else if(r=c(_))r=n();return s[e]=r||{type:"none"}}return function(e){if(Ar(t,e))return t[e];return t[e]=kr(e).map(i)}}(),kr=function(){var h={};return function(t,e){if(!e)e=/^\s*,\s*/;var i=t+e;if(Ar(h,i))return h[i];var n=[];var r=0,a=0;var o=0;var s=false;var l;function u(e){return l=e.exec(t.substr(a))}function c(e){return e.replace(/^\s+|\s+$/g,"")}while(a<t.length)if(!s&&u(/^[\(\[\{]/)){o++;a++}else if(!s&&u(/^[\)\]\}]/)){o--;a++}else if(!s&&u(/^[\"\']/)){s=l[0];a++}else if(s=="'"&&u(/^\\\'/))a+=2;else if(s=='"'&&u(/^\\\"/))a+=2;else if(s=="'"&&u(/^\'/)){s=false;a++}else if(s=='"'&&u(/^\"/)){s=false;a++}else if(u(e)){if(!s&&!o&&a>r){n.push(c(t.substring(r,a)));r=a+l[0].length}a+=l[0].length}else a++;if(r<a)n.push(c(t.substring(r,a)));return h[i]=n}}(),Cr=function(n){return function(e){var t=n[e];if(!t){var i;if(i=/url\((['"]?)([^'")]*?)\1\)\s+format\((['"]?)truetype\3\)/.exec(e))t=n[e]=i[2];else if(i=/url\((['"]?)([^'")]*?\.ttf)\1\)/.exec(e))t=n[e]=i[2]}return t}}(Object.create?Object.create(null):{}),Sr=function(i){return function(e){var t=i[e];if(t==null)t=i[e]=s.measureText("Mapq",{font:e}).height;return t}}(Object.create?Object.create(null):{});function Tr(e){if(e==null)e=document;var a={};for(var t=0;t<e.styleSheets.length;++t)u(e.styleSheets[t]);return a;function u(e){if(e){var t=null;try{t=e.cssRules}catch(e){}if(t)i(e,t)}}function c(e){var t=R(e.style,"src");if(t)return kr(t).reduce(function(e,t){var i=Cr(t);if(i)e.push(i);return e},[]);else{var i=Cr(e.cssText);return i?[i]:[]}}function i(e,t){for(var i=0;i<t.length;++i){var n=t[i];switch(n.type){case 3:u(n.styleSheet);break;case 5:var r=n.style;var a=kr(R(r,"font-family"));var o=/^([56789]00|bold)$/i.test(R(r,"font-weight"));var s="italic"==R(r,"font-style");var l=c(n);if(l.length>0)h(e,a,o,s,l[0])}}}function h(e,t,i,n,r){if(!/^data:/i.test(r))if(!(/^[^\/:]+:\/\//.test(r)||/^\//.test(r)))r=String(e.href).replace(/[^\/]*$/,"")+r;t.forEach(function(e){e=e.replace(/^(['"]?)(.*?)\1$/,"$2");if(i)e+="|bold";if(n)e+="|italic";a[e]=r})}}function Ar(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Mr(e){e="_counter_"+e;return O[e]}function Dr(e){var t=[],i=O;e="_counter_"+e;while(i){if(Ar(i,e))t.push(i[e]);i=Object.getPrototypeOf(i)}return t.reverse()}function Er(e,t){var i=O;e="_counter_"+e;while(i&&!Ar(i,e))i=Object.getPrototypeOf(i);if(!i)i=O._root;i[e]=(i[e]||0)+(t==null?1:t)}function Ir(e,t){e="_counter_"+e;O[e]=t==null?0:t}function Pr(e,t,i){for(var n=0;n<e.length;){var r=e[n++];var a=parseFloat(e[n]);if(isNaN(a))t(r,i);else{t(r,a);++n}}}function Br(e){var t=R(e,"counter-reset");if(t)Pr(kr(t,/^\s+/),Ir,0);var i=R(e,"counter-increment");if(i)Pr(kr(i,/^\s+/),Er,1)}function Or(e,t){var i=kendo.parseColor(e,true);if(i){i=i.toRGB();if(t)i=i.toCssRgba();else if(i.a===0)i=null}return i}function zr(e,t){var r=0;e.forEach(function(e){var t=e.querySelectorAll("img");for(var i=0;i<t.length;++i){var n=t[i];if(!n.complete){r++;n.onload=n.onerror=a}}});if(!r)a();function a(){if(--r<=0)t()}}function Lr(e,t){var i=[];function n(e){if(!ur[e]){ur[e]=true;i.push(e)}}e.forEach(function e(t){if(/^img$/i.test(t.tagName))n(t.src);xr(R(jr(t),"background-image")).forEach(function(e){if(e.type=="url")n(e.url)});if(t.children)sr(t.children).forEach(e)});var r=i.length;function a(){if(--r<=0)zr(e,t)}if(r===0)a();i.forEach(function(e){var t=ur[e]=new window.Image;if(!/^data:/i.test(e))t.crossOrigin="Anonymous";t.src=e;if(t.complete)a();else{t.onload=a;t.onerror=function(){ur[e]=null;a()}}})}function Rr(e){var t="";do{var i=e%26;t=String.fromCharCode(97+i)+t;e=Math.floor(e/26)}while(e>0);return t}function Fr(e,t,i){O=Object.create(O);O[e.tagName.toLowerCase()]={element:e,style:t};var n=R(t,"text-decoration");if(n&&n!="none"){var r=R(t,"color");n.split(/\s+/g).forEach(function(e){if(!O[e])O[e]=r})}if(Ur(t))O._stackingContext={element:e,group:i}}function Vr(){O=Object.getPrototypeOf(O)}function Nr(e){if(O._clipbox!=null){var t=e.bbox(O._matrix);if(O._clipbox)O._clipbox=P.intersect(O._clipbox,t);else O._clipbox=t}}function Hr(){var e=O._clipbox;if(e==null)return true;if(e)return e.width()===0||e.height()===0}function Ur(t){function e(e){return R(t,e)}if(e("transform")!="none"||e("position")!="static"||e("z-index")!="auto"||e("opacity")<1)return true}function jr(e,t){return window.getComputedStyle(e,t||null)}function R(e,t,i){var n=e.getPropertyValue(t);if(n==null||n==="")if(or.webkit)n=e.getPropertyValue("-webkit-"+t);else if(or.mozilla)n=e.getPropertyValue("-moz-"+t);else if(or.opera)n=e.getPropertyValue("-o-"+t);else if(hr)n=e.getPropertyValue("-ms-"+t);if(arguments.length>2&&(n==null||n===""))return i;else return n}function Gr(e,t,i,n){e.setProperty(t,i,n);if(or.webkit)e.setProperty("-webkit-"+t,i,n);else if(or.mozilla)e.setProperty("-moz-"+t,i,n);else if(or.opera)e.setProperty("-o-"+t,i,n);else if(hr){e.setProperty("-ms-"+t,i,n);t="ms"+t.replace(/(^|-)([a-z])/g,function(e,t,i){return t+i.toUpperCase()});e[t]=i}}function Wr(e,t){t="border-"+t;return{width:parseFloat(R(e,t+"-width")),style:R(e,t+"-style"),color:Or(R(e,t+"-color"),true)}}function qr(e,t){var i=e.style.cssText;var n=t();e.style.cssText=i;return n}function Yr(e,t){var i=R(e,"border-"+t+"-radius").split(/\s+/g).map(parseFloat);if(i.length==1)i.push(i[0]);return ia({x:i[0],y:i[1]})}function $r(e){var t=e.getBoundingClientRect();t=Xr(t,"border-*-width",e);t=Xr(t,"padding-*",e);return t}function Xr(e,t,i){var n,r,a,o,s;if(typeof t=="string"){n=jr(i);r=parseFloat(R(n,t.replace("*","top")));a=parseFloat(R(n,t.replace("*","right")));o=parseFloat(R(n,t.replace("*","bottom")));s=parseFloat(R(n,t.replace("*","left")))}else if(typeof t=="number")r=a=o=s=t;return{top:e.top+r,right:e.right-a,bottom:e.bottom-o,left:e.left+s,width:e.right-e.left-a-s,height:e.bottom-e.top-o-r}}function Kr(e){var t=R(e,"transform");if(t=="none")return null;var i=/^\s*matrix\(\s*(.*?)\s*\)\s*$/.exec(t);if(i){var n=R(e,"transform-origin");i=i[1].split(/\s*,\s*/g).map(parseFloat);n=n.split(/\s+/g).map(parseFloat);return{matrix:i,origin:n}}}function Qr(e){return 180*e/Math.PI%360}function Zr(e){var t=parseFloat(e);if(/grad$/.test(e))return Math.PI*t/200;else if(/rad$/.test(e))return t;else if(/turn$/.test(e))return Math.PI*t*2;else if(/deg$/.test(e))return Math.PI*t/180}function Jr(e,t){t=new a(t[0],t[1],t[2],t[3],t[4],t[5]);e.transform(t);return t}function ea(e,t){e.clip(t)}function ta(e,t,i,n){var r=new Ie([t,i],n).curvePoints(),a=1;while(a<r.length)e.curveTo(r[a++],r[a++],r[a++])}function ia(e){if(e.x<=0||e.y<=0)e.x=e.y=0;return e}function na(e,c,h,f,d){var t=Math.max(0,c.x),i=Math.max(0,c.y);var n=Math.max(0,h.x),r=Math.max(0,h.y);var a=Math.max(0,f.x),o=Math.max(0,f.y);var s=Math.max(0,d.x),l=Math.max(0,d.y);var u=Math.min(e.width/(t+n),e.height/(r+o),e.width/(a+s),e.height/(l+i));if(u<1){t*=u;i*=u;n*=u;r*=u;a*=u;o*=u;s*=u;l*=u}return{tl:{x:t,y:i},tr:{x:n,y:r},br:{x:a,y:o},bl:{x:s,y:l}}}function ra(c,h,e){var t=jr(c);var i=Yr(t,"top-left");var n=Yr(t,"top-right");var r=Yr(t,"bottom-left");var a=Yr(t,"bottom-right");if(e=="padding"||e=="content"){var o=Wr(t,"top");var s=Wr(t,"right");var l=Wr(t,"bottom");var u=Wr(t,"left");i.x-=u.width;i.y-=o.width;n.x-=s.width;n.y-=o.width;a.x-=s.width;a.y-=l.width;r.x-=u.width;r.y-=l.width;if(e=="content"){var f=parseFloat(R(t,"padding-top"));var d=parseFloat(R(t,"padding-right"));var p=parseFloat(R(t,"padding-bottom"));var v=parseFloat(R(t,"padding-left"));i.x-=v;i.y-=f;n.x-=d;n.y-=f;a.x-=d;a.y-=p;r.x-=v;r.y-=p}}if(typeof e=="number"){i.x-=e;i.y-=e;n.x-=e;n.y-=e;a.x-=e;a.y-=e;r.x-=e;r.y-=e}return aa(h,i,n,a,r)}function aa(e,t,i,n,c){var r=na(e,t,i,n,c);var a=r.tl;var o=r.tr;var s=r.br;var l=r.bl;var u=new B({fill:null,stroke:null});u.moveTo(e.left,e.top+a.y);if(a.x)ta(u,e.left+a.x,e.top+a.y,{startAngle:-180,endAngle:-90,radiusX:a.x,radiusY:a.y});u.lineTo(e.right-o.x,e.top);if(o.x)ta(u,e.right-o.x,e.top+o.y,{startAngle:-90,endAngle:0,radiusX:o.x,radiusY:o.y});u.lineTo(e.right,e.bottom-s.y);if(s.x)ta(u,e.right-s.x,e.bottom-s.y,{startAngle:0,endAngle:90,radiusX:s.x,radiusY:s.y});u.lineTo(e.left+l.x,e.bottom);if(l.x)ta(u,e.left+l.x,e.bottom-l.y,{startAngle:90,endAngle:180,radiusX:l.x,radiusY:l.y});return u.close()}function oa(e,t){var i=String(parseFloat(e));switch(t){case"decimal-leading-zero":if(i.length<2)i="0"+i;return i;case"lower-roman":return F(e).toLowerCase();case"upper-roman":return F(e).toUpperCase();case"lower-latin":case"lower-alpha":return Rr(e-1);case"upper-latin":case"upper-alpha":return Rr(e-1).toUpperCase();default:return i}}function sa(i,e){function n(e,t,i){if(!i)return oa(Mr(e)||0,t);i=i.replace(/^\s*(["'])(.*)\1\s*$/,"$2");return Dr(e).map(function(e){return oa(e,t)}).join(i)}var t=kr(e,/^\s+/);var r=[],a;t.forEach(function(e){var t;if(a=/^\s*(["'])(.*)\1\s*$/.exec(e))r.push(a[2].replace(/\\([0-9a-f]{4})/gi,function(e,t){return String.fromCharCode(parseInt(t,16))}));else if(a=/^\s*counter\((.*?)\)\s*$/.exec(e)){t=kr(a[1]);r.push(n(t[0],t[1]))}else if(a=/^\s*counters\((.*?)\)\s*$/.exec(e)){t=kr(a[1]);r.push(n(t[0],t[2],t[1]))}else if(a=/^\s*attr\((.*?)\)\s*$/.exec(e))r.push(i.getAttribute(a[1])||"");else r.push(e)});return r.join("")}function la(e){if(e.cssText)return e.cssText;var t=[];for(var i=0;i<e.length;++i)t.push(e[i]+": "+R(e,e[i]));return t.join(";\n")}function ua(a,e){if(a.tagName==lr){ca(a,e);return}var o=[];function t(e,t){var i=jr(a,e),n=i.content;Br(i);if(n&&n!="normal"&&n!="none"&&i.width!="0px"){var r=a.ownerDocument.createElement(lr);r.style.cssText=la(i);r.textContent=sa(a,n);a.insertBefore(r,t);o.push(r)}}t(":before",a.firstChild);t(":after",null);if(o.length>0){var i=a.className;a.className+=" kendo-pdf-hide-pseudo-elements";ca(a,e);a.className=i;o.forEach(function(e){a.removeChild(e)})}else ca(a,e)}function ca(y,f){var u=jr(y);var d=Wr(u,"top");var p=Wr(u,"right");var v=Wr(u,"bottom");var g=Wr(u,"left");var m=Yr(u,"top-left");var _=Yr(u,"top-right");var b=Yr(u,"bottom-left");var w=Yr(u,"bottom-right");var x=R(u,"direction");var r=R(u,"background-color");r=Or(r);var a=xr(R(u,"background-image"));var o=kr(R(u,"background-repeat"));var s=kr(R(u,"background-position"));var l=kr(R(u,"background-origin"));var h=kr(R(u,"background-size"));var i,n;if(hr){i=u.textOverflow;if(i=="ellipsis"){n=y.style.textOverflow;y.style.textOverflow="clip"}}if(or.msie&&or.version<10)s=kr(y.currentStyle.backgroundPosition);var c=Xr(y.getBoundingClientRect(),"border-*-width",y);(function(){var e=R(u,"clip");var t=/^\s*rect\((.*)\)\s*$/.exec(e);if(t){var i=t[1].split(/[ ,]+/g);var n=i[0]=="auto"?c.top:parseFloat(i[0])+c.top;var r=i[1]=="auto"?c.right:parseFloat(i[1])+c.left;var a=i[2]=="auto"?c.bottom:parseFloat(i[2])+c.top;var o=i[3]=="auto"?c.left:parseFloat(i[3])+c.left;var s=new $t;var l=(new B).moveTo(o,n).lineTo(r,n).lineTo(r,a).lineTo(o,a).close();ea(s,l);f.append(s);f=s;Nr(l)}})();var e,t,k;var C=R(u,"display");if(C=="table-row"){e=[];for(t=0,k=y.children;t<k.length;++t)e.push(k[t].getBoundingClientRect())}else{e=y.getClientRects();if(e.length==1)e=[y.getBoundingClientRect()]}e=T(e);for(t=0;t<e.length;++t)I(e[t],t===0,t==e.length-1);if(y.tagName=="A"&&y.href&&!/^#?$/.test(y.getAttribute("href")))if(!O._avoidLinks||!gr(y,O._avoidLinks)){var S=document.createRange();S.selectNodeContents(y);sr(S.getClientRects()).forEach(function(e){var t=new $t;t._pdfLink={url:y.href,top:e.top,right:e.right,bottom:e.bottom,left:e.left};f.append(t)})}if(e.length>0&&C=="list-item"&&!y.getAttribute("kendo-no-bullet"))E(e[0]);(function(){function e(){var e=ra(y,c,"padding");var t=new $t;ea(t,e);f.append(t);f=t;Nr(e)}if(va(y))e();else if(/^(hidden|auto|scroll)/.test(R(u,"overflow")))e();else if(/^(hidden|auto|scroll)/.test(R(u,"overflow-x")))e();else if(/^(hidden|auto|scroll)/.test(R(u,"overflow-y")))e()})();if(!fa(y,f))ba(y,f);if(hr&&i=="ellipsis")y.style.textOverflow=n;return f;function T(e){if(/^td$/i.test(y.tagName)){var t=O.table;if(t&&R(t.style,"border-collapse")=="collapse"){var i=Wr(t.style,"left").width;var n=Wr(t.style,"top").width;if(i===0&&n===0)return e;var r=t.element.getBoundingClientRect();var a=t.element.rows[0].cells[0];var o=a.getBoundingClientRect();if(o.top==r.top||o.left==r.left)return sr(e).map(function(e){return{left:e.left+i,top:e.top+n,right:e.right+i,bottom:e.bottom+n,height:e.height,width:e.width}})}}return e}function A(o,e,s,t,i,n,r,c){if(s<=0)return;var a,l=new $t;Jr(l,c);f.append(l);ia(n);ia(r);a=new B({fill:{color:o},stroke:null});l.append(a);a.moveTo(n.x?Math.max(n.x,t):0,0).lineTo(e-(r.x?Math.max(r.x,i):0),0).lineTo(e-Math.max(r.x,i),s).lineTo(Math.max(n.x,t),s).close();if(n.x)u(t,n,[-1,0,0,1,n.x,0]);if(r.x)u(i,r,[1,0,0,1,e-r.x,0]);function u(e,t,i){var n=Math.PI/2*e/(e+s);var r={x:t.x-e,y:t.y-s};var a=new B({fill:{color:o},stroke:null}).moveTo(0,0);Jr(a,i);ta(a,0,t.y,{startAngle:-90,endAngle:-Qr(n),radiusX:t.x,radiusY:t.y});if(r.x>0&&r.y>0){a.lineTo(r.x*Math.cos(n),t.y-r.y*Math.sin(n));ta(a,0,t.y,{startAngle:-Qr(n),endAngle:-90,radiusX:r.x,radiusY:r.y,anticlockwise:true})}else if(r.x>0)a.lineTo(r.x,s).lineTo(0,s);else a.lineTo(r.x,s).lineTo(r.x,0);l.append(a.close())}}function M(e){var t=new $t;ea(t,aa(e,m,_,w,b));f.append(t);if(r){var i=new B({fill:{color:r.toCssRgba()},stroke:null});i.moveTo(e.left,e.top).lineTo(e.right,e.top).lineTo(e.right,e.bottom).lineTo(e.left,e.bottom).close();t.append(i)}for(var n=a.length;--n>=0;)D(t,e,a[n],o[n%o.length],s[n%s.length],l[n%l.length],h[n%h.length])}function D(e,t,i,v,g,m,_){if(!i||i=="none")return;if(i.type=="url"){var n=ur[i.url];if(n&&n.width>0&&n.height>0)r(e,t,n.width,n.height,function(e,t){e.append(new qt(i.url,t))})}else if(i.type=="linear")r(e,t,t.width,t.height,ha(i));else return;function r(e,t,i,n,r){var c=i/n,a;var o=t;if(m=="content-box"){o=Xr(o,"border-*-width",y);o=Xr(o,"padding-*",y)}else if(m=="padding-box")o=Xr(o,"border-*-width",y);if(!/^\s*auto(\s+auto)?\s*$/.test(_))if(_=="contain"){a=Math.min(o.width/i,o.height/n);i*=a;n*=a}else if(_=="cover"){a=Math.max(o.width/i,o.height/n);i*=a;n*=a}else{var s=_.split(/\s+/g);if(/%$/.test(s[0]))i=o.width*parseFloat(s[0])/100;else i=parseFloat(s[0]);if(s.length==1||s[1]=="auto")n=i/c;else if(/%$/.test(s[1]))n=o.height*parseFloat(s[1])/100;else n=parseFloat(s[1])}var l=String(g);switch(l){case"bottom":l="50% 100%";break;case"top":l="50% 0";break;case"left":l="0 50%";break;case"right":l="100% 50%";break;case"center":l="50% 50%";break}l=l.split(/\s+/);if(l.length==1)l[1]="50%";if(/%$/.test(l[0]))l[0]=parseFloat(l[0])/100*(o.width-i);else l[0]=parseFloat(l[0]);if(/%$/.test(l[1]))l[1]=parseFloat(l[1])/100*(o.height-n);else l[1]=parseFloat(l[1]);var u=new P([o.left+l[0],o.top+l[1]],[i,n]);function h(){while(u.origin.x>t.left)u.origin.x-=i}function f(){while(u.origin.y>t.top)u.origin.y-=n}function d(){while(u.origin.x<t.right){r(e,u.clone());u.origin.x+=i}}if(v=="no-repeat")r(e,u);else if(v=="repeat-x"){h();d()}else if(v=="repeat-y"){f();while(u.origin.y<t.bottom){r(e,u.clone());u.origin.y+=n}}else if(v=="repeat"){h();f();var p=u.origin.clone();while(u.origin.y<t.bottom){u.origin.x=p.x;d();u.origin.y+=n}}}}function E(){var i=R(u,"list-style-type");if(i=="none")return;var n=R(u,"list-style-position");function e(t){qr(y,function(){y.style.position="relative";var e=y.ownerDocument.createElement(lr);e.style.position="absolute";e.style.boxSizing="border-box";if(n=="outside"){e.style.width="6em";e.style.left="-6.8em";e.style.textAlign="right"}else e.style.left="0px";t(e);y.insertBefore(e,y.firstChild);ka(e,f);y.removeChild(e)})}function r(e){var t=y.parentNode.children;var i=y.getAttribute("kendo-split-index");if(i!=null)return e(i|0,t.length);for(var n=0;n<t.length;++n)if(t[n]===y)return e(n,t.length)}switch(i){case"circle":case"disc":case"square":e(function(e){e.style.fontSize="60%";e.style.lineHeight="200%";e.style.paddingRight="0.5em";e.style.fontFamily="DejaVu Serif";e.innerHTML={disc:"",circle:"",square:""}[i]});break;case"decimal":case"decimal-leading-zero":e(function(t){r(function(e){++e;if(i=="decimal-leading-zero"&&e<10)e="0"+e;t.innerHTML=e+"."})});break;case"lower-roman":case"upper-roman":e(function(t){r(function(e){e=F(e+1);if(i=="upper-roman")e=e.toUpperCase();t.innerHTML=e+"."})});break;case"lower-latin":case"lower-alpha":case"upper-latin":case"upper-alpha":e(function(t){r(function(e){e=Rr(e);if(/^upper/i.test(i))e=e.toUpperCase();t.innerHTML=e+"."})});break}}function I(e,t,i){if(e.width===0||e.height===0)return;M(e);var n=g.width>0&&(t&&x=="ltr"||i&&x=="rtl");var r=p.width>0&&(i&&x=="ltr"||t&&x=="rtl");if(d.width===0&&g.width===0&&p.width===0&&v.width===0)return;if(d.color==p.color&&d.color==v.color&&d.color==g.color)if(d.width==p.width&&d.width==v.width&&d.width==g.width)if(n&&r){e=Xr(e,d.width/2);var a=ra(y,e,d.width/2);a.options.stroke={color:d.color,width:d.width};f.append(a);return}if(m.x===0&&_.x===0&&w.x===0&&b.x===0)if(d.width<2&&g.width<2&&p.width<2&&v.width<2){if(d.width>0)f.append(new B({stroke:{width:d.width,color:d.color}}).moveTo(e.left,e.top+d.width/2).lineTo(e.right,e.top+d.width/2));if(v.width>0)f.append(new B({stroke:{width:v.width,color:v.color}}).moveTo(e.left,e.bottom-v.width/2).lineTo(e.right,e.bottom-v.width/2));if(n)f.append(new B({stroke:{width:g.width,color:g.color}}).moveTo(e.left+g.width/2,e.top).lineTo(e.left+g.width/2,e.bottom));if(r)f.append(new B({stroke:{width:p.width,color:p.color}}).moveTo(e.right-p.width/2,e.top).lineTo(e.right-p.width/2,e.bottom));return}var o=na(e,m,_,w,b);var s=o.tl;var l=o.tr;var c=o.br;var h=o.bl;A(d.color,e.width,d.width,g.width,p.width,s,l,[1,0,0,1,e.left,e.top]);A(v.color,e.width,v.width,p.width,g.width,c,h,[-1,0,0,-1,e.right,e.bottom]);function u(e){return{x:e.y,y:e.x}}A(g.color,e.height,g.width,v.width,d.width,u(h),u(s),[0,-1,1,0,e.left,e.bottom]);A(p.color,e.height,p.width,d.width,v.width,u(l),u(c),[0,1,-1,0,e.right,e.top])}}function ha(m){return function(c,e){var t=e.width(),i=e.height();switch(m.type){case"linear":var n=m.angle!=null?m.angle:Math.PI;switch(m.to){case"top":n=0;break;case"left":n=-Math.PI/2;break;case"bottom":n=Math.PI;break;case"right":n=Math.PI/2;break;case"top left":case"left top":n=-Math.atan2(i,t);break;case"top right":case"right top":n=Math.atan2(i,t);break;case"bottom left":case"left bottom":n=Math.PI+Math.atan2(i,t);break;case"bottom right":case"right bottom":n=Math.PI-Math.atan2(i,t);break}if(m.reverse)n-=Math.PI;n%=2*Math.PI;if(n<0)n+=2*Math.PI;var h=Math.abs(t*Math.sin(n))+Math.abs(i*Math.cos(n));var r=Math.atan(t*Math.tan(n)/i);var a=Math.sin(r),f=Math.cos(r);var d=Math.abs(a)+Math.abs(f);var o=d/2*a;var s=d/2*f;if(n>Math.PI/2&&n<=3*Math.PI/2){o=-o;s=-s}var l=[],u=0;var p=m.stops.map(function(e,t){var i=e.percent;if(i)i=parseFloat(i)/100;else if(e.length)i=parseFloat(e.length)/h;else if(t===0)i=0;else if(t==m.stops.length-1)i=1;var n={color:e.color.toCssRgba(),offset:i};if(i!=null){u=i;l.forEach(function(e,t){var i=e.stop;i.offset=e.left+(u-e.left)*(t+1)/(l.length+1)});l=[]}else l.push({left:u,stop:n});return n});var v=[.5-o,.5+s];var g=[.5+o,.5-s];c.append(B.fromRect(e).stroke(null).fill(new ki({start:v,end:g,stops:p,userSpace:false})));break;case"radial":if(window.console&&window.console.log)window.console.log("Radial gradients are not yet supported in HTML renderer");break}}}function fa(e,t){var i;if(e._kendoExportVisual)i=e._kendoExportVisual();else if(window.kendo&&window.kendo.jQuery&&e.getAttribute(window.kendo.attr("role"))){var n=window.kendo.widgetInstance(window.kendo.jQuery(e));if(n&&(n.exportDOMVisual||n.exportVisual))if(n.exportDOMVisual)i=n.exportDOMVisual();else i=n.exportVisual()}if(!i)return false;var r=new $t;r.children.push(i);var a=e.getBoundingClientRect();r.transform(ce().translate(a.left,a.top));t.append(r);return true}function da(e,t,i){var n=$r(e);var r=new P([n.left,n.top],[n.width,n.height]);var a=new qt(t,r);ea(a,ra(e,n,"content"));i.append(a)}function pa(e,t){var i=jr(e);var n=jr(t);var r=parseFloat(R(i,"z-index"));var a=parseFloat(R(n,"z-index"));var o=R(i,"position");var s=R(n,"position");if(isNaN(r)&&isNaN(a)){if(/static|absolute/.test(o)&&/static|absolute/.test(s))return 0;if(o=="static")return-1;if(s=="static")return 1;return 0}if(isNaN(r))return a===0?0:a>0?-1:1;if(isNaN(a))return r===0?0:r>0?1:-1;return parseFloat(r)-parseFloat(a)}function va(e){return/^(?:textarea|select|input)$/i.test(e.tagName)}function ga(e){if(e.selectedOptions&&e.selectedOptions.length>0)return e.selectedOptions[0];return e.options[e.selectedIndex]}function ma(e,t){var i=jr(e);var n=R(i,"color");var r=e.getBoundingClientRect();if(e.type=="checkbox"){t.append(B.fromRect(new P([r.left+1,r.top+1],[r.width-2,r.height-2])).stroke(n,1));if(e.checked)t.append((new B).stroke(n,1.2).moveTo(r.left+.22*r.width,r.top+.55*r.height).lineTo(r.left+.45*r.width,r.top+.75*r.height).lineTo(r.left+.78*r.width,r.top+.22*r.width))}else{t.append(new ke(new pe([(r.left+r.right)/2,(r.top+r.bottom)/2],Math.min(r.width-2,r.height-2)/2)).stroke(n,1));if(e.checked)t.append(new ke(new pe([(r.left+r.right)/2,(r.top+r.bottom)/2],Math.min(r.width-8,r.height-8)/2)).fill(n).stroke(null))}}function _a(e,t){var i=e.tagName.toLowerCase();if(i=="input"&&(e.type=="checkbox"||e.type=="radio"))return ma(e,t);var n=e.parentNode;var r=e.ownerDocument;var a=r.createElement(lr);var o;a.style.cssText=la(jr(e));if(i=="input")a.style.whiteSpace="pre";if(i=="select"||i=="textarea")a.style.overflow="auto";if(i=="select")if(e.multiple)for(var s=0;s<e.options.length;++s){o=r.createElement(lr);o.style.cssText=la(jr(e.options[s]));o.style.display="block";o.textContent=e.options[s].textContent;a.appendChild(o)}else{o=ga(e);if(o)a.textContent=o.textContent}else a.textContent=e.value;n.insertBefore(a,e);a.scrollLeft=e.scrollLeft;a.scrollTop=e.scrollTop;e.style.display="none";ba(a,t);e.style.display="";n.removeChild(a)}function ya(e){var t=new window.XMLSerializer;var i=t.serializeToString(e);if(or.mozilla&&!(e.getAttribute("width")&&e.getAttribute("height"))){var n=(new window.DOMParser).parseFromString(i,"image/svg+xml");var r=n.documentElement;var a=$r(e);r.setAttribute("width",a.width);r.setAttribute("height",a.height);i=t.serializeToString(r)}return i}function ba(e,t){if(O._stackingContext.element===e)O._stackingContext.group=t;switch(e.tagName.toLowerCase()){case"img":da(e,e.src,t);break;case"svg":var i=ya(e);var n="data:image/svg+xml;base64,"+S(i);da(e,n,t);break;case"canvas":try{da(e,e.toDataURL("image/png"),t)}catch(e){}break;case"textarea":case"input":case"select":_a(e,t);break;default:var r=[],a=[],o=[];for(var s=e.firstChild;s;s=s.nextSibling)switch(s.nodeType){case 3:if(/\S/.test(s.data))wa(e,s,t);break;case 1:var l=jr(s);var u=R(l,"float");var c=R(l,"position");if(c!="static")o.push(s);else if(u!="none")a.push(s);else r.push(s);break}E(r,pa).forEach(function(e){ka(e,t)});E(a,pa).forEach(function(e){ka(e,t)});E(o,pa).forEach(function(e){ka(e,t)})}}function wa(e,u,s){if(Hr())return;var t=jr(e);if(parseFloat(R(t,"text-indent"))<-500)return;var c=u.data;var h=0;var f=c.search(/\S\s*$/)+1;if(!f)return;var a=R(t,"font-size");var o=R(t,"line-height");var l=[R(t,"font-style"),R(t,"font-variant"),R(t,"font-weight"),a,R(t,"font-family")].join(" ");a=parseFloat(a);o=parseFloat(o);if(a===0)return;var v=R(t,"color");var d=e.ownerDocument.createRange();var i=R(t,"text-align");var g=i=="justify";var m=R(t,"column-count",1);var _=R(t,"white-space");var y=R(t,"text-transform");var b=e.getBoundingClientRect().width/a*5;if(b===0)b=500;var w=null;var n=O["underline"];var x=O["line-through"];var k=O["overline"];var r=n||x||k;while(!C());if(r){d.selectNode(u);sr(d.getClientRects()).forEach(T)}return;function p(e){if(hr||or.chrome||or.safari){var t=e.getClientRects(),i={top:Infinity,right:-Infinity,bottom:-Infinity,left:Infinity},n=false;for(var r=0;r<t.length;++r){var a=t[r];if(a.width<=1||a.bottom===w)continue;i.left=Math.min(a.left,i.left);i.top=Math.min(a.top,i.top);i.right=Math.max(a.right,i.right);i.bottom=Math.max(a.bottom,i.bottom);n=true}if(!n)return e.getBoundingClientRect();i.width=i.right-i.left;i.height=i.bottom-i.top;return i}return e.getBoundingClientRect()}function C(){var e=h;var a,t=c.substr(h).search(/\S/);h+=t;if(t<0||h>=f)return true;d.setStart(u,h);d.setEnd(u,h+1);a=p(d);var i=false;if(g||m>1){t=c.substr(h).search(/\s/);if(t>=0){d.setEnd(u,h+t);var n=p(d);if(n.bottom==a.bottom){a=n;i=true;h+=t}}}if(!i){t=function e(t,i,n){d.setEnd(u,i);var r=p(d);if(r.bottom!=a.bottom&&t<i)return e(t,t+i>>1,i);else if(r.right!=a.right){a=r;if(i<n)return e(i,i+n>>1,n);else return i}else return i}(h,Math.min(f,h+b),f);if(t==h)return true;h=t;t=d.toString().search(/\s+$/);if(t===0)return false;if(t>0){d.setEnd(u,d.startOffset+t);a=p(d)}}if(hr)a=d.getClientRects()[0];var r=d.toString();if(!/^(?:pre|pre-wrap)$/i.test(_))r=r.replace(/\s+/g," ");else if(/\t/.test(r)){var o=0;for(t=e;t<d.startOffset;++t){var s=c.charCodeAt(t);if(s==9)o+=8-o%8;else if(s==10||s==13)o=0;else o++}while((t=r.search("\t"))>=0){var l="        ".substr(0,8-(o+t)%8);r=r.substr(0,t)+l+r.substr(t+1)}}if(!i)w=a.bottom;S(r,a)}function S(e,t){if(hr&&!isNaN(o)){var i=Sr(l);var n=(t.top+t.bottom-i)/2;t={top:n,right:t.right,bottom:n+i,left:t.left,height:i,width:t.right-t.left}}switch(y){case"uppercase":e=e.toUpperCase();break;case"lowercase":e=e.toLowerCase();break;case"capitalize":e=e.replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()});break}var r=new fr(e,new P([t.left,t.top],[t.width,t.height]),{font:l,fill:{color:v}});s.append(r)}function T(r){e(n,r.bottom);e(x,r.bottom-r.height/2.7);e(k,r.top);function e(e,t){if(e){var i=a/12;var n=new B({stroke:{width:i,color:e}});t-=i;n.moveTo(r.left,t).lineTo(r.right,t);s.append(n)}}}}function xa(e,t,i){var n;if(i!="auto"){n=O._stackingContext.group;i=parseFloat(i)}else{n=t;i=0}var r=n.children;for(var a=0;a<r.length;++a)if(r[a]._dom_zIndex!=null&&r[a]._dom_zIndex>i)break;var o=new $t;n.insert(a,o);o._dom_zIndex=i;if(n!==t)if(O._clipbox){var s=O._matrix.invert();var l=O._clipbox.transformCopy(s);ea(o,B.fromRect(l))}return o}function ka(r,e){var a=jr(r);Br(a);if(/^(style|script|link|meta|iframe|col|colgroup)$/i.test(r.tagName))return;if(O._clipbox==null)return;var t=parseFloat(R(a,"opacity"));var i=R(a,"visibility");var n=R(a,"display");if(t===0||i=="hidden"||n=="none")return;var o=Kr(a);var s;var l=R(a,"z-index");if((o||t<1)&&l=="auto")l=0;s=xa(r,e,l);if(t<1)s.opacity(t*s.opacity());Fr(r,a,s);if(!o)ua(r,s);else qr(r,function(){Gr(r.style,"transform","none","important");Gr(r.style,"transition","none","important");if(R(a,"position")=="static")Gr(r.style,"position","relative","important");var e=r.getBoundingClientRect();var t=e.left+o.origin[0];var i=e.top+o.origin[1];var n=[1,0,0,1,-t,-i];n=Ca(n,o.matrix);n=Ca(n,[1,0,0,1,t,i]);n=Jr(s,n);O._matrix=O._matrix.multiplyCopy(n);ua(r,s)});Vr()}function Ca(e,t){var i=e[0],n=e[1],r=e[2],a=e[3],c=e[4],h=e[5];var o=t[0],s=t[1],l=t[2],u=t[3],f=t[4],d=t[5];return[i*o+n*l,i*s+n*u,r*o+a*l,r*s+a*u,c*o+h*l+f,c*s+h*u+d]}var Sa={svg:ir,canvas:nr,util:ee,HasObservers:n,PathParser:Bi,parsePath:Ot,BaseNode:Oi,OptionsStore:ie,Surface:er,SurfaceFactory:Jn,exportImage:rr,exportSVG:ar,QuadNode:Pn,ShapesQuadTree:Ln,Element:he,Circle:ke,Arc:Ut,Path:B,MultiPath:Nt,Text:Wt,Image:qt,Group:$t,Layout:ti,Rect:ii,align:ri,vAlign:ai,stack:li,vStack:ui,wrap:fi,vWrap:di,fit:pi,LinearGradient:ki,RadialGradient:Ci,GradientStop:bi,Gradient:wi,Animation:Ii,AnimationFactory:Ei,drawDOM:br,drawText:wr,getFontFaces:Tr};kendo.deepExtend(kendo,{drawing:Sa,geometry:at}),kendo.drawing.Segment=kendo.geometry.Segment,kendo.dataviz.drawing=kendo.drawing,kendo.dataviz.geometry=kendo.geometry,kendo.drawing.util.measureText=kendo.util.measureText,kendo.drawing.util.objectKey=kendo.util.objectKey,kendo.drawing.Color=kendo.Color,kendo.util.encodeBase64=kendo.drawing.util.encodeBase64})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("drawing/surface-tooltip.min",["kendo.popup.min","./kendo-drawing.min"],function(){var i=window.kendo.jQuery,t=".kendo",r=window.kendo,n=r.deepExtend,e=r.drawing.util,a=e.defined,g=e.limitValue,m=e.eventCoordinates,o=r._outerWidth,s=r._outerHeight,l='<div class="k-tooltip">'+'<div class="k-tooltip-content"></div>'+"</div>",u='<div class="k-tooltip-button"><a href="\\#" class="k-icon k-i-close">close</a></div>',c=r.Class.extend({init:function(e,t){this.element=i(l);this.content=this.element.children(".k-tooltip-content");t=t||{};this.options=n({},this.options,this._tooltipOptions(t));this.popupOptions={appendTo:t.appendTo,animation:t.animation,copyAnchorStyles:false,collision:"fit fit"};this._openPopupHandler=this._openPopup.bind(this);this.surface=e;this._bindEvents()},options:{position:"top",showOn:"mouseenter",offset:7,autoHide:true,hideDelay:0,showAfter:100},_bindEvents:function(){this._showHandler=this._showEvent.bind(this);this._surfaceLeaveHandler=this._surfaceLeave.bind(this);this._mouseleaveHandler=this._mouseleave.bind(this);this._mousemoveHandler=this._mousemove.bind(this);this.surface.bind("click",this._showHandler);this.surface.bind("mouseenter",this._showHandler);this.surface.bind("mouseleave",this._mouseleaveHandler);this.surface.bind("mousemove",this._mousemoveHandler);this.surface.element.on("mouseleave"+t,this._surfaceLeaveHandler);this.element.on("click"+t,".k-tooltip-button",this._hideClick.bind(this));this.element.on("mouseleave"+t,this._tooltipLeave.bind(this))},getPopup:function(){if(!this.popup)this.popup=new r.ui.Popup(this.element,this.popupOptions);return this.popup},destroy:function(){var e=this.popup;this.surface.unbind("click",this._showHandler);this.surface.unbind("mouseenter",this._showHandler);this.surface.unbind("mouseleave",this._mouseleaveHandler);this.surface.unbind("mousemove",this._mousemoveHandler);this.surface.element.off("mouseleave"+t,this._surfaceLeaveHandler);this.element.off("click"+t);this.element.off("mouseleave"+t);if(e){e.destroy();delete this.popup}delete this.popupOptions;clearTimeout(this._timeout);delete this.element;delete this.content;delete this.surface},_tooltipOptions:function(e){e=e||{};return{position:e.position,showOn:e.showOn,offset:e.offset,autoHide:e.autoHide,width:e.width,height:e.height,content:e.content,shared:e.shared,hideDelay:e.hideDelay,showAfter:e.showAfter}},_tooltipShape:function(e){while(e&&!e.options.tooltip)e=e.parent;return e},_updateContent:function(e,t,i){var n=i.content;if(r.isFunction(n))n=n({element:t,target:e});if(n){this.content.html(n);return true}},_position:function(c,h,f,d){var e=h.position;var t=h.offset||0;var i=this.surface;var n=i._instance._elementOffset();var p=i.getSize();var r=i._instance._offset;var a=c.bbox();var o=f.width;var s=f.height;var l=0,u=0;a.origin.translate(n.left,n.top);if(r)a.origin.translate(-r.x,-r.y);if(e=="cursor"&&d){var v=m(d);l=v.x-o/2;u=v.y-s-t}else if(e=="left"){l=a.origin.x-o-t;u=a.center().y-s/2}else if(e=="right"){l=a.bottomRight().x+t;u=a.center().y-s/2}else if(e=="bottom"){l=a.center().x-o/2;u=a.bottomRight().y+t}else{l=a.center().x-o/2;u=a.origin.y-s-t}return{left:g(l,n.left,n.left+p.width),top:g(u,n.top,n.top+p.height)}},show:function(e,t){this._show(e,e,n({},this.options,this._tooltipOptions(e.options.tooltip),t))},hide:function(){var e=this.popup;var t=this._current;delete this._current;clearTimeout(this._showTimeout);if(e&&e.visible()&&t&&!this.surface.trigger("tooltipClose",{element:t.shape,target:t.target,popup:e}))e.close()},_hideClick:function(e){e.preventDefault();this.hide()},_show:function(e,t,i,n,r){var a=this._current;clearTimeout(this._timeout);if(a&&(a.shape===t&&i.shared||a.target===e))return;clearTimeout(this._showTimeout);var o=this.getPopup();if(!this.surface.trigger("tooltipOpen",{element:t,target:e,popup:o})&&this._updateContent(e,t,i)){this._autoHide(i);var s=this._measure(i);if(o.visible())o.close(true);this._current={options:i,elementSize:s,shape:t,target:e,position:this._position(i.shared?t:e,i,s,n)};if(r)this._showTimeout=setTimeout(this._openPopupHandler,i.showAfter||0);else this._openPopup()}},_openPopup:function(){var e=this._current;var t=e.position;this.getPopup().open(t.left,t.top)},_autoHide:function(e){if(e.autoHide&&this._closeButton){this.element.removeClass("k-tooltip-closable");this._closeButton.remove();delete this._closeButton}if(!e.autoHide&&!this._closeButton){this.element.addClass("k-tooltip-closable");this._closeButton=i(u).appendTo(this.element)}},_showEvent:function(e){var t=this._tooltipShape(e.element);if(t){var i=n({},this.options,this._tooltipOptions(t.options.tooltip));if(i&&i.showOn==e.type)this._show(e.element,t,i,e.originalEvent,true)}},_measure:function(e){var t=this.getPopup();var i,n;this.element.css({width:"auto",height:"auto"});var r=t.visible();if(!r)t.wrapper.show();this.element.css({width:a(e.width)?e.width:"auto",height:a(e.height)?e.height:"auto"});i=o(this.element);n=s(this.element);if(!r)t.wrapper.hide();return{width:i,height:n}},_mouseleave:function(e){if(this.popup&&!this._popupRelatedTarget(e.originalEvent)){var t=this;var i=t._current;if(i&&i.options.autoHide)t._timeout=setTimeout(function(){clearTimeout(t._showTimeout);t.hide()},i.options.hideDelay||0)}},_mousemove:function(e){var t=this._current;if(t&&e.element){var i=t.options;if(i.position=="cursor"){var n=this._position(e.element,i,t.elementSize,e.originalEvent);t.position=n;this.getPopup().wrapper.css({left:n.left,top:n.top})}}},_surfaceLeave:function(e){if(this.popup&&!this._popupRelatedTarget(e)){clearTimeout(this._showTimeout);this.hide()}},_popupRelatedTarget:function(e){return e.relatedTarget&&i(e.relatedTarget).closest(this.popup.wrapper).length},_tooltipLeave:function(){var e=this;var t=e._current;if(t&&t.options.autoHide)e._timeout=setTimeout(function(){e.hide()},t.options.hideDelay||0)}});r.drawing.SurfaceTooltip=c})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("drawing/surface.min",["./kendo-drawing.min","./surface-tooltip.min"],function(){var e=window.kendo.jQuery,t=window.kendo,i=t.drawing,n=i.Surface,r=t.ui.Widget,a=t.deepExtend,o=(t.support.svg=n.support.svg,t.support.canvas=n.support.canvas,r.extend({init:function(e,t){r.fn.init.call(this,e,{});this.options=a({},this.options,t);this._instance=n.create(this.element[0],t);if(this._instance.translate)this.translate=s;this._triggerInstanceHandler=this._triggerInstanceEvent.bind(this);this._bindHandler("click");this._bindHandler("mouseenter");this._bindHandler("mouseleave");this._bindHandler("mousemove");this._enableTracking()},options:{name:"Surface",tooltip:{}},events:["click","mouseenter","mouseleave","mousemove","resize","tooltipOpen","tooltipClose"],_triggerInstanceEvent:function(e){this.trigger(e.type,e)},_bindHandler:function(e){this._instance.bind(e,this._triggerInstanceHandler)},draw:function(e){this._instance.draw(e)},clear:function(){if(this._instance)this._instance.clear();this.hideTooltip()},destroy:function(){if(this._instance){this._instance.destroy();delete this._instance}if(this._tooltip){this._tooltip.destroy();delete this._tooltip}r.fn.destroy.call(this)},exportVisual:function(){return this._instance.exportVisual()},eventTarget:function(e){return this._instance.eventTarget(e)},showTooltip:function(e,t){if(this._tooltip)this._tooltip.show(e,t)},hideTooltip:function(){if(this._tooltip)this._tooltip.hide()},suspendTracking:function(){this._instance.suspendTracking();this.hideTooltip()},resumeTracking:function(){this._instance.resumeTracking()},getSize:function(){return{width:this.element.width(),height:this.element.height()}},setSize:function(e){this.element.css({width:e.width,height:e.height});this._size=e;this._instance.currentSize(e);this._resize()},_resize:function(){this._instance.currentSize(this._size);this._instance._resize()},_enableTracking:function(){if(t.ui.Popup)this._tooltip=new i.SurfaceTooltip(this,this.options.tooltip||{})}}));function s(e){this._instance.translate(e)}t.ui.plugin(o),o.create=function(e,t){return new o(e,t)},t.drawing.Surface=o})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("drawing/html.min",["./kendo-drawing.min"],function(){var i=window.kendo.jQuery,e,t=window.kendo.drawing,n=t.drawDOM;t.drawDOM=function(e,t){return n(i(e)[0],t)},t.drawDOM.drawText=t.drawText,t.drawDOM.getFontFaces=t.getFontFaces})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.drawing.min",["./drawing/util.min","./drawing/kendo-drawing.min","./drawing/surface-tooltip.min","./drawing/surface.min","./drawing/html.min"],function(){var e={id:"drawing",name:"Drawing API",category:"framework",description:"The Kendo UI low-level drawing API",depends:["core","color","popup"]}})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/core/kendo-core.min",["kendo.core.min","kendo.drawing.min"],function(){var c=window.kendo.jQuery,d=(window.kendo.dataviz=window.kendo.dataviz||{},kendo.drawing),n=d.util,v=d.Path,g=d.Group,e=kendo.Class,t=kendo.support,h=kendo.geometry,S=h.Rect,p=h.Circle,A=h.transform,M=h.Segment,i=kendo.dataviz,f=kendo.deepExtend,r=kendo.isFunction,a=kendo.getter,_="arc",o="axisLabelClick",l="#000",D="bottom",E="center",I="circle",P=3,B="cross",u="date",O="12px sans-serif",z=400,b=10,L=600,R,F=/\{\d+:?/,V="height",N,H="inside",U="left",j=Number.MAX_VALUE,G=-Number.MAX_VALUE,W="none",q="noteClick",Y="noteHover",$="noteLeave",X="object",K="outside",Q="right",Z="roundedRect",J,ee="string",te="top",ie="triangle",ne,s="#fff",re="width",w="x",x="y",ae,oe={ARC:_,AXIS_LABEL_CLICK:o,BLACK:l,BOTTOM:D,CENTER:E,CIRCLE:I,COORD_PRECISION:P,CROSS:B,DATE:u,DEFAULT_FONT:O,DEFAULT_HEIGHT:z,DEFAULT_PRECISION:b,DEFAULT_WIDTH:L,END:"end",FORMAT_REGEX:F,HEIGHT:V,HIGHLIGHT_ZINDEX:100,INSIDE:H,LEFT:U,MAX_VALUE:j,MIN_VALUE:G,NONE:W,NOTE_CLICK:q,NOTE_HOVER:Y,NOTE_LEAVE:$,OBJECT:X,OUTSIDE:K,RIGHT:Q,ROUNDED_RECT:Z,START:"start",STRING:ee,TOP:te,TRIANGLE:ie,VALUE:"value",WHITE:s,WIDTH:re,X:w,Y:x,DEFAULT_SERIES_OPACITY:1};function se(e){return Array.isArray(e)}function le(e,t){var i=se(t)?t:[t];for(var n=0;n<i.length;n++){var r=i[n];if(e.className.indexOf(r)===-1)e.className+=" "+r}}var ue=/\s+/g;function ce(e,t){if(e&&e.className)e.className=e.className.replace(t,"").replace(ue," ")}function he(e){var t=.5;if(e.options.stroke&&kendo.drawing.util.defined(e.options.stroke.width))if(e.options.stroke.width%2===0)t=0;for(var i=0;i<e.segments.length;i++)e.segments[i].anchor().round(0).translate(t,t);return e}function fe(e,t){return-e.x*t.y+e.y*t.x<0}function de(e){return typeof e==="number"&&!isNaN(e)}function pe(e){return typeof e===ee}function ve(e){return de(e)||pe(e)&&isFinite(e)}function ge(e){return typeof e==="object"}function me(e){if(de(e))return e+"px";return e}var _e=/width|height|top|left|bottom|right/i;function ye(e){return _e.test(e)}function be(e,t){var i=pe(t)?[t]:t;if(se(i)){var n={};var r=window.getComputedStyle(e);for(var a=0;a<i.length;a++){var o=i[a];n[o]=ye(o)?parseFloat(r[o]):r[o]}return n}else if(ge(t))for(var s in t)e.style[s]=me(t[s])}function we(e,t){if(t===void 0)t=0;var i={top:0,right:0,bottom:0,left:0};if(typeof e==="number")i[te]=i[Q]=i[D]=i[U]=e;else{i[te]=e[te]||t;i[Q]=e[Q]||t;i[D]=e[D]||t;i[U]=e[U]||t}return i}var xe={compile:function(e){return e}},ke=e.extend({});function Ce(e){if(e===void 0)e={};var t;if(e.template)e.template=t=ke.compile(e.template);else if(r(e.content))t=e.content;return t}function Se(e,t){var i=e.length;var n=[];for(var r=0;r<i;r++)if(t(e[r]))n.push(e[r]);return n}function Te(e,t){if(e.className){var i=t.split(" ");for(var n=0;n<i.length;n++)if(e.className.indexOf(i[n])!==-1)return true}}ke.register=function(e){xe=e},ke.compile=function(e){return xe.compile(e)};var Ae=function e(){this._map={}};function Me(e,t){if(t)return t.indexOf(e)!==-1}function De(e,t,i){return kendo.drawing.util.round(e+(t-e)*i,P)}Ae.prototype.get=function e(t){return this._map[this._key(t)]},Ae.prototype.set=function e(t,i){this._map[this._key(t)]=i},Ae.prototype._key=function e(t){return t instanceof Date?t.getTime():t};var Ee="trigger",Ie=e.extend({init:function(e,t){this.observer=e;this.handlerMap=f({},this.handlerMap,t)},trigger:function(e,t){var i=this;var n=i.observer;var r=i.handlerMap;var a;if(r[e])a=this.callObserver(r[e],t);else if(n[Ee])a=this.callObserver(Ee,e,t);return a},callObserver:function(e){var t=[],i=arguments.length-1;while(i-- >0)t[i]=arguments[i+1];return this.observer[e].apply(this.observer,t)},requiresHandlers:function(e){var t=this;if(this.observer.requiresHandlers)return this.observer.requiresHandlers(e);for(var i=0;i<e.length;i++)if(t.handlerMap[e[i]])return true}});function Pe(e,t){var i=e.length;var n=[];for(var r=0;r<i;r++){var a=t(e[r]);if(kendo.drawing.util.defined(a))n.push(a)}return n}var Be=t.browser||{};function Oe(e){var t=0;if(e.wheelDelta){t=-e.wheelDelta/120;if(Be.webkit)t=t/(2*Math.max(window.devicePixelRatio,.625))}else if(e.detail)t=e.detail/3;t=t>0?Math.ceil(t):Math.floor(t);return t}var ze=kendo.drawing.util,Le=ze.append,Re=ze.bindEvents,y=ze.defined,Fe=ze.deg,Ve=ze.elementOffset,Ne=ze.elementSize,He=ze.eventCoordinates,Ue=ze.eventElement,je=ze.hashKey,Ge=ze.last,T=ze.limitValue,We=ze.objectKey,qe=ze.rad,k=ze.round,Ye=ze.unbindEvents,$e=ze.valueOrDefault,Xe=e.extend({});function Ke(e,t){var i=e.prototype;if(i.options)i.options=f({},i.options,t);else i.options=t}function Qe(e){var t=j;var i=G;for(var n=0,r=e.length;n<r;n++){var a=e[n];if(a!==null&&isFinite(a)){t=Math.min(t,a);i=Math.max(i,a)}}return{min:t===j?undefined:t,max:i===G?undefined:i}}function Ze(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(t(n,i,e))return n}}Xe.fetchFonts=function(i,n,r){if(r===void 0)r={depth:0};var e=5;if(!i||r.depth>e||!document.fonts)return;Object.keys(i).forEach(function(e){var t=i[e];if(e==="dataSource"||e[0]==="$"||!t)return;if(e==="font")n.push(t);else if(typeof t==="object"){r.depth++;Xe.fetchFonts(t,n,r);r.depth--}})},Xe.loadFonts=function(e,t){var i=[];if(e.length>0&&document.fonts){try{i=e.map(function(e){return document.fonts.load(e)})}catch(e){kendo.logToConsole(e)}Promise.all(i).then(t,t)}else t()},Xe.preloadFonts=function(e,t){var i=[];Xe.fetchFonts(e,i);Xe.loadFonts(i,t)};var Je=h.Matrix,et=/matrix\((.*)\)/;function tt(e){var t=e.match(et);if(t===null||t.length!==2)return Je.unit();var i=t[1].split(",").map(function(e){return parseFloat(e)});return new(Function.prototype.bind.apply(Je,[null].concat(i)))}function it(e){var t=getComputedStyle(e).transform;if(t==="none")return Je.unit();return tt(t)}function nt(e){if(!e)return Je.unit();var t=it(e);var i=e.parentElement;while(i){var n=it(i);t=t.multiplyCopy(n);i=i.parentElement}t.b=t.c=t.e=t.f=0;return t}function rt(e){var t=new kendo.Color(e).isDark();if(t)return s;return l}var at={},ot=e.extend({init:function(e){var t=this;this._index={};this._values=e?e.slice(0):[];for(var i=0;i<this._values.length;i++)t._index[t._values[i]]=i},values:function(){return this._values.filter(function(e){return e!==at})},has:function(e){return this._index[e]!==undefined},add:function(e){if(!this.has(e)){this._index[e]=this._values.length;this._values.push(e)}},delete:function(e){var t=this._index[e];if(t!==undefined){this._values[t]=at;delete this._index[e]}},clear:function(){this._index={};this._values=[]}});if(Object.defineProperties)Object.defineProperties(ot.fn,{size:{get:function(){return this._values.length}}});var st=e.extend({init:function(e){this._set=new Set(e)},values:function(){return Array.from(this._set)},has:function(e){return this._set.has(e)},add:function(e){this._set.add(e)},delete:function(e){this._set.delete(e)},clear:function(){this._set.clear()}});if(Object.defineProperties)Object.defineProperties(st.fn,{size:{get:function(){return this._set.size}}});var lt=function(){var e=false;if(typeof Set==="function"){var t=new Set([1]);e=t.has(1)}return e};function ut(e){if(lt())return new st(e);return new ot(e)}function ct(e){throw e}var ht={INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110};function ft(e,t){var i=k(t-e,b-1);if(i===0){if(t===0)return.1;i=Math.abs(t)}var n=Math.pow(10,Math.floor(Math.log(i)/Math.log(10)));var r=k(i/n,b);var a=1;if(r<1.904762)a=.2;else if(r<4.761904)a=.5;else if(r<9.523809)a=1;else a=2;return k(n*a,b)}var dt=e.extend({init:function(e,t){this.x=e||0;this.y=t||0},clone:function(){return new dt(this.x,this.y)},equals:function(e){return e&&this.x===e.x&&this.y===e.y},rotate:function(e,t){var i=qe(t);var n=Math.cos(i);var r=Math.sin(i);var a=e.x;var o=e.y;var s=this;var l=s.x;var u=s.y;this.x=k(a+(l-a)*n+(u-o)*r,P);this.y=k(o+(u-o)*n-(l-a)*r,P);return this},multiply:function(e){this.x*=e;this.y*=e;return this},distanceTo:function(e){var t=this.x-e.x;var i=this.y-e.y;return Math.sqrt(t*t+i*i)}}),C=(dt.onCircle=function(e,t,i){var n=qe(t);return new dt(e.x-i*Math.cos(n),e.y-i*Math.sin(n))},e.extend({init:function(e,t,i,n){this.x1=e||0;this.y1=t||0;this.x2=i||0;this.y2=n||0},equals:function(e){return this.x1===e.x1&&this.x2===e.x2&&this.y1===e.y1&&this.y2===e.y2},width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1},translate:function(e,t){this.x1+=e;this.x2+=e;this.y1+=t;this.y2+=t;return this},move:function(e,t){var i=this.height();var n=this.width();if(y(e)){this.x1=e;this.x2=this.x1+n}if(y(t)){this.y1=t;this.y2=this.y1+i}return this},wrap:function(e){this.x1=Math.min(this.x1,e.x1);this.y1=Math.min(this.y1,e.y1);this.x2=Math.max(this.x2,e.x2);this.y2=Math.max(this.y2,e.y2);return this},wrapPoint:function(e){var t=se(e);var i=t?e[0]:e.x;var n=t?e[1]:e.y;this.wrap(new C(i,n,i,n));return this},snapTo:function(e,t){if(t===w||!t){this.x1=e.x1;this.x2=e.x2}if(t===x||!t){this.y1=e.y1;this.y2=e.y2}return this},alignTo:function(e,t){var i=this.height();var n=this.width();var r=t===te||t===D?x:w;var a=r===x?i:n;if(t===E){var o=e.center();var s=this.center();this.x1+=o.x-s.x;this.y1+=o.y-s.y}else if(t===te||t===U)this[r+1]=e[r+1]-a;else this[r+1]=e[r+2];this.x2=this.x1+n;this.y2=this.y1+i;return this},shrink:function(e,t){this.x2-=e;this.y2-=t;return this},expand:function(e,t){this.shrink(-e,-t);return this},pad:function(e){var t=we(e);this.x1-=t.left;this.x2+=t.right;this.y1-=t.top;this.y2+=t.bottom;return this},unpad:function(e){var t=we(e);t.left=-t.left;t.top=-t.top;t.right=-t.right;t.bottom=-t.bottom;return this.pad(t)},clone:function(){return new C(this.x1,this.y1,this.x2,this.y2)},center:function(){return new dt(this.x1+this.width()/2,this.y1+this.height()/2)},containsPoint:function(e){return e.x>=this.x1&&e.x<=this.x2&&e.y>=this.y1&&e.y<=this.y2},points:function(){return[new dt(this.x1,this.y1),new dt(this.x2,this.y1),new dt(this.x2,this.y2),new dt(this.x1,this.y2)]},getHash:function(){return[this.x1,this.y1,this.x2,this.y2].join(",")},overlaps:function(e){return!(e.y2<this.y1||this.y2<e.y1||e.x2<this.x1||this.x2<e.x1)},rotate:function(e){var t=this.width();var i=this.height();var n=this.center();var r=n.x;var a=n.y;var o=pt(0,0,r,a,e);var s=pt(t,0,r,a,e);var l=pt(t,i,r,a,e);var u=pt(0,i,r,a,e);t=Math.max(o.x,s.x,l.x,u.x)-Math.min(o.x,s.x,l.x,u.x);i=Math.max(o.y,s.y,l.y,u.y)-Math.min(o.y,s.y,l.y,u.y);this.x2=this.x1+t;this.y2=this.y1+i;return this},toRect:function(){return new S([this.x1,this.y1],[this.width(),this.height()])},hasSize:function(){return this.width()!==0&&this.height()!==0},align:function(e,t,i){var n=t+1;var r=t+2;var a=t===w?re:V;var o=this[a]();if(Me(i,[U,te])){this[n]=e[n];this[r]=this[n]+o}else if(Me(i,[Q,D])){this[r]=e[r];this[n]=this[r]-o}else if(i===E){this[n]=e[n]+(e[a]()-o)/2;this[r]=this[n]+o}}}));function pt(e,t,i,n,r){var a=qe(r);return new dt(i+(e-i)*Math.cos(a)+(t-n)*Math.sin(a),n-(e-i)*Math.sin(a)+(t-n)*Math.cos(a))}var vt=e.extend({init:function(e,t,i,n,r){this.center=e;this.innerRadius=t;this.radius=i;this.startAngle=n;this.angle=r},clone:function(){return new vt(this.center,this.innerRadius,this.radius,this.startAngle,this.angle)},middle:function(){return this.startAngle+this.angle/2},setRadius:function(e,t){if(t)this.innerRadius=e;else this.radius=e;return this},point:function(e,t){var i=qe(e);var n=Math.cos(i);var r=Math.sin(i);var a=t?this.innerRadius:this.radius;var o=k(this.center.x-n*a,P);var s=k(this.center.y-r*a,P);return new dt(o,s)},adjacentBox:function(c,e,t){var i=this.clone().expand(c);var n=i.middle();var r=i.point(n);var a=e/2;var h=t/2;var o=Math.sin(qe(n));var s=Math.cos(qe(n));var l=r.x-a;var u=r.y-h;if(Math.abs(o)<.9)l+=a*-s/Math.abs(s);if(Math.abs(s)<.9)u+=h*-o/Math.abs(o);return new C(l,u,l+e,u+t)},containsPoint:function(e){var t=this.center;var i=this.innerRadius;var n=this.radius;var c=this.startAngle;var h=this.startAngle+this.angle;var r=e.x-t.x;var a=e.y-t.y;var o=new dt(r,a);var s=this.point(c);var l=new dt(s.x-t.x,s.y-t.y);var u=this.point(h);var f=new dt(u.x-t.x,u.y-t.y);var d=k(r*r+a*a,P);return(l.equals(o)||fe(l,o))&&!fe(f,o)&&d>=i*i&&d<=n*n},getBBox:function(){var c=this;var e=new C(j,j,G,G);var t=k(this.startAngle%360);var i=k((t+this.angle)%360);var n=this.innerRadius;var r=[0,90,180,270,t,i].sort(gt);var a=r.indexOf(t);var o=r.indexOf(i);var s;if(t===i)s=r;else if(a<o)s=r.slice(a,o+1);else s=[].concat(r.slice(0,o+1),r.slice(a,r.length));for(var l=0;l<s.length;l++){var u=c.point(s[l]);e.wrapPoint(u);e.wrapPoint(u,n)}if(!n)e.wrapPoint(this.center);return e},expand:function(e){this.radius+=e;return this}});function gt(e,t){return e-t}var mt=vt.extend({init:function(e,t,i,n){vt.fn.init.call(this,e,0,t,i,n)},expand:function(e){return vt.fn.expand.call(this,e)},clone:function(){return new mt(this.center,this.radius,this.startAngle,this.angle)},setRadius:function(e){this.radius=e;return this}}),_t=.001,yt=e.extend({createRing:function(e,t){var i=e.startAngle+180;var n=e.angle+i;if(e.angle>0&&i===n)n+=_t;var r=new h.Point(e.center.x,e.center.y);var a=Math.max(e.radius,0);var o=Math.max(e.innerRadius,0);var s=new h.Arc(r,{startAngle:i,endAngle:n,radiusX:a,radiusY:a});var l=v.fromArc(s,t).close();if(o){s.radiusX=s.radiusY=o;var u=s.pointAt(n);l.lineTo(u.x,u.y);l.arc(n,i,o,o,true)}else l.lineTo(r.x,r.y);return l}}),bt=(yt.current=new yt,e.extend({init:function(e){this.children=[];this.options=f({},this.options,this.initUserOptions(e))},initUserOptions:function(e){return e},reflow:function(e){var t=this.children;var i;for(var n=0;n<t.length;n++){var r=t[n];r.reflow(e);i=i?i.wrap(r.box):r.box.clone()}this.box=i||e},destroy:function(){var e=this.children;if(this.animation)this.animation.destroy();for(var t=0;t<e.length;t++)e[t].destroy()},getRoot:function(){var e=this.parent;return e?e.getRoot():null},getSender:function(){var e=this.getService();if(e)return e.sender},getService:function(){var e=this;while(e){if(e.chartService)return e.chartService;e=e.parent}},translateChildren:function(e,t){var i=this.children;var n=i.length;for(var r=0;r<n;r++)i[r].box.translate(e,t)},append:function(){var e=arguments;var t=this;for(var i=0;i<arguments.length;i++){var n=e[i];t.children.push(n);n.parent=t}},renderVisual:function(){if(this.options.visible===false)return;this.createVisual();this.addVisual();this.renderChildren();this.createAnimation();this.renderComplete()},addVisual:function(){if(this.visual){this.visual.chartElement=this;if(this.parent)this.parent.appendVisual(this.visual)}},renderChildren:function(){var e=this.children;var t=e.length;for(var i=0;i<t;i++)e[i].renderVisual()},createVisual:function(){this.visual=new g({zIndex:this.options.zIndex,visible:$e(this.options.visible,true)})},createAnimation:function(){if(this.visual&&this.options.animation)this.animation=d.Animation.create(this.visual,this.options.animation)},appendVisual:function(e){if(!e.chartElement)e.chartElement=this;if(e.options.noclip)this.clipRoot().visual.append(e);else if(y(e.options.zIndex))this.stackRoot().stackVisual(e);else if(this.isStackRoot)this.stackVisual(e);else if(this.visual)this.visual.append(e);else this.parent.appendVisual(e)},clipRoot:function(){if(this.parent)return this.parent.clipRoot();return this},stackRoot:function(){if(this.parent)return this.parent.stackRoot();return this},stackVisual:function(e){var t=e.options.zIndex||0;var i=this.visual.children;var n=i.length;var r;for(r=0;r<n;r++){var a=i[r];var o=$e(a.options.zIndex,0);if(o>t)break}this.visual.insert(r,e)},traverse:function(e){var t=this.children;var i=t.length;for(var n=0;n<i;n++){var r=t[n];e(r);if(r.traverse)r.traverse(e)}},closest:function(e){var t=this;var i=false;while(t&&!i){i=e(t);if(!i)t=t.parent}if(i)return t},renderComplete:function(){},hasHighlight:function(){var e=(this.options||{}).highlight;return!(!this.createHighlight||e&&e.visible===false)},toggleHighlight:function(e,t){var i=this;var n=(this.options||{}).highlight||{};var r=n.visual;var a=this._highlight;if(!a){var o={fill:{color:s,opacity:t||.2},stroke:{color:s,width:1,opacity:t||.2}};if(r){a=this._highlight=r(c.extend(this.highlightVisualArgs(),{createVisual:function(){return i.createHighlight(o)},sender:this.getSender(),series:this.series,dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,runningTotal:this.runningTotal,total:this.total}));if(!a)return}else a=this._highlight=this.createHighlight(o);if(!y(a.options.zIndex))a.options.zIndex=$e(n.zIndex,this.options.zIndex);this.appendVisual(a)}a.visible(e)},createGradientOverlay:function(e,t,i){var n=new v(c.extend({stroke:{color:"none"},fill:this.createGradient(i),closed:e.options.closed},t));n.segments.elements(e.segments.elements());return n},createGradient:function(e){if(this.parent)return this.parent.createGradient(e)},supportsPointInactiveOpacity:function(){return true}})),wt=(bt.prototype.options={},bt.extend({init:function(e){bt.fn.init.call(this,e);this.options.margin=we(this.options.margin);this.options.padding=we(this.options.padding)},reflow:function(e){var t=this;var i=this.options;var n=i.width;var r=i.height;var c=i.shrinkToFit;var h=n&&r;var a=i.margin;var o=i.padding;var s=i.border.width;var l;var f=function(){t.align(e,w,i.align);t.align(e,x,i.vAlign);t.paddingBox=l.clone().unpad(a).unpad(s)};var u=e.clone();if(h){u.x2=u.x1+n;u.y2=u.y1+r}if(c)u.unpad(a).unpad(s).unpad(o);bt.fn.reflow.call(this,u);if(h)l=this.box=new C(0,0,n,r);else l=this.box;if(c&&h){f();u=this.contentBox=this.paddingBox.clone().unpad(o)}else{u=this.contentBox=l.clone();l.pad(o).pad(s).pad(a);f()}this.translateChildren(l.x1-u.x1+a.left+s+o.left,l.y1-u.y1+a.top+s+o.top);var d=this.children;for(var p=0;p<d.length;p++){var v=d[p];v.reflow(v.box)}},align:function(e,t,i){this.box.align(e,t,i)},hasBox:function(){var e=this.options;return e.border.width||e.background},createVisual:function(){bt.fn.createVisual.call(this);var e=this.options;if(e.visible&&this.hasBox())this.visual.append(v.fromRect(this.paddingBox.toRect(),this.visualStyle()))},visualStyle:function(){var e=this.options;var t=e.border||{};return{stroke:{width:t.width,color:t.color,opacity:$e(t.opacity,e.opacity),dashType:t.dashType},fill:{color:e.background,opacity:e.opacity},cursor:e.cursor}}})),xt=(Ke(wt,{align:U,vAlign:te,margin:{},padding:{},border:{color:l,width:0},background:"",shrinkToFit:false,width:0,height:0,visible:true}),wt.extend({init:function(e,t){wt.fn.init.call(this,e);this.pointData=t},getElement:function(){var e=this;var t=e.options;var i=e.paddingBox;var n=t.type;var r=t.rotation;var a=i.center();var o=i.width()/2;var c=i.height()/2;if(!t.visible||!this.hasBox())return null;var s=this.visualStyle();var l;if(n===I)l=new d.Circle(new p([k(i.x1+o,P),k(i.y1+c,P)],Math.min(o,c)),s);else if(n===ie)l=v.fromPoints([[i.x1+o,i.y1],[i.x1,i.y2],[i.x2,i.y2]],s).close();else if(n===B){l=new d.MultiPath(s);l.moveTo(i.x1,i.y1).lineTo(i.x2,i.y2);l.moveTo(i.x1,i.y2).lineTo(i.x2,i.y1)}else{var u=i.toRect();if(n===Z){var h=$e(t.borderRadius,u.width()/5);u.setCornerRadius(h)}l=v.fromRect(u,s)}if(r)l.transform(A().rotate(-r,[a.x,a.y]));l.options.zIndex=t.zIndex;return l},createElement:function(){var e=this;var t=this.options.visual;var i=this.pointData||{};var n;if(t)n=t({value:i.value,dataItem:i.dataItem,sender:this.getSender(),series:i.series,category:i.category,rect:this.paddingBox.toRect(),options:this.visualOptions(),createVisual:function(){return e.getElement()}});else n=this.getElement();return n},visualOptions:function(){var e=this.options;return{background:e.background,border:e.border,margin:e.margin,padding:e.padding,type:e.type,size:e.width,visible:e.visible}},createVisual:function(){this.visual=this.createElement()}}));Ke(xt,{type:I,align:E,vAlign:E});var kt,Ct="radial",St={glass:{type:"linear",rotation:0,stops:[{offset:0,color:s,opacity:0},{offset:.25,color:s,opacity:.3},{offset:1,color:s,opacity:0}]},sharpBevel:{type:Ct,stops:[{offset:0,color:s,opacity:.55},{offset:.65,color:s,opacity:0},{offset:.95,color:s,opacity:.25}]},roundedBevel:{type:Ct,stops:[{offset:.33,color:s,opacity:.06},{offset:.83,color:s,opacity:.2},{offset:.95,color:s,opacity:0}]},roundedGlass:{type:Ct,supportVML:false,stops:[{offset:0,color:s,opacity:0},{offset:.5,color:s,opacity:.3},{offset:.99,color:s,opacity:0}]},sharpGlass:{type:Ct,supportVML:false,stops:[{offset:0,color:s,opacity:.2},{offset:.15,color:s,opacity:.15},{offset:.17,color:s,opacity:.35},{offset:.85,color:s,opacity:.05},{offset:.87,color:s,opacity:.15},{offset:.99,color:s,opacity:0}]},bubbleShadow:{type:Ct,center:[.5,.5],radius:.5}};function Tt(e,t){if(e.x1===t.x1&&e.y1===t.y1&&e.x2===t.x2&&e.y2===t.y2)return t;var i=Math.min(e.x1,t.x1);var n=Math.max(e.x1,t.x1);var r=Math.min(e.x2,t.x2);var a=Math.max(e.x2,t.x2);var o=Math.min(e.y1,t.y1);var s=Math.max(e.y1,t.y1);var l=Math.min(e.y2,t.y2);var c=Math.max(e.y2,t.y2);var u=[];u[0]=new C(n,o,r,s);u[1]=new C(i,s,n,l);u[2]=new C(r,s,a,l);u[3]=new C(n,l,r,c);if(e.x1===i&&e.y1===o||t.x1===i&&t.y1===o){u[4]=new C(i,o,n,s);u[5]=new C(r,l,a,c)}else{u[4]=new C(r,o,a,s);u[5]=new C(i,l,n,c)}return Se(u,function(e){return e.height()>0&&e.width()>0})[0]}var At=bt.extend({init:function(e){bt.fn.init.call(this,e);var t=this.options;t.width=parseInt(t.width,10);t.height=parseInt(t.height,10);this.gradients={}},reflow:function(){var e=this;var t=e.options;var i=e.children;var n=new C(0,0,t.width,t.height);this.box=n.unpad(t.margin);for(var r=0;r<i.length;r++){i[r].reflow(n);n=Tt(n,i[r].box)||new C}},createVisual:function(){this.visual=new g;this.createBackground()},createBackground:function(){var e=this.options;var t=e.border||{};var i=this.box.clone().pad(e.margin).unpad(t.width);var n=v.fromRect(i.toRect(),{stroke:{color:t.width?t.color:"",width:t.width,dashType:t.dashType},fill:{color:e.background,opacity:e.opacity},zIndex:-10});this.visual.append(n)},getRoot:function(){return this},createGradient:function(e){var t=this.gradients;var i=We(e);var n=St[e.gradient];var r;if(t[i])r=t[i];else{var a=c.extend({},n,e);if(n.type==="linear")r=new d.LinearGradient(a);else{if(e.innerRadius)a.stops=Mt(a);r=new d.RadialGradient(a);r.supportVML=n.supportVML!==false}t[i]=r}return r},cleanGradients:function(){var e=this.gradients;for(var t in e)e[t]._observers=[]},size:function(){var e=this.options;return new C(0,0,e.width,e.height)}});function Mt(e){var t=e.stops;var i=e.innerRadius/e.radius*100;var n=t.length;var r=[];for(var a=0;a<n;a++){var o=c.extend({},t[a]);o.offset=(o.offset*(100-i)+i)/100;r.push(o)}return r}Ke(At,{width:L,height:z,background:s,border:{color:l,width:0},margin:we(5),zIndex:-2});var Dt=bt.extend({init:function(e){bt.fn.init.call(this,e);this._initDirection()},_initDirection:function(){var e=this.options;if(e.vertical){this.groupAxis=w;this.elementAxis=x;this.groupSizeField=re;this.elementSizeField=V;this.groupSpacing=e.spacing;this.elementSpacing=e.vSpacing}else{this.groupAxis=x;this.elementAxis=w;this.groupSizeField=V;this.elementSizeField=re;this.groupSpacing=e.vSpacing;this.elementSpacing=e.spacing}},reflow:function(e){this.box=e.clone();this.reflowChildren()},reflowChildren:function(){var e=this;var t=this;var i=t.box;var n=t.elementAxis;var r=t.groupAxis;var c=t.elementSizeField;var a=t.groupSizeField;var o=this.groupOptions();var h=o.groups;var f=o.groupsSize;var d=o.maxGroupElementsSize;var p=h.length;var s=i[r+1]+this.alignStart(f,i[a]());if(p){var v=s;for(var g=0;g<p;g++){var m=h[g];var _=m.groupElements;var y=i[n+1];var b=_.length;for(var w=0;w<b;w++){var x=_[w];var l=e.elementSize(x);var k=v+e.alignStart(l[a],m.groupSize);var u=new C;u[r+1]=k;u[r+2]=k+l[a];u[n+1]=y;u[n+2]=y+l[c];x.reflow(u);y+=l[c]+e.elementSpacing}v+=m.groupSize+e.groupSpacing}i[r+1]=s;i[r+2]=s+f;i[n+2]=i[n+1]+d}},alignStart:function(e,t){var i=0;var n=this.options.align;if(n===Q||n===D)i=t-e;else if(n===E)i=(t-e)/2;return i},groupOptions:function(){var c=this;var e=this;var h=e.box;var f=e.children;var t=e.elementSizeField;var d=e.groupSizeField;var p=e.elementSpacing;var v=e.groupSpacing;var g=k(h[t]());var m=f.length;var i=[];var n=0;var r=0;var a=0;var o=0;var s=[];for(var l=0;l<m;l++){var u=f[l];if(!u.box)u.reflow(h);var _=c.elementSize(u);if(c.options.wrap&&k(r+p+_[t])>g){i.push({groupElements:s,groupSize:n,groupElementsSize:r});o=Math.max(o,r);a+=v+n;n=0;r=0;s=[]}n=Math.max(n,_[d]);if(r>0)r+=p;r+=_[t];s.push(u)}i.push({groupElements:s,groupSize:n,groupElementsSize:r});o=Math.max(o,r);a+=n;return{groups:i,groupsSize:a,maxGroupElementsSize:o}},elementSize:function(e){return{width:e.box.width(),height:e.box.height()}},createVisual:function(){}}),Et=(Ke(Dt,{vertical:true,wrap:true,vSpacing:0,spacing:0}),d.Text),It=bt.extend({init:function(e,t){bt.fn.init.call(this,t);this.content=e;this.reflow(new C)},reflow:function(e){var t=this.options;var i=t.size=n.measureText(this.content,{font:t.font});this.baseline=i.baseline;this.box=new C(e.x1,e.y1,e.x1+i.width,e.y1+i.height)},createVisual:function(){var e=this.options;var t=e.font;var i=e.color;var n=e.opacity;var r=e.cursor;this.visual=new Et(this.content,this.box.toRect().topLeft(),{font:t,fill:{color:i,opacity:n},cursor:r})}});function Pt(e){var t=e.origin;var i=e.bottomRight();return new C(t.x,t.y,i.x,i.y)}Ke(It,{font:O,color:l});var Bt=/\n/m,Ot=wt.extend({init:function(e,t,i){wt.fn.init.call(this,t);this.content=e;this.data=i;this._initContainer();if(this.options._autoReflow!==false)this.reflow(new C)},_initContainer:function(){var e=this.options;var t=String(this.content).split(Bt);var i=new Dt({vertical:true,align:e.align,wrap:false});var n=f({},e,{opacity:1,animation:null});this.container=i;this.append(i);for(var r=0;r<t.length;r++){var a=new It(t[r].trim(),n);i.append(a)}},reflow:function(e){var t=this.options;var i=t.visual;this.container.options.align=t.align;if(i&&!this._boxReflow){var n=e;if(!n.hasSize()){this._boxReflow=true;this.reflow(n);this._boxReflow=false;n=this.box}var r=this.visual=i(this.visualContext(n));if(r){n=Pt(r.clippedBBox()||new S);r.options.zIndex=t.zIndex}this.box=this.contentBox=this.paddingBox=n}else{wt.fn.reflow.call(this,e);if(t.rotation){var a=we(t.margin);var o=this.box.unpad(a);this.targetBox=e;this.normalBox=o.clone();o=this.rotate();o.translate(a.left-a.right,a.top-a.bottom);this.rotatedBox=o.clone();o.pad(a)}}},createVisual:function(){var e=this.options;this.visual=new g({transform:this.rotationTransform(),zIndex:e.zIndex,noclip:e.noclip});if(this.hasBox()){var t=v.fromRect(this.paddingBox.toRect(),this.visualStyle());this.visual.append(t)}},renderVisual:function(){if(!this.options.visible)return;if(this.options.visual){var e=this.visual;if(e&&!y(e.options.noclip))e.options.noclip=this.options.noclip;this.addVisual();this.createAnimation()}else wt.fn.renderVisual.call(this)},visualContext:function(e){var t=this;var i={text:this.content,rect:e.toRect(),sender:this.getSender(),options:this.options,createVisual:function(){t._boxReflow=true;t.reflow(e);t._boxReflow=false;return t.getDefaultVisual()}};if(this.data)c.extend(i,this.data);return i},getDefaultVisual:function(){this.createVisual();this.renderChildren();var e=this.visual;delete this.visual;return e},rotate:function(){var e=this.options;this.box.rotate(e.rotation);this.align(this.targetBox,w,e.align);this.align(this.targetBox,x,e.vAlign);return this.box},rotationTransform:function(){var e=this.options.rotation;if(!e)return null;var t=this.normalBox.center();var i=t.x;var n=t.y;var r=this.rotatedBox.center();return A().translate(r.x-i,r.y-n).rotate(e,[i,n])}}),zt=bt.extend({init:function(e){bt.fn.init.call(this,e);this.append(new Ot(this.options.text,c.extend({},this.options,{vAlign:this.options.position})))},reflow:function(e){bt.fn.reflow.call(this,e);this.box.snapTo(e,w)}}),Lt=(zt.buildTitle=function(e,t,i){var n=e;if(typeof e==="string")n={text:e};n=c.extend({visible:true},i,n);var r;if(n&&n.visible&&n.text){r=new zt(n);t.append(r)}return r},Ke(zt,{color:l,position:te,align:E,margin:we(5),padding:we(5)}),Ot.extend({init:function(e,t,i,n,r){Ot.fn.init.call(this,t,r);this.text=t;this.value=e;this.index=i;this.dataItem=n;this.reflow(new C)},visualContext:function(e){var t=Ot.fn.visualContext.call(this,e);t.value=this.value;t.dataItem=this.dataItem;t.format=this.options.format;t.culture=this.options.culture;return t},click:function(e,t){e.trigger(o,{element:Ue(t),value:this.value,text:this.text,index:this.index,dataItem:this.dataItem,axis:this.parent.options})},rotate:function(){if(this.options.alignRotation!==E){var e=this.normalBox.toRect();var t=this.rotationTransform();this.box=Pt(e.bbox(t.matrix()))}else Ot.fn.rotate.call(this);return this.box},rotationTransform:function(){var c=this.options;var h=c.rotation;if(!h)return null;if(c.alignRotation===E)return Ot.fn.rotationTransform.call(this);var e=A().rotate(h).matrix();var t=this.normalBox.toRect();var i=this.targetBox.toRect();var n=c.rotationOrigin||te;var r=n===te||n===D?w:x;var a=n===te||n===D?x:w;var f=n===te||n===U?i.origin:i.bottomRight();var o=t.topLeft().transformCopy(e);var s=t.topRight().transformCopy(e);var d=t.bottomRight().transformCopy(e);var p=t.bottomLeft().transformCopy(e);var v=S.fromPoints(o,s,d,p);var l={};l[a]=i.origin[a]-v.origin[a];var g=Math.abs(o[a]+l[a]-f[a]);var m=Math.abs(s[a]+l[a]-f[a]);var u,_;if(k(g,b)===k(m,b)){u=o;_=s}else if(m<g){u=s;_=d}else{u=o;_=p}var y=u[r]+(_[r]-u[r])/2;l[r]=i.center()[r]-y;return A().translate(l.x,l.y).rotate(h)}})),Rt=(Ke(Lt,{_autoReflow:false}),7),Ft="#fff",Vt=wt.extend({init:function(e,t,i){wt.fn.init.call(this,t);this.fields=e;this.chartService=i;this.render()},hide:function(){this.options.visible=false},show:function(){this.options.visible=true},render:function(){var c=this;var e=this.options;if(e.visible){var t=e.label;var i=e.icon;var n=new C;var r=function(){return c};var a=i.size;var o=this.fields.text;var s,l;if(y(t)&&t.visible){var h=Ce(t);if(h)o=h(this.fields);else if(t.format)o=this.chartService.format.auto(t.format,o);if(!t.color)t.color=t.position===H?Ft:i.background;this.label=new Ot(o,f({},t));this.label.aliasFor=r;if(t.position===H&&!y(a)){if(i.type===I)a=Math.max(this.label.box.width(),this.label.box.height());else{s=this.label.box.width();l=this.label.box.height()}n.wrap(this.label.box)}}i.width=s||a||Rt;i.height=l||a||Rt;var u=new xt(f({},i));u.aliasFor=r;this.marker=u;this.append(u);if(this.label)this.append(this.label);u.reflow(new C);this.wrapperBox=n.wrap(u.box)}},reflow:function(e){var t=this;var i=t.options;var n=t.label;var c=t.marker;var r=t.wrapperBox;var a=e.center();var h=i.line.length;var o=i.position;if(i.visible){var s,l,u;if(Me(o,[U,Q]))if(o===U){u=r.alignTo(e,o).translate(-h,e.center().y-r.center().y);if(i.line.visible){s=[e.x1,a.y];this.linePoints=[s,[u.x2,a.y]];l=u.clone().wrapPoint(s)}}else{u=r.alignTo(e,o).translate(h,e.center().y-r.center().y);if(i.line.visible){s=[e.x2,a.y];this.linePoints=[s,[u.x1,a.y]];l=u.clone().wrapPoint(s)}}else if(o===D){u=r.alignTo(e,o).translate(e.center().x-r.center().x,h);if(i.line.visible){s=[a.x,e.y2];this.linePoints=[s,[a.x,u.y1]];l=u.clone().wrapPoint(s)}}else{u=r.alignTo(e,o).translate(e.center().x-r.center().x,-h);if(i.line.visible){s=[a.x,e.y1];this.linePoints=[s,[a.x,u.y2]];l=u.clone().wrapPoint(s)}}if(c)c.reflow(u);if(n){n.reflow(u);if(c){if(i.label.position===K)n.box.alignTo(c.box,o);n.reflow(n.box)}}this.contentBox=u;this.targetBox=e;this.box=l||u}},createVisual:function(){wt.fn.createVisual.call(this);this.visual.options.noclip=this.options.noclip;if(this.options.visible)this.createLine()},renderVisual:function(){var t=this;var e=this.options;var i=e.visual;if(e.visible&&i){this.visual=i(c.extend(this.fields,{sender:this.getSender(),rect:this.targetBox.toRect(),options:{background:e.background,border:e.background,icon:e.icon,label:e.label,line:e.line,position:e.position,visible:e.visible},createVisual:function(){t.createVisual();t.renderChildren();var e=t.visual;delete t.visual;return e}}));this.addVisual()}else wt.fn.renderVisual.call(this)},createLine:function(){var e=this.options.line;if(this.linePoints){var t=v.fromPoints(this.linePoints,{stroke:{color:e.color,width:e.width,dashType:e.dashType}});he(t);this.visual.append(t)}},click:function(e,t){var i=this.eventArgs(t);if(!e.trigger(q,i))t.preventDefault()},over:function(e,t){var i=this.eventArgs(t);if(!e.trigger(Y,i))t.preventDefault()},out:function(e,t){var i=this.eventArgs(t);e.trigger($,i)},eventArgs:function(e){var t=this.options;return c.extend(this.fields,{element:Ue(e),text:y(t.label)?t.label.text:"",visual:this.visual})}});Ke(Vt,{icon:{visible:true,type:I},label:{position:H,visible:true,align:E,vAlign:E},line:{visible:true},visible:true,position:te,zIndex:2});var Nt,Ht={format:function(e,t){return t},toString:function(e){return e},parseDate:function(e){return new Date(e)},firstDay:function(){return 0}},Ut=e.extend({});if(Ut.register=function(e){Ht=e},Object.defineProperties)Object.defineProperties(Ut,{implementation:{get:function(){return Ht}}});var jt=/\{(\d+)(:[^\}]+)?\}/g,Gt=e.extend({init:function(e){this._intlService=e},auto:function(e){var t=[],i=arguments.length-1;while(i-- >0)t[i]=arguments[i+1];var n=this.intl;if(pe(e)&&e.match(F))return n.format.apply(n,[e].concat(t));return n.toString(t[0],e)},localeAuto:function(e,r,a){var o=this.intl;var t;if(pe(e)&&e.match(F))t=e.replace(jt,function(e,t,i){var n=r[parseInt(t,10)];return o.toString(n,i?i.substring(1):"",a)});else t=o.toString(r[0],e,a);return t}});if(Object.defineProperties)Object.defineProperties(Gt.fn,{intl:{get:function(){return this._intlService||Ut.implementation},set:function(e){this._intlService=e}}});var Wt=e.extend({init:function(e,t){if(t===void 0)t={};this._intlService=t.intlService;this.sender=t.sender||e;this.format=new Gt(t.intlService);this.chart=e;this.rtl=Boolean(t.rtl)},notify:function(e,t){if(this.chart)this.chart.trigger(e,t)},isPannable:function(e){var t=((this.chart||{}).options||{}).pannable;return t&&t.lock!==e}}),qt;if(Object.defineProperties)Object.defineProperties(Wt.fn,{intl:{get:function(){return this._intlService||Ut.implementation},set:function(e){this._intlService=e;this.format.intl=e}}});var Yt=e.extend({}),$t=(Yt.register=function(e){qt=e},Yt.create=function(e,t){if(qt)return qt.create(e,t)},{ChartService:Wt,DomEventsBuilder:Yt,FormatService:Gt,IntlService:Ut,TemplateService:ke});function Xt(e,t){var i=e.tickX;var n=e.tickY;var r=e.position;var a=new v({stroke:{width:t.width,color:t.color}});if(e.vertical)a.moveTo(i,r).lineTo(i+t.size,r);else a.moveTo(r,n).lineTo(r,n+t.size);he(a);return a}function Kt(e,t){var i=e.lineStart;var n=e.lineEnd;var r=e.position;var a=new v({stroke:{width:t.width,color:t.color,dashType:t.dashType}});if(e.vertical)a.moveTo(i,r).lineTo(n,r);else a.moveTo(r,i).lineTo(r,n);he(a);return a}var Qt=bt.extend({init:function(e,t){if(t===void 0)t=new Wt;bt.fn.init.call(this,e);this.chartService=t;if(!this.options.visible)this.options=f({},this.options,{labels:{visible:false},line:{visible:false},margin:0,majorTickSize:0,minorTickSize:0});this.options.minorTicks=f({},{color:this.options.line.color,width:this.options.line.width,visible:this.options.minorTickType!==W},this.options.minorTicks,{size:this.options.minorTickSize,align:this.options.minorTickType});this.options.majorTicks=f({},{color:this.options.line.color,width:this.options.line.width,visible:this.options.majorTickType!==W},this.options.majorTicks,{size:this.options.majorTickSize,align:this.options.majorTickType});this.initFields();if(!this.options._deferLabels)this.createLabels();this.createTitle();this.createNotes()},initFields:function(){},labelsRange:function(){return{min:this.options.labels.skip,max:this.labelsCount()}},normalizeLabelRotation:function(e){var t=e.rotation;if(ge(t)){e.alignRotation=t.align;e.rotation=t.angle}},createLabels:function(){var e=this;var t=this.options;var i=t.vertical?Q:E;var n=f({},t.labels,{align:i,zIndex:t.zIndex});var r=Math.max(1,n.step);this.clearLabels();if(n.visible){this.normalizeLabelRotation(n);if(n.rotation==="auto"){n.rotation=0;t.autoRotateLabels=true}var a=this.labelsRange();for(var o=a.min;o<a.max;o+=r){var s={index:o,count:a.max};var l=e.createAxisLabel(o,n,s);if(l){e.append(l);e.labels.push(l)}}}},clearLabels:function(){this.children=Se(this.children,function(e){return!(e instanceof Lt)});this.labels=[]},clearTitle:function(){var t=this;if(this.title){this.children=Se(this.children,function(e){return e!==t.title});this.title=undefined}},clear:function(){this.clearLabels();this.clearTitle()},lineBox:function(){var e=this;var t=e.options;var i=e.box;var n=t.vertical;var r=t.labels.mirror;var a=r?i.x1:i.x2;var o=r?i.y2:i.y1;var s=t.line.width||0;return n?new C(a,i.y1,a,i.y2-s):new C(i.x1,o,i.x2-s,o)},createTitle:function(){var e=this.options;var t=f({rotation:e.vertical?-90:0,text:"",zIndex:1,visualSize:true},e.title);if(t.visible&&t.text){var i=new Ot(t.text,t);this.append(i);this.title=i}},createNotes:function(){var e=this;var t=this.options;var i=t.notes;var n=i.data||[];this.notes=[];for(var r=0;r<n.length;r++){var a=f({},i,n[r]);a.value=e.parseNoteValue(a.value);var o=new Vt({value:a.value,text:a.label.text,dataItem:a},a,e.chartService);if(o.options.visible){if(y(o.options.position)){if(t.vertical&&!Me(o.options.position,[U,Q]))o.options.position=t.reverse?U:Q;else if(!t.vertical&&!Me(o.options.position,[te,D]))o.options.position=t.reverse?D:te}else if(t.vertical)o.options.position=t.reverse?U:Q;else o.options.position=t.reverse?D:te;e.append(o);e.notes.push(o)}}},parseNoteValue:function(e){return e},renderVisual:function(){bt.fn.renderVisual.call(this);this.createPlotBands()},createVisual:function(){bt.fn.createVisual.call(this);this.createBackground();this.createLine()},gridLinesVisual:function(){var e=this._gridLines;if(!e){e=this._gridLines=new g({zIndex:-2});this.appendVisual(this._gridLines)}return e},createTicks:function(o){var e=this.options;var s=this.lineBox();var l=e.labels.mirror;var t=e.majorTicks.visible?e.majorUnit:0;var u={vertical:e.vertical};function i(e,t,i){var n=e.length;var r=Math.max(1,t.step);if(t.visible)for(var a=t.skip;a<n;a+=r){if(y(i)&&a%i===0)continue;u.tickX=l?s.x2:s.x2-t.size;u.tickY=l?s.y1-t.size:s.y1;u.position=e[a];o.append(Xt(u,t))}}i(this.getMajorTickPositions(),e.majorTicks);i(this.getMinorTickPositions(),e.minorTicks,t/e.minorUnit)},createLine:function(){var e=this.options;var t=e.line;var i=this.lineBox();if(t.width>0&&t.visible){var n=new v({stroke:{width:t.width,color:t.color,dashType:t.dashType}});n.moveTo(i.x1,i.y1).lineTo(i.x2,i.y2);if(e._alignLines)he(n);var r=this._lineGroup=new g;r.append(n);this.visual.append(r);this.createTicks(r)}},getActualTickSize:function(){var e=this.options;var t=0;if(e.majorTicks.visible&&e.minorTicks.visible)t=Math.max(e.majorTicks.size,e.minorTicks.size);else if(e.majorTicks.visible)t=e.majorTicks.size;else if(e.minorTicks.visible)t=e.minorTicks.size;return t},createBackground:function(){var e=this;var t=e.options;var i=e.box;var n=t.background;if(n){this._backgroundPath=v.fromRect(i.toRect(),{fill:{color:n},stroke:null});this.visual.append(this._backgroundPath)}},createPlotBands:function(){var t=this;var e=this.options;var i=e.plotBands||[];var c=e.vertical;var h=this.plotArea;if(i.length===0)return;var n=this._plotbandGroup=new g({zIndex:-1});var f=Se(this.pane.axes,function(e){return e.options.vertical!==t.options.vertical})[0];for(var r=0;r<i.length;r++){var a=i[r];var o=void 0,s=void 0;var l=a.label;var u=void 0;if(c){o=(f||h.axisX).lineBox();s=t.getSlot(a.from,a.to,true)}else{o=t.getSlot(a.from,a.to,true);s=(f||h.axisY).lineBox()}if(l){l.vAlign=l.position||U;u=t.createPlotBandLabel(l,a,new C(o.x1,s.y1,o.x2,s.y2))}if(o.width()!==0&&s.height()!==0){var d=new S([o.x1,s.y1],[o.width(),s.height()]);var p=v.fromRect(d,{fill:{color:a.color,opacity:a.opacity},stroke:null});n.append(p);if(u)n.append(u)}}this.appendVisual(n)},createPlotBandLabel:function(e,t,i){if(e.visible===false)return null;var n=e.text;var r;if(y(e)&&e.visible){var a=Ce(e);if(a)n=a({text:n,item:t});else if(e.format)n=this.chartService.format.auto(e.format,n);if(!e.color)e.color=this.options.labels.color}r=new Ot(n,e);r.reflow(i);r.renderVisual();return r.visual},createGridLines:function(e){var t=this.options;var i=t.minorGridLines;var n=t.majorGridLines;var c=t.minorUnit;var r=t.vertical;var h=e.options.line.visible;var f=n.visible?t.majorUnit:0;var a=e.lineBox();var d=a[r?"y1":"x1"];var s={lineStart:a[r?"x1":"y1"],lineEnd:a[r?"x2":"y2"],vertical:r};var l=[];var u=this.gridLinesVisual();function o(e,t,i){var n=e.length;var r=Math.max(1,t.step);if(t.visible)for(var a=t.skip;a<n;a+=r){var o=k(e[a]);if(!Me(o,l))if(a%i!==0&&(!h||d!==o)){s.position=o;u.append(Kt(s,t));l.push(o)}}}o(this.getMajorTickPositions(),n);o(this.getMinorTickPositions(),i,f/c);return u.children},reflow:function(e){var t=this;var i=t.options;var n=t.labels;var r=t.title;var a=i.vertical;var c=n.length;var o=a?re:V;var h=r?r.box[o]():0;var s=this.getActualTickSize()+i.margin+h;var f=(this.getRoot()||{}).box||e;var d=f[o]();var l=0;for(var u=0;u<c;u++){var p=n[u].box[o]();if(p+s<=d)l=Math.max(l,p)}if(a)this.box=new C(e.x1,e.y1,e.x1+l+s,e.y2);else this.box=new C(e.x1,e.y1,e.x2,e.y1+l+s);this.arrangeTitle();this.arrangeLabels();this.arrangeNotes()},getLabelsTickPositions:function(){return this.getMajorTickPositions()},labelTickIndex:function(e){return e.index},arrangeLabels:function(){var e=this;var t=this;var i=t.options;var n=t.labels;var c=this.labelsBetweenTicks();var h=i.vertical;var f=i.labels.mirror;var d=this.getLabelsTickPositions();for(var r=0;r<n.length;r++){var a=n[r];var p=e.labelTickIndex(a);var o=h?a.box.height():a.box.width();var s=d[p];var v=d[p+1];var l=void 0,u=void 0;if(h){if(c){var g=s+(v-s)/2;l=g-o/2}else l=s-o/2;u=l}else if(c){l=s;u=v}else{l=s-o/2;u=l+o}e.positionLabel(a,f,l,u)}},positionLabel:function(e,t,i,n){if(n===void 0)n=i;var r=this.options;var c=r.vertical;var a=this.lineBox();var o=this.getActualTickSize()+r.margin;var s;if(c){var l=a.x2;if(t){l+=o;e.options.rotationOrigin=U}else{l-=o+e.box.width();e.options.rotationOrigin=Q}s=e.box.move(l,i)}else{var u=a.y1;if(t){u-=o+e.box.height();e.options.rotationOrigin=D}else{u+=o;e.options.rotationOrigin=te}s=new C(i,u,n,u+e.box.height())}e.reflow(s)},autoRotateLabelAngle:function(e,t){if(e.width()<t)return 0;if(e.height()>t)return-90;return-45},autoRotateLabels:function(){var e=this;if(!this.options.autoRotateLabels||this.options.vertical)return false;var t=this.getMajorTickPositions();var i=this.labels;var n=Math.min(i.length,t.length-1);var r=0;for(var a=0;a<n;a++){var o=Math.abs(t[a+1]-t[a]);var s=i[a].box;var l=e.autoRotateLabelAngle(s,o);if(l!==0)r=l;if(r===-90)break}if(r!==0){for(var u=0;u<i.length;u++){i[u].options.rotation=r;i[u].reflow(new C)}return true}},arrangeTitle:function(){var e=this;var t=e.options;var i=e.title;var n=t.labels.mirror;var r=t.vertical;if(i){if(r){i.options.align=n?Q:U;i.options.vAlign=i.options.position}else{i.options.align=i.options.position;i.options.vAlign=n?te:D}i.reflow(this.box)}},arrangeNotes:function(){var e=this;for(var t=0;t<this.notes.length;t++){var i=e.notes[t];var n=i.options.value;var r=void 0;if(y(n)){if(e.shouldRenderNote(n))i.show();else i.hide();r=e.noteSlot(n)}else i.hide();i.reflow(r||e.lineBox())}},noteSlot:function(e){return this.getSlot(e)},alignTo:function(e){var t=e.lineBox();var i=this.options.vertical;var n=i?x:w;this.box.snapTo(t,n);if(i)this.box.shrink(0,this.lineBox().height()-t.height());else this.box.shrink(this.lineBox().width()-t.width(),0);this.box[n+1]-=this.lineBox()[n+1]-t[n+1];this.box[n+2]-=this.lineBox()[n+2]-t[n+2]},axisLabelText:function(e,t,i){var n=this;var r;var a=Ce(t);var o=function(){if(!t.format)return e;return n.chartService.format.localeAuto(t.format,[e],t.culture)};if(a){var s=c.extend({},i,{get text(){return o()},value:e,format:t.format,culture:t.culture});r=a(s)}else r=o();return r},slot:function(e,t,i){var n=this.getSlot(e,t,i);if(n)return n.toRect()},contentBox:function(){var e=this.box.clone();var t=this.labels;if(t.length){var i=this.options.vertical?x:w;if(this.chartService.isPannable(i)){var n=this.maxLabelOffset();e[i+1]-=n.start;e[i+2]+=n.end}else{if(t[0].options.visible)e.wrap(t[0].box);var r=t[t.length-1];if(r.options.visible)e.wrap(r.box)}}return e},maxLabelOffset:function(){var c=this;var e=this.options;var h=e.vertical;var t=e.reverse;var f=this.labelsBetweenTicks();var i=this.getLabelsTickPositions();var d=h?x:w;var p=this.labels;var v=t?1:0;var g=t?0:1;var n=0;var r=0;for(var a=0;a<p.length;a++){var o=p[a];var s=c.labelTickIndex(o);var l=void 0,u=void 0;if(f){l=i[s+v];u=i[s+g]}else l=u=i[s];n=Math.max(n,l-o.box[d+1]);r=Math.max(r,o.box[d+2]-u)}return{start:n,end:r}},limitRange:function(e,t,i,n,r){var a=this.options;if(e<i&&r<0&&(!y(a.min)||a.min<=i)||n<t&&r>0&&(!y(a.max)||n<=a.max))return null;if(t<i&&r>0||n<e&&r<0)return{min:e,max:t};var o=t-e;var s=e;var l=t;if(e<i&&r<0){s=T(e,i,n);l=T(e+o,i+o,n)}else if(t>n&&r>0){l=T(t,i,n);s=T(t-o,i,n-o)}return{min:s,max:l}},valueRange:function(){return{min:this.seriesMin,max:this.seriesMax}},lineDir:function(){var e=this.options;var t=e.vertical;var i=e.reverse;return(t?-1:1)*(i?-1:1)},lineInfo:function(){var e=this.options;var t=e.vertical;var i=this.lineBox();var n=t?i.height():i.width();var r=t?x:w;var a=this.lineDir();var o=a===1?1:2;var s=r+o.toString();var l=i[s];return{axis:r,axisOrigin:s,axisDir:a,lineBox:i,lineSize:n,lineStart:l}},pointOffset:function(e){var t=this.lineInfo();var i=t.axis;var n=t.axisDir;var r=t.axisOrigin;var a=t.lineBox;var o=t.lineSize;var s=n>0?e[i]-a[r]:a[r]-e[i];var l=s/o;return l},scaleToDelta:function(e,t){var i=.999;var n=T(e,-i,i);var r;if(n>0)r=t*Math.min(1,n);else r=t-t/(1+n);return r},labelsBetweenTicks:function(){return!this.options.justified},prepareUserOptions:function(){}}),Zt=(Ke(Qt,{labels:{visible:true,rotation:0,mirror:false,step:1,skip:0},line:{width:1,color:l,visible:true},title:{visible:true,position:E},majorTicks:{align:K,size:4,skip:0,step:1},minorTicks:{align:K,size:3,skip:0,step:1},axisCrossingValue:0,majorTickType:K,minorTickType:W,majorGridLines:{skip:0,step:1},minorGridLines:{visible:false,width:1,color:l,skip:0,step:1},margin:5,visible:true,reverse:false,justified:true,notes:{label:{text:""}},_alignLines:true,_deferLabels:false}),"milliseconds"),Jt="seconds",ei="minutes",ti="hours",ii="days",ni="weeks",ri="months",ai="years",oi,si=1e3,li=60*si,ui=60*li,ci=24*ui,hi=7*ci,fi=31*ci,di=365*ci,pi={years:di,months:fi,weeks:hi,days:ci,hours:ui,minutes:li,seconds:si,milliseconds:1};function vi(e,t){var i=e.getTime()-t;var n=e.getTimezoneOffset()-t.getTimezoneOffset();return i-n*li}function gi(e,t){return new Date(e.getTime()+t)}function m(e){var t;if(e instanceof Date)t=e;else if(e)t=new Date(e);return t}function mi(e,t){if(t===void 0)t=0;var i=0;var n=e.getDay();if(!isNaN(n))while(n!==t){if(n===0)n=6;else n--;i++}return gi(e,-i*ci)}function _i(e,t){if(t===0&&e.getHours()===23){e.setHours(e.getHours()+2);return true}return false}function yi(e,t){var i=new Date(e);i.setMinutes(0,0,0);var n=(e.getTimezoneOffset()-i.getTimezoneOffset())*li;return gi(i,n+t*ui)}function bi(e,t,i,n){var r=e;if(e){var a=m(e);var o=a.getHours();if(i===ai){r=new Date(a.getFullYear()+t,0,1);_i(r,0)}else if(i===ri){r=new Date(a.getFullYear(),a.getMonth()+t,1);_i(r,o)}else if(i===ni){r=bi(mi(a,n),t*7,ii);_i(r,o)}else if(i===ii){r=new Date(a.getFullYear(),a.getMonth(),a.getDate()+t);_i(r,o)}else if(i===ti)r=yi(a,t);else if(i===ei){r=gi(a,t*li);if(r.getSeconds()>0)r.setSeconds(0)}else if(i===Jt)r=gi(a,t*si);else if(i===Zt)r=gi(a,t);if(i!==Zt&&r.getMilliseconds()>0)r.setMilliseconds(0)}return r}function wi(e,t,i){return bi(m(e),0,t,i)}function xi(e,t,i){var n=m(e);if(n&&wi(n,t,i).getTime()===n.getTime())return n;return bi(n,1,t,i)}function ki(e,t){if(e&&t)return e.getTime()-t.getTime();return-1}function Ci(e,t){return e.getTime()-t}function Si(e){if(se(e)){var t=[];for(var i=0;i<e.length;i++)t.push(Si(e[i]));return t}else if(e)return m(e).getTime()}function Ti(e,t){if(e&&t)return Si(e)===Si(t);return e===t}function Ai(e,t,i){return vi(e,t)/pi[i]}function Mi(e,t,i,n){var r=m(e);var a=m(t);var o;if(i===ri)o=r.getMonth()-a.getMonth()+(r.getFullYear()-a.getFullYear())*12+Ai(r,new Date(r.getFullYear(),r.getMonth()),ii)/new Date(r.getFullYear(),r.getMonth()+1,0).getDate();else if(i===ai)o=r.getFullYear()-a.getFullYear()+Mi(r,new Date(r.getFullYear(),0),ri,1)/12;else if(i===ii||i===ni)o=Ai(r,a,i);else o=Ci(r,t)/pi[i];return o/n}function Di(e,t,i){var n;if(i===ai)n=t.getFullYear()-e.getFullYear();else if(i===ri)n=Di(e,t,ai)*12+t.getMonth()-e.getMonth();else if(i===ii)n=Math.floor(Ci(t,e)/ci);else n=Math.floor(Ci(t,e)/pi[i]);return n}function Ei(e,t){var i=0;var n=t.length-1;var r;while(i<=n){r=Math.floor((i+n)/2);var a=t[r];if(a<e){i=r+1;continue}if(a>e){n=r-1;continue}while(Ti(t[r-1],e))r--;return r}if(t[r]<=e)return r;return r-1}function Ii(e,t){var i;if(pe(t))i=e.parseDate(t)||m(t);else i=m(t);return i}function Pi(e,t){if(se(t)){var i=[];for(var n=0;n<t.length;n++)i.push(Ii(e,t[n]));return i}return Ii(e,t)}function Bi(e,t){if(de(e.weekStartDay))return e.weekStartDay;if(t&&t.firstDay)return t.firstDay();return 0}var Oi=.01,zi=.1;function Li(e,t){if(e instanceof Date){var i=t.length;for(var n=0;n<i;n++)if(Ti(t[n],e))return n;return-1}return t.indexOf(e)}var Ri=Qt.extend({initFields:function(){this._ticks={}},categoriesHash:function(){return""},clone:function(){var e=new Ri(c.extend({},this.options,{categories:this.options.srcCategories}),this.chartService);e.createLabels();return e},initUserOptions:function(e){var t=e.categories||[];var i=y(e.min);var n=y(e.max);e.srcCategories=e.categories=t;if((i||n)&&t.length){var r=i?Math.floor(e.min):0;var a;if(n)a=e.justified?Math.floor(e.max)+1:Math.ceil(e.max);else a=t.length;e.categories=e.categories.slice(r,a)}return e},rangeIndices:function(){var e=this.options;var t=e.categories.length||1;var i=de(e.min)?e.min%1:0;var n;if(de(e.max)&&e.max%1!==0&&e.max<this.totalRange().max)n=t-(1-e.max%1);else n=t-(e.justified?1:0);return{min:i,max:n}},totalRangeIndices:function(e){var t=this.options;var i=de(t.min)?t.min:0;var n;if(de(t.max))n=t.max;else if(de(t.min))n=i+t.categories.length;else n=this.totalRange().max||1;if(e){var r=this.totalRange();i=T(i,0,r.max);n=T(n,0,r.max)}return{min:i,max:n}},range:function(){var e=this.options;var t=de(e.min)?e.min:0;var i=de(e.max)?e.max:this.totalRange().max;return{min:t,max:i}},roundedRange:function(){return this.range()},totalRange:function(){var e=this.options;return{min:0,max:Math.max(this._seriesMax||0,e.srcCategories.length)-(e.justified?1:0)}},scaleOptions:function(){var e=this.rangeIndices();var t=e.min;var i=e.max;var n=this.lineBox();var r=this.options.vertical?n.height():n.width();var a=r/(i-t||1);return{scale:a*(this.options.reverse?-1:1),box:n,min:t,max:i}},arrangeLabels:function(){Qt.fn.arrangeLabels.call(this);this.hideOutOfRangeLabels()},hideOutOfRangeLabels:function(){var e=this;var t=e.box;var i=e.labels;if(i.length>0){var n=this.options.vertical?x:w;var r=t[n+1];var a=t[n+2];var o=i[0];var s=Ge(i);if(o.box[n+1]>a||o.box[n+2]<r)o.options.visible=false;if(s.box[n+1]>a||s.box[n+2]<r)s.options.visible=false}},getMajorTickPositions:function(){return this.getTicks().majorTicks},getMinorTickPositions:function(){return this.getTicks().minorTicks},getLabelsTickPositions:function(){return this.getTicks().labelTicks},tickIndices:function(e){var t=this.rangeIndices();var i=t.min;var n=t.max;var r=Math.ceil(n);var a=Math.floor(i);var o=[];while(a<=r){o.push(a);a+=e}return o},getTickPositions:function(e){var t=this.options;var i=t.vertical;var n=t.reverse;var r=this.scaleOptions();var a=r.scale;var o=r.box;var c=r.min;var h=o[(i?x:w)+(n?2:1)];var s=this.tickIndices(e);var l=[];for(var u=0;u<s.length;u++)l.push(h+k(a*(s[u]-c),P));return l},getTicks:function(){var e=this.options;var t=this._ticks;var i=this.rangeIndices();var n=this.lineBox();var r=n.getHash()+i.min+","+i.max+e.reverse+e.justified;if(t._hash!==r){var a=e.minorTicks.visible||e.minorGridLines.visible;t._hash=r;t.labelTicks=this.getTickPositions(1);t.majorTicks=this.filterOutOfRangePositions(t.labelTicks,n);t.minorTicks=a?this.filterOutOfRangePositions(this.getTickPositions(.5),n):[]}return t},filterOutOfRangePositions:function(e,t){if(!e.length)return e;var i=this.options.vertical?x:w;var n=function(e){return t[i+1]<=e&&e<=t[i+2]};var r=e.length-1;var a=0;while(!n(e[a])&&a<=r)a++;var o=r;while(!n(e[o])&&o>=0)o--;return e.slice(a,o+1)},lineInfo:function(){var e=this.options;var t=e.vertical;var i=e.reverse;var n=this.lineBox();var r=t?n.height():n.width();var a=t?x:w;var o=i?-1:1;var s=o===1?1:2;var l=a+s.toString();var u=n[l];return{axis:a,axisOrigin:l,axisDir:o,lineBox:n,lineSize:r,lineStart:u}},lineDir:function(){var e=this.options;var t=e.reverse;return t?-1:1},getSlot:function(c,e,h){var t=this.options;var f=t.reverse;var d=t.justified;var i=this.scaleOptions();var p=i.scale;var n=i.box;var v=i.min;var g=this.lineInfo();var r=g.axis;var m=g.lineStart;var a=n.clone();var _=!y(e);var o=$e(c,0);var s=$e(e,o);s=Math.max(s-1,o);s=Math.max(o,s);var l=m+(o-v)*p;var u=m+(s+1-v)*p;if(_&&d)u=l;if(h){l=T(l,n[r+1],n[r+2]);u=T(u,n[r+1],n[r+2])}a[r+1]=f?u:l;a[r+2]=f?l:u;return a},limitSlot:function(e){var t=this.options.vertical;var i=t?x:w;var n=this.lineBox();var r=e.clone();r[i+1]=T(e[i+1],n[i+1],n[i+2]);r[i+2]=T(e[i+2],n[i+1],n[i+2]);return r},slot:function(e,t,i){var n=Math.floor(this.options.min||0);var r=e;var a=t;if(typeof r==="string")r=this.categoryIndex(r);else if(de(r))r-=n;if(typeof a==="string")a=this.categoryIndex(a);else if(de(a))a-=n;return Qt.fn.slot.call(this,r,a,i)},pointCategoryIndex:function(e){var t=this.options;var i=t.reverse;var n=t.justified;var c=t.vertical;var r=c?x:w;var a=this.scaleOptions();var h=a.scale;var o=a.box;var f=a.min;var d=a.max;var p=i?d:f;var s=o[r+1];var v=o[r+2];var l=e[r];if(l<s||l>v)return null;var u=p+(l-s)/h;var g=u%1;if(n)u=Math.round(u);else if(g===0&&u>0)u--;return Math.floor(u)},getCategory:function(e){var t=this.pointCategoryIndex(e);if(t===null)return null;return this.options.categories[t]},categoryIndex:function(e){return this.totalIndex(e)-Math.floor(this.options.min||0)},categoryAt:function(e,t){var i=this.options;return(t?i.srcCategories:i.categories)[e]},categoriesCount:function(){return(this.options.categories||[]).length},translateRange:function(e){var t=this.options;var i=this.lineBox();var n=t.vertical?i.height():i.width();var r=t.categories.length;var a=n/r;var o=k(e/a,b);return{min:o,max:r+o}},scaleRange:function(e,t){var i=Math.abs(this.pointOffset(t));var n=this.totalRangeIndices();var r=n.max-n.min;var a=this.scaleToDelta(e,r);var o=i*a;var s=(1-i)*a;var l=n.min+o;var u=n.max-s;if(u-l<zi)u=l+zi;return{min:l,max:u}},zoomRange:function(e,t){var i=this.totalRange();var n=i.min;var r=i.max;var a=this.scaleRange(e,t);return{min:T(a.min,n,r),max:T(a.max,n,r)}},labelsCount:function(){var e=this.labelsRange();return e.max-e.min},labelsRange:function(){var e=this.options;var t=e.justified;var i=e.labels;var n=this.totalRangeIndices(true);var r=n.min;var a=n.max;var o=Math.floor(r);if(!t){r=Math.floor(r);a=Math.ceil(a)}else{r=Math.ceil(r);a=Math.floor(a)}var s;if(r>i.skip)s=i.skip+i.step*Math.ceil((r-i.skip)/i.step);else s=i.skip;return{min:s-o,max:(e.categories.length?a+(t?1:0):0)-o}},createAxisLabel:function(e,t,i){var n=this.options;var r=n.dataItems?n.dataItems[e]:null;var a=$e(n.categories[e],"");i.dataItem=r;var o=this.axisLabelText(a,t,i);return new Lt(a,o,e,r,t)},shouldRenderNote:function(e){var t=this.totalRangeIndices();return Math.floor(t.min)<=e&&e<=Math.ceil(t.max)},noteSlot:function(e){var t=this.options;var i=e-Math.floor(t.min||0);return this.getSlot(i)},arrangeNotes:function(){Qt.fn.arrangeNotes.call(this);this.hideOutOfRangeNotes()},hideOutOfRangeNotes:function(){var e=this;var t=e.notes;var i=e.box;if(t&&t.length){var n=this.options.vertical?x:w;var r=i[n+1];var a=i[n+2];for(var o=0;o<t.length;o++){var s=t[o];if(s.box&&(a<s.box[n+1]||s.box[n+2]<r))s.hide()}}},pan:function(e){var t=this.totalRangeIndices(true);var i=this.scaleOptions();var n=i.scale;var r=k(e/n,b);var a=this.totalRange();var o=t.min+r;var s=t.max+r;return this.limitRange(o,s,0,a.max,r)},pointsRange:function(c,h){var e=this.options;var f=e.reverse;var d=e.vertical;var t=d?x:w;var i=this.totalRangeIndices(true);var n=this.scaleOptions();var r=n.scale;var p=n.box;var a=p[t+(f?2:1)];var v=c[t]-a;var g=h[t]-a;var o=i.min+v/r;var s=i.min+g/r;var l=Math.min(o,s);var u=Math.max(o,s);if(u-l>=Oi)return{min:l,max:u}},valueRange:function(){return this.range()},totalIndex:function(e){var t=this.options;var i=this._categoriesMap?this._categoriesMap.get(e):Li(e,t.srcCategories);return i},currentRangeIndices:function(){var e=this.options;var t=0;if(de(e.min))t=Math.floor(e.min);var i;if(de(e.max))i=e.justified?Math.floor(e.max):Math.ceil(e.max)-1;else i=this.totalCount()-1;return{min:t,max:i}},mapCategories:function(){if(!this._categoriesMap){var e=this._categoriesMap=new Ae;var t=this.options.srcCategories;for(var i=0;i<t.length;i++)e.set(t[i],i)}},totalCount:function(){return Math.max(this.options.srcCategories.length,this._seriesMax||0)}}),Fi=(Ke(Ri,{type:"category",vertical:false,majorGridLines:{visible:false,width:1,color:l},labels:{zIndex:1},justified:false,_deferLabels:true}),3e5),Vi={milliseconds:"HH:mm:ss.fff",seconds:"HH:mm:ss",minutes:"HH:mm",hours:"HH:mm",days:"M/d",weeks:"M/d",months:"MMM 'yy",years:"yyyy"},Ni=.2,Hi="auto",Ui=[Zt,Jt,ei,ti,ii,ni,ri,ai],ji="fit";function Gi(e){var t=e._range;if(!t){t=e._range=Qe(e);t.min=m(t.min);t.max=m(t.max)}return t}var Wi=e.extend({init:function(e){this.options=e},displayIndices:function(){return{min:0,max:1}},displayRange:function(){return{}},total:function(){return{}},valueRange:function(){return{}},valueIndex:function(){return-1},values:function(){return[]},totalIndex:function(){return-1},valuesCount:function(){return 0},totalCount:function(){return 0},dateAt:function(){return null}}),qi=e.extend({init:function(e,t,i){this.options=i;i.baseUnitStep=i.baseUnitStep||1;var n=i.roundToBaseUnit;var r=i.justified;this.start=bi(e,0,i.baseUnit,i.weekStartDay);var a=this.roundToTotalStep(t);var o=!r&&Ti(t,a)&&!i.justifyEnd;this.end=this.roundToTotalStep(t,!r,o?1:0);var s=i.min||e;this.valueStart=this.roundToTotalStep(s);this.displayStart=n?this.valueStart:s;var l=i.max;if(!l){this.valueEnd=a;this.displayEnd=n||o?this.end:t}else{var u=!r&&Ti(l,this.roundToTotalStep(l))?-1:0;this.valueEnd=this.roundToTotalStep(l,false,u);this.displayEnd=n?this.roundToTotalStep(l,!r):i.max}if(this.valueEnd<this.valueStart)this.valueEnd=this.valueStart;if(this.displayEnd<=this.displayStart)this.displayEnd=this.roundToTotalStep(this.displayStart,false,1)},displayRange:function(){return{min:this.displayStart,max:this.displayEnd}},displayIndices:function(){if(!this._indices){var e=this.options;var t=e.baseUnit;var i=e.baseUnitStep;var n=Mi(this.displayStart,this.valueStart,t,i);var r=Mi(this.displayEnd,this.valueStart,t,i);this._indices={min:n,max:r}}return this._indices},total:function(){return{min:this.start,max:this.end}},totalCount:function(){var e=this.totalIndex(this.end);return e+(this.options.justified?1:0)},valueRange:function(){return{min:this.valueStart,max:this.valueEnd}},valueIndex:function(e){var t=this.options;return Math.floor(Mi(e,this.valueStart,t.baseUnit,t.baseUnitStep))},totalIndex:function(e){var t=this.options;return Math.floor(Mi(e,this.start,t.baseUnit,t.baseUnitStep))},dateIndex:function(e){var t=this.options;return Mi(e,this.valueStart,t.baseUnit,t.baseUnitStep)},valuesCount:function(){var e=this.valueIndex(this.valueEnd);return e+1},values:function(){var e=this._values;if(!e){var t=this.options;var i=this.valueRange();this._values=e=[];for(var n=i.min;n<=i.max;){e.push(n);n=bi(n,t.baseUnitStep,t.baseUnit,t.weekStartDay)}}return e},dateAt:function(e,t){var i=this.options;return bi(t?this.start:this.valueStart,i.baseUnitStep*e,i.baseUnit,i.weekStartDay)},roundToTotalStep:function(e,t,i){var n=this.options;var r=n.baseUnit;var a=n.baseUnitStep;var o=n.weekStartDay;var s=this.start;var l=Mi(e,s,r,a);var u=t?Math.ceil(l):Math.floor(l);if(i)u+=i;return bi(s,u*a,r,o)}});function Yi(e,t,c){var i=Gi(e.categories);var h=(e.max||i.max)-(e.min||i.min);var f=e.autoBaseUnitSteps;var n=e.maxDateGroups;var d=e.baseUnit===ji;var p=t?Ui.indexOf(t):0;var r=d?Ui[p++]:e.baseUnit;var a=h/pi[r];var o=a;var s,l,u;while(!l||a>=n){s=s||f[r].slice(0);do{u=s.shift()}while(u&&t===r&&u<c);if(u){l=u;a=o/l}else if(r===Ge(Ui)){l=Math.ceil(o/n);break}else if(d){r=Ui[p++]||Ge(Ui);o=h/pi[r];s=null}else{if(a>n)l=Math.ceil(o/n);break}}e.baseUnitStep=l;e.baseUnit=r}function $i(e){var t=e.categories;var i=y(t)?t.length:0;var n=j;var r,a;for(var o=0;o<i;o++){var s=t[o];if(s&&r){var l=vi(s,r);if(l>0){n=Math.min(n,l);if(n>=di)a=ai;else if(n>=fi-ci*3)a=ri;else if(n>=hi)a=ni;else if(n>=ci)a=ii;else if(n>=ui)a=ti;else if(n>=li)a=ei;else a=Jt}}r=s}e.baseUnit=a||ii}function Xi(e){var t=(e.baseUnit||"").toLowerCase();var i=t!==ji&&!Me(t,Ui);if(i)$i(e);if(t===ji||e.baseUnitStep===Hi)Yi(e);return e}var Ki=Ri.extend({clone:function(){var e=new Ki(c.extend({},this.options),this.chartService);e.createLabels();return e},categoriesHash:function(){var e=this.dataRange.total().min;return this.options.baseUnit+this.options.baseUnitStep+e},initUserOptions:function(e){return e},initFields:function(){Ri.fn.initFields.call(this);var e=this.chartService;var t=e.intl;var i=this.options;var n=i.categories||[];if(!n._parsed){n=Pi(t,n);n._parsed=true}i=f({roundToBaseUnit:true},i,{categories:n,min:Ii(t,i.min),max:Ii(t,i.max),weekStartDay:Bi(i,t)});if(e.panning&&e.isPannable(i.vertical?x:w))i.roundToBaseUnit=false;i.userSetBaseUnit=i.userSetBaseUnit||i.baseUnit;i.userSetBaseUnitStep=i.userSetBaseUnitStep||i.baseUnitStep;this.options=i;i.srcCategories=n;if(n.length>0){var r=Gi(n);var a=i.maxDivisions;this.dataRange=new qi(r.min,r.max,Xi(i));if(a){var o=this.dataRange.displayRange();var s=c.extend({},i,{justified:true,roundToBaseUnit:false,baseUnit:"fit",min:o.min,max:o.max,maxDateGroups:a});var l=this.dataRange.options;Yi(s,l.baseUnit,l.baseUnitStep);this.divisionRange=new qi(r.min,r.max,s)}else this.divisionRange=this.dataRange}else{i.baseUnit=i.baseUnit||ii;this.dataRange=this.divisionRange=new Wi(i)}this.rangeLabels=[]},tickIndices:function(e){var t=this;var i=t.dataRange;var n=t.divisionRange;var r=n.valuesCount();if(!this.options.maxDivisions||!r)return Ri.fn.tickIndices.call(this,e);var a=[];var o=n.values();var s=0;if(!this.options.justified){o=o.concat(n.dateAt(r));s=.5}for(var l=0;l<o.length;l++){a.push(i.dateIndex(o[l])+s);if(e!==1&&l>=1){var u=a.length-1;a.splice(l,0,a[u-1]+(a[u]-a[u-1])*e)}}return a},shouldRenderNote:function(e){var t=this.range();var i=this.options.categories||[];return ki(e,t.min)>=0&&ki(e,t.max)<=0&&i.length},parseNoteValue:function(e){return Ii(this.chartService.intl,e)},noteSlot:function(e){return this.getSlot(e)},translateRange:function(e){var t=this.options;var i=t.baseUnit;var n=t.weekStartDay;var r=t.vertical;var a=this.lineBox();var o=r?a.height():a.width();var s=this.range();var l=o/(s.max-s.min);var u=k(e/l,b);if(s.min&&s.max){var c=gi(t.min||s.min,u);var h=gi(t.max||s.max,u);s={min:bi(c,0,i,n),max:bi(h,0,i,n)}}return s},labelsRange:function(){return{min:this.options.labels.skip,max:this.divisionRange.valuesCount()}},pan:function(e){if(this.isEmpty())return null;var t=this.options;var i=this.lineBox();var n=t.vertical?i.height():i.width();var r=this.dataRange.displayRange();var a=r.min;var o=r.max;var s=this.dataRange.total();var c=n/(o-a);var l=k(e/c,b)*(t.reverse?-1:1);var h=gi(a,l);var f=gi(o,l);var u=this.limitRange(Si(h),Si(f),Si(s.min),Si(s.max),l);if(u){u.min=m(u.min);u.max=m(u.max);u.baseUnit=t.baseUnit;u.baseUnitStep=t.baseUnitStep||1;u.userSetBaseUnit=t.userSetBaseUnit;u.userSetBaseUnitStep=t.userSetBaseUnitStep;return u}},pointsRange:function(e,t){if(this.isEmpty())return null;var i=Ri.fn.pointsRange.call(this,e,t);var n=this.dataRange.displayRange();var r=this.dataRange.displayIndices();var a=Ci(n.max,n.min)/(r.max-r.min);var o=this.options;var s=gi(n.min,i.min*a);var l=gi(n.min,i.max*a);return{min:s,max:l,baseUnit:o.userSetBaseUnit||o.baseUnit,baseUnitStep:o.userSetBaseUnitStep||o.baseUnitStep}},scaleRange:function(c,h){if(this.isEmpty())return{};var e=this.options;var f=e.userSetBaseUnit===ji;var t=this.dataRange.total();var d=this.dataRange.displayRange();var i=d.min;var n=d.max;var p=Math.abs(this.pointOffset(h));var v=n-i;var g=this.scaleToDelta(c,v);var m=Math.round(p*g);var _=Math.round((1-p)*g);var y=this.dataRange.options;var r=y.baseUnit;var a=new Date(i.getTime()+m);var o=new Date(n.getTime()-_);if(f){var s=e.autoBaseUnitSteps;var b=e.maxDateGroups;var w=Ge(s[r])*b*pi[r];var x=Ci(n,i);var k=Ci(o,a);var C=Ui.indexOf(r);var l,u;if(k<pi[r]&&r!==Zt){r=Ui[C-1];l=Ge(s[r]);u=(x-(b-1)*l*pi[r])/2;a=gi(i,u);o=gi(n,-u)}else if(k>w&&r!==ai){var S=0;do{C++;r=Ui[C];S=0;u=2*pi[r];do{l=s[r][S];S++}while(S<s[r].length&&u*l<x)}while(r!==ai&&u*l<x);u=(u*l-x)/2;if(u>0){a=gi(i,-u);o=gi(n,u);a=gi(a,T(o,t.min,t.max)-o);o=gi(o,T(a,t.min,t.max)-a)}}}if(a&&o&&Ci(o,a)>0)return{min:a,max:o,baseUnit:e.userSetBaseUnit||e.baseUnit,baseUnitStep:e.userSetBaseUnitStep||e.baseUnitStep}},zoomRange:function(e,t){var i=this.dataRange.total();var n=this.scaleRange(e,t);if(n){if(n.min<i.min)n.min=i.min;if(n.max>i.max)n.max=i.max}return n},range:function(){return this.dataRange.displayRange()},createLabels:function(){Ri.fn.createLabels.call(this);this.createRangeLabels()},clearLabels:function(){Ri.fn.clearLabels.call(this);this.rangeLabels=[]},arrangeLabels:function(){this.arrangeRangeLabels();Ri.fn.arrangeLabels.call(this)},arrangeRangeLabels:function(){var e=this;var t=e.options;var i=e.rangeLabels;if(i.length===0)return;var n=this.lineBox();var r=t.vertical;var a=t.rangeLabels.mirror||t.labels.mirror;var o=i[0];if(o){var s=r?n.y1-o.box.height()/2:n.x1;this.positionLabel(o,a,s)}var l=i[1];if(l){var u=r?n.y2-l.box.height()/2:n.x2;this.positionLabel(l,a,u)}},autoRotateLabels:function(){Ri.fn.autoRotateLabels.call(this);this.autoRotateRangeLabels()},hideOutOfRangeLabels:function(){Ri.fn.hideOutOfRangeLabels.call(this);this.hideOverlappingLabels()},hideOverlappingLabels:function(){var e=this;var t=e.rangeLabels;var i=e.labels;if(t.length===0)return;function n(e,t){if(!t.options.visible||t.box.overlaps(e.box)){t.options.visible=false;return true}return false}var r=t[0];if(r&&r.options.visible)for(var a=0;a<i.length;a++){var o=n(r,i[a]);if(!o)break}var s=t[1];if(s&&s.options.visible)for(var l=i.length-1;l>0;--l){var u=n(s,i[l]);if(!u)break}},contentBox:function(){var e=Ri.fn.contentBox.call(this);var t=this.rangeLabels;for(var i=0;i<t.length;i++){var n=t[i];if(n.options.visible)e.wrap(n.box)}return e},createAxisLabel:function(e,t,i){if(i===void 0)i={};var n=this.options;var r=n.dataItems&&!n.maxDivisions?n.dataItems[e]:null;var a=this.divisionRange.dateAt(e);var o=t.dateFormats[this.divisionRange.options.baseUnit];t.format=t.format||o;i.dataItem=r;var s=this.axisLabelText(a,t,i);if(s)return new Lt(a,s,e,r,t)},createRangeLabels:function(){var r=this;var e=this.divisionRange;var t=e.displayStart;var i=e.displayEnd;var n=this.options;var a=c.extend({},n.labels,n.rangeLabels,{align:E,zIndex:n.zIndex});if(a.visible!==true)return;this.normalizeLabelRotation(a);a.alignRotation=E;if(a.rotation==="auto"){a.rotation=0;n.autoRotateRangeLabels=true}var o=a.dateFormats[this.divisionRange.options.baseUnit];a.format=a.format||o;var s=function(e,t,i){if(i){var n=new Lt(t,i,e,null,a);r.append(n);r.rangeLabels.push(n)}};var l=this.axisLabelText(t,a,{index:0,count:2});s(0,t,l);var u=this.axisLabelText(i,a,{index:1,count:2});s(1,i,u)},autoRotateRangeLabels:function(){var a=this;var e=this.rangeLabels;if(!this.options.autoRotateRangeLabels||this.options.vertical||e.length!==2)return;var t=function(e,t,i){var n=Math.abs(t[i+1]-t[i])*2;var r=a.autoRotateLabelAngle(e.box,n);if(r!==0){e.options.rotation=r;e.reflow(new C)}};var i=this.getMajorTickPositions();t(e[0],i,0);t(e[1],i,i.length-2)},categoryIndex:function(e){return this.dataRange.valueIndex(e)},slot:function(e,t,i){var n=this.dataRange;var r=e;var a=t;if(r instanceof Date)r=n.dateIndex(r);if(a instanceof Date)a=n.dateIndex(a);var o=this.getSlot(r,a,i);if(o)return o.toRect()},getSlot:function(e,t,i){var n=e;var r=t;if(typeof n===X)n=this.categoryIndex(n);if(typeof r===X)r=this.categoryIndex(r);return Ri.fn.getSlot.call(this,n,r,i)},valueRange:function(){var e=this.options;var t=Gi(e.srcCategories);return{min:m(t.min),max:m(t.max)}},categoryAt:function(e,t){return this.dataRange.dateAt(e,t)},categoriesCount:function(){return this.dataRange.valuesCount()},rangeIndices:function(){return this.dataRange.displayIndices()},labelsBetweenTicks:function(){return!this.divisionRange.options.justified},prepareUserOptions:function(){if(this.isEmpty())return;this.options.categories=this.dataRange.values()},getCategory:function(e){var t=this.pointCategoryIndex(e);if(t===null)return null;return this.dataRange.dateAt(t)},totalIndex:function(e){return this.dataRange.totalIndex(e)},currentRangeIndices:function(){var e=this.dataRange.valueRange();return{min:this.dataRange.totalIndex(e.min),max:this.dataRange.totalIndex(e.max)}},totalRange:function(){return this.dataRange.total()},totalCount:function(){return this.dataRange.totalCount()},isEmpty:function(){return!this.options.srcCategories.length},roundedRange:function(){if(this.options.roundToBaseUnit!==false||this.isEmpty())return this.range();var e=this.options;var t=Gi(e.srcCategories);var i=new qi(t.min,t.max,c.extend({},e,{justified:false,roundToBaseUnit:true,justifyEnd:e.justified}));return i.displayRange()}});function Qi(e,t,i){if(!e&&!t)return 0;var n;if(e>=0&&t>=0){var r=e===t?0:e;var a=(t-r)/t;if(i===false||!i&&a>Ni)return 0;n=Math.max(0,r-(t-r)/2)}else n=e;return n}function Zi(e,t,i){if(!e&&!t)return 1;var n;if(e<=0&&t<=0){var r=e===t?0:t;var a=Math.abs((r-e)/r);if(i===false||!i&&a>Ni)return 0;n=Math.min(0,r-(e-r)/2)}else n=t;return n}function Ji(e,t){return k(Math.floor(e/t)*t,b)}function en(e,t){return k(Math.ceil(e/t)*t,b)}function tn(e){return Math.max(Math.min(e,Fi),-Fi)}Ke(Ki,{type:u,labels:{dateFormats:Vi},rangeLabels:{visible:false},autoBaseUnitSteps:{milliseconds:[1,10,100],seconds:[1,2,5,15,30],minutes:[1,2,5,15,30],hours:[1,2,3],days:[1,2,3],weeks:[1,2],months:[1,2,3,6],years:[1,2,3,5,10,25,50]},maxDateGroups:10});var nn=Math.pow(10,-b+1),rn=Qt.extend({init:function(e,t,i,n){Qt.fn.init.call(this,c.extend({},i,{seriesMin:e,seriesMax:t}),n)},initUserOptions:function(e){var t=an(e.seriesMin,e.seriesMax,e);this.totalOptions=on(t,e);return ln(t,e)},initFields:function(){this.totalMin=this.totalOptions.min;this.totalMax=this.totalOptions.max;this.totalMajorUnit=this.totalOptions.majorUnit;this.seriesMin=this.options.seriesMin;this.seriesMax=this.options.seriesMax},clone:function(){return new rn(this.seriesMin,this.seriesMax,c.extend({},this.options),this.chartService)},startValue:function(){return 0},range:function(){var e=this.options;return{min:e.min,max:e.max}},getDivisions:function(e){if(e===0)return 1;var t=this.options;var i=t.max-t.min;return Math.floor(k(i/e,P))+1},getTickPositions:function(e,t){var i=this.options;var n=this.lineInfo();var r=n.axisDir;var a=n.axisOrigin;var c=n.lineBox;var h=n.lineSize;var f=i.max-i.min;var d=h/f;var p=e*d;var v=this.getDivisions(e);var o=[];var s=c[a];var l=0;if(t)l=t/e;for(var u=0;u<v;u++){if(u%l!==0)o.push(k(s,P));s=s+p*r}return o},getMajorTickPositions:function(){return this.getTickPositions(this.options.majorUnit)},getMinorTickPositions:function(){return this.getTickPositions(this.options.minorUnit)},getSlot:function(e,t,i){if(i===void 0)i=false;var n=this.options;var r=this.lineInfo();var c=r.axis;var a=r.axisDir;var o=r.lineBox;var h=r.lineSize;var f=r.lineStart;var d=a*(h/(n.max-n.min));var s=$e(e,t||0);var l=$e(t,e||0);if(i){s=T(s,n.min,n.max);l=T(l,n.min,n.max)}var p=Math.min(s,l)-n.min;var v=Math.max(s,l)-n.min;var u=new C(o.x1,o.y1,o.x1,o.y1);u[c+1]=tn(f+d*(a>0?p:v));u[c+2]=tn(f+d*(a>0?v:p));return u},getValue:function(e){var t=this.options;var i=Number(t.max);var n=Number(t.min);var r=this.pointOffset(e);var a=r*(i-n);if(r<0||r>1)return null;var o=n+a;return k(o,b)},translateRange:function(e){var t=this.options;var i=t.vertical;var n=t.reverse;var r=t.max;var a=t.min;var o=this.lineInfo();var s=o.lineSize;var l=r-a;var c=s/l;var u=k(e/c,b);if((i||n)&&!(i&&n))u=-u;return{min:a+u,max:r+u,offset:u}},labelsCount:function(){return this.getDivisions(this.options.majorUnit)},createAxisLabel:function(e,t,i){var n=this.options;var r=k(n.min+e*n.majorUnit,b);var a=this.axisLabelText(r,t,i);return new Lt(r,a,e,null,t)},shouldRenderNote:function(e){var t=this.range();return t.min<=e&&e<=t.max},pan:function(e){var t=this.translateRange(e);return this.limitRange(t.min,t.max,this.totalMin,this.totalMax,t.offset)},pointsRange:function(e,t){var i=this.getValue(e);var n=this.getValue(t);var r=Math.min(i,n);var a=Math.max(i,n);if(this.isValidRange(r,a))return{min:r,max:a}},scaleRange:function(e,t){var i=Math.abs(this.pointOffset(t));var n=this.options.max-this.options.min;var r=this.scaleToDelta(e,n);var a=i*r;var o=(1-i)*r;var s=k(this.options.min+a,b);var l=k(this.options.max-o,b);if(l-s<nn)l=s+nn;return{min:s,max:l}},zoomRange:function(e,t){var i=this;var n=i.totalMin;var r=i.totalMax;var a=this.scaleRange(e,t);return{min:T(a.min,n,r),max:T(a.max,n,r),narrowRange:false}},isValidRange:function(e,t){return t-e>nn}});function an(e,t,i){var n=i.narrowRange;var r=Qi(e,t,n);var a=Zi(e,t,n);var o=ft(r,a);var s={majorUnit:o};if(i.roundToMajorUnit!==false){if(r<0&&un(r,o,1/3))r-=o;if(a>0&&un(a,o,1/3))a+=o}s.min=Ji(r,o);s.max=en(a,o);return s}function on(e,t){return{min:y(t.min)?Math.min(e.min,t.min):e.min,max:y(t.max)?Math.max(e.max,t.max):e.max,majorUnit:e.majorUnit}}function sn(e,t){for(var i=0;i<t.length;i++){var n=t[i];if(e[n]===null)e[n]=undefined}}function ln(e,t){var i=t;var n,r;if(t){sn(t,["min","max"]);n=y(t.min);r=y(t.max);var a=n||r;if(a)if(t.min===t.max)if(t.min>0)t.min=0;else t.max=1;if(t.majorUnit){e.min=Ji(e.min,t.majorUnit);e.max=en(e.max,t.majorUnit)}else if(a){i=f(e,t);e.majorUnit=ft(i.min,i.max)}}e.minorUnit=(i.majorUnit||e.majorUnit)/5;var o=f(e,i);if(o.min>=o.max)if(n&&!r)o.max=o.min+o.majorUnit;else if(!n&&r)o.min=o.max-o.majorUnit;return o}function un(e,t,i){var n=k(Math.abs(e%t),b);var r=t*(1-i);return n===0||n>r}Ke(rn,{type:"numeric",min:0,max:1,vertical:true,majorGridLines:{visible:true,width:1,color:l},labels:{format:"#.####################"},zIndex:1});var cn=1e3,hn=Qt.extend({init:function(e,t,i,n){var r=m(e);var a=m(t);var o=n.intl;var s=i||{};s=f(s||{},{min:Ii(o,s.min),max:Ii(o,s.max),axisCrossingValue:Pi(o,s.axisCrossingValues||s.axisCrossingValue),weekStartDay:Bi(s,o)});s=dn(r,a,s);Qt.fn.init.call(this,s,n);this.intlService=o;this.seriesMin=r;this.seriesMax=a;var l=s.weekStartDay||0;this.totalMin=Si(wi(Si(r)-1,s.baseUnit,l));this.totalMax=Si(xi(Si(a)+1,s.baseUnit,l))},clone:function(){return new hn(this.seriesMin,this.seriesMax,c.extend({},this.options),this.chartService)},range:function(){var e=this.options;return{min:e.min,max:e.max}},getDivisions:function(e){var t=this.options;return Math.floor(Di(t.min,t.max,t.baseUnit)/e+1)},getTickPositions:function(e){var t=this.options;var i=this.lineInfo();var n=i.axisDir;var r=i.lineSize;var a=i.lineStart;var o=this.getDivisions(e);var s=Ci(t.max,t.min);var c=r/s;var h=t.weekStartDay||0;var l=[a];for(var u=1;u<o;u++){var f=bi(t.min,u*e,t.baseUnit,h);var d=a+Ci(f,t.min)*c*n;l.push(k(d,P))}return l},getMajorTickPositions:function(){return this.getTickPositions(this.options.majorUnit)},getMinorTickPositions:function(){return this.getTickPositions(this.options.minorUnit)},getSlot:function(e,t,i){return rn.prototype.getSlot.call(this,Ii(this.intlService,e),Ii(this.intlService,t),i)},getValue:function(e){var t=rn.prototype.getValue.call(this,e);return t!==null?m(t):null},labelsCount:function(){return this.getDivisions(this.options.majorUnit)},createAxisLabel:function(e,t,i){var n=this.options;var r=e*n.majorUnit;var a=n.weekStartDay||0;var o=n.min;if(r>0)o=bi(o,r,n.baseUnit,a);var s=t.dateFormats[n.baseUnit];t.format=t.format||s;var l=this.axisLabelText(o,t,i);return new Lt(o,l,e,null,t)},translateRange:function(e){var t=this.options;var i=this.lineBox();var n=t.vertical;var r=t.reverse;var a=n?i.height():i.width();var o=this.range();var s=a/Ci(o.max,o.min);var l=k(e/s,b);if((n||r)&&!(n&&r))l=-l;var u=gi(t.min,l);var c=gi(t.max,l);return{min:u,max:c,offset:l}},shouldRenderNote:function(e){var t=this.range();return ki(e,t.min)>=0&&ki(e,t.max)<=0},pan:function(e){var t=this.translateRange(e,true);var i=this.limitRange(Si(t.min),Si(t.max),this.totalMin,this.totalMax,t.offset);if(i)return{min:m(i.min),max:m(i.max)}},pointsRange:function(e,t){var i=this.getValue(e);var n=this.getValue(t);var r=Math.min(i,n);var a=Math.max(i,n);return{min:m(r),max:m(a)}},scaleRange:function(e,t){var i=Math.abs(this.pointOffset(t));var n=this.options.max-this.options.min;var r=this.scaleToDelta(e,n);var a=i*r;var o=(1-i)*r;var s=m(Si(this.options.min)+a);var l=m(Si(this.options.max)-o);if(l-s<cn)l=m(Si(s)+cn);return{min:s,max:l}},zoomRange:function(e,t){var i=this.scaleRange(e,t);var n=m(T(Si(i.min),this.totalMin,this.totalMax));var r=m(T(Si(i.max),this.totalMin,this.totalMax));return{min:n,max:r}}});function fn(e){var t=ti;if(e>=di)t=ai;else if(e>=fi)t=ri;else if(e>=hi)t=ni;else if(e>=ci)t=ii;return t}function dn(c,h,e){var t=e.min||c;var i=e.max||h;var n=e.baseUnit||(i&&t?fn(vi(i,t)):ti);var r=pi[n];var a=e.weekStartDay||0;var o=wi(Si(t)-1,n,a)||m(i);var s=xi(Si(i)+1,n,a);var f=e.majorUnit?e.majorUnit:undefined;var l=f||en(ft(o.getTime(),s.getTime()),r)/r;var u=Di(o,s,n);var d=en(u,l);var p=d-u;var v=Math.floor(p/2);var g=p-v;if(!e.baseUnit)delete e.baseUnit;e.baseUnit=e.baseUnit||n;e.min=e.min||bi(o,-v,n,a);e.max=e.max||bi(s,g,n,a);e.minorUnit=e.minorUnit||l/5;e.majorUnit=l;return e}Ke(hn,{type:u,majorGridLines:{visible:true,width:1,color:l},labels:{dateFormats:Vi}});var pn=10,vn=1e-6,gn=Qt.extend({init:function(e,t,i,n){var r=f({majorUnit:pn,min:e,max:t},i);var a=r.majorUnit;var o=yn(t,a);var s=_n(e,t,r);var l=mn(s,o,r,i);r.max=l.max;r.min=l.min;r.minorUnit=i.minorUnit||k(a-1,b);Qt.fn.init.call(this,r,n);this.totalMin=y(i.min)?Math.min(s,i.min):s;this.totalMax=y(i.max)?Math.max(o,i.max):o;this.logMin=k(wn(l.min,a),b);this.logMax=k(wn(l.max,a),b);this.seriesMin=e;this.seriesMax=t;this.createLabels()},clone:function(){return new gn(this.seriesMin,this.seriesMax,c.extend({},this.options),this.chartService)},startValue:function(){return this.options.min},getSlot:function(e,c,h){var t=this;var i=t.options;var n=t.logMin;var f=t.logMax;var d=i.majorUnit;var p=i.min;var v=i.max;var r=this.lineInfo();var g=r.axis;var a=r.axisDir;var o=r.lineBox;var m=r.lineSize;var _=r.lineStart;var y=a*(m/(f-n));var s=$e(e,c||1);var l=$e(c,e||1);if(s<=0||l<=0)return null;if(h){s=T(s,p,v);l=T(l,p,v)}s=wn(s,d);l=wn(l,d);var b=Math.min(s,l)-n;var w=Math.max(s,l)-n;var u=new C(o.x1,o.y1,o.x1,o.y1);u[g+1]=tn(_+y*(a>0?b:w));u[g+2]=tn(_+y*(a>0?w:b));return u},getValue:function(e){var t=this;var i=t.options;var n=t.logMin;var r=t.logMax;var a=i.majorUnit;var o=this.lineInfo();var s=o.axis;var c=o.axisDir;var h=o.lineStart;var l=o.lineSize;var f=(r-n)/l;var u=c*(e[s]-h);var d=u*f;if(u<0||u>l)return null;var p=n+d;return k(Math.pow(a,p),b)},range:function(){var e=this.options;return{min:e.min,max:e.max}},translateRange:function(e){var t=this;var i=t.options;var n=t.logMin;var r=t.logMax;var a=i.reverse;var o=i.vertical;var s=i.majorUnit;var l=this.lineBox();var c=o?l.height():l.width();var h=c/(r-n);var u=k(e/h,b);if((o||a)&&!(o&&a))u=-u;return{min:Math.pow(s,n+u),max:Math.pow(s,r+u),offset:u}},labelsCount:function(){var e=Math.floor(this.logMax);var t=Math.floor(e-this.logMin)+1;return t},getMajorTickPositions:function(){var t=[];this.traverseMajorTicksPositions(function(e){t.push(e)},{step:1,skip:0});return t},createTicks:function(i){var e=this.options;var t=e.majorTicks;var n=e.minorTicks;var r=e.vertical;var a=e.labels.mirror;var o=this.lineBox();var s=[];var l={vertical:r};function u(e,t){l.tickX=a?o.x2:o.x2-t.size;l.tickY=a?o.y1-t.size:o.y1;l.position=e;i.append(Xt(l,t))}if(t.visible)this.traverseMajorTicksPositions(u,t);if(n.visible)this.traverseMinorTicksPositions(u,n);return s},createGridLines:function(e){var t=this.options;var i=t.minorGridLines;var n=t.majorGridLines;var r=t.vertical;var a=e.lineBox();var o={lineStart:a[r?"x1":"y1"],lineEnd:a[r?"x2":"y2"],vertical:r};var s=[];var l=this.gridLinesVisual();function u(e,t){if(!Me(e,s)){o.position=e;l.append(Kt(o,t));s.push(e)}}if(n.visible)this.traverseMajorTicksPositions(u,n);if(i.visible)this.traverseMinorTicksPositions(u,i);return l.children},traverseMajorTicksPositions:function(e,t){var i=this.lineInfo();var n=i.lineStart;var r=i.step;var a=this;var o=a.logMin;var s=a.logMax;for(var l=Math.ceil(o)+t.skip;l<=s;l+=t.step){var u=k(n+r*(l-o),b);e(u,t)}},traverseMinorTicksPositions:function(e,t){var c=this;var i=this.options;var h=i.min;var f=i.max;var d=i.minorUnit;var p=i.majorUnit;var n=this.lineInfo();var v=n.lineStart;var g=n.step;var r=this;var a=r.logMin;var m=r.logMax;var _=Math.floor(a);for(var o=_;o<m;o++){var s=c._minorIntervalOptions(o);for(var l=t.skip;l<d;l+=t.step){var u=s.value+l*s.minorStep;if(u>f)break;if(u>=h){var y=k(v+g*(wn(u,p)-a),b);e(y,t)}}}},createAxisLabel:function(e,t,i){var n=Math.ceil(this.logMin+e);var r=Math.pow(this.options.majorUnit,n);var a=this.axisLabelText(r,t,i);return new Lt(r,a,e,null,t)},shouldRenderNote:function(e){var t=this.range();return t.min<=e&&e<=t.max},pan:function(e){var t=this.translateRange(e);return this.limitRange(t.min,t.max,this.totalMin,this.totalMax,t.offset)},pointsRange:function(e,t){var i=this.getValue(e);var n=this.getValue(t);var r=Math.min(i,n);var a=Math.max(i,n);return{min:r,max:a}},scaleRange:function(e,t){var i=this.options;var n=i.majorUnit;var r=wn(this.options.min,n);var a=wn(this.options.max,n);var o=Math.abs(this.pointOffset(t));var c=a-r;var s=this.scaleToDelta(e,c);var l=Math.pow(n,r+o*s);var u=Math.pow(n,a-(1-o)*s);if(u-l<vn)u=l+vn;return{min:l,max:u}},zoomRange:function(e,t){var i=this.scaleRange(e,t);var n=this;var r=n.totalMin;var a=n.totalMax;return{min:T(i.min,r,a),max:T(i.max,r,a)}},_minorIntervalOptions:function(e){var t=this.options;var i=t.minorUnit;var n=t.majorUnit;var r=Math.pow(n,e);var a=Math.pow(n,e+1);var o=a-r;var s=o/i;return{value:r,minorStep:s}},lineInfo:function(){var e=Qt.fn.lineInfo.call(this);e.step=e.axisDir*(e.lineSize/(this.logMax-this.logMin));return e}});function mn(e,t,i,n){var r=i.min;var a=i.max;if(y(i.axisCrossingValue)&&i.axisCrossingValue<=0)bn();if(!y(n.max))a=t;else if(n.max<=0)bn();if(!y(n.min))r=e;else if(n.min<=0)bn();return{min:r,max:a}}function _n(e,t,i){var n=i.majorUnit;var r=e;if(e<=0)r=t<=1?Math.pow(n,-2):1;else if(!i.narrowRange)r=Math.pow(n,Math.floor(wn(e,n)));return r}function yn(e,t){var i=k(wn(e,t),b)%1;var n;if(e<=0)n=t;else if(i!==0&&(i<.3||i>.9))n=Math.pow(t,wn(e,t)+.2);else n=Math.pow(t,Math.ceil(wn(e,t)));return n}function bn(){throw new Error("Non positive values cannot be used for a logarithmic axis")}function wn(e,t){return Math.log(e)/Math.log(t)}Ke(gn,{type:"log",majorUnit:pn,minorUnit:1,axisCrossingValue:1,vertical:true,majorGridLines:{visible:true,width:1,color:l},zIndex:1,_deferLabels:true});var xn={createGridLines:function(e){var t=this.options;var i=Math.abs(this.box.center().y-e.lineBox().y1);var n=[];var r=false;var a,o;if(t.majorGridLines.visible){a=this.majorGridLineAngles(e);r=true;n=this.renderMajorGridLines(a,i,t.majorGridLines)}if(t.minorGridLines.visible){o=this.minorGridLineAngles(e,r);Le(n,this.renderMinorGridLines(o,i,t.minorGridLines,e,r))}return n},renderMajorGridLines:function(e,t,i){return this.renderGridLines(e,t,i)},renderMinorGridLines:function(e,t,i,n,r){var a=this.radiusCallback&&this.radiusCallback(t,n,r);return this.renderGridLines(e,t,i,a)},renderGridLines:function(e,t,i,n){var r={stroke:{width:i.width,color:i.color,dashType:i.dashType}};var a=this.box.center();var o=new p([a.x,a.y],t);var s=this.gridLinesVisual();for(var l=0;l<e.length;l++){var u=new v(r);if(n)o.radius=n(e[l]);u.moveTo(o.center).lineTo(o.pointAt(e[l]+180));s.append(u)}return s.children},gridLineAngles:function(e,t,i,n,r){var a=this;var o=this.intervals(t,i,n,r);var s=e.options;var l=s.visible&&(s.line||{}).visible!==false;return Pe(o,function(e){var t=a.intervalAngle(e);if(!l||t!==90)return t})}},kn=Ri.extend({range:function(){return{min:0,max:this.options.categories.length}},reflow:function(e){this.box=e;this.reflowLabels()},lineBox:function(){return this.box},reflowLabels:function(){var e=this;var t=this;var i=t.labels;var n=t.options.labels;var r=n.skip||0;var a=n.step||1;var o=new C;for(var s=0;s<i.length;s++){i[s].reflow(o);var l=i[s].box;i[s].reflow(e.getSlot(r+s*a).adjacentBox(0,l.width(),l.height()))}},intervals:function(e,t,i,n){if(n===void 0)n=false;var r=this.options;var c=r.categories.length;var a=c/e||1;var o=360/a;var h=t||0;var f=i||1;var s=[];var l=0;for(var u=h;u<a;u+=f){if(r.reverse)l=360-u*o;else l=u*o;l=k(l,P)%360;if(!(n&&Me(l,n)))s.push(l)}return s},majorIntervals:function(){return this.intervals(1)},minorIntervals:function(){return this.intervals(.5)},intervalAngle:function(e){return(360+e+this.options.startAngle)%360},majorAngles:function(){var t=this;return Pe(this.majorIntervals(),function(e){return t.intervalAngle(e)})},createLine:function(){return[]},majorGridLineAngles:function(e){var t=this.options.majorGridLines;return this.gridLineAngles(e,1,t.skip,t.step)},minorGridLineAngles:function(e,t){var i=this.options;var n=i.minorGridLines;var r=i.majorGridLines;var a=t?this.intervals(1,r.skip,r.step):null;return this.gridLineAngles(e,.5,n.skip,n.step,a)},radiusCallback:function(t,e,i){if(e.options.type!==_){var n=qe(360/(this.options.categories.length*2));var r=Math.cos(n)*t;var a=this.majorAngles();var o=function(e){if(!i&&Me(e,a))return t;return r};return o}},createPlotBands:function(){var e=this;var t=this.options.plotBands||[];var i=this._plotbandGroup=new g({zIndex:-1});for(var n=0;n<t.length;n++){var r=t[n];var a=e.plotBandSlot(r);var o=e.getSlot(r.from);var s=r.from-Math.floor(r.from);a.startAngle+=s*o.angle;var l=Math.ceil(r.to)-r.to;a.angle-=(l+s)*o.angle;var u=yt.current.createRing(a,{fill:{color:r.color,opacity:r.opacity},stroke:{opacity:r.opacity}});i.append(u)}this.appendVisual(i)},plotBandSlot:function(e){return this.getSlot(e.from,e.to-1)},getSlot:function(e,t){var i=this.options;var n=i.justified;var r=this.box;var a=this.majorAngles();var o=a.length;var s=360/o;var l=e;if(i.reverse&&!n)l=(l+1)%o;l=T(Math.floor(l),0,o-1);var u=a[l];if(n){u=u-s/2;if(u<0)u+=360}var c=T(Math.ceil(t||l),l,o-1);var h=c-l+1;var f=s*h;return new vt(r.center(),0,r.height()/2,u,f)},slot:function(e,t){var i=this.getSlot(e,t);var n=i.startAngle+180;var r=n+i.angle;return new h.Arc([i.center.x,i.center.y],{startAngle:n,endAngle:r,radiusX:i.radius,radiusY:i.radius})},pointCategoryIndex:function(e){var t=this;var i=this.options.categories.length;var n=null;for(var r=0;r<i;r++){var a=t.getSlot(r);if(a.containsPoint(e)){n=r;break}}return n}}),Cn=(Ke(kn,{startAngle:90,labels:{margin:we(10)},majorGridLines:{visible:true},justified:true}),f(kn.prototype,xn),Qt.extend({init:function(e,t){Qt.fn.init.call(this,e,t);var i=this.options;i.minorUnit=i.minorUnit||i.majorUnit/2},getDivisions:function(e){return rn.prototype.getDivisions.call(this,e)-1},reflow:function(e){this.box=e;this.reflowLabels()},reflowLabels:function(){var e=this;var t=this;var i=t.options;var n=t.labels;var r=t.options.labels;var a=r.skip||0;var o=r.step||1;var s=new C;var c=this.intervals(i.majorUnit,a,o);for(var l=0;l<n.length;l++){n[l].reflow(s);var u=n[l].box;n[l].reflow(e.getSlot(c[l]).adjacentBox(0,u.width(),u.height()))}},lineBox:function(){return this.box},intervals:function(e,t,i,n){if(n===void 0)n=false;var r=this.options.min;var a=this.getDivisions(e);var o=[];var s=t||0;var c=i||1;for(var l=s;l<a;l+=c){var u=(360+r+l*e)%360;if(!(n&&Me(u,n)))o.push(u)}return o},majorIntervals:function(){return this.intervals(this.options.majorUnit)},minorIntervals:function(){return this.intervals(this.options.minorUnit)},intervalAngle:function(e){return(540-e-this.options.startAngle)%360},createLine:function(){return[]},majorGridLineAngles:function(e){var t=this.options.majorGridLines;return this.gridLineAngles(e,this.options.majorUnit,t.skip,t.step)},minorGridLineAngles:function(e,t){var i=this.options;var n=i.minorGridLines;var r=i.majorGridLines;var a=t?this.intervals(i.majorUnit,r.skip,r.step):null;return this.gridLineAngles(e,i.minorUnit,n.skip,n.step,a)},plotBandSlot:function(e){return this.getSlot(e.from,e.to)},getSlot:function(e,t){var i=this;var n=i.options;var r=i.box;var a=n.startAngle;var o=T(e,n.min,n.max);var s=T(t||o,o,n.max);if(n.reverse){o*=-1;s*=-1}o=(540-o-a)%360;s=(540-s-a)%360;if(s<o){var l=o;o=s;s=l}return new vt(r.center(),0,r.height()/2,o,s-o)},slot:function(e,t){if(t===void 0)t=e;var i=this.options;var n=360-i.startAngle;var r=this.getSlot(e,t);var a=Math.min(e,t);var o=Math.max(e,t);var s,l;if(i.reverse){s=a;l=o}else{s=360-o;l=360-a}s=(s+n)%360;l=(l+n)%360;return new h.Arc([r.center.x,r.center.y],{startAngle:s,endAngle:l,radiusX:r.radius,radiusY:r.radius})},getValue:function(e){var t=this.options;var i=this.box.center();var n=e.x-i.x;var r=e.y-i.y;var a=Math.round(Fe(Math.atan2(r,n)));var o=t.startAngle;if(!t.reverse){a*=-1;o*=-1}return(a+o+360)%360},valueRange:function(){return{min:0,max:Math.PI*2}}})),Sn=(Ke(Cn,{type:"polar",startAngle:0,reverse:false,majorUnit:60,min:0,max:360,labels:{margin:we(10)},majorGridLines:{color:l,visible:true,width:1},minorGridLines:{color:"#aaa"}}),f(Cn.prototype,xn,{createPlotBands:kn.prototype.createPlotBands,majorAngles:kn.prototype.majorAngles,range:rn.prototype.range,labelsCount:rn.prototype.labelsCount,createAxisLabel:rn.prototype.createAxisLabel}),{options:{majorGridLines:{visible:true}},createPlotBands:function(){var e=this;var t=this.options;var c=t.majorGridLines.type;var i=t.plotBands;if(i===void 0)i=[];var n=this.plotArea.polarAxis;var h=n.majorAngles();var r=n.box.center();var a=this._plotbandGroup=new g({zIndex:-1});for(var o=0;o<i.length;o++){var s=i[o];var l={fill:{color:s.color,opacity:s.opacity},stroke:{opacity:s.opacity}};var f=e.getSlot(s.from,s.to,true);var d=new vt(r,r.y-f.y2,r.y-f.y1,0,360);var u=void 0;if(c===_)u=yt.current.createRing(d,l);else u=v.fromPoints(e.plotBandPoints(d,h),l).close();a.append(u)}this.appendVisual(a)},plotBandPoints:function(e,t){var i=[];var n=[];var r=[e.center.x,e.center.y];var a=new p(r,e.innerRadius);var o=new p(r,e.radius);for(var s=0;s<t.length;s++){i.push(a.pointAt(t[s]+180));n.push(o.pointAt(t[s]+180))}i.reverse();i.push(i[0]);n.push(n[0]);return n.concat(i)},createGridLines:function(e){var t=this.options;var i=this.radarMajorGridLinePositions();var n=e.majorAngles();var r=e.box.center();var a=[];if(t.majorGridLines.visible)a=this.renderGridLines(r,i,n,t.majorGridLines);if(t.minorGridLines.visible){var o=this.radarMinorGridLinePositions();Le(a,this.renderGridLines(r,o,n,t.minorGridLines))}return a},renderGridLines:function(e,t,i,n){var c={stroke:{width:n.width,color:n.color,dashType:n.dashType}};var r=n.skip;if(r===void 0)r=0;var a=n.step;if(a===void 0)a=0;var o=this.gridLinesVisual();for(var s=r;s<t.length;s+=a){var h=e.y-t[s];if(h>0){var f=new p([e.x,e.y],h);if(n.type===_)o.append(new d.Circle(f,c));else{var l=new v(c);for(var u=0;u<i.length;u++)l.lineTo(f.pointAt(i[u]+180));l.close();o.append(l)}}}return o.children},getValue:function(e){var t=this.lineBox();var i=this.plotArea.polarAxis;var n=i.majorAngles();var r=i.box.center();var a=e.distanceTo(r);var o=a;if(this.options.majorGridLines.type!==_&&n.length>1){var s=e.x-r.x;var c=e.y-r.y;var l=(Fe(Math.atan2(c,s))+540)%360;n.sort(function(e,t){return Tn(e,l)-Tn(t,l)});var h=Tn(n[0],n[1])/2;var f=Tn(l,n[0]);var u=90-h;var d=180-f-u;o=a*(Math.sin(qe(d))/Math.sin(qe(u)))}return this.axisType().prototype.getValue.call(this,new dt(t.x1,t.y2-o))}});function Tn(e,t){return 180-Math.abs(Math.abs(e-t)-180)}var An=rn.extend({radarMajorGridLinePositions:function(){return this.getTickPositions(this.options.majorUnit)},radarMinorGridLinePositions:function(){var e=this.options;var t=0;if(e.majorGridLines.visible)t=e.majorUnit;return this.getTickPositions(e.minorUnit,t)},axisType:function(){return rn}}),Mn=(f(An.prototype,Sn),gn.extend({radarMajorGridLinePositions:function(){var t=[];this.traverseMajorTicksPositions(function(e){t.push(e)},this.options.majorGridLines);return t},radarMinorGridLinePositions:function(){var t=[];this.traverseMinorTicksPositions(function(e){t.push(e)},this.options.minorGridLines);return t},axisType:function(){return gn}})),Dn=(f(Mn.prototype,Sn),.333),En=.01,In=e.extend({init:function(e){this.closed=e},process:function(c){var h=this;var e=c.slice(0);var t=[];var i=this.closed;var n=e.length;if(n>2){this.removeDuplicates(0,e);n=e.length}if(n<2||n===2&&e[0].equals(e[1]))return t;var r=e[0];var a=e[1];var o=e[2];t.push(new M(r));while(r.equals(e[n-1])){i=true;e.pop();n--}if(n===2){var f=this.tangent(r,a,w,x);Ge(t).controlOut(this.firstControlPoint(f,r,a,w,x));t.push(new M(a,this.secondControlPoint(f,r,a,w,x)));return t}var s,d;if(i){r=e[n-1];a=e[0];o=e[1];var p=this.controlPoints(r,a,o);s=p[1];d=p[0]}else{var v=this.tangent(r,a,w,x);s=this.firstControlPoint(v,r,a,w,x)}var l=s;for(var u=0;u<=n-3;u++){h.removeDuplicates(u,e);n=e.length;if(u+3<=n){r=e[u];a=e[u+1];o=e[u+2];var g=h.controlPoints(r,a,o);Ge(t).controlOut(l);l=g[1];var m=g[0];t.push(new M(a,m))}}if(i){r=e[n-2];a=e[n-1];o=e[0];var _=this.controlPoints(r,a,o);Ge(t).controlOut(l);t.push(new M(a,_[0]));Ge(t).controlOut(_[1]);t.push(new M(o,d))}else{var y=this.tangent(a,o,w,x);Ge(t).controlOut(l);t.push(new M(o,this.secondControlPoint(y,a,o,w,x)))}return t},removeDuplicates:function(e,t){while(t[e+1]&&(t[e].equals(t[e+1])||t[e+1].equals(t[e+2])))t.splice(e+1,1)},invertAxis:function(e,t,i){var n=false;if(e.x===t.x)n=true;else if(t.x===i.x){if(t.y<i.y&&e.y<=t.y||i.y<t.y&&t.y<=e.y)n=true}else{var r=this.lineFunction(e,t);var a=this.calculateFunction(r,i.x);if(!(e.y<=t.y&&i.y<=a)&&!(t.y<=e.y&&i.y>=a))n=true}return n},isLine:function(e,t,i){var n=this.lineFunction(e,t);var r=this.calculateFunction(n,i.x);return e.x===t.x&&t.x===i.x||k(r,1)===k(i.y,1)},lineFunction:function(e,t){var i=(t.y-e.y)/(t.x-e.x);var n=e.y-i*e.x;return[n,i]},controlPoints:function(e,t,i){var n=w;var r=x;var a=false;var o=false;var s;if(this.isLine(e,t,i))s=this.tangent(e,t,w,x);else{var l={x:this.isMonotonicByField(e,t,i,w),y:this.isMonotonicByField(e,t,i,x)};if(l.x&&l.y){s=this.tangent(e,i,w,x);a=true}else{if(this.invertAxis(e,t,i)){n=x;r=w}if(l[n])s=0;else{var u;if(i[r]<e[r]&&e[r]<=t[r]||e[r]<i[r]&&t[r]<=e[r])u=Pn((i[r]-e[r])*(t[n]-e[n]));else u=-Pn((i[n]-e[n])*(t[r]-e[r]));s=En*u;o=true}}}var c=this.secondControlPoint(s,e,t,n,r);if(o){var h=n;n=r;r=h}var f=this.firstControlPoint(s,t,i,n,r);if(a){this.restrictControlPoint(e,t,c,s);this.restrictControlPoint(t,i,f,s)}return[c,f]},restrictControlPoint:function(e,t,i,n){if(e.y<t.y){if(t.y<i.y){i.x=e.x+(t.y-e.y)/n;i.y=t.y}else if(i.y<e.y){i.x=t.x-(t.y-e.y)/n;i.y=e.y}}else if(i.y<t.y){i.x=e.x-(e.y-t.y)/n;i.y=t.y}else if(e.y<i.y){i.x=t.x+(e.y-t.y)/n;i.y=e.y}},tangent:function(e,t,i,n){var r=t[i]-e[i];var a=t[n]-e[n];var o;if(r===0)o=0;else o=a/r;return o},isMonotonicByField:function(e,t,i,n){return i[n]>t[n]&&t[n]>e[n]||i[n]<t[n]&&t[n]<e[n]},firstControlPoint:function(e,t,i,n,r){var a=t[n];var o=i[n];var s=(o-a)*Dn;return this.point(a+s,t[r]+s*e,n,r)},secondControlPoint:function(e,t,i,n,r){var a=t[n];var o=i[n];var s=(o-a)*Dn;return this.point(o-s,i[r]-s*e,n,r)},point:function(e,t,i,n){var r=new h.Point;r[i]=e;r[n]=t;return r},calculateFunction:function(e,t){var i=e.length;var n=0;for(var r=0;r<i;r++)n+=Math.pow(t,r)*e[r];return n}});function Pn(e){return e<=0?-1:1}i.Gradients=St,kendo.deepExtend(kendo.dataviz,{constants:oe,services:$t,autoMajorUnit:ft,Point:dt,Box:C,Ring:vt,Sector:mt,ShapeBuilder:yt,ShapeElement:xt,ChartElement:bt,BoxElement:wt,RootElement:At,FloatElement:Dt,Text:It,TextBox:Ot,Title:zt,AxisLabel:Lt,Axis:Qt,Note:Vt,CategoryAxis:Ri,DateCategoryAxis:Ki,DateValueAxis:hn,NumericAxis:rn,LogarithmicAxis:gn,PolarAxis:Cn,RadarCategoryAxis:kn,RadarNumericAxis:An,RadarLogarithmicAxis:Mn,CurveProcessor:In,rectToBox:Pt,addClass:le,removeClass:ce,alignPathToPixel:he,clockwise:fe,convertableToNumber:ve,deepExtend:f,elementStyles:be,getSpacing:we,getTemplate:Ce,getter:a,grep:Se,hasClasses:Te,HashMap:Ae,inArray:Me,interpolateValue:De,InstanceObserver:Ie,isArray:se,isFunction:r,isNumber:de,isObject:ge,isString:pe,map:Pe,mousewheelDelta:Oe,FontLoader:Xe,setDefaultOptions:Ke,sparseArrayLimits:Qe,styleValue:me,find:Ze,elementScale:nt,autoTextColor:rt,createHashSet:ut,defaultErrorHandler:ct,keys:ht,append:Le,bindEvents:Re,Class:e,defined:y,deg:Fe,elementOffset:Ve,elementSize:Ne,eventCoordinates:He,eventElement:Ue,hashKey:je,last:Ge,limitValue:T,logToConsole:kendo.logToConsole,objectKey:We,rad:qe,round:k,unbindEvents:Ye,valueOrDefault:$e,absoluteDateDiff:vi,addDuration:bi,addTicks:gi,ceilDate:xi,dateComparer:ki,dateDiff:Ci,dateEquals:Ti,dateIndex:Mi,duration:Di,floorDate:wi,lteDateIndex:Ei,startOfWeek:mi,toDate:m,parseDate:Ii,parseDates:Pi,toTime:Si,firstDay:Bi})})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/core/core.min",["./kendo-core.min"],function(){var n=window.kendo.jQuery,t=kendo.dataviz,e=t.services,r=kendo.drawing;t.SASS_THEMES=["sass","default-v2","bootstrap-v4","material-v2"],t.ExportMixin={extend:function(e,t){if(!e.exportVisual)throw new Error("Mixin target has no exportVisual method defined.");e.exportSVG=this.exportSVG;e.exportImage=this.exportImage;e.exportPDF=this.exportPDF;if(!t){e.svg=this.svg;e.imageDataURL=this.imageDataURL}},exportSVG:function(e){return r.exportSVG(this.exportVisual(),e)},exportImage:function(e){return r.exportImage(this.exportVisual(e),e)},exportPDF:function(e){return r.exportPDF(this.exportVisual(),e)},svg:function(){if(r.svg.Surface)return r.svg.exportGroup(this.exportVisual());else throw new Error("SVG Export failed. Unable to export instantiate kendo.drawing.svg.Surface")},imageDataURL:function(){if(!kendo.support.canvas)return null;if(r.canvas.Surface){var e=n("<div />").css({display:"none",width:this.element.width(),height:this.element.height()}).appendTo(document.body);var t=new r.canvas.Surface(e[0]);t.draw(this.exportVisual());var i=t._rootElement.toDataURL();t.destroy();e.remove();return i}else throw new Error("Image Export failed. Unable to export instantiate kendo.drawing.canvas.Surface")}},e.IntlService.register({format:function(e){return kendo.format.apply(null,[e].concat(Array.prototype.slice.call(arguments,1)))},toString:kendo.toString,parseDate:kendo.parseDate,firstDay:function(){return kendo.culture().calendars.standard.firstDay}}),e.TemplateService.register({compile:kendo.template}),t.Point2D=t.Point,t.Box2D=t.Box,t.mwDelta=function(e){return t.mousewheelDelta(e.originalEvent)}})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.dataviz.core.min",["./dataviz/core/kendo-core.min","./dataviz/core/core.min"],function(){var e={id:"dataviz.core",name:"Core",description:"The DataViz core functions",category:"dataviz",depends:["core","drawing"],hidden:true}})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/themes/chart-base-theme.min",["kendo.dataviz.core.min"],function(){window.kendo.dataviz=window.kendo.dataviz||{};var e=1.5,t=.4,i="#000",n="Arial, Helvetica, sans-serif",c="11px "+n,r="12px "+n,a="16px "+n,o="transparent",s="#fff",l=function(){return{icon:{border:{width:1}},label:{font:r,padding:3},line:{length:10,width:2},visible:true}},h=function(){return{labels:{font:r},notes:l(),title:{font:a,margin:5}}},u=function(){return{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:false},opacity:.4}},f=function(){return{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:false},opacity:.4}},d=function(){return{gap:e,spacing:t}},p=function(){return{outliersField:"",meanField:"",border:{_brightness:.8,width:1},downColor:s,gap:1,highlight:{border:{opacity:1,width:2},whiskers:{width:3},mean:{width:2},median:{width:2}},mean:{width:2},median:{width:2},spacing:.3,whiskers:{width:2}}},v=function(){return{border:{width:0},labels:{background:o},opacity:.6}},g=function(){return{gap:e,spacing:t,target:{color:"#ff0000"}}},m=function(){return{border:{_brightness:.8,width:1},downColor:s,gap:1,highlight:{border:{opacity:1,width:2},line:{width:2}},line:{color:i,width:1},spacing:.3}},_=function(){return{gap:e,spacing:t}},y=function(){return{margin:1}},b=function(){return{width:2}},w=function(){return{gap:1,highlight:{line:{opacity:1,width:3}},line:{width:1},spacing:.3}},x=function(){return{line:{opacity:1,width:0},markers:{size:6,visible:false},opacity:.5}},k=function(){return{markers:{visible:false},width:2}},C=function(){return{gap:e,spacing:t}},S=function(){return{gap:e,spacing:t}},T=function(){return{width:1}},A=function(){return{gap:.5,line:{color:i,width:1},spacing:t}},M=function(){return{labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}}}},D=function(){return{labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}}}},E=function(){return{labels:{color:"",background:o,visible:true},highlight:{border:{width:0}}}},I=function(e){return{visible:true,labels:{font:c},overlay:e.gradients?{}:{gradient:"none"},area:u(),rangeArea:f(),verticalRangeArea:f(),bar:d(),boxPlot:p(),bubble:v(),bullet:g(),candlestick:m(),column:_(),heatmap:E(),pie:M(),donut:y(),funnel:D(),horizontalWaterfall:A(),line:b(),notes:l(),ohlc:w(),radarArea:x(),radarLine:k(),polarArea:x(),polarLine:k(),rangeBar:C(),rangeColumn:S(),scatterLine:T(),verticalArea:u(),verticalBoxPlot:p(),verticalBullet:g(),verticalLine:b(),waterfall:A()}},P=function(){return{font:a}},B=function(){return{labels:{font:r}}},O;kendo.deepExtend(kendo.dataviz,{chartBaseTheme:function(e){if(e===void 0)e={};return{axisDefaults:h(),categoryAxis:{majorGridLines:{visible:true}},navigator:{pane:{height:90,margin:{top:10}}},seriesDefaults:I(e),title:P(),legend:B()}}})})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/themes/auto-theme.min",["kendo.dataviz.core.min"],function(){var l=window.kendo.jQuery,t,i=30;function u(){var e='<div class="k-var--series-a"></div>'+'<div class="k-var--series-b"></div>'+'<div class="k-var--series-c"></div>'+'<div class="k-var--series-d"></div>'+'<div class="k-var--series-e"></div>'+'<div class="k-var--series-f"></div>';for(var t=0;t<i;t++)e+='<div class="k-var--series-'+(t+1)+'"></div>';return e}function e(e){if(!e&&t)return t;var a={chart:kendo.dataviz.chartBaseTheme()};var i=l('<div style="display: none">'+'  <div class="k-var--accent"></div>'+'  <div class="k-var--accent-contrast"></div>'+'  <div class="k-var--base"></div>'+'  <div class="k-var--background"></div>'+'  <div class="k-var--normal-background"></div>'+'  <div class="k-var--normal-text-color"></div>'+'  <div class="k-var--hover-background"></div>'+'  <div class="k-var--hover-text-color"></div>'+'  <div class="k-var--selected-background"></div>'+'  <div class="k-var--selected-text-color"></div>'+'  <div class="k-var--chart-error-bars-background"></div>'+'  <div class="k-var--chart-notes-background"></div>'+'  <div class="k-var--chart-notes-border"></div>'+'  <div class="k-var--chart-notes-lines"></div>'+'  <div class="k-var--chart-crosshair-background"></div>'+'  <div class="k-var--chart-inactive"></div>'+'  <div class="k-var--chart-major-lines"></div>'+'  <div class="k-var--chart-minor-lines"></div>'+'  <div class="k-var--chart-area-opacity"></div>'+'  <div class="k-var--chart-area-inactive-opacity"></div>'+'  <div class="k-var--chart-line-inactive-opacity"></div>'+'  <div class="k-widget k-chart">'+'      <div class="k-var--chart-font"></div>'+'      <div class="k-var--chart-title-font"></div>'+'      <div class="k-var--chart-pane-title-font"></div>'+'      <div class="k-var--chart-label-font"></div>'+"  </div>"+'  <div class="k-var--series-unset"></div>'+'  <div class="k-var--series">'+u()+"  </div>"+'  <div class="k-var--gauge-pointer"></div>'+'  <div class="k-var--gauge-track"></div>'+"</div>").appendTo(document.body);function n(e,t){s(e,o(t,"backgroundColor"))}function o(e,t){return i.find(".k-var--"+e).css(t)}function s(e,t){var i=a;var n=e.split(".");var r=n.shift();while(n.length>0){i=i[r]=i[r]||{};r=n.shift()}i[r]=t}function r(e,t){var i=parseFloat(o(t,"opacity"));if(!isNaN(i)&&i<1)e.forEach(function(e){s("chart.seriesDefaults."+e+".highlight.inactiveOpacity",i)})}(function e(){n("chart.axisDefaults.crosshair.color","chart-crosshair-background");n("chart.axisDefaults.labels.color","normal-text-color");n("chart.axisDefaults.line.color","chart-major-lines");n("chart.axisDefaults.majorGridLines.color","chart-major-lines");n("chart.axisDefaults.minorGridLines.color","chart-minor-lines");n("chart.axisDefaults.notes.icon.background","chart-notes-background");n("chart.axisDefaults.notes.icon.border.color","chart-notes-border");n("chart.axisDefaults.notes.line.color","chart-notes-lines");n("chart.axisDefaults.title.color","normal-text-color");n("chart.chartArea.background","background");n("chart.legend.inactiveItems.labels.color","chart-inactive");n("chart.legend.inactiveItems.markers.color","chart-inactive");n("chart.legend.labels.color","normal-text-color");n("chart.seriesDefaults.boxPlot.downColor","chart-major-lines");n("chart.seriesDefaults.boxPlot.mean.color","base");n("chart.seriesDefaults.boxPlot.median.color","base");n("chart.seriesDefaults.boxPlot.whiskers.color","accent");n("chart.seriesDefaults.bullet.target.color","accent");n("chart.seriesDefaults.candlestick.downColor","normal-text-color");n("chart.seriesDefaults.candlestick.line.color","normal-text-color");n("chart.seriesDefaults.errorBars.color","chart-error-bars-background");n("chart.seriesDefaults.horizontalWaterfall.line.color","chart-major-lines");n("chart.seriesDefaults.icon.border.color","chart-major-lines");n("chart.seriesDefaults.labels.background","background");n("chart.seriesDefaults.labels.color","normal-text-color");n("chart.seriesDefaults.notes.icon.background","chart-notes-background");n("chart.seriesDefaults.notes.icon.border.color","chart-notes-border");n("chart.seriesDefaults.notes.line.color","chart-notes-lines");n("chart.seriesDefaults.verticalBoxPlot.downColor","chart-major-lines");n("chart.seriesDefaults.verticalBoxPlot.mean.color","base");n("chart.seriesDefaults.verticalBoxPlot.median.color","base");n("chart.seriesDefaults.verticalBoxPlot.whiskers.color","accent");n("chart.seriesDefaults.verticalBullet.target.color","accent");n("chart.seriesDefaults.waterfall.line.color","chart-major-lines");n("chart.title.color","normal-text-color");n("diagram.shapeDefaults.fill.color","accent");n("diagram.shapeDefaults.content.color","accent-contrast");n("diagram.shapeDefaults.connectorDefaults.fill.color","normal-text-color");n("diagram.shapeDefaults.connectorDefaults.stroke.color","accent-contrast");n("diagram.shapeDefaults.connectorDefaults.hover.fill.color","accent-contrast");n("diagram.shapeDefaults.connectorDefaults.hover.stroke.color","normal-text-color");n("diagram.editable.resize.handles.stroke.color","normal-text-color");n("diagram.editable.resize.handles.fill.color","normal-background");n("diagram.editable.resize.handles.hover.stroke.color","normal-text-color");n("diagram.editable.resize.handles.hover.fill.color","normal-text-color");n("diagram.selectable.stroke.color","normal-text-color");n("diagram.connectionDefaults.stroke.color","normal-text-color");n("diagram.connectionDefaults.content.color","normal-text-color");n("diagram.connectionDefaults.selection.handles.fill.color","accent-contrast");n("diagram.connectionDefaults.selection.handles.stroke.color","normal-text-color");n("diagram.connectionDefaults.selection.stroke.color","normal-text-color");n("gauge.pointer.color","gauge-pointer");n("gauge.scale.labels.color","normal-text-color");n("gauge.scale.minorTicks.color","normal-text-color");n("gauge.scale.majorTicks.color","normal-text-color");n("gauge.scale.line.color","normal-text-color");n("gauge.scale.rangePlaceholderColor","gauge-track");var t=parseFloat(o("chart-area-opacity","opacity"));if(!isNaN(t)){s("chart.seriesDefaults.area.opacity",t);s("chart.seriesDefaults.radarArea.opacity",t);s("chart.seriesDefaults.verticalArea.opacity",t);s("chart.seriesDefaults.labels.opacity",t)}r(["area","verticalArea"],"chart-area-inactive-opacity");r(["line","verticalLine"],"chart-line-inactive-opacity")})();(function e(){s("diagram.connectionDefaults.selection.handles.width",8);s("diagram.connectionDefaults.selection.handles.height",8)})();(function e(){function t(e){return o(e,"fontWeight")+" "+o(e,"fontSize")+" "+o(e,"fontFamily")}var i=t("chart-font");var n=t("chart-title-font");var r=t("chart-pane-title-font");var a=t("chart-label-font");s("chart.axisDefaults.labels.font",a);s("chart.axisDefaults.notes.label.font",i);s("chart.axisDefaults.title.font",i);s("chart.legend.labels.font",i);s("chart.seriesDefaults.labels.font",a);s("chart.seriesDefaults.notes.label.font",i);s("chart.title.font",n);s("chart.paneDefaults.title.font",r)})();(function e(){function n(e){return e.toLowerCase().charCodeAt(0)-"a".charCodeAt(0)}function r(e){var t=e.match(/series-([a-z])$/);if(t!==null)return n(t[1]);var i=e.split("--series-")[1];return parseInt(i,10)-1}var t=l(".k-var--series div").toArray();var a=l(".k-var--series-unset").css("backgroundColor");var i=t.reduce(function(e,t){var i=r(t.className);var n=l(t).css("backgroundColor");if(n!==a)e[i]=n;return e},[]);s("chart.seriesColors",i)})();i.remove();t=a;return a}kendo.dataviz.autoTheme=e})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/themes/themes.min",["./chart-base-theme.min"],function(){var c=window.kendo.jQuery,h=window.kendo,f=h.dataviz.ui,r=h.deepExtend,d="#000",p,v="12px "+"Arial,Helvetica,sans-serif",e="#fff",g=h.dataviz.chartBaseTheme({gradients:true}),m={scale:{labels:{font:v}}},_={shapeDefaults:{hover:{opacity:.2},stroke:{width:0}},editable:{resize:{handles:{width:7,height:7}}},selectable:{stroke:{width:1,dashType:"dot"}},connectionDefaults:{stroke:{width:2},selection:{handles:{width:8,height:8}},editable:{tools:["edit","delete"]}}},y=f.themes,t=f.registerTheme=function(e,t){var i={};i.chart=r({},g,t.chart);i.gauge=r({},m,t.gauge);i.diagram=r({},_,t.diagram);i.treeMap=r({},t.treeMap);var n=i.chart.seriesDefaults;n.verticalLine=r({},n.line);n.verticalArea=r({},n.area);n.rangeArea=r({},n.area);n.verticalRangeArea=r({},n.rangeArea);n.verticalBoxPlot=r({},n.boxPlot);n.polarArea=r({},n.radarArea);n.polarLine=r({},n.radarLine);y[e]=i},i=(t("black",{chart:{title:{color:e},legend:{labels:{color:e},inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}},seriesDefaults:{labels:{color:e},errorBars:{color:e},notes:{icon:{background:"#3b3b3b",border:{color:"#8e8e8e"}},label:{color:e},line:{color:"#8e8e8e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#3d3d3d"}},scatter:{markers:{background:"#3d3d3d"}},scatterLine:{markers:{background:"#3d3d3d"}},waterfall:{line:{color:"#8e8e8e"}},horizontalWaterfall:{line:{color:"#8e8e8e"}},candlestick:{downColor:"#555",line:{color:e},border:{_brightness:1.5,opacity:1},highlight:{border:{color:e,opacity:.2}}},ohlc:{line:{color:e}}},chartArea:{background:"#3d3d3d"},seriesColors:["#0081da","#3aafff","#99c900","#ffeb3d","#b20753","#ff4195"],axisDefaults:{line:{color:"#8e8e8e"},labels:{color:e},majorGridLines:{color:"#545454"},minorGridLines:{color:"#454545"},title:{color:e},crosshair:{color:"#8e8e8e"},notes:{icon:{background:"#3b3b3b",border:{color:"#8e8e8e"}},label:{color:e},line:{color:"#8e8e8e"}}}},gauge:{pointer:{color:"#0070e4"},scale:{rangePlaceholderColor:"#1d1d1d",labels:{color:e},minorTicks:{color:e},majorTicks:{color:e},line:{color:e}}},diagram:{shapeDefaults:{fill:{color:"#0066cc"},connectorDefaults:{fill:{color:e},stroke:{color:"#384049"},hover:{fill:{color:"#3d3d3d"},stroke:{color:"#efefef"}}},content:{color:e}},editable:{resize:{handles:{fill:{color:"#3d3d3d"},stroke:{color:e},hover:{fill:{color:e},stroke:{color:e}}}},rotate:{thumb:{stroke:{color:e},fill:{color:e}}}},selectable:{stroke:{color:e}},connectionDefaults:{stroke:{color:e},content:{color:e},selection:{handles:{fill:{color:"#3d3d3d"},stroke:{color:"#efefef"}}}}},treeMap:{colors:[["#0081da","#314b5c"],["#3aafff","#3c5464"],["#99c900","#4f5931"],["#ffeb3d","#64603d"],["#b20753","#543241"],["#ff4195","#643e4f"]]}}),t("blueopal",{chart:{title:{color:"#293135"},legend:{labels:{color:"#293135"},inactiveItems:{labels:{color:"#27A5BA"},markers:{color:"#27A5BA"}}},seriesDefaults:{labels:{color:d,background:e,opacity:.5},errorBars:{color:"#293135"},candlestick:{downColor:"#c4d0d5",line:{color:"#9aabb2"}},waterfall:{line:{color:"#9aabb2"}},horizontalWaterfall:{line:{color:"#9aabb2"}},notes:{icon:{background:"transparent",border:{color:"#9aabb2"}},label:{color:"#293135"},line:{color:"#9aabb2"}}},seriesColors:["#0069a5","#0098ee","#7bd2f6","#ffb800","#ff8517","#e34a00"],axisDefaults:{line:{color:"#9aabb2"},labels:{color:"#293135"},majorGridLines:{color:"#c4d0d5"},minorGridLines:{color:"#edf1f2"},title:{color:"#293135"},crosshair:{color:"#9aabb2"},notes:{icon:{background:"transparent",border:{color:"#9aabb2"}},label:{color:"#293135"},line:{color:"#9aabb2"}}}},gauge:{pointer:{color:"#005c83"},scale:{rangePlaceholderColor:"#daecf4",labels:{color:"#293135"},minorTicks:{color:"#293135"},majorTicks:{color:"#293135"},line:{color:"#293135"}}},diagram:{shapeDefaults:{fill:{color:"#7ec6e3"},connectorDefaults:{fill:{color:"#003f59"},stroke:{color:e},hover:{fill:{color:e},stroke:{color:"#003f59"}}},content:{color:"#293135"}},editable:{resize:{handles:{fill:{color:e},stroke:{color:"#003f59"},hover:{fill:{color:"#003f59"},stroke:{color:"#003f59"}}}},rotate:{thumb:{stroke:{color:"#003f59"},fill:{color:"#003f59"}}}},selectable:{stroke:{color:"#003f59"}},connectionDefaults:{stroke:{color:"#003f59"},content:{color:"#293135"},selection:{handles:{fill:{color:"#3d3d3d"},stroke:{color:"#efefef"}}}}},treeMap:{colors:[["#0069a5","#bad7e7"],["#0098ee","#b9e0f5"],["#7bd2f6","#ceeaf6"],["#ffb800","#e6e3c4"],["#ff8517","#e4d8c8"],["#e34a00","#ddccc2"]]}}),t("highcontrast",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#66465B"},markers:{color:"#66465B"}}},seriesDefaults:{labels:{color:"#ffffff"},errorBars:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#ffffff"}},label:{color:"#ffffff"},line:{color:"#ffffff"}},pie:{overlay:{gradient:"sharpGlass"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#2c232b"}},scatter:{markers:{background:"#2c232b"}},scatterLine:{markers:{background:"#2c232b"}},area:{opacity:.5},waterfall:{line:{color:"#ffffff"}},horizontalWaterfall:{line:{color:"#ffffff"}},candlestick:{downColor:"#664e62",line:{color:"#ffffff"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#ffffff",opacity:1}}},ohlc:{line:{color:"#ffffff"}}},chartArea:{background:"#2c232b"},seriesColors:["#a7008f","#ffb800","#3aafff","#99c900","#b20753","#ff4195"],axisDefaults:{line:{color:"#ffffff"},labels:{color:"#ffffff"},majorGridLines:{color:"#664e62"},minorGridLines:{color:"#4f394b"},title:{color:"#ffffff"},crosshair:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#ffffff"}},label:{color:"#ffffff"},line:{color:"#ffffff"}}}},gauge:{pointer:{color:"#a7008f"},scale:{rangePlaceholderColor:"#2c232b",labels:{color:"#ffffff"},minorTicks:{color:"#2c232b"},majorTicks:{color:"#664e62"},line:{color:"#ffffff"}}},diagram:{shapeDefaults:{fill:{color:"#a7018f"},connectorDefaults:{fill:{color:e},stroke:{color:"#2c232b"},hover:{fill:{color:"#2c232b"},stroke:{color:e}}},content:{color:e}},editable:{resize:{handles:{fill:{color:"#2c232b"},stroke:{color:e},hover:{fill:{color:e},stroke:{color:e}}}},rotate:{thumb:{stroke:{color:e},fill:{color:e}}}},selectable:{stroke:{color:e}},connectionDefaults:{stroke:{color:e},content:{color:e},selection:{handles:{fill:{color:"#2c232b"},stroke:{color:e}}}}},treeMap:{colors:[["#a7008f","#451c3f"],["#ffb800","#564122"],["#3aafff","#2f3f55"],["#99c900","#424422"],["#b20753","#471d33"],["#ff4195","#562940"]]}}),t("default",{chart:{title:{color:"#8e8e8e"},legend:{labels:{color:"#232323"},inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}},seriesDefaults:{labels:{color:d,background:e,opacity:.5},errorBars:{color:"#232323"},candlestick:{downColor:"#dedede",line:{color:"#8d8d8d"}},waterfall:{line:{color:"#8e8e8e"}},horizontalWaterfall:{line:{color:"#8e8e8e"}},notes:{icon:{background:"transparent",border:{color:"#8e8e8e"}},label:{color:"#232323"},line:{color:"#8e8e8e"}}},seriesColors:["#ff6800","#a0a700","#ff8d00","#678900","#ffb53c","#396000"],axisDefaults:{line:{color:"#8e8e8e"},labels:{color:"#232323"},minorGridLines:{color:"#f0f0f0"},majorGridLines:{color:"#dfdfdf"},title:{color:"#232323"},crosshair:{color:"#8e8e8e"},notes:{icon:{background:"transparent",border:{color:"#8e8e8e"}},label:{color:"#232323"},line:{color:"#8e8e8e"}}}},gauge:{pointer:{color:"#ea7001"},scale:{rangePlaceholderColor:"#dedede",labels:{color:"#2e2e2e"},minorTicks:{color:"#2e2e2e"},majorTicks:{color:"#2e2e2e"},line:{color:"#2e2e2e"}}},diagram:{shapeDefaults:{fill:{color:"#e15613"},connectorDefaults:{fill:{color:"#282828"},stroke:{color:e},hover:{fill:{color:e},stroke:{color:"#282828"}}},content:{color:"#2e2e2e"}},editable:{resize:{handles:{fill:{color:e},stroke:{color:"#282828"},hover:{fill:{color:"#282828"},stroke:{color:"#282828"}}}},rotate:{thumb:{stroke:{color:"#282828"},fill:{color:"#282828"}}}},selectable:{stroke:{color:"#a7018f"}},connectionDefaults:{stroke:{color:"#282828"},content:{color:"#2e2e2e"},selection:{handles:{fill:{color:e},stroke:{color:"#282828"}}}}},treeMap:{colors:[["#ff6800","#edcfba"],["#a0a700","#dadcba"],["#ff8d00","#edd7ba"],["#678900","#cfd6ba"],["#ffb53c","#eddfc6"],["#396000","#c6ceba"]]}}),t("silver",{chart:{title:{color:"#4e5968"},legend:{labels:{color:"#4e5968"},inactiveItems:{labels:{color:"#B1BCC8"},markers:{color:"#B1BCC8"}}},seriesDefaults:{labels:{color:"#293135",background:"#eaeaec",opacity:.5},errorBars:{color:"#4e5968"},notes:{icon:{background:"transparent",border:{color:"#4e5968"}},label:{color:"#4e5968"},line:{color:"#4e5968"}},line:{markers:{background:"#eaeaec"}},scatter:{markers:{background:"#eaeaec"}},scatterLine:{markers:{background:"#eaeaec"}},pie:{connectors:{color:"#A6B1C0"}},donut:{connectors:{color:"#A6B1C0"}},waterfall:{line:{color:"#a6b1c0"}},horizontalWaterfall:{line:{color:"#a6b1c0"}},candlestick:{downColor:"#a6afbe"}},chartArea:{background:"#eaeaec"},seriesColors:["#007bc3","#76b800","#ffae00","#ef4c00","#a419b7","#430B62"],axisDefaults:{line:{color:"#a6b1c0"},labels:{color:"#4e5968"},majorGridLines:{color:"#dcdcdf"},minorGridLines:{color:"#eeeeef"},title:{color:"#4e5968"},crosshair:{color:"#a6b1c0"},notes:{icon:{background:"transparent",border:{color:"#4e5968"}},label:{color:"#4e5968"},line:{color:"#4e5968"}}}},gauge:{pointer:{color:"#0879c0"},scale:{rangePlaceholderColor:"#f3f3f4",labels:{color:"#515967"},minorTicks:{color:"#515967"},majorTicks:{color:"#515967"},line:{color:"#515967"}}},diagram:{shapeDefaults:{fill:{color:"#1c82c2"},connectorDefaults:{fill:{color:"#515967"},stroke:{color:e},hover:{fill:{color:e},stroke:{color:"#282828"}}},content:{color:"#515967"}},editable:{resize:{handles:{fill:{color:e},stroke:{color:"#515967"},hover:{fill:{color:"#515967"},stroke:{color:"#515967"}}}},rotate:{thumb:{stroke:{color:"#515967"},fill:{color:"#515967"}}}},selectable:{stroke:{color:"#515967"}},connectionDefaults:{stroke:{color:"#515967"},content:{color:"#515967"},selection:{handles:{fill:{color:e},stroke:{color:"#515967"}}}}},treeMap:{colors:[["#007bc3","#c2dbea"],["#76b800","#dae7c3"],["#ffae00","#f5e5c3"],["#ef4c00","#f2d2c3"],["#a419b7","#e3c7e8"],["#430b62","#d0c5d7"]]}}),t("metro",{chart:{title:{color:"#777777"},legend:{labels:{color:"#777777"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:d},errorBars:{color:"#777777"},notes:{icon:{background:"transparent",border:{color:"#777777"}},label:{color:"#777777"},line:{color:"#777777"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},waterfall:{line:{color:"#c7c7c7"}},horizontalWaterfall:{line:{color:"#c7c7c7"}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:["#8ebc00","#309b46","#25a0da","#ff6900","#e61e26","#d8e404","#16aba9","#7e51a1","#313131","#ed1691"],axisDefaults:{line:{color:"#c7c7c7"},labels:{color:"#777777"},minorGridLines:{color:"#c7c7c7"},majorGridLines:{color:"#c7c7c7"},title:{color:"#777777"},crosshair:{color:"#c7c7c7"},notes:{icon:{background:"transparent",border:{color:"#777777"}},label:{color:"#777777"},line:{color:"#777777"}}}},gauge:{pointer:{color:"#8ebc00"},scale:{rangePlaceholderColor:"#e6e6e6",labels:{color:"#777"},minorTicks:{color:"#777"},majorTicks:{color:"#777"},line:{color:"#777"}}},diagram:{shapeDefaults:{fill:{color:"#8ebc00"},connectorDefaults:{fill:{color:d},stroke:{color:e},hover:{fill:{color:e},stroke:{color:d}}},content:{color:"#777"}},editable:{resize:{handles:{fill:{color:e},stroke:{color:"#787878"},hover:{fill:{color:"#787878"},stroke:{color:"#787878"}}}},rotate:{thumb:{stroke:{color:"#787878"},fill:{color:"#787878"}}}},selectable:{stroke:{color:"#515967"}},connectionDefaults:{stroke:{color:"#787878"},content:{color:"#777"},selection:{handles:{fill:{color:e},stroke:{color:"#787878"}}}}},treeMap:{colors:[["#8ebc00","#e8f2cc"],["#309b46","#d6ebda"],["#25a0da","#d3ecf8"],["#ff6900","#ffe1cc"],["#e61e26","#fad2d4"],["#d8e404","#f7facd"],["#16aba9","#d0eeee"],["#7e51a1","#e5dcec"],["#313131","#d6d6d6"],["#ed1691","#fbd0e9"]]}}),t("metroblack",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#797979"},markers:{color:"#797979"}}},seriesDefaults:{border:{_brightness:1},labels:{color:"#ffffff"},errorBars:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#cecece"}},label:{color:"#ffffff"},line:{color:"#cecece"}},line:{markers:{background:"#0e0e0e"}},bubble:{opacity:.6},scatter:{markers:{background:"#0e0e0e"}},scatterLine:{markers:{background:"#0e0e0e"}},candlestick:{downColor:"#828282",line:{color:"#ffffff"}},waterfall:{line:{color:"#cecece"}},horizontalWaterfall:{line:{color:"#cecece"}},overlay:{gradient:"none"}},chartArea:{background:"#0e0e0e"},seriesColors:["#00aba9","#309b46","#8ebc00","#ff6900","#e61e26","#d8e404","#25a0da","#7e51a1","#313131","#ed1691"],axisDefaults:{line:{color:"#cecece"},labels:{color:"#ffffff"},minorGridLines:{color:"#2d2d2d"},majorGridLines:{color:"#333333"},title:{color:"#ffffff"},crosshair:{color:"#cecece"},notes:{icon:{background:"transparent",border:{color:"#cecece"}},label:{color:"#ffffff"},line:{color:"#cecece"}}}},gauge:{pointer:{color:"#00aba9"},scale:{rangePlaceholderColor:"#2d2d2d",labels:{color:"#ffffff"},minorTicks:{color:"#333333"},majorTicks:{color:"#cecece"},line:{color:"#cecece"}}},diagram:{shapeDefaults:{fill:{color:"#00aba9"},connectorDefaults:{fill:{color:e},stroke:{color:"#0e0e0e"},hover:{fill:{color:"#0e0e0e"},stroke:{color:e}}},content:{color:e}},editable:{resize:{handles:{fill:{color:"#0e0e0e"},stroke:{color:"#787878"},hover:{fill:{color:"#787878"},stroke:{color:"#787878"}}}},rotate:{thumb:{stroke:{color:e},fill:{color:e}}}},selectable:{stroke:{color:"#787878"}},connectionDefaults:{stroke:{color:e},content:{color:e},selection:{handles:{fill:{color:"#0e0e0e"},stroke:{color:e}}}}},treeMap:{colors:[["#00aba9","#0b2d2d"],["#309b46","#152a19"],["#8ebc00","#28310b"],["#ff6900","#3e200b"],["#e61e26","#391113"],["#d8e404","#36390c"],["#25a0da","#132b37"],["#7e51a1","#241b2b"],["#313131","#151515"],["#ed1691","#3b1028"]]}}),t("moonlight",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#A1A7AB"},markers:{color:"#A1A7AB"}}},seriesDefaults:{labels:{color:"#ffffff"},errorBars:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#8c909e"}},label:{color:"#ffffff"},line:{color:"#8c909e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#212a33"}},bubble:{opacity:.6},scatter:{markers:{background:"#212a33"}},scatterLine:{markers:{background:"#212a33"}},area:{opacity:.3},candlestick:{downColor:"#757d87",line:{color:"#ea9d06"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:e,opacity:.2}}},waterfall:{line:{color:"#8c909e"}},horizontalWaterfall:{line:{color:"#8c909e"}},ohlc:{line:{color:"#ea9d06"}}},chartArea:{background:"#212a33"},seriesColors:["#ffca08","#ff710f","#ed2e24","#ff9f03","#e13c02","#a00201"],axisDefaults:{line:{color:"#8c909e"},minorTicks:{color:"#8c909e"},majorTicks:{color:"#8c909e"},labels:{color:"#ffffff"},majorGridLines:{color:"#3e424d"},minorGridLines:{color:"#2f3640"},title:{color:"#ffffff"},crosshair:{color:"#8c909e"},notes:{icon:{background:"transparent",border:{color:"#8c909e"}},label:{color:"#ffffff"},line:{color:"#8c909e"}}}},gauge:{pointer:{color:"#f4af03"},scale:{rangePlaceholderColor:"#2f3640",labels:{color:e},minorTicks:{color:"#8c909e"},majorTicks:{color:"#8c909e"},line:{color:"#8c909e"}}},diagram:{shapeDefaults:{fill:{color:"#f3ae03"},connectorDefaults:{fill:{color:e},stroke:{color:"#414550"},hover:{fill:{color:"#414550"},stroke:{color:e}}},content:{color:e}},editable:{resize:{handles:{fill:{color:"#414550"},stroke:{color:e},hover:{fill:{color:e},stroke:{color:e}}}},rotate:{thumb:{stroke:{color:e},fill:{color:e}}}},selectable:{stroke:{color:e}},connectionDefaults:{stroke:{color:e},content:{color:e},selection:{handles:{fill:{color:"#414550"},stroke:{color:e}}}}},treeMap:{colors:[["#ffca08","#4e4b2b"],["#ff710f","#4e392d"],["#ed2e24","#4b2c31"],["#ff9f03","#4e422a"],["#e13c02","#482e2a"],["#a00201","#3b232a"]]}}),t("uniform",{chart:{title:{color:"#686868"},legend:{labels:{color:"#686868"},inactiveItems:{labels:{color:"#B6B6B6"},markers:{color:"#B6B6B6"}}},seriesDefaults:{labels:{color:"#686868"},errorBars:{color:"#686868"},notes:{icon:{background:"transparent",border:{color:"#9e9e9e"}},label:{color:"#686868"},line:{color:"#9e9e9e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#ffffff"}},bubble:{opacity:.6},scatter:{markers:{background:"#ffffff"}},scatterLine:{markers:{background:"#ffffff"}},area:{opacity:.3},candlestick:{downColor:"#cccccc",line:{color:"#cccccc"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#cccccc",opacity:.2}}},waterfall:{line:{color:"#9e9e9e"}},horizontalWaterfall:{line:{color:"#9e9e9e"}},ohlc:{line:{color:"#cccccc"}}},chartArea:{background:"#ffffff"},seriesColors:["#527aa3","#6f91b3","#8ca7c2","#a8bdd1","#c5d3e0","#e2e9f0"],axisDefaults:{line:{color:"#9e9e9e"},minorTicks:{color:"#aaaaaa"},majorTicks:{color:"#888888"},labels:{color:"#686868"},majorGridLines:{color:"#dadada"},minorGridLines:{color:"#e7e7e7"},title:{color:"#686868"},crosshair:{color:"#9e9e9e"},notes:{icon:{background:"transparent",border:{color:"#9e9e9e"}},label:{color:"#686868"},line:{color:"#9e9e9e"}}}},gauge:{pointer:{color:"#527aa3"},scale:{rangePlaceholderColor:"#e7e7e7",labels:{color:"#686868"},minorTicks:{color:"#aaaaaa"},majorTicks:{color:"#888888"},line:{color:"#9e9e9e"}}},diagram:{shapeDefaults:{fill:{color:"#d1d1d1"},connectorDefaults:{fill:{color:"#686868"},stroke:{color:e},hover:{fill:{color:e},stroke:{color:"#686868"}}},content:{color:"#686868"}},editable:{resize:{handles:{fill:{color:e},stroke:{color:"#686868"},hover:{fill:{color:"#686868"},stroke:{color:"#686868"}}}},rotate:{thumb:{stroke:{color:"#686868"},fill:{color:"#686868"}}}},selectable:{stroke:{color:"#686868"}},connectionDefaults:{stroke:{color:"#686868"},content:{color:"#686868"},selection:{handles:{fill:{color:e},stroke:{color:"#686868"}}}}},treeMap:{colors:[["#527aa3","#d0d8e1"],["#6f91b3","#d6dde4"],["#8ca7c2","#dce1e7"],["#a8bdd1","#e2e6ea"],["#c5d3e0","#e7eaed"],["#e2e9f0","#edeff0"]]}}),t("bootstrap",{chart:{title:{color:"#333333"},legend:{labels:{color:"#333333"},inactiveItems:{labels:{color:"#999999"},markers:{color:"#9A9A9A"}}},seriesDefaults:{labels:{color:"#333333"},overlay:{gradient:"none"},errorBars:{color:"#343434"},notes:{icon:{background:"#000000",border:{color:"#000000"}},label:{color:"#333333"},line:{color:"#000000"}},pie:{overlay:{gradient:"none"}},donut:{overlay:{gradient:"none"}},line:{markers:{background:"#ffffff"}},bubble:{opacity:.6},scatter:{markers:{background:"#ffffff"}},scatterLine:{markers:{background:"#ffffff"}},area:{opacity:.8},candlestick:{downColor:"#d0d0d0",line:{color:"#333333"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#b8b8b8",opacity:.2}}},waterfall:{line:{color:"#cccccc"}},horizontalWaterfall:{line:{color:"#cccccc"}},ohlc:{line:{color:"#333333"}}},chartArea:{background:"#ffffff"},seriesColors:["#428bca","#5bc0de","#5cb85c","#f2b661","#e67d4a","#da3b36"],axisDefaults:{line:{color:"#cccccc"},minorTicks:{color:"#ebebeb"},majorTicks:{color:"#cccccc"},labels:{color:"#333333"},majorGridLines:{color:"#cccccc"},minorGridLines:{color:"#ebebeb"},title:{color:"#333333"},crosshair:{color:"#000000"},notes:{icon:{background:"#000000",border:{color:"#000000"}},label:{color:"#ffffff"},line:{color:"#000000"}}}},gauge:{pointer:{color:"#428bca"},scale:{rangePlaceholderColor:"#cccccc",labels:{color:"#333333"},minorTicks:{color:"#ebebeb"},majorTicks:{color:"#cccccc"},line:{color:"#cccccc"}}},diagram:{shapeDefaults:{fill:{color:"#428bca"},connectorDefaults:{fill:{color:"#333333"},stroke:{color:e},hover:{fill:{color:e},stroke:{color:"#333333"}}},content:{color:"#333333"}},editable:{resize:{handles:{fill:{color:e},stroke:{color:"#333333"},hover:{fill:{color:"#333333"},stroke:{color:"#333333"}}}},rotate:{thumb:{stroke:{color:"#333333"},fill:{color:"#333333"}}}},selectable:{stroke:{color:"#333333"}},connectionDefaults:{stroke:{color:"#c4c4c4"},content:{color:"#333333"},selection:{handles:{fill:{color:e},stroke:{color:"#333333"}},stroke:{color:"#333333"}}}},treeMap:{colors:[["#428bca","#d1e0ec"],["#5bc0de","#d6eaf0"],["#5cb85c","#d6e9d6"],["#5cb85c","#f4e8d7"],["#e67d4a","#f2ddd3"],["#da3b36","#f0d0cf"]]}}),t("flat",{chart:{title:{color:"#4c5356"},legend:{labels:{color:"#4c5356"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:"#4c5356"},errorBars:{color:"#4c5356"},notes:{icon:{background:"transparent",border:{color:"#cdcdcd"}},label:{color:"#4c5356"},line:{color:"#cdcdcd"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},area:{opacity:.9},waterfall:{line:{color:"#cdcdcd"}},horizontalWaterfall:{line:{color:"#cdcdcd"}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:["#10c4b2","#ff7663","#ffb74f","#a2df53","#1c9ec4","#ff63a5","#1cc47b"],axisDefaults:{line:{color:"#cdcdcd"},labels:{color:"#4c5356"},minorGridLines:{color:"#cdcdcd"},majorGridLines:{color:"#cdcdcd"},title:{color:"#4c5356"},crosshair:{color:"#cdcdcd"},notes:{icon:{background:"transparent",border:{color:"#cdcdcd"}},label:{color:"#4c5356"},line:{color:"#cdcdcd"}}}},gauge:{pointer:{color:"#10c4b2"},scale:{rangePlaceholderColor:"#cdcdcd",labels:{color:"#4c5356"},minorTicks:{color:"#4c5356"},majorTicks:{color:"#4c5356"},line:{color:"#4c5356"}}},diagram:{shapeDefaults:{fill:{color:"#10c4b2"},connectorDefaults:{fill:{color:"#363940"},stroke:{color:e},hover:{fill:{color:e},stroke:{color:"#363940"}}},content:{color:"#4c5356"}},editable:{resize:{handles:{fill:{color:e},stroke:{color:"#363940"},hover:{fill:{color:"#363940"},stroke:{color:"#363940"}}}},rotate:{thumb:{stroke:{color:"#363940"},fill:{color:"#363940"}}}},selectable:{stroke:{color:"#363940"}},connectionDefaults:{stroke:{color:"#cdcdcd"},content:{color:"#4c5356"},selection:{handles:{fill:{color:e},stroke:{color:"#363940"}},stroke:{color:"#363940"}}}},treeMap:{colors:[["#10c4b2","#cff3f0"],["#ff7663","#ffe4e0"],["#ffb74f","#fff1dc"],["#a2df53","#ecf9dd"],["#1c9ec4","#d2ecf3"],["#ff63a5","#ffe0ed"],["#1cc47b","#d2f3e5"]]}}),t("material",{chart:{title:{color:"#444444"},legend:{labels:{color:"#444444"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:"#444444"},errorBars:{color:"#444444"},notes:{icon:{background:"transparent",border:{color:"#e5e5e5"}},label:{color:"#444444"},line:{color:"#e5e5e5"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},area:{opacity:.9},waterfall:{line:{color:"#e5e5e5"}},horizontalWaterfall:{line:{color:"#e5e5e5"}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#ff9800","#ff5722"],axisDefaults:{line:{color:"#e5e5e5"},labels:{color:"#444444"},minorGridLines:{color:"#e5e5e5"},majorGridLines:{color:"#e5e5e5"},title:{color:"#444444"},crosshair:{color:"#7f7f7f"},notes:{icon:{background:"transparent",border:{color:"#e5e5e5"}},label:{color:"#444444"},line:{color:"#e5e5e5"}}}},gauge:{pointer:{color:"#3f51b5"},scale:{rangePlaceholderColor:"#e5e5e5",labels:{color:"#444444"},minorTicks:{color:"#444444"},majorTicks:{color:"#444444"},line:{color:"#444444"}}},diagram:{shapeDefaults:{fill:{color:"#3f51b5"},connectorDefaults:{fill:{color:"#7f7f7f"},stroke:{color:e},hover:{fill:{color:e},stroke:{color:"#7f7f7f"}}},content:{color:"#444444"}},editable:{resize:{handles:{fill:{color:e},stroke:{color:"#444444"},hover:{fill:{color:"#444444"},stroke:{color:"#444444"}}}},rotate:{thumb:{stroke:{color:"#444444"},fill:{color:"#444444"}}}},selectable:{stroke:{color:"#444444"}},connectionDefaults:{stroke:{color:"#7f7f7f"},content:{color:"#444444"},selection:{handles:{fill:{color:e},stroke:{color:"#444444"}},stroke:{color:"#444444"}}}},treeMap:{colors:[["#3f51b5","#cff3f0"],["#03a9f4","#e5f6fe"],["#4caf50","#edf7ed"],["#f9ce1d","#fefae8"],["#ff9800","#fff4e5"],["#ff5722","#ffeee8"]]}}),t("materialblack",{chart:{title:{color:"#fff"},legend:{labels:{color:"#fff"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:"#fff"},errorBars:{color:"#fff"},notes:{icon:{background:"transparent",border:{color:"#e5e5e5"}},label:{color:"#fff"},line:{color:"#e5e5e5"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},area:{opacity:.9},waterfall:{line:{color:"#4d4d4d"}},horizontalWaterfall:{line:{color:"#4d4d4d"}},overlay:{gradient:"none"},border:{_brightness:1}},chartArea:{background:"#1c1c1c"},seriesColors:["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#ff9800","#ff5722"],axisDefaults:{line:{color:"#4d4d4d"},labels:{color:"#fff"},minorGridLines:{color:"#4d4d4d"},majorGridLines:{color:"#4d4d4d"},title:{color:"#fff"},crosshair:{color:"#7f7f7f"},notes:{icon:{background:"transparent",border:{color:"#4d4d4d"}},label:{color:"#fff"},line:{color:"#4d4d4d"}}}},gauge:{pointer:{color:"#3f51b5"},scale:{rangePlaceholderColor:"#4d4d4d",labels:{color:"#fff"},minorTicks:{color:"#fff"},majorTicks:{color:"#fff"},line:{color:"#fff"}}},diagram:{shapeDefaults:{fill:{color:"#3f51b5"},connectorDefaults:{fill:{color:"#7f7f7f"},stroke:{color:e},hover:{fill:{color:e},stroke:{color:"#7f7f7f"}}},content:{color:"#fff"}},editable:{resize:{handles:{fill:{color:e},stroke:{color:"#fff"},hover:{fill:{color:"#fff"},stroke:{color:"#fff"}}}},rotate:{thumb:{stroke:{color:"#fff"},fill:{color:"#fff"}}}},selectable:{stroke:{color:"#fff"}},connectionDefaults:{stroke:{color:"#7f7f7f"},content:{color:"#fff"},selection:{handles:{fill:{color:e},stroke:{color:"#fff"}},stroke:{color:"#fff"}}}},treeMap:{colors:[["#3f51b5","#cff3f0"],["#03a9f4","#e5f6fe"],["#4caf50","#edf7ed"],["#f9ce1d","#fefae8"],["#ff9800","#fff4e5"],["#ff5722","#ffeee8"]]}}),"#333333"),b="#7f7f7f",n="#bdbdbd",a="#c8c8c8",w,x=["#008fd3","#99d101","#f39b02","#f05662","#c03c53","#acacac"],k,C=x[0],S;function T(){return{icon:{background:"#007cc0",border:{color:"#007cc0"}},label:{color:"#ffffff"},line:{color:a}}}t("fiori",{chart:{title:{color:i},legend:{labels:{color:i},inactiveItems:{labels:{color:b},markers:{color:b}}},seriesDefaults:{labels:{color:i},errorBars:{color:i},notes:T(),candlestick:{downColor:a,line:{color:n}},area:{opacity:.8},waterfall:{line:{color:a}},horizontalWaterfall:{line:{color:a}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:x,axisDefaults:{line:{color:a},labels:{color:i},minorGridLines:{color:"#dddddd"},majorGridLines:{color:a},title:{color:i},crosshair:{color:b},notes:T()}},gauge:{pointer:{color:C},scale:{rangePlaceholderColor:a,labels:{color:i},minorTicks:{color:i},majorTicks:{color:i},line:{color:i}}},diagram:{shapeDefaults:{fill:{color:C},connectorDefaults:{fill:{color:i},stroke:{color:e},hover:{fill:{color:e},stroke:{color:i}}},content:{color:i}},editable:{resize:{handles:{fill:{color:e},stroke:{color:n},hover:{fill:{color:n},stroke:{color:n}}}},rotate:{thumb:{stroke:{color:n},fill:{color:n}}}},selectable:{stroke:{color:n}},connectionDefaults:{stroke:{color:n},content:{color:n},selection:{handles:{fill:{color:e},stroke:{color:n}},stroke:{color:n}}}},treeMap:{colors:K(x,["#cbe8f5","#eaf5cb","#fceacc","#fbdcdf","#f2d7dc","#eeeeee"])}});var o="#4e4e4e",A="#7f7f7f",s="#bdbdbd",M="#c8c8c8",D,E=["#0072c6","#5db2ff","#008a17","#82ba00","#ff8f32","#ac193d"],I,P=E[0],B;function O(){return{icon:{background:"#00b0ff",border:{color:"#00b0ff"}},label:{color:"#ffffff"},line:{color:M}}}t("office365",{chart:{title:{color:o},legend:{labels:{color:o},inactiveItems:{labels:{color:A},markers:{color:A}}},seriesDefaults:{labels:{color:o},errorBars:{color:o},notes:O(),candlestick:{downColor:M,line:{color:s}},area:{opacity:.8},waterfall:{line:{color:M}},horizontalWaterfall:{line:{color:M}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:E,axisDefaults:{line:{color:M},labels:{color:o},minorGridLines:{color:"#e5e5e5"},majorGridLines:{color:M},title:{color:o},crosshair:{color:A},notes:O()}},gauge:{pointer:{color:P},scale:{rangePlaceholderColor:M,labels:{color:o},minorTicks:{color:o},majorTicks:{color:o},line:{color:o}}},diagram:{shapeDefaults:{fill:{color:P},connectorDefaults:{fill:{color:o},stroke:{color:e},hover:{fill:{color:e},stroke:{color:o}}},content:{color:o}},editable:{resize:{handles:{fill:{color:e},stroke:{color:s},hover:{fill:{color:s},stroke:{color:s}}}},rotate:{thumb:{stroke:{color:s},fill:{color:s}}}},selectable:{stroke:{color:s}},connectionDefaults:{stroke:{color:s},content:{color:s},selection:{handles:{fill:{color:e},stroke:{color:s}},stroke:{color:s}}}},treeMap:{colors:K(E,["#cbe2f3","#deeffe","#cbe7d0","#e5f0cb","#fee8d5","#eed0d7"])}});var l="#32364c",z="#7f7f7f",u="#bdbdbd",L="#dfe0e1",R,F=["#ff4350","#ff9ea5","#00acc1","#80deea","#ffbf46","#ffd78c"],V,N=F[0],H;function U(){return{icon:{background:"#007cc0",border:{color:"#007cc0"}},label:{color:"#ffffff"},line:{color:L}}}t("nova",{chart:{title:{color:l},legend:{labels:{color:l},inactiveItems:{labels:{color:z},markers:{color:z}}},seriesDefaults:{labels:{color:l},errorBars:{color:l},notes:U(),candlestick:{downColor:L,line:{color:u}},area:{opacity:.8},waterfall:{line:{color:L}},horizontalWaterfall:{line:{color:L}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:F,axisDefaults:{line:{color:L},labels:{color:l},minorGridLines:{color:"#dfe0e1"},majorGridLines:{color:L},title:{color:l},crosshair:{color:l},notes:U()}},gauge:{pointer:{color:N},scale:{rangePlaceholderColor:L,labels:{color:l},minorTicks:{color:l},majorTicks:{color:l},line:{color:l}}},diagram:{shapeDefaults:{fill:{color:N},connectorDefaults:{fill:{color:l},stroke:{color:e},hover:{fill:{color:e},stroke:{color:l}}},content:{color:l}},editable:{resize:{handles:{fill:{color:e},stroke:{color:u},hover:{fill:{color:u},stroke:{color:u}}}},rotate:{thumb:{stroke:{color:u},fill:{color:u}}}},selectable:{stroke:{color:u}},connectionDefaults:{stroke:{color:u},content:{color:u},selection:{handles:{fill:{color:e},stroke:{color:u}},stroke:{color:u}}}},treeMap:{colors:K(F,["#ffd9dc","#ffeced","#cceef3","#e6f8fb","#fff2da","#fff7e8"])}});var j,G,W=(t("default-v2",{chart:{},gauge:{},diagram:{},treeMap:{colors:K(["#ff6358","#ffd246","#78d237","#28b4c8","#2d73f5","#aa46be"],["#ffd9dc","#ffeced","#cceef3","#e6f8fb","#fff2da","#fff7e8"])}}),y.sass=y["default-v2"],"#292b2c"),q,Y=["#0275d8","#5bc0de","#5cb85c","#f0ad4e","#e67d4a","#d9534f"],$,X;function K(e,i){return c.map(e,function(e,t){return[[e,i[t]]]})}return t("bootstrap-v4",{chart:{},gauge:{pointer:{color:Y[0]},scale:{rangePlaceholderColor:"rgba(0, 0, 0, .04)",labels:{color:W},minorTicks:{color:W},majorTicks:{color:W},line:{color:W}}},diagram:{},treeMap:{colors:K(Y,["#ffd9dc","#ffeced","#cceef3","#e6f8fb","#fff2da","#fff7e8"])}}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.dataviz.themes.min",["kendo.dataviz.core.min","./dataviz/themes/chart-base-theme.min","./dataviz/themes/auto-theme.min","./dataviz/themes/themes.min"],function(){var e={id:"dataviz.themes",name:"Themes",description:"Built-in themes for the DataViz widgets",category:"dataviz",depends:["dataviz.core"],hidden:true}})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/chart/kendo-chart.min",["kendo.core.min","kendo.color.min","kendo.drawing.min","kendo.dataviz.core.min"],function(){var m=window.kendo.jQuery,S=(window.kendo.dataviz=window.kendo.dataviz||{},kendo.dataviz),t=S.Class,v=S.isNumber,T=S.constants,f=T.MAX_VALUE,h=T.MIN_VALUE,c=T.VALUE,A=T.CENTER,I=T.TOP,P=T.BOTTOM,B=T.LEFT,a=T.WHITE,d=T.CIRCLE,_=T.X,g=T.Y,O=T.RIGHT,r=T.BLACK,w=T.DATE,o=T.DEFAULT_PRECISION,i=T.ARC,M=S.defined,u=S.getter,p=S.isArray,b=S.ChartElement,D=S.Point,E=S.Box,y=S.alignPathToPixel,e=S.setDefaultOptions,k=S.inArray,z=S.isFunction,L=S.valueOrDefault,C=S.isObject,x=S.deepExtend,R=S.last,F=S.eventElement,V=S.getTemplate,N=S.TextBox,H=S.ShapeElement,U=S.getSpacing,s=S.CurveProcessor,j=S.append,G=S.isString,W=S.parseDate,l=S.styleValue,q=S.CategoryAxis,Y=S.BoxElement,$=S.round,X=S.limitValue,K=S.grep,Q=S.elementStyles,Z=S.hasClasses,n=S.bindEvents,J=S.services,ee=S.unbindEvents,te=kendo.support,ie=kendo.drawing,ne=ie.Path,re=ie.Animation,ae=ie.AnimationFactory,oe=ie.Group,se=kendo.Color,le=kendo.geometry,ue=le.Point,ce=le.transform,he=t.extend({init:function(e){this._axis=e;this.options=e.options},value:function(e){var t=this._axis;var i=t.getCategory?t.getCategory(e):t.getValue(e);return i},slot:function(e,t,i){if(i===void 0)i=true;return this._axis.slot(e,t,i)},range:function(){return this._axis.range()},valueRange:function(){return this._axis.valueRange()}});function fe(e,t){for(var i=0;i<t.length;i++)if(t[i].options.name===e){t[i].prepareUserOptions();return new he(t[i])}}var de=kendo.Class.extend({init:function(e){this.visual=e.visual;this.chartsVisual=e.chartContainer.visual;this._pane=e},findAxisByName:function(e){return fe(e,this._pane.axes)}}),pe=t.extend({init:function(e){this._plotArea=e;this.visual=e.visual;this.backgroundVisual=e._bgVisual}});function ve(e){var t=e.length;var i=0;for(var n=0;n<t;n++){var r=e[n];if(v(r))i++}return i}var ge={min:function(e){var t=e.length;var i=f;for(var n=0;n<t;n++){var r=e[n];if(v(r))i=Math.min(i,r)}return i===f?e[0]:i},max:function(e){var t=e.length;var i=h;for(var n=0;n<t;n++){var r=e[n];if(v(r))i=Math.max(i,r)}return i===h?e[0]:i},sum:function(e){var t=e.length;var i=0;for(var n=0;n<t;n++){var r=e[n];if(v(r))i+=r}return i},sumOrNull:function(e){var t=null;if(ve(e))t=ge.sum(e);return t},count:function(e){var t=e.length;var i=0;for(var n=0;n<t;n++){var r=e[n];if(r!==null&&M(r))i++}return i},avg:function(e){var t=ve(e);var i=e[0];if(t>0)i=ge.sum(e)/t;return i},first:function(e){var t=e.length;for(var i=0;i<t;i++){var n=e[i];if(n!==null&&M(n))return n}return e[0]}};function me(e,t){if(t===null)return t;var i=u(e,true);return i(t)}var _e=t.extend({init:function(){this._valueFields={};this._otherFields={};this._nullValue={};this._undefinedValue={}},register:function(e,t,i){var n=this;if(t===void 0)t=[c];if(i===void 0)i={};for(var r=0;r<e.length;r++){var a=e[r];n._valueFields[a]=t;n._otherFields[a]=i;n._nullValue[a]=n._makeValue(t,null);n._undefinedValue[a]=n._makeValue(t,undefined)}},canonicalFields:function(e){return this.valueFields(e).concat(this.otherFields(e))},valueFields:function(e){return this._valueFields[e.type]||[c]},otherFields:function(e){return this._otherFields[e.type]||[c]},bindPoint:function(e,t,i){var n=e.data;var r=M(i)?i:n[t];var a={valueFields:{value:r}};var o=this.valueFields(e);var s=this._otherFields[e.type];var l,u;if(r===null)u=this._nullValue[e.type];else if(!M(r))u=this._undefinedValue[e.type];else if(Array.isArray(r)){var c=r.slice(o.length);u=this._bindFromArray(r,o);l=this._bindFromArray(c,s)}else if(typeof r==="object"){var h=this.sourceFields(e,o);var f=this.sourceFields(e,s);u=this._bindFromObject(r,o,h);l=this._bindFromObject(r,s,f)}if(M(u))if(o.length===1)a.valueFields.value=u[o[0]];else a.valueFields=u;a.fields=l||{};return a},_makeValue:function(e,t){var i={};var n=e.length;for(var r=0;r<n;r++){var a=e[r];i[a]=t}return i},_bindFromArray:function(e,t){var i={};if(t){var n=Math.min(t.length,e.length);for(var r=0;r<n;r++)i[t[r]]=e[r]}return i},_bindFromObject:function(e,t,i){if(i===void 0)i=t;var n={};if(t){var r=t.length;for(var a=0;a<r;a++){var o=t[a];var s=i[a];if(s!==null)n[o]=me(s,e)}}return n},sourceFields:function(e,t){var i=[];if(t){var n=t.length;for(var r=0;r<n;r++){var a=t[r];var o=a===c?"field":a+"Field";i.push(e[o]!==null?e[o]||a:null)}}return i}}),ye=(_e.current=new _e,"stderr"),be,we=/percent(?:\w*)\((\d+)\)/,xe=new RegExp("^"+"stddev"+"(?:\\((\\d+(?:\\.\\d+)?)\\))?$"),ke=t.extend({init:function(e,t,i){this.initGlobalRanges(e,t,i)},initGlobalRanges:function(e,t,i){var n=t.data;var r=xe.exec(e);if(r){this.valueGetter=this.createValueGetter(t,i);var a=this.getAverage(n);var o=this.getStandardDeviation(n,a,false);var s=r[1]?parseFloat(r[1]):1;var l={low:a.value-o*s,high:a.value+o*s};this.globalRange=function(){return l}}else if(e.indexOf&&e.indexOf(ye)>=0){this.valueGetter=this.createValueGetter(t,i);var u=this.getStandardError(n,this.getAverage(n));this.globalRange=function(e){return{low:e-u,high:e+u}}}},createValueGetter:function(e,t){var i=e.data;var n=_e.current;var r=n.valueFields(e);var a=M(i[0])?i[0]:{};var o;if(p(a)){var s=t?r.indexOf(t):0;o=u("["+s+"]")}else if(v(a))o=u();else if(typeof a===T.OBJECT){var l=n.sourceFields(e,r);o=u(l[r.indexOf(t)])}return o},getErrorRange:function(e,t){var i,n,r;if(!M(t))return null;if(this.globalRange)return this.globalRange(e);if(p(t)){i=e-t[0];n=e+t[1]}else if(v(r=parseFloat(t))){i=e-r;n=e+r}else if(r=we.exec(t)){var a=e*(parseFloat(r[1])/100);i=e-Math.abs(a);n=e+Math.abs(a)}else throw new Error("Invalid ErrorBar value: "+t);return{low:i,high:n}},getStandardError:function(e,t){return this.getStandardDeviation(e,t,true)/Math.sqrt(t.count)},getStandardDeviation:function(e,t,i){var n=this;var r=e.length;var a=i?t.count-1:t.count;var o=0;for(var s=0;s<r;s++){var l=n.valueGetter(e[s]);if(v(l))o+=Math.pow(l-t.value,2)}return Math.sqrt(o/a)},getAverage:function(e){var t=this;var i=e.length;var n=0;var r=0;for(var a=0;a<i;a++){var o=t.valueGetter(e[a]);if(v(o)){n+=o;r++}}return{value:n/r,count:r}}}),Ce,Se=600,Te="fadeIn",Ae,Me=.8,De=5,Ee=(te.browser||{}).msie?.001:0,Ie="errorLow",Pe="errorHigh",Be="xErrorLow",Oe="xErrorHigh",ze="yErrorLow",Le="yErrorHigh",Re=8,Fe="zero",Ve="interpolate",Ne="gap",He="above",Ue="below",je="smooth",Ge="step",We="area",qe="bar",Ye="boxPlot",$e="bubble",Xe="bullet",Ke="candlestick",Qe="column",Ze="donut",Je="funnel",et="heatmap",tt="horizontalWaterfall",it="line",nt="ohlc",rt="pie",at="polarArea",ot="polarLine",st="polarScatter",lt="radarArea",ut="radarColumn",ct="radarLine",ht="rangeArea",ft="rangeBar",dt="rangeColumn",pt="scatter",vt="scatterLine",gt="verticalArea",mt="verticalBoxPlot",_t="verticalBullet",yt="verticalLine",bt="verticalRangeArea",wt="waterfall",xt=[qe,Qe,nt,Ke,Ye,mt,Xe,dt,ft,wt,tt],kt="legendItemClick",Ct="legendItemHover",St="legendItemLeave",Tt="seriesClick",At="seriesHover",Mt="seriesOver",Dt="seriesLeave",Et="plotAreaClick",It="plotAreaHover",Pt="plotAreaLeave",Bt="drag",Ot="dragEnd",zt="dragStart",Lt="zoomStart",Rt="zoom",Ft="zoomEnd",Vt="selectStart",Nt="select",Ht="selectEnd",Ut="render",jt="showTooltip",Gt="hideTooltip",Wt="paneRender",qt="log",Yt="category",$t="insideEnd",Xt="insideBase",Kt="outsideEnd",Qt="DOMMouseScroll mousewheel",Zt=150,Jt=.3,ei={INITIAL_ANIMATION_DURATION:Se,FADEIN:Te,LEGEND_ITEM_CLICK:kt,LEGEND_ITEM_HOVER:Ct,LEGEND_ITEM_LEAVE:St,SERIES_CLICK:Tt,SERIES_HOVER:At,SERIES_OVER:Mt,SERIES_LEAVE:Dt,GLASS:"glass",BORDER_BRIGHTNESS:Me,TOOLTIP_OFFSET:De,START_SCALE:Ee,ERROR_LOW_FIELD:Ie,ERROR_HIGH_FIELD:Pe,X_ERROR_LOW_FIELD:Be,X_ERROR_HIGH_FIELD:Oe,Y_ERROR_LOW_FIELD:ze,Y_ERROR_HIGH_FIELD:Le,LINE_MARKER_SIZE:Re,INTERPOLATE:Ve,ZERO:Fe,SMOOTH:je,STEP:Ge,CATEGORY:Yt,FUNNEL:Je,BAR:qe,CANDLESTICK:Ke,PIE:rt,COLUMN:Qe,AREA:We,VERTICAL_BULLET:_t,BOX_PLOT:Ye,OHLC:nt,WATERFALL:wt,LINE:it,BULLET:Xe,VERTICAL_LINE:yt,VERTICAL_AREA:gt,RANGE_AREA:ht,VERTICAL_RANGE_AREA:bt,RANGE_COLUMN:dt,VERTICAL_BOX_PLOT:mt,RANGE_BAR:ft,HORIZONTAL_WATERFALL:tt,SCATTER:pt,SCATTER_LINE:vt,BUBBLE:$e,RADAR_AREA:lt,RADAR_LINE:ct,RADAR_COLUMN:ut,POLAR_LINE:ot,POLAR_AREA:at,POLAR_SCATTER:st,RENDER:Ut,PLOT_AREA_CLICK:Et,PLOT_AREA_HOVER:It,PLOT_AREA_LEAVE:Pt,LOGARITHMIC:qt,DRAG:Bt,DRAG_START:zt,DRAG_END:Ot,ZOOM_START:Lt,ZOOM:Rt,ZOOM_END:Ft,SELECT_START:Vt,SELECT:Nt,SELECT_END:Ht,PANE_RENDER:Wt,GAP:Ne,DONUT:Ze,INSIDE_END:$t,INSIDE_BASE:Xt,OUTSIDE_END:Kt,MOUSEWHEEL:Qt,MOUSEWHEEL_DELAY:Zt,MOUSEWHEEL_ZOOM_RATE:Jt,SHOW_TOOLTIP:jt,HIDE_TOOLTIP:Gt,EQUALLY_SPACED_SERIES:xt,ABOVE:He,BELOW:Ue,HEATMAP:et},ti=4,ii=b.extend({init:function(e,t,i,n,r,a){b.fn.init.call(this,a);this.low=e;this.high=t;this.isVertical=i;this.chart=n;this.series=r},reflow:function(e){var t=this.options.endCaps;var i=this.isVertical;var c=this.getAxis();var n=c.getSlot(this.low,this.high);var r=e.center();var a=this.getCapsWidth(e,i);var o=i?r.x:r.y;var s=o-a;var l=o+a;var u;if(i){u=[new D(r.x,n.y1),new D(r.x,n.y2)];if(t)u.push(new D(s,n.y1),new D(l,n.y1),new D(s,n.y2),new D(l,n.y2));this.box=new E(s,n.y1,l,n.y2)}else{u=[new D(n.x1,r.y),new D(n.x2,r.y)];if(t)u.push(new D(n.x1,s),new D(n.x1,l),new D(n.x2,s),new D(n.x2,l));this.box=new E(n.x1,s,n.x2,l)}this.linePoints=u},getCapsWidth:function(e,t){var i=t?e.width():e.height();var n=Math.min(Math.floor(i/2),ti)||ti;return n},createVisual:function(){var t=this;var e=this.options;var i=e.visual;if(i)this.visual=i({low:this.low,high:this.high,rect:this.box.toRect(),sender:this.getSender(),options:{endCaps:e.endCaps,color:e.color,line:e.line},createVisual:function(){t.createDefaultVisual();var e=t.visual;delete t.visual;return e}});else this.createDefaultVisual()},createDefaultVisual:function(){var e=this;var t=this;var i=t.options;var n=t.linePoints;var r={stroke:{color:i.color,width:i.line.width,dashType:i.line.dashType}};b.fn.createVisual.call(this);for(var a=0;a<n.length;a+=2){var o=new ne(r).moveTo(n[a].x,n[a].y).lineTo(n[a+1].x,n[a+1].y);y(o);e.visual.append(o)}}}),ni=(e(ii,{animation:{type:Te,delay:Se},endCaps:true,line:{width:2},zIndex:1}),ii.extend({getAxis:function(){var e=this.chart.seriesValueAxis(this.series);return e}})),ri=5;function ai(e,t,i,n){if(i===void 0)i={};if(n===void 0)n=false;var r=i.defaults=i.defaults||{};var a=i.depth=i.depth||0;var o=false;i.excluded=i.excluded||[];if(a>ri)return null;for(var s in e)if(!k(s,i.excluded)&&e.hasOwnProperty(s)){var l=e[s];if(z(l)){o=true;if(!n)e[s]=L(l(t),r[s])}else if(C(l)){if(!n)i.defaults=r[s];i.depth++;o=ai(l,t,i,n)||o;i.depth--}}return o}function oi(e){var t=e.length;var i=0;for(var n=0;n<t;n++)i=Math.max(i,e[n].data.length);return i}var si=b.extend({init:function(e,t){b.fn.init.call(this,t);this.plotArea=e;this.chartService=e.chartService;this.categoryAxis=e.seriesCategoryAxis(t.series[0]);this.valueAxisRanges={};this.points=[];this.categoryPoints=[];this.seriesPoints=[];this.seriesOptions=[];this._evalSeries=[];this.render()},render:function(){this.traverseDataPoints(this.addValue.bind(this))},pointOptions:function(e,t){var i=this.seriesOptions[t];if(!i){var n=this.pointType().prototype.defaults;this.seriesOptions[t]=i=x({},n,{vertical:!this.options.invertAxes},e)}return i},plotValue:function(e){if(!e)return 0;if(this.options.isStacked100&&v(e.value)){var t=e.categoryIx;var i=this.categoryPoints[t];var n=[];var r=0;for(var a=0;a<i.length;a++){var o=i[a];if(o){var s=e.series.stack;var l=o.series.stack;if(s&&l&&s.group!==l.group)continue;if(v(o.value)){r+=Math.abs(o.value);n.push(Math.abs(o.value))}}}if(r>0)return e.value/r}return e.value},plotRange:function(e,t){var i=this;if(t===void 0)t=0;var c=this.categoryPoints[e.categoryIx];if(this.options.isStacked){var n=this.plotValue(e);var h=n>=0;var r=t;var f=false;for(var a=0;a<c.length;a++){var o=c[a];if(e===o)break;var s=e.series.stack;var l=o.series.stack;if(s&&l){if(typeof s===T.STRING&&s!==l)continue;if(s.group&&s.group!==l.group)continue}var u=i.plotValue(o);if(u>=0&&h||u<0&&!h){r+=u;n+=u;f=true;if(i.options.isStacked100)n=Math.min(n,1)}}if(f)r-=t;return[r,n]}var d=e.series;var p=this.seriesValueAxis(d);var v=this.categoryAxisCrossingValue(p);return[v,S.convertableToNumber(e.value)?e.value:v]},stackLimits:function(e,t){var i=this;var n=f;var r=h;for(var a=0;a<this.categoryPoints.length;a++){var o=i.categoryPoints[a];if(!o)continue;for(var s=0;s<o.length;s++){var l=o[s];if(l)if(l.series.stack===t||l.series.axis===e){var u=i.plotRange(l,0)[1];if(M(u)&&isFinite(u)){r=Math.max(r,u);n=Math.min(n,u)}}}}return{min:n,max:r}},updateStackRange:function(){var e=this;var t=this.options;var c=t.isStacked;var i=t.series;var n={};if(c)for(var r=0;r<i.length;r++){var a=i[r];var o=a.axis;var s=o+a.stack;var l=n[s];if(!l){l=e.stackLimits(o,a.stack);var u=e.errorTotals;if(u){if(u.negative.length)l.min=Math.min(l.min,S.sparseArrayLimits(u.negative).min);if(u.positive.length)l.max=Math.max(l.max,S.sparseArrayLimits(u.positive).max)}if(l.min!==f||l.max!==h)n[s]=l;else l=null}if(l)e.valueAxisRanges[o]=l}},addErrorBar:function(e,t,i){var n=e.value;var r=e.series;var a=e.seriesIx;var o=e.options.errorBars;var s=t.fields[Ie];var l=t.fields[Pe];var u;if(v(s)&&v(l))u={low:s,high:l};else if(o&&M(o.value)){this.seriesErrorRanges=this.seriesErrorRanges||[];this.seriesErrorRanges[a]=this.seriesErrorRanges[a]||new ke(o.value,r,c);u=this.seriesErrorRanges[a].getErrorRange(n,o.value)}if(u){e.low=u.low;e.high=u.high;this.addPointErrorBar(e,i)}},addPointErrorBar:function(e,t){var i=!this.options.invertAxes;var n=e.options.errorBars;var r=e.series;var a=e.low;var o=e.high;if(this.options.isStacked){var s=this.stackedErrorRange(e,t);a=s.low;o=s.high}else{var l={categoryIx:t,series:r};this.updateRange({value:a},l);this.updateRange({value:o},l)}var u=new ni(a,o,i,this,r,n);e.errorBars=[u];e.append(u)},stackedErrorRange:function(e,t){var i=this.plotRange(e,0)[1]-e.value;var n=e.low+i;var r=e.high+i;this.errorTotals=this.errorTotals||{positive:[],negative:[]};if(n<0)this.errorTotals.negative[t]=Math.min(this.errorTotals.negative[t]||0,n);if(r>0)this.errorTotals.positive[t]=Math.max(this.errorTotals.positive[t]||0,r);return{low:n,high:r}},addValue:function(e,t){var i=t.categoryIx;var n=t.series;var r=t.seriesIx;var a=this.categoryPoints[i];if(!a)this.categoryPoints[i]=a=[];var o=this.seriesPoints[r];if(!o)this.seriesPoints[r]=o=[];var s=this.createPoint(e,t);if(s){m.extend(s,t);s.owner=this;s.noteText=e.fields.noteText;if(!M(s.dataItem))s.dataItem=n.data[i];this.addErrorBar(s,e,i)}this.points.push(s);o.push(s);a.push(s);this.updateRange(e.valueFields,t)},evalPointOptions:function(e,t,i,n,r,a){var o={defaults:r._defaults,excluded:["data","aggregate","_events","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint"]};var s=this._evalSeries[a];if(!M(s))this._evalSeries[a]=s=ai(e,{},o,true);var l=e;if(s){l=x({},l);ai(l,{value:t,category:i,index:n,series:r,dataItem:r.data[n]},o)}return l},updateRange:function(e,t){var i=t.series.axis;var n=e.value;var r=this.valueAxisRanges[i];if(isFinite(n)&&n!==null){r=this.valueAxisRanges[i]=r||{min:f,max:h};r.min=Math.min(r.min,n);r.max=Math.max(r.max,n)}},seriesValueAxis:function(e){var t=this.plotArea;var i=e.axis;var n=i?t.namedValueAxes[i]:t.valueAxis;if(!n)throw new Error("Unable to locate value axis with name "+i);return n},reflow:function(e){var c=this;var h=this.categorySlots=[];var f=this.points;var d=this.categoryAxis;var p=0;this.traverseDataPoints(function(u,e){var t=e.categoryIx;var i=e.series;var n=c.seriesValueAxis(i);var r=f[p++];var a=h[t];if(!a)h[t]=a=c.categorySlot(d,t,n);if(r){var o=c.plotRange(r,n.startValue());var s=c.valueSlot(n,o);if(s){var l=c.pointSlot(a,s);r.aboveAxis=c.aboveAxis(r,n);r.stackValue=o[1];if(c.options.isStacked100)r.percentage=c.plotValue(r);c.reflowPoint(r,l)}else r.visible=false}});this.reflowCategories(h);if(!this.options.clip&&this.options.limitPoints&&this.points.length)this.limitPoints();this.box=e},valueSlot:function(e,t){return e.getSlot(t[0],t[1],!this.options.clip)},limitPoints:function(){var e=this;var t=this.categoryPoints;var i=t[0].concat(R(t));for(var n=0;n<i.length;n++)if(i[n])e.limitPoint(i[n])},limitPoint:function(e){var t=this.categoryAxis.limitSlot(e.box);if(!t.equals(e.box))e.reflow(t)},aboveAxis:function(e,t){var i=this.categoryAxisCrossingValue(t);var n=e.value;return t.options.reverse?n<i:n>=i},categoryAxisCrossingValue:function(e){var t=this.categoryAxis;var i=e.options;var n=[].concat(i.axisCrossingValues||i.axisCrossingValue);return n[t.axisIndex||0]||0},reflowPoint:function(e,t){e.reflow(t)},reflowCategories:function(){},pointSlot:function(e,t){var i=this.options;var n=i.invertAxes;var r=n?t:e;var a=n?e:t;return new E(r.x1,a.y1,r.x2,a.y2)},categorySlot:function(e,t){return e.getSlot(t)},traverseDataPoints:function(e){var t=this;var i=this.options.series;var n=oi(i);var r=i.length;for(var a=0;a<r;a++)t._outOfRangeCallback(i[a],"_outOfRangeMinPoint",a,e);for(var o=0;o<n;o++)for(var s=0;s<r;s++){var l=i[s];var c=t.categoryAxis.categoryAt(o);var h=t._bindPoint(l,s,o);e(h,{category:c,categoryIx:o,categoriesCount:n,series:l,seriesIx:s})}for(var u=0;u<r;u++)t._outOfRangeCallback(i[u],"_outOfRangeMaxPoint",u,e)},_outOfRangeCallback:function(e,t,i,n){var r=e[t];if(r){var a=r.categoryIx;var o=this._bindPoint(e,i,a,r.item);n(o,{category:r.category,categoryIx:a,series:e,seriesIx:i,dataItem:r.item})}},_bindPoint:function(e,t,i,n){if(!this._bindCache)this._bindCache=[];var r=this._bindCache[t];if(!r)r=this._bindCache[t]=[];var a=r[i];if(!a)a=r[i]=_e.current.bindPoint(e,i,n);return a},formatPointValue:function(e,t){if(e.value===null)return"";return this.chartService.format.auto(t,e.value)},pointValue:function(e){return e.valueFields.value}}),li=(e(si,{series:[],invertAxes:false,isStacked:false,clip:true,limitPoints:true}),{click:function(e,t){return e.trigger(Tt,this.eventArgs(t))},hover:function(e,t){return e.trigger(At,this.eventArgs(t))},over:function(e,t){return e.trigger(Mt,this.eventArgs(t))},out:function(e,t){return e.trigger(Dt,this.eventArgs(t))},eventArgs:function(e){return{value:this.value,percentage:this.percentage,stackValue:this.stackValue,category:this.category,series:this.series,dataItem:this.dataItem,runningTotal:this.runningTotal,total:this.total,element:F(e),originalEvent:e,point:this}}}),ui={createNote:function(){var e=this.options.notes;var t=this.noteText||e.label.text;if(e.visible!==false&&M(t)&&t!==null){this.note=new S.Note({value:this.value,text:t,dataItem:this.dataItem,category:this.category,series:this.series},this.options.notes,this.owner.chartService);this.append(this.note)}}},ci=b.extend({init:function(e,t){b.fn.init.call(this);this.value=e;this.options=t;this.aboveAxis=L(this.options.aboveAxis,true);this.tooltipTracking=true},render:function(){var e=this.options;var t=e.markers;var i=e.labels;if(this._rendered)return;this._rendered=true;if(t.visible&&t.size){this.marker=this.createMarker();this.append(this.marker)}if(i.visible){var n=V(i);var r=this.pointData();var a=this.value;if(n)a=n(r);else if(i.format)a=this.formatValue(i.format);this.label=new N(a,x({align:A,vAlign:A,margin:{left:5,right:5},zIndex:L(i.zIndex,this.series.zIndex)},i),r);this.append(this.label)}this.createNote();if(this.errorBar)this.append(this.errorBar)},markerBorder:function(){var e=this.options.markers;var t=e.background;var i=x({color:this.color},e.border);if(!M(i.color))i.color=new se(t).brightness(Me).toHex();return i},createVisual:function(){},createMarker:function(){var e=this.options.markers;var t=new H({type:e.type,width:e.size,height:e.size,rotation:e.rotation,background:e.background,border:this.markerBorder(),opacity:this.series.opacity||e.opacity,zIndex:L(e.zIndex,this.series.zIndex),animation:e.animation,visual:e.visual},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category});return t},markerBox:function(){if(!this.marker){this.marker=this.createMarker();this.marker.reflow(this._childBox)}return this.marker.box},reflow:function(e){var t=this;var i=this;var n=i.options;var r=i.aboveAxis;var a=n.vertical;this.render();this.box=e;var o=e.clone();if(a)if(r)o.y1-=o.height();else o.y2+=o.height();else if(r)o.x1+=o.width();else o.x2-=o.width();this._childBox=o;if(this.marker)this.marker.reflow(o);this.reflowLabel(o);if(this.errorBars)for(var s=0;s<this.errorBars.length;s++)t.errorBars[s].reflow(o);if(this.note){var l=this.markerBox();if(!(n.markers.visible&&n.markers.size)){var u=l.center();l=new E(u.x,u.y,u.x,u.y)}this.note.reflow(l)}},reflowLabel:function(e){var t=this;var i=t.options;var n=t.label;var r=i.labels.position;if(n){r=r===He?I:r;r=r===Ue?P:r;n.reflow(e);n.box.alignTo(this.markerBox(),r);n.reflow(n.box)}},createHighlight:function(){var e=this.options.highlight.markers;var t=this.markerBorder().color;var i=this.options.markers;var n=i.size+(i.border.width||0)+(e.border.width||0);var r=new H({type:i.type,width:n,height:n,rotation:i.rotation,background:e.color||t,border:{color:e.border.color,width:e.border.width,opacity:L(e.border.opacity,1)},opacity:L(e.opacity,1)});r.reflow(this._childBox);return r.getElement()},highlightVisual:function(){return(this.marker||{}).visual},highlightVisualArgs:function(){var e=this.marker;var t,i;if(e){i=e.paddingBox.toRect();t=e.visual}else{var n=this.options.markers.size;var r=n/2;var a=this.box.center();i=new le.Rect([a.x-r,a.y-r],[n,n])}return{options:this.options,rect:i,visual:t}},tooltipAnchor:function(){var e=this.markerBox();var t=this.owner.pane.clipBox();var i=!t||t.overlaps(e);if(i){var n=e.x2+De;var r=B;var a,o;if(this.aboveAxis){a=e.y1;o=P}else{a=e.y2;o=I}return{point:new D(n,a),align:{horizontal:r,vertical:o}}}},formatValue:function(e){return this.owner.formatPointValue(this,e)},overlapsBox:function(e){var t=this.markerBox();return t.overlaps(e)},unclipElements:function(){if(this.label)this.label.options.noclip=true;if(this.note)this.note.options.noclip=true},pointData:function(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,series:this.series}}}),hi=(ci.prototype.defaults={vertical:true,markers:{visible:true,background:a,size:Re,type:d,border:{width:2},opacity:1},labels:{visible:false,position:He,margin:U(3),padding:U(4),animation:{type:Te,delay:Se}},notes:{label:{}},highlight:{markers:{border:{color:"#fff",width:2}},zIndex:T.HIGHLIGHT_ZINDEX},errorBars:{line:{width:1}}},x(ci.prototype,li),x(ci.prototype,ui),b.extend({init:function(e,t,i){b.fn.init.call(this);this.linePoints=e;this.series=t;this.seriesIx=i},points:function(){return this.toGeometryPoints(this.linePoints)},toGeometryPoints:function(e){var t=[];for(var i=0,n=e.length;i<n;i++)if(e[i]&&e[i].visible!==false)t.push(e[i]._childBox.toRect().center());return t},createVisual:function(){var e=this;var t=this.series.visual;if(t){this.visual=t({points:this.toGeometryPoints(this.linePoints),series:this.series,sender:this.getSender(),createVisual:function(){e.segmentVisual();return e.visual}});if(this.visual&&!M(this.visual.options.zIndex))this.visual.options.zIndex=this.series.zIndex}else this.segmentVisual()},segmentVisual:function(){var e=this;var t=e.options;var i=e.series;var n=i.color;var r=i._defaults;if(z(n)&&r)n=r.color;var a=ne.fromPoints(this.points(),{stroke:{color:n,width:i.width,opacity:i.opacity,dashType:i.dashType},zIndex:i.zIndex});if(t.closed)a.close();this.visual=a},aliasFor:function(e,t){return this.parent.getNearestPoint(t.x,t.y,this.seriesIx)}})),fi=(e(hi,{closed:false}),{calculateStepPoints:function(e){var c=this.parent.plotArea.seriesCategoryAxis(this.series);var t=c.options;var h=t.justified;var f=t.vertical;var d=t.reverse;var i=f?_:g;var n=f?g:_;var r=d?2:1;var p=r;var a=di(e[0],i,r,n,p);var o=[a];for(var s=1;s<e.length;s++){var l=di(e[s],i,r,n,p);if(a[i]!==l[i]){var u=new ue;u[i]=a[i];u[n]=l[n];o.push(u,l)}a=l}if(!h)o.push(di(R(e),i,r,n,d?1:2));else if(a!==R(o))o.push(a);return o}});function di(e,t,i,n,r){var a=e.box;var o=new ue;o[t]=a[t+i];o[n]=a[n+r];return o}var pi=hi.extend({points:function(){return this.calculateStepPoints(this.linePoints)}}),vi=(x(pi.prototype,fi),hi.extend({segmentVisual:function(){var e=this.series;var t=e._defaults;var i=e.color;if(z(i)&&t)i=t.color;var n=new s(this.options.closed);var r=n.process(this.points());var a=new ne({stroke:{color:i,width:e.width,opacity:e.opacity,dashType:e.dashType},zIndex:e.zIndex});a.segments.push.apply(a.segments,r);this.visual=a}})),gi={renderSegments:function(){var e=this;var t=this;var c=t.options;var i=t.seriesPoints;var h=c.series;var f=i.length;var n;this._segments=[];for(var r=0;r<f;r++){var a=h[r];var o=e.sortPoints(i[r]);var d=o.length;var s=[];for(var l=0;l<d;l++){var u=o[l];if(u)s.push(u);else if(e.seriesMissingValues(a)!==Ve){if(s.length>1){n=e.createSegment(s,a,r,n);e._addSegment(n)}s=[]}}if(s.length>1){n=e.createSegment(s,a,r,n);e._addSegment(n)}}this.children.unshift.apply(this.children,this._segments)},_addSegment:function(e){this._segments.push(e);e.parent=this},sortPoints:function(e){return e},seriesMissingValues:function(e){var t=e.missingValues;var i=!t&&this.options.isStacked;return i?Fe:t||Ve},getNearestPoint:function(e,t,i){var n=new D(e,t);var r=this.seriesPoints[i];var a=f;var o;for(var s=0;s<r.length;s++){var l=r[s];if(l&&M(l.value)&&l.value!==null&&l.visible!==false){var c=l.box;var u=c.center().distanceTo(n);if(u<a){o=l;a=u}}}return o}},mi=re.extend({setup:function(){this._setEnd(this.options.box.x1)},step:function(e){var t=this.options.box;this._setEnd(S.interpolateValue(t.x1,t.x2,e))},_setEnd:function(e){var t=this.element;var i=t.segments;var n=i[1].anchor();var r=i[2].anchor();t.suspend();n.setX(e);t.resume();r.setX(e)}});function _i(e){for(var t=0;t<e.length;t++)if(M(e[t].zIndex))return true}e(mi,{duration:Se}),ae.current.register("clip",mi);var yi={createAnimation:function(){var e=this.getRoot();if(e&&(e.options||{}).transitions!==false){var t=e.size();var i=ne.fromRect(t.toRect());this.visual.clip(i);this.animation=new mi(i,{box:t});if(_i(this.options.series))this._setChildrenAnimation(i)}},_setChildrenAnimation:function(e){var t=this.animationPoints();for(var i=0;i<t.length;i++){var n=t[i];if(n&&n.visual&&M(n.visual.options.zIndex))n.visual.clip(e)}}},bi=si.extend({render:function(){si.fn.render.call(this);this.updateStackRange();this.renderSegments()},pointType:function(){return ci},createPoint:function(e,t){var i=t.categoryIx;var n=t.category;var r=t.series;var a=t.seriesIx;var c=this.seriesMissingValues(r);var o=e.valueFields.value;if(!M(o)||o===null)if(c===Fe)o=0;else return null;var s=this.pointOptions(r,a);s=this.evalPointOptions(s,o,n,i,r,a);var l=e.fields.color||r.color;if(z(r.color))l=s.color;var u=new ci(o,s);u.color=l;this.append(u);return u},plotRange:function(e){var t=this;var i=this.plotValue(e);if(this.options.isStacked){var n=e.categoryIx;var r=this.categoryPoints[n];for(var a=0;a<r.length;a++){var o=r[a];if(e===o)break;i+=t.plotValue(o);if(t.options.isStacked100)i=Math.min(i,1)}}return[i,i]},createSegment:function(e,t,i){var n=t.style;var r;if(n===Ge)r=pi;else if(n===je)r=vi;else r=hi;return new r(e,t,i)},animationPoints:function(){var e=this.points;var t=[];for(var i=0;i<e.length;i++)t.push((e[i]||{}).marker);return t.concat(this._segments)},supportsPointInactiveOpacity:function(){return false}}),wi=(x(bi.prototype,gi,yi),hi.extend({init:function(e,t,i,n,r){hi.fn.init.call(this,e,t,i);this.prevSegment=n;this.stackPoints=r},createVisual:function(){var e=this.series;var t=e._defaults;var i=e.line||{};var n=e.color;if(z(n)&&t)n=t.color;this.visual=new oe({zIndex:e.zIndex});this.createFill({fill:{color:n,opacity:e.opacity},stroke:null});if(i.width>0&&i.visible!==false)this.createStroke({stroke:x({color:n,opacity:e.opacity,lineCap:"butt"},i)})},strokeSegments:function(){var e=this._strokeSegments;if(!e)e=this._strokeSegments=this.createStrokeSegments();return e},createStrokeSegments:function(){return this.segmentsFromPoints(this.points())},stackSegments:function(){if(this.prevSegment)return this.prevSegment.createStackSegments(this.stackPoints);return this.createStackSegments(this.stackPoints)},createStackSegments:function(e){return this.segmentsFromPoints(this.toGeometryPoints(e)).reverse()},segmentsFromPoints:function(e){return e.map(function(e){return new le.Segment(e)})},createStroke:function(e){var t=new ne(e);t.segments.push.apply(t.segments,this.strokeSegments());this.visual.append(t)},hasStackSegment:function(){return this.prevSegment||this.stackPoints&&this.stackPoints.length},createFill:function(e){var t=this.strokeSegments();var i=t.slice(0);var n=this.hasStackSegment();if(n){var r=this.stackSegments();j(i,r)}var a=new ne(e);a.segments.push.apply(a.segments,i);if(!n&&t.length>1)this.fillToAxes(a);this.visual.append(a)},fillToAxes:function(e){var t=this.parent;var i=t.options.invertAxes;var n=t.seriesValueAxis(this.series);var r=t.categoryAxisCrossingValue(n);var a=n.getSlot(r,r,true);var o=this.strokeSegments();var s=o[0].anchor();var l=R(o).anchor();var u=i?a.x1:a.y1;if(i)e.lineTo(u,l.y).lineTo(u,s.y);else e.lineTo(l.x,u).lineTo(s.x,u)}})),xi=wi.extend({createStrokeSegments:function(){return this.segmentsFromPoints(this.calculateStepPoints(this.linePoints))},createStackSegments:function(e){return this.segmentsFromPoints(this.calculateStepPoints(e)).reverse()}}),ki=(x(xi.prototype,fi),wi.extend({createStrokeSegments:function(){var e=new s(this.options.closed);var t=this.points();return e.process(t)},createStackSegments:function(){var e=this.strokeSegments();var t=[];for(var i=e.length-1;i>=0;i--){var n=e[i];t.push(new le.Segment(n.anchor(),n.controlOut(),n.controlIn()))}return t}})),Ci=bi.extend({createSegment:function(e,t,i,n){var r=this.options.isStacked;var a=(t.line||{}).style;var o;var s;if(r&&i>0&&n){var l=this.seriesMissingValues(t);if(l!=="gap"){s=n.linePoints;o=n}else s=this._gapStackPoints(e,i,a)}var u;if(a===Ge)u=xi;else if(a===je)u=ki;else u=wi;return new u(e,t,i,o,s)},reflow:function(e){var t=this;bi.fn.reflow.call(this,e);var i=this._stackPoints;if(i)for(var n=0;n<i.length;n++){var r=i[n];var a=t.categoryAxis.getSlot(r.categoryIx);r.reflow(a)}},_gapStackPoints:function(e,c,t){var i=this;var n=this.seriesPoints;var r=e[0].categoryIx;var h=e.length;if(r<0){r=0;h--}var f=r+h;var d=this.seriesOptions[0]._outOfRangeMinPoint?1:0;var a=[];this._stackPoints=this._stackPoints||[];for(var o=r;o<f;o++){var s=o+d;var l=c;var u=void 0;do{l--;u=n[l][s]}while(l>0&&!u);if(u){if(t!==Ge&&o>r&&!n[l][s-1])a.push(i._previousSegmentPoint(o,s,s-1,l));a.push(u);if(t!==Ge&&o+1<f&&!n[l][s+1])a.push(i._previousSegmentPoint(o,s,s+1,l))}else{var p=i._createGapStackPoint(o);i._stackPoints.push(p);a.push(p)}}return a},_previousSegmentPoint:function(e,t,i,n){var r=this.seriesPoints;var a=n;var o;while(a>0&&!o){a--;o=r[a][i]}if(!o){o=this._createGapStackPoint(e);this._stackPoints.push(o)}else o=r[a][t];return o},_createGapStackPoint:function(e){var t=this.pointOptions({},0);var i=new ci(0,t);i.categoryIx=e;i.series={};return i},seriesMissingValues:function(e){return e.missingValues||Fe},supportsPointInactiveOpacity:function(){return false}}),Si=t.extend({init:function(){this.axisRanges={}},update:function(e){var t=this.axisRanges;for(var i in e){var n=e[i];var r=t[i];t[i]=r=r||{min:f,max:h};r.min=Math.min(r.min,n.min);r.max=Math.max(r.max,n.max)}},reset:function(e){this.axisRanges[e]=undefined},query:function(e){return this.axisRanges[e]}}),Ti=b.extend({init:function(e,t,i){b.fn.init.call(this,t);this.textBox=new N(e,this.options,i);this.append(this.textBox)},createVisual:function(){this.textBox.options.noclip=this.options.noclip},reflow:function(e){var t=this.options;var i=t.vertical;var n=t.aboveAxis;var r=this.children[0];var a=r.options;var o=r.box;var s=r.options.padding;var l=e;a.align=i?A:B;a.vAlign=i?I:A;if(t.position===$t)if(i){a.vAlign=I;if(!n&&o.height()<e.height())a.vAlign=P}else a.align=n?O:B;else if(t.position===A){a.vAlign=A;a.align=A}else if(t.position===Xt)if(i)a.vAlign=n?P:I;else a.align=n?B:O;else if(t.position===Kt)if(i)if(n)l=new E(e.x1,e.y1-o.height(),e.x2,e.y1);else l=new E(e.x1,e.y2,e.x2,e.y2+o.height());else{a.align=A;if(n)l=new E(e.x2,e.y1,e.x2+o.width(),e.y2);else l=new E(e.x1-o.width(),e.y1,e.x1,e.y2)}if(!t.rotation)if(i)s.left=s.right=(l.width()-r.contentBox.width())/2;else s.top=s.bottom=(l.height()-r.contentBox.height())/2;r.reflow(l)},alignToClipBox:function(e){var t=this.options.vertical;var i=t?g:_;var n=i+"1";var r=i+"2";var a=this.children[0];var o=this.parent.box;if(o[n]<e[n]||e[r]<o[r]){var s=a.paddingBox.clone();s[n]=Math.max(o[n],e[n]);s[r]=Math.min(o[r],e[r]);this.reflow(s)}}});function Ai(e){var t=e.overlay;return t&&t.gradient&&t.gradient!=="none"}e(Ti,{position:Kt,margin:U(3),padding:U(4),color:r,background:"",border:{width:1,color:""},aboveAxis:true,vertical:false,animation:{type:Te,delay:Se},zIndex:2});var Mi=6,Di=b.extend({init:function(e,t){b.fn.init.call(this);this.options=t;this.color=t.color||a;this.aboveAxis=L(this.options.aboveAxis,true);this.value=e},render:function(){if(this._rendered)return;this._rendered=true;this.createLabel();this.createNote();if(this.errorBar)this.append(this.errorBar)},createLabel:function(){var e=this.options;var t=e.labels;if(t.visible){var i=this.pointData();var n=V(t);var r;if(n)r=n(i);else r=this.formatValue(t.format);this.label=new Ti(r,x({vertical:e.vertical},t),i);this.append(this.label)}},formatValue:function(e){return this.owner.formatPointValue(this,e)},reflow:function(e){var t=this;this.render();var i=this.label;this.box=e;if(i){i.options.aboveAxis=this.aboveAxis;i.reflow(e)}if(this.note)this.note.reflow(e);if(this.errorBars)for(var n=0;n<this.errorBars.length;n++)t.errorBars[n].reflow(e)},createVisual:function(){var t=this;var e=this;var i=e.box;var n=e.options;var r=n.visual;if(this.visible!==false){b.fn.createVisual.call(this);if(r){var a=this.rectVisual=r({category:this.category,dataItem:this.dataItem,value:this.value,sender:this.getSender(),series:this.series,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,rect:i.toRect(),createVisual:function(){var e=new oe;t.createRect(e);return e},options:n});if(a)this.visual.append(a)}else if(i.width()>0&&i.height()>0)this.createRect(this.visual)}},createRect:function(e){var t=this.options;var i=t.border;var n=M(i.opacity)?i.opacity:t.opacity;var r=this.box.toRect();r.size.width=Math.round(r.size.width);var a=this.rectVisual=ne.fromRect(r,{fill:{color:this.color,opacity:t.opacity},stroke:{color:this.getBorderColor(),width:i.width,opacity:n,dashType:i.dashType}});var o=this.box.width();var s=this.box.height();var l=t.vertical?o:s;if(l>Mi){y(a);if(o<1||s<1)a.options.stroke.lineJoin="round"}e.append(a);if(Ai(t)){var u=this.createGradientOverlay(a,{baseColor:this.color},x({end:!t.vertical?[0,1]:undefined},t.overlay));e.append(u)}},createHighlight:function(e){var t=ne.fromRect(this.box.toRect(),e);return y(t)},highlightVisual:function(){return this.rectVisual},highlightVisualArgs:function(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}},getBorderColor:function(){var e=this.color;var t=this.options.border;var i=t._brightness||Me;var n=t.color;if(!M(n))n=new se(e).brightness(i).toHex();return n},tooltipAnchor:function(){var e=this;var t=e.options;var i=e.box;var n=e.aboveAxis;var r=this.owner.pane.clipBox()||i;var a=B;var o=I;var s,l;if(t.vertical){s=Math.min(i.x2,r.x2)+De;if(n)l=Math.max(i.y1,r.y1);else{l=Math.min(i.y2,r.y2);o=P}}else{var u=Math.max(i.x1,r.x1);var c=Math.min(i.x2,r.x2);if(t.isStacked){o=P;if(n){a=O;s=c}else s=u;l=Math.max(i.y1,r.y1)-De}else{if(n)s=c+De;else{s=u-De;a=O}l=Math.max(i.y1,r.y1)}}return{point:new D(s,l),align:{horizontal:a,vertical:o}}},overlapsBox:function(e){return this.box.overlaps(e)},pointData:function(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,series:this.series}}});function Ei(e,t){e.forEach(t)}function Ii(e,t){var i=e.length;for(var n=i-1;n>=0;n--)t(e[n],n-i-1)}x(Di.prototype,li),x(Di.prototype,ui),Di.prototype.defaults={border:{width:1},vertical:true,overlay:{gradient:"glass"},labels:{visible:false,format:"{0}"},opacity:1,notes:{label:{}}};var Pi=b.extend({init:function(e){b.fn.init.call(this,e);this.forEach=e.rtl?Ii:Ei},reflow:function(n){var e=this.options;var t=e.vertical;var i=e.gap;var r=e.spacing;var a=this.children;var o=a.length;var s=t?g:_;var c=o+i+r*(o-1);var l=(t?n.height():n.width())/c;var u=n[s+1]+l*(i/2);this.forEach(a,function(e,t){var i=(e.box||n).clone();i[s+1]=u;i[s+2]=u+l;e.reflow(i);if(t<o-1)u+=l*r;u+=l})}}),Bi=(e(Pi,{vertical:false,gap:0,spacing:0}),b.extend({reflow:function(e){var t=this;var i=this.options.vertical?_:g;var n=this.children;var r=n.length;var a=this.box=new E;for(var o=0;o<r;o++){var s=n[o];if(s.visible!==false){var l=s.box.clone();l.snapTo(e,i);if(o===0)a=t.box=l.clone();s.reflow(l);a.wrap(l)}}}})),Oi=(e(Bi,{vertical:true}),si.extend({render:function(){si.fn.render.call(this);this.updateStackRange()},pointType:function(){return Di},clusterType:function(){return Pi},stackType:function(){return Bi},stackLimits:function(e,t){var i=si.fn.stackLimits.call(this,e,t);return i},createPoint:function(e,t){var c=t.categoryIx;var h=t.category;var i=t.series;var f=t.seriesIx;var d=this;var n=d.options;var p=d.children;var r=n.isStacked;var a=this.pointValue(e);var o=this.pointOptions(i,f);var v=o.labels;if(r)if(v.position===Kt)v.position=$t;o.isStacked=r;var s=e.fields.color||i.color;if(a<0&&o.negativeColor)s=o.negativeColor;o=this.evalPointOptions(o,a,h,c,i,f);if(z(i.color))s=o.color;var g=this.pointType();var l=new g(a,o);l.color=s;var u=p[c];if(!u){var m=this.clusterType();u=new m({vertical:n.invertAxes,gap:n.gap,spacing:n.spacing,rtl:!n.invertAxes&&(this.chartService||{}).rtl});this.append(u)}if(r){var _=this.getStackWrap(i,u);_.append(l)}else u.append(l);return l},getStackWrap:function(e,t){var i=e.stack;var n=i?i.group||i:i;var r=t.children;var a;if(typeof n===T.STRING){for(var o=0;o<r.length;o++)if(r[o]._stackGroup===n){a=r[o];break}}else a=r[0];if(!a){var s=this.stackType();a=new s({vertical:!this.options.invertAxes});a._stackGroup=n;t.append(a)}return a},categorySlot:function(e,t,i){var n=this.options;var r=e.getSlot(t);var a=i.startValue();if(n.isStacked){var o=i.getSlot(a,a,true);var s=n.invertAxes?_:g;r[s+1]=r[s+2]=o[s+1]}return r},reflowCategories:function(e){var t=this.children;var i=t.length;for(var n=0;n<i;n++)t[n].reflow(e[n])},createAnimation:function(){this._setAnimationOptions();si.fn.createAnimation.call(this);if(_i(this.options.series))this._setChildrenAnimation()},_setChildrenAnimation:function(){var e=this;var t=this.points;for(var i=0;i<t.length;i++){var n=t[i];var r=n.visual;if(r&&M(r.options.zIndex)){n.options.animation=e.options.animation;n.createAnimation()}}},_setAnimationOptions:function(){var e=this.options;var t=e.animation||{};var i;if(e.isStacked){var n=this.seriesValueAxis(e.series[0]);i=n.getSlot(n.startValue())}else i=this.categoryAxis.getSlot(0);t.origin=new ue(i.x1,i.y1);t.vertical=!e.invertAxes}})),zi=(e(Oi,{animation:{type:qe}}),b.extend({init:function(e,t){b.fn.init.call(this,t);this.value=e},reflow:function(e){var t=this;var i=t.options;var n=t.value;var r=t.owner;var a=r.seriesValueAxis(i);var o=a.getSlot(n.open,n.close);var s=a.getSlot(n.low,n.high);o.x1=s.x1=e.x1;o.x2=s.x2=e.x2;this.realBody=o;var l=s.center().x;var u=[];u.push([[l,s.y1],[l,o.y1]]);u.push([[l,o.y2],[l,s.y2]]);this.lines=u;this.box=s.clone().wrap(o);if(!this._rendered){this._rendered=true;this.createNote()}this.reflowNote()},reflowNote:function(){if(this.note)this.note.reflow(this.box)},createVisual:function(){b.fn.createVisual.call(this);this._mainVisual=this.mainVisual(this.options);this.visual.append(this._mainVisual);this.createOverlay()},mainVisual:function(e){var t=new oe;this.createBody(t,e);this.createLines(t,e);return t},createBody:function(e,t){var i=ne.fromRect(this.realBody.toRect(),{fill:{color:this.color,opacity:t.opacity},stroke:null});if(t.border.width>0)i.options.set("stroke",{color:this.getBorderColor(),width:t.border.width,dashType:t.border.dashType,opacity:L(t.border.opacity,t.opacity)});y(i);e.append(i);if(Ai(t))e.append(this.createGradientOverlay(i,{baseColor:this.color},x({end:!t.vertical?[0,1]:undefined},t.overlay)))},createLines:function(e,t){this.drawLines(e,t,this.lines,t.line)},drawLines:function(e,t,i,n){if(!i)return;var r={stroke:{color:n.color||this.color,opacity:L(n.opacity,t.opacity),width:n.width,dashType:n.dashType,lineCap:"butt"}};for(var a=0;a<i.length;a++){var o=ne.fromPoints(i[a],r);y(o);e.append(o)}},getBorderColor:function(){var e=this.options.border;var t=e.color;if(!M(t))t=new se(this.color).brightness(e._brightness).toHex();return t},createOverlay:function(){var e=ne.fromRect(this.box.toRect(),{fill:{color:a,opacity:0},stroke:null});this.visual.append(e)},createHighlight:function(){var e=this.options.highlight;var t=this.color;this.color=e.color||this.color;var i=this.mainVisual(x({},this.options,{line:{color:this.getBorderColor()}},e));this.color=t;return i},highlightVisual:function(){return this._mainVisual},highlightVisualArgs:function(){return{options:this.options,rect:this.box.toRect(),visual:this._mainVisual}},tooltipAnchor:function(){var e=this.box;var t=this.owner.pane.clipBox()||e;return{point:new D(e.x2+De,Math.max(e.y1,t.y1)+De),align:{horizontal:B,vertical:I}}},formatValue:function(e){return this.owner.formatPointValue(this,e)},overlapsBox:function(e){return this.box.overlaps(e)}}));function Li(e){return ve(e)===e.length}e(zi,{vertical:true,border:{_brightness:.8},line:{width:2},overlay:{gradient:"glass"},tooltip:{format:"<table>"+"<tr><th colspan='2'>{4:d}</th></tr>"+"<tr><td>Open:</td><td>{0:C}</td></tr>"+"<tr><td>High:</td><td>{1:C}</td></tr>"+"<tr><td>Low:</td><td>{2:C}</td></tr>"+"<tr><td>Close:</td><td>{3:C}</td></tr>"+"</table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:true,label:{}}}),x(zi.prototype,li),x(zi.prototype,ui);var Ri=si.extend({reflowCategories:function(e){var t=this.children;var i=t.length;for(var n=0;n<i;n++)t[n].reflow(e[n])},addValue:function(e,t){var i=t.categoryIx;var c=t.category;var n=t.series;var h=t.seriesIx;var r=this;var f=r.children;var a=r.options;var o=e.valueFields;var d=this.splitValue(o);var p=Li(d);var v=n.data[i];var s=this.categoryPoints[i];var l;if(!s)this.categoryPoints[i]=s=[];if(p)l=this.createPoint(e,t);var u=f[i];if(!u){u=new Pi({vertical:a.invertAxes,gap:a.gap,spacing:a.spacing,rtl:!a.invertAxes&&(this.chartService||{}).rtl});this.append(u)}if(l){this.updateRange(o,t);u.append(l);l.categoryIx=i;l.category=c;l.series=n;l.seriesIx=h;l.owner=this;l.dataItem=v;l.noteText=e.fields.noteText}this.points.push(l);s.push(l)},pointType:function(){return zi},createPoint:function(e,t){var i=t.categoryIx;var n=t.category;var r=t.series;var a=t.seriesIx;var c=this.pointType();var o=e.valueFields;var s=x({},r);var l=e.fields.color||r.color;s=this.evalPointOptions(s,o,n,i,r,a);if(r.type===Ke)if(o.open>o.close)l=e.fields.downColor||r.downColor||r.color;if(z(r.color))l=s.color;s.vertical=!this.options.invertAxes;var u=new c(o,s);u.color=l;return u},splitValue:function(e){return[e.low,e.open,e.close,e.high]},updateRange:function(e,t){var i=t.series.axis;var n=this.splitValue(e);var r=this.valueAxisRanges[i];r=this.valueAxisRanges[i]=r||{min:f,max:h};r=this.valueAxisRanges[i]={min:Math.min.apply(Math,n.concat([r.min])),max:Math.max.apply(Math,n.concat([r.max]))}},formatPointValue:function(e,t){var i=e.value;return this.chartService.format.auto(t,i.open,i.high,i.low,i.close,e.category)},animationPoints:function(){return this.points}}),Fi=(x(Ri.prototype,yi),zi.extend({init:function(e,t){zi.fn.init.call(this,e,t);this.createNote()},reflow:function(e){var t=this;var i=t.options;var n=t.value;var r=t.owner;var a=r.seriesValueAxis(i);var o,s;this.boxSlot=s=a.getSlot(n.q1,n.q3);this.realBody=s;this.reflowBoxSlot(e);this.whiskerSlot=o=a.getSlot(n.lower,n.upper);this.reflowWhiskerSlot(e);var l=a.getSlot(n.median);if(n.mean){var u=a.getSlot(n.mean);this.meanPoints=this.calcMeanPoints(e,u)}this.whiskerPoints=this.calcWhiskerPoints(s,o);this.medianPoints=this.calcMedianPoints(e,l);this.box=o.clone().wrap(s);this.reflowNote()},reflowBoxSlot:function(e){this.boxSlot.x1=e.x1;this.boxSlot.x2=e.x2},reflowWhiskerSlot:function(e){this.whiskerSlot.x1=e.x1;this.whiskerSlot.x2=e.x2},calcMeanPoints:function(e,t){return[[[e.x1,t.y1],[e.x2,t.y1]]]},calcWhiskerPoints:function(e,t){var i=t.center().x;return[[[i-5,t.y1],[i+5,t.y1],[i,t.y1],[i,e.y1]],[[i-5,t.y2],[i+5,t.y2],[i,t.y2],[i,e.y2]]]},calcMedianPoints:function(e,t){return[[[e.x1,t.y1],[e.x2,t.y1]]]},renderOutliers:function(e){var t=this;var i=this.value;var n=i.outliers||[];var r=Math.abs(i.q3-i.q1)*3;var a=[];var o=e.markers||{};for(var s=0;s<n.length;s++){var l=n[s];if(l<i.q3+r&&l>i.q1-r)o=e.outliers;else o=e.extremes;var u=x({},o.border);if(!M(u.color))if(M(t.color))u.color=t.color;else u.color=new se(o.background).brightness(Me).toHex();var c=new H({type:o.type,width:o.size,height:o.size,rotation:o.rotation,background:o.background,border:u,opacity:o.opacity});c.value=l;a.push(c)}this.reflowOutliers(a);return a},reflowOutliers:function(e){var t=this;var i=this.owner.seriesValueAxis(this.options);var n=this.box.center();for(var r=0;r<e.length;r++){var a=e[r].value;var o=i.getSlot(a);if(t.options.vertical)o.move(n.x);else o.move(undefined,n.y);t.box=t.box.wrap(o);e[r].reflow(o)}},mainVisual:function(e){var t=zi.fn.mainVisual.call(this,e);var i=this.renderOutliers(e);for(var n=0;n<i.length;n++){var r=i[n].getElement();if(r)t.append(r)}return t},createLines:function(e,t){this.drawLines(e,t,this.whiskerPoints,t.whiskers);this.drawLines(e,t,this.medianPoints,t.median);this.drawLines(e,t,this.meanPoints,t.mean)},getBorderColor:function(){if((this.options.border||{}).color)return this.options.border.color;if(this.color)return this.color;return zi.fn.getBorderColor.call(this)}})),Vi=(e(Fi,{border:{_brightness:.8},line:{width:2},median:{color:"#f6f6f6"},mean:{width:2,dashType:"dash",color:"#f6f6f6"},overlay:{gradient:"glass"},tooltip:{format:"<table>"+"<tr><th colspan='2'>{6:d}</th></tr>"+"<tr><td>Lower:</td><td>{0:C}</td></tr>"+"<tr><td>Q1:</td><td>{1:C}</td></tr>"+"<tr><td>Median:</td><td>{2:C}</td></tr>"+"<tr><td>Mean:</td><td>{5:C}</td></tr>"+"<tr><td>Q3:</td><td>{3:C}</td></tr>"+"<tr><td>Upper:</td><td>{4:C}</td></tr>"+"</table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:true,label:{}},outliers:{visible:true,size:Re,type:T.CROSS,background:a,border:{width:2,opacity:1},opacity:0},extremes:{visible:true,size:Re,type:d,background:a,border:{width:2,opacity:1},opacity:0}}),x(Fi.prototype,li),Fi.extend({reflowBoxSlot:function(e){this.boxSlot.y1=e.y1;this.boxSlot.y2=e.y2},reflowWhiskerSlot:function(e){this.whiskerSlot.y1=e.y1;this.whiskerSlot.y2=e.y2},calcMeanPoints:function(e,t){return[[[t.x1,e.y1],[t.x1,e.y2]]]},calcWhiskerPoints:function(e,t){var i=t.center().y;return[[[t.x1,i-5],[t.x1,i+5],[t.x1,i],[e.x1,i]],[[t.x2,i-5],[t.x2,i+5],[t.x2,i],[e.x2,i]]]},calcMedianPoints:function(e,t){return[[[t.x1,e.y1],[t.x1,e.y2]]]}})),Ni=Ri.extend({addValue:function(e,t){var i=t.categoryIx;var c=t.category;var n=t.series;var h=t.seriesIx;var r=this;var f=r.children;var a=r.options;var o=e.valueFields;var d=this.splitValue(o);var p=Li(d);var v=n.data[i];var s=this.categoryPoints[i];var l;if(!s)this.categoryPoints[i]=s=[];if(p)l=this.createPoint(e,t);var u=f[i];if(!u){u=new Pi({vertical:a.invertAxes,gap:a.gap,spacing:a.spacing,rtl:!a.invertAxes&&(this.chartService||{}).rtl});this.append(u)}if(l){this.updateRange(o,t);u.append(l);l.categoryIx=i;l.category=c;l.series=n;l.seriesIx=h;l.owner=this;l.dataItem=v}this.points.push(l);s.push(l)},pointType:function(){if(this.options.invertAxes)return Vi;return Fi},splitValue:function(e){return[e.lower,e.q1,e.median,e.q3,e.upper]},updateRange:function(e,t){var i=t.series.axis;var n=this.valueAxisRanges[i];var r=this.splitValue(e).concat(this.filterOutliers(e.outliers));if(M(e.mean))r=r.concat(e.mean);n=this.valueAxisRanges[i]=n||{min:f,max:h};n=this.valueAxisRanges[i]={min:Math.min.apply(Math,r.concat([n.min])),max:Math.max.apply(Math,r.concat([n.max]))}},formatPointValue:function(e,t){var i=e.value;return this.chartService.format.auto(t,i.lower,i.q1,i.median,i.q3,i.upper,i.mean,e.category)},filterOutliers:function(e){var t=(e||[]).length;var i=[];for(var n=0;n<t;n++){var r=e[n];if(M(r)&&r!==null)i.push(r)}return i},supportsPointInactiveOpacity:function(){return false}}),Hi=ii.extend({getAxis:function(){var e=this.chart.seriesAxes(this.series);var t=this.isVertical?e.y:e.x;return t}});function Ui(e){return M(e)&&e!==null}var ji=b.extend({init:function(e,t){b.fn.init.call(this,t);this.plotArea=e;this.chartService=e.chartService;this._initFields();this.render()},_initFields:function(){this.xAxisRanges={};this.yAxisRanges={};this.points=[];this.seriesPoints=[];this.seriesOptions=[];this._evalSeries=[]},render:function(){this.traverseDataPoints(this.addValue.bind(this))},addErrorBar:function(e,t,i){var n=e.value[t];var r=t+"Value";var c=t+"ErrorLow";var h=t+"ErrorHigh";var a=i.seriesIx;var f=i.series;var o=e.options.errorBars;var s=i[c];var l=i[h];if(v(n)){var u;if(v(s)&&v(l))u={low:s,high:l};if(o&&M(o[r])){this.seriesErrorRanges=this.seriesErrorRanges||{x:[],y:[]};this.seriesErrorRanges[t][a]=this.seriesErrorRanges[t][a]||new ke(o[r],f,t);u=this.seriesErrorRanges[t][a].getErrorRange(n,o[r])}if(u)this.addPointErrorBar(u,e,t)}},addPointErrorBar:function(e,t,i){var n=e.low;var r=e.high;var a=t.series;var o=t.options.errorBars;var s=i===g;var l={};t[i+"Low"]=n;t[i+"High"]=r;t.errorBars=t.errorBars||[];var u=new Hi(n,r,s,this,a,o);t.errorBars.push(u);t.append(u);l[i]=n;this.updateRange(l,a);l[i]=r;this.updateRange(l,a)},addValue:function(e,t){var i=e.x;var n=e.y;var r=t.seriesIx;var a=this.options.series[r];var o=this.seriesMissingValues(a);var s=this.seriesPoints[r];var l=e;if(!(Ui(i)&&Ui(n)))l=this.createMissingValue(l,o);var u;if(l){u=this.createPoint(l,t);if(u){m.extend(u,t);this.addErrorBar(u,_,t);this.addErrorBar(u,g,t)}this.updateRange(l,t.series)}this.points.push(u);s.push(u)},seriesMissingValues:function(e){return e.missingValues},createMissingValue:function(){},updateRange:function(e,t){var i=this.chartService.intl;var n=t.xAxis;var r=t.yAxis;var a=e.x;var o=e.y;var s=this.xAxisRanges[n];var l=this.yAxisRanges[r];if(Ui(a)){s=this.xAxisRanges[n]=s||{min:f,max:h};if(G(a))a=W(i,a);s.min=Math.min(s.min,a);s.max=Math.max(s.max,a)}if(Ui(o)){l=this.yAxisRanges[r]=l||{min:f,max:h};if(G(o))o=W(i,o);l.min=Math.min(l.min,o);l.max=Math.max(l.max,o)}},evalPointOptions:function(e,t,i){var n=i.series;var r=i.seriesIx;var a={defaults:n._defaults,excluded:["data","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint"]};var o=this._evalSeries[r];if(!M(o))this._evalSeries[r]=o=ai(e,{},a,true);var s=e;if(o){s=x({},e);ai(s,{value:t,series:n,dataItem:i.dataItem},a)}return s},pointType:function(){return ci},pointOptions:function(e,t){var i=this.seriesOptions[t];if(!i){var n=this.pointType().prototype.defaults;this.seriesOptions[t]=i=x({},n,{markers:{opacity:e.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},e)}return i},createPoint:function(e,t){var i=t.series;var n=this.pointOptions(i,t.seriesIx);var r=t.color||i.color;n=this.evalPointOptions(n,e,t);if(z(i.color))r=n.color;var a=new ci(e,n);a.color=r;this.append(a);return a},seriesAxes:function(e){var t=e.xAxis;var i=e.yAxis;var n=this.plotArea;var r=t?n.namedXAxes[t]:n.axisX;var a=i?n.namedYAxes[i]:n.axisY;if(!r)throw new Error("Unable to locate X axis with name "+t);if(!a)throw new Error("Unable to locate Y axis with name "+i);return{x:r,y:a}},reflow:function(e){var s=this;var l=this.points;var u=!this.options.clip;var c=0;this.traverseDataPoints(function(e,t){var i=l[c++];var n=s.seriesAxes(t.series);var r=n.x.getSlot(e.x,e.x,u);var a=n.y.getSlot(e.y,e.y,u);if(i)if(r&&a){var o=s.pointSlot(r,a);i.reflow(o)}else i.visible=false});this.box=e},pointSlot:function(e,t){return new E(e.x1,t.y1,e.x2,t.y2)},traverseDataPoints:function(e){var t=this;var i=this;var n=i.options.series;var r=i.seriesPoints;for(var a=0;a<n.length;a++){var o=n[a];var s=r[a];if(!s)r[a]=[];for(var l=0;l<o.data.length;l++){var u=t._bindPoint(o,a,l);var c=u.valueFields;var h=u.fields;e(c,x({pointIx:l,series:o,seriesIx:a,dataItem:o.data[l],owner:t},h))}}},formatPointValue:function(e,t){var i=e.value;return this.chartService.format.auto(t,i.x,i.y)},animationPoints:function(){var e=this.points;var t=[];for(var i=0;i<e.length;i++)t.push((e[i]||{}).marker);return t}}),Gi=(e(ji,{series:[],tooltip:{format:"{0}, {1}"},labels:{format:"{0}, {1}"},clip:true}),x(ji.prototype,yi,{_bindPoint:si.prototype._bindPoint}),ci.extend({init:function(e,t){ci.fn.init.call(this,e,t);this.category=e.category},createHighlight:function(){var e=this.options.highlight;var t=e.border;var i=this.options.markers;var n=this.box.center();var r=(i.size+i.border.width+t.width)/2;var a=new oe;var o=new ie.Circle(new le.Circle([n.x,n.y+r/5+t.width/2],r+t.width/2),{stroke:{color:"none"},fill:this.createGradient({gradient:"bubbleShadow",color:i.background,stops:[{offset:0,color:i.background,opacity:.3},{offset:1,color:i.background,opacity:0}]})});var s=new ie.Circle(new le.Circle([n.x,n.y],r),{stroke:{color:t.color||new se(i.background).brightness(Me).toHex(),width:t.width,opacity:t.opacity},fill:{color:i.background,opacity:e.opacity}});a.append(o,s);return a}})),Wi=(Gi.prototype.defaults=x({},Gi.prototype.defaults,{labels:{position:A},highlight:{opacity:1,border:{color:"#fff",width:2,opacity:1}}}),Gi.prototype.defaults.highlight.zIndex=undefined,ji.extend({_initFields:function(){this._maxSize=h;ji.fn._initFields.call(this)},addValue:function(e,t){if(e.size!==null&&(e.size>0||e.size<0&&t.series.negativeValues.visible)){this._maxSize=Math.max(this._maxSize,Math.abs(e.size));ji.fn.addValue.call(this,e,t)}else{this.points.push(null);this.seriesPoints[t.seriesIx].push(null)}},reflow:function(e){this.updateBubblesSize(e);ji.fn.reflow.call(this,e)},pointType:function(){return Gi},createPoint:function(e,t){var i=t.series;var n=i.data.length;var r=t.pointIx*(Se/n);var a={delay:r,duration:Se-r,type:$e};var o=t.color||i.color;if(e.size<0&&i.negativeValues.visible)o=L(i.negativeValues.color,o);var s=x({labels:{animation:{delay:r,duration:Se-r}}},this.pointOptions(i,t.seriesIx),{markers:{type:d,border:i.border,opacity:i.opacity,animation:a}});s=this.evalPointOptions(s,e,t);if(z(i.color))o=s.color;s.markers.background=o;var l=new Gi(e,s);l.color=o;this.append(l);return l},updateBubblesSize:function(e){var t=this;var c=this;var i=c.options.series;var n=Math.min(e.width(),e.height());for(var r=0;r<i.length;r++){var a=i[r];var h=t.seriesPoints[r];var f=a.minSize||Math.max(n*.02,10);var d=a.maxSize||n*.2;var p=f/2;var o=d/2;var v=Math.PI*p*p;var g=Math.PI*o*o;var m=g-v;var _=m/t._maxSize;for(var s=0;s<h.length;s++){var l=h[s];if(l){var y=Math.abs(l.value.size)*_;var b=Math.sqrt((v+y)/Math.PI);var w=L(l.options.zIndex,0);var u=w+(1-b/o);x(l.options,{zIndex:u,markers:{size:b*2,zIndex:u},labels:{zIndex:u+1}})}}}},formatPointValue:function(e,t){var i=e.value;return this.chartService.format.auto(t,i.x,i.y,i.size,e.category)},createAnimation:function(){},createVisual:function(){}})),qi=(e(Wi,{tooltip:{format:"{3}"},labels:{format:"{3}"}}),H.extend({})),Yi=(x(qi.prototype,li),b.extend({init:function(e,t){b.fn.init.call(this,t);this.aboveAxis=this.options.aboveAxis;this.color=t.color||a;this.value=e},render:function(){var e=this.options;if(!this._rendered){this._rendered=true;if(M(this.value.target)){this.target=new qi({type:e.target.shape,background:e.target.color||this.color,opacity:e.opacity,zIndex:e.zIndex,border:e.target.border,vAlign:I,align:O});this.target.value=this.value;this.target.dataItem=this.dataItem;this.target.series=this.series;this.append(this.target)}this.createNote()}},reflow:function(e){this.render();var t=this;var i=t.options;var n=t.target;var r=t.owner;var a=i.invertAxes;var o=r.seriesValueAxis(this.options);var s=r.categorySlot(r.categoryAxis,i.categoryIx,o);var l=o.getSlot(this.value.target);var c=a?l:s;var h=a?s:l;if(n){var u=new E(c.x1,h.y1,c.x2,h.y2);n.options.height=a?u.height():i.target.line.width;n.options.width=a?i.target.line.width:u.width();n.reflow(u)}if(this.note)this.note.reflow(e);this.box=e},createVisual:function(){b.fn.createVisual.call(this);var e=this.options;var t=ne.fromRect(this.box.toRect(),{fill:{color:this.color,opacity:e.opacity},stroke:null});if(e.border.width>0)t.options.set("stroke",{color:e.border.color||this.color,width:e.border.width,dashType:e.border.dashType,opacity:L(e.border.opacity,e.opacity)});this.bodyVisual=t;y(t);this.visual.append(t)},createAnimation:function(){if(this.bodyVisual)this.animation=re.create(this.bodyVisual,this.options.animation)},createHighlight:function(e){return ne.fromRect(this.box.toRect(),e)},highlightVisual:function(){return this.bodyVisual},highlightVisualArgs:function(){return{rect:this.box.toRect(),visual:this.bodyVisual,options:this.options}},formatValue:function(e){return this.owner.formatPointValue(this,e)}})),$i=(Yi.prototype.tooltipAnchor=Di.prototype.tooltipAnchor,e(Yi,{border:{width:1},vertical:false,opacity:1,target:{shape:"",border:{width:0,color:"green"},line:{width:2}},tooltip:{format:"Current: {0}<br />Target: {1}"}}),x(Yi.prototype,li),x(Yi.prototype,ui),si.extend({init:function(e,t){Xi(t);si.fn.init.call(this,e,t)},reflowCategories:function(e){var t=this.children;var i=t.length;for(var n=0;n<i;n++)t[n].reflow(e[n])},plotRange:function(e){var t=e.series;var i=this.seriesValueAxis(t);var n=this.categoryAxisCrossingValue(i);return[n,e.value.current||n]},createPoint:function(e,t){var i=t.categoryIx;var c=t.category;var n=t.series;var h=t.seriesIx;var r=this;var a=r.options;var f=r.children;var o=e.valueFields;var s=x({vertical:!a.invertAxes,overlay:n.overlay,categoryIx:i,invertAxes:a.invertAxes},n);var d=e.fields.color||n.color;s=this.evalPointOptions(s,o,c,i,n,h);if(z(n.color))d=s.color;var l=new Yi(o,s);l.color=d;var u=f[i];if(!u){u=new Pi({vertical:a.invertAxes,gap:a.gap,spacing:a.spacing,rtl:!a.invertAxes&&(this.chartService||{}).rtl});this.append(u)}u.append(l);return l},updateRange:function(e,t){var i=e.current;var n=e.target;var r=t.series.axis;var a=this.valueAxisRanges[r];if(M(i)&&!isNaN(i)&&M(n&&!isNaN(n))){a=this.valueAxisRanges[r]=a||{min:f,max:h};a.min=Math.min(a.min,i,n);a.max=Math.max(a.max,i,n)}},formatPointValue:function(e,t){return this.chartService.format.auto(t,e.value.current,e.value.target)},pointValue:function(e){return e.valueFields.current},aboveAxis:function(e){var t=e.value.current;return t>0},createAnimation:function(){var e=this;var t=this.points;this._setAnimationOptions();for(var i=0;i<t.length;i++){var n=t[i];n.options.animation=e.options.animation;n.createAnimation()}}}));function Xi(e){var t=e.series;for(var i=0;i<t.length;i++){var n=t[i];var r=n.data;if(r&&!p(r[0])&&!C(r[0]))n.data=[r]}}$i.prototype._setAnimationOptions=Oi.prototype._setAnimationOptions,e($i,{animation:{type:qe}});var Ki=t.extend({init:function(e,t){this.chartService=e;this.options=x({},this.options,t)},getStyle:function(e,t){var i=e.background;var n=e.border.color;if(t){var r=t.color||t.options.color;i=L(i,r);n=L(n,r)}var a=U(e.padding||{},"auto");return{backgroundColor:i,borderColor:n,font:e.font,color:e.color,opacity:e.opacity,borderWidth:l(e.border.width),paddingTop:l(a.top),paddingBottom:l(a.bottom),paddingLeft:l(a.left),paddingRight:l(a.right)}},show:function(e,t,i){e.format=t.format;var n=this.getStyle(t,i);e.style=n;var r=new se(n.backgroundColor);if(!M(t.color)&&!r.isDark())e.className="k-chart-tooltip-inverse";this.chartService.notify(jt,e);this.visible=true},hide:function(){if(this.chartService)this.chartService.notify(Gt);this.visible=false},destroy:function(){delete this.chartService}}),Qi=(e(Ki,{border:{width:1},opacity:1}),Ki.extend({init:function(e,t,i){Ki.fn.init.call(this,e,i);this.crosshair=t;this.formatService=e.format;this.initAxisName()},initAxisName:function(){var e=this.crosshair.axis;var t=e.plotArea;var i;if(t.categoryAxis)i=e.getCategory?"categoryAxis":"valueAxis";else i=e.options.vertical?"yAxis":"xAxis";this.axisName=i},showAt:function(e){var t=this;var i=t.crosshair.axis;var n=t.options;var r=i[n.stickyMode?"getCategory":"getValue"](e);var a=r;if(n.format)a=this.formatService.auto(n.format,r);else if(i.options.type===w)a=this.formatService.auto(i.options.labels.dateFormats[i.options.baseUnit],r);this.show({point:e,anchor:this.getAnchor(),crosshair:this.crosshair,value:a,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex},this.options)},hide:function(){this.chartService.notify(Gt,{crosshair:this.crosshair,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex})},getAnchor:function(){var e=this;var t=e.crosshair;var i=e.options;var n=i.position;var r=i.padding;var a=!t.axis.options.vertical;var o=t.line.bbox();var s,l,u;if(a){s=A;if(n===P){l=I;u=o.bottomLeft().translate(0,r)}else{l=P;u=o.topLeft().translate(0,-r)}}else{l=A;if(n===B){s=O;u=o.topLeft().translate(-r,0)}else{s=B;u=o.topRight().translate(r,0)}}return{point:u,align:{horizontal:s,vertical:l}}}})),Zi=(e(Qi,{padding:10}),b.extend({init:function(e,t,i){b.fn.init.call(this,i);this.axis=t;this.stickyMode=t instanceof q;var n=this.options.tooltip;if(n.visible)this.tooltip=new Qi(e,this,x({},n,{stickyMode:this.stickyMode}))},showAt:function(e){this.point=e;this.moveLine();this.line.visible(true);if(this.tooltip)this.tooltip.showAt(e)},hide:function(){this.line.visible(false);if(this.tooltip)this.tooltip.hide()},moveLine:function(){var e=this;var t=e.axis;var i=e.point;var n=t.options.vertical;var r=this.getBox();var a=n?g:_;var o=new ue(r.x1,r.y1);var s;if(n)s=new ue(r.x2,r.y1);else s=new ue(r.x1,r.y2);if(i)if(this.stickyMode){var l=t.getSlot(t.pointCategoryIndex(i));o[a]=s[a]=l.center()[a]}else o[a]=s[a]=i[a];this.box=r;this.line.moveTo(o).lineTo(s)},getBox:function(){var e=this.axis;var t=e.pane.axes;var i=t.length;var n=e.options.vertical;var r=e.lineBox().clone();var a=n?_:g;var o;for(var s=0;s<i;s++){var l=t[s];if(l.options.vertical!==n)if(!o)o=l.lineBox().clone();else o.wrap(l.lineBox())}r[a+1]=o[a+1];r[a+2]=o[a+2];return r},createVisual:function(){b.fn.createVisual.call(this);var e=this.options;this.line=new ne({stroke:{color:e.color,width:e.width,opacity:e.opacity,dashType:e.dashType},visible:false});this.moveLine();this.visual.append(this.line)},destroy:function(){if(this.tooltip)this.tooltip.destroy();b.fn.destroy.call(this)}})),Ji=(e(Zi,{color:r,width:2,zIndex:-1,tooltip:{visible:false}}),b.extend({init:function(e,t){b.fn.init.call(this,e);this.pane=t},shouldClip:function(){var e=this.children;var t=e.length;for(var i=0;i<t;i++)if(e[i].options.clip===true)return true;return false},_clipBox:function(){return this.pane.chartsBox()},createVisual:function(){this.visual=new oe({zIndex:0});if(this.shouldClip()){var e=this.clipBox=this._clipBox();var t=e.toRect();var i=ne.fromRect(t);y(i);this.visual.clip(i);this.unclipLabels()}},stackRoot:function(){return this},unclipLabels:function(){var e=this;var t=e.children;var i=e.clipBox;for(var n=0;n<t.length;n++){var r=t[n].points||{};var a=r.length;for(var o=0;o<a;o++){var s=r[o];if(s&&s.visible!==false&&s.overlapsBox&&s.overlapsBox(i))if(s.unclipElements)s.unclipElements();else{var l=s.label;var u=s.note;if(l&&l.options.visible){if(l.alignToClipBox)l.alignToClipBox(i);l.options.noclip=true}if(u&&u.options.visible)u.options.noclip=true}}}},destroy:function(){b.fn.destroy.call(this);delete this.parent}})),en=(Ji.prototype.isStackRoot=true,Y.extend({init:function(e){Y.fn.init.call(this,e);this.id=nn();this.createTitle();this.content=new b;this.chartContainer=new Ji({},this);this.append(this.content);this.axes=[];this.charts=[]},createTitle:function(){var e=this.options.title;if(C(e))e=x({},e,{align:e.position,position:I});this.title=S.Title.buildTitle(e,this,en.prototype.options.title)},appendAxis:function(e){this.content.append(e);this.axes.push(e);e.pane=this},appendAxisAt:function(e,t){this.content.append(e);this.axes.splice(t,0,e);e.pane=this},appendChart:function(e){if(this.chartContainer.parent!==this.content)this.content.append(this.chartContainer);this.charts.push(e);this.chartContainer.append(e);e.pane=this},empty:function(){var e=this;var t=this.parent;if(t){for(var i=0;i<this.axes.length;i++)t.removeAxis(e.axes[i]);for(var n=0;n<this.charts.length;n++)t.removeChart(e.charts[n])}this.axes=[];this.charts=[];this.content.destroy();this.content.children=[];this.chartContainer.children=[]},reflow:function(e){var t;if(R(this.children)===this.content)t=this.children.pop();Y.fn.reflow.call(this,e);if(t)this.children.push(t);if(this.title)this.contentBox.y1+=this.title.box.height()},visualStyle:function(){var e=Y.fn.visualStyle.call(this);e.zIndex=-10;return e},renderComplete:function(){if(this.options.visible)this.createGridLines()},stackRoot:function(){return this},clipRoot:function(){return this},createGridLines:function(){var e=this.axes;var t=e.concat(this.parent.axes);var i=[];var n=[];for(var r=0;r<e.length;r++){var a=e[r];var o=a.options.vertical;var s=o?i:n;for(var l=0;l<t.length;l++)if(s.length===0){var u=t[l];if(o!==u.options.vertical)j(s,a.createGridLines(u))}}},refresh:function(){this.visual.clear();this.content.parent=null;this.content.createGradient=this.createGradient.bind(this);this.content.renderVisual();this.content.parent=this;if(this.title)this.visual.append(this.title.visual);this.visual.append(this.content.visual);this.renderComplete();this.notifyRender()},chartsBox:function(){var e=this.axes;var c=e.length;var t=new E;for(var i=0;i<c;i++){var n=e[i];var r=n.options.vertical?g:_;var a=n.lineBox();t[r+1]=a[r+1];t[r+2]=a[r+2]}if(t.x2===0){var o=this.parent.axes;var h=o.length;for(var s=0;s<h;s++){var l=o[s];if(!l.options.vertical){var u=l.lineBox();t.x1=u.x1;t.x2=u.x2}}}return t},clipBox:function(){return this.chartContainer.clipBox},notifyRender:function(){var e=this.getService();if(e)e.notify(Wt,{pane:new de(this),index:this.paneIndex,name:this.options.name})}})),tn=1;function nn(){return"pane"+tn++}function rn(e,t){if(t!==null)e.push(t)}function an(e,t,i){var n=t.visible;if(M(n))return n;var r=e.pointVisibility;if(r)return r[i]}function on(e){var t=e.data;var i=[];var n=0;var r=0;for(var a=0;a<t.length;a++){var o=_e.current.bindPoint(e,a);var s=o.valueFields.value;if(G(s))s=parseFloat(s);if(v(s)){o.visible=an(e,o.fields,a)!==false;o.value=Math.abs(s);i.push(o);if(o.visible)n+=o.value;if(s!==0)r++}else i.push(null)}return{total:n,points:i,count:r}}function sn(e,t){if(e&&t)return e.toLowerCase()===t.toLowerCase();return e===t}function ln(e,t){var i=[];var n=[].concat(t);for(var r=0;r<e.length;r++){var a=e[r];if(k(a.type,n))i.push(a)}return i}function un(e,t,i){if(t===null)return t;var n="_date_"+e;var r=t[n];if(!r){r=W(i,u(e,true)(t));t[n]=r}return r}function cn(e,t){var i=e.type;var n=t instanceof Date;return!i&&n||sn(i,w)}function hn(e){return e.length===1?e[0]:e}en.prototype.isStackRoot=true,e(en,{zIndex:-1,shrinkToFit:true,title:{align:B},visible:true});var fn=/area/i;function dn(e){if(e.missingValues)return e.missingValues;return fn.test(e.type)||e.stack?Fe:Ve}function pn(e,t){var i=_e.current.bindPoint(e,null,t);var n=i.valueFields;for(var r in n)if(S.convertableToNumber(n[r]))return true}function vn(e){var t=e.start;var i=e.dir;var n=e.min;var r=e.max;var a=e.getter;var o=e.hasItem;var c=e.series;var s,l;var u=t;do{u+=i;if(o(u)){l=a(u);s=pn(c,l.item)}}while(n<=u&&u<=r&&!s);if(s)return l}function gn(e,c,t,i,h){var n=c.min;var r=c.max;var a=n>0&&n<t;var f=r+1<t;if(a||f){var d=dn(e);var o,s;if(d!==Ve){if(a)o=i(n-1);if(f)s=i(r+1)}else{var l,u;if(a){l=i(n-1);u=pn(e,l.item);if(!u)o=vn({start:n,dir:-1,min:0,max:t-1,getter:i,hasItem:h,series:e});else o=l}if(f){l=i(r+1);u=pn(e,l.item);if(!u)s=vn({start:r,dir:1,min:0,max:t-1,getter:i,hasItem:h,series:e});else s=l}}if(o)e._outOfRangeMinPoint=o;if(s)e._outOfRangeMaxPoint=s}}var mn=b.extend({init:function(e,t,i){b.fn.init.call(this,t);this.initFields(e,t);this.series=e;this.initSeries();this.charts=[];this.options.legend=this.options.legend||{};this.options.legend.items=[];this.axes=[];this.crosshairs=[];this.chartService=i;this.originalOptions=t;this.createPanes();this.render();this.createCrosshairs()},initFields:function(){},initSeries:function(){var e=this.series;for(var t=0;t<e.length;t++)e[t].index=t},createPanes:function(){var e=this;var t=this.options.title||{};var i=this.options.paneDefaults;var n=this.options.panes||[];var r=Math.max(n.length,1);var a=[];var o=x({title:{color:t.color}},i);for(var s=0;s<r;s++){var l=x({},o,n[s]);if(G(l.title))l.title=x({text:l.title},o.title);var u=new en(l);u.paneIndex=s;a.push(u);e.append(u)}this.panes=a},crosshairOptions:function(e){return e.options.crosshair},createCrosshairs:function(e){var t=this;if(e===void 0)e=this.panes;for(var i=0;i<e.length;i++){var n=e[i];for(var r=0;r<n.axes.length;r++){var a=n.axes[r];var o=t.crosshairOptions(a);if(o&&o.visible){var s=new Zi(t.chartService,a,o);t.crosshairs.push(s);n.content.append(s)}}}},removeCrosshairs:function(e){var t=this.crosshairs;var i=e.axes;for(var n=t.length-1;n>=0;n--)for(var r=0;r<i.length;r++)if(t[n].axis===i[r]){t.splice(n,1);break}},hideCrosshairs:function(){var e=this.crosshairs;for(var t=0;t<e.length;t++)e[t].hide()},findPane:function(e){var t=this.panes;var i;for(var n=0;n<t.length;n++)if(t[n].options.name===e){i=t[n];break}return i||t[0]},findPointPane:function(e){var t=this.panes;var i;for(var n=0;n<t.length;n++)if(t[n].box.containsPoint(e)){i=t[n];break}return i},appendAxis:function(e){var t=this.findPane(e.options.pane);t.appendAxis(e);this.axes.push(e);e.plotArea=this},removeAxis:function(e){var t=this;var i=[];for(var n=0;n<this.axes.length;n++){var r=t.axes[n];if(e!==r)i.push(r);else r.destroy()}this.axes=i},appendChart:function(e,t){this.charts.push(e);if(t)t.appendChart(e);else this.append(e)},removeChart:function(e){var t=this;var i=[];for(var n=0;n<this.charts.length;n++){var r=t.charts[n];if(r!==e)i.push(r);else r.destroy()}this.charts=i},addToLegend:function(e){var c=e.length;var t=this.options.legend;var h=t.labels||{};var f=t.inactiveItems||{};var i=f.labels||{};var d=[];for(var n=0;n<c;n++){var r=e[n];var a=r.visible!==false;if(r.visibleInLegend===false)continue;var o=r.name;var p=a?V(h):V(i)||V(h);if(p)o=p({text:Ui(o)?o:"",series:r});var v=r._defaults;var s=r.color;if(z(s)&&v)s=v.color;var l=void 0,u=void 0;if(a){l={};u=s}else{l={color:i.color,font:i.font};u=f.markers.color}if(Ui(o)&&o!=="")d.push({text:o,labels:l,markerColor:u,series:r,active:a})}j(t.items,d)},groupAxes:function(e){var t=[];var i=[];for(var n=0;n<e.length;n++){var r=e[n].axes;for(var a=0;a<r.length;a++){var o=r[a];if(o.options.vertical)i.push(o);else t.push(o)}}return{x:t,y:i,any:t.concat(i)}},groupSeriesByPane:function(){var e=this;var t=this.series;var i={};for(var n=0;n<t.length;n++){var r=t[n];var a=e.seriesPaneName(r);if(i[a])i[a].push(r);else i[a]=[r]}return i},filterVisibleSeries:function(e){var t=[];for(var i=0;i<e.length;i++){var n=e[i];if(n.visible!==false)t.push(n)}return t},reflow:function(e){var t=this.options.plotArea;var i=this.panes;var n=U(t.margin);this.box=e.clone().unpad(n);this.reflowPanes();this.detachLabels();this.reflowAxes(i);this.reflowCharts(i)},redraw:function(e){var t=this;var i=[].concat(e);this.initSeries();var n=this.getRoot();if(n)n.cleanGradients();for(var r=0;r<i.length;r++){t.removeCrosshairs(i[r]);i[r].empty()}this.render(i);this.detachLabels();this.reflowAxes(this.panes);this.reflowCharts(i);this.createCrosshairs(i);for(var a=0;a<i.length;a++)i[a].refresh()},axisCrossingValues:function(e,t){var i=e.options;var n=[].concat(i.axisCrossingValues||i.axisCrossingValue);var r=t.length-n.length;var a=n[0]||0;for(var o=0;o<r;o++)n.push(a);return n},alignAxisTo:function(e,t,i,n){var r=e.getSlot(i,i,true);var a=e.options.reverse?2:1;var o=t.getSlot(n,n,true);var s=t.options.reverse?2:1;var l=e.box.translate(o[_+s]-r[_+a],o[g+s]-r[g+a]);if(e.pane!==t.pane)l.translate(0,e.pane.box.y1-t.pane.box.y1);e.reflow(l)},alignAxes:function(e,t){var i=this;var c=e[0];var h=t[0];var f=this.axisCrossingValues(c,t);var d=this.axisCrossingValues(h,e);var p={};var v={};var g={};var m={};for(var n=0;n<t.length;n++){var r=t[n];var _=r.pane;var a=_.id;var y=r.options.visible!==false;var o=bn(e,_)||c;var b=f;if(o!==c)b=i.axisCrossingValues(o,t);i.alignAxisTo(r,o,d[n],b[n]);if(r.options._overlap)continue;if($(r.lineBox().x1)===$(o.lineBox().x1)){if(p[a])r.reflow(r.box.alignTo(p[a].box,B).translate(-r.options.margin,0));if(y)p[a]=r}if($(r.lineBox().x2)===$(o.lineBox().x2)){if(!r._mirrored){r.options.labels.mirror=!r.options.labels.mirror;r._mirrored=true}i.alignAxisTo(r,o,d[n],b[n]);if(v[a])r.reflow(r.box.alignTo(v[a].box,O).translate(r.options.margin,0));if(y)v[a]=r}if(n!==0&&h.pane===r.pane){r.alignTo(h);r.reflow(r.box)}}for(var s=0;s<e.length;s++){var l=e[s];var w=l.pane;var u=w.id;var x=l.options.visible!==false;var k=bn(t,w)||h;var C=d;if(k!==h)C=i.axisCrossingValues(k,e);i.alignAxisTo(l,k,f[s],C[s]);if(l.options._overlap)continue;if($(l.lineBox().y1)===$(k.lineBox().y1)){if(!l._mirrored){l.options.labels.mirror=!l.options.labels.mirror;l._mirrored=true}i.alignAxisTo(l,k,f[s],C[s]);if(g[u])l.reflow(l.box.alignTo(g[u].box,I).translate(0,-l.options.margin));if(x)g[u]=l}if($(l.lineBox().y2,T.COORD_PRECISION)===$(k.lineBox().y2,T.COORD_PRECISION)){if(m[u])l.reflow(l.box.alignTo(m[u].box,P).translate(0,l.options.margin));if(x)m[u]=l}if(s!==0){l.alignTo(c);l.reflow(l.box)}}},shrinkAxisWidth:function(e){var t=this.groupAxes(e).any;var i=yn(t);var n=0;for(var r=0;r<e.length;r++){var a=e[r];if(a.axes.length>0)n=Math.max(n,i.width()-a.contentBox.width())}if(n!==0)for(var o=0;o<t.length;o++){var s=t[o];if(!s.options.vertical)s.reflow(s.box.shrink(n,0))}},shrinkAxisHeight:function(e){var t;for(var i=0;i<e.length;i++){var n=e[i];var r=n.axes;var a=Math.max(0,yn(r).height()-n.contentBox.height());if(a!==0){for(var o=0;o<r.length;o++){var s=r[o];if(s.options.vertical)s.reflow(s.box.shrink(0,a))}t=true}}return t},fitAxes:function(e){var t=this.groupAxes(e).any;var i=0;for(var n=0;n<e.length;n++){var r=e[n];var a=r.axes;var o=r.contentBox;if(a.length>0){var s=yn(a);var c=Math.max(o.y1-s.y1,o.y2-s.y2);i=Math.max(i,o.x1-s.x1);for(var l=0;l<a.length;l++){var h=a[l];h.reflow(h.box.translate(0,c))}}}for(var u=0;u<t.length;u++){var f=t[u];f.reflow(f.box.translate(i,0))}},reflowAxes:function(e){var t=this;var i=this.groupAxes(e);for(var n=0;n<e.length;n++)t.reflowPaneAxes(e[n]);if(i.x.length>0&&i.y.length>0){this.alignAxes(i.x,i.y);this.shrinkAxisWidth(e);this.autoRotateAxisLabels(i);this.alignAxes(i.x,i.y);if(this.shrinkAxisWidth(e))this.alignAxes(i.x,i.y);this.shrinkAxisHeight(e);this.alignAxes(i.x,i.y);if(this.shrinkAxisHeight(e))this.alignAxes(i.x,i.y);this.fitAxes(e)}},autoRotateAxisLabels:function(e){var t=this;var i=this;var n=i.panes;var r=xn(n);var a;for(var o=0;o<r.length;o++){var s=r[o];if(s.autoRotateLabels())a=true}if(a){for(var l=0;l<n.length;l++)t.reflowPaneAxes(n[l]);if(e.x.length>0&&e.y.length>0){this.alignAxes(e.x,e.y);this.shrinkAxisWidth(n)}}},reflowPaneAxes:function(e){var t=e.axes;var i=t.length;if(i>0)for(var n=0;n<i;n++)t[n].reflow(e.contentBox)},reflowCharts:function(e){var t=this.charts;var i=t.length;var n=this.box;for(var r=0;r<i;r++){var a=t[r].pane;if(!a||k(a,e))t[r].reflow(n)}},reflowPanes:function(){var e=this;var t=e.box;var i=e.panes;var n=i.length;var r=t.height();var c=n;var h=0;var f=t.y1;for(var a=0;a<n;a++){var o=i[a];var s=o.options.height;o.options.width=t.width();if(!o.options.height)h++;else{if(s.indexOf&&s.indexOf("%")){var d=parseInt(s,10)/100;o.options.height=d*t.height()}o.reflow(t.clone());r-=o.options.height}}for(var l=0;l<n;l++){var p=i[l];if(!p.options.height)p.options.height=r/h}for(var u=0;u<n;u++){var v=i[u];var g=t.clone().move(t.x1,f);v.reflow(g);c--;f+=v.options.height}},backgroundBox:function(){var e=this.axes;var t=e.length;var i;for(var n=0;n<t;n++){var r=e[n];for(var a=0;a<t;a++){var o=e[a];if(r.options.vertical!==o.options.vertical){var s=r.lineBox().clone().wrap(o.lineBox());if(!i)i=s;else i=i.wrap(s)}}}return i||this.box},chartsBoxes:function(){var e=this.panes;var t=[];for(var i=0;i<e.length;i++)t.push(e[i].chartsBox());return t},addBackgroundPaths:function(e){var t=this.chartsBoxes();for(var i=0;i<t.length;i++)e.paths.push(ne.fromRect(t[i].toRect()))},backgroundContainsPoint:function(e){var t=this.chartsBoxes();for(var i=0;i<t.length;i++)if(t[i].containsPoint(e))return true},createVisual:function(){b.fn.createVisual.call(this);var e=this.options.plotArea;var t=e.opacity;var i=e.background;var n=e.border;if(n===void 0)n={};if(wn(i)){i=a;t=0}var r=this._bgVisual=new ie.MultiPath({fill:{color:i,opacity:t},stroke:{color:n.width?n.color:"",width:n.width,dashType:n.dashType},zIndex:-1});this.addBackgroundPaths(r);this.appendVisual(r)},pointsByCategoryIndex:function(e){var t=this.charts;var i=[];if(e!==null)for(var n=0;n<t.length;n++){var r=t[n];if(r.pane.options.name==="_navigator")continue;var a=t[n].categoryPoints[e];if(a&&a.length)for(var o=0;o<a.length;o++){var s=a[o];if(s&&M(s.value)&&s.value!==null)i.push(s)}}return i},pointsBySeriesIndex:function(t){return this.filterPoints(function(e){return e.series.index===t})},pointsBySeriesName:function(t){return this.filterPoints(function(e){return e.series.name===t})},filterPoints:function(e){var t=this.charts;var i=[];for(var n=0;n<t.length;n++){var r=t[n];var a=r.points;for(var o=0;o<a.length;o++){var s=a[o];if(s&&s.visible!==false&&e(s))i.push(s)}}return i},findPoint:function(e){var t=this.charts;for(var i=0;i<t.length;i++){var n=t[i];var r=n.points;for(var a=0;a<r.length;a++){var o=r[a];if(o&&o.visible!==false&&e(o))return o}}},paneByPoint:function(e){var t=this.panes;for(var i=0;i<t.length;i++){var n=t[i];if(n.box.containsPoint(e))return n}},detachLabels:function(){var e=this.groupAxes(this.panes);var t=e.x;var i=e.y;this.detachAxisGroupLabels(i,t);this.detachAxisGroupLabels(t,i)},detachAxisGroupLabels:function(e,t){var i=this;var n=0;for(var r=0;r<e.length;r++){var a=e[r];var o=a.pane;var s=bn(t,o)||t[0];var l=r+n;var u=i.createLabelAxis(a,l,s);if(u){n++;var c=o.axes.indexOf(a)+n;o.appendAxisAt(u,c)}}},createLabelAxis:function(e,t,i){var n=e.options.labels;var r=n.position;var c=r!==T.END&&r!==T.START;var h=n.visible;if(c||h===false)return null;var a=this.groupAxes(this.panes);var f=i.options.vertical?a.x:a.y;var o=this.axisCrossingValues(i,f);var d=r===T.END;var s=i.range();var l=d?s.max:s.min;var p=X(o[t],s.min,s.max);if(p-l===0)return null;o.splice(t+1,0,l);i.options.axisCrossingValues=o;var u=e.clone();e.clear();u.options.name=undefined;u.options.line.visible=false;u.options.crosshair=undefined;u.options.notes=undefined;u.options.plotBands=undefined;return u}});function _n(t){return!t.pane.axes.some(function(e){return e.options.vertical===t.options.vertical&&e!==t&&e.options.visible!==false})}function yn(e){var t=e.length;var i;for(var n=0;n<t;n++){var r=e[n];var a=r.options.visible!==false;if(a||_n(r)){var o=a?r.contentBox():r.lineBox();if(!i)i=o.clone();else i.wrap(o)}}return i||new E}function bn(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(n&&n.pane===t)return n}}function wn(e){return e===""||e===null||e==="none"||e==="transparent"||!M(e)}var xn=function(e){return e.reduce(function(e,t){return e.concat(t.axes)},[])},kn=(e(mn,{series:[],plotArea:{margin:{}},background:"",border:{color:r,width:0},paneDefaults:{title:{}},legend:{inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}}}),{hover:function(e,t){this._dispatchEvent(e,t,It)},click:function(e,t){this._dispatchEvent(e,t,Et)}}),Cn=t.extend({init:function(e,t,i){var n=t.canonicalFields(e);var r=t.valueFields(e);var a=t.sourceFields(e,n);var c=this._seriesFields=[];var h=i.query(e.type);var o=e.aggregate||h;this._series=e;this._binder=t;for(var s=0;s<n.length;s++){var l=n[s];var u=void 0;if(C(o))u=o[l];else if(s===0||k(l,r))u=o;else break;if(u)c.push({canonicalName:l,name:a[s],transform:z(u)?u:ge[u]})}},aggregatePoints:function(e,c){var h=this;var t=this;var f=t._series;var i=t._seriesFields;var n=this._bindPoints(e||[]);var r=n.dataItems[0];var a={};if(r&&!v(r)&&!p(r)){var o=function(){};o.prototype=r;a=new o}for(var s=0;s<i.length;s++){var l=i[s];var d=h._bindField(n.values,l.canonicalName);var u=l.transform(d,f,n.dataItems,c);if(u!==null&&C(u)&&!M(u.length)&&!(u instanceof Date)){a=u;break}else if(M(u))Sn(l.name,a,u)}return a},_bindPoints:function(e){var t=this;var i=t._binder;var n=t._series;var r=[];var a=[];for(var o=0;o<e.length;o++){var s=e[o];r.push(i.bindPoint(n,s));a.push(n.data[s])}return{values:r,dataItems:a}},_bindField:function(e,t){var i=[];var n=e.length;for(var r=0;r<n;r++){var a=e[r];var o=a.valueFields;var s=void 0;if(M(o[t]))s=o[t];else s=a.fields[t];i.push(s)}return i}});function Sn(e,t,i){var n=t;var r=e;if(e.indexOf(".")>-1){var a=e.split(".");while(a.length>1){r=a.shift();if(!M(n[r]))n[r]={};n=n[r]}r=a.shift()}n[r]=i}var Tn=t.extend({init:function(){this._defaults={}},register:function(e,t){var i=this;for(var n=0;n<e.length;n++)i._defaults[e[n]]=t},query:function(e){return this._defaults[e]}}),An=(Tn.current=new Tn,Di.extend({createLabel:function(){var e=this.options.labels;var t=x({},e,e.from);var i=x({},e,e.to);if(t.visible){this.labelFrom=this._createLabel(t);this.append(this.labelFrom)}if(i.visible){this.labelTo=this._createLabel(i);this.append(this.labelTo)}},_createLabel:function(e){var t=V(e);var i=this.pointData();var n;if(t)n=t(i);else n=this.formatValue(e.format);return new Ti(n,x({vertical:this.options.vertical},e),i)},reflow:function(e){this.render();var t=this;var i=t.labelFrom;var n=t.labelTo;var r=t.value;this.box=e;if(i){i.options.aboveAxis=r.from>r.to;i.reflow(e)}if(n){n.options.aboveAxis=r.to>r.from;n.reflow(e)}if(this.note)this.note.reflow(e)}})),Mn=(An.prototype.defaults=x({},An.prototype.defaults,{labels:{format:"{0} - {1}"},tooltip:{format:"{1}"}}),Oi.extend({pointType:function(){return An},pointValue:function(e){return e.valueFields},formatPointValue:function(e,t){if(e.value.from===null&&e.value.to===null)return"";return this.chartService.format.auto(t,e.value.from,e.value.to)},plotRange:function(e){if(!e)return 0;return[e.value.from,e.value.to]},updateRange:function(e,t){var i=t.series.axis;var n=e.from;var r=e.to;var a=this.valueAxisRanges[i];if(e!==null&&v(n)&&v(r)){a=this.valueAxisRanges[i]=a||{min:f,max:h};a.min=Math.min(a.min,n);a.max=Math.max(a.max,n);a.min=Math.min(a.min,r);a.max=Math.max(a.max,r)}},aboveAxis:function(e){var t=e.value;return t.from<t.to}})),Dn=(Mn.prototype.plotLimits=si.prototype.plotLimits,ci.extend({aliasFor:function(){return this.parent}})),En="auto",In="{0}",Pn="{1}",Bn=b.extend({init:function(e,t){b.fn.init.call(this);this.value=e;this.options=t;this.aboveAxis=L(this.options.aboveAxis,true);this.tooltipTracking=true;this.initLabelsFormat()},render:function(){if(this._rendered)return;this._rendered=true;var e=this.options;var t=e.markers;var i=e.labels;var n=this.value;var r=this.fromPoint=new Dn(n,x({},this.options,{labels:i.from,markers:t.from}));var a=this.toPoint=new Dn(n,x({},this.options,{labels:i.to,markers:t.to}));this.copyFields(r);this.copyFields(a);this.append(r);this.append(a)},reflow:function(e){this.render();var t=e.from;var i=e.to;this.positionLabels(t,i);this.fromPoint.reflow(t);this.toPoint.reflow(i);this.box=this.fromPoint.markerBox().clone().wrap(this.toPoint.markerBox())},createHighlight:function(){var e=new oe;e.append(this.fromPoint.createHighlight());e.append(this.toPoint.createHighlight());return e},highlightVisual:function(){return this.visual},highlightVisualArgs:function(){return{options:this.options,from:this.fromPoint.highlightVisualArgs(),to:this.toPoint.highlightVisualArgs()}},tooltipAnchor:function(){var e=this.owner.pane.clipBox();var t=!e||e.overlaps(this.box);if(t){var i=this.box;var n=i.center();var r=B;var a,o,s;if(this.options.vertical){a=n.x;o=i.y1-De;s=P}else{a=i.x2+De;o=n.y;s=A}return{point:new D(a,o),align:{horizontal:r,vertical:s}}}},formatValue:function(e){return this.owner.formatPointValue(this,e)},overlapsBox:function(e){return this.box.overlaps(e)},unclipElements:function(){this.fromPoint.unclipElements();this.toPoint.unclipElements()},initLabelsFormat:function(){var e=this.options.labels;if(!e.format){if(!e.from||!e.from.format)e.from=m.extend({},e.from,{format:In});if(!e.to||!e.to.format)e.to=m.extend({},e.to,{format:Pn})}},positionLabels:function(e,t){var i=this.options;var n=i.labels;var r=i.vertical;if(n.position===En){var a,o;if(r)if(t.y1<=e.y1){o=He;a=Ue}else{o=Ue;a=He}else if(t.x1<=e.x1){o=B;a=O}else{o=O;a=B}if(!n.from||!n.from.position)this.fromPoint.options.labels.position=a;if(!n.to||!n.to.position)this.toPoint.options.labels.position=o}},copyFields:function(e){e.dataItem=this.dataItem;e.category=this.category;e.series=this.series;e.color=this.color;e.owner=this.owner}}),On=(x(Bn.prototype,li),x(Bn.prototype,ui),Bn.prototype.defaults={markers:{visible:false,background:a,size:Re,type:d,border:{width:2},opacity:1},labels:{visible:false,margin:U(3),padding:U(4),animation:{type:Te,delay:Se},position:En},notes:{label:{}},highlight:{markers:{border:{color:a,width:2}},zIndex:T.HIGHLIGHT_ZINDEX},tooltip:{format:"{0} - {1}"}},wi.extend({createStrokeSegments:function(){return this.segmentsFromPoints(this.toGeometryPoints(this.toPoints()))},stackSegments:function(){var e=this.fromSegments;if(!this.fromSegments)e=this.fromSegments=this.segmentsFromPoints(this.toGeometryPoints(this.fromPoints().reverse()));return e},createStroke:function(e){var t=new ne(e);var i=new ne(e);t.segments.push.apply(t.segments,this.strokeSegments());i.segments.push.apply(i.segments,this.stackSegments());this.visual.append(t);this.visual.append(i)},hasStackSegment:function(){return true},fromPoints:function(){return this.linePoints.map(function(e){return e.fromPoint})},toPoints:function(){return this.linePoints.map(function(e){return e.toPoint})}})),zn=On.extend({createStrokeSegments:function(){return this.createCurveSegments(this.toPoints())},stackSegments:function(){var e=this.fromSegments;if(!this.fromSegments)e=this.fromSegments=this.createCurveSegments(this.fromPoints().reverse());return e},createCurveSegments:function(e){var t=new s;return t.process(this.toGeometryPoints(e))}}),Ln=On.extend({createStrokeSegments:function(){return this.segmentsFromPoints(this.calculateStepPoints(this.toPoints()))},stackSegments:function(){var e=this.fromSegments;if(!this.fromSegments){e=this.fromSegments=this.segmentsFromPoints(this.calculateStepPoints(this.fromPoints()));e.reverse()}return e}}),Rn=(x(Ln.prototype,fi),si.extend({render:function(){si.fn.render.call(this);this.renderSegments()},pointType:function(){return Bn},createPoint:function(e,t){var i=t.categoryIx;var n=t.category;var r=t.series;var a=t.seriesIx;var o=e.valueFields;if(!Ui(o.from)&&!Ui(o.to))if(this.seriesMissingValues(r)===Fe)o={from:0,to:0};else return null;var s=this.pointOptions(r,a);s=this.evalPointOptions(s,o,n,i,r,a);var l=e.fields.color||r.color;if(z(r.color))l=s.color;var u=new Bn(o,s);u.color=l;this.append(u);return u},createSegment:function(e,t,i){var n=(t.line||{}).style;var r;if(n==="smooth")r=zn;else if(n==="step")r=Ln;else r=On;return new r(e,t,i)},plotRange:function(e,t){if(!e)return[t,t];return[e.value.from,e.value.to]},valueSlot:function(e,t){var i=e.getSlot(t[0],t[0],!this.options.clip);var n=e.getSlot(t[1],t[1],!this.options.clip);if(i&&n)return{from:i,to:n}},pointSlot:function(e,t){var i=t.from;var n=t.to;var r,a;if(this.options.invertAxes){r=new E(i.x1,e.y1,i.x2,e.y2);a=new E(n.x1,e.y1,n.x2,e.y2)}else{r=new E(e.x1,i.y1,e.x2,i.y2);a=new E(e.x1,n.y1,e.x2,n.y2)}return{from:r,to:a}},addValue:function(e,t){var i=e.valueFields;if(!v(i.from))i.from=i.to;if(!v(i.to))i.to=i.from;si.fn.addValue.call(this,e,t)},updateRange:function(e,t){if(e!==null&&v(e.from)&&v(e.to)){var i=t.series.axis;var n=this.valueAxisRanges[i]=this.valueAxisRanges[i]||{min:f,max:h};var r=e.from;var a=e.to;n.min=Math.min(n.min,r,a);n.max=Math.max(n.max,r,a)}},formatPointValue:function(e,t){var i=e.value;return this.chartService.format.auto(t,i.from,i.to)},animationPoints:function(){var e=this.points;var t=[];for(var i=0;i<e.length;i++){var n=e[i];if(n){t.push((n.fromPoint||{}).marker);t.push((n.toPoint||{}).marker)}}return t.concat(this._segments)}})),Fn=(x(Rn.prototype,gi,yi),zi.extend({reflow:function(c){var e=this;var h=e.options;var t=e.value;var f=e.owner;var i=f.seriesValueAxis(h);var n=[];var r=[];var a=[];var o=i.getSlot(t.low,t.high);var s=i.getSlot(t.open,t.open);var l=i.getSlot(t.close,t.close);s.x1=l.x1=o.x1=c.x1;s.x2=l.x2=o.x2=c.x2;var u=o.center().x;n.push([s.x1,s.y1]);n.push([u,s.y1]);r.push([u,l.y1]);r.push([l.x2,l.y1]);a.push([u,o.y1]);a.push([u,o.y2]);this.lines=[n,r,a];this.box=o.clone().wrap(s.clone().wrap(l));this.reflowNote()},createBody:function(){}})),Vn=Ri.extend({pointType:function(){return Fn}}),Nn=b.extend({init:function(e,t,i){b.fn.init.call(this);this.from=e;this.to=t;this.series=i},linePoints:function(){var e=this.from;var t=this;var i=t.from.box;var n=t.to.box;var r=[];if(e.isVertical){var a=e.aboveAxis?i.y1:i.y2;r.push([i.x1,a],[n.x2,a])}else{var o=e.aboveAxis?i.x2:i.x1;r.push([o,i.y1],[o,n.y2])}return r},createVisual:function(){b.fn.createVisual.call(this);var e=this.series.line||{};var t=ne.fromPoints(this.linePoints(),{stroke:{color:e.color,width:e.width,opacity:e.opacity,dashType:e.dashType}});y(t);this.visual.append(t)}}),Hn=(e(Nn,{animation:{type:Te,delay:Se}}),Oi.extend({render:function(){Oi.fn.render.call(this);this.createSegments()},traverseDataPoints:function(c){var h=this;var e=this.options.series;var f=oi(e);var d=!this.options.invertAxes;for(var t=0;t<e.length;t++){var i=e[t];var n=0;var r=0;for(var a=0;a<f;a++){var o=_e.current.bindPoint(i,a);var s=o.valueFields.value;var p=o.fields.summary;var l=n;var u=void 0;if(p)if(p.toLowerCase()==="total"){o.valueFields.value=n;l=0;u=n}else{o.valueFields.value=r;u=l-r;r=0}else if(v(s)){r+=s;n+=s;u=n}c(o,{category:h.categoryAxis.categoryAt(a),categoryIx:a,series:i,seriesIx:t,total:n,runningTotal:r,from:l,to:u,isVertical:d})}}},updateRange:function(e,t){Oi.fn.updateRange.call(this,{value:t.to},t)},aboveAxis:function(e){return e.value>=0},plotRange:function(e){return[e.from,e.to]},createSegments:function(){var e=this;var t=this.options.series;var i=this.seriesPoints;var n=this.segments=[];for(var r=0;r<t.length;r++){var c=t[r];var a=i[r];if(a){var o=void 0;for(var s=0;s<a.length;s++){var l=a[s];if(l&&o){var u=new Nn(o,l,c);n.push(u);e.append(u)}o=l}}}}})),Un=[We,gt,ht,bt],jn=[it,yt].concat(Un),Gn=mn.extend({initFields:function(e){var t=this;this.namedCategoryAxes={};this.namedValueAxes={};this.valueAxisRangeTracker=new Si;if(e.length>0){this.invertAxes=k(e[0].type,[qe,Xe,yt,gt,bt,ft,tt,mt]);for(var i=0;i<e.length;i++){var n=e[i].stack;if(n&&n.type==="100%"){t.stack100=true;break}}}},render:function(e){if(e===void 0)e=this.panes;this.createCategoryAxes(e);this.aggregateCategories(e);this.createCategoryAxesLabels(e);this.createCharts(e);this.createValueAxes(e)},removeAxis:function(e){var t=e.options.name;mn.fn.removeAxis.call(this,e);if(e instanceof q)delete this.namedCategoryAxes[t];else{this.valueAxisRangeTracker.reset(t);delete this.namedValueAxes[t]}if(e===this.categoryAxis)delete this.categoryAxis;if(e===this.valueAxis)delete this.valueAxis},createCharts:function(e){var t=this;var i=this.groupSeriesByPane();for(var n=0;n<e.length;n++){var r=e[n];var a=i[r.options.name||"default"]||[];t.addToLegend(a);var o=t.filterVisibleSeries(a);if(!o)continue;var s=t.groupSeriesByCategoryAxis(o);for(var l=0;l<s.length;l++)t.createChartGroup(s[l],r)}},createChartGroup:function(e,t){this.createAreaChart(ln(e,[We,gt]),t);this.createRangeAreaChart(ln(e,[ht,bt]),t);this.createBarChart(ln(e,[Qe,qe]),t);this.createRangeBarChart(ln(e,[dt,ft]),t);this.createBulletChart(ln(e,[Xe,_t]),t);this.createCandlestickChart(ln(e,Ke),t);this.createBoxPlotChart(ln(e,[Ye,mt]),t);this.createOHLCChart(ln(e,nt),t);this.createWaterfallChart(ln(e,[wt,tt]),t);this.createLineChart(ln(e,[it,yt]),t)},aggregateCategories:function(e){var t=this;var i=this.srcSeries||this.series;var n=[];this._currentPointsCache={};this._seriesPointsCache=this._seriesPointsCache||{};for(var r=0;r<i.length;r++){var a=i[r];var o=t.seriesCategoryAxis(a);var s=t.findPane(o.options.pane);var l=sn(o.options.type,w);if((l||a.categoryField)&&k(s,e))a=t.aggregateSeries(a,o);else a=t.filterSeries(a,o);n.push(a)}this._seriesPointsCache=this._currentPointsCache;this._currentPointsCache=null;this.srcSeries=i;this.series=n},filterSeries:function(t,i){var e=(t.data||{}).length;i._seriesMax=Math.max(i._seriesMax||0,e);if(!(v(i.options.min)||v(i.options.max)))return t;var n=i.currentRangeIndices();var r=k(t.type,jn);var a=x({},t);a.data=(a.data||[]).slice(n.min,n.max+1);if(r)gn(a,n,e,function(e){return{item:t.data[e],category:i.categoryAt(e,true),categoryIx:e-n.min}},function(e){return M(t.data[e])});return a},clearSeriesPointsCache:function(){this._seriesPointsCache={}},seriesSourcePoints:function(e,t){var c=this;var i=e.index+";"+t.categoriesHash();if(this._seriesPointsCache[i]){this._currentPointsCache[i]=this._seriesPointsCache[i];return this._seriesPointsCache[i]}var n=t.options;var h=n.srcCategories;var r=sn(n.type,w);var a=e.data;var f=r?un:me;var o=[];if(!r)t.mapCategories();for(var s=0;s<a.length;s++){var l=void 0;if(e.categoryField)l=f(e.categoryField,a[s],c.chartService.intl);else l=h[s];if(M(l)&&l!==null){var u=t.totalIndex(l);o[u]=o[u]||{items:[],category:l};o[u].items.push(s)}}this._currentPointsCache[i]=o;return o},aggregateSeries:function(e,r){var t=e.data;if(!t.length)return e;var a=this.seriesSourcePoints(e,r);var i=x({},e);var c=new Cn(x({},e),_e.current,Tn.current);var h=i.data=[];var n=r.options.dataItems||[];var o=r.currentRangeIndices();var s=function(e){var t=e-o.min;var i=a[e];if(!i)i=a[e]={};i.categoryIx=t;if(!i.item){var n=r.categoryAt(e,true);i.category=n;i.item=c.aggregatePoints(i.items,n)}return i};for(var l=o.min;l<=o.max;l++){var u=s(l);h[u.categoryIx]=u.item;if(u.items&&u.items.length)n[u.categoryIx]=u.item}if(k(i.type,jn))gn(i,o,r.totalCount(),s,function(e){return a[e]});r.options.dataItems=n;return i},appendChart:function(e,t){var i=e.options.series;var n=this.seriesCategoryAxis(i[0]);var r=n.options.categories;var a=Math.max(0,oi(i)-r.length);if(a>0){r=n.options.categories=n.options.categories.slice(0);while(a--)r.push("")}this.valueAxisRangeTracker.update(e.valueAxisRanges);mn.fn.appendChart.call(this,e,t)},seriesPaneName:function(e){var t=this.options;var i=e.axis;var n=[].concat(t.valueAxis);var r=K(n,function(e){return e.name===i})[0];var a=t.panes||[{}];var o=(a[0]||{}).name||"default";var s=(r||{}).pane||o;return s},seriesCategoryAxis:function(e){var t=e.categoryAxis;var i=t?this.namedCategoryAxes[t]:this.categoryAxis;if(!i)throw new Error("Unable to locate category axis with name "+t);return i},stackableChartOptions:function(e,t){var i=e.stack;var n=i&&i.type==="100%";var r=t.options.clip;return{isStacked:i,isStacked100:n,clip:r}},groupSeriesByCategoryAxis:function(e){var t=[];var i={};for(var n=0;n<e.length;n++){var r=e[n].categoryAxis||"$$default$$";if(!i.hasOwnProperty(r)){i[r]=true;t.push(r)}}var a=[];for(var o=0;o<t.length;o++){var s=t[o];var l=qn(e,s,o);if(l.length===0)continue;a.push(l)}return a},createBarChart:function(e,t){if(e.length===0)return;var i=e[0];var n=new Oi(this,m.extend({series:e,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing},this.stackableChartOptions(i,t)));this.appendChart(n,t)},createRangeBarChart:function(e,t){if(e.length===0)return;var i=e[0];var n=new Mn(this,{series:e,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing});this.appendChart(n,t)},createBulletChart:function(e,t){if(e.length===0)return;var i=e[0];var n=new $i(this,{series:e,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing,clip:t.options.clip});this.appendChart(n,t)},createLineChart:function(e,t){if(e.length===0)return;var i=e[0];var n=new bi(this,m.extend({invertAxes:this.invertAxes,series:e},this.stackableChartOptions(i,t)));this.appendChart(n,t)},createAreaChart:function(e,t){if(e.length===0)return;var i=e[0];var n=new Ci(this,m.extend({invertAxes:this.invertAxes,series:e},this.stackableChartOptions(i,t)));this.appendChart(n,t)},createRangeAreaChart:function(e,t){if(e.length===0)return;var i=new Rn(this,{invertAxes:this.invertAxes,series:e,clip:t.options.clip});this.appendChart(i,t)},createOHLCChart:function(e,t){if(e.length===0)return;var i=e[0];var n=new Vn(this,{invertAxes:this.invertAxes,gap:i.gap,series:e,spacing:i.spacing,clip:t.options.clip});this.appendChart(n,t)},createCandlestickChart:function(e,t){if(e.length===0)return;var i=e[0];var n=new Ri(this,{invertAxes:this.invertAxes,gap:i.gap,series:e,spacing:i.spacing,clip:t.options.clip});this.appendChart(n,t)},createBoxPlotChart:function(e,t){if(e.length===0)return;var i=e[0];var n=new Ni(this,{invertAxes:this.invertAxes,gap:i.gap,series:e,spacing:i.spacing,clip:t.options.clip});this.appendChart(n,t)},createWaterfallChart:function(e,t){if(e.length===0)return;var i=e[0];var n=new Hn(this,{series:e,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing});this.appendChart(n,t)},axisRequiresRounding:function(e,t){var i=this;var n=ln(this.series,xt);for(var r=0;r<this.series.length;r++){var a=i.series[r];if(k(a.type,Un)){var o=a.line;if(o&&o.style===Ge)n.push(a)}}for(var s=0;s<n.length;s++){var l=n[s].categoryAxis||"";if(l===e||!l&&t===0)return true}},aggregatedAxis:function(e,t){var i=this.series;for(var n=0;n<i.length;n++){var r=i[n].categoryAxis||"";if((r===e||!r&&t===0)&&i[n].categoryField)return true}},createCategoryAxesLabels:function(){var e=this.axes;for(var t=0;t<e.length;t++)if(e[t]instanceof q)e[t].createLabels()},createCategoryAxes:function(c){var e=this;var t=this.invertAxes;var i=[].concat(this.options.categoryAxis);var n=[];for(var r=0;r<i.length;r++){var a=i[r];var h=e.findPane(a.pane);if(k(h,c)){var o=a.name;var s=a.categories;if(s===void 0)s=[];a=x({vertical:t,reverse:!t&&e.chartService.rtl,axisCrossingValue:t?f:0},a);if(!M(a.justified))a.justified=e.isJustified();if(e.axisRequiresRounding(o,r))a.justified=false;var l=void 0;if(cn(a,s[0]))l=new S.DateCategoryAxis(a,e.chartService);else l=new q(a,e.chartService);i[r].categories=l.options.srcCategories;if(o){if(e.namedCategoryAxes[o])throw new Error("Category axis with name "+o+" is already defined");e.namedCategoryAxes[o]=l}l.axisIndex=r;n.push(l);e.appendAxis(l)}}var u=this.categoryAxis||n[0];this.categoryAxis=u;if(t)this.axisY=u;else this.axisX=u},isJustified:function(){var e=this.series;for(var t=0;t<e.length;t++){var i=e[t];if(!k(i.type,Un))return false}return true},createValueAxes:function(c){var e=this;var h=this.valueAxisRangeTracker;var t=h.query();var f=[].concat(this.options.valueAxis);var i=this.invertAxes;var n={vertical:!i,reverse:i&&this.chartService.rtl};var d=[];if(this.stack100){n.roundToMajorUnit=false;n.labels={format:"P0"}}for(var r=0;r<f.length;r++){var a=f[r];var p=e.findPane(a.pane);if(k(p,c)){var o=a.name;var v=sn(a.type,qt)?{min:.1,max:1}:{min:0,max:1};var s=h.query(o)||t||v;if(r===0&&s&&t){s.min=Math.min(s.min,t.min);s.max=Math.max(s.max,t.max)}var l=void 0;if(sn(a.type,qt))l=S.LogarithmicAxis;else l=S.NumericAxis;var u=new l(s.min,s.max,x({},n,a),e.chartService);if(o){if(e.namedValueAxes[o])throw new Error("Value axis with name "+o+" is already defined");e.namedValueAxes[o]=u}u.axisIndex=r;d.push(u);e.appendAxis(u)}}var g=this.valueAxis||d[0];this.valueAxis=g;if(i)this.axisX=g;else this.axisY=g},_dispatchEvent:function(e,t,c){var i=e._eventCoordinates(t);var n=new D(i.x,i.y);var r=this.pointPane(n);var a=[];var o=[];if(!r)return;var s=r.axes;for(var l=0;l<s.length;l++){var u=s[l];if(u.getValue)rn(o,u.getValue(n));else rn(a,u.getCategory(n))}if(a.length===0)rn(a,this.categoryAxis.getCategory(n));if(a.length>0&&o.length>0)e.trigger(c,{element:F(t),originalEvent:t,category:hn(a),value:hn(o)})},pointPane:function(e){var t=this.panes;for(var i=0;i<t.length;i++){var n=t[i];if(n.contentBox.containsPoint(e))return n}},updateAxisOptions:function(e,t){Wn(this.options,e,t);Wn(this.originalOptions,e,t)}});function Wn(e,t,i){var n=t instanceof q?[].concat(e.categoryAxis):[].concat(e.valueAxis);x(n[t.axisIndex],i)}function qn(e,t,i){return K(e,function(e){return i===0&&!e.categoryAxis||e.categoryAxis===t})}e(Gn,{categoryAxis:{},valueAxis:{}}),x(Gn.prototype,kn);var Yn=t.extend({init:function(){this._points=[]},destroy:function(){this._points=[]},show:function(e,t){var i=this;var n=[].concat(e);this.hide();for(var r=0;r<n.length;r++){var a=n[r];if(a&&a.toggleHighlight&&a.hasHighlight()){i.togglePointHighlight(a,true,t);i._points.push(a)}}},togglePointHighlight:function(e,t,i){var n=(e.options.highlight||{}).toggle;if(n){var r={category:e.category,series:e.series,dataItem:e.dataItem,value:e.value,stackValue:e.stackValue,preventDefault:$n,visual:e.highlightVisual(),show:t};n(r);if(!r._defaultPrevented)e.toggleHighlight(t,i)}else e.toggleHighlight(t,i)},hide:function(){var e=this;var t=this._points;while(t.length)e.togglePointHighlight(t.pop(),false)},isHighlighted:function(e){var t=this._points;for(var i=0;i<t.length;i++){var n=t[i];if(e===n)return true}return false}});function $n(){this._defaultPrevented=true}function Xn(e,t){var i=(t||"").toLowerCase();var n=e.event;var r=i==="none"&&!(n.ctrlKey||n.shiftKey||n.altKey)||n[i+"Key"];return r}function Kn(e){var t={};for(var i=0;i<e.length;i++){var n=e[i];if(n.axis.options.name)t[n.axis.options.name]={min:n.range.min,max:n.range.max}}return t}var Qn=t.extend({init:function(e,t){this.plotArea=e;this.options=x({},this.options,t)},start:function(e){this._active=Xn(e,this.options.key);return this._active},move:function(e){if(this._active){var t=this.axisRanges=this._panAxes(e,_).concat(this._panAxes(e,g));if(t.length){this.axisRanges=t;return Kn(t)}}},end:function(){var e=this._active;this._active=false;return e},pan:function(){var e=this;var t=e.plotArea;var i=e.axisRanges;if(i.length){for(var n=0;n<i.length;n++){var r=i[n];t.updateAxisOptions(r.axis,r.range)}t.redraw(t.panes)}},destroy:function(){delete this.plotArea},_panAxes:function(e,t){var i=this.plotArea;var n=-e[t].delta;var r=(this.options.lock||"").toLowerCase();var a=[];if(n!==0&&(r||"").toLowerCase()!==t){var o=i.axes;for(var s=0;s<o.length;s++){var l=o[s];if(t===_&&!l.options.vertical||t===g&&l.options.vertical){var u=l.pan(n);if(u){u.limitRange=true;a.push({axis:l,range:u})}}}}return a}}),Zn=(Qn.prototype.options={key:"none",lock:"none"},t.extend({init:function(e,t){this.chart=e;this.options=x({},this.options,t);this.createElement()},createElement:function(){var e=this._marquee=document.createElement("div");e.className="k-marquee";var t=document.createElement("div");t.className="k-marquee-color";e.appendChild(t)},removeElement:function(){if(this._marquee.parentNode)this._marquee.parentNode.removeChild(this._marquee)},setStyles:function(e){Q(this._marquee,e)},start:function(e){if(Xn(e,this.options.key)){var t=this.chart;var i=t._eventCoordinates(e);var n=this._zoomPane=t._plotArea.paneByPoint(i);var r=n?n.chartsBox().clone():null;if(n&&r){var a=this._elementOffset();r.translate(a.left,a.top);this._zoomPaneClipBox=r;document.body.appendChild(this._marquee);this.setStyles({left:e.pageX+1,top:e.pageY+1,width:0,height:0});return true}}return false},_elementOffset:function(){var e=this.chart.element;var t=Q(e,["paddingLeft","paddingTop"]);var i=t.paddingLeft;var n=t.paddingTop;var r=S.elementOffset(e);return{left:i+r.left,top:n+r.top}},move:function(e){var t=this._zoomPane;if(t)this.setStyles(this._selectionPosition(e))},end:function(e){var t=this._zoomPane;if(t){var i=this._elementOffset();var n=this._selectionPosition(e);n.left-=i.left;n.top-=i.top;var r={x:n.left,y:n.top};var a={x:n.left+n.width,y:n.top+n.height};this._updateAxisRanges(r,a);this.removeElement();delete this._zoomPane;return Kn(this.axisRanges)}},zoom:function(){var e=this.axisRanges;if(e&&e.length){var t=this.chart._plotArea;for(var i=0;i<e.length;i++){var n=e[i];t.updateAxisOptions(n.axis,n.range)}t.redraw(t.panes)}},destroy:function(){this.removeElement();delete this._marquee;delete this.chart},_updateAxisRanges:function(e,t){var i=(this.options.lock||"").toLowerCase();var n=[];var r=this._zoomPane.axes;for(var a=0;a<r.length;a++){var o=r[a];var s=o.options.vertical;if(!(i===_&&!s)&&!(i===g&&s)&&M(o.axisIndex)){var l=o.pointsRange(e,t);if(l)n.push({axis:o,range:l})}}this.axisRanges=n},_selectionPosition:function(e){var t=this._zoomPaneClipBox;var i={x:e.x.startLocation,y:e.y.startLocation};var n=e.x.location;var r=e.y.location;var a=(this.options.lock||"").toLowerCase();var o=Math.min(i.x,n);var s=Math.min(i.y,r);var l=Math.abs(i.x-n);var u=Math.abs(i.y-r);if(a===_){o=t.x1;l=t.width()}if(a===g){s=t.y1;u=t.height()}if(n>t.x2)l=t.x2-i.x;if(n<t.x1)l=i.x-t.x1;if(r>t.y2)u=t.y2-i.y;if(r<t.y1)u=i.y-t.y1;return{left:Math.max(o,t.x1),top:Math.max(s,t.y1),width:l,height:u}}}));Zn.prototype.options={key:"shift",lock:"none"};var Jn,er=ie.util.limitValue,tr=.01,ir=.9,nr=.3,rr=t.extend({init:function(e,t){this.chart=e;this.options=x({rate:nr},this.options,t)},updateRanges:function(e,t){var i=this;var n=(this.options.lock||"").toLowerCase();var r=[];var a=this.chart._plotArea.axes;for(var o=0;o<a.length;o++){var s=a[o];var l=s.options.vertical;if(!(n===_&&!l)&&!(n===g&&l)&&s.zoomRange){var c=er(i.options.rate,tr,ir);var u=s.zoomRange(-e*c,t);if(u)r.push({axis:s,range:u})}}this.axisRanges=r;return Kn(r)},zoom:function(){var e=this.axisRanges;var t=this.chart._plotArea;if(e&&e.length&&t.updateAxisOptions){for(var i=0;i<e.length;i++){var n=e[i];t.updateAxisOptions(n.axis,n.range)}t.redraw(t.panes)}},destroy:function(){delete this.chart}}),ar=b.extend({init:function(e,t){b.fn.init.call(this,e);this.chartService=t},render:function(){var e=this;var t=e.children;var i=e.options;var n=i.vertical;this.visual=new ie.Layout(null,{spacing:n?0:i.spacing,lineSpacing:n?i.spacing:0,orientation:n?"vertical":"horizontal",reverse:i.rtl,alignItems:n?"start":"center"});for(var r=0;r<t.length;r++){var a=t[r];a.reflow(new E);a.renderVisual()}},reflow:function(e){this.visual.rect(e.toRect());this.visual.reflow();var t=this.visual.clippedBBox();if(t)this.box=S.rectToBox(t);else this.box=new E},renderVisual:function(){this.addVisual()},createVisual:function(){}}),or=Y.extend({init:function(e){Y.fn.init.call(this,e);this.createContainer();if(!e.rtl){this.createMarker();this.createLabel()}else{this.createLabel();this.createMarker()}},createContainer:function(){this.container=new S.FloatElement({vertical:false,wrap:false,align:A,spacing:this.options.spacing});this.append(this.container)},createMarker:function(){this.container.append(new H(this.markerOptions()))},markerOptions:function(){var e=this.options;var t=e.markerColor;return x({},e.markers,{background:t,border:{color:t}})},createLabel:function(){var e=this.options;var t=x({},e.labels);this.container.append(new N(e.text,t))},renderComplete:function(){Y.fn.renderComplete.call(this);var e=this.options.cursor||{};var t=this._itemOverlay=ne.fromRect(this.container.box.toRect(),{fill:{color:a,opacity:0},stroke:null,cursor:e.style||e});this.appendVisual(t)},click:function(e,t){var i=this.eventArgs(t);if(!e.trigger(kt,i)&&t&&t.type==="contextmenu")t.preventDefault()},over:function(e,t){var i=this.eventArgs(t);if(!e.trigger(Ct,i))e._legendItemHover(i.seriesIndex,i.pointIndex);return true},out:function(e,t){e._unsetActivePoint();e.trigger(St,this.eventArgs(t))},eventArgs:function(e){var t=this.options;return{element:F(e),text:t.text,series:t.series,seriesIndex:t.series.index,pointIndex:t.pointIndex}},renderVisual:function(){var t=this;var e=this.options;var i=e.visual;if(i){this.visual=i({active:e.active,series:e.series,sender:this.getSender(),pointIndex:e.pointIndex,options:{markers:this.markerOptions(),labels:e.labels},createVisual:function(){t.createVisual();t.renderChildren();t.renderComplete();var e=t.visual;delete t.visual;return e}});this.addVisual()}else Y.fn.renderVisual.call(this)}}),sr="horizontal",lr="pointer",ur="custom",cr=b.extend({init:function(e,t){if(t===void 0)t={};b.fn.init.call(this,e);this.chartService=t;if(!k(this.options.position,[I,O,P,B,ur]))this.options.position=O;this.createContainers();this.createLegendTitle(e.title);this.createItems()},createContainers:function(){var e=this.options;var t=e.position;var i=e.align;var n=t;var r=A;if(t===ur)n=B;else if(k(t,[I,P])){if(i==="start")n=B;else if(i==="end")n=O;else n=A;r=t}else if(i)if(i==="start")r=I;else if(i==="end")r=P;this.container=new Y({margin:e.margin,padding:e.padding,background:e.background,border:e.border,vAlign:r,align:n,zIndex:e.zIndex,shrinkToFit:true});if(this.hasTitle())this.itemsContainer=new Y({vAlign:r,align:n,zIndex:e.zIndex,shrinkToFit:true});else this.itemsContainer=this.container;this.append(this.container)},createItems:function(){var e=this.getService();var t=this.options;var i=this.isVertical();var n=new ar({vertical:i,spacing:t.spacing,rtl:e.rtl},e);var r=t.items;if(t.reverse)r=r.slice(0).reverse();var a=r.length;for(var o=0;o<a;o++){var s=r[o];n.append(new or(x({},{markers:t.markers,labels:t.labels,rtl:e.rtl},t.item,s)))}n.render();this.itemsContainer.append(n)},isVertical:function(){var e=this.options;var t=e.orientation;var i=e.position;var n=i===ur&&t!==sr||(M(t)?t!==sr:k(i,[B,O]));return n},hasItems:function(){return this.container.children[0].children.length>0},reflow:function(e){var t=this.options;var i=e.clone();if(!this.hasItems()){this.box=i;return}if(t.position===ur){this.containerCustomReflow(i);this.box=i}else this.containerReflow(i);if(this.hasTitle())this.title.reflow(new E(this.container.box.x1,this.title.box.y1,this.container.box.x2,this.title.box.y2))},containerReflow:function(e){var t=this;var i=t.options;var n=t.container;var r=i.position;var a=i.width;var c=i.height;var o=r===I||r===P?_:g;var h=this.isVertical();var s=e.clone();var l=e.clone();if(r===B||r===O)l.y1=s.y1=0;if(h&&c){l.y2=l.y1+c;l.align(s,g,n.options.vAlign)}else if(!h&&a){l.x2=l.x1+a;l.align(s,_,n.options.align)}n.reflow(l);l=n.box;var u=l.clone();if(i.offsetX||i.offsetY){l.translate(i.offsetX,i.offsetY);n.reflow(l)}u[o+1]=e[o+1];u[o+2]=e[o+2];this.box=u},containerCustomReflow:function(e){var t=this;var i=t.options;var n=t.container;var r=i.offsetX;var a=i.offsetY;var o=i.width;var s=i.height;var l=this.isVertical();var u=e.clone();if(l&&s)u.y2=u.y1+s;else if(!l&&o)u.x2=u.x1+o;n.reflow(u);u=n.box;n.reflow(new E(r,a,r+u.width(),a+u.height()))},renderVisual:function(){if(this.hasItems())b.fn.renderVisual.call(this)},createLegendTitle:function(e){var t=x({},{color:r,position:I,align:A},e);var i=t.text;if(!e||e.visible===false)return;if(M(t)&&t.visible){var n=V(t);if(n)i=n({text:i});else if(t.format)i=this.chartService.format.auto(t.format,i)}this.title=new N(i,t);this.createTitleLayout();this.appendTitleLayoutContent()},createTitleLayout:function(){this.layout=new S.FloatElement({vertical:true,wrap:false});this.container.append(this.layout)},hasTitle:function(){return Boolean(this.options.title&&this.options.title.visible!==false)},appendTitleLayoutContent:function(){var e=this.options;if(e.title.position===P){this.layout.append(this.itemsContainer);this.layout.append(this.title)}else{this.layout.append(this.title);this.layout.append(this.itemsContainer)}}}),hr=(e(cr,{position:O,items:[],offsetX:0,offsetY:0,margin:U(5),padding:U(5),border:{color:r,width:0},item:{cursor:lr,spacing:6},spacing:6,background:"",zIndex:1,markers:{border:{width:0},width:15,height:3,type:"rect",align:B,vAlign:A}}),t.extend({init:function(){this._registry=[]},register:function(e,t){this._registry.push({type:e,seriesTypes:t})},create:function(e,t,i){var n=this._registry;var r=n[0];var a;for(var o=0;o<n.length;o++){var s=n[o];a=ln(e,s.seriesTypes);if(a.length>0){r=s;break}}return new r.type(a,t,i)}})),fr=(hr.current=new hr,3),dr=.1;function pr(e){var t=document.createElement("div");if(e)t.className=e;return t}function vr(e){var t=e;while(t&&!Z(t,"k-handle"))t=t.parentNode;return t}var gr=t.extend({init:function(e,t,i,n){var r=e.element;this.options=x({},this.options,i);this.chart=e;this.observer=n;this.chartElement=r;this.categoryAxis=t;this._dateAxis=this.categoryAxis instanceof S.DateCategoryAxis;this.initOptions();this.visible=this.options.visible&&r.offsetHeight;if(this.visible){this.createElements();this.set(this._index(this.options.from),this._index(this.options.to));this.bindEvents()}},onPane:function(e){return this.categoryAxis.pane===e},createElements:function(){var e=this.options;var t=this.wrapper=pr("k-selector");Q(t,{top:e.offset.top,left:e.offset.left,width:e.width,height:e.height,direction:"ltr"});var i=this.selection=pr("k-selection");this.leftMask=pr("k-mask");this.rightMask=pr("k-mask");t.appendChild(this.leftMask);t.appendChild(this.rightMask);t.appendChild(i);i.appendChild(pr("k-selection-bg"));var n=this.leftHandle=pr("k-handle k-left-handle");var r=this.rightHandle=pr("k-handle k-right-handle");n.appendChild(pr());r.appendChild(pr());i.appendChild(n);i.appendChild(r);this.chartElement.appendChild(t);var a=Q(i,["borderLeftWidth","borderRightWidth","height"]);var o=Q(n,"height").height;var s=Q(r,"height").height;e.selection={border:{left:a.borderLeftWidth,right:a.borderRightWidth}};Q(n,{top:(a.height-o)/2});Q(r,{top:(a.height-s)/2});t.style.cssText=t.style.cssText},bindEvents:function(){if(this.options.mousewheel!==false){this._mousewheelHandler=this._mousewheel.bind(this);var e;n(this.wrapper,(e={},e[Qt]=this._mousewheelHandler,e))}this._domEvents=J.DomEventsBuilder.create(this.wrapper,{stopPropagation:true,start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),press:this._press.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)})},initOptions:function(){var e=this;var t=e.options;var i=e.categoryAxis;var n=i.pane.chartsBox();var r=this.chart.chartService.intl;if(this._dateAxis)x(t,{min:W(r,t.min),max:W(r,t.max),from:W(r,t.from),to:W(r,t.to)});var a=Q(this.chartElement,["paddingLeft","paddingTop"]);var o=a.paddingLeft;var s=a.paddingTop;this.options=x({},{width:n.width(),height:n.height()+dr,padding:{left:o,top:s},offset:{left:n.x1+o,top:n.y1+s},from:t.min,to:t.max},t)},destroy:function(){if(this._domEvents){this._domEvents.destroy();delete this._domEvents}clearTimeout(this._mwTimeout);this._state=null;if(this.wrapper){if(this._mousewheelHandler){var e;ee(this.wrapper,(e={},e[Qt]=this._mousewheelHandler,e));this._mousewheelHandler=null}this.chartElement.removeChild(this.wrapper);this.wrapper=null}},_rangeEventArgs:function(e){return{axis:this.categoryAxis.options,from:this._value(e.from),to:this._value(e.to)}},_start:function(e){var t=this.options;var i=F(e);if(this._state||!i)return;this.chart._unsetActivePoint();this._state={moveTarget:vr(i)||i,startLocation:e.x?e.x.location:0,range:{from:this._index(t.from),to:this._index(t.to)}};var n=this._rangeEventArgs({from:this._index(t.from),to:this._index(t.to)});if(this.trigger(Vt,n))this._state=null},_press:function(e){var t;if(this._state)t=this._state.moveTarget;else t=vr(F(e));if(t)S.addClass(t,"k-handle-active")},_move:function(c){if(!this._state)return;var e=this;var t=e._state;var i=e.options;var n=e.categoryAxis;var r=t.range;var a=t.moveTarget;var o=n.options.reverse;var h=this._index(i.from);var f=this._index(i.to);var s=this._index(i.min);var l=this._index(i.max);var d=t.startLocation-c.x.location;var p={from:r.from,to:r.to};var v=r.to-r.from;var g=Q(this.wrapper,"width").width/(n.categoriesCount()-1);var u=Math.round(d/g)*(o?-1:1);if(!a)return;var m=Z(a,"k-left-handle");var _=Z(a,"k-right-handle");if(Z(a,"k-selection k-selection-bg")){r.from=Math.min(Math.max(s,h-u),l-v);r.to=Math.min(r.from+v,l)}else if(m&&!o||_&&o){r.from=Math.min(Math.max(s,h-u),l-1);r.to=Math.max(r.from+1,r.to)}else if(m&&o||_&&!o){r.to=Math.min(Math.max(s+1,f-u),l);r.from=Math.min(r.to-1,r.from)}if(r.from!==p.from||r.to!==p.to){this.move(r.from,r.to);this.trigger(Nt,this._rangeEventArgs(r))}},_end:function(){if(this._state){var e=this._state.moveTarget;if(e)S.removeClass(e,"k-handle-active");var t=this._state.range;this.set(t.from,t.to);this.trigger(Ht,this._rangeEventArgs(t));delete this._state}},_tap:function(e){var t=this;var i=t.options;var n=t.categoryAxis;var r=this.chart._eventCoordinates(e);var c=n.pointCategoryIndex(new D(r.x,n.box.y1));var a=this._index(i.from);var h=this._index(i.to);var f=this._index(i.min);var o=this._index(i.max);var s=h-a;var d=a+s/2;var l={};var p=e.event.which===3;var u=Math.round(d-c);if(this._state||p)return;this.chart._unsetActivePoint();if(!n.options.justified)u--;l.from=Math.min(Math.max(f,a-u),o-s);l.to=Math.min(l.from+s,o);this._start(e);if(this._state){this._state.range=l;this.trigger(Nt,this._rangeEventArgs(l));this._end()}},_mousewheel:function(e){var t=this;var i=S.mousewheelDelta(e);this._start({target:this.selection});if(this._state){var n=this._state.range;e.preventDefault();e.stopPropagation();if(Math.abs(i)>1)i*=fr;if(this.options.mousewheel.reverse)i*=-1;if(this.expand(i))this.trigger(Nt,{axis:this.categoryAxis.options,delta:i,originalEvent:e,from:this._value(n.from),to:this._value(n.to)});if(this._mwTimeout)clearTimeout(this._mwTimeout);this._mwTimeout=setTimeout(function(){t._end()},Zt)}},_gesturestart:function(e){var t=this.options;this._state={range:{from:this._index(t.from),to:this._index(t.to)}};var i=this._rangeEventArgs(this._state.range);if(this.trigger(Vt,i))this._state=null;else e.preventDefault()},_gestureend:function(){if(this._state){this.trigger(Ht,this._rangeEventArgs(this._state.range));delete this._state}},_gesturechange:function(e){var t=this;var i=t.chart;var n=t._state;var r=t.options;var a=t.categoryAxis;var o=n.range;var s=i._toModelCoordinates(e.touches[0].x.location).x;var l=i._toModelCoordinates(e.touches[1].x.location).x;var u=Math.min(s,l);var c=Math.max(s,l);e.preventDefault();o.from=a.pointCategoryIndex(new D(u))||r.min;o.to=a.pointCategoryIndex(new D(c))||r.max;this.move(o.from,o.to);this.trigger(Nt,this._rangeEventArgs(o))},_index:function(e){var t=e;if(e instanceof Date)t=this.categoryAxis.categoryIndex(e);return t},_value:function(e){var t=e;if(this._dateAxis){t=this.categoryAxis.categoryAt(e);if(t>this.options.max)t=this.options.max}return t},_slot:function(e){var t=this.categoryAxis;var i=this._index(e);return t.getSlot(i,i,true)},move:function(e,t){var i=this.options;var n=this.categoryAxis.options.reverse;var r=i.offset;var a=i.padding;var c=i.selection.border;var h=n?t:e;var f=n?e:t;var d="x"+(n?2:1);var o=this._slot(h);var s=$(o[d]-r.left+a.left);Q(this.leftMask,{width:s});Q(this.selection,{left:s});o=this._slot(f);var l=$(i.width-(o[d]-r.left+a.left));Q(this.rightMask,{width:l});var u=i.width-l;if(u!==i.width)u+=c.right;Q(this.rightMask,{left:u});Q(this.selection,{width:Math.max(i.width-(s+l)-c.right,0)})},set:function(e,t){var i=this.options;var n=this._index(i.min);var r=this._index(i.max);var a=X(this._index(e),n,r);var o=X(this._index(t),a+1,r);if(i.visible)this.move(a,o);i.from=this._value(a);i.to=this._value(o)},expand:function(e){var t=this.options;var i=this._index(t.min);var n=this._index(t.max);var r=t.mousewheel.zoom;var a=this._index(t.from);var o=this._index(t.to);var s={from:a,to:o};var l=x({},s);if(this._state)s=this._state.range;if(r!==O)s.from=X(X(a-e,0,o-1),i,n);if(r!==B)s.to=X(X(o+e,s.from+1,n),i,n);if(s.from!==l.from||s.to!==l.to){this.set(s.from,s.to);return true}},zoom:function(e,c){var t=this.options;var i=this._index(t.min);var n=this._index(t.max);var r=this._index(t.from);var a=this._index(t.to);var o={from:r,to:a};var s=x({},o);var h=this.categoryAxis.options;var f=h.reverse;var d=_+(f?"2":"1");var l=this.categoryAxis.lineBox();var p=Math.abs(l[d]-c[_]);var v=l.width();var u=$(p/v,2);var g=$(u*e);var m=$((1-u)*e);if(this._state)o=this._state.range;o.from=X(X(r-g,0,a-1),i,n);o.to=X(X(a+m,o.from+1,n),i,n);if(o.from!==s.from||o.to!==s.to){this.set(o.from,o.to);return true}},trigger:function(e,t){return(this.observer||this.chart).trigger(e,t)}}),mr=(e(gr,{visible:true,mousewheel:{zoom:"both"},min:h,max:f}),Ki.extend({show:function(e){if(!e||!e.tooltipAnchor||this._current&&this._current===e)return;var t=x({},this.options,e.options.tooltip);var i=e.tooltipAnchor();if(i){this._current=e;Ki.fn.show.call(this,{point:e,anchor:i},t,e)}else this.hide()},hide:function(){delete this._current;Ki.fn.hide.call(this)}})),_r=Ki.extend({init:function(e,t){Ki.fn.init.call(this,e.chartService,t);this.plotArea=e;this.formatService=e.chartService.format},showAt:function(e,t){var i=K(e,function(e){var t=e.series.tooltip;var i=t&&t.visible===false;return!i});if(i.length>0){var n=i[0];var r=this.plotArea.categoryAxis.getSlot(n.categoryIx);var a=t?this._slotAnchor(t,r):this._defaultAnchor(n,r);this.show({anchor:a,shared:true,points:e,category:n.category,categoryText:this.formatService.auto(this.options.categoryFormat,n.category),series:this.plotArea.series},this.options)}},_slotAnchor:function(e,t){var i=this.plotArea.categoryAxis;var n={horizontal:"left",vertical:"center"};if(!i.options.vertical)e.x=t.center().x;return{point:e,align:n}},_defaultAnchor:function(e,t){var i=e.owner.pane.chartsBox();var n=this.plotArea.categoryAxis.options.vertical;var r=i.center();var a=t.center();var o={horizontal:"center",vertical:"center"};var s;if(n)s=new D(r.x,a.y);else s=new D(a.x,r.y);return{point:s,align:o}}}),yr=(e(_r,{categoryFormat:"{0:d}"}),re.extend({setup:function(){var e=this;var t=e.element;var i=e.options;var n=t.bbox();if(n){this.origin=i.origin;var r=i.vertical?g:_;var a=this.fromScale=new ue(1,1);a[r]=Ee;t.transform(ce().scale(a.x,a.y))}else this.abort()},step:function(e){var t=S.interpolateValue(this.fromScale.x,1,e);var i=S.interpolateValue(this.fromScale.y,1,e);this.element.transform(ce().scale(t,i,this.origin))},abort:function(){re.fn.abort.call(this);this.element.transform(null)}})),br=(e(yr,{duration:Se}),ae.current.register(qe,yr),re.extend({setup:function(){var e=this.center=this.element.bbox().center();this.element.transform(ce().scale(Ee,Ee,e))},step:function(e){this.element.transform(ce().scale(e,e,this.center))}})),wr=(e(br,{easing:"easeOutElastic"}),ae.current.register($e,br),re.extend({setup:function(){this.fadeTo=this.element.opacity();this.element.opacity(0)},step:function(e){this.element.opacity(e*this.fadeTo)}})),xr=(e(wr,{duration:200,easing:"linear"}),ae.current.register(Te,wr),re.extend({setup:function(){this.element.transform(ce().scale(Ee,Ee,this.options.center))},step:function(e){this.element.transform(ce().scale(e,e,this.options.center))}})),kr=(e(xr,{easing:"easeOutElastic",duration:Se}),ae.current.register(rt,xr),ji.extend({render:function(){ji.fn.render.call(this);this.renderSegments()},createSegment:function(e,t,i){var n=t.style;var r;if(n===je)r=vi;else r=hi;return new r(e,t,i)},animationPoints:function(){var e=ji.fn.animationPoints.call(this);return e.concat(this._segments)},createMissingValue:function(e,t){if(t===Fe){var i={x:e.x,y:e.y};if(!Ui(i.x))i.x=0;if(!Ui(i.y))i.y=0;return i}}})),Cr=(x(kr.prototype,gi),mn.extend({initFields:function(){this.namedXAxes={};this.namedYAxes={};this.xAxisRangeTracker=new Si;this.yAxisRangeTracker=new Si},render:function(e){var t=this;if(e===void 0)e=this.panes;var i=this.groupSeriesByPane();for(var n=0;n<e.length;n++){var r=e[n];var a=i[r.options.name||"default"]||[];t.addToLegend(a);var o=t.filterVisibleSeries(a);if(!o)continue;t.createScatterChart(ln(o,pt),r);t.createScatterLineChart(ln(o,vt),r);t.createBubbleChart(ln(o,$e),r)}this.createAxes(e)},appendChart:function(e,t){this.xAxisRangeTracker.update(e.xAxisRanges);this.yAxisRangeTracker.update(e.yAxisRanges);mn.fn.appendChart.call(this,e,t)},removeAxis:function(e){var t=e.options.name;mn.fn.removeAxis.call(this,e);if(e.options.vertical){this.yAxisRangeTracker.reset(t);delete this.namedYAxes[t]}else{this.xAxisRangeTracker.reset(t);delete this.namedXAxes[t]}if(e===this.axisX)delete this.axisX;if(e===this.axisY)delete this.axisY},seriesPaneName:function(e){var t=this.options;var i=e.xAxis;var n=[].concat(t.xAxis);var r=K(n,function(e){return e.name===i})[0];var a=e.yAxis;var o=[].concat(t.yAxis);var s=K(o,function(e){return e.name===a})[0];var l=t.panes||[{}];var u=l[0].name||"default";var c=(r||{}).pane||(s||{}).pane||u;return c},createScatterChart:function(e,t){if(e.length>0)this.appendChart(new ji(this,{series:e,clip:t.options.clip}),t)},createScatterLineChart:function(e,t){if(e.length>0)this.appendChart(new kr(this,{series:e,clip:t.options.clip}),t)},createBubbleChart:function(e,t){if(e.length>0)this.appendChart(new Wi(this,{series:e,clip:t.options.clip}),t)},createXYAxis:function(c,e,t){var i=c.name;var h=e?this.namedYAxes:this.namedXAxes;var f=e?this.yAxisRangeTracker:this.xAxisRangeTracker;var n=x({reverse:!e&&this.chartService.rtl},c,{vertical:e});var d=sn(n.type,qt);var r=f.query();var p=d?{min:.1,max:1}:{min:0,max:1};var a=f.query(i)||r||p;var o=[n.min,n.max];var v=this.series;for(var s=0;s<v.length;s++){var g=v[s];var m=g[e?"yAxis":"xAxis"];if(m===n.name||t===0&&!m){var _=_e.current.bindPoint(g,0).valueFields;o.push(_[e?"y":"x"]);break}}if(t===0&&r){a.min=Math.min(a.min,r.min);a.max=Math.max(a.max,r.max)}var y;for(var b=0;b<o.length;b++)if(o[b]instanceof Date){y=true;break}var l;if(sn(n.type,w)||!n.type&&y)l=S.DateValueAxis;else if(d)l=S.LogarithmicAxis;else l=S.NumericAxis;var u=new l(a.min,a.max,n,this.chartService);u.axisIndex=t;if(i){if(h[i])throw new Error((e?"Y":"X")+" axis with name "+i+" is already defined");h[i]=u}this.appendAxis(u);return u},createAxes:function(e){var t=this;var i=this.options;var n=[].concat(i.xAxis);var r=[];var a=[].concat(i.yAxis);var o=[];for(var s=0;s<n.length;s++){var l=t.findPane(n[s].pane);if(k(l,e))r.push(t.createXYAxis(n[s],false,s))}for(var u=0;u<a.length;u++){var c=t.findPane(a[u].pane);if(k(c,e))o.push(t.createXYAxis(a[u],true,u))}this.axisX=this.axisX||r[0];this.axisY=this.axisY||o[0]},_dispatchEvent:function(e,t,i){var n=e._eventCoordinates(t);var c=new D(n.x,n.y);var r=this.axes;var h=r.length;var a=[];var o=[];for(var s=0;s<h;s++){var l=r[s];var f=l.options.vertical?o:a;var u=l.getValue(c);if(u!==null)f.push(u)}if(a.length>0&&o.length>0)e.trigger(i,{element:F(t),originalEvent:t,x:hn(a),y:hn(o)})},updateAxisOptions:function(e,t){var i=e.options.vertical;var n=this.groupAxes(this.panes);var r=(i?n.y:n.x).indexOf(e);Sr(this.options,r,i,t);Sr(this.originalOptions,r,i,t)}}));function Sr(e,t,i,n){var r=[].concat(i?e.yAxis:e.xAxis)[t];x(r,n)}e(Cr,{xAxis:{},yAxis:{}}),x(Cr.prototype,kn);var Tr=b.extend({init:function(e,t,i){b.fn.init.call(this,i);this.value=e;this.sector=t},render:function(){var e=this.options.labels;var t=this.owner.chartService;var i=this.value;if(this._rendered||this.visible===false)return;this._rendered=true;var n=V(e);var r=this.pointData();if(n)i=n(r);else if(e.format)i=t.format.auto(e.format,i);if(e.visible&&(i||i===0)){if(e.position===A||e.position===$t){if(!e.color)e.color=S.autoTextColor(this.options.color);if(!e.background)e.background=this.options.color}else{var a=t.theme.seriesDefaults.labels;e.color=e.color||a.color;e.background=e.background||a.background}this.label=new N(i,x({},e,{align:A,vAlign:"",animation:{type:Te,delay:this.animationDelay}}),r);this.append(this.label)}},reflow:function(e){this.render();this.box=e;this.reflowLabel()},reflowLabel:function(){var e=this;var t=e.options.labels;var i=e.label;var n=this.sector.clone();var r=t.distance;var a=n.middle();if(i){var o=i.box.height();var s=i.box.width();var l;if(t.position===A){n.radius=Math.abs((n.radius-o)/2)+o;l=n.point(a);i.reflow(new E(l.x,l.y-o/2,l.x,l.y))}else if(t.position===$t){n.radius=n.radius-o/2;l=n.point(a);i.reflow(new E(l.x,l.y-o/2,l.x,l.y))}else{var u;l=n.clone().expand(r).point(a);if(l.x>=n.center.x){u=l.x+s;i.orientation=O}else{u=l.x-s;i.orientation=B}i.reflow(new E(u,l.y-o,l.x,l.y))}}},createVisual:function(){var t=this;var e=this;var i=e.sector;var n=e.options;b.fn.createVisual.call(this);if(this.value)if(n.visual){var r=(i.startAngle+180)%360;var a=n.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,center:new ue(i.center.x,i.center.y),radius:i.radius,innerRadius:i.innerRadius,startAngle:r,endAngle:r+i.angle,options:n,sender:this.getSender(),createVisual:function(){var e=new oe;t.createSegmentVisual(e);return e}});if(a)this.visual.append(a)}else this.createSegmentVisual(this.visual)},createSegmentVisual:function(e){var t=this;var i=t.sector;var n=t.options;var r=n.border||{};var a=r.width>0?{stroke:{color:r.color,width:r.width,opacity:r.opacity,dashType:r.dashType}}:{};var o=n.color;var s={color:o,opacity:n.opacity};var l=this.createSegment(i,x({fill:s,stroke:{opacity:n.opacity},zIndex:n.zIndex},a));e.append(l);if(Ai(n))e.append(this.createGradientOverlay(l,{baseColor:o,fallbackFill:s},x({center:[i.center.x,i.center.y],innerRadius:i.innerRadius,radius:i.radius,userSpace:true},n.overlay)))},createSegment:function(e,t){if(t.singleSegment)return new ie.Circle(new le.Circle(new ue(e.center.x,e.center.y),e.radius),t);return S.ShapeBuilder.current.createRing(e,t)},createAnimation:function(){var e=this;var t=e.options;var i=e.sector.center;x(t,{animation:{center:[i.x,i.y],delay:this.animationDelay}});b.fn.createAnimation.call(this)},createHighlight:function(e){var t=this.options.highlight||{};var i=t.border||{};return this.createSegment(this.sector,x({},e,{fill:{color:t.color,opacity:t.opacity},stroke:{opacity:i.opacity,width:i.width,color:i.color}}))},highlightVisual:function(){return this.visual.children[0]},highlightVisualArgs:function(){var e=this.sector;return{options:this.options,radius:e.radius,innerRadius:e.innerRadius,center:new ue(e.center.x,e.center.y),startAngle:e.startAngle,endAngle:e.angle+e.startAngle,visual:this.visual}},tooltipAnchor:function(){var e=this.sector.clone().expand(De);var t=e.middle();var i=e.point(t);return{point:i,align:Dr(t+180)}},formatValue:function(e){return this.owner.formatPointValue(this,e)},pointData:function(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series,percentage:this.percentage}}}),Ar=$(S.rad(30),o),Mr=$(S.rad(60),o);function Dr(e){var t=S.rad(e);var i=$(Math.sin(t),o);var n=$(Math.cos(t),o);var r;if(Math.abs(i)>Mr)r=A;else if(n<0)r=O;else r=B;var a;if(Math.abs(i)<Ar)a=A;else if(i<0)a=P;else a=I;return{horizontal:r,vertical:a}}e(Tr,{color:a,overlay:{gradient:"roundedBevel"},border:{width:.5},labels:{visible:false,distance:35,font:T.DEFAULT_FONT,margin:U(.5),align:d,zIndex:1,position:Kt},animation:{type:rt},highlight:{visible:true,border:{width:1}},visible:true}),x(Tr.prototype,li);var Er={createLegendItem:function(c,h,e){var t=this.options.legend||{};var i=t.labels||{};var n=t.inactiveItems||{};var r=n.labels||{};if(e&&e.visibleInLegend!==false){var a=e.visible!==false;var o=a?V(i):V(r)||V(i);var s=e.category;if(o)s=o({text:s,series:e.series,dataItem:e.dataItem,percentage:e.percentage,value:c});var l,u;if(a){l={};u=h.color}else{l={color:r.color,font:r.font};u=(n.markers||{}).color}if(Ui(s)&&s!=="")this.legendItems.push({active:a,pointIndex:e.index,text:s,series:e.series,markerColor:u,labels:l})}}},Ir=70,Pr=b.extend({init:function(e,t){b.fn.init.call(this,t);this.plotArea=e;this.chartService=e.chartService;this.points=[];this.legendItems=[];this.render()},render:function(){this.traverseDataPoints(this.addValue.bind(this))},traverseDataPoints:function(c){var h=this;var f=this;var d=f.options;var e=f.plotArea.options.seriesColors;if(e===void 0)e=[];var p=e.length;var v=d.series;var t=v.length;for(var i=0;i<t;i++){var n=v[i];var g=n.data;var r=on(n);var m=r.total;var _=r.points;var y=r.count;var b=360/m;var w=void 0;if(!isFinite(b))w=360/y;var a=void 0;if(M(n.startAngle))a=n.startAngle;else a=d.startAngle;if(i!==t-1)if(n.labels.position===Kt)n.labels.position=A;for(var o=0;o<_.length;o++){var s=_[o];if(!s)continue;var l=s.fields;var u=s.value;var x=s.visible;var k=u!==0?w||u*b:0;var C=g.length!==1&&Boolean(l.explode);if(!z(n.color))n.color=l.color||e[o%p];c(u,new S.Ring(null,0,0,a,k),{owner:h,category:M(l.category)?l.category:"",index:o,series:n,seriesIx:i,dataItem:g[o],percentage:m!==0?u/m:0,explode:C,visibleInLegend:l.visibleInLegend,visible:x,zIndex:t-i,animationDelay:h.animationDelay(o,i,t)});if(x!==false)a+=k}}},evalSegmentOptions:function(e,t,i){var n=i.series;ai(e,{value:t,series:n,dataItem:i.dataItem,category:i.category,percentage:i.percentage},{defaults:n._defaults,excluded:["data","content","template","visual","toggle"]})},addValue:function(e,t,i){var n=x({},i.series,{index:i.index});this.evalSegmentOptions(n,e,i);this.createLegendItem(e,n,i);if(i.visible===false)return;var r=new Tr(e,t,n);m.extend(r,i);this.append(r);this.points.push(r)},reflow:function(c){var h=this;var f=h.options;var d=h.points;var e=h.seriesConfigs;if(e===void 0)e=[];var p=d.length;var t=c.clone();var v=5;var i=Math.min(t.width(),t.height());var g=i/2;var m=i-i*.85;var n=new E(t.x1,t.y1,t.x1+i,t.y1+i);var _=n.center();var y=t.center();var b=f.series.length;var r=[];var a=[];var o=L(f.padding,m);this.targetBox=c;o=o>g-v?g-v:o;n.translate(y.x-_.x,y.y-_.y);var w=g-o;var x=new D(w+n.x1+o,w+n.y1+o);for(var k=0;k<p;k++){var s=d[k];var l=s.sector;var C=s.seriesIx;l.radius=w;l.center=x;if(e.length){var S=e[C];l.innerRadius=S.innerRadius;l.radius=S.radius}if(C===b-1&&s.explode)l.center=l.clone().setRadius(l.radius*.15).point(l.middle());s.reflow(n);var u=s.label;if(u)if(u.options.position===Kt)if(C===b-1)if(u.orientation===O)a.push(u);else r.push(u)}if(r.length>0){r.sort(this.labelComparator(true));this.leftLabelsReflow(r)}if(a.length>0){a.sort(this.labelComparator(false));this.rightLabelsReflow(a)}this.box=n},leftLabelsReflow:function(e){var t=this.distanceBetweenLabels(e);this.distributeLabels(t,e)},rightLabelsReflow:function(e){var t=this.distanceBetweenLabels(e);this.distributeLabels(t,e)},distanceBetweenLabels:function(e){var t=R(this.points);var i=t.sector;var n=e.length-1;var r=i.radius+t.options.labels.distance;var a=[];var o=e[0].box;var s=$(o.y1-(i.center.y-r-o.height()-o.height()/2));a.push(s);for(var l=0;l<n;l++){var u=e[l+1].box;o=e[l].box;s=$(u.y1-o.y2);a.push(s)}s=$(i.center.y+r-e[n].box.y2-e[n].box.height()/2);a.push(s);return a},distributeLabels:function(e,t){var i=this;var n=e.length;var r,a,o;for(var s=0;s<n;s++){o=-e[s];r=a=s;while(o>0&&(r>=0||a<n)){o=i._takeDistance(e,s,--r,o);o=i._takeDistance(e,s,++a,o)}}this.reflowLabels(e,t)},_takeDistance:function(e,t,i,n){var r=n;if(e[i]>0){var a=Math.min(e[i],r);r-=a;e[i]-=a;e[t]+=a}return r},reflowLabels:function(e,t){var c=this;var h=R(this.points);var i=h.sector;var n=h.options.labels;var f=t.length;var r=n.distance;var a=i.center.y-(i.radius+r)-t[0].box.height();var o;e[0]+=2;for(var s=0;s<f;s++){var l=t[s];var u=l.box;a+=e[s];o=c.hAlignLabel(u.x2,i.clone().expand(r),a,a+u.height(),l.orientation===O);if(l.orientation===O){if(n.align!==d)o=i.radius+i.center.x+r;l.reflow(new E(o+u.width(),a,o,a))}else{if(n.align!==d)o=i.center.x-i.radius-r;l.reflow(new E(o-u.width(),a,o,a))}a+=u.height()}},createVisual:function(){var c=this;var h=this;var f=h.options.connectors;var d=h.points;var p=d.length;var e=4;b.fn.createVisual.call(this);this._connectorLines=[];for(var v=0;v<p;v++){var t=d[v];var i=t.sector;var g=t.label;var m=i.middle();var _=(t.options.connectors||{}).color||f.color;if(g){var n=new ne({stroke:{color:_,width:f.width},animation:{type:Te,delay:t.animationDelay}});if(g.options.position===Kt){var r=g.box;var y=i.center;var a=i.point(m);var o=new D(r.x1,r.center().y);var s=void 0,l=void 0,u=void 0;a=i.clone().expand(f.padding).point(m);n.moveTo(a.x,a.y);if(g.orientation===O){l=new D(r.x1-f.padding,r.center().y);u=Br(y,a,o,l);o=new D(l.x-e,l.y);u=u||o;u.x=Math.min(u.x,o.x);if(c.pointInCircle(u,i.center,i.radius+e)||u.x<i.center.x){s=i.center.x+i.radius+e;if(t.options.labels.align!==Qe)if(s<o.x)n.lineTo(s,a.y);else n.lineTo(a.x+e*2,a.y);else n.lineTo(s,a.y);n.lineTo(o.x,l.y)}else{u.y=l.y;n.lineTo(u.x,u.y)}}else{l=new D(r.x2+f.padding,r.center().y);u=Br(y,a,o,l);o=new D(l.x+e,l.y);u=u||o;u.x=Math.max(u.x,o.x);if(c.pointInCircle(u,i.center,i.radius+e)||u.x>i.center.x){s=i.center.x-i.radius-e;if(t.options.labels.align!==Qe)if(s>o.x)n.lineTo(s,a.y);else n.lineTo(a.x-e*2,a.y);else n.lineTo(s,a.y);n.lineTo(o.x,l.y)}else{u.y=l.y;n.lineTo(u.x,u.y)}}n.lineTo(l.x,l.y);c._connectorLines.push(n);c.visual.append(n)}}}},renderVisual:function(){b.fn.renderVisual.call(this);if(S.find(this.options.series,function(e){return e.autoFit})){var e=this.targetBox;var t=this.box.center();var i=this.visual.bbox();if(!i)return;var n=i.bottomRight();var r=Math.min((t.y-e.y1)/(t.y-i.origin.y),(e.y2-t.y)/(n.y-t.y),(t.x-e.x1)/(t.x-i.origin.x),(e.x2-t.x)/(n.x-t.x));if(r<1)this.visual.transform(ce().scale(r,r,[t.x,t.y]))}},labelComparator:function(e){var r=e?-1:1;return function(e,t){var i=(e.parent.sector.middle()+270)%360;var n=(t.parent.sector.middle()+270)%360;return(i-n)*r}},hAlignLabel:function(e,t,i,n,r){var a=t.radius;var o=t.center;var s=o.x;var l=o.y;var u=Math.min(Math.abs(l-i),Math.abs(l-n));if(u>a)return e;return s+Math.sqrt(a*a-u*u)*(r?1:-1)},pointInCircle:function(e,t,i){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<Math.pow(i,2)},formatPointValue:function(e,t){return this.chartService.format.auto(t,e.value)},animationDelay:function(e){return e*Ir},stackRoot:function(){return this}});function Br(e,t,i,n){var r=(n.x-i.x)*(e.y-i.y)-(n.y-i.y)*(e.x-i.x);var a=(n.y-i.y)*(t.x-e.x)-(n.x-i.x)*(t.y-e.y);var o;if(a!==0){var s=r/a;o=new D(e.x+s*(t.x-e.x),e.y+s*(t.y-e.y))}return o}e(Pr,{startAngle:90,connectors:{width:2,color:"#939393",padding:8},inactiveItems:{markers:{},labels:{}}}),x(Pr.prototype,Er),Pr.prototype.isStackRoot=true;var Or=mn.extend({render:function(){this.createPieChart(this.series)},createPieChart:function(e){var t=e[0];var i=new Pr(this,{series:e,padding:t.padding,startAngle:t.startAngle,connectors:t.connectors,legend:this.options.legend});this.appendChart(i)},appendChart:function(e,t){mn.fn.appendChart.call(this,e,t);j(this.options.legend.items,e.legendItems)}}),zr=Tr.extend({reflowLabel:function(){var e=this;var t=e.options.labels;var i=e.label;var n=this.sector.clone();var r=n.middle();if(i){var a=i.box.height();if(t.position===A){n.radius-=(n.radius-n.innerRadius)/2;var o=n.point(r);i.reflow(new E(o.x,o.y-a/2,o.x,o.y))}else Tr.fn.reflowLabel.call(this)}},createSegment:function(e,t){return S.ShapeBuilder.current.createRing(e,t)}}),Lr=(e(zr,{overlay:{gradient:"roundedGlass"},labels:{position:A},animation:{type:rt}}),x(zr.prototype,li),50),Rr=Pr.extend({addValue:function(e,t,i){var n=x({},i.series,{index:i.index});this.evalSegmentOptions(n,e,i);this.createLegendItem(e,n,i);if(i.visible===false)return;var r=new zr(e,t,n);m.extend(r,i);this.append(r);this.points.push(r)},reflow:function(c){var h=this;var f=this.options;var d=c.clone();var p=5;var e=Math.min(d.width(),d.height());var t=e/2;var v=e-e*.85;var i=f.series;var n=i.length;var r=L(f.padding,v);r=r>t-p?t-p:r;var a=t-r;var g=0;var o;for(var s=0;s<n;s++){var l=i[s];if(s===0)if(M(l.holeSize)){o=l.holeSize;a-=l.holeSize}if(M(l.size))a-=l.size;else g++;if(M(l.margin)&&s!==n-1)a-=l.margin}if(!M(o)){var m=(t-r)/(n+.75);o=m*.75;a-=o}var u=o;var _=0;var y,b;this.seriesConfigs=[];for(var w=0;w<n;w++){var x=i[w];y=L(x.size,a/g);u+=_;b=u+y;h.seriesConfigs.push({innerRadius:u,radius:b});_=x.margin||0;u=b}Pr.fn.reflow.call(this,c)},animationDelay:function(e,t,i){return e*Lr+Se*(t+1)/(i+1)}}),Fr=(e(Rr,{startAngle:90,connectors:{width:2,color:"#939393",padding:8}}),Or.extend({render:function(){this.createDonutChart(this.series)},createDonutChart:function(e){var t=e[0];var i=new Rr(this,{series:e,padding:t.padding,connectors:t.connectors,legend:this.options.legend});this.appendChart(i)}})),Vr=.15,Nr=mn.extend({initFields:function(){this.valueAxisRangeTracker=new Si},render:function(){this.addToLegend(this.series);this.createPolarAxis();this.createCharts();this.createValueAxis()},alignAxes:function(){var e=this.valueAxis;var t=e.range();var i=e.options.reverse?t.max:t.min;var n=e.getSlot(i);var r=this.polarAxis.getSlot(0).center;var a=e.box.translate(r.x-n.x1,r.y-n.y1);e.reflow(a)},createValueAxis:function(){var e=this.valueAxisRangeTracker;var t=e.query();var i=this.valueAxisOptions({roundToMajorUnit:false,zIndex:-1});var n,r;if(i.type===qt){n=S.RadarLogarithmicAxis;r={min:.1,max:1}}else{n=S.RadarNumericAxis;r={min:0,max:1}}var a=e.query(name)||t||r;if(a&&t){a.min=Math.min(a.min,t.min);a.max=Math.max(a.max,t.max)}var o=new n(a.min,a.max,i,this.chartService);this.valueAxis=o;this.appendAxis(o)},reflowAxes:function(){var e=this;var t=e.options.plotArea;var i=e.valueAxis;var n=e.polarAxis;var r=e.box;var a=Math.min(r.width(),r.height())*Vr;var o=U(t.padding||{},a);var s=r.clone().unpad(o);var l=s.clone();l.y2=l.y1+Math.min(l.width(),l.height());l.align(s,g,A);var u=l.clone().shrink(0,l.height()/2);n.reflow(l);i.reflow(u);var c=i.lineBox().height()-i.box.height();i.reflow(i.box.unpad({top:c}));this.axisBox=l;this.alignAxes(l)},backgroundBox:function(){return this.box},detachLabels:function(){}}),Hr=ji.extend({pointSlot:function(e,t){var i=e.center.y-t.y1;var n=D.onCircle(e.center,e.startAngle,i);return new E(n.x,n.y,n.x,n.y)}}),Ur=(e(Hr,{clip:false}),kr.extend({})),jr=(Ur.prototype.pointSlot=Hr.prototype.pointSlot,e(Ur,{clip:false}),ki.extend({fillToAxes:function(e){var t=this._polarAxisCenter();e.lineTo(t.x,t.y)},_polarAxisCenter:function(){var e=this.parent.plotArea.polarAxis;var t=e.box.center();return t},strokeSegments:function(){var e=this._strokeSegments;if(!e){var t=this._polarAxisCenter();var i=new s(false);var n=this.points();n.push(t);e=this._strokeSegments=i.process(n);e.pop()}return e}})),Gr=wi.extend({fillToAxes:function(e){var t=this.parent.plotArea.polarAxis;var i=t.box.center();var n=new le.Segment([i.x,i.y]);e.segments.unshift(n);e.segments.push(n)}}),Wr=Ur.extend({createSegment:function(e,t,i){var n=(t.line||{}).style;var r;if(n===je)r=new jr(e,t,i);else r=new Gr(e,t,i);return r},createMissingValue:function(e,t){var i;if(Ui(e.x)&&t!==Ve){i={x:e.x,y:e.y};if(t===Fe)i.y=0}return i},seriesMissingValues:function(e){return e.missingValues||Fe},_hasMissingValuesGap:function(){var e=this;var t=this.options.series;for(var i=0;i<t.length;i++)if(e.seriesMissingValues(t[i])===Ne)return true},sortPoints:function(e){var t=this;e.sort(qr);if(this._hasMissingValuesGap())for(var i=0;i<e.length;i++){var n=e[i];if(n){var r=n.value;if(!Ui(r.y)&&t.seriesMissingValues(n.series)===Ne)delete e[i]}}return e}});function qr(e,t){return e.value.x-t.value.x}var Yr=Nr.extend({createPolarAxis:function(){var e=new S.PolarAxis(this.options.xAxis,this.chartService);this.polarAxis=e;this.axisX=e;this.appendAxis(e)},valueAxisOptions:function(e){return x(e,{majorGridLines:{type:i},minorGridLines:{type:i}},this.options.yAxis)},createValueAxis:function(){Nr.fn.createValueAxis.call(this);this.axisY=this.valueAxis},appendChart:function(e,t){this.valueAxisRangeTracker.update(e.yAxisRanges);mn.prototype.appendChart.call(this,e,t)},createCharts:function(){var e=this.filterVisibleSeries(this.series);var t=this.panes[0];this.createLineChart(ln(e,[ot]),t);this.createScatterChart(ln(e,[st]),t);this.createAreaChart(ln(e,[at]),t)},createLineChart:function(e,t){if(e.length===0)return;var i=new Ur(this,{series:e});this.appendChart(i,t)},createScatterChart:function(e,t){if(e.length===0)return;var i=new Hr(this,{series:e});this.appendChart(i,t)},createAreaChart:function(e,t){if(e.length===0)return;var i=new Wr(this,{series:e});this.appendChart(i,t)},_dispatchEvent:function(e,t,i){var n=e._eventCoordinates(t);var r=new D(n.x,n.y);var a=this.axisX.getValue(r);var o=this.axisY.getValue(r);if(a!==null&&o!==null)e.trigger(i,{element:F(t),x:a,y:o})},createCrosshairs:function(){}});function $r(e){var t=[];for(var i=0;i<e.length;i++){var n=e[i];t[n.seriesIx]=t[n.seriesIx]||[];t[n.seriesIx].push(n)}return t}e(Yr,{xAxis:{},yAxis:{}}),x(Yr.prototype,kn);var Xr=bi.extend({pointSlot:function(e,t){var i=e.center.y-t.y1;var n=D.onCircle(e.center,e.middle(),i);return new E(n.x,n.y,n.x,n.y)},renderSegments:function(){bi.fn.renderSegments.call(this);if(this._segments&&this._segments.length>1){var e=$r(this._segments);for(var t=0;t<e.length;t++){var i=e[t];if(i&&i.length>1){var n=i[0].linePoints[0];var r=R(i);var a=R(r.linePoints);var o=n.categoryIx===0;var s=a.categoryIx===a.categoriesCount-1;if(o&&s)R(i).linePoints.push(n)}}}},createSegment:function(e,t,i){var n=t.style;var r;if(n===je)r=vi;else r=hi;var a=new r(e,t,i);var o=this.seriesMissingValues(t);if(e.length===t.data.length||o===Ve)a.options.closed=true;return a}}),Kr=(e(Xr,{clip:false,limitPoints:false}),ki.extend({fillToAxes:function(){}})),Qr=wi.extend({fillToAxes:function(){}}),Zr=Xr.extend({createSegment:function(e,t,i,n){var r=this.options.isStacked;var a=(t.line||{}).style;var o;var s;var l;if(r&&i>0&&n){s=n.linePoints.slice(0);o=n}if(a===je){l=new Kr(e,t,i,o,s);l.options.closed=true}else{e.push(e[0]);l=new Qr(e,t,i,o,s)}return l},seriesMissingValues:function(e){return e.missingValues||Fe}}),Jr=zr.extend({init:function(e,t){zr.fn.init.call(this,e,null,t)}}),ea=(e(Jr,{overlay:{gradient:"none"},labels:{distance:10}}),b.extend({init:function(e){b.fn.init.call(this,e);this.forEach=e.rtl?Ii:Ei},reflow:function(i){var e=this;var t=e.options;var n=e.children;var r=t.gap;var a=t.spacing;var o=n.length;var s=o+r+a*(o-1);var l=i.angle/s;var u=i.startAngle+l*(r/2);this.forEach(n,function(e){var t=i.clone();t.startAngle=u;t.angle=l;if(e.sector)t.radius=e.sector.radius;e.reflow(t);e.sector=t;u+=l+l*a})}})),ta=(e(ea,{gap:1,spacing:0}),b.extend({reflow:function(e){var t=this;var i=t.options.reverse;var n=t.children;var r=n.length;var a=i?r-1:0;var o=i?-1:1;this.box=new E;for(var s=a;s>=0&&s<r;s+=o){var l=n[s].sector;l.startAngle=e.startAngle;l.angle=e.angle}}})),ia=Oi.extend({pointType:function(){return Jr},clusterType:function(){return ea},stackType:function(){return ta},categorySlot:function(e,t){return e.getSlot(t)},pointSlot:function(e,t){var i=e.clone();var n=e.center.y;i.radius=n-t.y1;i.innerRadius=n-t.y2;return i},reflowPoint:function(e,t){e.sector=t;e.reflow()},createAnimation:function(){this.options.animation.center=this.box.toRect().center();Oi.fn.createAnimation.call(this)}}),na=(ia.prototype.reflow=si.prototype.reflow,e(ia,{clip:false,limitPoints:false,animation:{type:"pie"}}),Nr.extend({createPolarAxis:function(){var e=new S.RadarCategoryAxis(this.options.categoryAxis,this.chartService);this.polarAxis=e;this.categoryAxis=e;this.appendAxis(e);this.aggregateCategories();this.createCategoryAxesLabels()},valueAxisOptions:function(e){if(this._hasBarCharts)x(e,{majorGridLines:{type:i},minorGridLines:{type:i}});if(this._isStacked100)x(e,{roundToMajorUnit:false,labels:{format:"P0"}});return x(e,this.options.valueAxis)},aggregateCategories:function(){Gn.prototype.aggregateCategories.call(this,this.panes)},createCategoryAxesLabels:function(){Gn.prototype.createCategoryAxesLabels.call(this,this.panes)},filterSeries:function(e){return e},createCharts:function(){var e=this.filterVisibleSeries(this.series);var t=this.panes[0];this.createAreaChart(ln(e,[lt]),t);this.createLineChart(ln(e,[ct]),t);this.createBarChart(ln(e,[ut]),t)},chartOptions:function(e){var t={series:e};var i=e[0];if(i){var n=this.filterVisibleSeries(e);var r=i.stack;t.isStacked=r&&n.length>1;t.isStacked100=r&&r.type==="100%"&&n.length>1;if(t.isStacked100)this._isStacked100=true}return t},createAreaChart:function(e,t){if(e.length===0)return;var i=new Zr(this,this.chartOptions(e));this.appendChart(i,t)},createLineChart:function(e,t){if(e.length===0)return;var i=new Xr(this,this.chartOptions(e));this.appendChart(i,t)},createBarChart:function(e,t){if(e.length===0)return;var i=e[0];var n=this.chartOptions(e);n.gap=i.gap;n.spacing=i.spacing;var r=new ia(this,n);this.appendChart(r,t);this._hasBarCharts=true},seriesCategoryAxis:function(){return this.categoryAxis},_dispatchEvent:function(e,t,i){var n=e._eventCoordinates(t);var r=new D(n.x,n.y);var a=this.categoryAxis.getCategory(r);var o=this.valueAxis.getValue(r);if(a!==null&&o!==null)e.trigger(i,{element:F(t),category:a,value:o})},createCrosshairs:function(){}})),ra=(x(na.prototype,kn,{appendChart:Gn.prototype.appendChart,aggregateSeries:Gn.prototype.aggregateSeries,seriesSourcePoints:Gn.prototype.seriesSourcePoints}),e(na,{categoryAxis:{categories:[]},valueAxis:{}}),b.extend({init:function(e,t,i){b.fn.init.call(this,t);this.value=e;this.options.index=i.index},reflow:function(e){var t=this.points;var i=this.children[0];this.box=new E(t[0].x,t[0].y,t[1].x,t[2].y);if(i)i.reflow(new E(e.x1,t[0].y,e.x2,t[2].y))},createVisual:function(){var e=this;var t=this.options;var i;b.fn.createVisual.call(this);if(t.visual)i=t.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,points:this.points,options:t,sender:this.getSender(),createVisual:function(){return e.createPath()}});else i=this.createPath();if(i)this.visual.append(i)},createPath:function(){var e=this.options;var t=e.border;var i=ne.fromPoints(this.points,{fill:{color:e.color,opacity:e.opacity},stroke:{color:t.color,opacity:t.opacity,width:t.width}}).close();return i},createHighlight:function(e){return ne.fromPoints(this.points,e)},highlightVisual:function(){return this.visual.children[0]},highlightVisualArgs:function(){var e=ne.fromPoints(this.points).close();return{options:this.options,path:e}},tooltipAnchor:function(){var e=this.box;return{point:new D(e.center().x,e.y1),align:{horizontal:"center",vertical:"top"}}},formatValue:function(e){var t=this;return t.owner.formatPointValue(t,e)}})),aa=(e(ra,{color:a,border:{width:1}}),x(ra.prototype,li),b.extend({init:function(e,t){b.fn.init.call(this,t);this.plotArea=e;this.points=[];this.labels=[];this.legendItems=[];this.render()},formatPointValue:function(e,t){return this.chartService.format.auto(t,e.value)},render:function(){var e=this;var t=this;var c=t.options;var i=t.plotArea.options.seriesColors;if(i===void 0)i=[];var n=c.series[0];var r=n.data;if(!r)return;var a=on(n);var h=a.total;var o=a.points;for(var s=0;s<o.length;s++){var l=o[s];if(!l)continue;var u=l.fields;if(!z(n.color))n.color=u.color||i[s%i.length];u=x({index:s,owner:e,series:n,dataItem:r[s],percentage:l.value/h},u,{visible:l.visible});var f=l.valueFields.value;var d=e.createSegment(f,u);var p=e.createLabel(f,u);if(d&&p)d.append(p)}},evalSegmentOptions:function(e,t,i){var n=i.series;ai(e,{value:t,series:n,dataItem:i.dataItem,index:i.index},{defaults:n._defaults,excluded:["data","content","template","toggle","visual"]})},createSegment:function(e,t){var i=x({},t.series);this.evalSegmentOptions(i,e,t);this.createLegendItem(e,i,t);if(t.visible!==false){var n=new ra(e,i,t);m.extend(n,t);this.append(n);this.points.push(n);return n}},createLabel:function(e,t){var i=t.series;var n=t.dataItem;var r=x({},this.options.labels,i.labels);var a=e;if(r.visible){var o=V(r);var s={dataItem:n,value:e,percentage:t.percentage,category:t.category,series:i};if(o)a=o(s);else if(r.format)a=this.plotArea.chartService.format.auto(r.format,a);if(!r.color){r.color=S.autoTextColor(i.color);if(!r.background)r.background=i.color}this.evalSegmentOptions(r,e,t);var l=new N(a,x({vAlign:r.position},r),s);this.labels.push(l);return l}},labelPadding:function(){var e=this.labels;var t={left:0,right:0};for(var i=0;i<e.length;i++){var n=e[i];var r=n.options.align;if(r!==A){var a=e[i].box.width();if(r===B)t.left=Math.max(t.left,a);else t.right=Math.max(t.right,a)}}return t},dynamicSlopeReflow:function(e,t,c){var h=this;var f=h.options;var i=h.points;var d=i.length;var p=i[0];var n=p;for(var r=0;r<i.length;r++)if(i[r].percentage>n.percentage)n=i[r];var v=p.percentage/n.percentage*t;var g=(t-v)/2;var a=0;for(var o=0;o<d;o++){var s=i[o].percentage;var m=i[o+1];var _=m?m.percentage:s;var l=i[o].points=[];var y=f.dynamicHeight?c*s:c/d;var u=void 0;if(!s)u=_?0:t/2;else u=(t-v*(_/s))/2;u=X(u,0,t);l.push(new ue(e.x1+g,e.y1+a));l.push(new ue(e.x1+t-g,e.y1+a));l.push(new ue(e.x1+t-u,e.y1+y+a));l.push(new ue(e.x1+u,e.y1+y+a));g=u;a+=y+f.segmentSpacing;v=X(t-2*u,0,t)}},constantSlopeReflow:function(e,t,c){var h=this;var i=h.options;var n=h.points;var r=n.length;var a=i.neckRatio<=1;var f=a?i.neckRatio*t:t;var o=a?0:(t-t/i.neckRatio)/2;var d=a?t:t-o*2;var p=(d-f)/2;var s=0;for(var l=0;l<r;l++){var u=n[l].points=[];var v=n[l].percentage;var g=i.dynamicHeight?p*v:p/r;var m=i.dynamicHeight?c*v:c/r;u.push(new ue(e.x1+o,e.y1+s));u.push(new ue(e.x1+t-o,e.y1+s));u.push(new ue(e.x1+t-o-g,e.y1+m+s));u.push(new ue(e.x1+o+g,e.y1+m+s));o+=g;s+=m+i.segmentSpacing}},reflow:function(e){var t=this.points;var i=t.length;if(!i)return;var n=this.options;var r=e.clone().unpad(this.labelPadding());var a=r.height()-n.segmentSpacing*(i-1);var o=r.width();if(n.dynamicSlope)this.dynamicSlopeReflow(r,o,a);else this.constantSlopeReflow(r,o,a);for(var s=0;s<i;s++)t[s].reflow(e)}})),oa=(e(aa,{neckRatio:.3,width:300,dynamicSlope:false,dynamicHeight:true,segmentSpacing:0,labels:{visible:false,align:A,position:A,zIndex:1}}),x(aa.prototype,Er),mn.extend({render:function(){this.createFunnelChart(this.series)},createFunnelChart:function(e){var t=e[0];var i=new aa(this,{series:e,legend:this.options.legend,neckRatio:t.neckRatio,dynamicHeight:t.dynamicHeight,dynamicSlope:t.dynamicSlope,segmentSpacing:t.segmentSpacing,highlight:t.highlight});this.appendChart(i)},appendChart:function(e,t){mn.fn.appendChart.call(this,e,t);j(this.options.legend.items,e.legendItems)}})),sa=function(e,t){if(t===void 0)t=.05;var r=kendo.parseColor(e);var a=1-t;return function(e){var t=r.toHSL();var i=100-t.l;var n=a-e;t.l+=Math.min(n*i,i);return t.toCss()}},la=b.extend({init:function(e,t){b.fn.init.call(this);this.options=t;this.color=t.color||a;this.value=e},render:function(){if(this._rendered)return;this._rendered=true;this.createMarker();this.createLabel();this.createNote()},createLabel:function(){var e=this.options;var t=e.labels;if(t.visible){var i=this.pointData();var n=V(t);var r;var a=t.color;if(n)r=n(i);else r=this.formatValue(t.format);if(!a)a=S.autoTextColor(this.color);this.label=new N(r,x({align:A,vAlign:A,margin:{left:5,right:5},zIndex:L(t.zIndex,this.series.zIndex)},t,{color:a}),i);this.append(this.label)}},formatValue:function(e){return this.owner.formatPointValue(this,e)},reflow:function(e){this.render();var t=this.label;this.box=e;if(t)t.reflow(this.markerBox());if(this.note)this.note.reflow(e);this.marker.reflow(this.markerBox())},markerBox:function(){var e=this.options;var t=e.markers;var i=t.border;var n=this.box.toRect();var r=L(t.type,"rect");var a=r===T.ROUNDED_RECT;var o=L(i.width,a?1:0);var s=Math.round(o/2);if(t.size){var l=n.center();n.size.width=n.size.height=t.size;n.origin.x=Math.round(l.x-n.size.width/2);n.origin.y=Math.round(l.y-n.size.height/2)}n.size.width-=o;n.size.height-=o;n.origin.y+=s+.5;n.origin.x+=s+.5;return S.rectToBox(n)},markerBorder:function(){var e=this.options;var t=e.markers;var i=t.border;var n=L(i.opacity,e.opacity);return{color:i.color||this.color,width:i.width,opacity:n,dashType:i.dashType}},createMarker:function(){var e=this.options;var t=e.markers;var i=new H({type:L(t.type,"rect"),width:t.size,height:t.size,rotation:t.rotation,background:this.color,border:this.markerBorder(),borderRadius:t.borderRadius,opacity:this.series.opacity||e.opacity,zIndex:L(e.zIndex,this.series.zIndex),animation:e.animation,visual:e.visual},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category});this.marker=i;this.append(i)},createHighlight:function(e){var t=this.options;var i=this.options.highlight.markers||this.options.markers;var n=new H({type:L(i.type,"rect"),width:i.size,height:i.size,rotation:i.rotation,background:i.color||this.color,border:this.markerBorder(),borderRadius:i.borderRadius,opacity:this.series.opacity||t.opacity,zIndex:L(t.zIndex,this.series.zIndex)});n.reflow(this.markerBox());var r=n.getElement();r.options.fill=e.fill;r.options.stroke=e.stroke;return r},highlightVisual:function(){return this.rectVisual},highlightVisualArgs:function(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}},tooltipAnchor:function(){var e=this.box.center().x;var t=this.box.y1-De;return{point:new D(e,t),align:{horizontal:A,vertical:P}}},overlapsBox:function(e){return this.box.overlaps(e)},unclipElements:function(){},pointData:function(){return{x:this.value.x,y:this.value.y,value:this.value.value,dataItem:this.dataItem,series:this.series}}}),ua=(x(la.prototype,li),x(la.prototype,ui),la.prototype.defaults={markers:{type:"rect",borderRadius:4,border:{color:"transparent"}},padding:{top:1},labels:{visible:false,padding:3},opacity:1,notes:{label:{}}},b.extend({init:function(e,t){b.fn.init.call(this,t);this.plotArea=e;this.chartService=e.chartService;this._initFields();this.render()},_initFields:function(){this.points=[];this.seriesOptions=[];this.valueRange={min:f,max:h};this._evalSeries=[]},render:function(){this.setRange();this.traverseDataPoints(this.addValue.bind(this))},setRange:function(){var e=this;var t=this;var i=t.options.series;for(var n=0;n<i.length;n++){var r=i[n];for(var a=0;a<r.data.length;a++){var o=e._bindPoint(r,n,a);var s=o.valueFields;if(M(s.value)&&s.value!==null){e.valueRange.min=Math.min(e.valueRange.min,s.value);e.valueRange.max=Math.max(e.valueRange.max,s.value)}}}},addValue:function(e,t){var i;if(e&&M(e.value)&&e.value!==null){i=this.createPoint(e,t);if(i)m.extend(i,t)}this.points.push(i)},evalPointOptions:function(e,t,i){var n=i.series;var r=i.seriesIx;var a={defaults:n._defaults,excluded:["data","tooltip","content","template","visual","toggle"]};var o=this._evalSeries[r];if(!M(o))this._evalSeries[r]=o=ai(e,{},a,true);var s=e;if(o){s=x({},e);ai(s,{value:t,series:n,dataItem:i.dataItem,min:this.valueRange.min,max:this.valueRange.max},a)}return s},pointType:function(){return la},pointOptions:function(e,t){var i=this.seriesOptions[t];if(!i){var n=this.pointType().prototype.defaults;this.seriesOptions[t]=i=x({},n,{markers:{opacity:e.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},e)}return i},createPoint:function(e,t){var i=t.series;var n=this.pointOptions(i,t.seriesIx);var r=t.color||i.color;n=this.evalPointOptions(n,e,t);if(z(i.color))r=n.color;else if(this.valueRange.max!==0){var a=sa(r);r=a(e.value/this.valueRange.max)}var o=new la(e,n);o.color=r;this.append(o);return o},seriesAxes:function(e){var t=e.xAxis;var i=e.yAxis;var n=this.plotArea;var r=t?n.namedXAxes[t]:n.axisX;var a=i?n.namedYAxes[i]:n.axisY;if(!r)throw new Error("Unable to locate X axis with name "+t);if(!a)throw new Error("Unable to locate Y axis with name "+i);return{xAxis:r,yAxis:a}},reflow:function(e){var h=this;var f=this.points;var d=!this.options.clip;var p=0;this.traverseDataPoints(function(e,t){var i=f[p++];var n=h.seriesAxes(t.series);var r=n.xAxis;var a=n.yAxis;var o=r.categoryIndex(e.x);var s=a.categoryIndex(e.y);var l=r.getSlot(o,o,d);var u=a.getSlot(s,s,d);if(i)if(l&&u){var c=h.pointSlot(l,u);i.reflow(c)}else i.visible=false});this.box=e},pointSlot:function(e,t){return new E(e.x1,t.y1,e.x2,t.y2)},traverseDataPoints:function(c){var e=this;var h=this;var t=h.options.series;for(var i=0;i<t.length;i++){var n=t[i];var r=e.seriesAxes(n);var a=r.xAxis;var o=r.yAxis;var s=a.currentRangeIndices();var f=o.currentRangeIndices();for(var l=0;l<n.data.length;l++){var d=e._bindPoint(n,i,l);var u=d.valueFields;var p=d.fields;var v=a.totalIndex(u.x);var g=o.totalIndex(u.y);var m=s.min<=v&&v<=s.max;var _=f.min<=g&&g<=f.max;if(m&&_)c(u,x({pointIx:l,series:n,seriesIx:i,dataItem:n.data[l],owner:e},p))}}},formatPointValue:function(e,t){var i=e.value;return this.chartService.format.auto(t,i.x,i.y,i.value)},animationPoints:function(){var e=this.points;var t=[];for(var i=0;i<e.length;i++)t.push((e[i]||{}).marker);return t}})),ca=(e(ua,{series:[],tooltip:{format:"{0}, {1}: {2}"},labels:{format:"{2}"},clip:true}),x(ua.prototype,{_bindPoint:si.prototype._bindPoint}),mn.extend({initFields:function(){this.namedXAxes={};this.namedYAxes={}},render:function(e){if(e===void 0)e=this.panes;this.bindCategories();this.createAxes(e);this.createCharts(e);this.createAxisLabels()},bindCategories:function(){var c=this;var e=this.srcSeries||this.series;for(var t=0;t<e.length;t++){var i=e[t];var h=i.data||[];var n=c.seriesAxes(i);var r=n.xAxis;var a=n.yAxis;var o=S.createHashSet(r.categories||[]);var s=S.createHashSet(a.categories||[]);for(var l=0;l<h.length;l++){var u=_e.current.bindPoint(i,l).valueFields;var f=u.x;var d=u.y;if(!o.has(f))o.add(f);if(!s.has(d))s.add(d)}r.categories=o.values();a.categories=s.values()}},createCharts:function(e){var t=this;var i=this.groupSeriesByPane();for(var n=0;n<e.length;n++){var r=e[n];var a=i[r.options.name||"default"]||[];t.addToLegend(a);var o=t.filterVisibleSeries(a);if(!o)continue;t.createHeatmapChart(ln(o,[et]),r)}},createHeatmapChart:function(e,t){var i=new ua(this,{series:e});this.appendChart(i,t)},seriesPaneName:function(e){var t=this.options;var i=e.xAxis;var n=[].concat(t.xAxis);var r=K(n,function(e){return e.name===i})[0];var a=e.yAxis;var o=[].concat(t.yAxis);var s=K(o,function(e){return e.name===a})[0];var l=t.panes||[{}];var u=l[0].name||"default";var c=(r||{}).pane||(s||{}).pane||u;return c},seriesAxes:function(e){var t;var i;var n=this.options;var r=[].concat(n.xAxis);var a=e.xAxis;if(a)t=r.find(function(e){return e.name===a});else t=r[0];var o=[].concat(n.yAxis);var s=e.yAxis;if(s)i=o.find(function(e){return e.name===s});else i=o[0];if(!t)throw new Error("Unable to locate X axis with name "+a);if(!i)throw new Error("Unable to locate Y axis with name "+s);return{xAxis:t,yAxis:i}},createAxisLabels:function(){var e=this.axes;for(var t=0;t<e.length;t++)e[t].createLabels()},createXYAxis:function(e,t,i){var n=e.name;var c=t?this.namedYAxes:this.namedXAxes;var r=m.extend({axisCrossingValue:0},e,{vertical:t,reverse:t||this.chartService.rtl?!e.reverse:e.reverse,justified:false});var h=r.categories?r.categories[0]:null;var a=[r.min,r.max,h];var f=this.series;for(var o=0;o<f.length;o++){var d=f[o];var p=d[t?"yAxis":"xAxis"];if(p===r.name||i===0&&!p){var v=_e.current.bindPoint(d,0).valueFields;a.push(v[t?"y":"x"]);break}}var g;for(var s=0;s<a.length;s++)if(a[s]instanceof Date){g=true;break}var l;if(sn(r.type,w)||!r.type&&g)l=S.DateCategoryAxis;else l=q;var u=new l(r,this.chartService);u.axisIndex=i;if(n){if(c[n])throw new Error((t?"Y":"X")+" axis with name "+n+" is already defined");c[n]=u}this.appendAxis(u);u.mapCategories();return u},createAxes:function(e){var t=this;var i=this.options;var n=[].concat(i.xAxis);var r=[];var a=[].concat(i.yAxis);var o=[];for(var s=0;s<n.length;s++){var l=t.findPane(n[s].pane);if(k(l,e))r.push(t.createXYAxis(n[s],false,s))}for(var u=0;u<a.length;u++){var c=t.findPane(a[u].pane);if(k(c,e))o.push(t.createXYAxis(a[u],true,u))}this.axisX=this.axisX||r[0];this.axisY=this.axisY||o[0]},removeAxis:function(e){var t=e.options.name;mn.fn.removeAxis.call(this,e);if(e.options.vertical)delete this.namedYAxes[t];else delete this.namedXAxes[t];if(e===this.axisX)delete this.axisX;if(e===this.axisY)delete this.axisY},_dispatchEvent:function(e,t,i){var n=e._eventCoordinates(t);var r=new D(n.x,n.y);var a=this.axes;var c=a.length;var o=[];var s=[];for(var l=0;l<c;l++){var u=a[l];var h=u.options.vertical?s:o;rn(h,u.getCategory(r))}if(o.length>0&&s.length>0)e.trigger(i,{element:F(t),originalEvent:t,x:hn(o),y:hn(s)})},updateAxisOptions:function(e,t){var i=e.options.vertical;var n=this.groupAxes(this.panes);var r=(i?n.y:n.x).indexOf(e);ha(this.options,r,i,t);ha(this.originalOptions,r,i,t)},crosshairOptions:function(e){return m.extend({},e.options.crosshair,{zIndex:0})}}));function ha(e,t,i,n){var r=[].concat(i?e.yAxis:e.xAxis)[t];x(r,n)}e(ca,{xAxis:{},yAxis:{}}),x(ca.prototype,kn);var fa="color",da="first",pa="from",va="max",ga="min",ma="noteText",_a="summary",ya="to",ba=(hr.current.register(Gn,[qe,Qe,it,yt,We,gt,Ke,nt,Xe,_t,Ye,mt,dt,ft,wt,tt,ht,bt]),hr.current.register(Cr,[pt,vt,$e]),hr.current.register(Or,[rt]),hr.current.register(Fr,[Ze]),hr.current.register(oa,[Je]),hr.current.register(Yr,[at,ot,st]),hr.current.register(na,[lt,ut,ct]),hr.current.register(ca,[et]),_e.current.register([qe,Qe,it,yt,We,gt],[c],[Yt,fa,ma,Ie,Pe]),_e.current.register([dt,ft,ht,bt],[pa,ya],[Yt,fa,ma]),_e.current.register([wt,tt],[c],[Yt,fa,ma,_a]),_e.current.register([at,ot,st],[_,g],[fa]),_e.current.register([lt,ut,ct],[c],[fa]),_e.current.register([Je],[c],[Yt,fa,"visibleInLegend","visible"]),Tn.current.register([qe,Qe,it,yt,We,gt,wt,tt],{value:va,color:da,noteText:da,errorLow:ga,errorHigh:va}),Tn.current.register([dt,ft,ht,bt],{from:ga,to:va,color:da,noteText:da}),Tn.current.register([lt,ut,ct],{value:va,color:da}),_e.current.register([pt,vt,$e],[_,g],[fa,ma,Be,Oe,ze,Le]),_e.current.register([$e],[_,g,"size"],[fa,Yt,ma]),_e.current.register([et],[_,g,c],[fa,ma]),_e.current.register([Ke,nt],["open","high","low","close"],[Yt,fa,"downColor",ma]),Tn.current.register([Ke,nt],{open:va,high:va,low:ga,close:va,color:da,downColor:da,noteText:da}),_e.current.register([Ye,mt],["lower","q1","median","q3","upper","mean","outliers"],[Yt,fa,ma]),Tn.current.register([Ye,mt],{lower:va,q1:va,median:va,q3:va,upper:va,mean:va,outliers:da,color:da,noteText:da}),_e.current.register([Xe,_t],["current","target"],[Yt,fa,"visibleInLegend",ma]),Tn.current.register([Xe,_t],{current:va,target:va,color:da,noteText:da}),_e.current.register([rt,Ze],[c],[Yt,fa,"explode","visibleInLegend","visible"]),[Yt,c,_,g]),wa="mousemove",xa="contextmenu",ka="mouseleave",Ca=20,Sa=t.extend({init:function(e,t,i,n){var r=this;if(n===void 0)n={};this.observers=[];this.addObserver(n.observer);this.chartService=new J.ChartService(this,n);this.chartService.theme=i;this._initElement(e);var a=x({},this.options,t);this._originalOptions=x({},a);this._theme=i;this._initTheme(a,i);this._initHandlers();this._initSurface();this.bindCategories();S.FontLoader.preloadFonts(t,function(){r.fontLoaded=true;if(!r._destroyed){r.trigger("init");r._redraw();r._attachEvents()}})},_initElement:function(e){this._setElementClass(e);e.style.position="relative";while(e.firstChild)e.removeChild(e.firstChild);this.element=e},_setElementClass:function(e){S.addClass(e,"k-chart")},_initTheme:function(e,t){var i=[];var n=e.series||[];for(var r=0;r<n.length;r++)i.push(m.extend({},n[r]));e.series=i;Ta(e);this.applyDefaults(e,t);if(e.seriesColors===null)delete e.seriesColors;this.options=x({},t,e);this.applySeriesColors()},getSize:function(){var e=this.options.chartArea||{};var t=e.width?parseInt(e.width,10):Math.floor(this.element.offsetWidth);var i=e.height?parseInt(e.height,10):Math.floor(this.element.offsetHeight);return{width:t,height:i}},resize:function(e){var t=this.getSize();var i=this._size;var n=t.width>0||t.height>0;if(e||n&&(!i||t.width!==i.width||t.height!==i.height)){this._size=t;this._resize(t,e);this.trigger("resize",t)}else if(n&&this._selections&&S.find(this._selections,function(e){return!e.visible})){this._destroySelections();this._setupSelection()}},_resize:function(){this._noTransitionsRedraw()},redraw:function(e){this.applyDefaults(this.options);this.applySeriesColors();if(e){var t=this._model._plotArea;var i=t.findPane(e);t.redraw(i)}else this._redraw()},getAxis:function(e){return fe(e,this._plotArea.axes)},findAxisByName:function(e){return this.getAxis(e)},findPaneByName:function(e){var t=this._plotArea.panes;for(var i=0;i<t.length;i++)if(t[i].options.name===e)return new de(t[i])},findPaneByIndex:function(e){var t=this._plotArea.panes;if(t[e])return new de(t[e])},plotArea:function(){return new pe(this._plotArea)},toggleHighlight:function(e,t){var i=this._plotArea;var n=(i.srcSeries||i.series||[])[0];var r;if(z(t))r=i.filterPoints(t);else{var a,o;if(C(t)){a=t.series;o=t.category}else a=o=t;if(n.type===Ze)r=Aa(i.pointsBySeriesName(a),o);else if(n.type===rt||n.type===Je)r=Aa((i.charts[0]||{}).points,o);else r=i.pointsBySeriesName(a)}if(r)this.togglePointsHighlight(e,r)},togglePointsHighlight:function(e,t){var i=this._highlight;for(var n=0;n<t.length;n++)i.togglePointHighlight(t[n],e)},showTooltip:function(e){var t=this._sharedTooltip();var i=this;var n=i._tooltip;var r=i._plotArea;var a,o;if(z(e)){a=r.findPoint(e);if(a&&t)o=a.categoryIx}else if(t&&M(e))o=r.categoryAxis.categoryIndex(e);if(t){if(o>=0){var s=this._plotArea.pointsByCategoryIndex(o);n.showAt(s)}}else if(a)n.show(a)},hideTooltip:function(){this._tooltip.hide()},_initSurface:function(){var e=this.surface;var t=this._surfaceWrap();var i=this.options.chartArea||{};if(i.width)S.elementSize(t,{width:i.width});if(i.height)S.elementSize(t,{height:i.height});if(!e||e.options.type!==this.options.renderAs){this._destroySurface();this.surface=ie.Surface.create(t,{type:this.options.renderAs});this.surface.bind("mouseenter",this._surfaceMouseenterHandler);this.surface.bind("mouseleave",this._surfaceMouseleaveHandler)}else{this.surface.clear();this.surface.resize()}},_surfaceWrap:function(){return this.element},_redraw:function(){var e=this._getModel();this._size={width:e.options.width,height:e.options.height};this._destroyView();this._model=e;this._plotArea=e._plotArea;e.renderVisual();if(this.options.transitions!==false)e.traverse(function(e){if(e.animation)e.animation.setup()});this._initSurface();this.surface.draw(e.visual);if(this.options.transitions!==false)e.traverse(function(e){if(e.animation)e.animation.play()});this._tooltip=this._createTooltip();this._highlight=new Yn;this._setupSelection();this._createPannable();this._createZoomSelection();this._createMousewheelZoom();this.trigger(Ut);Ra(this._plotArea.panes);if(!this._navState)this._cancelDomEvents()},exportVisual:function(e){var t;if(e&&(e.width||e.height||e.options)){var i=this.options;var n=x({},e.options,{chartArea:{width:e.width,height:e.height}});La(this._originalOptions,n);this.options=x({},this._originalOptions,n);this._initTheme(this.options,this._theme);this.bindCategories();var r=this._getModel();r.renderVisual();Ra(r._plotArea.panes);t=r.visual;this.options=i}else t=this.surface.exportVisual();return t},_sharedTooltip:function(){return this._plotArea instanceof Gn&&this.options.tooltip&&this.options.tooltip.shared},_createPannable:function(){var e=this.options;if(e.pannable!==false)this._pannable=new Qn(this._plotArea,e.pannable)},_createZoomSelection:function(){var e=this.options.zoomable;var t=(e||{}).selection;if(e!==false&&t!==false)this._zoomSelection=new Zn(this,t)},_createMousewheelZoom:function(){var e=this.options.zoomable;var t=(e||{}).mousewheel;if(e!==false&&t!==false)this._mousewheelZoom=new rr(this,t)},_toggleDragZoomEvents:function(){var e=this.options.pannable;var t=this.options.zoomable;var i=(t||{}).selection;var n=(t||{}).mousewheel;var r=!e&&(t===false||i===false)&&!this.requiresHandlers([zt,Bt,Ot]);var a=(t===false||n===false)&&!this.requiresHandlers([Lt,Rt,Ft]);var o=this.element;if(this._dragZoomEnabled&&r&&a){o.style.touchAction=this._touchAction||"";this._dragZoomEnabled=false}else if(!this._dragZoomEnabled&&!(r&&a)){o.style.touchAction="none";this._dragZoomEnabled=true}this._toggleDomEvents(!r,!a)},_toggleDomEvents:function(e,t){var i=this.domEvents;if(!i)return;if(i.toggleDrag)i.toggleDrag(e);if(i.toggleZoom)i.toggleZoom(t)},_createTooltip:function(){var e=this;var t=e.options.tooltip;var i;if(this._sharedTooltip())i=this._createSharedTooltip(t);else i=new mr(this.chartService,t);return i},_createSharedTooltip:function(e){return new _r(this._plotArea,e)},applyDefaults:function(e,t){Ma(e,t);Da(e,t)},applySeriesColors:function(){var e=this.options;var t=e.series;var i=e.seriesColors||[];for(var n=0;n<t.length;n++){var r=t[n];var a=i[n%i.length];var o=r._defaults;r.color=r.color||a;if(o)o.color=o.color||a}},_getModel:function(){var e=this.options;var t=this._createPlotArea();var i=new S.RootElement(this._modelOptions());i.chart=this;i._plotArea=t;S.Title.buildTitle(e.title,i);if(e.legend&&e.legend.visible)i.append(new cr(t.options.legend,this.chartService));i.append(t);i.reflow();return i},_modelOptions:function(){var e=this.options;var t=this.getSize();return x({transitions:e.transitions,width:t.width||T.DEFAULT_WIDTH,height:t.height||T.DEFAULT_HEIGHT},e.chartArea)},_createPlotArea:function(e){var t=this.options;var i=hr.current.create(e?[]:t.series,t,this.chartService);return i},_setupSelection:function(){var e=this;var t=this;var i=t._plotArea.axes;var n=this._selections=[];for(var r=0;r<i.length;r++){var a=i[r];var o=a.options;if(a instanceof q&&o.select&&!o.vertical){var s=a.range();var l=new gr(e,a,x({min:s.min,max:s.max},o.select));n.push(l)}}},_selectStart:function(e){return this.trigger(Vt,e)},_select:function(e){return this.trigger(Nt,e)},_selectEnd:function(e){return this.trigger(Ht,e)},_initHandlers:function(){this._clickHandler=this._click.bind(this);this._mousewheelHandler=this._mousewheel.bind(this);this._mouseleaveHandler=this._mouseleave.bind(this);this._surfaceMouseenterHandler=this._mouseover.bind(this);this._surfaceMouseleaveHandler=this._mouseout.bind(this);this._mousemove=kendo.throttle(this._mousemove.bind(this),Ca)},addObserver:function(e){if(e)this.observers.push(e)},removeObserver:function(e){var t=this.observers.indexOf(e);if(t>=0)this.observers.splice(t,1)},requiresHandlers:function(e){var t=this.observers;for(var i=0;i<t.length;i++)if(t[i].requiresHandlers(e))return true},trigger:function(e,t){if(t===void 0)t={};if(e===jt)t.anchor.point=this._toDocumentCoordinates(t.anchor.point);t.sender=this;var i=this.observers;var n=false;for(var r=0;r<i.length;r++)if(i[r].trigger(e,t))n=true;return n},_attachEvents:function(){var e=this.element;this._touchAction=e.style.touchAction;var t;n(e,(t={},t[xa]=this._clickHandler,t[Qt]=this._mousewheelHandler,t[ka]=this._mouseleaveHandler,t));if(this._shouldAttachMouseMove()){var i;n(e,(i={},i[wa]=this._mousemove,i))}this.domEvents=J.DomEventsBuilder.create(this.element,{start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)});this._toggleDragZoomEvents()},_mouseleave:function(e){if(this._hoveredPoint){this._hoveredPoint.out(this,e);this._hoveredPoint=null}if(this._plotArea.hovered){this.trigger(Pt);this._plotArea.hovered=false}},_cancelDomEvents:function(){if(this.domEvents&&this.domEvents.cancel)this.domEvents.cancel()},_gesturestart:function(e){if(this._mousewheelZoom&&!this._stopChartHandlers(e)){this._gestureDistance=e.distance;this._unsetActivePoint();this.surface.suspendTracking()}},_gestureend:function(e){if(this._zooming&&!this._stopChartHandlers(e)){if(this.surface)this.surface.resumeTracking();this._zooming=false;this.trigger(Ft,{})}},_gesturechange:function(e){var t=this._mousewheelZoom;if(t&&!this._stopChartHandlers(e)){e.preventDefault();var i=this._gestureDistance;var n=-e.distance/i+1;if(Math.abs(n)>=.1){n=Math.round(n*10);this._gestureDistance=e.distance;var r={delta:n,axisRanges:Ia(this._plotArea.axes),originalEvent:e};if(this._zooming||!this.trigger(Lt,r)){var a=this._eventCoordinates(e);if(!this._zooming)this._zooming=true;var o=r.axisRanges=t.updateRanges(n,a);if(o&&!this.trigger(Rt,r))t.zoom()}}}},_mouseout:function(e){if(e.element){var t=this._drawingChartElement(e.element,e);if(t&&t.leave)t.leave(this,e.originalEvent)}},_start:function(e){var t=this._eventCoordinates(e);if(this._stopChartHandlers(e)||!this._plotArea.backgroundContainsPoint(t))return;if(this.requiresHandlers([zt,Bt,Ot]))this._startNavigation(e,t,zt);if(this._pannable&&this._pannable.start(e)){this.surface.suspendTracking();this._unsetActivePoint();this._suppressHover=true;this.chartService.panning=true}if(this._zoomSelection)if(this._zoomSelection.start(e))this.trigger(Lt,{axisRanges:Ia(this._plotArea.axes),originalEvent:e})},_move:function(e){var t=this;var i=t._navState;var n=t._pannable;if(this._stopChartHandlers(e))return;if(n){var r=n.move(e);if(r&&!this.trigger(Bt,{axisRanges:r,originalEvent:e}))n.pan()}else if(i){var a={};var o=i.axes;for(var s=0;s<o.length;s++){var l=o[s];var c=l.options.name;if(c){var u=l.options.vertical?e.y:e.x;var h=u.startLocation-u.location;if(h!==0)a[l.options.name]=l.translateRange(h)}}i.axisRanges=a;this.trigger(Bt,{axisRanges:a,originalEvent:e})}if(this._zoomSelection)this._zoomSelection.move(e)},_end:function(e){if(this._stopChartHandlers(e))return;var t=this._pannable;if(t&&t.end(e)){this.surface.resumeTracking();this.trigger(Ot,{axisRanges:Ia(this._plotArea.axes),originalEvent:e});this._suppressHover=false;this.chartService.panning=false}else this._endNavigation(e,Ot);if(this._zoomSelection){var i=this._zoomSelection.end(e);if(i&&!this.trigger(Rt,{axisRanges:i,originalEvent:e})){this._zoomSelection.zoom();this.trigger(Ft,{axisRanges:i,originalEvent:e})}}},_stopChartHandlers:function(e){var t=this._selections||[];if(!t.length)return false;var i=this._eventCoordinates(e);var n=this._plotArea.paneByPoint(i);if(n)for(var r=0;r<t.length;r++)if(t[r].onPane(n))return true},_mousewheelZoomRate:function(){var e=this.options.zoomable;var t=(e||{}).mousewheel||{};return L(t.rate,Jt)},_mousewheel:function(e){var t=this;var i=S.mousewheelDelta(e);var n=this._mousewheelZoom;var r=this._eventCoordinates(e);if(this._stopChartHandlers(e)||!this._plotArea.backgroundContainsPoint(r))return;if(n){var a={delta:i,axisRanges:Ia(this._plotArea.axes),originalEvent:e};if(this._zooming||!this.trigger(Lt,a)){e.preventDefault();if(!this._zooming){this._unsetActivePoint();this.surface.suspendTracking();this._zooming=true}if(this._mwTimeout)clearTimeout(this._mwTimeout);a.axisRanges=n.updateRanges(i,r);if(a.axisRanges&&!this.trigger(Rt,a))n.zoom();this._mwTimeout=setTimeout(function(){t.trigger(Ft,a);t._zooming=false;if(t.surface)t.surface.resumeTracking()},Zt)}}else{var o=this._navState;if(!o){var c=this._startNavigation(e,r,Lt);if(!c)o=this._navState}if(o){var s=o.totalDelta||i;o.totalDelta=s+i;var l=this._navState.axes;var h={};for(var u=0;u<l.length;u++){var f=l[u];var d=f.options.name;if(d)h[d]=f.scaleRange(-s*t._mousewheelZoomRate(),r)}this.trigger(Rt,{delta:i,axisRanges:h,originalEvent:e});if(this._mwTimeout)clearTimeout(this._mwTimeout);this._mwTimeout=setTimeout(function(){t._endNavigation(e,Ft)},Zt)}}},_startNavigation:function(e,t,i){var n=this._model._plotArea;var r=n.findPointPane(t);var a=n.axes.slice(0);if(!r)return;var o=Ia(a);var s=this.trigger(i,{axisRanges:o,originalEvent:e});if(s)this._cancelDomEvents();else{this._suppressHover=true;this._unsetActivePoint();this._navState={axisRanges:o,pane:r,axes:a}}},_endNavigation:function(e,t){if(this._navState){this.trigger(t,{axisRanges:this._navState.axisRanges,originalEvent:e});this._suppressHover=false;this._navState=null}},_getChartElement:function(e,t){var i=this.surface.eventTarget(e);if(i)return this._drawingChartElement(i,e,t)},_drawingChartElement:function(e,t,i){var n=e;var r;while(n&&!r){r=n.chartElement;n=n.parent}if(r){if(r.aliasFor)r=r.aliasFor(t,this._eventCoordinates(t));if(i){r=r.closest(i);if(r&&r.aliasFor)r=r.aliasFor()}return r}},_eventCoordinates:function(e){var t=S.eventCoordinates(e);return this._toModelCoordinates(t.x,t.y)},_elementPadding:function(){if(!this._padding){var e=Q(this.element,["paddingLeft","paddingTop"]);var t=e.paddingLeft;var i=e.paddingTop;this._padding={top:i,left:t}}return this._padding},_toDocumentCoordinates:function(e){var t=this._elementPadding();var i=S.elementOffset(this.element);return{left:$(e.x+t.left+i.left),top:$(e.y+t.top+i.top)}},_toModelCoordinates:function(e,t){var i=this.element;var n=S.elementOffset(i);var r=this._elementPadding();var a=S.elementScale(i).invert();var o=new ue(e-n.left-r.left,t-n.top-r.top).transform(a);return new D(o.x,o.y)},_tap:function(e){var t=this;var i=this.surface.eventTarget(e);var n=this._drawingChartElement(i,e);var r=this._sharedTooltip();if(!this._startHover(i,e)&&!r)this._unsetActivePoint();if(r)this._trackSharedTooltip(this._eventCoordinates(e),e,true);this._propagateClick(n,e);this.handlingTap=true;setTimeout(function(){t.handlingTap=false},0)},_click:function(e){var t=this._getChartElement(e);this._propagateClick(t,e)},_propagateClick:function(e,t){var i=this;var n=e;while(n){if(n.click)n.click(i,t);n=n.parent}},_startHover:function(e,t){if(this._suppressHover)return false;var i=this._drawingChartElement(e,t,function(e){return(e.hover||e.over)&&!(e instanceof mn)});var n=this._activePoint;var r=this._plotArea.series.length>1;var a=this._hasInactiveOpacity();this._updateHoveredPoint(i,t);if(i&&n!==i&&i.hover){this._activePoint=i;if(!this._sharedTooltip()&&!i.hover(this,t)){this._displayTooltip(i);if(a)this._displayInactiveOpacity(i,r);else this._highlight.show(i)}}else if(!i&&a){if(r&&this._activeChartInstance){this._updateSeriesOpacity(i,true);this._applySeriesOpacity(this._activeChartInstance.children,null,true);this._activeChartInstance=null}this._highlight&&this._highlight.hide();this._activePoint=null}return i},_displayTooltip:function(e){var t=x({},this.options.tooltip,e.options.tooltip);if(t.visible)this._tooltip.show(e)},_displayInactiveOpacity:function(e,t,i){var n=this._activeChartInstance=this._chartInstanceFromPoint(e);if(!n)return;if(t){this._updateSeriesOpacity(e);this._applySeriesOpacity(n.children,null,true);this._applySeriesOpacity(n.children,e.series);this._highlight.show(i||e)}else{var r;if(!n.supportsPointInactiveOpacity()){this._highlight.show(e);return}r=this._getInactivePoints(e,n);if(r&&r.length)this._highlight.show(r,1-this._getInactiveOpacityForSeries(e.series))}},_getInactivePoints:function(t,e){var i=this._getAllPointsOfType(e,t.constructor);return i.filter(function(e){return e!==t})},_getAllPointsOfType:function(e,t){var i=this;var n=[];for(var r=0;r<e.children.length;r++){var a=e.children[r];if(a.constructor===t)n.push(a);else if(a.children&&a.children.length)n=n.concat(i._getAllPointsOfType(a,t))}return n},_updateHoveredPoint:function(e,t){var i=this._hoveredPoint;if(i&&i!==e){i.out(this,t);this._hoveredPoint=null}if(e&&i!==e&&e.over){this._hoveredPoint=e;e.over(this,t)}},_updateSeriesOpacity:function(e,t){var i=this;var n=this._plotArea;var r=n.series.length;for(var a=0;a<r;a++){var o=n.series[a];var s=i._getDefaultOpacityForSeries(o);var l=i._getInactiveOpacityForSeries(o);if(!t&&o!==e.series){o.defaultOpacity=s;o.opacity=l;if(o.line)o.line.opacity=l}else{o.opacity=s;if(o.line)o.line.opacity=s}}},_applySeriesOpacity:function(e,t,i,n){var r=this;for(var a=0;a<e.length;a++){var o=e[a];var s=o.series||n;var l=s&&(s.highlight||{}).visible;if(l&&o.visual){var u=n?n.opacity:o.series.opacity;if(s!==t||i)o.visual.opacity(i?1:u)}if(o.children&&o.children.length)r._applySeriesOpacity(o.children,t,i,o.series)}},_chartInstanceFromPoint:function(e){var t=e.parent;while(t&&!t.plotArea)t=t.parent;return t},_hasInactiveOpacity:function(){var e=this.options.seriesDefaults.highlight.inactiveOpacity!==undefined;var t=this.options.series.filter(function(e){return e.highlight.inactiveOpacity!==undefined}).length>0;return e||t},_getInactiveOpacityForSeries:function(e){var t=this.options.seriesDefaults.highlight.inactiveOpacity;var i=e.highlight.inactiveOpacity;return i||t||e.opacity||T.DEFAULT_SERIES_OPACITY},_getDefaultOpacityForSeries:function(e){return e.defaultOpacity||e.opacity||T.DEFAULT_SERIES_OPACITY},_mouseover:function(e){var t=this._startHover(e.element,e.originalEvent);if(t&&t.tooltipTracking&&!this._mouseMoveTrackHandler&&!this._sharedTooltip()){this._mouseMoveTrackHandler=this._mouseMoveTracking.bind(this);var i;n(document,(i={},i[wa]=this._mouseMoveTrackHandler,i))}},_mouseMoveTracking:function(e){var t=this;var i=t.options;var n=t._tooltip;var r=t._highlight;var a=t._activePoint;var o=this._eventCoordinates(e);if(this._plotArea.box.containsPoint(o)){if(a&&a.tooltipTracking&&a.series&&a.parent.getNearestPoint){var s=a.parent.getNearestPoint(o.x,o.y,a.seriesIx);if(s&&s!==a){this._activePoint=s;if(!s.hover(this,e)){var l=x({},i.tooltip,s.options.tooltip);if(l.visible)n.show(s);r.show(s)}}}}else{var u;ee(document,(u={},u[wa]=this._mouseMoveTrackHandler,u));this._unsetActivePoint();this._mouseMoveTrackHandler=null}},_mousemove:function(e){var t=this._eventCoordinates(e);var i=this._plotArea;this._trackCrosshairs(t);if(i.hover){var n=i.backgroundContainsPoint(t);if(n){i.hovered=true;this._plotArea.hover(this,e)}else if(i.hovered&&!n){this.trigger(Pt);i.hovered=false}}if(this._sharedTooltip())this._trackSharedTooltip(t,e)},_trackCrosshairs:function(e){var t=this._plotArea.crosshairs;for(var i=0;i<t.length;i++){var n=t[i];if(n.box.containsPoint(e))n.showAt(e);else n.hide()}},_trackSharedTooltip:function(e,c,t){if(this._suppressHover)return;var i=this;var h=i.options.tooltip;var n=i._plotArea;var f=i._plotArea.categoryAxis;var r=i._tooltip;var a=i._highlight;if(n.backgroundContainsPoint(e)){var o=f.pointCategoryIndex(e);if(o!==this._tooltipCategoryIx||!this._sharedHighlight&&t){var s=n.pointsByCategoryIndex(o);var l=s.map(function(e){return e.eventArgs(c)});var u=l[0]||{};u.categoryPoints=l;if(s.length>0&&!this.trigger(At,u)){if(h.visible)r.showAt(s,e);a.show(s);this._sharedHighlight=true}else r.hide();this._tooltipCategoryIx=o}else if(t&&this._sharedHighlight){a.hide();r.hide();this._sharedHighlight=false}}else if(this._sharedHighlight){a.hide();r.hide();this._tooltipCategoryIx=null;this._sharedHighlight=false}},hideElements:function(e){var t=this._plotArea;this._mousemove.cancel();t.hideCrosshairs();this._unsetActivePoint(e)},_unsetActivePoint:function(e){var t=this;var i=t._tooltip;var n=t._highlight;this._activePoint=null;this._hoveredPoint=null;if(i&&!(e&&e.keepTooltipOpen))i.hide();this._tooltipCategoryIx=null;this._sharedHighlight=false;if(n)n.hide()},_deferRedraw:function(){this._redraw()},_clearRedrawTimeout:function(){if(this._redrawTimeout){clearInterval(this._redrawTimeout);this._redrawTimeout=null}},bindCategories:function(){var e=this;var t=this.options;var i=[].concat(t.categoryAxis);for(var n=0;n<i.length;n++){var r=i[n];if(r.autoBind!==false)e.bindCategoryAxisFromSeries(r,n)}},bindCategoryAxisFromSeries:function(e,c){var h=this;var t=this.options.series;var f=t.length;var d=new S.HashMap;var i=[];var n=false;var r;for(var a=0;a<f;a++){var o=t[a];var p=o.categoryAxis===e.name||!o.categoryAxis&&c===0;var s=o.data;var v=s.length;var g=o.categoryField&&p;n=g||n;if(g&&v>0){r=cn(e,me(o.categoryField,s[0]));var m=r?un:me;for(var l=0;l<v;l++){var _=s[l];var u=m(o.categoryField,_,h.chartService.intl);if(r||!d.get(u)){i.push([u,_]);if(!r)d.set(u,true)}}}}if(i.length>0){if(r)i=Ba(i,function(e,t){return S.dateComparer(e[0],t[0])});var y=Oa(i);e.categories=y[0]}else if(n)e.categories=[]},_isBindable:function(e){var t=_e.current.valueFields(e);var i=true;for(var n=0;n<t.length;n++){var r=t[n];if(r===c)r="field";else r=r+"Field";if(!M(e[r])){i=false;break}}return i},_noTransitionsRedraw:function(){var e=this.options;var t;if(e.transitions!==false){e.transitions=false;t=true}this._redraw();if(t)e.transitions=true},_legendItemHover:function(t,i){var e=this;var n=e._plotArea;var r=e._highlight;var a=(n.srcSeries||n.series)[t];var o;if(k(a.type,[rt,Ze,Je]))o=n.findPoint(function(e){return e.series.index===t&&e.index===i});else o=n.pointsBySeriesIndex(t);if(this._hasInactiveOpacity()&&a.visible&&o){var s=n.series.length>1;var l=o.length?o[0]:o;this._displayInactiveOpacity(l,s,o)}else r.show(o)},_shouldAttachMouseMove:function(){return this._plotArea.crosshairs.length||this._tooltip&&this._sharedTooltip()||this.requiresHandlers([It,Pt])},updateMouseMoveHandler:function(){var e;ee(this.element,(e={},e[wa]=this._mousemove,e));if(this._shouldAttachMouseMove()){var t;n(this.element,(t={},t[wa]=this._mousemove,t))}},applyOptions:function(e,t){La(this._originalOptions,e);this._originalOptions=x(this._originalOptions,e);this.options=x({},this._originalOptions);if(t){this._theme=t;this.chartService.theme=t}this._initTheme(this.options,this._theme);this._toggleDragZoomEvents()},setOptions:function(e,t){this.applyOptions(e,t);this.bindCategories();this.redraw();this.updateMouseMoveHandler()},setDirection:function(e){this.chartService.rtl=Boolean(e);if(this.surface&&this.surface.type==="svg")this._destroySurface()},setIntlService:function(e){this.chartService.intl=e},noTransitionsRedraw:function(){this._noTransitionsRedraw()},destroy:function(){this._destroyed=true;var e;ee(this.element,(e={},e[xa]=this._clickHandler,e[Qt]=this._mousewheelHandler,e[wa]=this._mousemove,e[ka]=this._mouseleaveHandler,e));if(this.domEvents){this.domEvents.destroy();delete this.domEvents}if(this._mouseMoveTrackHandler){var t;ee(document,(t={},t[wa]=this._mouseMoveTrackHandler,t))}this._destroyView();this._destroySurface();this._clearRedrawTimeout()},_destroySurface:function(){var e=this.surface;if(e){e.unbind("mouseenter",this._surfaceMouseenterHandler);e.unbind("mouseleave",this._surfaceMouseleaveHandler);e.destroy();this.surface=null}},_destroySelections:function(){var e=this._selections;if(e)while(e.length>0)e.shift().destroy()},_destroyView:function(){var e=this._model;if(e){e.destroy();this._model=null}this._unsetActivePoint();this._destroySelections();if(this._tooltip)this._tooltip.destroy();if(this._highlight)this._highlight.destroy();if(this._zoomSelection){this._zoomSelection.destroy();delete this._zoomSelection}if(this._pannable){this._pannable.destroy();delete this._pannable}if(this._mousewheelZoom){this._mousewheelZoom.destroy();delete this._mousewheelZoom}}});function Ta(e){var t=ba;for(var i=0;i<t.length;i++){var n=t[i]+"Axes";if(e[n]){e[t[i]+"Axis"]=e[n];delete e[n]}}}function Aa(e,t){if(e)for(var i=0;i<e.length;i++)if(e[i].category===t)return[e[i]]}function Ma(e,t){var n=(t||{}).axisDefaults||{};var r,a,i;function o(e){var t=(e||{}).color||a.color;var i=x({},n,n[r],a,a[r],{line:{color:t},labels:{color:t},title:{color:t}},e);delete i[r];return i}for(var s=0;s<ba.length;s++){r=ba[s]+"Axis";a=e.axisDefaults||{};i=[].concat(e[r]);i=i.map(o);e[r]=i.length>1?i:i[0]}}function Da(e,t){var i=e.series;var n=i.length;var c=e.seriesDefaults;var r=x({},e.seriesDefaults);var a=t?x({},t.seriesDefaults):{};var o=x({},a);Ea(r);Ea(o);for(var s=0;s<n;s++){var l=i[s].type||e.seriesDefaults.type;var u=x({data:[]},o,a[l],{tooltip:e.tooltip},r,c[l]);i[s]._defaults=u;i[s]=x({},u,i[s]);i[s].data=i[s].data||[]}}function Ea(e){delete e.bar;delete e.column;delete e.rangeColumn;delete e.line;delete e.verticalLine;delete e.pie;delete e.donut;delete e.area;delete e.verticalArea;delete e.scatter;delete e.scatterLine;delete e.bubble;delete e.candlestick;delete e.ohlc;delete e.boxPlot;delete e.bullet;delete e.verticalBullet;delete e.polarArea;delete e.polarLine;delete e.radarArea;delete e.radarLine;delete e.waterfall}function Ia(e){var t={};for(var i=0;i<e.length;i++){var n=e[i];var r=n.options.name;if(r)t[r]=n.range()}return t}function Pa(e,t){if(t===void 0)t=S.dateComparer;for(var i=1,n=e.length;i<n;i++)if(t(e[i],e[i-1])<0){e.sort(t);break}return e}function Ba(e,t){if(t===void 0)t=S.dateComparer;var i=Pa(e,t);var n=i.length;var r=n>0?[i[0]]:[];for(var a=1;a<n;a++)if(t(i[a],R(r))!==0)r.push(i[a]);return r}function Oa(e){var t=e.length;var i=[];for(var n=0;n<t;n++){var r=e[n];var a=r.length;for(var o=0;o<a;o++){i[o]=i[o]||[];i[o].push(r[o])}}return i}var za=["data","categories"];function La(e,t){for(var i in t)if(!k(i,za)&&t.hasOwnProperty(i)){var n=t[i];var r=e[i];if(M(r)){var a=n===null;if(a||!M(n)){delete e[i];if(a)delete t[i]}else if(r&&C(n))if(C(r))La(r,n)}}}function Ra(e){for(var t=0;t<e.length;t++)e[t].notifyRender()}e(Sa,{renderAs:"",chartArea:{},legend:{visible:true,labels:{}},categoryAxis:{},seriesDefaults:{type:Qe,data:[],highlight:{visible:true},labels:{},negativeValues:{visible:false}},series:[],seriesColors:null,tooltip:{visible:false},transitions:true,valueAxis:{},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}],pannable:false,zoomable:false}),kendo.deepExtend(kendo.dataviz,{constants:ei,Aggregates:ge,AreaChart:Ci,AreaSegment:wi,AxisGroupRangeTracker:Si,Bar:Di,BarChart:Oi,BarLabel:Ti,BoxPlotChart:Ni,BoxPlot:Fi,BubbleChart:Wi,Bullet:Yi,BulletChart:$i,CandlestickChart:Ri,Candlestick:zi,CategoricalChart:si,CategoricalErrorBar:ni,CategoricalPlotArea:Gn,Chart:Sa,ChartContainer:Ji,ClipAnimation:mi,ClusterLayout:Pi,Crosshair:Zi,CrosshairTooltip:Qi,DefaultAggregates:Tn,DonutChart:Rr,DonutPlotArea:Fr,DonutSegment:zr,ErrorBarBase:ii,ErrorRangeCalculator:ke,Highlight:Yn,SharedTooltip:_r,Legend:cr,LegendItem:or,LegendLayout:ar,LineChart:bi,LinePoint:ci,LineSegment:hi,Pane:en,PieAnimation:xr,PieChart:Pr,PieChartMixin:Er,PiePlotArea:Or,PieSegment:Tr,PlotAreaBase:mn,PlotAreaEventsMixin:kn,PlotAreaFactory:hr,PointEventsMixin:li,RangeBar:An,RangeBarChart:Mn,RangeAreaPoint:Bn,RangeAreaChart:Rn,ScatterChart:ji,ScatterErrorBar:Hi,ScatterLineChart:kr,Selection:gr,SeriesAggregator:Cn,SeriesBinder:_e,SplineSegment:vi,SplineAreaSegment:ki,StackWrap:Bi,Tooltip:mr,OHLCChart:Vn,OHLCPoint:Fn,WaterfallChart:Hn,WaterfallSegment:Nn,XYPlotArea:Cr,MousewheelZoom:rr,ZoomSelection:Zn,Pannable:Qn,ChartAxis:he,ChartPane:de,ChartPlotArea:pe,findAxisByName:fe,anyHasZIndex:_i,appendIfNotNull:rn,areNumbers:Li,bindSegments:on,categoriesCount:oi,countNumbers:ve,equalsIgnoreCase:sn,evalOptions:ai,filterSeriesByType:ln,getDateField:un,getField:me,hasGradientOverlay:Ai,hasValue:Ui,isDateAxis:cn,segmentVisible:an,singleItemOrArray:hn,createOutOfRangePoints:gn})})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/chart/chart.min",["./kendo-chart.min","kendo.data.min","kendo.dataviz.core.min","kendo.dataviz.themes.min","kendo.drawing.min","kendo.userevents.min"],function(){var f=window.kendo.jQuery,h=void 0,n=".kendoChart",d=window.kendo,t=d.Class,p=d._outerWidth,v=d._outerHeight,s=d.dataviz,e=s.constants,i=s.Chart,o=s.SeriesBinder,r=d.ui.Widget,g=d.data.DataSource,l=d.deepExtend,u=s.defined,m=s.getField,_=s.InstanceObserver,y=s.inArray,b=s.services,w=Array.isArray,x=f.extend,c=d.template,k="mouseleave"+n,C=e.AXIS_LABEL_CLICK,S=e.LEGEND_ITEM_CLICK,T=e.LEGEND_ITEM_HOVER,A=e.LEGEND_ITEM_LEAVE,M=e.SERIES_CLICK,D=e.SERIES_HOVER,E=e.SERIES_OVER,I=e.SERIES_LEAVE,P=e.PANE_RENDER,B=e.PLOT_AREA_CLICK,O=e.PLOT_AREA_HOVER,z=e.PLOT_AREA_LEAVE,L=e.DRAG,R=e.DRAG_END,F=e.DRAG_START,V=e.ZOOM_START,N=e.ZOOM,H=e.ZOOM_END,U=e.SELECT_START,j=e.SELECT,G=e.SELECT_END,W=e.RENDER,q=e.NOTE_CLICK,Y=e.NOTE_HOVER,$=e.NOTE_LEAVE,X=f(document.documentElement),K="change",Q="dataBound",Z="leave",J="down",ee=e.VALUE,te=e.PIE,ie=e.DONUT,ne=e.FUNNEL,re=d.Observable,ae=150,oe=100,se="k-chart-tooltip-inverse",le="k-chart-shared-tooltip",ue="rtl",ce=(b.DomEventsBuilder.register({create:function(e,t){return new d.UserEvents(e,l({global:true,multiTouch:true,fastTap:true},t))}}),_.extend({handlerMap:{showTooltip:"_showTooltip",hideTooltip:"_hideTooltip",legendItemClick:"_onLegendItemClick",render:"_onRender",init:"_onInit"}})),he=r.extend({init:function(e,t){var i;d.destroy(e);r.fn.init.call(this,e);if(t){i=t.dataSource;delete t.dataSource}this.options=l({},this.options,t);this.wrapper=this.element;this._attachEvents();if(t)t.dataSource=i;this._seriesVisibility=new ge;this.bind(this.events,this.options);this._initDataSource(t);d.notify(this,s.ui)},events:[Q,M,D,E,I,C,S,T,A,P,B,O,z,F,L,R,V,N,H,U,j,G,q,Y,$,W],options:{name:"Chart",renderAs:"",theme:"default",axisDefaults:{},chartArea:{},legend:{},categoryAxis:{},autoBind:true,seriesDefaults:{},series:[],seriesColors:null,tooltip:{},transitions:true,valueAxis:{},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}],pannable:false,zoomable:false},items:function(){return f()},refresh:function(){var e=this;var t=e._instance;t.applyDefaults(e.options);t.applySeriesColors();e._bindSeries();e._bindCategories();e.trigger(Q);e._redraw()},getSize:function(){return d.dimensions(this.element)},redraw:function(e){this._size=null;this._instance.redraw(e)},setOptions:function(e){var t=this,i=e.dataSource;delete e.dataSource;r.fn._setEvents.call(t,e);this._instance.applyOptions(e,this._getThemeOptions(e));this.options=this._instance.options;this._tooltip.setOptions(this.options.tooltip);this._seriesVisibility.setOptions(this.options);this._sourceSeries=null;if(i)t.setDataSource(i);if(t._hasDataSource)t._onDataChanged();else{t._bindCategories();t.redraw()}t._instance.updateMouseMoveHandler()},setDataSource:function(e){var t=this;t.dataSource.unbind(K,t._dataChangeHandler);t.dataSource=e=g.create(e);t._hasDataSource=true;t._hasData=false;e.bind(K,t._dataChangeHandler);if(t.options.autoBind)e.fetch()},destroy:function(){var e=this,t=e.dataSource;e.element.off(n);if(t)t.unbind(K,e._dataChangeHandler);if(e._instance){e._instance.destroy();delete this._instance}if(this._tooltip){this._tooltip.destroy();delete this._tooltip}this._destroyCrosshairTooltips();r.fn.destroy.call(e)},findPaneByName:function(e){var t=this._plotArea.panes;for(var i=0;i<t.length;i++)if(t[i].options.name===e)return new be(this,t[i])},findPaneByIndex:function(e){var t=this._plotArea.panes;if(t[e])return new be(this,t[e])},findSeries:function(e){var t=this._plotArea;var i=t.srcSeries||t.series;for(var n=0;n<i.length;n++)if(e(i[n]))return new we(this,i[n])},findSeriesByName:function(e){return this._createSeries({name:e})},findSeriesByIndex:function(e){return this._createSeries({index:e})},exportVisual:function(e){var t=this._instance;if(!t)return;var i;if(e&&(e.width||e.height)){var n=t.options.chartArea;var r=t._originalOptions.chartArea;l(n,e);var a=t._getModel();n.width=r.width;n.height=r.height;a.renderVisual();xe(a._plotArea.panes);i=a.visual}else i=t.exportVisual();return i},_createSeries:function(e){var t=this._seriesOptions(e);if(t)return new we(this,t)},_seriesOptions:function(e){var t=this._plotArea;var i=t.srcSeries||t.series;var n;if(u(e.index))n=i[e.index];else if(u(e.name))for(var r=0;r<i.length;r++)if(i[r].name===e.name){n=i[r];break}return n},_attachEvents:function(){this.element.on(k,this._mouseleave.bind(this))},_mouseleave:function(e){var t=this._instance;var i=this._tooltip;var n=e.relatedTarget;if(!(n&&f(n).closest(i.element).length)&&t&&!t.handlingTap)t.hideElements({keepTooltipOpen:!i.options.autoHide})},_getThemeOptions:function(e){var t=(e||{}).theme;if(t&&s.SASS_THEMES.indexOf(t.toLowerCase())!==-1)return s.autoTheme().chart;if(u(t)){var i=s.ui.themes||{};var n=i[t]||i[t.toLowerCase()]||{};return n.chart||{}}},_initChart:function(){this._createChart(this.options,this._getThemeOptions(this.options));this.options=this._instance.options;this._seriesVisibility.setOptions(this.options)},_createChart:function(e,t){this._instance=new i(this.element[0],e,t,{observer:new ce(this),sender:this,rtl:this._isRtl()})},_onInit:function(e){this._instance=e.sender},_initDataSource:function(e){var t=this,i=(e||{}).dataSource;t._dataChangeHandler=t._onDataChanged.bind(t);t.dataSource=g.create(i).bind("change",t._dataChangeHandler);t._bindCategories();if(i)t._hasDataSource=true;this._initChart();this._initTooltip();if(i)if(t.options.autoBind)t.dataSource.fetch()},_destroyCrosshairTooltips:function(){var e=this._crosshairTooltips;if(e)for(var t in e)e[t].destroy();this._crosshairTooltips={}},_getCrosshairTooltip:function(e,t){var i=this._crosshairTooltips=this._crosshairTooltips||{};var n=e+t;var r=i[n];if(!r)r=i[n]=new ye(this.element);return r},_showTooltip:function(e){if(e.crosshair){var t=this._getCrosshairTooltip(e.axisName,e.axisIndex);t.show(e)}else if(this._tooltip)this._tooltip.show(e)},_hideTooltip:function(e){if(e.crosshair){var t=this._getCrosshairTooltip(e.axisName,e.axisIndex);t.hide()}else if(this._tooltip)this._tooltip.hide()},_onRender:function(e){this._destroyCrosshairTooltips();this._copyMembers(e.sender);if(!this._hasDataSource||this._hasData||!this.options.autoBind)this.trigger(W)},_copyMembers:function(e){this.options=e.options;this._originalOptions=e._originalOptions;this.surface=e.surface;this._plotArea=e._plotArea;this._model=e._model;this._highlight=e._highlight;this._selections=e._selections;this._pannable=e._pannable;this._zoomSelection=e._zoomSelection;this._mousewheelZoom=e._mousewheelZoom},requiresHandlers:function(e){var t=this._events;for(var i=0;i<e.length;i++)if(u(t[e[i]]))return true},_initTooltip:function(){this._tooltip=this._createTooltip();this._tooltip.bind(Z,this._tooltipleave.bind(this))},_onLegendItemClick:function(e){if(!this.trigger(S,e))this._legendItemClick(e.seriesIndex,e.pointIndex)},_legendItemClick:function(e,t){var i=this._instance,n=i._plotArea,r=(n.srcSeries||n.series)[e];if(i._hasInactiveOpacity()&&i._activeChartInstance){i._updateSeriesOpacity(null,true);i._applySeriesOpacity(i._activeChartInstance.children,null,true);i._activeChartInstance=null}if(f.inArray(r.type,[te,ie,ne])>=0){var a=r.data[t];if(a&&u(a.visible))a.visible=!a.visible;else{var o=r.pointVisibility=r.pointVisibility||{};var s=o[t];o[t]=u(s)?!s:false}}else{r.visible=!r.visible;this._seriesVisibility.save(r)}i._noTransitionsRedraw()},_createTooltip:function(){return new a(this.element,x({},this.options.tooltip,{rtl:this._isRtl()}))},_tooltipleave:function(){if(this._instance)this._instance.hideElements()},_bindData:function(e){var t=this,i=t.options,n=t._sourceSeries||i.series,r,a=n.length,c=t.dataSource.view(),h=(t.dataSource.group()||[]).length>0,o=[],s=this._seriesVisibility,l,u;s.read();for(r=0;r<a;r++){l=n[r];if(t._isBindable(l)&&h){u=ve(l,c);o=o.concat(u);s.applyByGroup(u,e)}else{l=x({},l);o.push(l);s.applyByIndex(l,e)}}t._sourceSeries=n;i.series=o;this._instance.applySeriesColors();t._bindSeries();t._bindCategories();this._hasData=true},_onDataChanged:function(e){this._bindData(e);this.trigger(Q);if(this._instance&&this._instance.fontLoaded)this._redraw()},_bindSeries:function(){var e=this,t=e.dataSource.view(),i=e.options.series,n,r=i.length,a,o,s;for(n=0;n<r;n++){a=i[n];if(e._isBindable(a)){o=a._groupIx;s=u(o)?(t[o]||{}).items:t;if(a.autoBind!==false)a.data=s}}},_bindCategories:function(){var e=this,t=e.dataSource.view()||[],i=(e.dataSource.group()||[]).length>0,n=t,r=e.options,a=[].concat(r.categoryAxis),o,s;if(i)if(t.length)n=t[0].items;for(o=0;o<a.length;o++){s=a[o];if(s.autoBind!==false)e._bindCategoryAxis(s,n,o)}},_bindCategoryAxis:function(e,t,i){var n=(t||[]).length,r,a,o;if(e.field){e.categories=[];for(r=0;r<n;r++){o=t[r];a=m(e.field,o);if(r===0){e.categories=[a];e.dataItems=[o]}else{e.categories.push(a);e.dataItems.push(o)}}}else if(this._instance)this._instance.bindCategoryAxisFromSeries(e,i)},_isBindable:function(e){var t=o.current.valueFields(e),i=true,n,r;for(r=0;r<t.length;r++){n=t[r];if(n===ee)n="field";else n=n+"Field";if(!u(e[n])){i=false;break}}return i},_isRtl:function(){return d.support.isRtl(this.element)&&this.element.css("direction")===ue}}),fe=["getAxis","findAxisByName","plotArea","toggleHighlight","showTooltip","hideTooltip","_resize","_redraw","_noTransitionsRedraw","_legendItemHover","_eventCoordinates"];function de(t){he.fn[t]=function(){var e=this._instance;if(e)return e[t].apply(e,arguments)}}for(var pe=0;pe<fe.length;pe++)de(fe[pe]);function ve(e,t){var i=[],n,r=e.groupNameTemplate,a,o=t.length,s;if(o===0){s=l({},e);s.visibleInLegend=false;return[s]}if(u(r)){d.logToConsole("'groupNameTemplate' is obsolete and will be removed in future versions. "+"Specify the group name template as 'series.name'");if(r)n=c(r)}else{n=c(e.name||"");if(n._slotCount===0)n=c(u(e.name)?"#= group.value #: #= series.name #":"#= group.value #")}for(a=0;a<o;a++){s=l({},e);if(!d.isFunction(s.color))s.color=h;s._groupIx=a;s._groupValue=t[a].value;i.push(s);if(n)s.name=n({series:s,group:t[a]})}return i}if(s.ExportMixin.extend(he.fn),d.PDFMixin)d.PDFMixin.extend(he.fn);s.ui.plugin(he);var ge=t.extend({init:function(){this.groups={};this.index={};this.options={}},applyByGroup:function(e,t){if(t&&t.action||this.options.persistSeriesVisibility){for(var i=0;i<e.length;i++)if(this.groups[e[i]._groupValue]===false)e[i].visible=false}else this.groups={}},applyByIndex:function(e,t){if(t&&t.action||this.options.persistSeriesVisibility){if(this.index[e.index]===false)e.visible=false}else this.index={}},save:function(e){if(!e)return;if(this.options.persistSeriesVisibility)this.options.series[e.index].visible=e.visible;else this.saveState(e)},setOptions:function(e){this.options=e;this.groups={};this.index={}},read:function(){var e=this.options;if(e.persistSeriesVisibility){var t=e.series;for(var i=0;i<t.length;i++)this.saveState(t[i])}},saveState:function(e){if(u(e._groupValue))this.groups[e._groupValue]=e.visible;else this.index[e.index]=e.visible}}),me=d.geometry;function _e(e){for(var t in e)if(e[t]===h)e[t]="";return e}var a=re.extend({init:function(e,t){var i=this;re.fn.init.call(i);this.setOptions(t);i.chartElement=e;i.template=a.template;if(!i.template)i.template=a.template=d.template('<div class=\'k-tooltip #if (!d.autoHide) {# k-tooltip-closable#}# k-chart-tooltip#= d.rtl ? " k-rtl" : ""#\' '+"style='display:none; position: absolute; font: #= d.font #;"+"#if (d.border) {# border: #= d.border.width #px solid; #}#"+"opacity: #= d.opacity #;'>"+'<div class="k-tooltip-content"></div>'+'#if (!d.autoHide) {# <div class="k-tooltip-button"><a href="\\#" class="k-icon k-i-close" title="Close"></a></div> #}#'+"</div>",{useWithBlock:false,paramName:"d"});i.element=f(i.template(i.options));i.move=i.move.bind(i);i._mouseleave=i._mouseleave.bind(i);var n=d.format("[{0}='content'],[{0}='scroller']",d.attr("role"));i._mobileScroller=e.closest(n).data("kendoMobileScroller");i.downEvent=d.applyEventMap(J,d.guid());i._closeTooltipHandler=i._closeTooltip.bind(i)},destroy:function(){var e=this;this._clearShowTimeout();X.off(e.downEvent,e._closeTooltipHandler);if(this.element){this.element.off(k).remove();this.element=null}},setOptions:function(e){this.options=l({},this.options,e)},options:{opacity:1,animation:{duration:ae},sharedTemplate:"<table>"+"<th colspan='#= colspan #'>#= categoryText #</th>"+"# for(var i = 0; i < points.length; i++) { #"+"# var point = points[i]; #"+"<tr>"+"# if(colorMarker) { # "+"<td><span class='k-chart-shared-tooltip-marker' style='background-color:#:point.series.color#'></span></td>"+"# } #"+"# if(nameColumn) { # "+"<td> #if (point.series.name) {# #: point.series.name #: #} else {# &nbsp; #}#</td>"+"# } #"+"<td>#= content(point) #</td>"+"</tr>"+"# } #"+"</table>",categoryFormat:"{0:d}",autoHide:true},move:function(){var e=this,t=e.options,i=e.element,n;if(!e.anchor||!e.element)return;n=e._offset();if(!e.visible)i.css({top:n.top,left:n.left});e.visible=true;e._ensureElement(document.body);i.stop(true,true).show().animate({left:n.left,top:n.top},t.animation.duration)},_clearShowTimeout:function(){if(this.showTimeout){clearTimeout(this.showTimeout);this.showTimeout=null}},getAnchor:function(e){var t=this.anchor;var i=t.point;var n=t.align;var r=i.left;var a=i.top;if(n.horizontal==="center")r-=e.width/2;else if(n.horizontal==="right")r-=e.width;if(n.vertical==="center")a-=e.height/2;else if(n.vertical==="bottom")a-=e.height;return{x:r,y:a}},_offset:function(){var e=this,t=e._measure(),i=e.getAnchor(t),n=i.y,r=i.x,a=d.support.zoomLevel(),o=f(window),s=window.pageYOffset||document.documentElement.scrollTop||0,c=window.pageXOffset||document.documentElement.scrollLeft||0,l=(this._mobileScroller||{}).movable;if(!l||l.scale===1){n+=e._fit(n-s,t.height,v(o)/a);r+=e._fit(r-c,t.width,p(o)/a)}else{var h=me.transform().scale(l.scale,l.scale,[l.x,l.y]);var u=new me.Point(r,n).transform(h);r=u.x;n=u.y}return{top:n,left:r}},show:function(e){var t=this;this.anchor=e.anchor;this.element.css(_e(e.style));this.element.toggleClass(se,!!e.className);this.element.toggleClass(le,!!e.shared);var i=e.shared?this._sharedContent(e):this._pointContent(e.point);this.element.find(".k-tooltip-content").html(i);if(!t.options.autoHide){t.element.off("click"+n).on("click"+n,".k-tooltip-button",t._closeTooltipHandler);X.off(t.downEvent,t._closeTooltipHandler).on(t.downEvent,t._closeTooltipHandler)}this._clearShowTimeout();this.showTimeout=setTimeout(this.move,oe)},hide:function(e){var t=this;if(!t.options.autoHide&&!e)return;clearTimeout(t.showTimeout);t._hideElement();if(t.visible){t.point=null;t.visible=false;t.index=null;X.off(t.downEvent,t._closeTooltipHandler)}},_closeTooltip:function(e){var t=f(e.target);if(!t.is(".k-chart-tooltip, .k-tooltip-content")){e.preventDefault();this.chartElement.data("kendoChart")._instance.hideElements();this.hide(true)}},_sharedContent:function(e){var t=e.points;var i=s.grep(t,function(e){return u(e.series.name)}).length;var n=e.series.length>1;var r=1;if(i)r++;if(n)r++;var a=d.template(this.options.sharedTemplate);var o=a({points:t,category:e.category,categoryText:e.categoryText,content:this._pointContent,colorMarker:n,nameColumn:i,colspan:r});return o},_measure:function(){this._ensureElement();var e={width:p(this.element),height:v(this.element)};return e},_ensureElement:function(){if(this.element)this.element.appendTo(document.body).on(k,this._mouseleave)},_mouseleave:function(e){var t=e.relatedTarget;var i=this.chartElement[0];if(t&&t!==i&&!f.contains(i,t))this.trigger(Z)},_hideElement:function(){var e=this;var t=this.element;if(t)t.fadeOut({always:function(){if(!e.visible)t.off(k).remove()}})},_pointContent:function(e){var t=this,i=l({},t.options,e.options.tooltip),n,r;if(u(e.value))n=e.value.toString();if(i.template){r=c(i.template);n=r({value:e.value,category:e.category,series:e.series,dataItem:e.dataItem,percentage:e.percentage,runningTotal:e.runningTotal,total:e.total,low:e.low,high:e.high,xLow:e.xLow,xHigh:e.xHigh,yLow:e.yLow,yHigh:e.yHigh})}else if(i.format)n=e.formatValue(i.format);return n},_fit:function(e,t,i){var n=0;if(e+t>i)n=i-(e+t);if(e<0)n=-e;return n}}),ye=a.extend({init:function(e,t){a.fn.init.call(this,e,t);this.element.addClass("k-chart-crosshair-tooltip")},show:function(e){var t=this.element;if(t){this.anchor=e.anchor;this.element.css(e.style);this.element.html(this.content(e));this.move()}},move:function(){var e=this,t=e.element,i=e._offset();e._ensureElement();t.css({top:i.top,left:i.left}).show()},content:function(e){var t=e.value,i=e.crosshair.options.tooltip;if(i.template)t=c(i.template)({value:t});return t},hide:function(){this.element.hide()}}),be=t.extend({init:function(e,t){this._chart=e;this._pane=t;this.visual=t.visual;this.chartsVisual=t.chartContainer.visual;this.name=t.options.name},series:function(){var e=this._chart;var t=e._plotArea.groupSeriesByPane();var i=t[this.name||"default"];var n=[];if(i)for(var r=0;r<i.length;r++)n.push(new we(e,i[r]));return n}}),we=t.extend({init:function(e,t){this._chart=e;this._options=t},points:function(e){var t=this._points;if(!t){var i=this._seriesOptions();var n=this._chart._plotArea;this._points=t=n.pointsBySeriesIndex(i.index)}if(d.isFunction(e))t=this._filterPoints(t,e);return t},data:function(e){var t=this._seriesOptions();if(e){var i=this._chart;var n=i._plotArea;t.data=e;if(t.categoryField){var r=n.seriesCategoryAxis(t);var a=[].concat(i.options.categoryAxis);i._instance.bindCategoryAxisFromSeries(a[r.axisIndex],r.axisIndex)}i._noTransitionsRedraw();this._clearFields()}return t.data},findPoint:function(e){var t=this.points();for(var i=0;i<t.length;i++)if(e(t[i]))return t[i]},toggleHighlight:function(e,t){if(!t)t=this.points();else if(d.isFunction(t))t=this.points(t);else t=w(t)?t:[t];this._chart._instance.togglePointsHighlight(e,t)},toggleVisibility:function(t,i){var e=this._chart;var n=this._seriesOptions();var r=d.isFunction(i);if(!r){n.visible=t;e._seriesVisibility.save(n)}else if(y(n.type,[te,ie,ne])){var a=this._filterData(i);for(var o=0;o<a.length;o++)a[o].visible=t}else n.visible=function(e){return i(e.dataItem)?t:true};e._noTransitionsRedraw();this._clearFields()},_filterData:function(e){var t=this._seriesOptions().data;var i=t.length;var n=[];for(var r=0;r<i;r++)if(e(t[r]))n.push(t[r]);return n},_filterPoints:function(e,t){var i=[];var n=e.length;for(var r=0;r<n;r++)if(t(e[r]))i.push(e[r]);return i},_seriesOptions:function(){var e=this._series;if(!e)e=this._series=this._chart._seriesOptions(this._options);return e},_clearFields:function(){delete this._points;delete this._series}});function xe(e){for(var t=0;t<e.length;t++)e[t].notifyRender()}return s.Tooltip=a,s.CrosshairTooltip=ye,s.ChartInstanceObserver=ce,s.ChartPane=be,s.ChartSeries=we,window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.dataviz.chart.min",["./dataviz/chart/kendo-chart.min","./dataviz/chart/chart.min"],function(){var e={id:"dataviz.chart",name:"Chart",category:"dataviz",description:"The Chart widget uses modern browser technologies to render high-quality data visualizations in the browser.",depends:["data","userevents","drawing","dataviz.core","dataviz.themes"],features:[{id:"dataviz.chart-pdf-export",name:"PDF export",description:"Export Chart as PDF",depends:["pdf"]}]};return window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/gauge/kendo-gauges.min",["kendo.core.min","kendo.color.min","kendo.drawing.min","kendo.dataviz.core.min"],function(){var n=window.kendo.jQuery,d=(window.kendo.dataviz=window.kendo.dataviz||{},kendo.dataviz),B=d.getSpacing,D=d.defined,_=d.constants,t=_.BLACK,v=_.COORD_PRECISION,r=d.services,s=d.deepExtend,l=d.isArray,e=d.setDefaultOptions,a=d.NumericAxis,o=d.limitValue,E=d.Box,u=d.interpolateValue,p=d.round,i=kendo.drawing,c=i.Group,h=i.Path,f=i.Animation,g=i.AnimationFactory,m=kendo.geometry,I=m.Rect,P=m.Point,O=m.transform,y=150,b=250,w="arrow",x="arrowPointer",k="barPointer",C=200,S=.5,T=200,z=Math.PI/180,L="inside",A="linear",M="outside",R="radialPointer",F="radialRangePointer";function V(e,t){var i=e.getOrigin();var n=e.getSize();var r=B(t);e.setOrigin([i.x-r.left,i.y-r.top]);e.setSize([n.width+(r.left+r.right),n.height+(r.top+r.bottom)]);return e}var N=c,H=h,U=i.Text;function j(e,t){var i=e.box;var n=e.children[0].box;var r=t.border||{};var a=t.background||"";var o=H.fromRect(new I([i.x1,i.y1],[i.width(),i.height()]),{stroke:{}});var s=new U(e.text,new P(n.x1,n.y1),{font:t.font,fill:{color:t.color}});var l=V(s.bbox().clone(),t.padding);var c=H.fromRect(l,{stroke:{color:r.width?r.color:"",width:r.width,opacity:r.opacity,dashType:r.dashType,lineJoin:"round",lineCap:"round"},fill:{color:a}});var u=new N;u.append(o);u.append(c);u.append(s);return u}function G(e,t,i){var n=D(e.from)?e.from:_.MIN_VALUE;var r=D(e.to)?e.to:_.MAX_VALUE;e.from=Math.max(Math.min(r,n),t);e.to=Math.min(Math.max(r,n),i);return e}function W(e,t){var i=B(t);i.left=-i.left;i.top=-i.top;i.right=-i.right;i.bottom=-i.bottom;return V(e,i)}var q=5,Y=h,$=i.Surface,X=d.Class.extend({init:function(e,t,i,n){if(n===void 0)n={};this.element=e;this.theme=i;this.contextService=new r.ChartService(this,n);this._originalOptions=s({},this.options,t);this.options=s({},this._originalOptions);this._initTheme(i);this.redraw()},destroy:function(){if(this.surface){this.surface.destroy();this.surface=null}delete this.element;delete this.surfaceElement},value:function(e){var t=this.pointers[0];if(arguments.length===0)return t.value();t.value(e);this._setValueOptions(e)},_draw:function(){var e=this.surface;e.clear();e.draw(this._visuals)},exportVisual:function(){return this._visuals},allValues:function(e){var t=this.pointers;var i=[];if(arguments.length===0){for(var n=0;n<t.length;n++)i.push(t[n].value());return i}if(l(e))for(var r=0;r<e.length;r++)if(d.isNumber(e[r]))t[r].value(e[r]);this._setValueOptions(e)},_setValueOptions:function(e){var t=[].concat(this.options.pointer);var i=[].concat(e);for(var n=0;n<i.length;n++)t[n].value=i[n]},resize:function(){this.noTransitionsRedraw()},noTransitionsRedraw:function(){var e=this.options.transitions;this._toggleTransitions(false);this.redraw();this._toggleTransitions(e)},redraw:function(){var e=this._surfaceSize();var t=new I([0,0],[e.width,e.height]);this._initSurface();this.gaugeArea=this._createGaugeArea();this._createModel();var i=W(t.bbox(),this._gaugeAreaMargin);this.reflow(i)},setOptions:function(e,t){this._originalOptions=s(this._originalOptions,e);this.options=s({},this._originalOptions);this._initTheme(t);this.redraw()},setDirection:function(e){this.contextService.rtl=Boolean(e);if(this.surface&&this.surface.type==="svg"){this.surface.destroy();this.surface=null}},setIntlService:function(e){this.contextService.intl=e},_initTheme:function(e){var t=e||this.theme||{};this.theme=t;this.options=s({},t,this.options);var i=this.options;var n=i.pointer;if(l(n)){var r=[];for(var a=0;a<n.length;a++)r.push(s({},t.pointer,n[a]));i.pointer=r}},_createGaugeArea:function(){var e=this.options.gaugeArea;var t=this.surface.size();var i=e.border||{};var n=new I([0,0],[t.width,t.height]);this._gaugeAreaMargin=e.margin||q;if(i.width>0)n=W(n,i.width);var r=Y.fromRect(n,{stroke:{color:i.width?i.color:"",width:i.width,dashType:i.dashType,lineJoin:"round",lineCap:"round"},fill:{color:e.background}});return r},_initSurface:function(){var e=this;var t=e.options;var i=e.surface;var n=this._surfaceElement();var r=this._surfaceSize();d.elementSize(n,r);if(!i||i.options.type!==t.renderAs){if(i)i.destroy();this.surface=$.create(n,{type:t.renderAs})}else{this.surface.clear();this.surface.resize()}},_surfaceSize:function(){var e=this.options;var t=this._getSize();if(e.gaugeArea)s(t,e.gaugeArea);return t},_surfaceElement:function(){if(!this.surfaceElement){this.surfaceElement=document.createElement("div");this.element.appendChild(this.surfaceElement)}return this.surfaceElement},getSize:function(){return this._getSize()},_getSize:function(){var e=this.element;var t=this._defaultSize();var i=e.offsetWidth;var n=e.offsetHeight;if(!i)i=t.width;if(!n)n=t.height;return{width:i,height:n}},_defaultSize:function(){return{width:T,height:C}},_toggleTransitions:function(e){var t=this;this.options.transitions=e;for(var i=0;i<this.pointers.length;i++)t.pointers[i].options.animation.transitions=e}}),K=(e(X,{plotArea:{},theme:"default",renderAs:"",pointer:{},scale:{},gaugeArea:{}}),h),Q=c,Z=P;function J(e,t){var i=e.position;var n=e.tickX;var r=e.tickY;var a,o;if(e.vertical){a=new Z(n,i);o=new Z(n+t.size,i)}else{a=new Z(i,r);o=new Z(i,r+t.size)}var s=new K({stroke:{color:t.color,width:t.width}}).moveTo(a).lineTo(o);return s}function ee(e,t,i,n){var r=t.length;if(n.visible){var a=i.mirror;var o=i.lineBox;for(var s=n.skip;s<r;s+=n.step){if(s%n.skipUnit===0)continue;i.tickX=a?o.x2:o.x2-n.size;i.tickY=a?o.y1-n.size:o.y1;i.position=t[s];e.append(J(i,n))}}}var te=a.extend({init:function(e,t){var i=e||{};if(!D(i.reverse)&&i.vertical===false&&(t||{}).rtl)i=n.extend({},i,{reverse:true});a.fn.init.call(this,0,1,i,t);this.options.minorUnit=this.options.minorUnit||this.options.majorUnit/10},initUserOptions:function(e){var t=s({},this.options,e);t=s({},t,{labels:{mirror:t.mirror}});t.majorUnit=t.majorUnit||d.autoMajorUnit(t.min,t.max);return t},initFields:function(){},render:function(){var e=this.elements=new Q;var t=this.renderLabels();var i=this.renderLine();var n=this.renderTicks();var r=this.renderRanges();e.append(i,t,n,r);return e},renderRanges:function(){var e=this;var t=this.options;var c=t.min;var h=t.max;var i=t.vertical;var n=t.labels.mirror;var r=t.ranges||[];var a=new Q;var f=r.length;var d=t.rangeSize||t.minorTicks.size/2;for(var o=0;o<f;o++){var s=G(r[o],c,h);var p=e.getSlot(s.from,s.to);var l=i?e.lineBox():p;var u=i?p:e.lineBox();if(i)l.x1-=d*(n?-1:1);else u.y2+=d*(n?-1:1);a.append(K.fromRect(new I([l.x1,u.y1],[l.x2-l.x1,u.y2-u.y1]),{fill:{color:s.color,opacity:s.opacity},stroke:{}}))}return a},renderLabels:function(){var e=this;var t=e.labels;var i=e.options;var n=new Q;for(var r=0;r<t.length;r++)n.append(j(t[r],i.labels));return n},renderLine:function(){var e=this.options.line;var t=this.lineBox();var i=new Q;if(e.width>0&&e.visible){var n=new K({stroke:{color:e.color,dashType:e.dashType,width:e.width}});n.moveTo(t.x1,t.y1).lineTo(t.x2,t.y2);i.append(n)}return i},renderTicks:function(){var e=new Q;var t=this.options;var i=t.majorTicks.visible?t.majorUnit:0;var n={vertical:t.vertical,mirror:t.labels.mirror,lineBox:this.lineBox()};ee(e,this.getMajorTickPositions(),n,t.majorTicks);ee(e,this.getMinorTickPositions(),n,s({},{skipUnit:i/t.minorUnit},t.minorTicks));return e}}),ie=(e(te,{min:0,max:50,majorTicks:{size:15,align:L,color:t,width:S,visible:true},minorTicks:{size:10,align:L,color:t,width:S,visible:true},line:{width:S},labels:{position:L,padding:2},mirror:false,_alignLines:false}),d.Class.extend({init:function(e,t){var i=e.options;var n=i.min;var r=i.max;var a=this.options=s({},this.options,t);a.fill=a.color;this.scale=e;if(D(a.value))a.value=o(a.value,n,r);else a.value=n},value:function(e){var t=this.options;var i=t.value;if(arguments.length===0)return i;var n=this.scale.options;var r=n.min;var a=n.max;t._oldValue=D(t._oldValue)?t.value:r;t.value=o(e,r,a);if(this.elements)this.repaint()}})),ne=(e(ie,{color:t}),ie.extend({init:function(e,t){ie.fn.init.call(this,e,t);this.options=s({track:{visible:D(t.track)}},this.options)},reflow:function(){var e=this;var t=e.options;var c=e.scale;var h=c.options;var i=h.mirror;var f=h.vertical;var n=c.lineBox();var r=t.track.size||t.size;var a=t.size/2;var d=B(t.margin);var o=f?d[i?"left":"right"]:d[i?"bottom":"top"];var s,l,u;o=i?-o:o;if(f){u=new E(n.x1+o,n.y1,n.x1+o,n.y2);if(i)u.x1-=r;else u.x2+=r;if(t.shape!==k){l=new E(n.x2+o,n.y1-a,n.x2+o,n.y2+a);s=l}}else{u=new E(n.x1,n.y1-o,n.x2,n.y1-o);if(i)u.y2+=r;else u.y1-=r;if(t.shape!==k){l=new E(n.x1-a,n.y1-o,n.x2+a,n.y1-o);s=l}}this.trackBox=u;this.pointerRangeBox=l;this.box=s||u.clone().pad(t.border.width)},getElementOptions:function(){var e=this.options;return{fill:{color:e.color,opacity:e.opacity},stroke:D(e.border)?{color:e.border.width?e.border.color||e.color:"",width:e.border.width,dashType:e.border.dashType,opacity:e.opacity}:null}},_margin:function(){var e=this;var t=e.scale;var i=e.options;var n=t.options;var r=n.mirror;var a=n.vertical;var o=B(i.margin);var s=a?o[r?"left":"right"]:o[r?"bottom":"top"];return s}})),re=(e(ne,{shape:k,track:{border:{width:1}},color:t,border:{width:1},opacity:1,margin:B(3),animation:{type:k},visible:true}),f.extend({setup:function(){var e=this.options;var t=e.margin;var i=e.from;var n=e.to;var r=e.vertical;var a=r?"x1":"y1";if(e.mirror===r){i[a]-=t;n[a]-=t}else{i[a]+=t;n[a]+=t}var o=this.fromScale=new P(i.x1,i.y1);var s=this.toScale=new P(n.x1,n.y1);if(e.duration!==0)e.duration=Math.max(o.distanceTo(s)/e.duration*1e3,1)},step:function(e){var t=u(this.fromScale.x,this.toScale.x,e);var i=u(this.fromScale.y,this.toScale.y,e);this.element.transform(O().translate(t,i))}})),ae=(e(re,{easing:A,duration:b}),g.current.register(x,re),P),oe=h,se=ne.extend({init:function(e,t){ne.fn.init.call(this,e,t);if(!D(this.options.size))this.options.size=this.scale.options.majorTicks.size*.6},pointerShape:function(){var e=this;var t=e.scale;var i=e.options.size;var n=i/2;var r=t.options.mirror?-1:1;var a;if(t.options.vertical)a=[new ae(0,0-n),new ae(0-r*i,0),new ae(0,0+n)];else a=[new ae(0-n,0),new ae(0,0+r*i),new ae(0+n,0)];return a},repaint:function(){var e=this;var t=e.scale;var i=e.options;var n=new re(this.elements,s(i.animation,{vertical:t.options.vertical,mirror:t.options.mirror,margin:this._margin(i.margin),from:t.getSlot(i._oldValue),to:t.getSlot(i.value)}));if(i.animation.transitions===false)n.options.duration=0;n.setup();n.play()},render:function(){var e=this;var t=e.scale;var i=e.options;var n=this.getElementOptions();var r=this.pointerShape(i.value);i.animation.type=x;var a=new oe({stroke:n.stroke,fill:n.fill}).moveTo(r[0]).lineTo(r[1]).lineTo(r[2]).close();var o=t.getSlot(i.value);a.transform(O().translate(o.x1,o.y1));this.elements=a;return a}}),le=f.extend({setup:function(){var e=this.options;var t=this.axis=e.vertical?_.Y:_.X;var i=this.to=e.newPoints[0][t];var n=this.from=e.oldPoints[0][t];if(e.duration!==0)e.duration=Math.max(Math.abs(i-n)/e.speed*1e3,1);this._set(n)},step:function(e){var t=u(this.from,this.to,e);this._set(t)},_set:function(e){var t="set"+this.axis.toUpperCase();var i=this.options.newPoints;i[0][t](e);i[1][t](e)}}),ue=(e(le,{easing:A,speed:b}),g.current.register(k,le),c),ce=h,he=ne.extend({init:function(e,t){ne.fn.init.call(this,e,t);if(!D(this.options.size))this.options.size=this.scale.options.majorTicks.size*.3},pointerShape:function(c){var h=this;var e=h.scale;var f=h.options;var d=e.options;var p=d.mirror;var t=d.vertical;var v=p===t?-1:1;var i=f.size*v;var g=e.getSlot(e.options.min);var m=e.getSlot(c);var n=t?_.Y:_.X;var r=t?_.X:_.Y;var a=this._margin()*v;var o=new P;o[n]=g[n+"1"];o[r]=g[r+"1"];var s=new P;s[n]=m[n+"1"];s[r]=m[r+"1"];if(t){o.translate(a,0);s.translate(a,0)}else{o.translate(0,a);s.translate(0,a)}var l=s.clone();var u=o.clone();if(t){l.translate(i,0);u.translate(i,0)}else{l.translate(0,i);u.translate(0,i)}return[o,s,l,u]},repaint:function(){var e=this;var t=e.scale;var i=e.options;var n=this.pointerShape(i.value);var r=this.pointerPath;var a=this.pointerShape(i._oldValue);r.moveTo(n[0]).lineTo(n[1]).lineTo(n[2]).lineTo(n[3]).close();var o=new le(r,s(i.animation,{reverse:t.options.reverse,vertical:t.options.vertical,oldPoints:[a[1],a[2]],newPoints:[n[1],n[2]]}));if(i.animation.transitions===false)o.options.duration=0;o.setup();o.play()},render:function(){var e=new ue;var t=this.getElementOptions();if(this.options.track.visible)e.append(this.renderTrack());var i=this.pointerPath=new ce({stroke:t.stroke,fill:t.fill});e.append(i);this.elements=e;return e},renderTrack:function(){var e=this.options.track;var t=e.border||{};var i=this.trackBox.clone().pad(t.width||0);return new ce.fromRect(i.toRect(),{fill:{color:e.color,opacity:e.opacity},stroke:{color:t.width?t.color||e.color:"",width:t.width,dashType:t.dashType}})}}),fe=60,de=60,pe=c,ve=X.extend({reflow:function(e){var t=this.pointers;var i=e.origin.x;var n=e.origin.y;var r=new E(i,n,i+e.width(),n+e.height());this.scale.reflow(r);this._shrinkScaleWidth(r);for(var a=0;a<t.length;a++)t[a].reflow();this.bbox=this._getBox(r);this._alignElements();this._shrinkElements();this._buildVisual();this._draw()},_buildVisual:function(){var e=new pe;var t=this.scale.render();var i=this.pointers;e.append(this.gaugeArea);e.append(t);for(var n=0;n<i.length;n++){var r=i[n];e.append(r.render());r.value(r.options.value)}this._visuals=e},_createModel:function(){var e=this;var t=this.options;var i=this.scale=new te(t.scale,this.contextService);this.pointers=[];var n=t.pointer;n=l(n)?n:[n];for(var r=0;r<n.length;r++){var a=s({},n[r],{animation:{transitions:t.transitions}});var o=a.shape===w?se:he;e.pointers.push(new o(i,a))}},_defaultSize:function(){var e=this.options.scale.vertical;return{width:e?fe:T,height:e?C:de}},_getBox:function(e){var t=this;var i=t.scale;var n=t.pointers;var r=e.center();var a=n[0].box.clone().wrap(i.box);for(var o=0;o<n.length;o++)a.wrap(n[o].box.clone());var s;if(i.options.vertical){s=a.width()/2;a=new E(r.x-s,e.y1,r.x+s,e.y2)}else{s=a.height()/2;a=new E(e.x1,r.y-s,e.x2,r.y+s)}return a},_alignElements:function(){var e=this;var t=this;var i=t.scale;var n=t.pointers;var r=i.box;var a=n[0].box.clone().wrap(i.box);var o=this.bbox;for(var s=0;s<n.length;s++)a.wrap(n[s].box.clone());var l;if(i.options.vertical){l=o.center().x-a.center().x;i.reflow(new E(r.x1+l,o.y1,r.x2+l,o.y2))}else{l=o.center().y-a.center().y;i.reflow(new E(r.x1,r.y1+l,r.x2,r.y2+l))}for(var u=0;u<n.length;u++)n[u].reflow(e.bbox)},_shrinkScaleWidth:function(e){var t=this;var i=t.scale;if(!i.options.vertical){var n=i.contentBox().width()-e.width();if(n>0){i.box.shrink(n,0);i.box.alignTo(e,"center");i.reflow(i.box)}}},_shrinkElements:function(){var e=this;var t=this;var i=t.scale;var n=t.pointers;var r=i.box.clone();var a=i.options.vertical?"y":"x";var o=n[0].box;for(var s=0;s<n.length;s++)o.wrap(n[s].box.clone());r[a+1]+=Math.max(r[a+1]-o[a+1],0);r[a+2]-=Math.max(o[a+2]-r[a+2],0);i.reflow(r);for(var l=0;l<n.length;l++)n[l].reflow(e.bbox)}}),ge=(e(ve,{transitions:true,gaugeArea:{background:""},scale:{vertical:true}}),180),me=i.Arc,_e=h,ye=c;function be(e,t,u,i){var n=new ye;var r=e.center;var a=e.getRadiusX();if(i.visible)for(var o=0;o<t.length;o++){var s=e.pointAt(t[o]);var l=new P(r.x+a-i.size,r.y).rotate(t[o],r);n.append(new _e({stroke:{color:i.color,width:i.width}}).moveTo(s).lineTo(l))}return n}function we(e,t,i,n){return{from:e,to:t,color:i,opacity:n}}var xe=a.extend({init:function(e,t){a.fn.init.call(this,0,1,e,t)},initUserOptions:function(e){var t=s({},this.options,e);t.majorUnit=t.majorUnit||d.autoMajorUnit(t.min,t.max);t.minorUnit=t.minorUnit||t.majorUnit/10;return t},initFields:function(){},render:function(e,t){var i=this.renderArc(e,t);this.bbox=i.bbox();this.labelElements=this.renderLabels();this.ticks=this.renderTicks();this.ranges=this.renderRanges()},reflow:function(e){var t=e.center();var i=Math.min(e.height(),e.width())/2;if(D(this.bbox)){this.bbox=this.arc.bbox();this.radius(this.arc.getRadiusX());this.repositionRanges();this.renderLabels()}else return this.render(t,i)},slotAngle:function(e){var t=this.options;var i=t.min;var n=t.max;var r=t.reverse;var a=t.startAngle;var o=t.endAngle;var s=o-a;var l;if(r)l=o-(e-i)/(n-i)*s;else l=(e-i)/(n-i)*s+a;return l+ge},hasRanges:function(){var e=this.options.ranges;return e&&e.length},ticksSize:function(){var e=this.options;var t=e.majorTicks;var i=e.minorTicks;var n=0;if(t.visible)n=t.size;if(i.visible)n=Math.max(i.size,n);return n},labelsCount:function(){var e=a.fn.labelsCount.call(this);var t=this.options;var i=t.endAngle-t.startAngle;if(i>=360&&t.max%t.majorUnit===0)e-=1;return e},renderLabels:function(){var e=this;var t=this.options;var i=this.arc.clone();var n=i.getRadiusX();var c=this.tickAngles(i,t.majorUnit);var h=t.rangeSize=t.rangeSize||n*.1;var f=new ye;var r=n*.05;if(D(t.rangeDistance))r=t.rangeDistance;else t.rangeDistance=r;var d=t.labels;var a=d.position===L;var p=D(this.labelElements);if(a){n-=this.ticksSize();if(this.hasRanges()&&!p)n-=h+r;i.setRadiusX(n).setRadiusY(n)}var v=this.labels;var g=v.length;var o=B(d.padding);var m=(o.left+o.right)/2;var _=(o.top+o.bottom)/2;for(var s=0;s<g;s++){var l=v[s];var y=l.box.width()/2;var b=l.box.height()/2;var w=c[s];var x=(w-ge)*z;var k=i.pointAt(w);var C=k.x+Math.cos(x)*(y+m)*(a?1:-1);var S=k.y+Math.sin(x)*(b+_)*(a?1:-1);l.reflow(new E(C-y,S-b,C+y,S+b));var T=new P(l.box.x1,l.box.y1);var u=void 0;if(!p){u=j(l,t.labels);f.append(u)}else{u=e.labelElements.children[s];var A=u.bbox().origin;var M=u.transform()||O();M.translate(T.x-A.x,T.y-A.y);u.transform(M)}e.bbox=I.union(e.bbox,u.bbox())}return f},repositionRanges:function(){var e=this.ranges.children;if(e.length>0){var t=this.options;var i=t.rangeDistance;var n=t.rangeSize;var r=this.getRangeRadius();if(this.options.labels.position===L)r+=n+i;var a=r+n/2;for(var o=0;o<e.length;o++)e[o]._geometry.setRadiusX(a).setRadiusY(a);this.bbox=I.union(this.bbox,this.ranges.bbox())}},renderRanges:function(){var e=this;var t=this.rangeSegments();var i=t.length;var n=new ye;if(i){var r=this.options;var c=r.rangeSize;var a=r.reverse;var h=r.rangeDistance;var f=this.getRangeRadius();this.radius(this.radius()-c-h);for(var o=0;o<i;o++){var s=t[o];var l=e.slotAngle(s[a?"to":"from"]);var u=e.slotAngle(s[!a?"to":"from"]);if(u-l!==0)n.append(e.createRange(l,u,f,s))}}return n},createRange:function(e,t,i,n){var r=this.options.rangeSize;var a=new m.Arc(this.arc.center,{radiusX:i+r/2,radiusY:i+r/2,startAngle:e,endAngle:t});return new me(a,{stroke:{width:r,color:n.color,opacity:n.opacity,lineCap:n.lineCap}})},rangeSegments:function(){var e=this.options;var t=e.ranges||[];var i=t.length;var n=[];if(i){var r=e.min;var a=e.max;var c=e.rangePlaceholderColor;n.push(we(r,a,c));for(var o=0;o<i;o++){var s=G(t[o],r,a);var h=n.length;for(var l=0;l<h;l++){var u=n[l];if(u.from<=s.from&&s.from<=u.to){n.push(we(s.from,s.to,s.color,s.opacity));if(u.from<=s.to&&s.to<=u.to)n.push(we(s.to,u.to,c,s.opacity));u.to=s.from;break}}}}return n},getRangeRadius:function(){var e=this;var t=e.arc;var i=e.options;var n=i.rangeSize;var r=i.rangeDistance;var a=i.majorTicks.size;var o;if(i.labels.position===M)o=t.getRadiusX()-a-r-n;else o=t.getRadiusX()-n;return o},renderArc:function(e,t){var i=this.options;var n=this.arc=new m.Arc(e,{radiusX:t,radiusY:t,startAngle:i.startAngle+ge,endAngle:i.endAngle+ge});return n},renderTicks:function(){var e=this;var t=e.arc;var i=e.options;var n=t.clone();this.majorTickAngles=this.tickAngles(t,i.majorUnit);this.majorTicks=be(n,this.majorTickAngles,i.majorUnit,i.majorTicks);var r=new ye;r.append(this.majorTicks);var a=i.majorTicks.size;var o=i.minorTicks.size;this._tickDifference=a-o;if(i.labels.position===M){var s=n.getRadiusX();n.setRadiusX(s-a+o).setRadiusY(s-a+o)}this.minorTickAngles=this.normalizeTickAngles(this.tickAngles(t,i.minorUnit));this.minorTicks=be(n,this.minorTickAngles,i.minorUnit,i.minorTicks);r.append(this.minorTicks);return r},normalizeTickAngles:function(e){var t=this.options;var i=t.majorUnit/t.minorUnit;for(var n=e.length-1;n>=0;n--)if(n%i===0)e.splice(n,1);return e},tickAngles:function(e,t){var i=this.options;var n=i.reverse;var c=i.max-i.min;var r=e.endAngle-e.startAngle;var a=c/t;var o=e.startAngle;var s=r/a;if(n){o+=r;s=-s}if(r>=360&&i.max%t===0)a-=1;var l=[];for(var u=0;u<a;u++){l.push(p(o,v));o+=s}if(p(o)<=e.endAngle)l.push(o);return l},radius:function(e){if(e){this.arc.setRadiusX(e).setRadiusY(e);this.repositionTicks(this.majorTicks.children,this.majorTickAngles);this.repositionTicks(this.minorTicks.children,this.minorTickAngles,true)}else return this.arc.getRadiusX()},repositionTicks:function(e,t,i){var n=i?this._tickDifference||0:0;var r=this.arc;var a=r.getRadiusX();if(i&&this.options.labels.position===M&&n!==0){r=this.arc.clone();r.setRadiusX(a-n).setRadiusY(a-n)}for(var o=0;o<e.length;o++){var s=r.pointAt(t[o]);var l=e[o].segments;var u=s.x-l[0].anchor().x;var c=s.y-l[0].anchor().y;e[o].transform((new O).translate(u,c))}}}),ke=(e(xe,{min:0,max:100,majorTicks:{size:15,align:L,color:t,width:S,visible:true},minorTicks:{size:10,align:L,color:t,width:S,visible:true},startAngle:-30,endAngle:210,labels:{position:L,padding:2}}),f.extend({init:function(e,t){f.fn.init.call(this,e,t);var i=this.options;i.duration=Math.max(Math.abs(i.newAngle-i.oldAngle)/i.duration*1e3,1)},step:function(e){var t=this.options;var i=u(t.oldAngle,t.newAngle,e);this.element.transform(O().rotate(i,t.center))}})),Ce=(e(ke,{easing:A,duration:y}),g.current.register(R,ke),.05),Se=i.Circle,Te=c,Ae=h,Me=ie.extend({setAngle:function(e){this.elements.transform(O().rotate(e,this.center))},repaint:function(){var e=this;var t=e.scale;var i=e.options;var n=t.slotAngle(i._oldValue);var r=t.slotAngle(i.value);if(i.animation.transitions===false)this.setAngle(r);else new ke(this.elements,s(i.animation,{oldAngle:n,newAngle:r})).play()},render:function(){var e=this;var t=e.scale;var i=e.options;var n=new Te;if(i.animation!==false)s(i.animation,{startAngle:0,center:t.arc.center,reverse:t.options.reverse});n.append(this._renderNeedle(),this._renderCap());this.elements=n;this.setAngle(z);return n},reflow:function(e){var t=this.center=e.center;var i=o(this.options.length||1,.1,1.5);var n=this.radius=e.getRadiusX()*i;var r=this.capSize=Math.round(n*this.options.cap.size);this.bbox=I.fromPoints(new P(t.x-r,t.y-r),new P(t.x+r,t.y+r))},_renderNeedle:function(){var e=this.scale.options.minorTicks.size;var t=this.center;var i=this.options.color;var n=new Ae({fill:{color:i},stroke:{color:i,width:S}});n.moveTo(t.x+this.radius-e,t.y).lineTo(t.x,t.y-this.capSize/2).lineTo(t.x,t.y+this.capSize/2).close();return n},_renderCap:function(){var e=this.options;var t=e.cap.color||e.color;var i=new m.Circle(this.center,this.capSize);var n=new Se(i,{fill:{color:t},stroke:{color:t}});return n}}),De=(e(Me,{cap:{size:Ce},arrow:{width:16,height:14},animation:{type:R,duration:y}}),c),Ee=X.extend({reflow:function(e){var t=this;var i=this.pointers;this.scale.reflow(e);this._initialPlotArea=this.scale.bbox;for(var n=0;n<i.length;n++){i[n].reflow(t.scale.arc);t._initialPlotArea=I.union(t._initialPlotArea,i[n].bbox)}this.fitScale(e);this.alignScale(e);this._buildVisual(this.gaugeArea,i,this.scale);this._draw()},_buildVisual:function(e,t,i){var n=this._visuals=new De;n.append(e);n.append(i.ticks);n.append(i.ranges);this._buildPointers(t);n.append(i.labelElements)},_buildPointers:function(e){var t=this;for(var i=0;i<e.length;i++){var n=e[i];n.render();t._visuals.append(n.elements);n.value(n.options.value)}},fitScale:function(e){var t=this;var i=this.scale.arc;var c=this._initialPlotArea;var h=Math.abs(this.getDiff(c,e));var n=p(h,v);var r=p(-h,v);var a,o,s,l,f;var u=0;var d=0;while(d++<100){u=f===s?u+1:0;if(u>5)break;if(n!==l){a=t.getPlotBox(n,e,i);if(0<=a&&a<=2)break}if(r!==l){s=t.getPlotBox(r,e,i);if(0<=s&&s<=2)break}if(a>0&&s>0)l=n*2;else if(a<0&&s<0)l=r*2;else l=p((n+r)/2||1,v);o=t.getPlotBox(l,e,i);if(0<=o&&o<=2)break;f=s;if(o>0){r=l;s=o}else{n=l;a=o}}},getPlotBox:function(e,t,i){var n=this;var r=this.scale;var a=this.pointers;var o=i.getRadiusX();var s=i.clone();s.setRadiusX(o+e).setRadiusY(o+e);r.arc=s;r.reflow(t);this.plotBbox=r.bbox;for(var l=0;l<a.length;l++){a[l].reflow(s);n.plotBbox=I.union(n.plotBbox,a[l].bbox)}return this.getDiff(this.plotBbox,t)},getDiff:function(e,t){return Math.min(t.width()-e.width(),t.height()-e.height())},alignScale:function(e){var t=this;var i=this.plotBbox.center();var n=e.center();var r=i.x-n.x;var a=i.y-n.y;var o=this;var s=o.scale;var l=o.pointers;s.arc.center.x-=r;s.arc.center.y-=a;s.reflow(e);for(var u=0;u<l.length;u++){l[u].reflow(s.arc);t.plotBbox=I.union(s.bbox,l[u].bbox)}},_createModel:function(){var e=this;var t=this.options;var i=t.pointer;var n=this.scale=new xe(t.scale,this.contextService);this.pointers=[];var r=l(i)?i:[i];for(var a=0;a<r.length;a++){var o=new Me(n,s({},r[a],{animation:{transitions:t.transitions}}));e.pointers.push(o)}}}),Ie=(e(Ee,{transitions:true,gaugeArea:{background:""}}),xe.extend({rangeSegments:function(){var e=this.options;var t=e.min;var i=e.max;var n=e.rangePlaceholderColor;var r=e.rangeLineCap;return[{from:t,to:i,color:n,lineCap:r}]},hasRanges:function(){return true},placeholderRangeAngle:function(e){var t=this.ranges.children[0].geometry();if(this.options.reverse)t.setEndAngle(e);else t.setStartAngle(e)},addRange:function(e,t,i){var n=this.options.reverse;var r=this.slotAngle(n?t:e);var a=this.slotAngle(n?e:t);var o=this.createRange(r,a,this.getRangeRadius(),i);this.ranges.append(o);return o}})),Pe=(e(Ie,{min:0,max:100,majorTicks:{visible:false},minorTicks:{visible:false},labels:{visible:false},startAngle:0,endAngle:180,rangeLineCap:"round"}),800),Be=f.extend({init:function(e,t){f.fn.init.call(this,e,t);var i=this.options;var n=Math.abs(i.newAngle-i.oldAngle)/i.duration*1e3;i.duration=o(n,y,Pe);var r=e.elements.options.get("stroke.color");var a=e.currentColor();if(r!==a){this.startColor=new kendo.Color(r);this.color=new kendo.Color(a)}},step:function(e){var t=this;var i=t.options;var n=t.startColor;var r=t.color;var a=u(i.oldAngle,i.newAngle,e);this.element.angle(a);if(r){var o=p(u(n.r,r.r,e));var s=p(u(n.g,r.g,e));var l=p(u(n.b,r.b,e));this.element.stroke(new kendo.Color(o,s,l).toHex())}}}),Oe=(e(Be,{easing:A,duration:y}),g.current.register(F,Be),ie.extend({repaint:function(){var e=this;var t=e.scale;var i=e.options;var n=t.slotAngle(i._oldValue);var r=t.slotAngle(i.value);if(this.animation)this.animation.abort();if(i.animation.transitions===false){this.angle(r);this.stroke(this.currentColor())}else{this.animation=new Be(this,s(i.animation,{oldAngle:n,newAngle:r}));this.animation.play()}},angle:function(e){var t=this.elements.geometry();if(this.scale.options.reverse)t.setStartAngle(e);else t.setEndAngle(e);this.scale.placeholderRangeAngle(e)},stroke:function(e){this.elements.stroke(e)},render:function(){if(this.elements)return;var e=this;var t=e.scale;var i=e.options;if(i.animation!==false)s(i.animation,{startAngle:0,center:t.arc.center,reverse:t.options.reverse});this.elements=t.addRange(t.options.min,this.options.value,{color:this.currentColor(),opacity:i.opacity,lineCap:t.options.rangeLineCap})},currentColor:function(){var e=this.scale.options;var t=e.min;var c=e.max;var i=this.options;var n=i.colors;var h=i.color;var r=i.value;var a=d.isNumber(r)?r:t;if(n)for(var o=0;o<n.length;o++){var s=n[o];var f=s.color;var l=s.from;if(l===void 0)l=t;var u=s.to;if(u===void 0)u=c;if(l<=a&&a<=u)return f}return h},reflow:function(){this.render();this.bbox=this.elements.bbox()}})),ze=(e(Oe,{animation:{type:F,duration:y}}),Ee.extend({_initTheme:function(e){Ee.fn._initTheme.call(this,e);this.options.color=this.options.color||(this.theme.pointer||{}).color},_createModel:function(){var e=this.options;var t=this.scale=new Ie(e.scale,this.contextService);var i=new Oe(t,s({},{colors:e.colors,color:e.color,value:e.value,opacity:e.opacity,animation:{transitions:e.transitions}}));this.pointers=[i]},_buildPointers:function(e){for(var t=0;t<e.length;t++){var i=e[t];i.render();i.value(i.options.value)}},_setValueOptions:function(e){this.options.value=e},currentColor:function(){var e=this.pointers[0];if(e)return e.currentColor()},centerLabelPosition:function(e,t){var i=this.getSize();var n=this.scale.arc.center;var r=n.x-e/2;var a=n.y-t/2;if(e<i.width){var o=r+e;r=Math.max(r,0);if(o>i.width)r-=o-i.width}if(t<i.height){var s=this.scale.bbox;var l=s.bottomRight().y;var u=a+t;a=Math.max(a,s.origin.y);if(u>l)a-=u-l}return{left:r,top:a}}})),Le=90,Re=ze.extend({_createModel:function(){var e=this.options.scale;if(typeof e.startAngle!=="number")e.startAngle=Le;e.endAngle=e.startAngle+360;ze.fn._createModel.call(this)}});kendo.deepExtend(kendo.dataviz,{Gauge:X,LinearGauge:ve,LinearPointer:ne,ArrowLinearPointer:se,BarLinearPointer:he,LinearScale:te,RadialGauge:Ee,RadialPointer:Me,RadialScale:xe,ArcGauge:ze,RangePointer:Oe,ArcScale:Ie,CircularGauge:Re})})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/gauge/main.min",["./kendo-gauges.min"],function(){var i=window.kendo.jQuery,r=window.kendo,n=r.ui.Widget,a=r.dataviz,c=a.LinearGauge,h=a.RadialGauge,f=a.ArcGauge,d=a.CircularGauge,o=r.drawing;function t(e){var t=a.ui.themes||{};var i=e.theme||"";var n=i.toLowerCase();if(a.SASS_THEMES.indexOf(n)!=-1)return a.autoTheme().gauge;return(t[i]||t[n]||{}).gauge}var s=n.extend({init:function(e,t){r.destroy(e);i(e).empty();n.fn.init.call(this,e);this.options=r.deepExtend(this.options,t);this.wrapper=this.element;this._createInstance();this.element.addClass("k-gauge");r.notify(this,a.ui)},options:{theme:"default",renderAs:"",pointer:{},scale:{},gaugeArea:{background:""},transitions:true},setOptions:function(e){this._instance.setOptions(e,t(e));this._copyFields()},redraw:function(){this._instance.redraw();this._copyFields()},destroy:function(){n.fn.destroy.call(this);this._instance.destroy()},_createInstance:function(){var e=this._gaugeType();this._instance=new e(this.element[0],this.options,t(this.options));this._copyFields()},_copyFields:function(){this._originalOptions=this._instance._originalOptions;this.options=this._instance.options;this.surface=this._instance.surface;this.bbox=this._instance.bbox;this.gaugeArea=this._instance.gaugeArea;this.pointers=this._instance.pointers;this.scale=this._instance.scale},_resize:function(){this._instance.resize()}}),e=["getSize","value","allValues","exportVisual"];function p(e){s.fn[e]=function(){return this._instance[e].apply(this._instance,arguments)}}for(var l=0;l<e.length;l++)p(e[l]);a.ExportMixin.extend(s.fn);var v=s.extend({options:{name:"RadialGauge"},_gaugeType:function(){return h}}),g=s.extend({options:{name:"LinearGauge",scale:{vertical:true}},_gaugeType:function(){return c}}),u=s.extend({init:function(e,t){s.fn.init.call(this,e,t);this.element.css("position","relative");this.element.addClass("k-arcgauge");this._centerTemplate()},options:{name:"ArcGauge"},setOptions:function(e){s.fn.setOptions.call(this,e);this._centerTemplate()},redraw:function(){s.fn.redraw.call(this);this._centerTemplate()},value:function(e){var t=this._instance;if(arguments.length===0)return t.value();t.value(e);this._centerTemplate()},destroy:function(){s.fn.destroy.call(this);delete this._centerElement},exportVisual:function(){if(this._centerElement)return false;return s.fn.exportVisual.call(this)},_resize:function(){this._instance.resize();this._centerTemplate()},_centerTemplate:function(){if(this.options.centerTemplate){var e=r.template(this.options.centerTemplate);var t=this._instance;var i=this._getCenterElement();i.html(e({color:t.currentColor(),value:t.value()}));var n=t.centerLabelPosition(i.width(),i.height());i.css(n)}else if(this._centerElement){this._centerElement.remove();this._centerElement=null}},_getCenterElement:function(){var e=this._centerElement;if(!e){e=this._centerElement=i("<div></div>").addClass("k-arcgauge-label");this.element.append(e)}return e},_gaugeType:function(){return f}}),m=u.extend({options:{name:"CircularGauge"},_gaugeType:function(){return d}});function _(n){u.fn[n]=function(t){var e=this;var i=o[n];if(!e._centerElement)return i(e.exportVisual(),t);return o.drawDOM(e.element).then(function(e){return i(e,t)})}}var y=["exportSVG","exportImage","exportPDF"];for(l=0;l<y.length;l++)_(y[l]);return a.ui.plugin(g),a.ui.plugin(v),a.ui.plugin(u),a.ui.plugin(m),r.deepExtend(a,{Gauge:s,LinearGauge:g,RadialGauge:v,ArcGauge:u,CircularGauge:m}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.dataviz.gauge.min",["./dataviz/gauge/main.min","kendo.dataviz.themes.min"],function(){var e={id:"dataviz.gauge",name:"Gauge",category:"dataviz",description:"Linear, Radial and Arc gauges.",depends:["dataviz.core","dataviz.themes"]};return window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.dataviz.barcode.min",["kendo.dataviz.core.min","kendo.drawing.min"],function(){var o={id:"dataviz.barcode",name:"Barcode",category:"dataviz",description:"Barcode widget",depends:["dataviz.core"]},n=window.kendo.jQuery,l=void 0,t=window.kendo,u=t.ui.Widget,c=n.extend,f=t.deepExtend,s=n.inArray,d=n.isPlainObject,p=t.drawing,h=t.geometry,g,m=t.drawing.util.defined,v=t.dataviz,_=v.Box2D,y=v.TextBox,b=300,w=100,x=10,k=/^\d+$/,C=/^[a-z0-9]+$/i,S="Character '{0}' is not valid for symbology {1}";function T(e,t,i){return e.substring(t,t+i)}var i=t.Class.extend({init:function(e){this.setOptions(e)},setOptions:function(e){var t=this;t.options=c({},t.options,e);t.quietZoneLength=t.options.addQuietZone?2*t.options.quietZoneLength:0},encode:function(e,t,i){var n=this;if(m(e))e+="";n.initValue(e,t,i);if(n.options.addQuietZone)n.addQuietZone();n.addData();if(n.options.addQuietZone)n.addQuietZone();return{baseUnit:n.baseUnit,pattern:n.pattern}},options:{quietZoneLength:x,addQuietZone:true,addCheckSum:true},initValue:function(){},addQuietZone:function(){this.pattern.push(this.options.quietZoneLength||x)},addData:function(){},invalidCharacterError:function(e){throw new Error(t.format(S,e,this.name))}}),r={},A=i.extend({minBaseUnitLength:.7,addData:function(){var e=this,t=e.value;e.addStart();for(var i=0;i<t.length;i++)e.addCharacter(t.charAt(i));if(e.options.addCheckSum)e.pushCheckSum();e.addStop();e.prepareValues()},addCharacter:function(e){var t=this,i=t.characterMap[e];if(!i)t.invalidCharacterError(e);t.addBase(i)},addBase:function(){}}),M={addCharacter:function(e){var t=this;if(t.characterMap[e])t.addBase(t.characterMap[e]);else if(e.charCodeAt(0)>127)t.invalidCharacterError(e);else t.addExtended(e.charCodeAt(0))},addExtended:function(e){var t=this,i;for(var n=0;n<t.extendedMappings.length;n++)if(i=t.extendedMappings[n].call(t,e)){for(var r=0;r<i.length;r++)t.addBase(i[r]);t.dataLength+=i.length-1;return}},extendedMappings:[function(e){if(97<=e&&e<=122){var t=this;return[t.characterMap[t.shiftCharacters[0]],t.characterMap[String.fromCharCode(e-32)]]}},function(e){if(33<=e&&e<=58){var t=this;return[t.characterMap[t.shiftCharacters[1]],t.characterMap[String.fromCharCode(e+32)]]}},function(e){if(1<=e&&e<=26){var t=this;return[t.characterMap[t.shiftCharacters[2]],t.characterMap[String.fromCharCode(e+64)]]}},function(e){var t=this,i,n;if(!t.specialAsciiCodes[e]){n=Math.floor(e/32)*6+(e-27)%32+64;i=[t.characterMap[t.shiftCharacters[3]],t.characterMap[String.fromCharCode(n)]]}else{i=[];for(var r=0;r<t.specialAsciiCodes[e].length;r++){i.push(t.characterMap[t.shiftCharacters[3]]);i.push(t.characterMap[t.specialAsciiCodes[e][r]])}}return i}],specialAsciiCodes:{0:["U"],64:["V"],96:["W"],127:["T","X","Y","Z"]},shiftValuesAsciiCodes:{39:36,40:47,41:43,42:37},characterMap:{"+":false,"/":false,$:false,"%":false},shiftCharacters:["SHIFT0","SHIFT1","SHIFT2","SHIFT3"]},D=(r.code39=A.extend({name:"Code 39",checkSumMod:43,minRatio:2.5,maxRatio:3,gapWidth:1,splitCharacter:"|",initValue:function(e,t,i){var n=this;n.width=t;n.height=i;n.value=e;n.dataLength=e.length;n.pattern=[];n.patternString=""},prepareValues:function(){var e=this,t,i=e.minBaseUnitLength,n=e.maxRatio,r=e.minRatio,a=Math.max(.15*e.width,24);if(e.height<a)throw new Error("Insufficient Height. The minimum height for value: "+e.value+" is: "+a);while((t=e.getBaseUnit(n))<i&&n>r)n=parseFloat((n-.1).toFixed(1));if(t<i){var o=Math.ceil(e.getBaseWidth(r)*i);throw new Error("Insufficient width. The minimum width for value: "+e.value+" is: "+o)}e.ratio=n;e.baseUnit=t;e.patternString=e.patternString.substring(0,e.patternString.length-1);e.pattern=e.pattern.concat(e.patternString.replace(/ratio/g,n).split(e.splitCharacter))},getBaseUnit:function(e){return this.width/this.getBaseWidth(e)},getBaseWidth:function(e){var t=this,i=3*(e+2);return t.quietZoneLength+i*(t.dataLength+2)+t.gapWidth*(t.dataLength+1)},addStart:function(){var e=this;e.addPattern(e.characterMap.START.pattern);e.addCharacterGap()},addBase:function(e){this.addPattern(e.pattern);this.addCharacterGap()},addStop:function(){this.addPattern(this.characterMap.START.pattern)},addPattern:function(e){for(var t=0;t<e.length;t++)this.patternString+=this.patternMappings[e.charAt(t)]},addCharacterGap:function(){var e=this;e.patternString+=e.gapWidth+e.splitCharacter},patternMappings:{b:"1|",w:"1|",B:"ratio|",W:"ratio|"},characterMap:{0:{pattern:"bwbWBwBwb",value:0},1:{pattern:"BwbWbwbwB",value:1},2:{pattern:"bwBWbwbwB",value:2},3:{pattern:"BwBWbwbwb",value:3},4:{pattern:"bwbWBwbwB",value:4},5:{pattern:"BwbWBwbwb",value:5},6:{pattern:"bwBWBwbwb",value:6},7:{pattern:"bwbWbwBwB",value:7},8:{pattern:"BwbWbwBwb",value:8},9:{pattern:"bwBWbwBwb",value:9},A:{pattern:"BwbwbWbwB",value:10},B:{pattern:"bwBwbWbwB",value:11},C:{pattern:"BwBwbWbwb",value:12},D:{pattern:"bwbwBWbwB",value:13},E:{pattern:"BwbwBWbwb",value:14},F:{pattern:"bwBwBWbwb",value:15},G:{pattern:"bwbwbWBwB",value:16},H:{pattern:"BwbwbWBwb",value:17},I:{pattern:"bwBwbWBwb",value:18},J:{pattern:"bwbwBWBwb",value:19},K:{pattern:"BwbwbwbWB",value:20},L:{pattern:"bwBwbwbWB",value:21},M:{pattern:"BwBwbwbWb",value:22},N:{pattern:"bwbwBwbWB",value:23},O:{pattern:"BwbwBwbWb",value:24},P:{pattern:"bwBwBwbWb",value:25},Q:{pattern:"bwbwbwBWB",value:26},R:{pattern:"BwbwbwBWb",value:27},S:{pattern:"bwBwbwBWb",value:28},T:{pattern:"bwbwBwBWb",value:29},U:{pattern:"BWbwbwbwB",value:30},V:{pattern:"bWBwbwbwB",value:31},W:{pattern:"BWBwbwbwb",value:32},X:{pattern:"bWbwBwbwB",value:33},Y:{pattern:"BWbwBwbwb",value:34},Z:{pattern:"bWBwBwbwb",value:35},"-":{pattern:"bWbwbwBwB",value:36},".":{pattern:"BWbwbwBwb",value:37}," ":{pattern:"bWBwbwBwb",value:38},$:{pattern:"bWbWbWbwb",value:39},"/":{pattern:"bWbWbwbWb",value:40},"+":{pattern:"bWbwbWbWb",value:41},"%":{pattern:"bwbWbWbWb",value:42},START:{pattern:"bWbwBwBwb"}},options:{addCheckSum:false}}),r.code39extended=r.code39.extend(f({},M,{name:"Code 39 extended",characterMap:{SHIFT0:{pattern:"bWbwbWbWb",value:41},SHIFT1:{pattern:"bWbWbwbWb",value:40},SHIFT2:{pattern:"bWbWbWbwb",value:39},SHIFT3:{pattern:"bwbWbWbWb",value:42}}})),r.code93=A.extend({name:"Code 93",cCheckSumTotal:20,kCheckSumTotal:15,checkSumMod:47,initValue:function(e,t,i){var n=this;n.value=e;n.width=t;n.height=i;n.pattern=[];n.values=[];n.dataLength=e.length},prepareValues:function(){var e=this,t=Math.max(.15*e.width,24);if(e.height<t)throw new Error("Insufficient Height");e.setBaseUnit();if(e.baseUnit<e.minBaseUnitLength)throw new Error("Insufficient Width")},setBaseUnit:function(){var e=this,t=2;e.baseUnit=e.width/(9*(e.dataLength+2+t)+e.quietZoneLength+1)},addStart:function(){var e=this.characterMap.START.pattern;this.addPattern(e)},addStop:function(){var e=this;e.addStart();e.pattern.push(e.characterMap.TERMINATION_BAR)},addBase:function(e){this.addPattern(e.pattern);this.values.push(e.value)},pushCheckSum:function(){var e=this,t=e._getCheckValues(),i;e.checksum=t.join("");for(var n=0;n<t.length;n++){i=e.characterMap[e._findCharacterByValue(t[n])];e.addPattern(i.pattern)}},_getCheckValues:function(){var e=this,t=e.values,i=t.length,n=0,r,a,o;for(o=i-1;o>=0;o--)n+=e.weightedValue(t[o],i-o,e.cCheckSumTotal);r=n%e.checkSumMod;n=e.weightedValue(r,1,e.kCheckSumTotal);for(o=i-1;o>=0;o--)n+=e.weightedValue(t[o],i-o+1,e.kCheckSumTotal);a=n%e.checkSumMod;return[r,a]},_findCharacterByValue:function(e){for(var t in this.characterMap)if(this.characterMap[t].value===e)return t},weightedValue:function(e,t,i){return(t%i||i)*e},addPattern:function(e){var t;for(var i=0;i<e.length;i++){t=parseInt(e.charAt(i),10);this.pattern.push(t)}},characterMap:{0:{pattern:"131112",value:0},1:{pattern:"111213",value:1},2:{pattern:"111312",value:2},3:{pattern:"111411",value:3},4:{pattern:"121113",value:4},5:{pattern:"121212",value:5},6:{pattern:"121311",value:6},7:{pattern:"111114",value:7},8:{pattern:"131211",value:8},9:{pattern:"141111",value:9},A:{pattern:"211113",value:10},B:{pattern:"211212",value:11},C:{pattern:"211311",value:12},D:{pattern:"221112",value:13},E:{pattern:"221211",value:14},F:{pattern:"231111",value:15},G:{pattern:"112113",value:16},H:{pattern:"112212",value:17},I:{pattern:"112311",value:18},J:{pattern:"122112",value:19},K:{pattern:"132111",value:20},L:{pattern:"111123",value:21},M:{pattern:"111222",value:22},N:{pattern:"111321",value:23},O:{pattern:"121122",value:24},P:{pattern:"131121",value:25},Q:{pattern:"212112",value:26},R:{pattern:"212211",value:27},S:{pattern:"211122",value:28},T:{pattern:"211221",value:29},U:{pattern:"221121",value:30},V:{pattern:"222111",value:31},W:{pattern:"112122",value:32},X:{pattern:"112221",value:33},Y:{pattern:"122121",value:34},Z:{pattern:"123111",value:35},"-":{pattern:"121131",value:36},".":{pattern:"311112",value:37}," ":{pattern:"311211",value:38},$:{pattern:"321111",value:39},"/":{pattern:"112131",value:40},"+":{pattern:"113121",value:41},"%":{pattern:"211131",value:42},SHIFT0:{pattern:"122211",value:46},SHIFT1:{pattern:"311121",value:45},SHIFT2:{pattern:"121221",value:43},SHIFT3:{pattern:"312111",value:44},START:{pattern:"111141"},TERMINATION_BAR:"1"}}),r.code93extended=r.code93.extend(f({},M,{name:"Code 93 extended",pushCheckSum:function(){var e=this,t=e._getCheckValues(),i;e.checksum=t.join("");for(var n=0;n<t.length;n++){i=t[n];if(e.shiftValuesAsciiCodes[i])e.addExtended(e.shiftValuesAsciiCodes[i]);else e.addPattern(e.characterMap[e._findCharacterByValue(i)].pattern)}}})),t.Class.extend({init:function(e){this.encoding=e},addStart:function(){},is:function(){},move:function(){},pushState:function(){}})),E=D.extend({FNC4:"FNC4",init:function(e,t){var i=this;i.encoding=e;i.states=t;i._initMoves(t)},addStart:function(){this.encoding.addPattern(this.START)},is:function(e,t){var i=e.charCodeAt(t);return this.isCode(i)},move:function(e){var t=this,i=0;while(!t._moves[i].call(t,e)&&i<t._moves.length)i++},pushState:function(e){var t=this,i=t.states,n=e.value,r=n.length,a;if(s("C",i)>=0){var o=n.substr(e.index).match(/\d{4,}/g);if(o)r=n.indexOf(o[0],e.index)}while((a=e.value.charCodeAt(e.index))>=0&&t.isCode(a)&&e.index<r){t.encoding.addPattern(t.getValue(a));e.index++}},_initMoves:function(e){var t=this;t._moves=[];if(s(t.FNC4,e)>=0)t._moves.push(t._moveFNC);if(s(t.shiftKey,e)>=0)t._moves.push(t._shiftState);t._moves.push(t._moveState)},_moveFNC:function(e){if(e.fnc){e.fnc=false;return e.previousState==this.key}},_shiftState:function(e){var t=this;if(e.previousState==t.shiftKey&&(e.index+1>=e.value.length||t.encoding[t.shiftKey].is(e.value,e.index+1))){t.encoding.addPattern(t.SHIFT);e.shifted=true;return true}},_moveState:function(){this.encoding.addPattern(this.MOVE);return true},SHIFT:98}),a={},e=(a.A=E.extend({key:"A",shiftKey:"B",isCode:function(e){return e>=0&&e<96},getValue:function(e){if(e<32)return e+64;return e-32},MOVE:101,START:103}),a.B=E.extend({key:"B",shiftKey:"A",isCode:function(e){return e>=32&&e<128},getValue:function(e){return e-32},MOVE:100,START:104}),a.C=D.extend({key:"C",addStart:function(){this.encoding.addPattern(this.START)},is:function(e,t){var i=T(e,t,4);return(t+4<=e.length||e.length==2)&&k.test(i)},move:function(){this.encoding.addPattern(this.MOVE)},pushState:function(e){var t;while((t=T(e.value,e.index,2))&&k.test(t)&&t.length==2){this.encoding.addPattern(parseInt(t,10));e.index+=2}},getValue:function(e){return e},MOVE:99,START:105}),a.FNC4=D.extend({key:"FNC4",dependentStates:["A","B"],init:function(e,t){this.encoding=e;this._initSubStates(t)},addStart:function(e){var t=e.value.charCodeAt(0)-128,i=this._getSubState(t);this.encoding[i].addStart()},is:function(e,t){var i=e.charCodeAt(t);return this.isCode(i)},isCode:function(e){return e>=128&&e<256},pushState:function(e){var t=this,i=t._initSubState(e),n=t.encoding,r=i.value.length;e.index+=r;if(r<3){var a;for(;i.index<r;i.index++){a=i.value.charCodeAt(i.index);i.state=t._getSubState(a);if(i.previousState!=i.state){i.previousState=i.state;n[i.state].move(i)}n.addPattern(n[i.state].MOVE);n.addPattern(n[i.state].getValue(a))}}else{if(i.state!=i.previousState)n[i.state].move(i);t._pushStart(i);n.pushData(i,t.subStates);if(e.index<e.value.length)t._pushStart(i)}e.fnc=true;e.state=i.state},_pushStart:function(e){var t=this;t.encoding.addPattern(t.encoding[e.state].MOVE);t.encoding.addPattern(t.encoding[e.state].MOVE)},_initSubState:function(e){var t=this,i={value:t._getAll(e.value,e.index),index:0};i.state=t._getSubState(i.value.charCodeAt(0));i.previousState=e.previousState==t.key?i.state:e.previousState;return i},_initSubStates:function(e){var t=this;t.subStates=[];for(var i=0;i<e.length;i++)if(s(e[i],t.dependentStates)>=0)t.subStates.push(e[i])},_getSubState:function(e){var t=this;for(var i=0;i<t.subStates.length;i++)if(t.encoding[t.subStates[i]].isCode(e))return t.subStates[i]},_getAll:function(e,t){var i,n="";while((i=e.charCodeAt(t++))&&this.isCode(i))n+=String.fromCharCode(i-128);return n}}),a.FNC1=D.extend({key:"FNC1",startState:"C",dependentStates:["C","B"],startAI:"(",endAI:")",init:function(e,t){this.encoding=e;this.states=t},addStart:function(){this.encoding[this.startState].addStart()},is:function(){return s(this.key,this.states)>=0},pushState:function(e){var t=this,i=t.encoding,n=e.value.replace(/\s/g,""),r=new RegExp("["+t.startAI+t.endAI+"]","g"),a=e.index,o={state:t.startState},s,l,u;i.addPattern(t.START);while(true){o.index=0;u=n.charAt(a)===t.startAI?2:0;s=u>0?t.getBySeparator(n,a):t.getByLength(n,a);if(s.ai.length)l=a+u+s.id.length+s.ai.length;else{l=n.indexOf(t.startAI,a+1);if(l<0){if(a+s.ai.max+s.id.length+u<n.length)throw new Error("Separators are required after variable length identifiers");l=n.length}}o.value=n.substring(a,l).replace(r,"");t.validate(s,o.value);i.pushData(o,t.dependentStates);if(l>=n.length)break;a=l;if(o.state!=t.startState){i[t.startState].move(o);o.state=t.startState}if(!s.ai.length)i.addPattern(t.START)}e.index=e.value.length},validate:function(e,t){var i=t.substr(e.id.length),n=e.ai;if(!n.type&&!k.test(i))throw new Error("Application identifier "+e.id+" is numeric only but contains non numeric character(s).");if(n.type=="alphanumeric"&&!C.test(i))throw new Error("Application identifier "+e.id+" is alphanumeric only but contains non alphanumeric character(s).");if(n.length&&n.length!==i.length)throw new Error("Application identifier "+e.id+" must be "+n.length+" characters long.");if(n.min&&n.min>i.length)throw new Error("Application identifier "+e.id+" must be at least "+n.min+" characters long.");if(n.max&&n.max<i.length)throw new Error("Application identifier "+e.id+" must be at most "+n.max+" characters long.")},getByLength:function(e,t){var i=this,n,r;for(var a=2;a<=4;a++){n=T(e,t,a);r=i.getAI(n)||i.getAI(n.substring(0,n.length-1));if(r)return{id:n,ai:r}}i.unsupportedAIError(n)},unsupportedAIError:function(e){throw new Error(t.format("'{0}' is not a supported Application Identifier"),e)},getBySeparator:function(e,t){var i=this,n=e.indexOf(i.startAI,t),r=e.indexOf(i.endAI,n),a=e.substring(n+1,r),o=i.getAI(a)||i.getAI(a.substr(a.length-1));if(!o)i.unsupportedAIError(a);return{ai:o,id:a}},getAI:function(e){var t=this.applicationIdentifiers,i=t.multiKey;if(t[e])return t[e];for(var n=0;n<i.length;n++)if(i[n].ids&&s(e,i[n].ids)>=0)return i[n].type;else if(i[n].ranges){var r=i[n].ranges;for(var a=0;a<r.length;a++)if(r[a][0]<=e&&e<=r[a][1])return i[n].type}},applicationIdentifiers:{22:{max:29,type:"alphanumeric"},402:{length:17},7004:{max:4,type:"alphanumeric"},242:{max:6,type:"alphanumeric"},8020:{max:25,type:"alphanumeric"},703:{min:3,max:30,type:"alphanumeric"},8008:{min:8,max:12,type:"alphanumeric"},253:{min:13,max:17,type:"alphanumeric"},8003:{min:14,max:30,type:"alphanumeric"},multiKey:[{ids:["15","17","8005","8100"],ranges:[[11,13],[310,316],[320,336],[340,369]],type:{length:6}},{ids:["240","241","250","251","400","401","403","7002","8004","8007","8110"],ranges:[[90-99]],type:{max:30,type:"alphanumeric"}},{ids:["7001"],ranges:[[410,414]],type:{length:13}},{ids:["10","21","254","420","8002"],type:{max:20,type:"alphanumeric"}},{ids:["00","8006","8017","8018"],type:{length:18}},{ids:["01","02","8001"],type:{length:14}},{ids:["422"],ranges:[[424,426]],type:{length:3}},{ids:["20","8102"],type:{length:2}},{ids:["30","37"],type:{max:8,type:"alphanumeric"}},{ids:["390","392"],type:{max:15,type:"alphanumeric"}},{ids:["421","423"],type:{min:3,max:15,type:"alphanumeric"}},{ids:["391","393"],type:{min:3,max:18,type:"alphanumeric"}},{ids:["7003","8101"],type:{length:10}}]},START:102}),i.extend({init:function(e){i.fn.init.call(this,e);this._initStates()},_initStates:function(){var e=this;for(var t=0;t<e.states.length;t++)e[e.states[t]]=new a[e.states[t]](e,e.states)},initValue:function(e,t,i){var n=this;n.pattern=[];n.value=e;n.width=t;n.height=i;n.checkSum=0;n.totalUnits=0;n.index=0;n.position=1},addData:function(){var e=this,t={value:e.value,index:0,state:""};if(e.value.length===0)return;t.state=t.previousState=e.getNextState(t,e.states);e.addStart(t);e.pushData(t,e.states);e.addCheckSum();e.addStop();e.setBaseUnit()},pushData:function(e,t){var i=this;while(true){i[e.state].pushState(e);if(e.index>=e.value.length)break;if(!e.shifted){e.previousState=e.state;e.state=i.getNextState(e,t);i[e.state].move(e)}else{var n=e.state;e.state=e.previousState;e.previousState=n;e.shifted=false}}},addStart:function(e){this[e.state].addStart(e);this.position=1},addCheckSum:function(){var e=this;e.checksum=e.checkSum%103;e.addPattern(e.checksum)},addStop:function(){this.addPattern(this.STOP)},setBaseUnit:function(){var e=this;e.baseUnit=e.width/(e.totalUnits+e.quietZoneLength)},addPattern:function(e){var t=this,i=t.characterMap[e].toString(),n;for(var r=0;r<i.length;r++){n=parseInt(i.charAt(r),10);t.pattern.push(n);t.totalUnits+=n}t.checkSum+=e*t.position++},getNextState:function(e,t){for(var i=0;i<t.length;i++)if(this[t[i]].is(e.value,e.index))return t[i];this.invalidCharacterError(e.value.charAt(e.index))},characterMap:[212222,222122,222221,121223,121322,131222,122213,122312,132212,221213,221312,231212,112232,122132,122231,113222,123122,123221,223211,221132,221231,213212,223112,312131,311222,321122,321221,312212,322112,322211,212123,212321,232121,111323,131123,131321,112313,132113,132311,211313,231113,231311,112133,112331,132131,113123,113321,133121,313121,211331,231131,213113,213311,213131,311123,311321,331121,312113,312311,332111,314111,221411,431111,111224,111422,121124,121421,141122,141221,112214,112412,122114,122411,142112,142211,241211,221114,413111,241112,134111,111242,121142,121241,114212,124112,124211,411212,421112,421211,212141,214121,412121,111143,111341,131141,114113,114311,411113,411311,113141,114131,311141,411131,211412,211214,211232,2331112],STOP:106})),I=(r.code128a=e.extend({name:"Code 128 A",states:["A"]}),r.code128b=e.extend({name:"Code 128 B",states:["B"]}),r.code128c=e.extend({name:"Code 128 C",states:["C"]}),r.code128=e.extend({name:"Code 128",states:["C","B","A","FNC4"]}),r["gs1-128"]=e.extend({name:"Code GS1-128",states:["FNC1","C","B"]}),i.extend({initValue:function(e,t){var i=this;i.pattern=[];i.value=e;i.checkSumLength=0;i.width=t},setBaseUnit:function(){var e=this,t=7;e.baseUnit=e.width/(12*(e.value.length+e.checkSumLength)+e.quietZoneLength+t)},addData:function(){var e=this,t=e.value;e.addPattern(e.START);for(var i=0;i<t.length;i++)e.addCharacter(t.charAt(i));if(e.options.addCheckSum)e.addCheckSum();e.addPattern(e.STOP);e.setBaseUnit()},addCharacter:function(e){var t=this,i=t.characterMap[e];if(!i)t.invalidCharacterError(e);t.addPattern(i)},addPattern:function(e){for(var t=0;t<e.length;t++)this.pattern.push(parseInt(e.charAt(t),10))},addCheckSum:function(){var e=this,t=e.checkSums[e.checkSumType],i;i=t.call(e.checkSums,e.value);e.checksum=i.join("");for(var n=0;n<i.length;n++){e.checkSumLength++;e.addPattern(e.characterMap[i[n]])}},checkSums:{Modulo10:function(e){var t=[0,""],i=e.length%2,n,r,a;for(n=0;n<e.length;n++)t[(n+i)%2]+=parseInt(e.charAt(n),10);a=t[0];r=(t[1]*2).toString();for(n=0;n<r.length;n++)a+=parseInt(r.charAt(n),10);return[(10-a%10)%10]},Modulo11:function(e){var t=0,i=11,n=e.length,r,a;for(var o=0;o<n;o++){r=((n-o)%6||6)+1;t+=r*e.charAt(o)}a=(i-t%i)%i;if(a!=10)return[a];return[1,0]},Modulo11Modulo10:function(e){var t=this.Modulo11(e),i;i=e+t[0];return t.concat(this.Modulo10(i))},Modulo10Modulo10:function(e){var t=this.Modulo10(e),i;i=e+t[0];return t.concat(this.Modulo10(i))}},characterMap:["12121212","12121221","12122112","12122121","12211212","12211221","12212112","12212121","21121212","21121221"],START:"21",STOP:"121",checkSumType:""})),P=(r.msimod10=I.extend({name:"MSI Modulo10",checkSumType:"Modulo10"}),r.msimod11=I.extend({name:"MSI Modulo11",checkSumType:"Modulo11"}),r.msimod1110=I.extend({name:"MSI Modulo11 Modulo10",checkSumType:"Modulo11Modulo10"}),r.msimod1010=I.extend({name:"MSI Modulo10 Modulo10",checkSumType:"Modulo10Modulo10"}),r.code11=i.extend({name:"Code 11",cCheckSumTotal:10,kCheckSumTotal:9,kCheckSumMinLength:10,checkSumMod:11,DASH_VALUE:10,DASH:"-",START:"112211",STOP:"11221",initValue:function(e,t){var i=this;i.pattern=[];i.value=e;i.width=t;i.totalUnits=0},addData:function(){var e=this;var t=e.value;e.addPattern(e.START);for(var i=0;i<t.length;i++)e.addCharacter(t.charAt(i));if(e.options.addCheckSum)e.addCheckSum();e.addPattern(e.STOP);e.setBaseUnit()},setBaseUnit:function(){var e=this;e.baseUnit=e.width/(e.totalUnits+e.quietZoneLength)},addCheckSum:function(){var e=this,t=e.value,i=t.length,n;n=e.getWeightedSum(t,i,e.cCheckSumTotal)%e.checkSumMod;e.checksum=n+"";e.addPattern(e.characterMap[n]);i++;if(i>=e.kCheckSumMinLength){var r=(n+e.getWeightedSum(t,i,e.kCheckSumTotal))%e.checkSumMod;e.checksum+=r;e.addPattern(e.characterMap[r])}},getWeightedSum:function(e,t,i){var n=0;for(var r=0;r<e.length;r++)n+=this.weightedValue(this.getValue(e.charAt(r)),t,r,i);return n},weightedValue:function(e,t,i,n){var r=(t-i)%n||n;return r*e},getValue:function(e){var t=this;if(!isNaN(e))return parseInt(e,10);else if(e!==t.DASH)t.invalidCharacterError(e);return t.DASH_VALUE},addCharacter:function(e){var t=this,i=t.getValue(e),n=t.characterMap[i];t.addPattern(n)},addPattern:function(e){var t;for(var i=0;i<e.length;i++){t=parseInt(e.charAt(i),10);this.pattern.push(t);this.totalUnits+=t}},characterMap:["111121","211121","121121","221111","112121","212111","122111","111221","211211","211111","112111"],options:{addCheckSum:true}}),r.postnet=i.extend({name:"Postnet",START:"2",VALID_CODE_LENGTHS:[5,9,11],DIGIT_SEPARATOR:"-",initValue:function(e,t,i){var n=this;n.height=i;n.width=t;n.baseHeight=i/2;n.value=e.replace(new RegExp(n.DIGIT_SEPARATOR,"g"),"");n.pattern=[];n.validate(n.value);n.checkSum=0;n.setBaseUnit()},addData:function(){var e=this,t=e.value;e.addPattern(e.START);for(var i=0;i<t.length;i++)e.addCharacter(t.charAt(i));if(e.options.addCheckSum)e.addCheckSum();e.addPattern(e.START);e.pattern.pop()},addCharacter:function(e){var t=this,i=t.characterMap[e];t.checkSum+=parseInt(e,10);t.addPattern(i)},addCheckSum:function(){var e=this;e.checksum=(10-e.checkSum%10)%10;e.addCharacter(e.checksum)},setBaseUnit:function(){var e=this,t=3;e.baseUnit=e.width/((e.value.length+1)*10+t+e.quietZoneLength)},validate:function(e){var t=this;if(!k.test(e))t.invalidCharacterError(e.match(/[^0-9]/)[0]);if(s(e.length,t.VALID_CODE_LENGTHS)<0)throw new Error("Invalid value length. Valid lengths for the Postnet symbology are "+t.VALID_CODE_LENGTHS.join(","))},addPattern:function(e){var t=this,i;for(var n=0;n<e.length;n++){i=t.height-t.baseHeight*e.charAt(n);t.pattern.push({width:1,y1:i,y2:t.height});t.pattern.push(1)}},characterMap:["22111","11122","11212","11221","12112","12121","12211","21112","21121","21211"]}),r.ean13=i.extend({initValue:function(e,t,i){e+="";if(e.length!=12||/\D/.test(e))throw new Error('The value of the "EAN13" encoding should be 12 symbols');var n=this;n.pattern=[];n.options.height=i;n.baseUnit=t/(95+n.quietZoneLength);n.value=e;n.checksum=n.calculateChecksum();n.leftKey=e[0];n.leftPart=e.substr(1,6);n.rightPart=e.substr(7)+n.checksum},addData:function(){var e=this;e.addPieces(e.characterMap.start);e.addSide(e.leftPart,e.leftKey);e.addPieces(e.characterMap.middle);e.addSide(e.rightPart);e.addPieces(e.characterMap.start)},addSide:function(e,t){var i=this;for(var n=0;n<e.length;n++)if(t&&parseInt(i.keyTable[t].charAt(n),10))i.addPieces(Array.prototype.slice.call(i.characterMap.digits[e.charAt(n)]).reverse(),true);else i.addPieces(i.characterMap.digits[e.charAt(n)],true)},addPieces:function(e,t){var i=this;for(var n=0;n<e.length;n++)if(t)i.pattern.push({y1:0,y2:i.options.height*.95,width:e[n]});else i.pattern.push(e[n])},calculateChecksum:function(){var e=0,t=0,i=this.value.split("").reverse().join("");for(var n=0;n<i.length;n++)if(n%2)t+=parseInt(i.charAt(n),10);else e+=parseInt(i.charAt(n),10);var r=(10-(3*e+t)%10)%10;return r},keyTable:["000000","001011","001101","001110","010011","011001","011100","010101","010110","011010"],characterMap:{digits:[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2]],start:[1,1,1],middle:[1,1,1,1,1]}}),r.ean8=r.ean13.extend({initValue:function(e,t,i){var n=this;if(e.length!=7||/\D/.test(e))throw new Error("Invalid value provided");n.value=e;n.options.height=i;n.checksum=n.calculateChecksum(n.value);n.leftPart=n.value.substr(0,4);n.rightPart=n.value.substr(4)+n.checksum;n.pattern=[];n.baseUnit=t/(67+n.quietZoneLength)}}),u.extend({init:function(e,t){var i=this;u.fn.init.call(i,e,t);i.element=n(e);i.wrapper=i.element;i.element.addClass("k-barcode").css("display","block");i.surfaceWrap=n("<div />").css("position","relative").appendTo(this.element);i.surface=p.Surface.create(i.surfaceWrap,{type:i.options.renderAs});i._setOptions(t);if(t&&m(t.value))i.redraw()},setOptions:function(e){this._setOptions(e);this.redraw()},redraw:function(){var e=this._getSize();this.surface.clear();this.surface.setSize({width:e.width,height:e.height});this.createVisual();this.surface.draw(this.visual)},getSize:function(){return t.dimensions(this.element)},_resize:function(){this.redraw()},createVisual:function(){this.visual=this._render()},_render:function(){var e=this,t=e.options,i=t.value,n=t.text,c=v.getSpacing(n.margin),r=e._getSize(),h=t.border||{},a=e.encoding,o=new _(0,0,r.width,r.height).unpad(h.width).unpad(t.padding),s=o.height(),l,f,d;var u=new p.Group;e.contentBox=o;u.append(e._getBackground(r));if(n.visible){d=p.util.measureText(i,{font:n.font}).height;s-=d+c.top+c.bottom}l=a.encode(i,o.width(),s);if(n.visible){f=i;if(t.checksum&&m(a.checksum))f+=" "+a.checksum;u.append(e._getText(f))}e.barHeight=s;this._bandsGroup=this._getBands(l.pattern,l.baseUnit);u.append(this._bandsGroup);return u},exportVisual:function(){return this._render()},_getSize:function(){var e=this,t=e.element,i=new h.Size(b,w);if(t.width()>0)i.width=t.width();if(t.height()>0)i.height=t.height();if(e.options.width)i.width=e.options.width;if(e.options.height)i.height=e.options.height;return i},value:function(e){var t=this;if(!m(e))return t.options.value;t.options.value=e+"";t.redraw()},_getBands:function(e,t){var i=this,n=i.contentBox,r=n.x1,a,o;var s=new p.Group;for(var l=0;l<e.length;l++){o=d(e[l])?e[l]:{width:e[l],y1:0,y2:i.barHeight};a=o.width*t;if(l%2){var u=h.Rect.fromPoints(new h.Point(r,o.y1+n.y1),new h.Point(r+a,o.y2+n.y1));var c=p.Path.fromRect(u,{fill:{color:i.options.color},stroke:null});s.append(c)}r+=a}return s},_getBackground:function(e){var t=this,i=t.options,n=i.border||{};var r=new _(0,0,e.width,e.height).unpad(n.width/2);var a=p.Path.fromRect(r.toRect(),{fill:{color:i.background},stroke:{color:n.width?n.color:"",width:n.width,dashType:n.dashType}});return a},_getText:function(e){var t=this,i=t.options.text,n=t._textbox=new y(e,{font:i.font,color:i.color,align:"center",vAlign:"bottom",margin:i.margin});n.reflow(t.contentBox);n.renderVisual();return n.visual},_setOptions:function(e){var t=this;t.type=(e.type||t.options.type).toLowerCase();if(t.type=="upca"){t.type="ean13";e.value="0"+e.value}if(t.type=="upce"){t.type="ean8";e.value="0"+e.value}if(!r[t.type])throw new Error("Encoding "+t.type+"is not supported.");t.encoding=new r[t.type];t.options=c(true,t.options,e)},options:{name:"Barcode",renderAs:"svg",value:"",type:"code39",checksum:false,width:0,height:0,color:"black",background:"white",text:{visible:true,font:"16px Consolas, Monaco, Sans Mono, monospace, sans-serif",color:"black",margin:{top:0,bottom:0,left:0,right:0}},border:{width:0,dashType:"solid",color:"black"},padding:{top:0,bottom:0,left:0,right:0}}}));return v.ExportMixin.extend(P.fn),v.ui.plugin(P),t.deepExtend(v,{encodings:r,Encoding:i}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.dataviz.qrcode.min",["kendo.dataviz.core.min","kendo.drawing.min"],function(){var t={id:"dataviz.qrcode",name:"QRCode",category:"dataviz",description:"QRCode widget.",depends:["dataviz.core","drawing"]},n=window.kendo.jQuery,h=void 0,u=window.kendo,i=n.extend,f=u.drawing,o=u.dataviz,s=u.ui.Widget,l=o.Box2D,c="0000",m="numeric",_="alphanumeric",y="byte",b={1:0},a={0:1},w=[[1,0],[1,25,0]],x={15:20,16:20,18:24,19:24,22:20,24:22,26:24,28:20,30:20,31:24,32:28,33:24,36:18,37:22,39:20,40:24},d=[{L:{groups:[[1,19]],totalDataCodewords:19,errorCodewordsPerBlock:7},M:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:10},Q:{groups:[[1,13]],totalDataCodewords:13,errorCodewordsPerBlock:13},H:{groups:[[1,9]],totalDataCodewords:9,errorCodewordsPerBlock:17}},{L:{groups:[[1,34]],totalDataCodewords:34,errorCodewordsPerBlock:10},M:{groups:[[1,28]],totalDataCodewords:28,errorCodewordsPerBlock:16},Q:{groups:[[1,22]],totalDataCodewords:22,errorCodewordsPerBlock:22},H:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:28}},{L:{groups:[[1,55]],totalDataCodewords:55,errorCodewordsPerBlock:15},M:{groups:[[1,44]],totalDataCodewords:44,errorCodewordsPerBlock:26},Q:{groups:[[2,17]],totalDataCodewords:34,errorCodewordsPerBlock:18},H:{groups:[[2,13]],totalDataCodewords:26,errorCodewordsPerBlock:22}},{L:{groups:[[1,80]],totalDataCodewords:80,errorCodewordsPerBlock:20},M:{groups:[[2,32]],totalDataCodewords:64,errorCodewordsPerBlock:18},Q:{groups:[[2,24]],totalDataCodewords:48,errorCodewordsPerBlock:26},H:{groups:[[4,9]],totalDataCodewords:36,errorCodewordsPerBlock:16}},{L:{groups:[[1,108]],totalDataCodewords:108,errorCodewordsPerBlock:26},M:{groups:[[2,43]],totalDataCodewords:86,errorCodewordsPerBlock:24},Q:{groups:[[2,15],[2,16]],totalDataCodewords:62,errorCodewordsPerBlock:18},H:{groups:[[2,11],[2,12]],totalDataCodewords:46,errorCodewordsPerBlock:22}},{L:{groups:[[2,68]],totalDataCodewords:136,errorCodewordsPerBlock:18},M:{groups:[[4,27]],totalDataCodewords:108,errorCodewordsPerBlock:16},Q:{groups:[[4,19]],totalDataCodewords:76,errorCodewordsPerBlock:24},H:{groups:[[4,15]],totalDataCodewords:60,errorCodewordsPerBlock:28}},{L:{groups:[[2,78]],totalDataCodewords:156,errorCodewordsPerBlock:20},M:{groups:[[4,31]],totalDataCodewords:124,errorCodewordsPerBlock:18},Q:{groups:[[2,14],[4,15]],totalDataCodewords:88,errorCodewordsPerBlock:18},H:{groups:[[4,13],[1,14]],totalDataCodewords:66,errorCodewordsPerBlock:26}},{L:{groups:[[2,97]],totalDataCodewords:194,errorCodewordsPerBlock:24},M:{groups:[[2,38],[2,39]],totalDataCodewords:154,errorCodewordsPerBlock:22},Q:{groups:[[4,18],[2,19]],totalDataCodewords:110,errorCodewordsPerBlock:22},H:{groups:[[4,14],[2,15]],totalDataCodewords:86,errorCodewordsPerBlock:26}},{L:{groups:[[2,116]],totalDataCodewords:232,errorCodewordsPerBlock:30},M:{groups:[[3,36],[2,37]],totalDataCodewords:182,errorCodewordsPerBlock:22},Q:{groups:[[4,16],[4,17]],totalDataCodewords:132,errorCodewordsPerBlock:20},H:{groups:[[4,12],[4,13]],totalDataCodewords:100,errorCodewordsPerBlock:24}},{L:{groups:[[2,68],[2,69]],totalDataCodewords:274,errorCodewordsPerBlock:18},M:{groups:[[4,43],[1,44]],totalDataCodewords:216,errorCodewordsPerBlock:26},Q:{groups:[[6,19],[2,20]],totalDataCodewords:154,errorCodewordsPerBlock:24},H:{groups:[[6,15],[2,16]],totalDataCodewords:122,errorCodewordsPerBlock:28}},{L:{groups:[[4,81]],totalDataCodewords:324,errorCodewordsPerBlock:20},M:{groups:[[1,50],[4,51]],totalDataCodewords:254,errorCodewordsPerBlock:30},Q:{groups:[[4,22],[4,23]],totalDataCodewords:180,errorCodewordsPerBlock:28},H:{groups:[[3,12],[8,13]],totalDataCodewords:140,errorCodewordsPerBlock:24}},{L:{groups:[[2,92],[2,93]],totalDataCodewords:370,errorCodewordsPerBlock:24},M:{groups:[[6,36],[2,37]],totalDataCodewords:290,errorCodewordsPerBlock:22},Q:{groups:[[4,20],[6,21]],totalDataCodewords:206,errorCodewordsPerBlock:26},H:{groups:[[7,14],[4,15]],totalDataCodewords:158,errorCodewordsPerBlock:28}},{L:{groups:[[4,107]],totalDataCodewords:428,errorCodewordsPerBlock:26},M:{groups:[[8,37],[1,38]],totalDataCodewords:334,errorCodewordsPerBlock:22},Q:{groups:[[8,20],[4,21]],totalDataCodewords:244,errorCodewordsPerBlock:24},H:{groups:[[12,11],[4,12]],totalDataCodewords:180,errorCodewordsPerBlock:22}},{L:{groups:[[3,115],[1,116]],totalDataCodewords:461,errorCodewordsPerBlock:30},M:{groups:[[4,40],[5,41]],totalDataCodewords:365,errorCodewordsPerBlock:24},Q:{groups:[[11,16],[5,17]],totalDataCodewords:261,errorCodewordsPerBlock:20},H:{groups:[[11,12],[5,13]],totalDataCodewords:197,errorCodewordsPerBlock:24}},{L:{groups:[[5,87],[1,88]],totalDataCodewords:523,errorCodewordsPerBlock:22},M:{groups:[[5,41],[5,42]],totalDataCodewords:415,errorCodewordsPerBlock:24},Q:{groups:[[5,24],[7,25]],totalDataCodewords:295,errorCodewordsPerBlock:30},H:{groups:[[11,12],[7,13]],totalDataCodewords:223,errorCodewordsPerBlock:24}},{L:{groups:[[5,98],[1,99]],totalDataCodewords:589,errorCodewordsPerBlock:24},M:{groups:[[7,45],[3,46]],totalDataCodewords:453,errorCodewordsPerBlock:28},Q:{groups:[[15,19],[2,20]],totalDataCodewords:325,errorCodewordsPerBlock:24},H:{groups:[[3,15],[13,16]],totalDataCodewords:253,errorCodewordsPerBlock:30}},{L:{groups:[[1,107],[5,108]],totalDataCodewords:647,errorCodewordsPerBlock:28},M:{groups:[[10,46],[1,47]],totalDataCodewords:507,errorCodewordsPerBlock:28},Q:{groups:[[1,22],[15,23]],totalDataCodewords:367,errorCodewordsPerBlock:28},H:{groups:[[2,14],[17,15]],totalDataCodewords:283,errorCodewordsPerBlock:28}},{L:{groups:[[5,120],[1,121]],totalDataCodewords:721,errorCodewordsPerBlock:30},M:{groups:[[9,43],[4,44]],totalDataCodewords:563,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[1,23]],totalDataCodewords:397,errorCodewordsPerBlock:28},H:{groups:[[2,14],[19,15]],totalDataCodewords:313,errorCodewordsPerBlock:28}},{L:{groups:[[3,113],[4,114]],totalDataCodewords:795,errorCodewordsPerBlock:28},M:{groups:[[3,44],[11,45]],totalDataCodewords:627,errorCodewordsPerBlock:26},Q:{groups:[[17,21],[4,22]],totalDataCodewords:445,errorCodewordsPerBlock:26},H:{groups:[[9,13],[16,14]],totalDataCodewords:341,errorCodewordsPerBlock:26}},{L:{groups:[[3,107],[5,108]],totalDataCodewords:861,errorCodewordsPerBlock:28},M:{groups:[[3,41],[13,42]],totalDataCodewords:669,errorCodewordsPerBlock:26},Q:{groups:[[15,24],[5,25]],totalDataCodewords:485,errorCodewordsPerBlock:30},H:{groups:[[15,15],[10,16]],totalDataCodewords:385,errorCodewordsPerBlock:28}},{L:{groups:[[4,116],[4,117]],totalDataCodewords:932,errorCodewordsPerBlock:28},M:{groups:[[17,42]],totalDataCodewords:714,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[6,23]],totalDataCodewords:512,errorCodewordsPerBlock:28},H:{groups:[[19,16],[6,17]],totalDataCodewords:406,errorCodewordsPerBlock:30}},{L:{groups:[[2,111],[7,112]],totalDataCodewords:1006,errorCodewordsPerBlock:28},M:{groups:[[17,46]],totalDataCodewords:782,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[16,25]],totalDataCodewords:568,errorCodewordsPerBlock:30},H:{groups:[[34,13]],totalDataCodewords:442,errorCodewordsPerBlock:24}},{L:{groups:[[4,121],[5,122]],totalDataCodewords:1094,errorCodewordsPerBlock:30},M:{groups:[[4,47],[14,48]],totalDataCodewords:860,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[14,25]],totalDataCodewords:614,errorCodewordsPerBlock:30},H:{groups:[[16,15],[14,16]],totalDataCodewords:464,errorCodewordsPerBlock:30}},{L:{groups:[[6,117],[4,118]],totalDataCodewords:1174,errorCodewordsPerBlock:30},M:{groups:[[6,45],[14,46]],totalDataCodewords:914,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[16,25]],totalDataCodewords:664,errorCodewordsPerBlock:30},H:{groups:[[30,16],[2,17]],totalDataCodewords:514,errorCodewordsPerBlock:30}},{L:{groups:[[8,106],[4,107]],totalDataCodewords:1276,errorCodewordsPerBlock:26},M:{groups:[[8,47],[13,48]],totalDataCodewords:1e3,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[22,25]],totalDataCodewords:718,errorCodewordsPerBlock:30},H:{groups:[[22,15],[13,16]],totalDataCodewords:538,errorCodewordsPerBlock:30}},{L:{groups:[[10,114],[2,115]],totalDataCodewords:1370,errorCodewordsPerBlock:28},M:{groups:[[19,46],[4,47]],totalDataCodewords:1062,errorCodewordsPerBlock:28},Q:{groups:[[28,22],[6,23]],totalDataCodewords:754,errorCodewordsPerBlock:28},H:{groups:[[33,16],[4,17]],totalDataCodewords:596,errorCodewordsPerBlock:30}},{L:{groups:[[8,122],[4,123]],totalDataCodewords:1468,errorCodewordsPerBlock:30},M:{groups:[[22,45],[3,46]],totalDataCodewords:1128,errorCodewordsPerBlock:28},Q:{groups:[[8,23],[26,24]],totalDataCodewords:808,errorCodewordsPerBlock:30},H:{groups:[[12,15],[28,16]],totalDataCodewords:628,errorCodewordsPerBlock:30}},{L:{groups:[[3,117],[10,118]],totalDataCodewords:1531,errorCodewordsPerBlock:30},M:{groups:[[3,45],[23,46]],totalDataCodewords:1193,errorCodewordsPerBlock:28},Q:{groups:[[4,24],[31,25]],totalDataCodewords:871,errorCodewordsPerBlock:30},H:{groups:[[11,15],[31,16]],totalDataCodewords:661,errorCodewordsPerBlock:30}},{L:{groups:[[7,116],[7,117]],totalDataCodewords:1631,errorCodewordsPerBlock:30},M:{groups:[[21,45],[7,46]],totalDataCodewords:1267,errorCodewordsPerBlock:28},Q:{groups:[[1,23],[37,24]],totalDataCodewords:911,errorCodewordsPerBlock:30},H:{groups:[[19,15],[26,16]],totalDataCodewords:701,errorCodewordsPerBlock:30}},{L:{groups:[[5,115],[10,116]],totalDataCodewords:1735,errorCodewordsPerBlock:30},M:{groups:[[19,47],[10,48]],totalDataCodewords:1373,errorCodewordsPerBlock:28},Q:{groups:[[15,24],[25,25]],totalDataCodewords:985,errorCodewordsPerBlock:30},H:{groups:[[23,15],[25,16]],totalDataCodewords:745,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[3,116]],totalDataCodewords:1843,errorCodewordsPerBlock:30},M:{groups:[[2,46],[29,47]],totalDataCodewords:1455,errorCodewordsPerBlock:28},Q:{groups:[[42,24],[1,25]],totalDataCodewords:1033,errorCodewordsPerBlock:30},H:{groups:[[23,15],[28,16]],totalDataCodewords:793,errorCodewordsPerBlock:30}},{L:{groups:[[17,115]],totalDataCodewords:1955,errorCodewordsPerBlock:30},M:{groups:[[10,46],[23,47]],totalDataCodewords:1541,errorCodewordsPerBlock:28},Q:{groups:[[10,24],[35,25]],totalDataCodewords:1115,errorCodewordsPerBlock:30},H:{groups:[[19,15],[35,16]],totalDataCodewords:845,errorCodewordsPerBlock:30}},{L:{groups:[[17,115],[1,116]],totalDataCodewords:2071,errorCodewordsPerBlock:30},M:{groups:[[14,46],[21,47]],totalDataCodewords:1631,errorCodewordsPerBlock:28},Q:{groups:[[29,24],[19,25]],totalDataCodewords:1171,errorCodewordsPerBlock:30},H:{groups:[[11,15],[46,16]],totalDataCodewords:901,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[6,116]],totalDataCodewords:2191,errorCodewordsPerBlock:30},M:{groups:[[14,46],[23,47]],totalDataCodewords:1725,errorCodewordsPerBlock:28},Q:{groups:[[44,24],[7,25]],totalDataCodewords:1231,errorCodewordsPerBlock:30},H:{groups:[[59,16],[1,17]],totalDataCodewords:961,errorCodewordsPerBlock:30}},{L:{groups:[[12,121],[7,122]],totalDataCodewords:2306,errorCodewordsPerBlock:30},M:{groups:[[12,47],[26,48]],totalDataCodewords:1812,errorCodewordsPerBlock:28},Q:{groups:[[39,24],[14,25]],totalDataCodewords:1286,errorCodewordsPerBlock:30},H:{groups:[[22,15],[41,16]],totalDataCodewords:986,errorCodewordsPerBlock:30}},{L:{groups:[[6,121],[14,122]],totalDataCodewords:2434,errorCodewordsPerBlock:30},M:{groups:[[6,47],[34,48]],totalDataCodewords:1914,errorCodewordsPerBlock:28},Q:{groups:[[46,24],[10,25]],totalDataCodewords:1354,errorCodewordsPerBlock:30},H:{groups:[[2,15],[64,16]],totalDataCodewords:1054,errorCodewordsPerBlock:30}},{L:{groups:[[17,122],[4,123]],totalDataCodewords:2566,errorCodewordsPerBlock:30},M:{groups:[[29,46],[14,47]],totalDataCodewords:1992,errorCodewordsPerBlock:28},Q:{groups:[[49,24],[10,25]],totalDataCodewords:1426,errorCodewordsPerBlock:30},H:{groups:[[24,15],[46,16]],totalDataCodewords:1096,errorCodewordsPerBlock:30}},{L:{groups:[[4,122],[18,123]],totalDataCodewords:2702,errorCodewordsPerBlock:30},M:{groups:[[13,46],[32,47]],totalDataCodewords:2102,errorCodewordsPerBlock:28},Q:{groups:[[48,24],[14,25]],totalDataCodewords:1502,errorCodewordsPerBlock:30},H:{groups:[[42,15],[32,16]],totalDataCodewords:1142,errorCodewordsPerBlock:30}},{L:{groups:[[20,117],[4,118]],totalDataCodewords:2812,errorCodewordsPerBlock:30},M:{groups:[[40,47],[7,48]],totalDataCodewords:2216,errorCodewordsPerBlock:28},Q:{groups:[[43,24],[22,25]],totalDataCodewords:1582,errorCodewordsPerBlock:30},H:{groups:[[10,15],[67,16]],totalDataCodewords:1222,errorCodewordsPerBlock:30}},{L:{groups:[[19,118],[6,119]],totalDataCodewords:2956,errorCodewordsPerBlock:30},M:{groups:[[18,47],[31,48]],totalDataCodewords:2334,errorCodewordsPerBlock:28},Q:{groups:[[34,24],[34,25]],totalDataCodewords:1666,errorCodewordsPerBlock:30},H:{groups:[[20,15],[61,16]],totalDataCodewords:1276,errorCodewordsPerBlock:30}}],k=[1,0,1,1,1],C=[1,0,1],S={L:"01",M:"00",Q:"11",H:"10"},T="101010000010010",A="10100110111",M="1111100100101",D=["11101100","00010001"],E=93,I=[function(e,t){return(e+t)%2===0},function(e){return e%2===0},function(e,t){return t%3===0},function(e,t){return(e+t)%3===0},function(e,t){return(Math.floor(e/2)+Math.floor(t/3))%2===0},function(e,t){return e*t%2+e*t%3===0},function(e,t){return(e*t%2+e*t%3)%2===0},function(e,t){return((e+t)%2+e*t%3)%2===0}],P=/^\d+/,B="A-Z0-9 $%*+./:-",O,z=new RegExp("^["+"A-Z $%*+./:-"+"]+"),L=new RegExp("^["+B+"]+"),R=new RegExp("^[^"+B+"]+"),F=8,V=5,N=8,H=17,U=9,j=16,p=Math.round,G="image",W="swiss",q=[[0,1],[1,1],[1,2],[2,2],[2,1],[3,1],[3,0],[2,0],[2,-1],[1,-1],[1,0]],Y=[[0,1],[1,1],[1,0]],$=7;function X(e){return parseInt(e,2)}function v(e,t){var i=Number(e).toString(2);if(i.length<t)i=new Array(t-i.length+1).join(0)+i;return i}function K(e,t){var i=[],n=0;while(n<e.length){i.push(e.substring(n,n+t));n+=t}return i}var Q=u.Class.extend({getVersionIndex:function(e){if(e<10)return 0;else if(e>26)return 2;return 1},getBitsCharacterCount:function(e){var t=this;return t.bitsInCharacterCount[t.getVersionIndex(e||40)]},getModeCountString:function(e,t){var i=this;return i.modeIndicator+v(e,i.getBitsCharacterCount(t))},encode:function(){},getStringBitsLength:function(){},getValue:function(){},modeIndicator:"",bitsInCharacterCount:[]}),e={},Z=(e[m]=Q.extend({bitsInCharacterCount:[10,12,14],modeIndicator:"0001",getValue:function(e){return parseInt(e,10)},encode:function(e,t){var i=this,n=K(e,3),r=i.getModeCountString(e.length,t);for(var a=0;a<n.length-1;a++)r+=v(n[a],10);return r+v(n[a],1+3*n[a].length)},getStringBitsLength:function(e,t){var i=e%3;return 4+this.getBitsCharacterCount(t)+10*Math.floor(e/3)+3*i+(i===0?0:1)}}),e[_]=Q.extend({characters:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:18,J:19,K:20,L:21,M:22,N:23,O:24,P:25,Q:26,R:27,S:28,T:29,U:30,V:31,W:32,X:33,Y:34,Z:35," ":36,$:37,"%":38,"*":39,"+":40,"-":41,".":42,"/":43,":":44},bitsInCharacterCount:[9,11,13],modeIndicator:"0010",getValue:function(e){return this.characters[e]},encode:function(e,t){var i=this,n=K(e,2),r=i.getModeCountString(e.length,t),a;for(var o=0;o<n.length-1;o++){a=45*i.getValue(n[o].charAt(0))+i.getValue(n[o].charAt(1));r+=v(a,11)}a=n[o].length==2?45*i.getValue(n[o].charAt(0))+i.getValue(n[o].charAt(1)):i.getValue(n[o].charAt(0));return r+v(a,1+5*n[o].length)},getStringBitsLength:function(e,t){return 4+this.getBitsCharacterCount(t)+11*Math.floor(e/2)+6*(e%2)}}),e[y]=Q.extend({bitsInCharacterCount:[8,16,16],modeIndicator:"0100",getValue:function(e){var t=e.charCodeAt(0);if(t<=127||160<=t&&t<=255)return t;else throw new Error("Unsupported character: "+e)},encode:function(e,t){var i=this,n=i.getModeCountString(e.length,t);for(var r=0;r<e.length;r++)n+=v(i.getValue(e.charAt(r)),8);return n},getStringBitsLength:function(e,t){return 4+this.getBitsCharacterCount(t)+8*e}}),{}),J;for(J in e)Z[J]=new e[J];var ee=function(e){var t=this,i=e.length-1,n=e.length-1,r=n,a=-1,o=0;t.move=function(){i+=a*o;o^=1;n=r-o};t.getNextCell=function(){while(e[i][n]!==h){t.move();if(i<0||i>=e.length){a=-a;r-=r!=8?2:3;n=r;i=a<0?e.length-1:0}}return{row:i,column:n}};t.getNextRemainderCell=function(){t.move();if(e[i][n]===h)return{row:i,column:n}}};function g(e,t,i,n){for(var r=0;r<e.length;r++)e[r][i][n]=t}function te(e,t,i,n){for(var r=0;r<I.length;r++)e[r][i][n]=I[r](i,n)?t^1:parseInt(t,10)}var ie=function(e,t){var i=new ee(e[0]),n,r,a;for(var o=0;o<t.length;o++){n=t[o];r=0;while(n.length>0){for(var s=0;s<n.length;s++)for(var l=0;l<8;l++){a=i.getNextCell();te(e,n[s][r].charAt(l),a.row,a.column)}r++;while(n[0]&&r==n[0].length)n.splice(0,1)}}while(a=i.getNextRemainderCell())te(e,0,a.row,a.column)},ne=function(e,t){var i=t*8,n=0,r=0;while(e.length<i&&n<c.length)e+=c.charAt(n++);if(e.length%8!==0)e+=new Array(9-e.length%8).join("0");while(e.length<i){e+=D[r];r^=1}return e};function re(){var e;for(var t=1;t<255;t++){e=a[t-1]*2;if(e>255)e=e^285;a[t]=e;b[e]=t}e=a[t-1]*2^285;a[t]=e;a[-1]=0}var ae=function(e,t){var i=[],n=e.length-2;for(var r=n;r>=0;r--)i[r]=e[r]^t[r];return i},oe=function(e,t){var i=[];for(var n=0;n<e.length;n++)for(var r=0;r<t.length;r++)if(i[n+r]===h)i[n+r]=(e[n]+(t[r]>=0?t[r]:0))%255;else i[n+r]=b[a[i[n+r]]^a[(e[n]+t[r])%255]];return i};function se(){var e=68;for(var t=2;t<=e;t++){var i=w[t-1],n=[t,0];w[t]=oe(i,n)}}function le(e,t){var i=[],n=e.length-1;do{i[n]=a[(e[n]+t)%255];n--}while(e[n]!==h);return i}re(),se();var ue=function(e,t){var i=w[t-1],n=new Array(t).concat(e),r=new Array(n.length-i.length).concat(i),a=e.length,o=[],s,l;for(l=0;l<a;l++){s=le(r,b[n[n.length-1]]);r.splice(0,1);n=ae(s,n)}for(l=n.length-1;l>=0;l--)o[t-1-l]=v(n[l],8);return o},ce=function(c,e){var t=0,i=[],h=[],n,r=e.groups,a,f,o,s;for(var l=0;l<r.length;l++){f=r[l][0];for(var d=0;d<f;d++){a=r[l][1];n=[];o=[];for(var u=1;u<=a;u++){s=c.substring(t,t+8);n.push(s);o[a-u]=X(s);t+=8}i.push(n);h.push(ue(o,e.errorCodewordsPerBlock))}}return[i,h]},he=function(e,t,i,c,h){var n=P.exec(e),r=n?n[0]:"",a=z.exec(e),f=a?a[0]:"",o=L.exec(e),s=o?o[0]:"",l,u;if(r&&(r.length>=t||e.length==r.length||r.length>=i&&!L.test(e.charAt(r.length)))){l=m;u=r}else if(s&&(e.length==s.length||s.length>=c||h==_)){l=_;u=r||f}else{l=y;if(s)u=s+R.exec(e.substring(s.length))[0];else u=R.exec(e)[0]}return{mode:l,modeString:u}},fe=function(e){var t=[],i,n=0;t.push(he(e,F,V,N,i));i=t[0].mode;e=e.substr(t[0].modeString.length);while(e.length>0){var r=he(e,H,U,j,i);if(r.mode!=i){i=r.mode;t.push(r);n++}else t[n].modeString+=r.modeString;e=e.substr(r.modeString.length)}return t},de=function(e){var t=0,i;for(var n=0;n<e.length;n++){i=Z[e[n].mode];t+=i.getStringBitsLength(e[n].modeString.length)}return Math.ceil(t/8)},pe=function(e,t){var i=0,n=d.length-1,r=Math.floor(d.length/2);do{if(e<d[r][t].totalDataCodewords)n=r;else i=r;r=i+Math.floor((n-i)/2)}while(n-i>1);if(e<=d[i][t].totalDataCodewords)return r+1;return n+1},ve=function(e,t){var i="",n;for(var r=0;r<e.length;r++){n=Z[e[r].mode];i+=n.encode(e[r].modeString,t)}return i},ge=function(e){var t=X(e),i,n="";if(t===0)return"101010000010010";else i=me(X(e),A,15);for(var r=0;r<i.length;r++)n+=i.charAt(r)^T.charAt(r);return n},me=function(e,t,i){var n=X(t),r=t.length-1,a=e<<r,o=i-r,s=v(e,o),l=_e(a,n);l=s+v(l,r);return l},_e=function(e,t){var i=t.toString(2).length,n=e.toString(2).length;do{e^=t<<n-i;n=e.toString(2).length}while(n>=i);return e};function ye(e,t){return parseInt(e.charAt(t),10)}var be=function(e){var t=[],i=17+4*e;for(var n=0;n<I.length;n++){t[n]=new Array(i);for(var r=0;r<i;r++)t[n][r]=new Array(i)}return t},we=function(e,t){var i=e[0],n,r,a=0,o=t.length;for(n=0,r=8;n<=8;n++)if(n!==6)g(e,ye(t,o-1-a++),n,r);for(n=8,r=7;r>=0;r--)if(r!==6)g(e,ye(t,o-1-a++),n,r);a=0;for(r=i.length-1,n=8;r>=i.length-8;r--)g(e,ye(t,o-1-a++),n,r);g(e,1,i.length-8,8);for(n=i.length-7,r=8;n<i.length;n++)g(e,ye(t,o-1-a++),n,r)},xe=function(e){return me(e,M,18)},ke=function(e,t){var i=e[0],n=i.length,r=0,a=n-11,c=n-11,h=0,o,s,l;for(var u=0;u<t.length;u++){o=Math.floor(u/3);s=u%3;l=ye(t,t.length-u-1);g(e,l,r+o,a+s);g(e,l,c+s,h+o)}},Ce=function(e,t,i,n){var r=t.length+2,a=t.length+1,o;for(var s=0;s<t.length;s++)for(var l=s;l<r-s;l++){o=t[s];g(e,o,i+l,n+s);g(e,o,i+s,n+l);g(e,o,i+a-l,n+a-s);g(e,o,i+a-s,n+a-l)}},Se=function(e,t,i,n){var r=i,a=n,o=e[0];do{g(e,0,r,n);g(e,0,i,a);r+=t[0];a+=t[1]}while(r>=0&&r<o.length)},Te=function(e){var t=e[0].length;Ce(e,k,0,0);Se(e,[-1,-1],7,7);Ce(e,k,t-7,0);Se(e,[1,-1],t-8,7);Ce(e,k,0,t-7);Se(e,[-1,1],7,t-8)},Ae=function(e,t){if(t<2)return;var i=e[0],n=i.length,c=Math.floor(t/7),r=[6],a,o,s=0;if(a=x[t])o=(n-13-a)/c;else a=o=(n-13)/(c+1);r.push(r[s++]+a);while(r[s]+o<n)r.push(r[s++]+o);for(var l=0;l<r.length;l++)for(var u=0;u<r.length;u++)if(i[r[l]][r[u]]===h)Ce(e,C,r[l]-2,r[u]-2)},Me=function(e){var t=6,i=6,n=1,r=e[0].length;for(var a=8;a<r-8;a++){g(e,n,t,a);g(e,n,a,i);n^=1}},De=function(e){var t=[],i=[],n=[],c=[],h=[],r,a,o=0,f=1,s=e[0].length;for(a=0;a<e.length;a++){t[a]=0;n[a]=0;h[a]=[0,0];c[a]=[0,0];i[a]=[]}for(a=0;a<s;a++)for(var l=0;l<s;l++)for(var u=0;u<e.length;u++){r=e[u];n[u]+=parseInt(r[a][l],10);if(i[u][o]===r[a][l]&&a+1<s&&l-1>=0&&r[a+1][l]==i[u][o]&&r[a+1][l-1]==i[u][o])t[u]+=3;Ee(u,c,t,o,r[a][l]);Ee(u,c,t,f,r[l][a]);Ie(u,t,i,r[a][l],h,o);Ie(u,t,i,r[l][a],h,f)}var d=s*s,p,v=Number.MAX_VALUE;for(a=0;a<t.length;a++){t[a]+=Pe(n[a],d);if(t[a]<v){v=t[a];p=a}}return p};function Ee(e,t,i,n,r){t[e][n]=(t[e][n]<<1^r)%128;if(t[e][n]==E)i[e]+=40}function Ie(e,t,i,n,r,a){if(i[e][a]==n)r[e][a]++;else{i[e][a]=n;if(r[e][a]>=5)t[e]+=3+r[e][a]-5;r[e][a]=1}}function Pe(e,t){var i=Math.floor(e/t*100),n=i%5,r=Math.abs(i-n-50),a=Math.abs(i+5-n-50),o=10*Math.min(r/5,a/5);return o}var Be=function(e,t){this.dataString=e;this.version=t},Oe=function(){this.getEncodingResult=function(e,t){var i=fe(e),n=de(i),r=pe(n,t),a=ve(i,r);return new Be(a,r)}},ze=function(){this.mode=Z[this.encodingMode]},Le=(ze.fn=ze.prototype={encodingMode:y,utfBOM:"111011111011101110111111",initialModeCountStringLength:20,getEncodingResult:function(e,t){var i=this,n=i.encode(e),r=i.getDataCodewordsCount(n),a=pe(r,t),o=i.mode.getModeCountString(n.length/8,a)+n;return new Be(o,a)},getDataCodewordsCount:function(e){var t=this,i=e.length,n=Math.ceil((t.initialModeCountStringLength+i)/8);return n},encode:function(e){var t=this,i=t.utfBOM;for(var n=0;n<e.length;n++)i+=t.encodeCharacter(e.charCodeAt(n));return i},encodeCharacter:function(e){var t=this.getBytesCount(e),i=t-1,n="";if(t==1)n=v(e,8);else{var r=8-t;for(var a=0;a<i;a++)n=v(e>>a*6&63|128,8)+n;n=(e>>i*6|255>>r<<r).toString(2)+n}return n},getBytesCount:function(e){var t=this.ranges;for(var i=0;i<t.length;i++)if(e<t[i])return i+1},ranges:[128,2048,65536,2097152,67108864]},function(e){if(e&&e.toLowerCase().indexOf("utf_8")>=0)return new ze;else return new Oe}),Re=function(e,t,i){var n=new Le(i),r=n.getEncodingResult(e,t),a=r.version,o=d[a-1][t],c=ne(r.dataString,o.totalDataCodewords),h=ce(c,o),s=be(a);Te(s);Ae(s,a);Me(s);if(a>=7)ke(s,v(0,18));we(s,v(0,15));ie(s,h);var l=De(s),u=s[l];if(a>=7)ke([u],xe(a));var f=S[t]+v(l,3);we([u],ge(f));return u},r={DEFAULT_SIZE:200,QUIET_ZONE_LENGTH:4,DEFAULT_ERROR_CORRECTION_LEVEL:"L",DEFAULT_BACKGROUND:"#fff",DEFAULT_DARK_MODULE_COLOR:"#000",MIN_BASE_UNIT_SIZE:1},Fe=s.extend({init:function(e,t){var i=this;s.fn.init.call(i,e,t);i.element=n(e);i.wrapper=i.element;i.element.addClass("k-qrcode");i.surfaceWrap=n("<div />").css("position","relative").appendTo(this.element);i.surface=f.Surface.create(i.surfaceWrap,{type:i.options.renderAs});i.setOptions(t)},redraw:function(){var e=this._getSize();this.surfaceWrap.css({width:e,height:e});this.surface.clear();this.surface.resize();this.createVisual();this.surface.draw(this.visual)},getSize:function(){return u.dimensions(this.element)},_resize:function(){this.redraw()},createVisual:function(){this.visual=this._render()},exportVisual:function(){return this._render()},_render:function(){var e=this,t=e._value,i,n=e.options.border||{},r=e.options.padding||0,a=n.width||0,c,o,s,h,l;n.width=a;var u=new f.Group;if(t){o=Re(t,e.options.errorCorrection,e.options.encoding);s=e._getSize();l=s-2*(a+r);i=e._calculateBaseUnit(l,o.length);h=o.length*i;c=a+r+(l-h)/2;u.append(e._renderBackground(s,n));u.append(e._renderMatrix(o,i,c));if(e._hasCustomLogo())u.append(e._renderLogo(s,i));else if(e._isSwiss())u.append(e._renderSwissCode(s,i))}return u},_renderLogo:function e(t,i){var n;var r;var a=p(t/2);var o=this._getLogoSize(i*$);var s=this.options.overlay.imageUrl;var l={x:a-o.width/2,y:a-o.height/2};r=new u.geometry.Rect(new u.geometry.Point(l.x,l.y),new u.geometry.Size(o.width,o.height));n=new f.Image(s,r);return n},_renderSwissCode:function(e,t){var i=this._getLogoSize(t*$);i=Math.max(i.width,i.height);var n=i/4;var r=n/2;var a=e/2;var o={};var s=new f.Group;o.x=o.y=Math.ceil(a-t-i/2);s.append(this._renderShape(o,Math.ceil(i+t*2),Y,"#fff"));o.x=o.y=a-i/2;s.append(this._renderShape(o,i,Y,this.options.color));o.x=a+r-i/2;o.y=a+r+n-i/2;s.append(this._renderShape(o,n,q,"#fff"));return s},_renderShape:function(e,t,i,n){var r=new f.MultiPath({fill:{color:n},stroke:null});r.moveTo(e.x,e.y);for(var a=0;a<i.length;a++)r.lineTo(e.x+t*i[a][0],e.y+t*i[a][1]);r.close();return r},_getSize:function(){var e=this,t;if(e.options.size)t=parseInt(e.options.size,10);else{var i=e.element,n=Math.min(i.width(),i.height());if(n>0)t=n;else t=r.DEFAULT_SIZE}return t},_calculateBaseUnit:function(e,t){var i=Math.floor(e/t);if(i<r.MIN_BASE_UNIT_SIZE)throw new Error("Insufficient size.");if(i*t>=e&&i-1>=r.MIN_BASE_UNIT_SIZE)i--;return i},_renderMatrix:function(e,t,i){var n=new f.MultiPath({fill:{color:this.options.color},stroke:null});for(var r=0;r<e.length;r++){var a=i+r*t;var o=0;while(o<e.length){while(e[r][o]===0&&o<e.length)o++;if(o<e.length){var c=o;while(e[r][o]==1)o++;var s=p(i+c*t);var l=p(a);var u=p(i+o*t);var h=p(a+t);n.moveTo(s,l).lineTo(s,h).lineTo(u,h).lineTo(u,l).close()}}}return n},_renderBackground:function(e,t){var i=new l(0,0,e,e).unpad(t.width/2);return f.Path.fromRect(i.toRect(),{fill:{color:this.options.background},stroke:{color:t.color,width:t.width}})},setOptions:function(e){var t=this;e=e||{};t.options=i(t.options,e);if(e.value!==h)t._value=t.options.value+"";t.redraw()},value:function(e){var t=this;if(e===h)return t._value;t._value=e+"";t.redraw()},options:{name:"QRCode",renderAs:"svg",encoding:"ISO_8859_1",value:"",errorCorrection:r.DEFAULT_ERROR_CORRECTION_LEVEL,background:r.DEFAULT_BACKGROUND,color:r.DEFAULT_DARK_MODULE_COLOR,size:"",padding:0,border:{color:"",width:0},overlay:{type:G,imageUrl:"",width:0,height:0}},_hasCustomLogo:function(){return!!this.options.overlay.imageUrl},_isSwiss:function(){return this.options.overlay.type===W},_getLogoSize:function(e){var t=this.options.overlay.width;var i=this.options.overlay.height;if(!t&&!i)t=i=e;else if(t&&!i)i=t;else if(!t&&i)t=i;return{width:t,height:i}}});return o.ExportMixin.extend(Fe.fn),o.ui.plugin(Fe),u.deepExtend(o,{QRCode:Fe,QRCodeDefaults:r,QRCodeFunctions:{FreeCellVisitor:ee,fillData:ie,padDataString:ne,generateErrorCodewords:ue,xorPolynomials:ae,getBlocks:ce,multiplyPolynomials:oe,chooseMode:he,getModes:fe,getDataCodewordsCount:de,getVersion:pe,getDataString:ve,encodeFormatInformation:ge,encodeBCH:me,dividePolynomials:_e,initMatrices:be,addFormatInformation:we,encodeVersionInformation:xe,addVersionInformation:ke,addCentricPattern:Ce,addFinderSeparator:Se,addFinderPatterns:Te,addAlignmentPatterns:Ae,addTimingFunctions:Me,scoreMaskMatrixes:De,encodeData:Re,UTF8Encoder:ze},QRCodeFields:{modes:Z,powersOfTwo:b,powersOfTwoResult:a,generatorPolynomials:w}}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/stock/kendo-stock-chart.min",["kendo.dataviz.chart.min"],function(){window.kendo.dataviz=window.kendo.dataviz||{};var y=kendo.dataviz,b=y.elementStyles,u=y.deepExtend,w=y.toTime,c=y.constants,a=y.Chart,e=kendo.drawing,t=e.Animation.extend({setup:function(){this._initialOpacity=parseFloat(b(this.element,"opacity").opacity)},step:function(e){b(this.element,{opacity:String(y.interpolateValue(this._initialOpacity,0,e))})},abort:function(){e.Animation.fn.abort.call(this);b(this.element,{display:"none",opacity:String(this._initialOpacity)})},cancel:function(){e.Animation.fn.abort.call(this);b(this.element,{opacity:String(this._initialOpacity)})}});function n(e,t){var i=document.createElement("div");i.className=e;if(t)i.style.cssText=t;return i}var d=y.Class.extend({init:function(e,t,i){this.options=u({},this.options,i);this.container=e;this.chartService=t;var n=b(e,["paddingLeft","paddingTop"]);this.chartPadding={top:n.paddingTop,left:n.paddingLeft};this.createElements();e.appendChild(this.element)},createElements:function(){var e=this.element=n("k-navigator-hint","display: none; position: absolute; top: 1px; left: 1px;");var t=this.tooltip=n("k-tooltip k-chart-tooltip");var i=this.scroll=n("k-scroll");t.innerHTML="&nbsp;";e.appendChild(t);e.appendChild(i)},show:function(e,t,i){var n=this;var r=n.element;var a=n.options;var c=n.scroll;var o=n.tooltip;var h=y.toDate(w(e)+w(t-e)/2);var s=i.width()*.4;var l=i.center().x-s;var f=i.center().x;var d=f-l;var p=a.max-a.min;var v=d/p;var g=h-a.min;var m=this.chartService.intl.format(a.format,e,t);var _=y.getTemplate(a);this.clearHideTimeout();if(!this._visible){b(r,{visibility:"hidden",display:"block"});this._visible=true}if(_)m=_({from:e,to:t});o.innerHTML=m;b(o,{left:i.center().x-o.offsetWidth/2,top:i.y1});var u=b(o,["marginTop","borderTopWidth","height"]);b(c,{width:s,left:l+g*v,top:i.y1+u.marginTop+u.borderTopWidth+u.height/2});b(r,{visibility:"visible"})},clearHideTimeout:function(){if(this._hideTimeout)clearTimeout(this._hideTimeout);if(this._hideAnimation)this._hideAnimation.cancel()},hide:function(){var e=this;this.clearHideTimeout();this._hideTimeout=setTimeout(function(){e._visible=false;e._hideAnimation=new t(e.element);e._hideAnimation.setup();e._hideAnimation.play()},this.options.hideDelay)},destroy:function(){this.clearHideTimeout();if(this.container)this.container.removeChild(this.element);delete this.container;delete this.chartService;delete this.element;delete this.tooltip;delete this.scroll}}),h=(y.setDefaultOptions(d,{format:"{0:d} - {1:d}",hideDelay:500}),"_navigator"),f=h,i={NAVIGATOR_AXIS:f,NAVIGATOR_PANE:h},p=3,o=y.Class.extend({init:function(e){this.chart=e;var t=this.options=u({},this.options,e.options.navigator);var i=t.select;if(i){i.from=this.parseDate(i.from);i.to=this.parseDate(i.to)}if(!y.defined(t.hint.visible))t.hint.visible=t.visible;var n;this.chartObserver=new y.InstanceObserver(this,(n={},n[c.DRAG]="_drag",n[c.DRAG_END]="_dragEnd",n[c.ZOOM]="_zoom",n[c.ZOOM_END]="_zoomEnd",n));e.addObserver(this.chartObserver)},parseDate:function(e){return y.parseDate(this.chart.chartService.intl,e)},clean:function(){if(this.selection){this.selection.destroy();this.selection=null}if(this.hint){this.hint.destroy();this.hint=null}},destroy:function(){if(this.chart){this.chart.removeObserver(this.chartObserver);delete this.chart}this.clean()},redraw:function(){this._redrawSelf();this.initSelection()},initSelection:function(){var e=this;var t=e.chart;var i=e.options;var n=this.mainAxis();var r=n.roundedRange();var a=r.min;var o=r.max;var s=i.select;var l=s.from;var c=s.to;var h=s.mousewheel;var u=v(n);if(n.categoriesCount()===0)return;this.clean();u.box=n.box;this.selection=new y.Selection(t,u,{min:a,max:o,from:l||a,to:c||o,mousewheel:y.valueOrDefault(h,{zoom:"left"}),visible:i.visible},new y.InstanceObserver(this,{selectStart:"_selectStart",select:"_select",selectEnd:"_selectEnd"}));if(i.hint.visible)this.hint=new d(t.element,t.chartService,{min:a,max:o,template:y.getTemplate(i.hint),format:i.hint.format})},setRange:function(){var e=this.chart._createPlotArea(true);var t=e.namedCategoryAxes[f];var i=t.roundedRange();var n=i.min;var r=i.max;var a=this.options.select||{};var o=a.from||n;if(o<n)o=n;var s=a.to||r;if(s>r)s=r;this.options.select=u({},a,{from:o,to:s});this.filterAxes()},_redrawSelf:function(e){var t=this.chart._plotArea;if(t)t.redraw(y.last(t.panes),e)},redrawSlaves:function(){var e=this.chart;var t=e._plotArea;var i=t.panes.slice(0,-1);t.srcSeries=e.options.series;t.options.categoryAxis=e.options.categoryAxis;t.clearSeriesPointsCache();t.redraw(i)},_drag:function(e){var t=this;var i=t.chart;var n=t.selection;var c=i._eventCoordinates(e.originalEvent);var r=this.mainAxis();var a=r.roundedRange();var h=r.pane.box.containsPoint(c);var f=i._plotArea.categoryAxis;var d=e.axisRanges[f.options.name];var o=this.options.select;var s;if(!d||h||!n)return;if(o.from&&o.to)s=w(o.to)-w(o.from);else s=w(n.options.to)-w(n.options.from);var l=y.toDate(y.limitValue(w(d.min),a.min,w(a.max)-s));var u=y.toDate(y.limitValue(w(l)+s,w(a.min)+s,a.max));this.options.select={from:l,to:u};if(this.options.liveDrag){this.filterAxes();this.redrawSlaves()}n.set(l,u);this.showHint(l,u)},_dragEnd:function(){this.filterAxes();this.filter();this.redrawSlaves();if(this.hint)this.hint.hide()},readSelection:function(){var e=this;var t=e.selection.options;var i=t.from;var n=t.to;var r=e.options.select;r.from=i;r.to=n},filterAxes:function(){var e=this;var t=e.options.select;if(t===void 0)t={};var i=e.chart;var n=i.options.categoryAxis;var r=t.from;var a=t.to;for(var o=0;o<n.length;o++){var s=n[o];if(s.pane!==h){s.min=r;s.max=a}}},filter:function(){var e=this;var t=e.chart;var i=e.options.select;if(!t.requiresHandlers(["navigatorFilter"]))return;var n=this.mainAxis();var r={from:i.from,to:i.to};if(n.options.type!=="category"){var a=new y.DateCategoryAxis(u({baseUnit:"fit"},t.options.categoryAxis[0],{categories:[i.from,i.to]}),t.chartService).options;r.from=y.addDuration(a.min,-a.baseUnitStep,a.baseUnit);r.to=y.addDuration(a.max,a.baseUnitStep,a.baseUnit)}this.chart.trigger("navigatorFilter",r)},_zoom:function(e){var t=this;var i=t.chart._plotArea.categoryAxis;var n=t.selection;var r=t.options;var a=r.select;var o=r.liveDrag;var s=this.mainAxis();var l=e.delta;if(!n)return;var c=s.categoryIndex(n.options.from);var h=s.categoryIndex(n.options.to);var u=this.chart._eventCoordinates(e.originalEvent);e.originalEvent.preventDefault();if(Math.abs(l)>1)l*=p;if(h-c>1){n.zoom(l,u);this.readSelection()}else{i.options.min=a.from;a.from=i.scaleRange(-e.delta*this.chart._mousewheelZoomRate(),u).min}if(o){this.filterAxes();this.redrawSlaves()}n.set(a.from,a.to);this.showHint(this.options.select.from,this.options.select.to)},_zoomEnd:function(e){this._dragEnd(e)},showHint:function(e,t){var i=this.chart._plotArea;if(this.hint)this.hint.show(e,t,i.backgroundBox())},_selectStart:function(e){return this.chart._selectStart(e)},_select:function(e){this.showHint(e.from,e.to);return this.chart._select(e)},_selectEnd:function(e){if(this.hint)this.hint.hide();this.readSelection();this.filterAxes();this.filter();this.redrawSlaves();return this.chart._selectEnd(e)},mainAxis:function(){var e=this.chart._plotArea;if(e)return e.namedCategoryAxes[f]},select:function(e,t){var i=this.options.select;if(e&&t){i.from=this.parseDate(e);i.to=this.parseDate(t);this.filterAxes();this.filter();this.redrawSlaves();this.selection.set(e,t)}return{from:i.from,to:i.to}}});function r(){}function v(e){r.prototype=e;return new r}o.setup=function(e,t){if(e===void 0)e={};if(t===void 0)t={};if(e.__navi)return;e.__navi=true;var i=u({},t.navigator,e.navigator);var n=e.panes=[].concat(e.panes);var r=u({},i.pane,{name:h});if(!i.visible){r.visible=false;r.height=.1}n.push(r);o.attachAxes(e,i);o.attachSeries(e,i,t)},o.attachAxes=function(e,t){var i=t.series||[];var n=e.categoryAxis=[].concat(e.categoryAxis);var r=e.valueAxis=[].concat(e.valueAxis);var a=y.filterSeriesByType(i,c.EQUALLY_SPACED_SERIES);var o=a.length===0;var s=u({type:"date",pane:h,roundToBaseUnit:!o,justified:o,_collapse:false,majorTicks:{visible:true},tooltip:{visible:false},labels:{step:1},autoBind:t.autoBindElements,autoBaseUnitSteps:{minutes:[1],hours:[1,2],days:[1,2],weeks:[],months:[1],years:[1]}});var l=t.categoryAxis;n.push(u({},s,{maxDateGroups:200},l,{name:f,title:null,baseUnit:"fit",baseUnitStep:"auto",labels:{visible:false},majorTicks:{visible:false}}),u({},s,l,{name:f+"_labels",maxDateGroups:20,baseUnitStep:"auto",labels:{position:""},plotBands:[],autoBaseUnitSteps:{minutes:[]},_overlap:true}),u({},s,l,{name:f+"_ticks",maxDateGroups:200,majorTicks:{width:.5},plotBands:[],title:null,labels:{visible:false,mirror:true},_overlap:true}));r.push(u({name:f,pane:h,majorGridLines:{visible:false},visible:false},t.valueAxis))},o.attachSeries=function(e,t,i){var n=e.series=e.series||[];var r=[].concat(t.series||[]);var a=i.seriesColors;var o=t.seriesDefaults;for(var s=0;s<r.length;s++)n.push(u({color:a[s%a.length],categoryField:t.dateField,visibleInLegend:false,tooltip:{visible:false}},o,r[s],{axis:f,categoryAxis:f,autoBind:t.autoBindElements}))};var s=28,l=a.extend({applyDefaults:function(e,t){var i=y.elementSize(this.element).width||c.DEFAULT_WIDTH;var n=t;var r={seriesDefaults:{categoryField:e.dateField},axisDefaults:{categoryAxis:{name:"default",majorGridLines:{visible:false},labels:{step:2},majorTicks:{visible:false},maxDateGroups:Math.floor(i/s)}}};if(n)n=u({},n,r);o.setup(e,n);a.fn.applyDefaults.call(this,e,n)},_setElementClass:function(e){y.addClass(e,"k-chart k-stockchart")},setOptions:function(e){this.destroyNavigator();a.fn.setOptions.call(this,e)},noTransitionsRedraw:function(){var e=this.options.transitions;this.options.transitions=false;this._fullRedraw();this.options.transitions=e},_resize:function(){this.noTransitionsRedraw()},_redraw:function(){var e=this.navigator;if(!this._dirty()&&e&&e.options.partialRedraw)e.redrawSlaves();else this._fullRedraw()},_dirty:function(){var e=this.options;var t=[].concat(e.series,e.navigator.series);var i=y.grep(t,function(e){return e&&e.visible}).length;var n=this._seriesCount!==i;this._seriesCount=i;return n},_fullRedraw:function(){var e=this.navigator;if(!e){e=this.navigator=new o(this);this.trigger("navigatorCreated",{navigator:e})}e.clean();e.setRange();a.fn._redraw.call(this);e.initSelection()},_trackSharedTooltip:function(e){var t=this._plotArea;var i=t.paneByPoint(e);if(i&&i.options.name===h)this._unsetActivePoint();else a.fn._trackSharedTooltip.call(this,e)},bindCategories:function(){a.fn.bindCategories.call(this);this.copyNavigatorCategories()},copyNavigatorCategories:function(){var e=[].concat(this.options.categoryAxis);var t;for(var i=0;i<e.length;i++){var n=e[i];if(n.name===f)t=n.categories;else if(t&&n.pane===h)n.categories=t}},destroyNavigator:function(){if(this.navigator){this.navigator.destroy();this.navigator=null}},destroy:function(){this.destroyNavigator();a.fn.destroy.call(this)},_stopChartHandlers:function(e){var t=this._eventCoordinates(e);var i=this._plotArea.paneByPoint(t);return a.fn._stopChartHandlers.call(this,e)||i&&i.options.name===h},_toggleDragZoomEvents:function(){if(!this._dragZoomEnabled){this.element.style.touchAction="none";this._dragZoomEnabled=true}}});y.setDefaultOptions(l,{dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:true},valueAxis:{narrowRange:true,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:false},tooltip:{visible:true},line:{width:2}},hint:{},visible:true},tooltip:{visible:true},legend:{visible:false}}),kendo.deepExtend(kendo.dataviz,{constants:i,Navigator:o,NavigatorHint:d,StockChart:l})})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/stock/stock-chart.min",["./kendo-stock-chart.min"],function(){var r=window.kendo.jQuery,f=window.kendo,d=f.dataviz,e=d.ChartInstanceObserver,p=d.ui.Chart,i=d.StockChart,t=d.constants,u=t.NAVIGATOR_AXIS,c=t.NAVIGATOR_PANE,v=f.deepExtend,a=d.defined,n="change",o=e.extend({handlerMap:{navigatorFilter:"_onNavigatorFilter",navigatorCreated:"_onNavigatorCreated"}}),s=p.extend({options:{name:"StockChart",dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:true},valueAxis:{narrowRange:true,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:false},tooltip:{visible:true,template:"#= kendo.toString(category, 'd') #"},line:{width:2}},hint:{},visible:true},tooltip:{visible:true},legend:{visible:false},persistSeriesVisibility:true},_createChart:function(e,t){this._initNavigatorOptions(e);this._instance=new i(this.element[0],e,t,{observer:new o(this),sender:this,rtl:this._isRtl()})},_initNavigatorOptions:function(e){var t=e.navigator||{};var i=f.support;var n=i.touch;var r=i.browser.mozilla;v(t,{autoBindElements:!t.dataSource,partialRedraw:t.dataSource,liveDrag:!n&&!r})},_initDataSource:function(e){var t=e||{},i=t.dataSource,n=i&&i.serverFiltering,r=[].concat(t.categoryAxis)[0],a=t.navigator||{},o=a.select,s=o&&o.from&&o.to;if(n&&s){var l=[].concat(i.filter||[]);var c=f.parseDate(o.from);var u=f.parseDate(o.to);var h=new d.DateCategoryAxis(v({baseUnit:"fit"},r,{categories:[c,u]}),f);i.filter=g(h.range().min,u).concat(l)}p.fn._initDataSource.call(this,e)},_onNavigatorCreated:function(e){this._instance=e.sender;this.options=e.sender.options;this._navigator=this.navigator=e.navigator;this._initNavigatorDataSource()},_initNavigatorDataSource:function(){var e=this.options.navigator;var t=e.autoBind;var i=e.dataSource;if(i){this._navigatorDataChangedHandler=this._navigatorDataChangedHandler||this._onNavigatorDataChanged.bind(this);this._navigatorDataSource=f.data.DataSource.create(i).bind(n,this._navigatorDataChangedHandler);if(!a(t))t=this.options.autoBind;if(t)this._navigatorDataSource.fetch()}},_bindNavigatorSeries:function(e,t){var i,n,r=e.length;for(i=0;i<r;i++){n=e[i];if(n.axis==u&&this._isBindable(n))n.data=t}},_onNavigatorDataChanged:function(){var e=this,t=e._instance,i=e.options.categoryAxis,n,r=i.length,a=e._navigatorDataSource.view(),o,s;this._bindNavigatorSeries(e.options.series,a);if(e._sourceSeries)this._bindNavigatorSeries(e._sourceSeries,a);for(n=0;n<r;n++){o=i[n];if(o.pane==c)if(o.name==u){e._bindCategoryAxis(o,a,n);s=o.categories}else o.categories=s}if(t._model){var l=this.navigator;l.redraw();l.setRange();if(!e.options.dataSource||e.options.dataSource&&e._dataBound)l.redrawSlaves()}},_bindCategories:function(){p.fn._bindCategories.call(this);if(this._instance)this._instance.copyNavigatorCategories()},_onDataChanged:function(){p.fn._onDataChanged.call(this);this._dataBound=true},setOptions:function(e){this._removeNavigatorDataSource();this._initNavigatorOptions(e);this._instance.destroyNavigator();p.fn.setOptions.call(this,e)},_onNavigatorFilter:function(e){this.dataSource.filter(g(e.from,e.to))},requiresHandlers:function(e){if(d.inArray("navigatorFilter",e)){var t=this.dataSource;var i=t&&t.options.serverFiltering;return i&&this.options.navigator.dataSource}return p.fn.requiresHandlers.call(this,e)},_removeNavigatorDataSource:function(){var e=this._navigatorDataSource;if(e){e.unbind(n,this._navigatorDataChangedHandler);delete this._navigatorDataSource}},destroy:function(){p.fn.destroy.call(this);this._removeNavigatorDataSource()}});function g(e,t){return[{field:"Date",operator:"gte",value:e},{field:"Date",operator:"lt",value:t}]}d.ui.plugin(s)})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.dataviz.stock.min",["./dataviz/stock/kendo-stock-chart.min","./dataviz/stock/stock-chart.min"],function(){var e={id:"dataviz.stockchart",name:"StockChart",category:"dataviz",description:"StockChart widget and associated financial series.",depends:["dataviz.chart"]}})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/sparkline/kendo-sparkline.min",["kendo.dataviz.chart.min"],function(){window.kendo.dataviz=window.kendo.dataviz||{};var f=kendo.dataviz,d=f.constants,i=f.Chart,p=f.elementSize,a=f.deepExtend,l=-2,t=f.SharedTooltip.extend({_slotAnchor:function(e,t){var i=this.plotArea.categoryAxis;var n=i.options.vertical;var r=n?{horizontal:"left",vertical:"center"}:{horizontal:"center",vertical:"bottom"};var a;if(n)a=new f.Point(this.plotArea.box.x2,t.center().y);else a=new f.Point(t.center().x,l);return{point:a,align:r}},_defaultAnchor:function(e,t){return this._slotAnchor({},t)}}),v=150,g=150,n=[d.BAR,d.BULLET];function o(e){var t=[];for(var i=0;i<e.length;i++){var n=e[i];t[i]=n.style.display;n.style.display="none"}return t}function s(e,t){for(var i=0;i<e.length;i++)e[i].style.display=t[i]}function r(e){return f.isNumber(e)?[e]:e}var e=i.extend({_setElementClass:function(e){f.addClass(e,"k-sparkline")},_initElement:function(e){i.fn._initElement.call(this,e);this._initialWidth=Math.floor(p(e).width)},_resize:function(){var e=this.element;var t=o(e.childNodes);this._initialWidth=Math.floor(p(e).width);s(e.childNodes,t);i.fn._resize.call(this)},_modelOptions:function(){var e=this.options;var t=this._surfaceWrap();var i=o(t.childNodes);var n=document.createElement("span");n.innerHTML="&nbsp;";t.appendChild(n);var r=a({width:this._autoWidth,height:p(t).height,transitions:e.transitions},e.chartArea,{inline:true,align:false});p(t,{width:r.width,height:r.height});t.removeChild(n);s(t.childNodes,i);if(this.surface)this.surface.resize();return r},_surfaceWrap:function(){if(!this.stage){var e=this.stage=document.createElement("span");this.element.appendChild(e)}return this.stage},_createPlotArea:function(e){var t=i.fn._createPlotArea.call(this,e);this._autoWidth=this._initialWidth||this._calculateWidth(t);return t},_calculateWidth:function(e){var t=this.options;var i=f.getSpacing(t.chartArea.margin);var n=e.charts;var c=this._surfaceWrap();var r=0;for(var a=0;a<n.length;a++){var o=n[a];var s=(o.options.series||[])[0];if(!s)continue;if(s.type===d.BAR)return v;if(s.type===d.BULLET)return g;if(s.type===d.PIE)return p(c).height;var l=o.categoryAxis;if(l){var h=l.categoriesCount()*(!o.options.isStacked&&f.inArray(s.type,[d.COLUMN,d.VERTICAL_BULLET])?o.seriesOptions.length:1);r=Math.max(r,h)}}var u=r*t.pointWidth;if(u>0)u+=i.left+i.right;return u},_createSharedTooltip:function(e){return new t(this._plotArea,e)}});e.normalizeOptions=function(e){var t=r(e);if(f.isArray(t))t={seriesDefaults:{data:t}};else t=a({},t);if(!t.series)t.series=[{data:r(t.data)}];a(t,{seriesDefaults:{type:t.type}});if(f.inArray(t.series[0].type,n)||f.inArray(t.seriesDefaults.type,n))t=a({},{categoryAxis:{crosshair:{visible:false}}},t);return t},f.setDefaultOptions(e,{chartArea:{margin:2},axisDefaults:{visible:false,majorGridLines:{visible:false},valueAxis:{narrowRange:true}},seriesDefaults:{type:"line",area:{line:{width:.5}},bar:{stack:true},padding:2,width:.5,overlay:{gradient:null},highlight:{visible:false},border:{width:0},markers:{size:2,visible:false}},tooltip:{visible:true,shared:true},categoryAxis:{crosshair:{visible:true,tooltip:{visible:false}}},legend:{visible:false},transitions:false,pointWidth:5,panes:[{clip:false}]}),kendo.deepExtend(kendo.dataviz,{Sparkline:e})})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/sparkline/sparkline.min",["./kendo-sparkline.min"],function(){var e=window.kendo.jQuery,t=kendo.dataviz,n=t.ui.Chart,r=t.Sparkline,i=t.ChartInstanceObserver,a=e.extend,o=n.extend({init:function(e,t){var i=t;if(i instanceof kendo.data.ObservableArray)i={seriesDefaults:{data:i}};n.fn.init.call(this,e,r.normalizeOptions(i))},_createChart:function(e,t){this._instance=new r(this.element[0],e,t,{observer:new i(this),sender:this,rtl:this._isRtl()})},_createTooltip:function(){return new s(this.element,a({},this.options.tooltip,{rtl:this._isRtl()}))},options:{name:"Sparkline",chartArea:{margin:2},axisDefaults:{visible:false,majorGridLines:{visible:false},valueAxis:{narrowRange:true}},seriesDefaults:{type:"line",area:{line:{width:.5}},bar:{stack:true},padding:2,width:.5,overlay:{gradient:null},highlight:{visible:false},border:{width:0},markers:{size:2,visible:false}},tooltip:{visible:true,shared:true},categoryAxis:{crosshair:{visible:true,tooltip:{visible:false}}},legend:{visible:false},transitions:false,pointWidth:5,panes:[{clip:false}]}}),s=(t.ui.plugin(o),t.Tooltip.extend({options:{animation:{duration:0}},_hideElement:function(){if(this.element)this.element.hide().remove()}}));t.SparklineTooltip=s})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.dataviz.sparkline.min",["./dataviz/sparkline/kendo-sparkline.min","./dataviz/sparkline/sparkline.min"],function(){var e={id:"dataviz.sparkline",name:"Sparkline",category:"dataviz",description:"Sparkline widgets.",depends:["dataviz.chart"]}})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("util/main.min",["kendo.core.min"],function(){var r=window.kendo,c;function e(e){return e*e}var t=Date.now;if(!t)t=function(){return(new Date).getTime()};function i(e){if(typeof e!=="string")e+="px";return e}function n(e){var t=[];if(e){var i=r.toHyphens(e).split("-");for(var n=0;n<i.length;n++)t.push("k-pos-"+i[n])}return t.join(" ")}function a(e){var t={1:"i",10:"x",100:"c",2:"ii",20:"xx",200:"cc",3:"iii",30:"xxx",300:"ccc",4:"iv",40:"xl",400:"cd",5:"v",50:"l",500:"d",6:"vi",60:"lx",600:"dc",7:"vii",70:"lxx",700:"dcc",8:"viii",80:"lxxx",800:"dccc",9:"ix",90:"xc",900:"cm",1e3:"m"};var i=[1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1];var n="";while(e>0)if(e<i[0])i.shift();else{n+=t[i[0]];e-=i[0]}return n}function o(e){e=e.toLowerCase();var t={i:1,v:5,x:10,l:50,c:100,d:500,m:1e3};var i=0,n=0;for(var r=0;r<e.length;++r){var a=t[e.charAt(r)];if(!a)return null;i+=a;if(a>n)i-=2*n;n=a}return i}function s(i){var n=Object.create(null);return function(){var e="";for(var t=arguments.length;--t>=0;)e+=":"+arguments[t];return e in n?n[e]:n[e]=i.apply(this,arguments)}}function l(e){return h.test(e)}function u(e,t){try{return e.call(t,function(e){throw new i(e)})}catch(e){if(e instanceof i)return e.value;throw e}function i(e){this.value=e}}(0,r.deepExtend)(r,{util:{now:t,renderPos:n,renderSize:i,sqr:e,romanToArabic:o,arabicToRoman:a,memoize:s,isUnicodeLetter:l,withExit:u}});var h=new RegExp("[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");return window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/map/location.min",["kendo.drawing.min","../../util/main.min"],function(){var t=window.kendo.jQuery,n=void 0,I=Math,F=I.abs,V=I.atan,P=I.atan2,B=I.cos,a=I.max,o=I.min,O=I.sin,N=I.tan,l=window.kendo,r=l.Class,H=l.dataviz,s=l.deepExtend,e=l.drawing.util,u=e.defined,U=e.deg,z=e.rad,j=e.round,c=e.valueOrDefault,L=l.util.sqr,R=r.extend({init:function(e,t){if(arguments.length===1){this.lat=e[0];this.lng=e[1]}else{this.lat=e;this.lng=t}},DISTANCE_ITERATIONS:100,DISTANCE_CONVERGENCE:1e-12,DISTANCE_PRECISION:2,FORMAT:"{0:N6},{1:N6}",toArray:function(){return[this.lat,this.lng]},equals:function(e){return e&&e.lat===this.lat&&e.lng===this.lng},clone:function(){return new R(this.lat,this.lng)},round:function(e){this.lng=j(this.lng,e);this.lat=j(this.lat,e);return this},wrap:function(){this.lng=this.lng%180;this.lat=this.lat%90;return this},distanceTo:function(e,t){return this.greatCircleTo(e,t).distance},destination:function(e,t,i){t=z(t);i=i||H.map.datums.WGS84;var n=z(this.lat);var r=z(this.lng);var a=e/l.dataviz.map.datums.WGS84.a;var o=I.asin(O(n)*B(a)+B(n)*O(a)*B(t));var s=r+P(O(t)*O(a)*B(n),B(a)-O(n)*O(o));return new R(U(o),U(s))},greatCircleTo:function(e,t){e=R.create(e);t=t||H.map.datums.WGS84;if(!e||this.clone().round(8).equals(e.clone().round(8)))return{distance:0,azimuthFrom:0,azimuthTo:0};var c=t.a;var h=t.b;var i=t.f;var f=z(e.lng-this.lng);var d=V((1-i)*N(z(this.lat)));var n=O(d);var r=B(d);var p=V((1-i)*N(z(e.lat)));var v=O(p);var a=B(p);var g=f;var m;var _=this.DISTANCE_ITERATIONS;var y=false;var b;var w;var o;var s;var x;var l;var k;while(!y&&_-- >0){b=O(g);w=B(g);o=I.sqrt(L(a*b)+L(r*v-n*a*w));x=n*v+r*a*w;k=P(o,x);var C=r*a*b/o;s=1-L(C);l=0;if(s!==0)l=x-2*n*v/s;m=g;var S=i/16*s*(4+i*(4-3*s));g=f+(1-S)*i*C*(k+S*o*(l+S*x*(-1+2*L(l))));y=F(g-m)<=this.DISTANCE_CONVERGENCE}var u=s*(L(c)-L(h))/L(h);var T=1+u/16384*(4096+u*(-768+u*(320-175*u)));var A=u/1024*(256+u*(-128+u*(74-47*u)));var M=A*o*(l+A/4*(x*(-1+2*L(l))-A/6*l*(-3+4*L(o))*(-3+4*L(l))));var D=P(a*b,r*v-n*a*w);var E=P(r*b,-n*a+r*v*w);return{distance:j(h*T*(k-M),this.DISTANCE_PRECISION),azimuthFrom:U(D),azimuthTo:U(E)}}}),i=(R.fn.toString=function(){return l.format(this.FORMAT,this.lat,this.lng)},R.fromLngLat=function(e){return new R(e[1],e[0])},R.fromLatLng=function(e){return new R(e[0],e[1])},R.create=function(e,t){if(u(e))if(e instanceof R)return e.clone();else if(arguments.length===1&&e.length===2)return R.fromLatLng(e);else return new R(e,t)},r.extend({init:function(e,t){e=R.create(e);t=R.create(t);if(e.lng+180>t.lng+180&&e.lat+90<t.lat+90){this.se=e;this.nw=t}else{this.se=t;this.nw=e}},contains:function(e){var t=this.nw,i=this.se,n=c(e.lng,e[1]),r=c(e.lat,e[0]);return e&&n+180>=t.lng+180&&n+180<=i.lng+180&&r+90>=i.lat+90&&r+90<=t.lat+90},center:function(){var e=this.nw;var t=this.se;var i=e.lng+(t.lng-e.lng)/2;var n=e.lat+(t.lat-e.lat)/2;return new R(n,i)},containsAny:function(e){var t=false;for(var i=0;i<e.length;i++)t=t||this.contains(e[i]);return t},include:function(e){var t=this.nw,i=this.se,n=c(e.lng,e[1]),r=c(e.lat,e[0]);t.lng=o(t.lng,n);t.lat=a(t.lat,r);i.lng=a(i.lng,n);i.lat=o(i.lat,r)},includeAll:function(e){for(var t=0;t<e.length;t++)this.include(e[t])},edges:function(){var e=this.nw,t=this.se;return{nw:this.nw,ne:new R(e.lat,t.lng),se:this.se,sw:new R(t.lat,e.lng)}},toArray:function(){var e=this.nw,t=this.se;return[e,new R(e.lat,t.lng),t,new R(t.lat,e.lng)]},overlaps:function(e){return this.containsAny(e.toArray())||e.containsAny(this.toArray())}}));i.World=new i([90,-180],[-90,180]),i.create=function(e,t){if(e instanceof i)return e;else if(e&&t)return new i(e,t);else if(e&&e.length===4&&!t)return new i([e[0],e[1]],[e[2],e[3]])},s(H,{map:{Extent:i,Location:R}})})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/map/attribution.min",["kendo.drawing.min"],function(){window.kendo.jQuery;var e=window.kendo,i=e.ui.Widget,a=e.template,t=e.drawing.util,n=t.valueOrDefault,r=t.defined,o=i.extend({init:function(e,t){i.fn.init.call(this,e,t);this._initOptions(t);this.items=[];this.element.addClass("k-widget k-attribution")},options:{name:"Attribution",separator:"&nbsp;|&nbsp;",itemTemplate:"#= text #"},filter:function(e,t){this._extent=e;this._zoom=t;this._render()},add:function(e){if(r(e)){if(typeof e==="string")e={text:e};this.items.push(e);this._render()}},remove:function(e){var t=[];for(var i=0;i<this.items.length;i++){var n=this.items[i];if(n.text!==e)t.push(n)}this.items=t;this._render()},clear:function(){this.items=[];this.element.empty()},_render:function(){var e=[];var t=a(this.options.itemTemplate);for(var i=0;i<this.items.length;i++){var n=this.items[i];var r=this._itemText(n);if(r!=="")e.push(t({text:r}))}if(e.length>0)this.element.empty().append(e.join(this.options.separator)).show();else this.element.hide()},_itemText:function(e){var t="";var i=this._inZoomLevel(e.minZoom,e.maxZoom);var n=this._inArea(e.extent);if(i&&n)t+=e.text;return t},_inZoomLevel:function(e,t){var i=true;e=n(e,-Number.MAX_VALUE);t=n(t,Number.MAX_VALUE);i=this._zoom>e&&this._zoom<t;return i},_inArea:function(e){var t=true;if(e)t=e.contains(this._extent);return t}});e.dataviz.ui.plugin(o)})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/map/navigator.min",["kendo.core.min"],function(){var r=window.kendo.jQuery,n=window.kendo,a=n.ui.Widget,t=n.keys,o=".kendoNavigator";function e(e){return n.format('<button class="k-button k-rounded-full k-button-flat k-button-flat-base k-icon-button k-navigator-{0}" aria-label="move {0}">'+'<span class="k-button-icon k-icon k-i-arrow-60-{0}"></span>'+"</button>",e)}var s=e("up")+e("right")+e("down")+e("left"),i=a.extend({init:function(e,t){a.fn.init.call(this,e,t);this._initOptions(t);this.element.addClass("k-widget k-navigator").append(s).on("click"+o,".k-button",this._click.bind(this));var i=this.element.parent().closest("["+n.attr("role")+"]");this._keyroot=i.length>0?i:this.element;this._tabindex(this._keyroot);this._keydown=this._keydown.bind(this);this._keyroot.on("keydown",this._keydown)},options:{name:"Navigator",panStep:1},events:["pan"],dispose:function(){this._keyroot.off("keydown",this._keydown)},_pan:function(e,t){var i=this.options.panStep;this.trigger("pan",{x:e*i,y:t*i})},_click:function(e){var t=0;var i=0;var n=r(e.currentTarget);if(n.is(".k-navigator-up"))i=1;else if(n.is(".k-navigator-down"))i=-1;else if(n.is(".k-navigator-right"))t=1;else if(n.is(".k-navigator-left"))t=-1;this._pan(t,i);e.preventDefault()},_keydown:function(e){switch(e.which){case t.UP:this._pan(0,1);e.preventDefault();break;case t.DOWN:this._pan(0,-1);e.preventDefault();break;case t.RIGHT:this._pan(1,0);e.preventDefault();break;case t.LEFT:this._pan(-1,0);e.preventDefault();break}}});n.dataviz.ui.plugin(i)})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/map/zoom.min",["kendo.core.min"],function(){var n=window.kendo.jQuery,r=window.kendo,a=r.ui.Widget,t=r.keys;function e(e,t){return r.format('<button class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-zoom-{0}" title="zoom-{0}" aria-label="zoom-{0}"><span class="k-button-icon k-icon {1}"></span></button>',e,t)}var o=".kendoZoomControl",s=e("in","k-i-plus")+e("out","k-i-minus"),i=187,l=189,u=61,c=173,h=a.extend({init:function(e,t){a.fn.init.call(this,e,t);this._initOptions(t);this.element.addClass("k-widget k-zoom-control k-button-group k-group-horizontal").append(s).on("click"+o,".k-button",this._click.bind(this));var i=this.element.parent().closest("["+r.attr("role")+"]");this._keyroot=i.length>0?i:this.element;this._tabindex(this._keyroot);this._keydown=this._keydown.bind(this);this._keyroot.on("keydown",this._keydown)},options:{name:"ZoomControl",zoomStep:1},events:["change"],_change:function(e){var t=this.options.zoomStep;this.trigger("change",{delta:e*t})},_click:function(e){var t=n(e.currentTarget);var i=1;if(t.is(".k-zoom-out"))i=-1;this._change(i);e.preventDefault()},_keydown:function(e){switch(e.which){case t.NUMPAD_PLUS:case i:case u:this._change(1);break;case t.NUMPAD_MINUS:case l:case c:this._change(-1);break}}});r.dataviz.ui.plugin(h)})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/map/crs.min",["./location.min","kendo.drawing.min"],function(){var a=window.kendo.jQuery,o=void 0,f=Math,d=f.atan,g=f.exp,m=f.pow,_=f.sin,l=f.log,u=f.tan,e=window.kendo,t=e.Class,s=e.dataviz,c=e.deepExtend,n=e.geometry,y=n.Point,b,w=s.map.Location,i=e.drawing.util,h=i.rad,x=i.deg,p=i.limitValue,r=f.PI,v=r/2,k=r/4,C=r/180,S={a:6378137,b:6356752.314245179,f:.0033528106647474805,e:.08181919084262149},T=t.extend({init:function(e){this._initOptions(e)},MAX_LNG:180,MAX_LAT:85.0840590501,INVERSE_ITERATIONS:15,INVERSE_CONVERGENCE:1e-12,options:{centralMeridian:0,datum:S},forward:function(e,t){var i=this,n=i.options,r=n.datum,a=r.a,o=n.centralMeridian,s=p(e.lat,-i.MAX_LAT,i.MAX_LAT),l=t?p(e.lng,-i.MAX_LNG,i.MAX_LNG):e.lng,u=h(l-o)*a,c=i._projectLat(s);return new y(u,c)},_projectLat:function(e){var t=this.options.datum,i=t.e,n=t.a,r=h(e),a=u(k+r/2),o=i*_(r),s=m((1-o)/(1+o),i/2);return n*l(a*s)},inverse:function(e,t){var i=this,n=i.options,r=n.datum,a=r.a,o=n.centralMeridian,s=e.x/(C*a)+o,l=p(i._inverseY(e.y),-i.MAX_LAT,i.MAX_LAT);if(t)s=p(s,-i.MAX_LNG,i.MAX_LNG);return new w(l,s)},_inverseY:function(e){var t=this,i=t.options.datum,n=i.a,r=i.e,c=r/2,a=g(-e/n),o=v-2*d(a),s;for(s=0;s<=t.INVERSE_ITERATIONS;s++){var l=r*_(o),h=m((1-l)/(1+l),c),u=v-2*d(a*h)-o;o+=u;if(f.abs(u)<=t.INVERSE_CONVERGENCE)break}return x(o)}}),A=T.extend({MAX_LAT:85.0511287798,_projectLat:function(e){var t=this.options.datum.a,i=h(e),n=u(k+i/2);return t*l(n)},_inverseY:function(e){var t=this.options.datum.a,i=g(-e/t);return x(v-2*d(i))}}),M=t.extend({forward:function(e){return new y(e.lng,e.lat)},inverse:function(e){return new w(e.y,e.x)}}),D=t.extend({init:function(){var e=this,t=e._proj=new A;var i=this.c=2*r*t.options.datum.a;this._tm=n.transform().translate(.5,.5).scale(1/i,-1/i);this._itm=n.transform().scale(i,-i).translate(-.5,-.5)},toPoint:function(e,t,i){var n=this._proj.forward(e,i);return n.transform(this._tm).scale(t||1)},toLocation:function(e,t,i){e=e.clone().scale(1/(t||1)).transform(this._itm);return this._proj.inverse(e,i)}}),E=t.extend({init:function(){this._proj=new T},toPoint:function(e){return this._proj.forward(e)},toLocation:function(e){return this._proj.inverse(e)}}),I=t.extend({init:function(){this._proj=new M},toPoint:function(e){return this._proj.forward(e)},toLocation:function(e){return this._proj.inverse(e)}});c(s,{map:{crs:{EPSG3395:E,EPSG3857:D,EPSG4326:I},datums:{WGS84:S},projections:{Equirectangular:M,Mercator:T,SphericalMercator:A}}})})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/map/layers/base.min",["kendo.core.min","../location.min"],function(){var i=window.kendo.jQuery,e=void 0,t=window.kendo,n=t.Class,r=t.dataviz,a=t.deepExtend,o=r.map.Extent,u,s=t.drawing.util.defined,l=n.extend({init:function(e,t){this._initOptions(t);this.map=e;this.element=i("<div class='k-layer'></div>").css({zIndex:this.options.zIndex,opacity:this.options.opacity}).appendTo(e.scrollElement);this._beforeReset=this._beforeReset.bind(this);this._reset=this._reset.bind(this);this._resize=this._resize.bind(this);this._panEnd=this._panEnd.bind(this);this._activate();this._updateAttribution()},destroy:function(){this._deactivate()},show:function(){this.reset();this._activate();this._applyExtent(true)},hide:function(){this._deactivate();this._setVisibility(false)},reset:function(){this._beforeReset();this._reset()},_reset:function(){this._applyExtent()},_beforeReset:i.noop,_resize:i.noop,_panEnd:function(){this._applyExtent()},_applyExtent:function(){var e=this.options;var t=this.map.zoom();var i=!s(e.minZoom)||t>=e.minZoom;var n=!s(e.maxZoom)||t<=e.maxZoom;var r=o.create(e.extent);var a=!r||r.overlaps(this.map.extent());this._setVisibility(i&&n&&a)},_setVisibility:function(e){this.element.css("display",e?"":"none")},_activate:function(){var e=this.map;this._deactivate();e.bind("beforeReset",this._beforeReset);e.bind("reset",this._reset);e.bind("resize",this._resize);e.bind("panEnd",this._panEnd)},_deactivate:function(){var e=this.map;e.unbind("beforeReset",this._beforeReset);e.unbind("reset",this._reset);e.unbind("resize",this._resize);e.unbind("panEnd",this._panEnd)},_updateAttribution:function(){var e=this.map.attribution;if(e)e.add(this.options.attribution)}});a(r,{map:{layers:{Layer:l}}})})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/map/layers/shape.min",["./base.min","../location.min"],function(){var c=window.kendo.jQuery,h=void 0,i=window.kendo,f=i.Class,d=i.data.DataSource,e=i.dataviz,t=i.deepExtend,p=i.geometry,s=i.drawing,r=s.Group,v=s.util.last,g=s.util.defined,n=e.map,l=n.Location,a=n.layers.Layer,o=a.extend({init:function(e,t){this._pan=this._pan.bind(this);a.fn.init.call(this,e,t);this.surface=s.Surface.create(this.element,{width:e.scrollElement.width(),height:e.scrollElement.height()});this._initRoot();this.movable=new i.ui.Movable(this.surface.element);this._markers=[];this._click=this._handler("shapeClick");this.surface.bind("click",this._click);this._mouseenter=this._handler("shapeMouseEnter");this.surface.bind("mouseenter",this._mouseenter);this._mouseleave=this._handler("shapeMouseLeave");this.surface.bind("mouseleave",this._mouseleave);this._initDataSource()},options:{autoBind:true},destroy:function(){a.fn.destroy.call(this);this.surface.destroy();this.dataSource.unbind("change",this._dataChange)},setDataSource:function(e){if(this.dataSource)this.dataSource.unbind("change",this._dataChange);this.dataSource=i.data.DataSource.create(e);this.dataSource.bind("change",this._dataChange);if(this.options.autoBind)this.dataSource.fetch()},_reset:function(){a.fn._reset.call(this);this._translateSurface();if(this._data)this._load(this._data)},_initRoot:function(){this._root=new r;this.surface.draw(this._root)},_beforeReset:function(){this.surface.clear();this._initRoot()},_resize:function(){this.surface.size(this.map.size())},_initDataSource:function(){var e=this.options.dataSource;this._dataChange=this._dataChange.bind(this);this.dataSource=d.create(e).bind("change",this._dataChange);if(e&&this.options.autoBind)this.dataSource.fetch()},_dataChange:function(e){this._data=e.sender.view();this._load(this._data)},_load:function(e){this._clearMarkers();if(!this._loader)this._loader=new u(this.map,this.options.style,this);var t=new r;for(var i=0;i<e.length;i++){var n=this._loader.parse(e[i]);if(n)t.append(n)}this._root.clear();this._root.append(t)},shapeCreated:function(e){var t=false;if(e instanceof s.Circle)t=g(this._createMarker(e));if(!t){var i={layer:this,shape:e};t=this.map.trigger("shapeCreated",i)}return t},featureCreated:function(e){e.layer=this;this.map.trigger("shapeFeatureCreated",e)},_createMarker:function(e){var t=this.map.markers.bind({location:e.location},e.dataItem);if(t)this._markers.push(t);return t},_clearMarkers:function(){for(var e=0;e<this._markers.length;e++)this.map.markers.remove(this._markers[e]);this._markers=[]},_pan:function(){if(!this._panning){this._panning=true;this.surface.suspendTracking()}},_panEnd:function(e){a.fn._panEnd.call(this,e);this._translateSurface();this.surface.resumeTracking();this._panning=false},_translateSurface:function(){var e=this.map;var t=e.locationToView(e.extent().nw);if(this.surface.translate){this.surface.translate(t);this.movable.moveTo({x:t.x,y:t.y})}},_handler:function(i){var n=this;return function(e){if(e.element){var t={layer:n,shape:e.element,originalEvent:e.originalEvent};n.map.trigger(i,t)}}},_activate:function(){a.fn._activate.call(this);this.map.bind("pan",this._pan)},_deactivate:function(){a.fn._deactivate.call(this);this.map.unbind("pan",this._pan)}}),u=f.extend({init:function(e,t,i){this.observer=i;this.locator=e;this.style=t},parse:function(e){var t=new r;var i=true;if(e.type==="Feature"){i=false;this._loadGeometryTo(t,e.geometry,e);this._featureCreated(t,e)}else this._loadGeometryTo(t,e,e);if(i&&t.children.length<2)t=t.children[0];return t},_shapeCreated:function(e){var t=false;if(this.observer&&this.observer.shapeCreated)t=this.observer.shapeCreated(e);return t},_featureCreated:function(e,t){if(this.observer&&this.observer.featureCreated)this.observer.featureCreated({group:e,dataItem:t,properties:t.properties})},_loadGeometryTo:function(e,t,i){var n=t.coordinates;var r;var a;switch(t.type){case"LineString":a=this._loadPolygon(e,[n],i);this._setLineFill(a);break;case"MultiLineString":for(r=0;r<n.length;r++){a=this._loadPolygon(e,[n[r]],i);this._setLineFill(a)}break;case"Polygon":this._loadPolygon(e,n,i);break;case"MultiPolygon":for(r=0;r<n.length;r++)this._loadPolygon(e,n[r],i);break;case"Point":this._loadPoint(e,n,i);break;case"MultiPoint":for(r=0;r<n.length;r++)this._loadPoint(e,n[r],i);break}},_setLineFill:function(e){var t=e.segments;if(t.length<4||!t[0].anchor().equals(v(t).anchor()))e.options.fill=null},_loadShape:function(e,t){if(!this._shapeCreated(t))e.append(t);return t},_loadPolygon:function(e,t,i){var n=this._buildPolygon(t);n.dataItem=i;return this._loadShape(e,n)},_buildPolygon:function(e){var t=e.length>1?s.MultiPath:s.Path;var i=new t(this.style);for(var n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++){var a=this.locator.locationToView(l.fromLngLat(e[n][r]));if(r===0)i.moveTo(a.x,a.y);else i.lineTo(a.x,a.y)}return i},_loadPoint:function(e,t,i){var n=l.fromLngLat(t);var r=this.locator.locationToView(n);var a=new p.Circle(r,10);var o=new s.Circle(a,this.style);o.dataItem=i;o.location=n;return this._loadShape(e,o)}});t(i.data,{schemas:{geojson:{type:"json",data:function(e){if(e.type==="FeatureCollection")return e.features;if(e.type==="GeometryCollection")return e.geometries;return e}}},transports:{geojson:{read:{dataType:"json"}}}}),t(e,{map:{layers:{shape:o,ShapeLayer:o},GeoJSONLoader:u}})})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/map/layers/bubble.min",["./shape.min"],function(){var s=window.kendo.jQuery,l=void 0,i=window.kendo,f=i.getter,n=i.dataviz,e=i.deepExtend,r=i.geometry,a=i.drawing,u,d=a.util.defined,t=n.map,p=t.Location,c,o=t.layers.ShapeLayer.extend({options:{autoBind:true,locationField:"location",valueField:"value",minSize:0,maxSize:100,scale:"sqrt",symbol:"circle"},_load:function(e){this.surface.clear();if(e.length===0)return;var t=this.options;var i=f(t.valueField);e=e.slice(0);e.sort(function(e,t){return i(t)-i(e)});var n=this._scaleType();var r;for(var a=0;a<e.length;a++){var o=e[a];var s=f(t.locationField)(o);var l=f(t.valueField)(o);if(d(s)&&d(l)){if(!r)r=new n([0,l],[t.minSize,t.maxSize]);s=p.create(s);var c=this.map.locationToView(s);var h=r.map(l);var u=this._createSymbol({center:c,size:h,style:t.style,dataItem:o,location:s});u.dataItem=o;u.location=s;u.value=l;this._drawSymbol(u)}}},_scaleType:function(){var e=this.options.scale;if(i.isFunction(e))return e;return n.map.scales[e]},_createSymbol:function(e){var t=this.options.symbol;if(!i.isFunction(t))t=n.map.symbols[t];return t(e)},_drawSymbol:function(e){var t={layer:this,shape:e};var i=this.map.trigger("shapeCreated",t);if(!i)this.surface.draw(e)}}),h=i.Class.extend({init:function(e,t){this._domain=e;this._range=t;var i=Math.sqrt(e[1])-Math.sqrt(e[0]);var n=t[1]-t[0];this._ratio=n/i},map:function(e){var t=(Math.sqrt(e)-Math.sqrt(this._domain[0]))*this._ratio;return this._range[0]+t}}),v;e(n,{map:{layers:{bubble:o,BubbleLayer:o},scales:{sqrt:h},symbols:{circle:function(e){var t=new r.Circle(e.center,e.size/2);return new a.Circle(t,e.style)},square:function(e){var t=new a.Path(e.style);var i=e.size/2;var n=e.center;t.moveTo(n.x-i,n.y-i).lineTo(n.x+i,n.y-i).lineTo(n.x+i,n.y+i).lineTo(n.x-i,n.y+i).close();return t}}}})})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/map/layers/tile.min",["./base.min","../location.min"],function(){var c=window.kendo.jQuery,h=void 0,r=Math,e=window.kendo,t=e.Class,i=e.template,n=e.dataviz,f=e.deepExtend,d,a=e.geometry.Point,o=n.map.layers.Layer,s=e.util,l=s.renderSize,u=e.drawing.util,p=u.round,v=u.limitValue,g=o.extend({init:function(e,t){o.fn.init.call(this,e,t);if(typeof this.options.subdomains==="string")this.options.subdomains=this.options.subdomains.split("");var i=this._viewType();this._view=new i(this.element,this.options)},destroy:function(){o.fn.destroy.call(this);this._view.destroy();this._view=null},_beforeReset:function(){var e=this.map;var t=e.locationToLayer(e.extent().nw).round();this._view.viewOrigin(t)},_reset:function(e){var t;if(e)t=e.tileTitle;else t="";o.fn._reset.call(this);this._updateView();this._view.reset(t)},_viewType:function(){return m},_activate:function(){o.fn._activate.call(this);if(!e.support.mobileOS){if(!this._pan)this._pan=e.throttle(this._render.bind(this),100);this.map.bind("pan",this._pan)}},_deactivate:function(){o.fn._deactivate.call(this);if(this._pan)this.map.unbind("pan",this._pan)},_updateView:function(){var e=this._view,t=this.map,i=t.extent(),n={nw:t.locationToLayer(i.nw).round(),se:t.locationToLayer(i.se).round()};e.center(t.locationToLayer(t.center()));e.extent(n);e.zoom(t.zoom())},_resize:function(){this._render()},_panEnd:function(e){o.fn._panEnd.call(this,e);this._render()},_render:function(){this._updateView();this._view.render()}}),m=t.extend({init:function(e,t){this.element=e;this._initOptions(t);this.pool=new y},options:{tileSize:256,subdomains:["a","b","c"],urlTemplate:""},center:function(e){this._center=e},extent:function(e){this._extent=e},viewOrigin:function(e){this._viewOrigin=e},zoom:function(e){this._zoom=e},pointToTileIndex:function(e){return new a(r.floor(e.x/this.options.tileSize),r.floor(e.y/this.options.tileSize))},tileCount:function(){var e=this.size(),t=this.pointToTileIndex(this._extent.nw),i=this._extent.nw,n=this.indexToPoint(t).translate(-i.x,-i.y);return{x:r.ceil((r.abs(n.x)+e.width)/this.options.tileSize),y:r.ceil((r.abs(n.y)+e.height)/this.options.tileSize)}},size:function(){var e=this._extent.nw,t=this._extent.se,i=t.clone().translate(-e.x,-e.y);return{width:i.x,height:i.y}},indexToPoint:function(e){var t=e.x,i=e.y;return new a(t*this.options.tileSize,i*this.options.tileSize)},subdomainText:function(){var e=this.options.subdomains;return e[this.subdomainIndex++%e.length]},destroy:function(){this.element.empty();this.pool.empty()},reset:function(e){this._tileTitle=e;this.pool.reset();this.subdomainIndex=0;this.render()},render:function(){var e=this.tileCount(),t=this.pointToTileIndex(this._extent.nw),i,n,r;for(n=0;n<e.x;n++)for(r=0;r<e.y;r++){i=this.createTile({x:t.x+n,y:t.y+r});if(!i.visible)i.show()}},createTile:function(e){var t=this.tileOptions(e);var i=this.pool.get(this._center,t);if(i.element.parent().length===0)this.element.append(i.element);return i},tileOptions:function(e){var t=this.wrapIndex(e),i=this.indexToPoint(e),n=this._viewOrigin,r=i.clone().translate(-n.x,-n.y);return{index:t,currentIndex:e,point:i,offset:b(r),zoom:this._zoom,size:this.options.tileSize,subdomain:this.subdomainText(),urlTemplate:this.options.urlTemplate,errorUrlTemplate:this.options.errorUrlTemplate,tileTitle:this._tileTitle}},wrapIndex:function(e){var t=r.pow(2,this._zoom);return{x:this.wrapValue(e.x,t),y:v(e.y,0,t-1)}},wrapValue:function(e,t){var i=r.abs(e)%t;if(e>=0)e=i;else e=t-(i===0?t:i);return e}}),_=t.extend({init:function(e,t){this.id=e;this.visible=true;this._initOptions(t);this.createElement();this.show()},options:{urlTemplate:"",errorUrlTemplate:""},createElement:function(){this.element=c("<img style='position: absolute; display: block;' alt='"+this.options.tileTitle+"' />").css({width:this.options.size,height:this.options.size}).on("error",function(e){if(this.errorUrl())e.target.setAttribute("src",this.errorUrl());else e.target.removeAttribute("src")}.bind(this))},show:function(){var e=this.element[0];e.style.top=l(this.options.offset.y);e.style.left=l(this.options.offset.x);var t=this.url();if(t)e.setAttribute("src",t);e.style.visibility="visible";this.visible=true},hide:function(){this.element[0].style.visibility="hidden";this.visible=false},url:function(){var e=i(this.options.urlTemplate);return e(this.urlOptions())},errorUrl:function(){var e=i(this.options.errorUrlTemplate);return e(this.urlOptions())},urlOptions:function(){var e=this.options;return{zoom:e.zoom,subdomain:e.subdomain,z:e.zoom,x:e.index.x,y:e.index.y,s:e.subdomain,quadkey:e.quadkey,q:e.quadkey,culture:e.culture,c:e.culture}},destroy:function(){if(this.element){this.element.remove();this.element=null}}}),y=t.extend({init:function(){this._items=[]},options:{maxSize:100},get:function(e,t){if(this._items.length>=this.options.maxSize)this._remove(e);return this._create(t)},empty:function(){var e=this._items;for(var t=0;t<e.length;t++)e[t].destroy();this._items=[]},reset:function(){var e=this._items;for(var t=0;t<e.length;t++)e[t].hide()},_create:function(e){var t=this._items;var i;var n=s.hashKey(e.point.toString()+e.offset.toString()+e.zoom+e.urlTemplate);for(var r=0;r<t.length;r++)if(t[r].id===n){i=t[r];break}if(i)i.show();else{i=new _(n,e);this._items.push(i)}return i},_remove:function(e){var t=this._items;var i=-1;var n=-1;for(var r=0;r<t.length;r++){var a=t[r].options.point.distanceTo(e);if(a>i&&!t[r].visible){n=r;i=a}}if(n!==-1){t[n].destroy();t.splice(n,1)}}});function b(e){return new a(p(e.x),p(e.y))}f(n,{map:{layers:{tile:g,TileLayer:g,ImageTile:_,TilePool:y,TileView:m}}})})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/map/layers/bing.min",["./tile.min"],function(){var t=window.kendo.jQuery,c=void 0,e=window.kendo,i=e.dataviz,n=e.deepExtend,r=e.drawing.util.defined,h=i.map.Extent,o=i.map.Location,a=i.map.layers.TileLayer,s=i.map.layers.TileView,l=a.extend({init:function(e,t){this.options.baseUrl=this._scheme()+"://dev.virtualearth.net/REST/v1/Imagery/Metadata/";a.fn.init.call(this,e,t);this._onMetadata=this._onMetadata.bind(this);this._fetchMetadata()},options:{imagerySet:"road"},_fetchMetadata:function(){var e=this.options;if(!e.key)throw new Error("Bing tile layer: API key is required");t.ajax({url:e.baseUrl+e.imagerySet,data:{output:"json",include:"ImageryProviders",key:e.key,uriScheme:this._scheme()},type:"get",dataType:"jsonp",jsonp:"jsonp",success:this._onMetadata})},_scheme:function(e){e=e||window.location.protocol;return e.replace(":","")==="https"?"https":"http"},_onMetadata:function(e){if(e&&e.resourceSets.length){var t=this.resource=e.resourceSets[0].resources[0];n(this._view.options,{urlTemplate:t.imageUrl.replace("{subdomain}","#= subdomain #").replace("{quadkey}","#= quadkey #").replace("{culture}","#= culture #"),subdomains:t.imageUrlSubdomains});var i=this.options;if(!r(i.minZoom))i.minZoom=t.zoomMin;if(!r(i.maxZoom))i.maxZoom=t.zoomMax;this._addAttribution();if(this.element.css("display")!=="none")this._reset()}},_viewType:function(){return u},_addAttribution:function(){var e=this.map.attribution;if(e){var t=this.resource.imageryProviders;if(t)for(var i=0;i<t.length;i++){var n=t[i];for(var r=0;r<n.coverageAreas.length;r++){var a=n.coverageAreas[r];e.add({text:n.attribution,minZoom:a.zoomMin,maxZoom:a.zoomMax,extent:new h(new o(a.bbox[2],a.bbox[1]),new o(a.bbox[0],a.bbox[3]))})}}}},imagerySet:function(e){if(e){this.options.imagerySet=e;this.map.attribution.clear();this._fetchMetadata()}else return this.options.imagerySet}}),u=s.extend({options:{culture:"en-US"},tileOptions:function(e){var t=s.fn.tileOptions.call(this,e);t.culture=this.options.culture;t.quadkey=this.tileQuadKey(this.wrapIndex(e));return t},tileQuadKey:function(e){var t="",i,n,r;for(r=this._zoom;r>0;r--){i=0;n=1<<r-1;if((e.x&n)!==0)i++;if((e.y&n)!==0)i+=2;t+=i}return t}});n(i,{map:{layers:{bing:l,BingLayer:l,BingView:u}}})})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/map/layers/marker.min",["./base.min","../location.min","kendo.data.min","kendo.tooltip.min"],function(){var i=window.kendo.jQuery,c=void 0,h=document,t=Math,f=i.inArray,a=window.kendo,d=a.Class,p=a.data.DataSource,o=a.ui.Tooltip,e=a.dataviz,n=a.deepExtend,s=e.map,r=s.Location,l=s.layers.Layer,v=l.extend({init:function(e,t){l.fn.init.call(this,e,t);this._markerClick=this._markerClick.bind(this);this.element.on("click",".k-marker",this._markerClick);this.items=[];this._initDataSource()},destroy:function(){l.fn.destroy.call(this);this.element.off("click",".k-marker",this._markerClick);this.dataSource.unbind("change",this._dataChange);this.clear()},options:{zIndex:1e3,autoBind:true,dataSource:{},locationField:"location",titleField:"title"},add:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this._addOne(e[t]);else return this._addOne(e)},remove:function(e){e.destroy();var t=f(e,this.items);if(t>-1)this.items.splice(t,1)},clear:function(){for(var e=0;e<this.items.length;e++)this.items[e].destroy();this.items=[]},update:function(e){var t=e.location();if(t){e.showAt(this.map.locationToView(t));var i={marker:e,layer:this};this.map.trigger("markerActivate",i)}},_reset:function(){l.fn._reset.call(this);var e=this.items;for(var t=0;t<e.length;t++)this.update(e[t])},bind:function(e,t){var i=s.Marker.create(e,this.options);i.dataItem=t;var n={marker:i,layer:this};var r=this.map.trigger("markerCreated",n);if(!r){this.add(i);return i}},setDataSource:function(e){if(this.dataSource)this.dataSource.unbind("change",this._dataChange);this.dataSource=a.data.DataSource.create(e);this.dataSource.bind("change",this._dataChange);if(this.options.autoBind)this.dataSource.fetch()},_addOne:function(e){var t=u.create(e,this.options);t.addTo(this);return t},_initDataSource:function(){var e=this.options.dataSource;this._dataChange=this._dataChange.bind(this);this.dataSource=p.create(e).bind("change",this._dataChange);if(e&&this.options.autoBind)this.dataSource.fetch()},_dataChange:function(e){this._load(e.sender.view())},_load:function(e){this._data=e;this.clear();var t=a.getter(this.options.locationField);var i=a.getter(this.options.titleField);for(var n=0;n<e.length;n++){var r=e[n];this.bind({location:t(r),title:i(r)},r)}},_markerClick:function(e){var t={marker:i(e.target).data("kendoMarker"),layer:this};this.map.trigger("markerClick",t)}}),u=d.extend({init:function(e){this.options=e||{}},addTo:function(e){this.layer=e.markers||e;this.layer.items.push(this);this.layer.update(this)},location:function(e){if(e){this.options.location=r.create(e).toArray();if(this.layer)this.layer.update(this);return this}else return r.create(this.options.location)},showAt:function(e){this.render();this.element.css({left:t.round(e.x),top:t.round(e.y)});if(this.tooltip&&this.tooltip.popup)this.tooltip.popup._position()},hide:function(){if(this.element){this.element.remove();this.element=null}if(this.tooltip){this.tooltip.destroy();this.tooltip=null}},destroy:function(){this.layer=null;this.hide()},render:function(){if(!this.element){var e=this.options;var t=this.layer;this.element=i(h.createElement("span")).addClass("k-marker k-icon k-i-marker-"+a.toHyphens(e.shape||"pin")).attr("title",e.title).attr(e.attributes||{}).data("kendoMarker",this).css("zIndex",e.zIndex);if(t)t.element.append(this.element);this.renderTooltip()}},renderTooltip:function(){var t=this;var e=t.options.title;var i=t.options.tooltip||{};if(i&&o){var n=i.template;if(n){var r=a.template(n);i.content=function(e){e.location=t.location();e.marker=t;return r(e)}}if(e||i.content||i.contentUrl){this.tooltip=new o(this.element,i);this.tooltip.marker=this}}}});u.create=function(e,t){if(e instanceof u)return e;return new u(n({},t,e))},n(e,{map:{layers:{marker:v,MarkerLayer:v},Marker:u}})})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/map/main.min",["./crs.min","./location.min"],function(){var a=window.kendo.jQuery,t=void 0,l=document,c=Math,f=c.min,d=c.pow,n=window.kendo,i=n.ui.Widget,p=n.deepExtend,u=n.dataviz,r=u.ui,s=n.geometry,v=s.Point,e=u.map,g=e.Extent,o=e.Location,m=e.crs.EPSG3857,_,y=n.util.renderPos,b=n.drawing.util,w=b.defined,h=b.limitValue,x=b.valueOrDefault,k="k-",C=.9,S=.93,T="DOMMouseScroll mousewheel",A=5,M=1,D=i.extend({init:function(e,t){n.destroy(e);i.fn.init.call(this,e);this._initOptions(t);this.bind(this.events,t);this.crs=new m;this.element.addClass(k+this.options.name.toLowerCase()).css("position","relative").empty().append(l.createElement("div"));this._viewOrigin=this._getOrigin();this._initScroller();this._initMarkers();this._initControls();this._initLayers();this._reset();this._mousewheel=this._mousewheel.bind(this);this.element.on(T,this._mousewheel)},options:{name:"Map",controls:{attribution:true,navigator:{panStep:100},zoom:true},layers:[],layerDefaults:{shape:{style:{fill:{color:"#fff"},stroke:{color:"#aaa",width:.5}}},bubble:{style:{fill:{color:"#fff",opacity:.5},stroke:{color:"#aaa",width:.5}}},marker:{shape:"pinTarget",tooltip:{position:"top"}}},center:[0,0],zoom:3,minSize:256,minZoom:1,maxZoom:19,markers:[],markerDefaults:{shape:"pinTarget",tooltip:{position:"top"}},wraparound:true,messages:{tileTitle:"Map tile"}},events:["beforeReset","click","markerActivate","markerClick","markerCreated","pan","panEnd","reset","shapeClick","shapeCreated","shapeFeatureCreated","shapeMouseEnter","shapeMouseLeave","zoomEnd","zoomStart"],destroy:function(){this.scroller.destroy();if(this.navigator)this.navigator.destroy();if(this.attribution)this.attribution.destroy();if(this.zoomControl)this.zoomControl.destroy();this.markers.destroy();for(var e=0;e<this.layers.length;e++)this.layers[e].destroy();i.fn.destroy.call(this)},zoom:function(e){var t=this.options;if(w(e)){e=c.round(h(e,t.minZoom,t.maxZoom));if(t.zoom!==e){t.zoom=e;this._reset()}return this}else return t.zoom},center:function(e){if(e){this.options.center=o.create(e).toArray();this._reset();return this}else return o.create(this.options.center)},extent:function(e){if(e){this._setExtent(e);return this}else return this._getExtent()},setOptions:function(e){i.fn.setOptions.call(this,e);this._reset()},locationToLayer:function(e,t){var i=!this.options.wraparound;e=o.create(e);return this.crs.toPoint(e,this._layerSize(t),i)},layerToLocation:function(e,t){var i=!this.options.wraparound;e=v.create(e);return this.crs.toLocation(e,this._layerSize(t),i)},locationToView:function(e){e=o.create(e);var t=this.locationToLayer(this._viewOrigin);var i=this.locationToLayer(e);return i.translateWith(t.scale(-1))},viewToLocation:function(e,t){var i=this.locationToLayer(this._getOrigin(),t);e=v.create(e);e=e.clone().translateWith(i);return this.layerToLocation(e,t)},eventOffset:function(e){var t;var i;var n;var r=this.element.offset();if(e.x||e.y){var a="location";i=e.x[a]-r.left;n=e.y[a]-r.top;t=new s.Point(i,n)}else{var o=e.originalEvent||e;i=x(o.pageX,o.clientX)-r.left;n=x(o.pageY,o.clientY)-r.top;t=new s.Point(i,n)}return t},eventToView:function(e){var t=this.eventOffset(e);return this.locationToView(this.viewToLocation(t))},eventToLayer:function(e){return this.locationToLayer(this.eventToLocation(e))},eventToLocation:function(e){var t=this.eventOffset(e);return this.viewToLocation(t)},viewSize:function(){var e=this.element;var t=this._layerSize();var i=e.width();if(!this.options.wraparound)i=f(t,i);return{width:i,height:f(t,e.height())}},exportVisual:function(){this._reset();return false},_setOrigin:function(e,t){var i=this.viewSize(),n;e=this._origin=o.create(e);n=this.locationToLayer(e,t);n.x+=i.width/2;n.y+=i.height/2;this.options.center=this.layerToLocation(n,t).toArray();return this},_getOrigin:function(e){var t=this.viewSize(),i;if(e||!this._origin){i=this.locationToLayer(this.center());i.x-=t.width/2;i.y-=t.height/2;this._origin=this.layerToLocation(i)}return this._origin},_setExtent:function(e){var t=g.create(e);var i=t.se.clone();if(this.options.wraparound&&i.lng<0&&e.nw.lng>0)i.lng=180+(180+i.lng);e=new g(t.nw,i);this.center(e.center());var n=this.element.width();var r=this.element.height();for(var a=this.options.maxZoom;a>=this.options.minZoom;a--){var o=this.locationToLayer(e.nw,a);var s=this.locationToLayer(e.se,a);var l=c.abs(s.x-o.x);var u=c.abs(s.y-o.y);if(l<=n&&u<=r)break}this.zoom(a)},_getExtent:function(){var e=this._getOrigin();var t=this.locationToLayer(e);var i=this.viewSize();t.x+=i.width;t.y+=i.height;var n=this.layerToLocation(t);return new g(e,n)},_zoomAround:function(e,t){this._setOrigin(this.layerToLocation(e,t),t);this.zoom(t)},_initControls:function(){var e=this.options.controls;if(r.Attribution&&e.attribution)this._createAttribution(e.attribution);if(!n.support.mobileOS){if(r.Navigator&&e.navigator)this._createNavigator(e.navigator);if(r.ZoomControl&&e.zoom)this._createZoomControl(e.zoom)}},_createControlElement:function(e,t){var i=e.position||t;var n="."+y(i).replace(" ",".");var r=a(".k-map-controls"+n,this.element);if(r.length===0)r=a("<div>").addClass("k-map-controls "+y(i)).appendTo(this.element);return a("<div>").appendTo(r)},_createAttribution:function(e){var t=this._createControlElement(e,"bottomRight");this.attribution=new r.Attribution(t,e)},_createNavigator:function(e){var t=this._createControlElement(e,"topLeft");var i=this.navigator=new r.Navigator(t,e);this._navigatorPan=this._navigatorPan.bind(this);i.bind("pan",this._navigatorPan);this._navigatorCenter=this._navigatorCenter.bind(this);i.bind("center",this._navigatorCenter)},_navigatorPan:function(e){var t=this;var i=t.scroller;var n=i.scrollLeft+e.x;var r=i.scrollTop-e.y;var a=this._virtualSize;var o=this.element.height();var s=this.element.width();n=h(n,a.x.min,a.x.max-s);r=h(r,a.y.min,a.y.max-o);t.scroller.one("scroll",function(e){t._scrollEnd(e)});t.scroller.scrollTo(-n,-r)},_navigatorCenter:function(){this.center(this.options.center)},_createZoomControl:function(e){var t=this._createControlElement(e,"topLeft");var i=this.zoomControl=new r.ZoomControl(t,e);this._zoomControlChange=this._zoomControlChange.bind(this);i.bind("change",this._zoomControlChange)},_zoomControlChange:function(e){if(!this.trigger("zoomStart",{originalEvent:e})){this.zoom(this.zoom()+e.delta);this.trigger("zoomEnd",{originalEvent:e})}},_initScroller:function(){var e=n.support.mobileOS?S:C;var t=this.options.zoomable!==false;var i=this.scroller=new n.mobile.ui.Scroller(this.element.children(0),{friction:e,velocityMultiplier:A,zoom:t,mousewheelScrolling:false,supportDoubleTap:true});i.bind("scroll",this._scroll.bind(this));i.bind("scrollEnd",this._scrollEnd.bind(this));i.userEvents.bind("gesturestart",this._scaleStart.bind(this));i.userEvents.bind("gestureend",this._scale.bind(this));i.userEvents.bind("doubleTap",this._doubleTap.bind(this));i.userEvents.bind("tap",this._tap.bind(this));this.scrollElement=i.scrollElement},_initLayers:function(){var e=this.options.layers,t=this.layers=[];for(var i=0;i<e.length;i++){var n=e[i];var r=n.type||"shape";var a=this.options.layerDefaults[r];var o=u.map.layers[r];t.push(new o(this,p({},a,n)))}},_initMarkers:function(){this.markers=new e.layers.MarkerLayer(this,this.options.markerDefaults);this.markers.add(this.options.markers)},_scroll:function(e){var t=this.locationToLayer(this._viewOrigin).round();var i=e.sender.movable;var n=new s.Point(i.x,i.y).scale(-1).scale(1/i.scale);t.x+=n.x;t.y+=n.y;this._scrollOffset=n;this._setOrigin(this.layerToLocation(t));this.trigger("pan",{originalEvent:e,origin:this._getOrigin(),center:this.center()})},_scrollEnd:function(e){if(!this._scrollOffset||!this._panComplete())return;this._scrollOffset=null;this._panEndTS=new Date;this.trigger("panEnd",{originalEvent:e,origin:this._getOrigin(),center:this.center()})},_panComplete:function(){return new Date-(this._panEndTS||0)>50},_scaleStart:function(e){if(this.trigger("zoomStart",{originalEvent:e})){var t=e.touches[1];if(t)t.cancel()}},_scale:function(e){var t=this.scroller.movable.scale;var i=this._scaleToZoom(t);var n=new s.Point(e.center.x,e.center.y);var r=this.viewToLocation(n,i);var a=this.locationToLayer(r,i);var o=a.translate(-n.x,-n.y);this._zoomAround(o,i);this.trigger("zoomEnd",{originalEvent:e})},_scaleToZoom:function(e){var t=this._layerSize()*e;var i=t/this.options.minSize;var n=c.log(i)/c.log(2);return c.round(n)},_reset:function(){if(this.attribution)this.attribution.filter(this.center(),this.zoom());this._viewOrigin=this._getOrigin(true);this._resetScroller();this.trigger("beforeReset");this.trigger("reset",{tileTitle:this.options.messages.tileTitle})},_resetScroller:function(){var e=this.scroller;var t=e.dimensions.x;var i=e.dimensions.y;var n=this._layerSize();var r=this.extent().nw;var a=this.locationToLayer(r).round();e.movable.round=true;e.reset();e.userEvents.cancel();var o=this.zoom();e.dimensions.forcedMinScale=d(2,this.options.minZoom-o);e.dimensions.maxScale=d(2,this.options.maxZoom-o);var s={min:-a.x,max:n-a.x};var l={min:-a.y,max:n-a.y};if(this.options.wraparound){s.max=20*n;s.min=-s.max}if(this.options.pannable===false){var u=this.viewSize();s.min=l.min=0;s.max=u.width;l.max=u.height}t.makeVirtual();i.makeVirtual();t.virtualSize(s.min,s.max);i.virtualSize(l.min,l.max);this._virtualSize={x:s,y:l}},_renderLayers:function(){var e=this.options.layers,t=this.layers=[],i=this.scrollWrap;i.empty();for(var n=0;n<e.length;n++){var r=e[n];var a=r.type||"shape";var o=this.options.layerDefaults[a];var s=u.map.layers[a];t.push(new s(this,p({},o,r)))}},_layerSize:function(e){e=x(e,this.options.zoom);return this.options.minSize*d(2,e)},_tap:function(e){if(!this._panComplete())return;var t=this.eventOffset(e);this.trigger("click",{originalEvent:e,location:this.viewToLocation(t)})},_doubleTap:function(e){var t=this.options;if(t.zoomable!==false)if(!this.trigger("zoomStart",{originalEvent:e})){var i=this.zoom()+M;var n=this.eventOffset(e);var r=this.viewToLocation(n);var a=this.locationToLayer(r,i);var o=a.translate(-n.x,-n.y);this._zoomAround(o,i);this.trigger("zoomEnd",{originalEvent:e})}},_mousewheel:function(e){e.preventDefault();var t=u.mwDelta(e)>0?-1:1;var i=this.options;var n=this.zoom();var r=h(n+t,i.minZoom,i.maxZoom);if(i.zoomable!==false&&r!==n)if(!this.trigger("zoomStart",{originalEvent:e})){var a=this.eventOffset(e);var o=this.viewToLocation(a);var s=this.locationToLayer(o,r);var l=s.translate(-a.x,-a.y);this._zoomAround(l,r);this.trigger("zoomEnd",{originalEvent:e})}}});u.ui.plugin(D)})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.dataviz.map.min",["kendo.data.min","kendo.userevents.min","kendo.tooltip.min","kendo.mobile.scroller.min","kendo.draganddrop.min","kendo.dataviz.core.min","./dataviz/map/location.min","./dataviz/map/attribution.min","./dataviz/map/navigator.min","./dataviz/map/zoom.min","./dataviz/map/crs.min","./dataviz/map/layers/base.min","./dataviz/map/layers/shape.min","./dataviz/map/layers/bubble.min","./dataviz/map/layers/tile.min","./dataviz/map/layers/bing.min","./dataviz/map/layers/marker.min","./dataviz/map/main.min"],function(){var e={id:"dataviz.map",name:"Map",category:"dataviz",description:"The Kendo DataViz Map displays spatial data",depends:["data","userevents","tooltip","dataviz.core","drawing","mobile.scroller"]};return window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/diagram/utils.min",["kendo.core.min"],function(){var i=window.kendo.jQuery,c=void 0,t=window.kendo,r=t.dataviz.diagram={},h,n=Array.isArray,a=1e-6,l={};function e(e,t,i){if(typeof e=="undefined"||typeof t=="undefined")return[];if(i&&l.sign(t-e)!=l.sign(i))throw"The sign of the increment should allow to reach the stop-value.";i=i||1;e=e||0;t=t||e;if((t-e)/i===Infinity)throw"Infinite range defined.";var n=[],r=-1,a;function o(e){var t=1;while(e*t%1)t*=10;return t}var s=o(Math.abs(i));e*=s;t*=s;i*=s;if(e>t&&i>0)i=-i;if(i<0)while((a=e+i*++r)>=t)n.push(a/s);else while((a=e+i*++r)<=t)n.push(a/s);return n}function o(e,t){if(e==t)return 0;var i=t.x-e.x,n=e.y-t.y,r=Math.atan(i/n);if(n>=0)return i<0?r+2*Math.PI:r;return r+Math.PI}(0,t.deepExtend)(l,{isNearZero:function(e){return Math.abs(e)<a},isDefined:function(e){return typeof e!=="undefined"},isUndefined:function(e){return typeof e==="undefined"||e===null},isObject:function(e){return e===Object(e)},has:function(e,t){return Object.hasOwnProperty.call(e,t)},isString:function(e){return Object.prototype.toString.call(e)=="[object String]"},isBoolean:function(e){return Object.prototype.toString.call(e)=="[object Boolean]"},isType:function(e,t){return Object.prototype.toString.call(e)=="[object "+t+"]"},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},isEmpty:function(e){if(e===null)return true;if(n(e)||l.isString(e))return e.length===0;for(var t in e)if(l.has(e,t))return false;return true},simpleExtend:function(e,t){if(!l.isObject(t))return;for(var i in t)e[i]=t[i]},initArray:function e(t,i){var n=[];for(var r=0;r<t;++r)n[r]=i;return n},serializePoints:function(e){var t=[];for(var i=0;i<e.length;i++){var n=e[i];t.push(n.x+";"+n.y)}return t.join(";")},deserializePoints:function(e){var t=e.split(";"),i=[];if(t.length%2!==0)throw"Not an array of points.";for(var n=0;n<t.length;n+=2)i.push(new r.Point(parseInt(t[n],10),parseInt(t[n+1],10)));return i},randomInteger:function(e,t){return parseInt(Math.floor(Math.random()*t)+e,10)},DFT:function(e,t){t(e);if(e.childNodes)for(var i=0;i<e.childNodes.length;i++){var n=e.childNodes[i];this.DFT(n,t)}},getMatrixAngle:function(e){if(e===null||e.d===0)return 0;return Math.atan2(e.b,e.d)*180/Math.PI},getMatrixScaling:function(e){var t=Math.sqrt(e.a*e.a+e.c*e.c);var i=Math.sqrt(e.b*e.b+e.d*e.d);return[t,i]}}),l.sign=function(e){return e?e<0?-1:1:0},l.findAngle=function(e,t){return o(e,t)*180/Math.PI},l.forEach=function(e,t,i){for(var n=0;n<e.length;n++)t.call(i,e[n],n,e)},l.any=function(e,t){for(var i=0;i<e.length;++i)if(t(e[i]))return e[i];return null},l.remove=function(e,t){var i;while((i=l.indexOf(e,t))!==-1)e.splice(i,1);return e},l.contains=function(e,t){return l.indexOf(e,t)!==-1},l.indexOf=function(e,t){return i.inArray(t,e)},l.fold=function(e,t,i,n){var r=arguments.length>2;for(var a=0;a<e.length;a++){var o=e[a];if(!r){i=o;r=true}else i=t.call(n,i,o,a,e)}if(!r)throw"Reduce of empty array with no initial value";return i},l.find=function(e,n,r){var a;l.any(e,function(e,t,i){if(n.call(r,e,t,i)){a=e;return true}return false});return a},l.first=function(e,t,i){if(e.length===0)return null;if(l.isUndefined(t))return e[0];return l.find(e,t,i)},l.insert=function(e,t,i){e.splice(i,0,t);return e},l.all=function(e,t,i){var n=true;var r;for(var a=0;a<e.length;a++){r=e[a];n=n&&t.call(i,r,a,e);if(!n)break}return n},l.clear=function(e){e.splice(0,e.length)},l.bisort=function(e,t,i){if(l.isUndefined(e))throw"First array is not specified.";if(l.isUndefined(t))throw"Second array is not specified.";if(e.length!=t.length)throw"The two arrays should have equal length";var n=[],r;for(r=0;r<e.length;r++)n.push({x:e[r],y:t[r]});if(l.isUndefined(i))n.sort(function(e,t){return e.x-t.x});else n.sort(function(e,t){return i(e.x,t.x)});l.clear(e);l.clear(t);for(r=0;r<n.length;r++){e.push(n[r].x);t.push(n[r].y)}},l.addRange=function(e,t){e.push.apply(e,t)};var s={easeInOut:function(e){return-Math.cos(e*Math.PI)/2+.5}},u=t.Class.extend({init:function(){this.adapters=[];this.target=0;this.tick=0;this.interval=20;this.duration=800;this.lastTime=null;this.handlers=[];var e=this;this.transition=s.easeInOut;this.timerDelegate=function(){e.onTimerEvent()}},addAdapter:function(e){this.adapters.push(e)},onComplete:function(e){this.handlers.push(e)},removeHandler:function(t){this.handlers=i.grep(this.handlers,function(e){return e!==t})},trigger:function(){var t=this;if(this.handlers)l.forEach(this.handlers,function(e){return e.call(t.caller!==null?t.caller:t)})},onStep:function(){},seekTo:function(e){this.seekFromTo(this.tick,e)},seekFromTo:function(e,t){this.target=Math.max(0,Math.min(1,t));this.tick=Math.max(0,Math.min(1,e));this.lastTime=(new Date).getTime();if(!this.intervalId)this.intervalId=window.setInterval(this.timerDelegate,this.interval)},stop:function(){if(this.intervalId){window.clearInterval(this.intervalId);this.intervalId=null;this.trigger()}},play:function(e){if(this.adapters.length===0)return;if(e!==null)this.caller=e;this.initState();this.seekFromTo(0,1)},reverse:function(){this.seekFromTo(1,0)},initState:function(){if(this.adapters.length===0)return;for(var e=0;e<this.adapters.length;e++)this.adapters[e].initState()},propagate:function(){var e=this.transition(this.tick);for(var t=0;t<this.adapters.length;t++)this.adapters[t].update(e)},onTimerEvent:function(){var e=(new Date).getTime();var t=e-this.lastTime;this.lastTime=e;var i=t/this.duration*(this.tick<this.target?1:-1);if(Math.abs(i)>=Math.abs(this.tick-this.target))this.tick=this.target;else this.tick+=i;try{this.propagate()}finally{this.onStep.call(this);if(this.target==this.tick)this.stop()}}});t.deepExtend(r,{init:function(e){t.init(e,r.ui)},Utils:l,Range:e,Ticker:u})})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/diagram/math.min",["./utils.min","kendo.dataviz.core.min"],function(){var n=window.kendo.jQuery,i=void 0,b=window.kendo,p=b.dataviz.diagram,e=b.Class,t=b.deepExtend,a,P=p.Utils,w=b.dataviz.Point2D,o=b.isFunction,v=P.contains,s=n.map,l=3,u=1e-6,c=(t(w.fn,{plus:function(e){return new w(this.x+e.x,this.y+e.y)},minus:function(e){return new w(this.x-e.x,this.y-e.y)},offset:function(e){return new w(this.x-e,this.y-e)},times:function(e){return new w(this.x*e,this.y*e)},normalize:function(){if(this.length()===0)return new w;return this.times(1/this.length())},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},toString:function(){return"("+this.x+","+this.y+")"},lengthSquared:function(){return this.x*this.x+this.y*this.y},middleOf:function e(t,i){return new w(i.x-t.x,i.y-t.y).times(.5).plus(t)},toPolar:function(e){var t=1;if(e)t=180/Math.PI;var i=Math.atan2(Math.abs(this.y),Math.abs(this.x));var n=Math.PI/2;var r=this.length();if(this.x===0){if(this.y===0)return new k(0,0);if(this.y>0)return new k(r,t*n);if(this.y<0)return new k(r,t*3*n)}else if(this.x>0){if(this.y===0)return new k(r,0);if(this.y>0)return new k(r,t*i);if(this.y<0)return new k(r,t*(4*n-i))}else{if(this.y===0)return new k(r,2*n);if(this.y>0)return new k(r,t*(2*n-i));if(this.y<0)return new k(r,t*(2*n+i))}},isOnLine:function(e,t){if(e.x>t.x){var i=t;t=e;e=i}var n=new x(e.x,e.y).inflate(l,l),r=new x(t.x,t.y).inflate(l,l),a,o;if(n.union(r).contains(this)){if(e.x===t.x||e.y===t.y)return true;else if(e.y<t.y){a=n.x+(r.x-n.x)*(this.y-(n.y+n.height))/(r.y+r.height-(n.y+n.height));o=n.x+n.width+(r.x+r.width-(n.x+n.width))*(this.y-n.y)/(r.y-n.y)}else{a=n.x+(r.x-n.x)*(this.y-n.y)/(r.y-n.y);o=n.x+n.width+(r.x+r.width-(n.x+n.width))*(this.y-(n.y+n.height))/(r.y+r.height-(n.y+n.height))}return this.x>a&&this.x<o}return false}}),t(w,{parse:function(e){var t=e.slice(1,e.length-1),i=t.split(","),n=parseInt(i[0],10),r=parseInt(i[1],10);if(!isNaN(n)&&!isNaN(r))return new w(n,r)}}),e.extend({init:function(e,t,i){this.point=e;this.left=t;this.right=i}})),x=e.extend({init:function(e,t,i,n){this.x=e||0;this.y=t||0;this.width=i||0;this.height=n||0},contains:function(e){return e.x>=this.x&&e.x<=this.x+this.width&&e.y>=this.y&&e.y<=this.y+this.height},inflate:function(e,t){if(t===i)t=e;this.x-=e;this.y-=t;this.width+=2*e+1;this.height+=2*t+1;return this},offset:function(e,t){var i=e,n=t;if(e instanceof w){i=e.x;n=e.y}this.x+=i;this.y+=n;return this},union:function(e){var t=Math.min(this.x,e.x);var i=Math.min(this.y,e.y);var n=Math.max(this.x+this.width,e.x+e.width);var r=Math.max(this.y+this.height,e.y+e.height);return new x(t,i,n-t,r-i)},center:function(){return new w(this.x+this.width/2,this.y+this.height/2)},top:function(){return new w(this.x+this.width/2,this.y)},right:function(){return new w(this.x+this.width,this.y+this.height/2)},bottom:function(){return new w(this.x+this.width/2,this.y+this.height)},left:function(){return new w(this.x,this.y+this.height/2)},topLeft:function(){return new w(this.x,this.y)},topRight:function(){return new w(this.x+this.width,this.y)},bottomLeft:function(){return new w(this.x,this.y+this.height)},bottomRight:function(){return new w(this.x+this.width,this.y+this.height)},clone:function(){return new x(this.x,this.y,this.width,this.height)},isEmpty:function(){return!this.width&&!this.height},equals:function(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height},rotatedBounds:function(e){var t=this.clone(),i=this.rotatedPoints(e),n=i[0],r=i[1],a=i[2],o=i[3];t.x=Math.min(a.x,n.x,r.x,o.x);t.y=Math.min(a.y,n.y,r.y,o.y);t.width=Math.max(a.x,n.x,r.x,o.x)-t.x;t.height=Math.max(a.y,n.y,r.y,o.y)-t.y;return t},rotatedPoints:function(e){var t=this,i=t.center(),n=t.bottomRight().rotate(i,360-e),r=t.topLeft().rotate(i,360-e),a=t.topRight().rotate(i,360-e),o=t.bottomLeft().rotate(i,360-e);return[r,a,n,o]},toString:function(e){e=e||" ";return this.x+e+this.y+e+this.width+e+this.height},scale:function(e,t,i,n,r){var a=this.topLeft();var o=this.center();a.rotate(o,360-r).rotate(n,r);var s=i.minus(a);var l=new w(s.x*e,s.y*t);var u=s.minus(l);a=a.plus(u);a.rotate(n,360-r).rotate(o,r);this.x=a.x;this.y=a.y;this.width*=e;this.height*=t},zoom:function(e){this.x*=e;this.y*=e;this.width*=e;this.height*=e;return this},overlaps:function(e){var t=this.bottomRight();var i=e.bottomRight();var n=!(t.x<e.x||t.y<e.y||i.x<this.x||i.y<this.y);return n}}),h=e.extend({init:function(e,t){this.width=e;this.height=t}});function f(e){return Math.abs(e)<u}function d(e,t,i,n,r){var a=(t.x-e.x)*(n.y-i.y)-(t.y-e.y)*(n.x-i.x);if(f(a))return;var o=(e.y-i.y)*(n.x-i.x)-(e.x-i.x)*(n.y-i.y);var s=(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y);var l=o/a;var u=s/a;if(r&&(l<0||l>1||u<0||u>1))return;return new w(e.x+l*(t.x-e.x),e.y+l*(t.y-e.y))}h.prototype.Empty=new h(0,0),x.toRect=function(e){if(!(e instanceof x))e=new x(e.x,e.y,e.width,e.height);return e},x.empty=function(){return new x(0,0,0,0)},x.fromPoints=function(e,t){if(isNaN(e.x)||isNaN(e.y)||isNaN(t.x)||isNaN(t.y))throw"Some values are NaN.";return new x(Math.min(e.x,t.x),Math.min(e.y,t.y),Math.abs(e.x-t.x),Math.abs(e.y-t.y))};var _={lines:function(e,t,i,n){return d(e,t,i,n)},segments:function(e,t,i,n){return d(e,t,i,n,true)},rectWithLine:function(e,t,i){return _.segments(t,i,e.topLeft(),e.topRight())||_.segments(t,i,e.topRight(),e.bottomRight())||_.segments(t,i,e.bottomLeft(),e.bottomRight())||_.segments(t,i,e.topLeft(),e.bottomLeft())},rects:function(e,t,i){var n=t.topLeft(),r=t.topRight(),a=t.bottomLeft(),o=t.bottomRight();var s=t.center();if(i){n=n.rotate(s,i);r=r.rotate(s,i);a=a.rotate(s,i);o=o.rotate(s,i)}var l=e.contains(n)||e.contains(r)||e.contains(a)||e.contains(o)||_.rectWithLine(e,n,r)||_.rectWithLine(e,n,a)||_.rectWithLine(e,r,o)||_.rectWithLine(e,a,o);if(!l){n=e.topLeft();r=e.topRight();a=e.bottomLeft();o=e.bottomRight();if(i){var u=360-i;n=n.rotate(s,u);r=r.rotate(s,u);a=a.rotate(s,u);o=o.rotate(s,u)}l=t.contains(n)||t.contains(r)||t.contains(a)||t.contains(o)}return l}},y=e.extend({init:function(e){this.container=x.toRect(e)},align:function(e,t){var i=t.toLowerCase().split(" ");for(var n=0;n<i.length;n++)e=this._singleAlign(e,i[n]);return e},_singleAlign:function(e,t){if(o(this[t]))return this[t](e);else return e},left:function(e){return this._align(e,this._left)},center:function(e){return this._align(e,this._center)},right:function(e){return this._align(e,this._right)},stretch:function(e){return this._align(e,this._stretch)},top:function(e){return this._align(e,this._top)},middle:function(e){return this._align(e,this._middle)},bottom:function(e){return this._align(e,this._bottom)},_left:function(e,t){t.x=e.x},_center:function(e,t){t.x=(e.width-t.width)/2||0},_right:function(e,t){t.x=e.width-t.width},_top:function(e,t){t.y=e.y},_middle:function(e,t){t.y=(e.height-t.height)/2||0},_bottom:function(e,t){t.y=e.height-t.height},_stretch:function(e,t){t.x=0;t.y=0;t.height=e.height;t.width=e.width},_align:function(e,t){e=x.toRect(e);t(this.container,e);return e}}),k=e.extend({init:function(e,t){this.r=e;this.angle=t}}),r=e.extend({init:function(e,t,i,n,r,a){this.a=e||0;this.b=t||0;this.c=i||0;this.d=n||0;this.e=r||0;this.f=a||0},plus:function(e){this.a+=e.a;this.b+=e.b;this.c+=e.c;this.d+=e.d;this.e+=e.e;this.f+=e.f},minus:function(e){this.a-=e.a;this.b-=e.b;this.c-=e.c;this.d-=e.d;this.e-=e.e;this.f-=e.f},times:function(e){return new r(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.e+this.c*e.f+this.e,this.b*e.e+this.d*e.f+this.f)},apply:function(e){return new w(this.a*e.x+this.c*e.y+this.e,this.b*e.x+this.d*e.y+this.f)},applyRect:function(e){return x.fromPoints(this.apply(e.topLeft()),this.apply(e.bottomRight()))},toString:function(){return"matrix("+this.a+" "+this.b+" "+this.c+" "+this.d+" "+this.e+" "+this.f+")"}}),C=(t(r,{fromSVGMatrix:function(e){var t=new r;t.a=e.a;t.b=e.b;t.c=e.c;t.d=e.d;t.e=e.e;t.f=e.f;return t},fromMatrixVector:function(e){var t=new r;t.a=e.a;t.b=e.b;t.c=e.c;t.d=e.d;t.e=e.e;t.f=e.f;return t},fromList:function(e){if(e.length!==6)throw"The given list should consist of six elements.";var t=new r;t.a=e[0];t.b=e[1];t.c=e[2];t.d=e[3];t.e=e[4];t.f=e[5];return t},translation:function(e,t){var i=new r;i.a=1;i.b=0;i.c=0;i.d=1;i.e=e;i.f=t;return i},unit:function(){return new r(1,0,0,1,0,0)},rotation:function(e,t,i){var n=new r;n.a=Math.cos(e*Math.PI/180);n.b=Math.sin(e*Math.PI/180);n.c=-n.b;n.d=n.a;n.e=t-t*n.a+i*n.b||0;n.f=i-i*n.a-t*n.b||0;return n},scaling:function(e,t){var i=new r;i.a=e;i.b=0;i.c=0;i.d=t;i.e=0;i.f=0;return i},parse:function(e){var t,i;if(e){e=e.trim();if(e.slice(0,6).toLowerCase()==="matrix"){i=e.slice(7,e.length-1).trim();t=i.split(",");if(t.length===6)return r.fromList(s(t,function(e){return parseFloat(e)}));t=i.split(" ");if(t.length===6)return r.fromList(s(t,function(e){return parseFloat(e)}))}if(e.slice(0,1)==="("&&e.slice(e.length-1)===")")e=e.substr(1,e.length-1);if(e.indexOf(",")>0){t=e.split(",");if(t.length===6)return r.fromList(s(t,function(e){return parseFloat(e)}))}if(e.indexOf(" ")>0){t=e.split(" ");if(t.length===6)return r.fromList(s(t,function(e){return parseFloat(e)}))}}return t}}),e.extend({init:function(e,t,i,n,r,a){this.a=e||0;this.b=t||0;this.c=i||0;this.d=n||0;this.e=r||0;this.f=a||0},fromMatrix:function e(t){var i=new C;i.a=t.a;i.b=t.b;i.c=t.c;i.d=t.d;i.e=t.e;i.f=t.f;return i}}));function S(e,t){var i,n,r;do{i=Math.random()*2-1;n=Math.random()*2-1;r=i*i+n*n}while(!r||r>1);return e+t*i*Math.sqrt(-2*Math.log(r)/r)}function T(e){if(P.isUndefined(e))e=10;var t="";var i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var n=e;n>0;--n)t+=i.charAt(Math.round(Math.random()*(i.length-1)));return t}var A={_distanceToLineSquared:function(e,t,i){function n(e,t){return(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)}if(t===i)return n(e,t);var r=i.x-t.x,a=i.y-t.y,o=(e.x-t.x)*r+(e.y-t.y)*a;if(o<0)return n(t,e);o=(i.x-e.x)*r+(i.y-e.y)*a;if(o<0)return n(i,e);o=(i.x-e.x)*a-(i.y-e.y)*r;return o*o/(r*r+a*a)},distanceToLine:function(e,t,i){return Math.sqrt(this._distanceToLineSquared(e,t,i))},distanceToPolyline:function(e,t){var i=Number.MAX_VALUE;if(P.isUndefined(t)||t.length===0)return Number.MAX_VALUE;for(var n=0;n<t.length-1;n++){var r=t[n];var a=t[n+1];var o=this._distanceToLineSquared(e,r,a);if(o<i)i=o}return Math.sqrt(i)}},M=b.Class.extend({init:function(){this._buckets=[];this.length=0},add:function(e,t){var i=this._createGetBucket(e);if(P.isDefined(t))i.value=t;return i},get:function(e){if(this._bucketExists(e))return this._createGetBucket(e);return null},set:function(e,t){this.add(e,t)},containsKey:function(e){return this._bucketExists(e)},remove:function(e){if(this._bucketExists(e)){var t=this._hash(e);delete this._buckets[t];this.length--;return e}},forEach:function(e){var t=this._hashes();for(var i=0,n=t.length;i<n;i++){var r=t[i];var a=this._buckets[r];if(P.isUndefined(a))continue;e(a)}},clone:function(){var e=new M;var t=this._hashes();for(var i=0,n=t.length;i<n;i++){var r=t[i];var a=this._buckets[r];if(P.isUndefined(a))continue;e.add(a.key,a.value)}return e},_hashes:function(){var e=[];for(var t in this._buckets)if(this._buckets.hasOwnProperty(t))e.push(t);return e},_bucketExists:function(e){var t=this._hash(e);return P.isDefined(this._buckets[t])},_createGetBucket:function(e){var t=this._hash(e);var i=this._buckets[t];if(P.isUndefined(i)){i={key:e};this._buckets[t]=i;this.length++}return i},_hash:function(e){if(P.isNumber(e))return e;if(P.isString(e))return this._hashString(e);if(P.isObject(e))return this._objectHashId(e);throw"Unsupported key type."},_hashString:function(e){var t=0;if(e.length===0)return t;for(var i=0;i<e.length;i++){var n=e.charCodeAt(i);t=t*32-t+n}return t},_objectHashId:function(e){var t=e._hashId;if(P.isUndefined(t)){t=T();e._hashId=t}return t}}),B=b.Observable.extend({init:function(e){var t=this;b.Observable.fn.init.call(t);this._hashTable=new M;this.length=0;if(P.isDefined(e))if(Array.isArray(e))for(var i=0;i<e.length;i++)this.add(e[i]);else e.forEach(function(e,t){this.add(e,t)},this)},add:function(e,t){var i=this._hashTable.get(e);if(!i){i=this._hashTable.add(e);this.length++;this.trigger("changed")}i.value=t},set:function(e,t){this.add(e,t)},get:function(e){var t=this._hashTable.get(e);if(t)return t.value;throw new Error("Cannot find key "+e)},containsKey:function(e){return this._hashTable.containsKey(e)},remove:function(e){if(this.containsKey(e)){this.trigger("changed");this.length--;return this._hashTable.remove(e)}},forEach:function(t,i){this._hashTable.forEach(function(e){t.call(i,e.key,e.value)})},forEachValue:function(t,i){this._hashTable.forEach(function(e){t.call(i,e.value)})},forEachKey:function(t,i){this._hashTable.forEach(function(e){t.call(i,e.key)})},keys:function(){var t=[];this.forEachKey(function(e){t.push(e)});return t}}),D=b.Class.extend({init:function(){this._tail=null;this._head=null;this.length=0},enqueue:function(e){var t={value:e,next:null};if(!this._head){this._head=t;this._tail=this._head}else{this._tail.next=t;this._tail=this._tail.next}this.length++},dequeue:function(){if(this.length<1)throw new Error("The queue is empty.");var e=this._head.value;this._head=this._head.next;this.length--;return e},contains:function(e){var t=this._head;while(t){if(t.value===e)return true;t=t.next}return false}}),E=b.Observable.extend({init:function(e){var t=this;b.Observable.fn.init.call(t);this._hashTable=new M;this.length=0;if(P.isDefined(e))if(e instanceof M)e.forEach(function(e){this.add(e)});else if(e instanceof B)e.forEach(function(e,t){this.add({key:e,value:t})},this)},contains:function(e){return this._hashTable.containsKey(e)},add:function(e){var t=this._hashTable.get(e);if(!t){this._hashTable.add(e,e);this.length++;this.trigger("changed")}},get:function(e){if(this.contains(e))return this._hashTable.get(e).value;else return null},hash:function(e){return this._hashTable._hash(e)},remove:function(e){if(this.contains(e)){this._hashTable.remove(e);this.length--;this.trigger("changed")}},forEach:function(t,e){this._hashTable.forEach(function(e){t(e.value)},e)},toArray:function(){var t=[];this.forEach(function(e){t.push(e)});return t}}),g=b.Class.extend({init:function(e,t){this.links=[];this.outgoing=[];this.incoming=[];this.weight=1;if(P.isDefined(e))this.id=e;else this.id=T();if(P.isDefined(t)){this.associatedShape=t;var i=t.bounds();this.width=i.width;this.height=i.height;this.x=i.x;this.y=i.y}else this.associatedShape=null;this.data=null;this.type="Node";this.shortForm="Node '"+this.id+"'";this.isVirtual=false},isIsolated:function(){return P.isEmpty(this.links)},bounds:function(e){if(!P.isDefined(e))return new p.Rect(this.x,this.y,this.width,this.height);this.x=e.x;this.y=e.y;this.width=e.width;this.height=e.height},isLinkedTo:function(t){var i=this;return P.any(i.links,function(e){return e.getComplement(i)===t})},getChildren:function(){if(this.outgoing.length===0)return[];var e=[];for(var t=0,i=this.outgoing.length;t<i;t++){var n=this.outgoing[t];e.push(n.getComplement(this))}return e},getParents:function(){if(this.incoming.length===0)return[];var e=[];for(var t=0,i=this.incoming.length;t<i;t++){var n=this.incoming[t];e.push(n.getComplement(this))}return e},clone:function(){var e=new g;if(P.isDefined(this.weight))e.weight=this.weight;if(P.isDefined(this.balance))e.balance=this.balance;if(P.isDefined(this.owner))e.owner=this.owner;e.associatedShape=this.associatedShape;e.x=this.x;e.y=this.y;e.width=this.width;e.height=this.height;return e},adjacentTo:function(e){return this.isLinkedTo(e)!==null},removeLink:function(e){if(e.source===this){P.remove(this.links,e);P.remove(this.outgoing,e);e.source=null}if(e.target===this){P.remove(this.links,e);P.remove(this.incoming,e);e.target=null}},hasLinkTo:function(t){return P.any(this.outgoing,function(e){return e.target===t})},degree:function(){return this.links.length},incidentWith:function(e){return v(this.links,e)},getLinksWith:function(t){return P.all(this.links,function(e){return e.getComplement(this)===t},this)},getNeighbors:function(){var t=[];P.forEach(this.incoming,function(e){t.push(e.getComplement(this))},this);P.forEach(this.outgoing,function(e){t.push(e.getComplement(this))},this);return t}}),I=b.Class.extend({init:function(e,t,i,n){if(P.isUndefined(e))throw"The source of the new link is not set.";if(P.isUndefined(t))throw"The target of the new link is not set.";var r,a;if(P.isString(e))r=new g(e);else r=e;if(P.isString(t))a=new g(t);else a=t;this.source=r;this.target=a;this.source.links.push(this);this.target.links.push(this);this.source.outgoing.push(this);this.target.incoming.push(this);if(P.isDefined(i))this.id=i;else this.id=T();if(P.isDefined(n))this.associatedConnection=n;else this.associatedConnection=null;this.type="Link";this.shortForm="Link '"+this.source.id+"->"+this.target.id+"'"},getComplement:function(e){if(this.source!==e&&this.target!==e)throw"The given node is not incident with this link.";return this.source===e?this.target:this.source},getCommonNode:function(e){if(this.source===e.source||this.source===e.target)return this.source;if(this.target===e.source||this.target===e.target)return this.target;return null},isBridging:function(e,t){return this.source===e&&this.target===t||this.source===t&&this.target===e},getNodes:function(){return[this.source,this.target]},incidentWith:function(e){return this.source===e||this.target===e},adjacentTo:function(e){return v(this.source.links,e)||v(this.target.links,e)},changeSource:function(e){P.remove(this.source.links,this);P.remove(this.source.outgoing,this);e.links.push(this);e.outgoing.push(this);this.source=e},changeTarget:function(e){P.remove(this.target.links,this);P.remove(this.target.incoming,this);e.links.push(this);e.incoming.push(this);this.target=e},changesNodes:function(e,t){if(this.source===e)this.changeSource(t);else if(this.target===e)this.changeTarget(t)},reverse:function(){var e=this.source;var t=this.target;this.source=t;P.remove(e.outgoing,this);this.source.outgoing.push(this);this.target=e;P.remove(t.incoming,this);this.target.incoming.push(this);return this},directTo:function(e){if(this.source!==e&&this.target!==e)throw"The given node is not incident with this link.";if(this.target!==e)this.reverse()},createReverseEdge:function(){var e=this.clone();e.reverse();e.reversed=true;return e},clone:function(){var e=new I(this.source,this.target);return e}}),m=b.Class.extend({init:function(e){this.links=[];this.nodes=[];this._nodeMap=new B;this.diagram=null;this._root=null;if(P.isDefined(e))if(P.isString(e))this.id=e;else{this.diagram=e;this.id=e.id}else this.id=T();this.bounds=new x;this._hasCachedRelationships=false;this.type="Graph"},cacheRelationships:function(e){if(P.isUndefined(e))e=false;if(this._hasCachedRelationships&&!e)return;for(var t=0,i=this.nodes.length;t<i;t++){var n=this.nodes[t];n.children=this.getChildren(n);n.parents=this.getParents(n)}this._hasCachedRelationships=true},assignLevels:function(e,t,i){if(!e)throw"Start node not specified.";if(P.isUndefined(t))t=0;this.cacheRelationships();if(P.isUndefined(i)){i=new B;P.forEach(this.nodes,function(e){i.add(e,false)})}i.set(e,true);e.level=t;var n=e.children;for(var r=0,a=n.length;r<a;r++){var o=n[r];if(!o||i.get(o))continue;this.assignLevels(o,t+1,i)}},root:function(e){if(P.isUndefined(e))if(!this._root){var t=P.first(this.nodes,function(e){return e.incoming.length===0});if(t)return t;return P.first(this.nodes)}else return this._root;else this._root=e},getConnectedComponents:function(){this.componentIndex=0;this.setItemIndices();var e=P.initArray(this.nodes.length,-1);for(var t=0;t<this.nodes.length;t++)if(e[t]===-1){this._collectConnectedNodes(e,t);this.componentIndex++}var i=[],n;for(n=0;n<this.componentIndex;++n)i[n]=new m;for(n=0;n<e.length;++n){var r=i[e[n]];r.addNodeAndOutgoings(this.nodes[n])}i.sort(function(e,t){return t.nodes.length-e.nodes.length});return i},_collectConnectedNodes:function(n,e){n[e]=this.componentIndex;var r=this.nodes[e];P.forEach(r.links,function(e){var t=e.getComplement(r);var i=t.index;if(n[i]===-1)this._collectConnectedNodes(n,i)},this)},calcBounds:function(){if(this.isEmpty()){this.bounds=new x;return this.bounds}var e=null;for(var t=0,i=this.nodes.length;t<i;t++){var n=this.nodes[t];if(!e)e=n.bounds();else e=e.union(n.bounds())}this.bounds=e;return this.bounds},getSpanningTree:function(e){var t=new m;var i=new B,n,r;t.root=e.clone();t.root.level=0;t.root.id=e.id;i.add(e,t.root);e.level=0;var a=[];var o=[];t._addNode(t.root);a.push(e);o.push(e);var s=1;while(o.length>0){var l=o.pop();for(var c=0;c<l.links.length;c++){var h=l.links[c];var u=h.getComplement(l);if(v(a,u))continue;u.level=l.level+1;if(s<u.level+1)s=u.level+1;if(!v(o,u))o.push(u);if(!v(a,u))a.push(u);if(i.containsKey(l))n=i.get(l);else{n=l.clone();n.level=l.level;n.id=l.id;i.add(l,n)}if(i.containsKey(u))r=i.get(u);else{r=u.clone();r.level=u.level;r.id=u.id;i.add(u,r)}var f=new I(n,r);t.addLink(f)}}var d=[];for(var p=0;p<s;p++)d.push([]);P.forEach(t.nodes,function(e){d[e.level].push(e)});t.treeLevels=d;t.cacheRelationships();return t},takeRandomNode:function(t,i){if(P.isUndefined(t))t=[];if(P.isUndefined(i))i=4;if(this.nodes.length===0)return null;if(this.nodes.length===1)return v(t,this.nodes[0])?null:this.nodes[0];var e=n.grep(this.nodes,function(e){return!v(t,e)&&e.degree()<=i});if(P.isEmpty(e))return null;return e[P.randomInteger(0,e.length)]},isEmpty:function(){return P.isEmpty(this.nodes)},isHealthy:function(){return P.all(this.links,function(e){return v(this.nodes,e.source)&&v(this.nodes,e.target)},this)},getParents:function(e){if(!this.hasNode(e))throw"The given node is not part of this graph.";return e.getParents()},getChildren:function(e){if(!this.hasNode(e))throw"The given node is not part of this graph.";return e.getChildren()},addLink:function(e,t,i){if(P.isUndefined(e))throw"The source of the link is not defined.";if(P.isUndefined(t))if(P.isDefined(e.type)&&e.type==="Link"){this.addExistingLink(e);return}else throw"The target of the link is not defined.";var n=this.getNode(e);if(P.isUndefined(n))n=this.addNode(e);var r=this.getNode(t);if(P.isUndefined(r))r=this.addNode(t);var a=new I(n,r);if(P.isDefined(i))a.owner=i;this.links.push(a);return a},removeAllLinks:function(){while(this.links.length>0){var e=this.links[0];this.removeLink(e)}},addExistingLink:function(e){if(this.hasLink(e))return;this.links.push(e);if(this.hasNode(e.source.id)){var t=this.getNode(e.source.id);e.changeSource(t)}else this.addNode(e.source);if(this.hasNode(e.target.id)){var i=this.getNode(e.target.id);e.changeTarget(i)}else this.addNode(e.target)},hasLink:function(t){if(P.isString(t))return P.any(this.links,function(e){return e.id===t});if(t.type==="Link")return v(this.links,t);throw"The given object is neither an identifier nor a Link."},getNode:function(e){var t=e.id||e;if(this._nodeMap.containsKey(t))return this._nodeMap.get(t)},hasNode:function(e){var t=e.id||e;return this._nodeMap.containsKey(t)},_addNode:function(e){this.nodes.push(e);this._nodeMap.add(e.id,e)},_removeNode:function(e){P.remove(this.nodes,e);this._nodeMap.remove(e.id)},removeNode:function(e){var t=e;if(P.isString(e))t=this.getNode(e);if(P.isDefined(t)){var i=t.links;t.links=[];for(var n=0,r=i.length;n<r;n++){var a=i[n];this.removeLink(a)}this._removeNode(t)}else throw"The identifier should be a Node or the Id (string) of a node."},areConnected:function(t,i){return P.any(this.links,function(e){return e.source==t&&e.target==i||e.source==i&&e.target==t})},removeLink:function(e){P.remove(this.links,e);P.remove(e.source.outgoing,e);P.remove(e.source.links,e);P.remove(e.target.incoming,e);P.remove(e.target.links,e)},addNode:function(e,t,i){var n=null;if(!P.isDefined(e))throw"No Node or identifier for a new Node is given.";if(P.isString(e)){if(this.hasNode(e))return this.getNode(e);n=new g(e)}else{if(this.hasNode(e))return this.getNode(e);n=e}if(P.isDefined(t))n.bounds(t);if(P.isDefined(i))n.owner=i;this._addNode(n);return n},addNodeAndOutgoings:function(e){if(!this.hasNode(e))this._addNode(e);var t=e.outgoing;e.outgoing=[];P.forEach(t,function(e){this.addExistingLink(e)},this)},setItemIndices:function(){var e;for(e=0;e<this.nodes.length;++e)this.nodes[e].index=e;for(e=0;e<this.links.length;++e)this.links[e].index=e},clone:function(e){var i=new m;var n=P.isDefined(e)&&e===true;if(n){i.nodeMap=new B;i.linkMap=new B}var r=new B;P.forEach(this.nodes,function(e){var t=e.clone();r.set(e,t);i._addNode(t);if(n)i.nodeMap.set(t,e)});P.forEach(this.links,function(e){if(r.containsKey(e.source)&&r.containsKey(e.target)){var t=i.addLink(r.get(e.source),r.get(e.target));if(n)i.linkMap.set(t,e)}});return i},linearize:function(e){return m.Utils.linearize(this,e)},depthFirstTraversal:function(e,t){if(P.isUndefined(e))throw"You need to supply a starting node.";if(P.isUndefined(t))throw"You need to supply an action.";if(!this.hasNode(e))throw"The given start-node is not part of this graph";var i=this.getNode(e);var n=[];this._dftIterator(i,t,n)},_dftIterator:function(e,t,i){t(e);i.push(e);var n=e.getChildren();for(var r=0,a=n.length;r<a;r++){var o=n[r];if(v(i,o))continue;this._dftIterator(o,t,i)}},breadthFirstTraversal:function(e,t){if(P.isUndefined(e))throw"You need to supply a starting node.";if(P.isUndefined(t))throw"You need to supply an action.";if(!this.hasNode(e))throw"The given start-node is not part of this graph";var i=this.getNode(e);var n=new D;var r=[];n.enqueue(i);while(n.length>0){var a=n.dequeue();t(a);r.push(a);var o=a.getChildren();for(var s=0,l=o.length;s<l;s++){var u=o[s];if(v(r,u)||v(n,u))continue;n.enqueue(u)}}},_stronglyConnectedComponents:function(e,t,i,n,r,a,o){i.add(t,o);n.add(t,o);o++;a.push(t);var c=t.getChildren(),s;for(var l=0,h=c.length;l<h;l++){s=c[l];if(!i.containsKey(s)){this._stronglyConnectedComponents(e,s,i,n,r,a,o);n.add(t,Math.min(n.get(t),n.get(s)))}else if(v(a,s))n.add(t,Math.min(n.get(t),i.get(s)))}if(n.get(t)===i.get(t)){var u=[];do{s=a.pop();u.push(s)}while(s!==t);if(!e||u.length>1)r.push(u)}},findCycles:function(e){if(P.isUndefined(e))e=true;var t=new B;var i=new B;var n=[];var r=[];for(var a=0,o=this.nodes.length;a<o;a++){var s=this.nodes[a];if(t.containsKey(s))continue;this._stronglyConnectedComponents(e,s,t,i,n,r,0)}return n},isAcyclic:function(){return P.isEmpty(this.findCycles())},isSubGraph:function(e){var t=e.linearize();var i=this.linearize();return P.all(t,function(e){return v(i,e)})},makeAcyclic:function(){if(this.isEmpty()||this.nodes.length<=1||this.links.length<=1)return[];if(this.nodes.length==2){var c=[];if(this.links.length>1){var h=this.links[0];var f=h.source;for(var d=0,p=this.links.length;d<p;d++){var v=this.links[d];if(v.source==f)continue;var g=v.reverse();c.push(g)}}return c}var e=this.clone(true);var n=this.nodes.length;var t=new B;var r=function(e){if(e.outgoing.length===0)return 2-n;else if(e.incoming.length===0)return n-2;else return e.outgoing.length-e.incoming.length};var m=function(e,t){var i=r(e,n);if(!t.containsKey(i))t.set(i,[]);t.get(i).push(e)};P.forEach(e.nodes,function(e){m(e,t)});var i=[];var _=[];while(e.nodes.length>0){var a,o,s;if(t.containsKey(2-n)){var y=t.get(2-n);while(y.length>0){o=y.pop();for(var b=0;b<o.links.length;b++){var w=o.links[b];a=w.getComplement(o);s=r(a,n);P.remove(t.get(s),a);a.removeLink(w);m(a,t)}e._removeNode(o);_.unshift(o)}}if(t.containsKey(n-2)){var x=t.get(n-2);while(x.length>0){a=x.pop();for(var k=0;k<a.links.length;k++){var C=a.links[k];o=C.getComplement(a);s=r(o,n);P.remove(t.get(s),o);o.removeLink(C);m(o,t)}i.push(a);e._removeNode(a)}}if(e.nodes.length>0)for(var l=n-3;l>2-n;l--)if(t.containsKey(l)&&t.get(l).length>0){var S=t.get(l);var u=S.pop();for(var T=0;T<u.links.length;T++){var A=u.links[T];var M=A.getComplement(u);s=r(M,n);P.remove(t.get(s),M);M.removeLink(A);m(M,t)}i.push(u);e._removeNode(u);break}}i=i.concat(_);var D=new B;for(var E=0;E<this.nodes.length;E++)D.set(e.nodeMap.get(i[E]),E);var I=[];P.forEach(this.links,function(e){if(D.get(e.source)>D.get(e.target)){e.reverse();I.push(e)}});return I}});m.Predefined={EightGraph:function(){return m.Utils.parse(["1->2","2->3","3->4","4->1","3->5","5->6","6->7","7->3"])},Mindmap:function(){return m.Utils.parse(["0->1","0->2","0->3","0->4","0->5","1->6","1->7","7->8","2->9","9->10","9->11","3->12","12->13","13->14","4->15","4->16","15->17","15->18","18->19","18->20","14->21","14->22","5->23","23->24","23->25","6->26"])},ThreeGraph:function(){return m.Utils.parse(["1->2","2->3","3->1"])},BinaryTree:function(e){if(P.isUndefined(e))e=5;return m.Utils.createBalancedTree(e,2)},Linear:function(e){if(P.isUndefined(e))e=10;return m.Utils.createBalancedTree(e,1)},Tree:function(e,t){return m.Utils.createBalancedTree(e,t)},Forest:function(e,t,i){return m.Utils.createBalancedForest(e,t,i)},Workflow:function(){return m.Utils.parse(["0->1","1->2","2->3","1->4","4->3","3->5","5->6","6->3","6->7","5->4"])},Grid:function(e,t){var i=new p.Graph;if(e<=0&&t<=0)return i;for(var n=0;n<e+1;n++){var r=null;for(var a=0;a<t+1;a++){var o=new g(n.toString()+"."+a.toString());i.addNode(o);if(r)i.addLink(r,o);if(n>0){var s=i.getNode((n-1).toString()+"."+a.toString());i.addLink(s,o)}r=o}}return i}},m.Utils={parse:function(e){var t,i=new p.Graph,n=e.slice();for(var r=0,a=n.length;r<a;r++){var o=n[r];if(P.isString(o)){if(o.indexOf("->")<0)throw"The link should be specified as 'a->b'.";var s=o.split("->");if(s.length!=2)throw"The link should be specified as 'a->b'.";t=new I(s[0],s[1]);i.addLink(t)}if(P.isObject(o)){if(!t)throw"Specification found before Link definition.";b.deepExtend(t,o)}}return i},linearize:function(e,t){if(P.isUndefined(e))throw"Expected an instance of a Graph object in slot one.";if(P.isUndefined(t))t=false;var i=[];for(var n=0,r=e.links.length;n<r;n++){var a=e.links[n];i.push(a.source.id+"->"+a.target.id);if(t)i.push({id:a.id})}return i},_addShape:function(e,t,i,n){if(P.isUndefined(t))t=new p.Point(0,0);if(P.isUndefined(i))i=T();n=b.deepExtend({width:20,height:20,id:i,radius:10,fill:"#778899",data:"circle",undoable:false,x:t.x,y:t.y},n);return e.addShape(n)},_addConnection:function(e,t,i,n){return e.connect(t,i,n)},createDiagramFromGraph:function(e,t,i,n){if(P.isUndefined(e))throw"The diagram surface is undefined.";if(P.isUndefined(t))throw"No graph specification defined.";if(P.isUndefined(i))i=true;if(P.isUndefined(n))n=false;var c=e.element.clientWidth||200;var h=e.element.clientHeight||200;var r=[],a,o;for(var s=0,f=t.nodes.length;s<f;s++){a=t.nodes[s];var l=a.position;if(P.isUndefined(l))if(P.isDefined(a.x)&&P.isDefined(a.y))l=new w(a.x,a.y);else l=new w(P.randomInteger(10,c-20),P.randomInteger(10,h-20));var d={};if(a.id==="0");else if(n)b.deepExtend(d,{width:Math.random()*150+20,height:Math.random()*80+50,data:"rectangle",fill:{color:"#778899"}});o=this._addShape(e,l,a.id,d);var u=o.bounds();if(P.isDefined(u)){a.x=u.x;a.y=u.y;a.width=u.width;a.height=u.height}r[a.id]=o}for(var p=0;p<t.links.length;p++){var v=t.links[p];var g=r[v.source.id];if(P.isUndefined(g))continue;var m=r[v.target.id];if(P.isUndefined(m))continue;this._addConnection(e,g,m,{id:v.id})}if(i){var _=new e.SpringLayout(e);_.layoutGraph(t,{limitToView:false});for(var y=0;y<t.nodes.length;y++){a=t.nodes[y];o=r[a.id];o.bounds(new x(a.x,a.y,a.width,a.height))}}},createBalancedTree:function(e,t){if(P.isUndefined(e))e=3;if(P.isUndefined(t))t=3;var i=new p.Graph,n=-1,r=[],a;if(e<=0||t<=0)return i;var o=new g((++n).toString());i.addNode(o);i.root=o;r.push(o);for(var s=0;s<e;s++){a=[];for(var l=0;l<r.length;l++){var c=r[l];for(var u=0;u<t;u++){var h=new g((++n).toString());i.addLink(c,h);a.push(h)}}r=a}return i},createBalancedForest:function(e,t,i){if(P.isUndefined(e))e=3;if(P.isUndefined(t))t=3;if(P.isUndefined(i))i=5;var n=new p.Graph,r=-1,a=[],o;if(e<=0||t<=0||i<=0)return n;for(var s=0;s<i;s++){var l=new g((++r).toString());n.addNode(l);a=[l];for(var c=0;c<e;c++){o=[];for(var u=0;u<a.length;u++){var h=a[u];for(var f=0;f<t;f++){var d=new g((++r).toString());n.addLink(h,d);o.push(d)}}a=o}}return n},createRandomConnectedGraph:function(e,t,i){if(P.isUndefined(e))e=40;if(P.isUndefined(t))t=4;if(P.isUndefined(i))i=false;var n=new p.Graph,r=-1;if(e<=0)return n;var c=new g((++r).toString());n.addNode(c);if(e===1)return n;if(e>1){for(var a=1;a<e;a++){var o=n.takeRandomNode([],t);if(!o)break;var h=n.addNode(a.toString());n.addLink(o,h)}if(!i&&e>1){var f=P.randomInteger(1,e);for(var s=0;s<f;s++){var l=n.takeRandomNode([],t);var u=n.takeRandomNode([],t);if(l&&u&&!n.areConnected(l,u))n.addLink(l,u)}}return n}},randomDiagram:function(e,t,i,n,r){var a=b.dataviz.diagram.Graph.Utils.createRandomConnectedGraph(t,i,n);m.Utils.createDiagramFromGraph(e,a,false,r)}},b.deepExtend(p,{init:function(e){b.init(e,p.ui)},Point:w,Intersect:_,Geometry:A,Rect:x,Size:h,RectAlign:y,Matrix:r,MatrixVector:C,normalVariable:S,randomId:T,Dictionary:B,HashTable:M,Queue:D,Set:E,Node:g,Link:I,Graph:m,PathDefiner:c})})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/diagram/svg.min",["kendo.drawing.min","./math.min"],function(){var h=window.kendo.jQuery,f=void 0,i=window.kendo,t=i.dataviz.diagram,e=i.Class,l=i.deepExtend,d=t.Point,p=t.Rect,v=t.Matrix,g=t.Utils,m=g.isNumber,_=g.isString,y=t.MatrixVector,s=i.geometry,a=i.drawing,o=a.util.defined,b=h.inArray,w="transparent",x={none:"none",arrowStart:"ArrowStart",filledCircle:"FilledCircle",arrowEnd:"ArrowEnd"},k=360,u="start",C="end",S="width",T="height",A="x",M="y";function D(e,t){var i=this.options;var n=false;var r,a;for(var o=0;o<t.length;o++){a=t[o];r=e[a];if(m(r)&&i[a]!==r){i[a]=r;n=true}}return n}t.Markers=x;var E=e.extend({init:function(e,t){this.x=e;this.y=t},toMatrix:function(){return v.scaling(this.x,this.y)},toString:function(){return i.format("scale({0},{1})",this.x,this.y)},invert:function(){return new E(1/this.x,1/this.y)}}),I=e.extend({init:function(e,t){this.x=e;this.y=t},toMatrixVector:function(){return new y(0,0,0,0,this.x,this.y)},toMatrix:function(){return v.translation(this.x,this.y)},toString:function(){return i.format("translate({0},{1})",this.x,this.y)},plus:function(e){this.x+=e.x;this.y+=e.y},times:function(e){this.x*=e;this.y*=e},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){if(this.Length===0)return;this.times(1/this.length())},invert:function(){return new I(-this.x,-this.y)}}),c=e.extend({init:function(e,t,i){this.x=t||0;this.y=i||0;this.angle=e},toString:function(){if(this.x&&this.y)return i.format("rotate({0},{1},{2})",this.angle,this.x,this.y);else return i.format("rotate({0})",this.angle)},toMatrix:function(){return v.rotation(this.angle,this.x,this.y)},center:function(){return new d(this.x,this.y)},invert:function(){return new c(k-this.angle,this.x,this.y)}}),P=(c.ZERO=new c(0),c.create=function(e){return new c(e.angle,e.x,e.y)},c.parse=function(e){var t=e.slice(1,e.length-1).split(","),i=t[0],n=t[1],r=t[2];var a=new c(i,n,r);return a},e.extend({init:function(e,t,i,n,r,a){this.translate=new I(e,t);if(i!==f&&n!==f)this.scale=new E(i,n);if(r!==f)this.rotate=a?new c(r,a.x,a.y):new c(r)},toString:function(){var e=function(e){return e?e.toString():""};return e(this.translate)+e(this.rotate)+e(this.scale)},render:function(e){e._transform=this;e._renderTransform()},toMatrix:function(){var e=v.unit();if(this.translate)e=e.times(this.translate.toMatrix());if(this.rotate)e=e.times(this.rotate.toMatrix());if(this.scale)e=e.times(this.scale.toMatrix());return e},invert:function(){var e=this.rotate?this.rotate.invert():f,t=e?e.toMatrix():v.unit(),i=this.scale?this.scale.invert():f,n=i?i.toMatrix():v.unit();var r=new d(-this.translate.x,-this.translate.y);r=t.times(n).apply(r);var a=new I(r.x,r.y);var o=new P;o.translate=a;o.rotate=e;o.scale=i;return o}})),B={_setScale:function(){var e=this.options;var t=this._originWidth;var i=this._originHeight;var n=e.width/t;var r=e.height/i;if(!m(n))n=1;if(!m(r))r=1;this._transform.scale=new E(n,r)},_setTranslate:function(){var e=this.options;var t=e.x||0;var i=e.y||0;this._transform.translate=new I(t,i)},_initSize:function(){var e=this.options;var t=false;if(e.autoSize!==false&&(o(e.width)||o(e.height))){this._measure(true);this._setScale();t=true}if(o(e.x)||o(e.y)){this._setTranslate();t=true}if(t)this._renderTransform()},_updateSize:function(e){var t=false;if(this.options.autoSize!==false&&this._diffNumericOptions(e,[S,T])){t=true;this._measure(true);this._setScale()}if(this._diffNumericOptions(e,[A,M])){t=true;this._setTranslate()}if(t)this._renderTransform();return t}},n=e.extend({init:function(e){var t=this;t.options=l({},t.options,e);t.id=t.options.id;t._originSize=p.empty();t._transform=new P},visible:function(e){return this.drawingContainer().visible(e)},redraw:function(e){if(e&&e.id)this.id=e.id},position:function(e,t){var i=this.options;if(!o(e))return new d(i.x,i.y);if(o(t)){i.x=e;i.y=t}else if(e instanceof d){i.x=e.x;i.y=e.y}this._transform.translate=new I(i.x,i.y);this._renderTransform()},rotate:function(e,t){if(o(e)){this._transform.rotate=new c(e,t.x,t.y);this._renderTransform()}return this._transform.rotate||c.ZERO},drawingContainer:function(){return this.drawingElement},_renderTransform:function(){var e=this._transform.toMatrix();this.drawingContainer().transform(new s.Matrix(e.a,e.b,e.c,e.d,e.e,e.f))},_hover:function(){},_diffNumericOptions:D,_measure:function(e){var t;if(!this._measured||e){var i=this._boundingBox()||new s.Rect;var n=i.topLeft();t=new p(n.x,n.y,i.width(),i.height());this._originSize=t;this._originWidth=t.width;this._originHeight=t.height;this._measured=true}else t=this._originSize;return t},_boundingBox:function(){return this.drawingElement.rawBBox()}}),r=n.extend({init:function(e){n.fn.init.call(this,e);e=this.options;e.fill=X(e.fill);e.stroke=X(e.stroke)},options:{stroke:{color:"gray",width:1},fill:{color:w}},fill:function(e,t){this._fill({color:K(e),opacity:t})},stroke:function(e,t,i){this._stroke({color:K(e),width:t,opacity:i})},redraw:function(e){if(e){var t=e.stroke;var i=e.fill;if(t)this._stroke(X(t));if(i)this._fill(X(i));n.fn.redraw.call(this,e)}},_hover:function(e){var t=this.drawingElement;var i=this.options;var n=i.hover;if(n&&n.fill){var r=e?X(n.fill):i.fill;t.fill(r.color,r.opacity)}},_stroke:function(e){var t=this.options;l(t,{stroke:e});e=t.stroke;var i=null;if(e.width>0)i={color:e.color,width:e.width,opacity:e.opacity,dashType:e.dashType};this.drawingElement.options.set("stroke",i)},_fill:function(e){var t=this.options;l(t,{fill:e||{}});var i=t.fill;if(i.gradient){var n=i.gradient;var r=n.type==="radial"?a.RadialGradient:a.LinearGradient;this.drawingElement.fill(new r(n))}else this.drawingElement.fill(i.color,i.opacity)}}),O=r.extend({init:function(e){e=this._textColor(e);r.fn.init.call(this,e);this._font();this._initText();this._initSize()},options:{fontSize:15,fontFamily:"sans-serif",stroke:{width:0},fill:{color:"black"},autoSize:true},_initText:function(){var e=this.options;this.drawingElement=new a.Text(o(e.text)?e.text:"",new s.Point,{font:e.font});this._fill();this._stroke()},_textColor:function(e){if(e&&e.color)e=l({},e,{fill:{color:e.color}});return e},_font:function(){var e=this.options;if(e.fontFamily&&o(e.fontSize)){var t=[];if(e.fontStyle)t.push(e.fontStyle);if(e.fontWeight)t.push(e.fontWeight);t.push(e.fontSize+(m(e.fontSize)?"px":""));t.push(e.fontFamily);e.font=t.join(" ")}else delete e.font},content:function(e){return this.drawingElement.content(e)},redraw:function(e){if(e){var t=false;var i=this.options;e=this._textColor(e);r.fn.redraw.call(this,e);if(e.fontFamily||o(e.fontSize)||e.fontStyle||e.fontWeight){l(i,{fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight});this._font();this.drawingElement.options.set("font",i.font);t=true}if(e.text){this.content(e.text);t=true}if(!this._updateSize(e)&&t)this._initSize()}}}),z=(l(O.fn,B),r.extend({init:function(e){r.fn.init.call(this,e);this._initPath();this._setPosition()},_setPosition:function(){var e=this.options;var t=e.x;var i=e.y;if(o(t)||o(i))this.position(t||0,i||0)},redraw:function(e){if(e){r.fn.redraw.call(this,e);if(this._diffNumericOptions(e,[S,T]))this._drawPath();if(this._diffNumericOptions(e,[A,M]))this._setPosition()}},_initPath:function(){var e=this.options;this.drawingElement=new a.Path({stroke:e.stroke,closed:true});this._fill();this._drawPath()},_drawPath:function(){var e=this.drawingElement;var t=$(this.options);var i=t.width;var n=t.height;e.segments.elements([Z(0,0),Z(i,0),Z(i,n),Z(0,n)])}})),L=r.extend({init:function(e){r.fn.init.call(this,e);var t=this.options.anchor;this.anchor=new s.Point(t.x,t.y);this.createElement()},options:{stroke:{color:w,width:0},fill:{color:"black"}},_transformToPath:function(e,t){var i=t.transform();if(e&&i)e=e.transformCopy(i);return e},redraw:function(e){if(e){if(e.position)this.options.position=e.position;r.fn.redraw.call(this,e)}}}),R=L.extend({options:{radius:4,anchor:{x:0,y:0}},createElement:function(){var e=this.options;this.drawingElement=new a.Circle(new s.Circle(this.anchor,e.radius),{fill:e.fill,stroke:e.stroke})},positionMarker:function(e){var t=this.options;var i=t.position;var n=e.segments;var r;var a;if(i==u)r=n[0];else r=n[n.length-1];if(r){a=this._transformToPath(r.anchor(),e);this.drawingElement.transform(s.transform().translate(a.x,a.y))}}}),F=L.extend({options:{path:"M 0 0 L 10 5 L 0 10 L 3 5 z",anchor:{x:10,y:5}},createElement:function(){var e=this.options;this.drawingElement=a.Path.parse(e.path,{fill:e.fill,stroke:e.stroke})},positionMarker:function(e){var t=this._linePoints(e);var i=t.start;var n=t.end;var r=s.transform();if(i)r.rotate(Q(i,n),n);if(n){var a=this.anchor;var o=n.clone().translate(-a.x,-a.y);r.translate(o.x,o.y)}this.drawingElement.transform(r)},_linePoints:function(e){var t=this.options;var i=e.segments;var n,r,a;if(t.position==u){a=i[0];if(a){r=a.anchor();n=a.controlOut();var o=i[1];if(!n&&o)n=o.anchor()}}else{a=i[i.length-1];if(a){r=a.anchor();n=a.controlIn();var s=i[i.length-2];if(!n&&s)n=s.anchor()}}if(r)return{start:this._transformToPath(n,e),end:this._transformToPath(r,e)}}}),V={_getPath:function(e){var t=this.drawingElement;if(t instanceof a.MultiPath)if(e==u)t=t.paths[0];else t=t.paths[t.paths.length-1];if(t&&t.segments.length)return t},_normalizeMarkerOptions:function(e){var t=e.startCap;var i=e.endCap;if(_(t))e.startCap={type:t};if(_(i))e.endCap={type:i}},_removeMarker:function(e){var t=this._markers[e];if(t){this.drawingContainer().remove(t.drawingElement);delete this._markers[e]}},_createMarkers:function(){var e=this.options;this._normalizeMarkerOptions(e);this._markers={};this._markers[u]=this._createMarker(e.startCap,u);this._markers[C]=this._createMarker(e.endCap,C)},_createMarker:function(e,t){var i=(e||{}).type;var n=this._getPath(t);var r,a;if(!n){this._removeMarker(t);return}if(i==x.filledCircle)r=R;else if(i==x.arrowStart||i==x.arrowEnd)r=F;else this._removeMarker(t);if(r){a=new r(l({},e,{position:t}));a.positionMarker(n);this.drawingContainer().append(a.drawingElement);return a}},_positionMarker:function(e){var t=this._markers[e];if(t){var i=this._getPath(e);if(i)t.positionMarker(i);else this._removeMarker(e)}},_capMap:{start:"startCap",end:"endCap"},_redrawMarker:function(e,t,i){this._normalizeMarkerOptions(i);var n=this.options;var r=this._capMap[t];var a=(n[r]||{}).type;var o=i[r];var s=false;if(o){n[r]=l({},n[r],o);if(o.type&&a!=o.type){this._removeMarker(t);this._markers[t]=this._createMarker(n[r],t);s=true}else if(this._markers[t])this._markers[t].redraw(o)}else if(e&&!this._markers[t]&&n[r]){this._markers[t]=this._createMarker(n[r],t);s=true}return s},_redrawMarkers:function(e,t){if(!this._redrawMarker(e,u,t)&&e)this._positionMarker(u);if(!this._redrawMarker(e,C,t)&&e)this._positionMarker(C)}},N=r.extend({init:function(e){r.fn.init.call(this,e);this.container=new a.Group;this._createElements();this._initSize()},options:{autoSize:true},drawingContainer:function(){return this.container},data:function(e){var t=this.options;if(e){if(t.data!=e){t.data=e;this._setData(e);this._initSize();this._redrawMarkers(true,{})}}else return t.data},redraw:function(e){if(e){r.fn.redraw.call(this,e);var t=this.options;var i=e.data;if(o(i)&&t.data!=i){t.data=i;this._setData(i);if(!this._updateSize(e))this._initSize();this._redrawMarkers(true,e)}else{this._updateSize(e);this._redrawMarkers(false,e)}}},_createElements:function(){var e=this.options;this.drawingElement=a.Path.parse(e.data||"",{stroke:e.stroke});this._fill();this.container.append(this.drawingElement);this._createMarkers()},_setData:function(e){var t=this.drawingElement;var i=a.Path.parse(e||"");var n=i.paths.slice(0);i.paths.elements([]);t.paths.elements(n)}}),H=(l(N.fn,B),l(N.fn,V),r.extend({init:function(e){r.fn.init.call(this,e);this.container=new a.Group;this._initPath();this._createMarkers()},drawingContainer:function(){return this.container},redraw:function(e){if(e){e=e||{};var t=e.from;var i=e.to;if(t)this.options.from=t;if(i)this.options.to=i;if(t||i){this._drawPath();this._redrawMarkers(true,e)}else this._redrawMarkers(false,e);r.fn.redraw.call(this,e)}},_initPath:function(){var e=this.options;var t=this.drawingElement=new a.Path({stroke:e.stroke});this._fill();this._drawPath();this.container.append(t)},_drawPath:function(){var e=this.options;var t=this.drawingElement;var i=e.from||new d;var n=e.to||new d;t.segments.elements([Z(i.x,i.y),Z(n.x,n.y)])}})),U=(l(H.fn,V),r.extend({init:function(e){r.fn.init.call(this,e);this.container=new a.Group;this._initPath();this._createMarkers()},drawingContainer:function(){return this.container},points:function(e){var t=this.options;if(e){t.points=e;this._updatePath()}else return t.points},redraw:function(e){if(e){var t=e.points;r.fn.redraw.call(this,e);if(t&&this._pointsDiffer(t)){this.points(t);this._redrawMarkers(true,e)}else this._redrawMarkers(false,e)}},_initPath:function(){var e=this.options;this.drawingElement=new a.Path({stroke:e.stroke});this._fill();this.container.append(this.drawingElement);if(e.points)this._updatePath()},_pointsDiffer:function(e){var t=this.options.points;var i=t.length!==e.length;if(!i)for(var n=0;n<e.length;n++)if(t[n].x!==e[n].x||t[n].y!==e[n].y){i=true;break}return i},_updatePath:function(){var e=this.drawingElement;var t=this.options;var i=t.points;var n=[];var r;for(var a=0;a<i.length;a++){r=i[a];n.push(Z(r.x,r.y))}e.segments.elements(n)},options:{points:[]}})),j=(l(U.fn,V),n.extend({init:function(e){n.fn.init.call(this,e);this._initImage()},redraw:function(e){if(e){if(e.source)this.drawingElement.src(e.source);if(this._diffNumericOptions(e,[S,T,A,M]))this.drawingElement.rect(this._rect());n.fn.redraw.call(this,e)}},_initImage:function(){var e=this.options;var t=this._rect();this.drawingElement=new a.Image(e.source,t,{})},_rect:function(){var e=$(this.options);var t=new s.Point(e.x,e.y);var i=new s.Size(e.width,e.height);return new s.Rect(t,i)}})),G=n.extend({init:function(e){this.children=[];n.fn.init.call(this,e);this.drawingElement=new a.Group;this._initSize()},options:{autoSize:false},append:function(e){this.drawingElement.append(e.drawingContainer());this.children.push(e);this._childrenChange=true},remove:function(e){if(this._remove(e))this._childrenChange=true},_remove:function(e){var t=b(e,this.children);if(t>=0){this.drawingElement.removeAt(t);this.children.splice(t,1);return true}},clear:function(){this.drawingElement.clear();this.children=[];this._childrenChange=true},toFront:function(e){var t;for(var i=0;i<e.length;i++){t=e[i];if(this._remove(t))this.append(t)}},toBack:function(e){this._reorderChildren(e,0)},toIndex:function(e,t){this._reorderChildren(e,t)},_reorderChildren:function(e,t){var i=this.drawingElement;var n=i.children.slice(0);var r=this.children;var c=m(t);var a,o,s,l,u;for(a=0;a<e.length;a++){u=e[a];l=u.drawingContainer();o=b(u,r);if(o>=0){n.splice(o,1);r.splice(o,1);s=c?t:t[a];n.splice(s,0,l);r.splice(s,0,u)}}i.clear();i.append.apply(i,n)},redraw:function(e){if(e){if(this._childrenChange){this._childrenChange=false;if(!this._updateSize(e))this._initSize()}else this._updateSize(e);n.fn.redraw.call(this,e)}},_boundingBox:function(){var e=this.children;var t;var i,n;for(var r=0;r<e.length;r++){i=e[r];if(i.visible()&&i._includeInBBox!==false){n=i.drawingContainer().clippedBBox(null);if(n)if(t)t=s.Rect.union(t,n);else t=n}}return t}}),W=(l(G.fn,B),G.extend({init:function(e,t){this.children=[];n.fn.init.call(this,t);this.drawingElement=new a.Layout(J(e),t);this._initSize()},rect:function(e){if(e)this.drawingElement.rect(J(e));else{var t=this.drawingElement.rect();if(t)return new p(t.origin.x,t.origin.y,t.size.width,t.size.height)}},reflow:function(){this.drawingElement.reflow()},redraw:function(e){i.deepExtend(this.drawingElement.options,e);G.fn.redraw.call(this,e)}})),q=r.extend({init:function(e){r.fn.init.call(this,e);this._initCircle();this._initSize()},redraw:function(e){if(e){var t=this.options;if(e.center){l(t,{center:e.center});this._center.move(t.center.x,t.center.y)}if(this._diffNumericOptions(e,["radius"]))this._circle.setRadius(t.radius);this._updateSize(e);r.fn.redraw.call(this,e)}},_initCircle:function(){var e=this.options;var t=e.width;var i=e.height;var n=e.radius;if(!o(n)){if(!o(t))t=i;if(!o(i))i=t;e.radius=n=Math.min(t,i)/2}var r=e.center||{x:n,y:n};this._center=new s.Point(r.x,r.y);this._circle=new s.Circle(this._center,n);this.drawingElement=new a.Circle(this._circle,{stroke:e.stroke});this._fill()}}),Y=(l(q.fn,B),e.extend({init:function(e,t){t=t||{};this.element=e;this.surface=a.Surface.create(e,t);if(i.isFunction(this.surface.translate))this.translate=this._translate;this.drawingElement=new a.Group;this._viewBox=new p(0,0,t.width,t.height);this.size(this._viewBox)},bounds:function(){var e=this.drawingElement.clippedBBox();return new p(0,0,e.width(),e.height())},size:function(e){var t=this._viewBox;if(o(e)){t.width=e.width;t.height=e.height;this.surface.setSize(e)}return{width:t.width,height:t.height}},_translate:function(e,t){var i=this._viewBox;if(o(e)&&o(t)){i.x=e;i.y=t;this.surface.translate({x:e,y:t})}return{x:i.x,y:i.y}},draw:function(){this.surface.draw(this.drawingElement)},append:function(e){this.drawingElement.append(e.drawingContainer());return this},remove:function(e){this.drawingElement.remove(e.drawingContainer())},insertBefore:function(){},clear:function(){this.drawingElement.clear()},destroy:function(e){this.surface.destroy();if(e)h(this.element).remove()}}));function $(e){return{x:e.x||0,y:e.y||0,width:e.width||0,height:e.height||0}}function X(e){if(e){var t=e;if(_(t))t={color:t};if(t.color)t.color=K(t.color);return t}}function K(e){var t;if(e!=w)t=new a.Color(e).toHex();else t=e;return t}function Q(e,t){var i=t.x-e.x;var n=t.y-e.y;var r=a.util.deg(Math.atan2(n,i));return r}function Z(e,t){return new a.Segment(new s.Point(e,t))}function J(e){if(e)return new s.Rect([e.x,e.y],[e.width,e.height])}i.deepExtend(t,{init:function(e){i.init(e,t.ui)},diffNumericOptions:D,Element:n,Scale:E,Translation:I,Rotation:c,Circle:q,Group:G,Rectangle:z,Canvas:Y,Path:N,Layout:W,Line:H,MarkerBase:L,ArrowMarker:F,CircleMarker:R,Polyline:U,CompositeTransform:P,TextBlock:O,Image:j,VisualBase:r})})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/diagram/services.min",["kendo.drawing.min","./svg.min"],function(){var c=window.kendo.jQuery,o=void 0,l=window.kendo,t,u=l.dataviz.diagram,e=l.Class,h=u.Group,y=u.Rect,f=u.Rectangle,w=u.Utils,d=w.isUndefined,b=u.Point,p=u.Circle,i=u.Ticker,s=l.deepExtend,v=l.ui.Movable,g=l.drawing.util,a=g.defined,m=c.inArray,n={arrow:"default",grip:"pointer",cross:"pointer",add:"pointer",move:"move",select:"pointer",south:"s-resize",east:"e-resize",west:"w-resize",north:"n-resize",rowresize:"row-resize",colresize:"col-resize"},_=10,x="Auto",k="Top",C="Right",S="Left",T="Bottom",A=10,M=10,D="dragStart",E="drag",I="dragEnd",P="itemRotate",B="itemBoundsChange",O=5,z=5,L="mouseEnter",R="mouseLeave",F="zoomStart",V="zoomEnd",N=-2e4,H=2e4,U=.9,j=.93,G=5,W="transparent",q="pan",Y="rotated",$,X="target",K={"-1":"source",1:X},Q=(u.Cursors=n,l.Class.extend({init:function(e){this.layoutState=e;this.diagram=e.diagram},initState:function(){this.froms=[];this.tos=[];this.subjects=[];function e(e,t){var i=this.diagram.getShapeById(e);if(i){this.subjects.push(i);this.froms.push(i.bounds().topLeft());this.tos.push(t.topLeft())}}this.layoutState.nodeMap.forEach(e,this)},update:function(e){if(this.subjects.length<=0)return;for(var t=0;t<this.subjects.length;t++)this.subjects[t].position(new b(this.froms[t].x+(this.tos[t].x-this.froms[t].x)*e,this.froms[t].y+(this.tos[t].y-this.froms[t].y)*e))}})),Z=e.extend({init:function(e,t,i){if(d(i))this.animate=false;else this.animate=i;this._initialState=e;this._finalState=t;this.title="Diagram layout"},undo:function(){this.setState(this._initialState)},redo:function(){this.setState(this._finalState)},setState:function(e){var n=e.diagram;if(this.animate){e.linkMap.forEach(function(e,t){var i=n.getShapeById(e);i.visible(false);if(i)i.points(t)});var t=new i;t.addAdapter(new Q(e));t.onComplete(function(){e.linkMap.forEach(function(e){var t=n.getShapeById(e);t.visible(true)})});t.play()}else{e.nodeMap.forEach(function(e,t){var i=n.getShapeById(e);if(i)i.position(t.topLeft())});e.linkMap.forEach(function(e,t){var i=n.getShapeById(e);if(i)i.points(t)})}}}),J=e.extend({init:function(e){this.units=[];this.title="Composite unit";if(e!==o)this.units.push(e)},add:function(e){this.units.push(e)},undo:function(){for(var e=0;e<this.units.length;e++)this.units[e].undo()},redo:function(){for(var e=0;e<this.units.length;e++)this.units[e].redo()}}),ee=e.extend({init:function(e,t,i){this.item=e;this._redoSource=t;this._redoTarget=i;if(a(t))this._undoSource=e.source();if(a(i))this._undoTarget=e.target();this.title="Connection Editing"},undo:function(){if(this._undoSource!==o)this.item._updateConnector(this._undoSource,"source");if(this._undoTarget!==o)this.item._updateConnector(this._undoTarget,"target");this.item.updateModel()},redo:function(){if(this._redoSource!==o)this.item._updateConnector(this._redoSource,"source");if(this._redoTarget!==o)this.item._updateConnector(this._redoTarget,"target");this.item.updateModel()}}),te=e.extend({init:function(e,t,i){this.item=e;this._undoSource=t;this._undoTarget=i;this._redoSource=e.source();this._redoTarget=e.target();this.title="Connection Editing"},undo:function(){this.item._updateConnector(this._undoSource,"source");this.item._updateConnector(this._undoTarget,"target");this.item.updateModel()},redo:function(){this.item._updateConnector(this._redoSource,"source");this.item._updateConnector(this._redoTarget,"target");this.item.updateModel()}}),ie=e.extend({init:function(e){this.connection=e;this.diagram=e.diagram;this.targetConnector=e.targetConnector;this.title="Delete connection"},undo:function(){this.diagram._addConnection(this.connection,false)},redo:function(){this.diagram.remove(this.connection,false)}}),ne=e.extend({init:function(e){this.shape=e;this.diagram=e.diagram;this.title="Deletion"},undo:function(){this.diagram._addShape(this.shape,false);this.shape.select(false)},redo:function(){this.shape.select(false);this.diagram.remove(this.shape,false)}}),re=e.extend({init:function(e,t,i){this.shapes=e;this.undoStates=t;this.title="Transformation";this.redoStates=[];this.adorner=i;for(var n=0;n<this.shapes.length;n++){var r=this.shapes[n];this.redoStates.push(r.bounds())}},undo:function(){for(var e=0;e<this.shapes.length;e++){var t=this.shapes[e];t.bounds(this.undoStates[e]);if(t.hasOwnProperty("layout"))t.layout(t,this.redoStates[e],this.undoStates[e]);t.updateModel()}if(this.adorner){this.adorner.refreshBounds();this.adorner.refresh()}},redo:function(){for(var e=0;e<this.shapes.length;e++){var t=this.shapes[e];t.bounds(this.redoStates[e]);if(t.hasOwnProperty("layout"))t.layout(t,this.undoStates[e],this.redoStates[e]);t.updateModel()}if(this.adorner){this.adorner.refreshBounds();this.adorner.refresh()}}}),ae=e.extend({init:function(e,t){this.connection=e;this.diagram=t;this.title="New connection"},undo:function(){this.diagram.remove(this.connection,false)},redo:function(){this.diagram._addConnection(this.connection,false)}}),oe=e.extend({init:function(e,t){this.shape=e;this.diagram=t;this.title="New shape"},undo:function(){this.diagram.deselect();this.diagram.remove(this.shape,false)},redo:function(){this.diagram._addShape(this.shape,false)}}),se=e.extend({init:function(e,t,i){this.initial=e;this.finalPos=t;this.diagram=i;this.title="Pan Unit"},undo:function(){this.diagram.pan(this.initial)},redo:function(){this.diagram.pan(this.finalPos)}}),le=e.extend({init:function(e,t,i){this.shapes=t;this.undoRotates=i;this.title="Rotation";this.redoRotates=[];this.redoAngle=e._angle;this.adorner=e;this.center=e._innerBounds.center();for(var n=0;n<this.shapes.length;n++){var r=this.shapes[n];this.redoRotates.push(r.rotate().angle)}},undo:function(){var e,t;for(e=0;e<this.shapes.length;e++){t=this.shapes[e];t.rotate(this.undoRotates[e],this.center,false);if(t.hasOwnProperty("layout"))t.layout(t);t.updateModel()}if(this.adorner){this.adorner._initialize();this.adorner.refresh()}},redo:function(){var e,t;for(e=0;e<this.shapes.length;e++){t=this.shapes[e];t.rotate(this.redoRotates[e],this.center,false);if(t.hasOwnProperty("layout"))t.layout(t);t.updateModel()}if(this.adorner){this.adorner._initialize();this.adorner.refresh()}}}),ue=e.extend({init:function(e,t,i){this.diagram=e;this.indices=i;this.items=t;this.title="Rotate Unit"},undo:function(){this.diagram._toIndex(this.items,this.indices)},redo:function(){this.diagram.toFront(this.items,false)}}),ce=e.extend({init:function(e,t,i){this.diagram=e;this.indices=i;this.items=t;this.title="Rotate Unit"},undo:function(){this.diagram._toIndex(this.items,this.indices)},redo:function(){this.diagram.toBack(this.items,false)}}),he=l.Observable.extend({init:function(e){l.Observable.fn.init.call(this,e);this.bind(this.events,e);this.stack=[];this.index=0;this.capacity=100},events:["undone","redone"],begin:function(){this.composite=new J},cancel:function(){this.composite=o},commit:function(e){if(this.composite.units.length>0)this._restart(this.composite,e);this.composite=o},addCompositeItem:function(e){if(this.composite)this.composite.add(e);else this.add(e)},add:function(e,t){this._restart(e,t)},pop:function(){if(this.index>0){this.stack.pop();this.index--}},count:function(){return this.stack.length},undo:function(){if(this.index>0){this.index--;this.stack[this.index].undo();this.trigger("undone")}},redo:function(){if(this.stack.length>0&&this.index<this.stack.length){this.stack[this.index].redo();this.index++;this.trigger("redone")}},_restart:function(e,t){this.stack.splice(this.index,this.stack.length-this.index);this.stack.push(e);if(t!==false)this.redo();else this.index++;if(this.stack.length>this.capacity){this.stack.splice(0,this.stack.length-this.capacity);this.index=this.capacity}},clear:function(){this.stack=[];this.index=0}}),fe=e.extend({init:function(e){this.toolService=e},start:function(){},move:function(){},end:function(){},tryActivate:function(){return false},getCursor:function(){return n.arrow}}),de=fe.extend({init:function(e){var t=this;var i=l.support.mobileOS?j:U;fe.fn.init.call(t,e);var n=t.toolService.diagram,r=n.canvas;var a=n.scroller=t.scroller=c(n.scrollable).kendoMobileScroller({friction:i,velocityMultiplier:G,mousewheelScrolling:false,zoom:false,scroll:t._move.bind(t)}).data("kendoMobileScroller");if(r.translate)t.movableCanvas=new v(r.element);var o=function(e,t,i){e.makeVirtual();e.virtualSize(t||N,i||H)};o(a.dimensions.x);o(a.dimensions.y);a.disable()},tryActivate:function(e,t){var i=this.toolService;var n=i.diagram.options.pannable;var r=t.ctrlKey;if(a(n.key))if(!n.key||n.key=="none")r=Pe(t)&&!a(i.hoveredItem);else r=t[n.key+"Key"];return n!==false&&r&&!a(i.hoveredAdorner)&&!a(i._hoveredConnector)},start:function(){this.scroller.enable()},move:function(){},_move:function(e){var t=this,i=t.toolService.diagram,n=i.canvas,r=new b(e.scrollLeft,e.scrollTop);if(n.translate){i._storePan(r.times(-1));t.movableCanvas.moveTo(r);n.translate(r.x,r.y)}else r=r.plus(i._pan.times(-1));i.trigger(q,{pan:r})},end:function(){this.scroller.disable()},getCursor:function(){return n.move}}),pe=e.extend({init:function(e){this.toolService=e},tryActivate:function(){return true},start:function(e,t){var i=this.toolService,n=i.diagram,r=i.hoveredItem;if(r){i.selectSingle(r,t);if(r.adorner){this.adorner=r.adorner;this.handle=this.adorner._hitTest(e)}}if(!this.handle){this.handle=n._resizingAdorner._hitTest(e);if(this.handle)this.adorner=n._resizingAdorner}if(this.adorner)if(!this.adorner.isDragHandle(this.handle)||!n.trigger(D,{shapes:this.adorner.shapes,connections:[]}))this.adorner.start(e);else{i.startPoint=e;i.end(e)}},move:function(e){if(this.adorner){this.adorner.move(this.handle,e);if(this.adorner.isDragHandle(this.handle))this.toolService.diagram.trigger(E,{shapes:this.adorner.shapes,connections:[]})}},end:function(){var e=this.toolService.diagram,t=this.adorner,i;if(t)if(!t.isDragHandle(this.handle)||!e.trigger(I,{shapes:t.shapes,connections:[]})){i=t.stop();if(i)e.undoRedoService.add(i,false)}else t.cancel();this.adorner=o;this.handle=o},getCursor:function(e){return this.toolService.hoveredItem?this.toolService.hoveredItem._getCursor(e):n.arrow}}),ve=e.extend({init:function(e){this.toolService=e},tryActivate:function(e,t){var i=this.toolService;var n=i.diagram.options.selectable;var r=n&&n.multiple!==false;if(r)if(n.key&&n.key!="none")r=t[n.key+"Key"];else r=Pe(t);return r&&!a(i.hoveredItem)&&!a(i.hoveredAdorner)},start:function(e){var t=this.toolService.diagram;t.deselect();t.selector.start(e)},move:function(e){var t=this.toolService.diagram;t.selector.move(e)},end:function(e,t){var i=this.toolService.diagram,n=this.toolService.hoveredItem;var r=i.selector.bounds();if((!n||!n.isSelected)&&!t.ctrlKey)i.deselect();if(!r.isEmpty())i.selectArea(r);i.selector.end()},getCursor:function(){return n.arrow}}),ge=e.extend({init:function(e){this.toolService=e;this.type="ConnectionTool"},tryActivate:function(){return this.toolService._hoveredConnector},start:function(e,t){var i=this.toolService,n=i.diagram,r=i._hoveredConnector,a=n._createConnection({},r._c,e);if(Ee(a)&&!n.trigger(D,{shapes:[],connections:[a],connectionHandle:X})&&n._addConnection(a)){i._connectionManipulation(a,r._c.shape,true);i._removeHover();i.selectSingle(i.activeConnection,t);if(t.type=="touchmove")n._cachedTouchTarget=r.visual}else{a.source(null);i.end(e)}},move:function(e){var t=this.toolService;var i=t.activeConnection;i.target(e);t.diagram.trigger(E,{shapes:[],connections:[i],connectionHandle:X});return true},end:function(e){var t=this.toolService,i=t.diagram,n=t.activeConnection,r=t.hoveredItem,a=t._hoveredConnector,o,s=i._cachedTouchTarget;if(!n)return;if(a&&a._c!=n.sourceConnector)o=a._c;else if(r&&r instanceof u.Shape)o=r.getConnector(x)||r.getConnector(e);else o=e;n.target(o);if(!i.trigger(I,{shapes:[],connections:[n],connectionHandle:X})){n.updateModel();i._syncConnectionChanges()}else{i.remove(n,false);i.undoRedoService.pop()}t._connectionManipulation();if(s){i._connectorsAdorner.visual.remove(s);i._cachedTouchTarget=null}},getCursor:function(){return n.arrow}}),me=e.extend({init:function(e){this.toolService=e;this.type="ConnectionTool"},tryActivate:function(e,t){var i=this.toolService,n=i.diagram,r=n.options.selectable,a=i.hoveredItem,o=r!==false&&a&&a.path&&!(a.isSelected&&t.ctrlKey);if(o)this._c=a;return o},start:function(e,t){var i=this.toolService;var n=this._c;i.selectSingle(n,t);var r=n.adorner;var a,o;if(r){a=r._hitTest(e);o=K[a]}if(Ee(n)&&r&&!i.diagram.trigger(D,{shapes:[],connections:[n],connectionHandle:o})){this.handle=a;this.handleName=o;r.start(e)}else{i.startPoint=e;i.end(e)}},move:function(e){var t=this._c.adorner;if(Ee(this._c)&&t){t.move(this.handle,e);this.toolService.diagram.trigger(E,{shapes:[],connections:[this._c],connectionHandle:this.handleName});return true}},end:function(e){var t=this._c;var i=t.adorner;var n=this.toolService;var r=n.diagram;if(i)if(Ee(t)){var a=i.stop(e);if(!r.trigger(I,{shapes:[],connections:[t],connectionHandle:this.handleName})){r.undoRedoService.add(a,false);t.updateModel();r._syncConnectionChanges()}else a.undo()}},getCursor:function(){return n.move}});function r(e,t){return t.charCodeAt(0)==e||t.toUpperCase().charCodeAt(0)==e}var _e=e.extend({init:function(e){this.diagram=e;this.tools=[new de(this),new me(this),new ge(this),new ve(this),new pe(this)];this.activeTool=o},start:function(e,t){t=s({},t);if(this.activeTool)this.activeTool.end(e,t);this._updateHoveredItem(e);this._activateTool(e,t);this.activeTool.start(e,t);this._updateCursor(e);this.diagram.focus();this.diagram.canvas.surface.suspendTracking();this.startPoint=e;return true},move:function(e,t){t=s({},t);var i=true;if(this.activeTool)i=this.activeTool.move(e,t);if(i)this._updateHoveredItem(e);this._updateCursor(e);return true},end:function(e,t){t=s({},t);if(this.activeTool)this.activeTool.end(e,t);this.diagram.canvas.surface.resumeTracking();this.activeTool=o;this._updateCursor(e);return true},keyDown:function(e,t){var i=this.diagram;t=s({ctrlKey:false,metaKey:false,altKey:false},t);if((t.ctrlKey||t.metaKey)&&!t.altKey){if(r(e,"a")){i.selectAll();i._destroyToolBar();return true}else if(r(e,"z")){i.undo();i._destroyToolBar();return true}else if(r(e,"y")){i.redo();i._destroyToolBar();return true}else if(r(e,"c")){i.copy();i._destroyToolBar()}else if(r(e,"x")){i.cut();i._destroyToolBar()}else if(r(e,"v")){i.paste();i._destroyToolBar()}else if(r(e,"l")){i.layout();i._destroyToolBar()}else if(r(e,"d")){i._destroyToolBar();i.copy();i.paste()}}else if(e===46||e===8){var n=this.diagram._triggerRemove(i.select());if(n.length){this.diagram.remove(n,true);this.diagram._syncChanges();this.diagram._destroyToolBar()}return true}else if(e===27){this._discardNewConnection();i.deselect();i._destroyToolBar();return true}},wheel:function(e,t){var i=this.diagram,n=t.delta,r=i.zoom(),a=i.options,o=a.zoomRate,s={point:e,meta:t,zoom:r};if(i.trigger(F,s))return;if(n<0)r+=o;else r-=o;r=l.dataviz.round(Math.max(a.zoomMin,Math.min(a.zoomMax,r)),2);s.zoom=r;i.zoom(r,s);i.trigger(V,s);return true},setTool:function(e,t){e.toolService=this;this.tools[t]=e},selectSingle:function(e,t){var i=this.diagram;var n=i.options.selectable;if(n&&!e.isSelected&&e.options.selectable!==false){var r=t.ctrlKey&&n.multiple!==false;i.select(e,{addToSelection:r})}},_discardNewConnection:function(){if(this.newConnection){this.diagram.remove(this.newConnection);this.newConnection=o}},_activateTool:function(e,t){for(var i=0;i<this.tools.length;i++){var n=this.tools[i];if(n.tryActivate(e,t)){this.activeTool=n;break}}},_updateCursor:function(e){var t=this.diagram.element;var i=this.activeTool?this.activeTool.getCursor(e):this.hoveredAdorner?this.hoveredAdorner._getCursor(e):this.hoveredItem?this.hoveredItem._getCursor(e):n.arrow;t.css({cursor:i})},_connectionManipulation:function(e,t,i){this.activeConnection=e;this.disabledShape=t;if(i)this.newConnection=this.activeConnection;else this.newConnection=o},_updateHoveredItem:function(e){var t=this._hitTest(e);var i=this.diagram;if(t!=this.hoveredItem&&(!this.disabledShape||t!=this.disabledShape)){if(this.hoveredItem){i.trigger(R,{item:this.hoveredItem});this.hoveredItem._hover(false)}if(t&&t.options.enable){i.trigger(L,{item:t});this.hoveredItem=t;this.hoveredItem._hover(true)}else this.hoveredItem=o}},_removeHover:function(){if(this.hoveredItem){this.hoveredItem._hover(false);this.hoveredItem=o}},_hitTest:function(e){var t,i=this.diagram,n,r;if(this._hoveredConnector){this._hoveredConnector._hover(false);this._hoveredConnector=o}if(i._connectorsAdorner._visible){t=i._connectorsAdorner._hitTest(e);if(t)return t}t=this.diagram._resizingAdorner._hitTest(e);if(t){this.hoveredAdorner=i._resizingAdorner;if(t.x!==0||t.y!==0)return;t=o}else this.hoveredAdorner=o;if(!this.activeTool||this.activeTool.type!=="ConnectionTool"){var a=[];for(r=0;r<i._selectedItems.length;r++){n=i._selectedItems[r];if(n instanceof u.Connection)a.push(n)}t=this._hitTestItems(a,e)}return t||this._hitTestElements(e)},_hitTestElements:function(e){var t=this.diagram;var i=this._hitTestItems(t.shapes,e);var n=this._hitTestItems(t.connections,e);var r;if((!this.activeTool||this.activeTool.type!="ConnectionTool")&&i&&n&&!Ie(i,e)){var a=t.mainLayer;var o=m(i.visual,a.children);var s=m(n.visual,a.children);r=o>s?i:n}return r||i||n},_hitTestItems:function(e,t){var i,n,r;for(i=e.length-1;i>=0;i--){n=e[i];r=n._hitTest(t);if(r)return r}}}),ye=l.Class.extend({init:function(){}}),be=ye.extend({init:function(e){var t=this;ye.fn.init.call(t);this.connection=e},hitTest:function(e){var t=this.getBounds().inflate(_);if(!t.contains(e))return false;return u.Geometry.distanceToPolyline(e,this.connection.allPoints())<_},getBounds:function(){var e=this.connection.allPoints(),t=e[0],i=e[e.length-1],n=Math.max(t.x,i.x),r=Math.min(t.x,i.x),a=Math.min(t.y,i.y),o=Math.max(t.y,i.y);for(var s=1;s<e.length-1;++s){n=Math.max(n,e[s].x);r=Math.min(r,e[s].x);a=Math.min(a,e[s].y);o=Math.max(o,e[s].y)}return new y(r,a,n-r,o-a)}}),we=be.extend({init:function(e){var t=this;be.fn.init.call(t);this.connection=e},route:function(){}}),xe=be.extend({SAME_SIDE_DISTANCE_RATIO:5,init:function(e){var t=this;be.fn.init.call(t);this.connection=e},routePoints:function(e,t,i,n){var r;if(i&&n)r=this._connectorPoints(e,t,i,n);else r=this._floatingPoints(e,t,i);return r},route:function(){var e=this.connection._resolvedSourceConnector;var t=this.connection._resolvedTargetConnector;var i=this.connection.sourcePoint();var n=this.connection.targetPoint();var r=this.routePoints(i,n,e,t);this.connection.points(r)},_connectorSides:[{name:"Top",axis:"y",boundsPoint:"topLeft",secondarySign:1},{name:"Left",axis:"x",boundsPoint:"topLeft",secondarySign:1},{name:"Bottom",axis:"y",boundsPoint:"bottomRight",secondarySign:-1},{name:"Right",axis:"x",boundsPoint:"bottomRight",secondarySign:-1}],_connectorSide:function(e,t){var i=e.position();var n=e.shape.bounds(Y);var c={topLeft:n.topLeft(),bottomRight:n.bottomRight()};var h=this._connectorSides;var r=g.MAX_NUM;var a;var o;var s;var l;for(var u=0;u<h.length;u++){l=h[u];s=l.axis;a=Math.round(Math.abs(i[s]-c[l.boundsPoint][s]));if(a<r){r=a;o=l}else if(a===r&&(i[s]-t[s])*l.secondarySign>(i[o.axis]-t[o.axis])*o.secondarySign)o=l}return o.name},_sameSideDistance:function(e){var t=e.shape.bounds(Y);return Math.min(t.width,t.height)/this.SAME_SIDE_DISTANCE_RATIO},_connectorPoints:function(e,t,i,c){var n=this._connectorSide(i,t);var r=this._connectorSide(c,e);var h=t.x-e.x;var a=t.y-e.y;var o=this._sameSideDistance(i);var s=[];var l,u;if(n===k||n==T)if(r==k||r==T)if(n==r){if(n==k)u=Math.min(e.y,t.y)-o;else u=Math.max(e.y,t.y)+o;s=[new b(e.x,u),new b(t.x,u)]}else s=[new b(e.x,e.y+a/2),new b(t.x,e.y+a/2)];else s=[new b(e.x,t.y)];else if(r==S||r==C)if(n==r){if(n==S)l=Math.min(e.x,t.x)-o;else l=Math.max(e.x,t.x)+o;s=[new b(l,e.y),new b(l,t.y)]}else s=[new b(e.x+h/2,e.y),new b(e.x+h/2,e.y+a)];else s=[new b(t.x,e.y)];return s},_floatingPoints:function(e,t,i){var c=i?this._connectorSide(i,t):null;var n=this._startHorizontal(e,t,c);var r=[e,e,t,t];var a=t.x-e.x;var h=t.y-e.y;var o=r.length;var s;var l;for(var u=1;u<o-1;++u){if(n)if(u%2!==0){s=a/(o/2);l=0}else{s=0;l=h/((o-1)/2)}else if(u%2!==0){s=0;l=h/(o/2)}else{s=a/((o-1)/2);l=0}r[u]=new b(r[u-1].x+s,r[u-1].y+l)}u--;if(n&&u%2!==0||!n&&u%2===0)r[o-2]=new b(r[o-1].x,r[o-2].y);else r[o-2]=new b(r[o-2].x,r[o-1].y);return[r[1],r[2]]},_startHorizontal:function(e,t,i){var n;if(i!==null&&(i===C||i===S))n=true;else n=Math.abs(e.x-t.x)>Math.abs(e.y-t.y);return n}}),ke=e.extend({init:function(e,t){var i=this;i.diagram=e;i.options=s({},i.options,t);i.visual=new h;i.diagram._adorners.push(i)},refresh:function(){}}),Ce=ke.extend({init:function(e,t){var i=this,n;i.connection=e;n=i.connection.diagram;i._ts=n.toolService;ke.fn.init.call(i,n,t);var r=i.connection.sourcePoint();var a=i.connection.targetPoint();i.spVisual=new p(s(i.options.handles,{center:r}));i.epVisual=new p(s(i.options.handles,{center:a}));i.visual.append(i.spVisual);i.visual.append(i.epVisual)},options:{handles:{}},_getCursor:function(){return n.move},start:function(e){this.handle=this._hitTest(e);this.startPoint=e;this._initialSource=this.connection.source();this._initialTarget=this.connection.target();switch(this.handle){case-1:if(this.connection.targetConnector)this._ts._connectionManipulation(this.connection,this.connection.targetConnector.shape);break;case 1:if(this.connection.sourceConnector)this._ts._connectionManipulation(this.connection,this.connection.sourceConnector.shape);break}},move:function(e,t){switch(e){case-1:this.connection.source(t);break;case 1:this.connection.target(t);break;default:var i=t.minus(this.startPoint);this.startPoint=t;if(!this.connection.sourceConnector)this.connection.source(this.connection.sourcePoint().plus(i));if(!this.connection.targetConnector)this.connection.target(this.connection.targetPoint().plus(i));break}this.refresh();return true},stop:function(e){var t=this.diagram.toolService,i=t.hoveredItem,n;if(t._hoveredConnector)n=t._hoveredConnector._c;else if(i&&i instanceof u.Shape)n=i.getConnector(x)||i.getConnector(e);else n=e;if(this.handle===-1)this.connection.source(n);else if(this.handle===1)this.connection.target(n);this.handle=o;this._ts._connectionManipulation();return new te(this.connection,this._initialSource,this._initialTarget)},_hitTest:function(e){var t=this.connection.sourcePoint();var i=this.connection.targetPoint();var n=this.options.handles.width/2+_;var r=this.options.handles.height/2+_;var a=t.distanceTo(e);var o=i.distanceTo(e);var s=new y(t.x,t.y).inflate(n,r).contains(e);var l=new y(i.x,i.y).inflate(n,r).contains(e);var u=0;if(s&&(!l||a<o))u=-1;else if(l&&(!s||o<a))u=1;return u},refresh:function(){this.spVisual.redraw({center:this.diagram.modelToLayer(this.connection.sourcePoint())});this.epVisual.redraw({center:this.diagram.modelToLayer(this.connection.targetPoint())})}}),Se=ke.extend({init:function(e,t){var i=this;ke.fn.init.call(i,e,t);i._refreshHandler=function(e){if(e.item==i.shape)i.refresh()}},show:function(e){var t=this,i,n,r;t._visible=true;t.shape=e;t.diagram.bind(B,t._refreshHandler);i=e.connectors.length;t.connectors=[];t._clearVisual();for(n=0;n<i;n++){r=new De(e.connectors[n]);t.connectors.push(r);t.visual.append(r.visual)}t.visual.visible(true);t.refresh()},_clearVisual:function(){var e=this;if(e.diagram._cachedTouchTarget)e._keepCachedTouchTarget();else e.visual.clear()},_keepCachedTouchTarget:function(){var e=this,t=e.visual.children;var i=t.length;var n=m(e.diagram._cachedTouchTarget,t);for(var r=i-1;r>=0;r--){if(r==n)continue;e.visual.remove(t[r])}},destroy:function(){var e=this;e.diagram.unbind(B,e._refreshHandler);e.shape=o;e._visible=o;e.visual.visible(false)},_hitTest:function(e){var t,i;for(i=0;i<this.connectors.length;i++){t=this.connectors[i];if(t._hitTest(e)){t._hover(true);this.diagram.toolService._hoveredConnector=t;break}}},refresh:function(){if(this.shape){var e=this.shape.bounds();e=this.diagram.modelToLayer(e);this.visual.position(e.topLeft());c.each(this.connectors,function(){this.refresh()})}}});function Te(e,t){var i;if(e.x==-1&&e.y==-1)i=t.bottomRight();else if(e.x==1&&e.y==1)i=t.topLeft();else if(e.x==-1&&e.y==1)i=t.topRight();else if(e.x==1&&e.y==-1)i=t.bottomLeft();else if(e.x===0&&e.y==-1)i=t.bottom();else if(e.x===0&&e.y==1)i=t.top();else if(e.x==1&&e.y===0)i=t.left();else if(e.x==-1&&e.y===0)i=t.right();return i}var Ae=ke.extend({init:function(e,t){var i=this;ke.fn.init.call(i,e,t);i._manipulating=false;i.map=[];i.shapes=[];i._initSelection();i._createHandles();i.redraw();i.diagram.bind("select",function(e){i._initialize(e.selected)});i._refreshHandler=function(){if(!i._internalChange){i.refreshBounds();i.refresh()}};i._rotatedHandler=function(){if(i.shapes.length==1)i._angle=i.shapes[0].rotate().angle;i._refreshHandler()};i.diagram.bind(B,i._refreshHandler).bind(P,i._rotatedHandler);i.refreshBounds();i.refresh()},options:{handles:{fill:{color:"#fff"},stroke:{color:"#282828"},height:7,width:7,hover:{fill:{color:"#282828"},stroke:{color:"#282828"}}},selectable:{stroke:{color:"#778899",width:1,dashType:"dash"},fill:{color:W}},offset:10},_initSelection:function(){var e=this;var t=e.diagram;var i=t.options.selectable;var n=s({},e.options.selectable,i);e.rect=new f(n);e.visual.append(e.rect)},_resizable:function(){return this.options.editable&&this.options.editable.resize!==false},_handleOptions:function(){return(this.options.editable.resize||{}).handles||this.options.handles},_createHandles:function(){var e,t,i,n;if(this._resizable()){e=this._handleOptions();for(n=-1;n<=1;n++)for(i=-1;i<=1;i++)if(n!==0||i!==0){t=new f(e);t.drawingElement._hover=this._hover.bind(this);this.map.push({x:n,y:i,visual:t});this.visual.append(t)}}},bounds:function(e){if(e){this._innerBounds=e.clone();this._bounds=this.diagram.modelToLayer(e).inflate(this.options.offset,this.options.offset)}else return this._bounds},_hitTest:function(e){var t=this.diagram.modelToLayer(e),i,n,r,a=this.map.length,o;if(this._angle)t=t.clone().rotate(this._bounds.center(),this._angle);if(this._resizable())for(i=0;i<a;i++){o=this.map[i];n=new b(o.x,o.y);r=this._getHandleBounds(n);r.offset(this._bounds.x,this._bounds.y);if(r.contains(t))return n}if(this._bounds.contains(t))return new b(0,0)},_getHandleBounds:function(e){if(this._resizable()){var t=this._handleOptions(),i=t.width,n=t.height,r=new y(0,0,i,n);if(e.x<0)r.x=-i/2;else if(e.x===0)r.x=Math.floor(this._bounds.width/2)-i/2;else if(e.x>0)r.x=this._bounds.width+1-i/2;if(e.y<0)r.y=-n/2;else if(e.y===0)r.y=Math.floor(this._bounds.height/2)-n/2;else if(e.y>0)r.y=this._bounds.height+1-n/2;return r}},_getCursor:function(e){var t=this._hitTest(e);if(t&&t.x>=-1&&t.x<=1&&t.y>=-1&&t.y<=1&&this._resizable()){var i=this._angle;if(i){i=360-i;t.rotate(new b(0,0),i);t=new b(Math.round(t.x),Math.round(t.y))}if(t.x==-1&&t.y==-1)return"nw-resize";if(t.x==1&&t.y==1)return"se-resize";if(t.x==-1&&t.y==1)return"sw-resize";if(t.x==1&&t.y==-1)return"ne-resize";if(t.x===0&&t.y==-1)return"n-resize";if(t.x===0&&t.y==1)return"s-resize";if(t.x==1&&t.y===0)return"e-resize";if(t.x==-1&&t.y===0)return"w-resize"}return this._manipulating?n.move:n.select},_initialize:function(){var e=this,t,i,n=e.diagram.select();e.shapes=[];for(t=0;t<n.length;t++){i=n[t];if(i instanceof u.Shape){e.shapes.push(i);i._rotationOffset=new b}}e._angle=e.shapes.length==1?e.shapes[0].rotate().angle:0;e._startAngle=e._angle;e._rotates();e._positions();e.refreshBounds();e.refresh();e.redraw()},_rotates:function(){var e=this,t,i;e.initialRotates=[];for(t=0;t<e.shapes.length;t++){i=e.shapes[t];e.initialRotates.push(i.rotate().angle)}},_positions:function(){var e=this,t,i;e.initialStates=[];for(t=0;t<e.shapes.length;t++){i=e.shapes[t];e.initialStates.push(i.bounds())}},_hover:function(e,t){if(this._resizable()){var i=this._handleOptions(),n=i.hover,r=i.stroke,a=i.fill;if(e&&w.isDefined(n.stroke))r=s({},r,n.stroke);if(e&&w.isDefined(n.fill))a=n.fill;t.stroke(r.color,r.width,r.opacity);t.fill(a.color,a.opacity)}},start:function(e){this._sp=e;this._cp=e;this._lp=e;this._manipulating=true;this._internalChange=true;this.shapeStates=[];for(var t=0;t<this.shapes.length;t++){var i=this.shapes[t];this.shapeStates.push(i.bounds())}},redraw:function(){var e,t,i=this._resizable();for(e=0;e<this.map.length;e++){t=this.map[e];t.visual.visible(i)}},angle:function(e){if(a(e))this._angle=e;return this._angle},rotate:function(){var e=this._innerBounds.center();var t=this.angle();this._internalChange=true;for(var i=0;i<this.shapes.length;i++){var n=this.shapes[i];t=(t+this.initialRotates[i]-this._startAngle)%360;n.rotate(t,e)}this.refresh()},move:function(e,t){var i,n,r=new b,a=new b,o,c,s,l,h,u,f=0,d,p,v;if(e.y===-2&&e.x===-1){c=this._innerBounds.center();this._angle=this._truncateAngle(w.findAngle(c,t));for(l=0;l<this.shapes.length;l++){s=this.shapes[l];h=(this._angle+this.initialRotates[l]-this._startAngle)%360;s.rotate(h,c);if(s.hasOwnProperty("layout"))s.layout(s);this._rotating=true}this.refresh()}else{if(this.shouldSnap()){var g=this._truncateDistance(t.minus(this._lp));if(g.x===0&&g.y===0){this._cp=t;return}i=g;this._lp=new b(this._lp.x+g.x,this._lp.y+g.y)}else i=t.minus(this._cp);if(this.isDragHandle(e)){a=r=i;n=true}else{if(this._angle)i.rotate(new b(0,0),this._angle);if(e.x==-1)r.x=i.x;else if(e.x==1)a.x=i.x;if(e.y==-1)r.y=i.y;else if(e.y==1)a.y=i.y}if(!n){d=Te(e,this._innerBounds);p=(this._innerBounds.width+i.x*e.x)/this._innerBounds.width;v=(this._innerBounds.height+i.y*e.y)/this._innerBounds.height}for(l=0;l<this.shapes.length;l++){s=this.shapes[l];o=s.bounds();if(n){if(!Ee(s))continue;u=this._displaceBounds(o,r,a,n)}else{u=o.clone();u.scale(p,v,d,this._innerBounds.center(),s.rotate().angle);var m=u.center();m.rotate(o.center(),-this._angle);u=new y(m.x-u.width/2,m.y-u.height/2,u.width,u.height)}if(u.width>=s.options.minWidth&&u.height>=s.options.minHeight){var _=o;s.bounds(u);if(s.hasOwnProperty("layout"))s.layout(s,_,u);if(_.width!==u.width||_.height!==u.height)s.rotate(s.rotate().angle);f+=1}}if(f){if(f==l){u=this._displaceBounds(this._innerBounds,r,a,n);this.bounds(u)}else this.refreshBounds();this.refresh()}this._positions()}this._cp=t},isDragHandle:function(e){return e.x===0&&e.y===0},cancel:function(){var e=this.shapes;var t=this.shapeStates;for(var i=0;i<e.length;i++)e[i].bounds(t[i]);this.refreshBounds();this.refresh();this._manipulating=o;this._internalChange=o;this._rotating=o},_truncatePositionToGuides:function(e){if(this.diagram.ruler)return this.diagram.ruler.truncatePositionToGuides(e);return e},_truncateSizeToGuides:function(e){if(this.diagram.ruler)return this.diagram.ruler.truncateSizeToGuides(e);return e},_truncateAngle:function(e){var t=this.snapOptions();var i=Math.max(t.angle||M,z);return t?Math.floor(e%360/i)*i:e%360},_truncateDistance:function(e){if(e instanceof u.Point)return new u.Point(this._truncateDistance(e.x),this._truncateDistance(e.y));else{var t=this.snapOptions()||{};var i=Math.max(t.size||A,O);return t?Math.floor(e/i)*i:e}},snapOptions:function(){var e=this.diagram.options.editable;var t=((e||{}).drag||{}).snap||{};return t},shouldSnap:function(){var e=this.diagram.options.editable;var t=(e||{}).drag;var i=(t||{}).snap;return e!==false&&t!==false&&i!==false},_displaceBounds:function(e,t,i,n){var r=e.topLeft().plus(t),a=e.bottomRight().plus(i),o=y.fromPoints(r,a),s;if(!n){s=o.center();s.rotate(e.center(),-this._angle);o=new y(s.x-o.width/2,s.y-o.height/2,o.width,o.height)}return o},stop:function(){var e,t,i;if(this._cp!=this._sp)if(this._rotating){e=new le(this,this.shapes,this.initialRotates);this._rotating=false}else if(this._diffStates()){if(this.diagram.ruler)for(t=0;t<this.shapes.length;t++){i=this.shapes[t];var n=i.bounds();n=this._truncateSizeToGuides(this._truncatePositionToGuides(n));i.bounds(n);this.refreshBounds();this.refresh()}for(t=0;t<this.shapes.length;t++){i=this.shapes[t];i.updateModel()}e=new re(this.shapes,this.shapeStates,this);this.diagram._syncShapeChanges()}this._manipulating=o;this._internalChange=o;this._rotating=o;return e},_diffStates:function(){var e=this.shapes;var t=this.shapeStates;for(var i=0;i<e.length;i++)if(!e[i].bounds().equals(t[i]))return true;return false},refreshBounds:function(){var e=this.shapes.length==1?this.shapes[0].bounds().clone():this.diagram.boundingBox(this.shapes,true);this.bounds(e)},refresh:function(){var e=this,t,i;if(this.shapes.length>0){i=this.bounds();this.visual.visible(true);this.visual.position(i.topLeft());c.each(this.map,function(){t=e._getHandleBounds(new b(this.x,this.y));this.visual.position(t.topLeft())});this.visual.position(i.topLeft());var n=new b(i.width/2,i.height/2);this.visual.rotate(this._angle,n);this.rect.redraw({width:i.width,height:i.height});if(this.rotationThumb){var r=this.options.editable.rotate.thumb;this._rotationThumbBounds=new y(i.center().x,i.y+r.y,0,0).inflate(r.width);this.rotationThumb.redraw({x:i.width/2-r.width/2})}}else this.visual.visible(false)}}),Me=e.extend({init:function(e){var t=e.options.selectable;this.options=s({},this.options,t);this.visual=new f(this.options);this.diagram=e},options:{stroke:{color:"#778899",width:1,dashType:"dash"},fill:{color:W}},start:function(e){this._sp=this._ep=e;this.refresh();this.diagram._adorn(this,true)},end:function(){this._sp=this._ep=o;this.diagram._adorn(this,false)},bounds:function(e){if(e)this._bounds=e;return this._bounds},move:function(e){this._ep=e;this.refresh()},refresh:function(){if(this._sp){var e=y.fromPoints(this.diagram.modelToLayer(this._sp),this.diagram.modelToLayer(this._ep));this.bounds(y.fromPoints(this._sp,this._ep));this.visual.position(e.topLeft());this.visual.redraw({height:e.height+1,width:e.width+1})}}}),De=e.extend({init:function(e){this.options=s({},e.options);this._c=e;this.visual=new p(this.options);this.refresh()},_hover:function(e){var t=this.options,i=t.hover,n=t.stroke,r=t.fill;if(e&&w.isDefined(i.stroke))n=s({},n,i.stroke);if(e&&w.isDefined(i.fill))r=i.fill;this.visual.redraw({stroke:n,fill:r})},refresh:function(){var e=this._c.shape.diagram.modelToView(this._c.position()),t=e.minus(this._c.shape.bounds("transformed").topLeft()),i=new y(e.x,e.y,0,0);i.inflate(this.options.width/2,this.options.height/2);this._visualBounds=i;this.visual.redraw({center:new b(t.x,t.y)})},_hitTest:function(e){var t=this._c.shape.diagram.modelToView(e);return this._visualBounds.contains(t)}});function Ee(e){var t=e.options.editable;return t&&t.drag!==false}function Ie(e,t){var i,n,r;for(var a=0;a<e.connectors.length;a++){i=e.connectors[a];n=i.position();r=new y(n.x,n.y);r.inflate(_,_);if(r.contains(t))return i}}function Pe(e){return e.ctrlKey===false&&e.altKey===false&&e.shiftKey===false}s(u,{CompositeUnit:J,TransformUnit:re,PanUndoUnit:se,AddShapeUnit:oe,AddConnectionUnit:ae,DeleteShapeUnit:ne,DeleteConnectionUnit:ie,ConnectionEditAdorner:Ce,ConnectionTool:ge,ConnectorVisual:De,UndoRedoService:he,ResizingAdorner:Ae,Selector:Me,ToolService:_e,ConnectorsAdorner:Se,LayoutUndoUnit:Z,ConnectionEditUnit:ee,ToFrontUnit:ue,ToBackUnit:ce,ConnectionRouterBase:ye,PolylineRouter:we,CascadingRouter:xe,SelectionTool:ve,ScrollerTool:de,PointerTool:pe,ConnectionEditTool:me,RotateUnit:le})})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/diagram/layout.min",["./math.min"],function(){var e=window.kendo.jQuery,n=void 0,t=window.kendo,c=t.dataviz.diagram,r=c.Graph,b=c.Node,w=c.Link,a=t.deepExtend,f=c.Size,d=c.Rect,M=c.Dictionary,h=c.Set,o=c.Graph,D=c.Utils,g=c.Point,p=1e-6,s=Math.PI/180,v=D.contains,l=e.grep,i=t.Class.extend({defaultOptions:{type:"Tree",subtype:"Down",roots:null,animate:false,limitToView:false,friction:.9,nodeDistance:50,iterations:300,horizontalSeparation:90,verticalSeparation:50,underneathVerticalTopOffset:15,underneathHorizontalOffset:15,underneathVerticalSeparation:15,grid:{width:1500,offsetX:50,offsetY:50,componentSpacingX:20,componentSpacingY:20},layerSeparation:50,layeredIterations:2,startRadialAngle:0,endRadialAngle:360,radialSeparation:150,radialFirstLevelSeparation:200,keepComponentsInOneRadialLayout:false,ignoreContainers:true,layoutContainerChildren:false,ignoreInvisible:true,animateTransitions:false},init:function(){},gridLayoutComponents:function(e){if(!e)throw"No components supplied.";D.forEach(e,function(e){e.calcBounds()});e.sort(function(e,t){return t.bounds.width-e.bounds.width});var c=this.options.grid.width,h=this.options.grid.componentSpacingX,f=this.options.grid.componentSpacingY,t=0,i=this.options.grid.offsetX,d=this.options.grid.offsetY,n=i,r=d,a,o=[],p=[];while(e.length>0){if(n>=c){n=i;r+=t+f;t=0}var s=e.pop();this.moveToOffset(s,new g(n,r));for(a=0;a<s.nodes.length;a++)p.push(s.nodes[a]);for(a=0;a<s.links.length;a++)o.push(s.links[a]);var v=s.bounds;var l=v.height;if(l<=0||isNaN(l))l=0;var u=v.width;if(u<=0||isNaN(u))u=0;if(l>=t)t=l;n+=u+h}return{nodes:p,links:o}},moveToOffset:function(e,t){var i,n,r=e.bounds,a=t.x-r.x,o=t.y-r.y;for(i=0;i<e.nodes.length;i++){var c=e.nodes[i];var s=c.bounds();if(s.width===0&&s.height===0&&s.x===0&&s.y===0)s=new d(0,0,0,0);s.x+=a;s.y+=o;c.bounds(s)}for(i=0;i<e.links.length;i++){var l=e.links[i];if(l.points){var h=[];var f=l.points;for(n=0;n<f.length;n++){var u=f[n];u.x+=a;u.y+=o;h.push(u)}l.points=h}}this.currentHorizontalOffset+=r.width+this.options.grid.offsetX;return new g(a,o)},transferOptions:function(e){this.options=t.deepExtend({},this.defaultOptions);if(D.isUndefined(e))return;this.options=t.deepExtend(this.options,e||{})}}),u=t.Class.extend({init:function(e){this.nodeMap=new M;this.shapeMap=new M;this.nodes=[];this.edges=[];this.edgeMap=new M;this.finalNodes=[];this.finalLinks=[];this.ignoredConnections=[];this.ignoredShapes=[];this.hyperMap=new M;this.hyperTree=new r;this.finalGraph=null;this.diagram=e},convert:function(e){if(D.isUndefined(this.diagram))throw"No diagram to convert.";this.options=t.deepExtend({ignoreInvisible:true,ignoreContainers:true,layoutContainerChildren:false},e||{});this.clear();this._renormalizeShapes();this._renormalizeConnections();this.finalNodes=new M(this.nodes);this.finalLinks=new M(this.edges);this.finalGraph=new r;this.finalNodes.forEach(function(e){this.finalGraph.addNode(e)},this);this.finalLinks.forEach(function(e){this.finalGraph.addExistingLink(e)},this);return this.finalGraph},mapConnection:function(e){return this.edgeMap.get(e.id)},mapShape:function(e){return this.nodeMap.get(e.id)},getEdge:function(t,i){return D.first(t.links,function(e){return e.getComplement(t)===i})},clear:function(){this.finalGraph=null;this.hyperTree=!this.options.ignoreContainers&&this.options.layoutContainerChildren?new o:null;this.hyperMap=!this.options.ignoreContainers&&this.options.layoutContainerChildren?new M:null;this.nodeMap=new M;this.shapeMap=new M;this.nodes=[];this.edges=[];this.edgeMap=new M;this.ignoredConnections=[];this.ignoredShapes=[];this.finalNodes=[];this.finalLinks=[]},listToRoot:function(e){var t=[];var i=e.container;if(!i)return t;t.push(i);while(i.parentContainer){i=i.parentContainer;t.push(i)}t.reverse();return t},firstNonIgnorableContainer:function(e){if(e.isContainer&&!this._isIgnorableItem(e))return e;return!e.parentContainer?null:this.firstNonIgnorableContainer(e.parentContainer)},isContainerConnection:function(e,t){if(e.isContainer&&this.isDescendantOf(e,t))return true;return t.isContainer&&this.isDescendantOf(t,e)},isDescendantOf:function(e,t){if(!e.isContainer)throw"Expecting a container.";if(e===t)return false;if(v(e.children,t))return true;var i=[];for(var n=0,r=e.children.length;n<r;n++){var a=e.children[n];if(a.isContainer&&this.isDescendantOf(a,t))i.push(a)}return i.length>0},isIgnorableItem:function(e){if(this.options.ignoreInvisible){if(e.isCollapsed&&this._isVisible(e))return false;if(!e.isCollapsed&&this._isVisible(e))return false;return true}else return e.isCollapsed&&!this._isTop(e)},isShapeMapped:function(e){return e.isCollapsed&&!this._isVisible(e)&&!this._isTop(e)},leastCommonAncestor:function(e,t){if(!e)throw"Parameter should not be null.";if(!t)throw"Parameter should not be null.";if(!this.hyperTree)throw"No hypertree available.";var i=this.listToRoot(e);var n=this.listToRoot(t);var r=null;if(D.isEmpty(i)||D.isEmpty(n))return this.hyperTree.root.data;var a=i[0];var o=n[0];var s=0;while(a===o){r=i[s];s++;if(s>=i.length||s>=n.length)break;a=i[s];o=n[s]}if(!r)return this.hyperTree.root.data;else return l(this.hyperTree.nodes,function(e){return e.data.container===r})},_isTop:function(e){return!e.parentContainer},_isVisible:function(e){if(!e.visible())return false;return!e.parentContainer?e.visible():this._isVisible(e.parentContainer)},_isCollapsed:function(e){if(e.isContainer&&e.isCollapsed)return true;return e.parentContainer&&this._isCollapsed(e.parentContainer)},_renormalizeShapes:function(){if(this.options.ignoreContainers)for(var e=0,t=this.diagram.shapes.length;e<t;e++){var i=this.diagram.shapes[e];if(this.options.ignoreInvisible&&!this._isVisible(i)||i.isContainer){this.ignoredShapes.push(i);continue}var n=new b(i.id,i);n.isVirtual=false;this.nodeMap.add(i.id,n);this.nodes.push(n)}else throw"Containers are not supported yet, but stay tuned."},_renormalizeConnections:function(){if(this.diagram.connections.length===0)return;for(var e=0,t=this.diagram.connections.length;e<t;e++){var i=this.diagram.connections[e];if(this.isIgnorableItem(i)){this.ignoredConnections.push(i);continue}var n=!i.sourceConnector?null:i.sourceConnector.shape;var r=!i.targetConnector?null:i.targetConnector.shape;if(!n||!r){this.ignoredConnections.push(i);continue}if(v(this.ignoredShapes,n)&&!this.shapeMap.containsKey(n)){this.ignoredConnections.push(i);continue}if(v(this.ignoredShapes,r)&&!this.shapeMap.containsKey(r)){this.ignoredConnections.push(i);continue}if(this.shapeMap.containsKey(n))n=this.shapeMap[n];if(this.shapeMap.containsKey(r))r=this.shapeMap[r];var a=this.mapShape(n);var o=this.mapShape(r);if(a===o||this.areConnectedAlready(a,o)){this.ignoredConnections.push(i);continue}if(a===null||o===null)throw"A shape was not mapped to a node.";if(this.options.ignoreContainers){if(a.isVirtual||o.isVirtual){this.ignoredConnections.push(i);continue}var s=new w(a,o,i.id,i);this.edgeMap.add(i.id,s);this.edges.push(s)}else throw"Containers are not supported yet, but stay tuned."}},areConnectedAlready:function(t,i){return D.any(this.edges,function(e){return e.source===t&&e.target===i||e.source===i&&e.target===t})}}),m=i.extend({init:function(e){var t=this;i.fn.init.call(t);if(D.isUndefined(e))throw"Diagram is not specified.";this.diagram=e},layout:function(e){this.transferOptions(e);var t=new u(this.diagram);var i=t.convert(e);if(i.isEmpty())return;var n=i.getConnectedComponents();if(D.isEmpty(n))return;for(var r=0;r<n.length;r++){var a=n[r];this.layoutGraph(a,e)}var o=this.gridLayoutComponents(n);return new c.LayoutState(this.diagram,o)},layoutGraph:function(e,t){if(D.isDefined(t))this.transferOptions(t);this.graph=e;var i=this.options.nodeDistance*9;this.temperature=i;var n=this._expectedBounds();this.width=n.width;this.height=n.height;for(var r=0;r<this.options.iterations;r++){this.refineStage=r>=this.options.iterations*5/6;this.tick();this.temperature=this.refineStage?i/30:i*(1-r/(2*this.options.iterations))}},tick:function(){var e;for(e=0;e<this.graph.nodes.length;e++)this._repulsion(this.graph.nodes[e]);for(e=0;e<this.graph.links.length;e++)this._attraction(this.graph.links[e]);for(e=0;e<this.graph.nodes.length;e++){var t=this.graph.nodes[e];var i=Math.sqrt(t.dx*t.dx+t.dy*t.dy);if(i===0)return;t.x+=Math.min(i,this.temperature)*t.dx/i;t.y+=Math.min(i,this.temperature)*t.dy/i;if(this.options.limitToView){t.x=Math.min(this.width,Math.max(t.width/2,t.x));t.y=Math.min(this.height,Math.max(t.height/2,t.y))}}},_shake:function(e){var t=Math.random()*this.options.nodeDistance/4;var i=Math.random()*2*Math.PI;e.x+=t*Math.cos(i);e.y-=t*Math.sin(i)},_InverseSquareForce:function(e,t,i){var n;if(!this.refineStage)n=Math.pow(e,2)/Math.pow(this.options.nodeDistance,2);else{var r=t.x-i.x;var a=t.y-i.y;var o=t.width/2;var s=t.height/2;var l=i.width/2;var u=i.height/2;n=Math.pow(r,2)/Math.pow(o+l+this.options.nodeDistance,2)+Math.pow(a,2)/Math.pow(s+u+this.options.nodeDistance,2)}return n*4/3},_SquareForce:function(e,t,i){return 1/this._InverseSquareForce(e,t,i)},_repulsion:function(a){a.dx=0;a.dy=0;D.forEach(this.graph.nodes,function(e){if(e===a)return;while(a.x===e.x&&a.y===e.y)this._shake(e);var t=a.x-e.x;var i=a.y-e.y;var n=Math.sqrt(t*t+i*i);var r=this._SquareForce(n,a,e)*2;a.dx+=t/n*r;a.dy+=i/n*r},this)},_attraction:function(e){var t=e.target;var i=e.source;if(i===t)return;while(i.x===t.x&&i.y===t.y)this._shake(t);var n=i.x-t.x;var r=i.y-t.y;var a=Math.sqrt(n*n+r*r);var o=this._InverseSquareForce(a,i,t)*5;var s=n/a*o;var l=r/a*o;t.dx+=s;t.dy+=l;i.dx-=s;i.dy-=l},_expectedBounds:function(){var e,t=this.graph.nodes.length,i=1.5,n=4;if(t===0)return e;e=D.fold(this.graph.nodes,function(e,t){var i=t.width*t.height;if(i>0){e+=Math.sqrt(i);return e}return 0},0,this);var r=e/t;var a=r*Math.ceil(Math.sqrt(t));var o=a*Math.sqrt(i);var s=a/Math.sqrt(i);return{width:o*n,height:s*n}}}),_=t.Class.extend({init:function(e){this.center=null;this.options=e},layout:function(e,t){this.graph=e;if(!this.graph.nodes||this.graph.nodes.length===0)return;if(!v(this.graph.nodes,t))throw"The given root is not in the graph.";this.center=t;this.graph.cacheRelationships();this.layoutSwitch()},layoutLeft:function(e){this.setChildrenDirection(this.center,"Left",false);this.setChildrenLayout(this.center,"Default",false);var t=0,i=0,n,r,a;for(r=0;r<e.length;r++){a=e[r];a.TreeDirection="Left";var o=this.measure(a,f.Empty);i=Math.max(i,o.Width);t+=o.height+this.options.verticalSeparation}t-=this.options.verticalSeparation;var s=this.center.x-this.options.horizontalSeparation;n=this.center.y+(this.center.height-t)/2;for(r=0;r<e.length;r++){a=e[r];var l=new g(s-a.Size.width,n);this.arrange(a,l);n+=a.Size.height+this.options.verticalSeparation}},layoutRight:function(e){this.setChildrenDirection(this.center,"Right",false);this.setChildrenLayout(this.center,"Default",false);var t=0,i=0,n,r,a;for(r=0;r<e.length;r++){a=e[r];a.TreeDirection="Right";var o=this.measure(a,f.Empty);i=Math.max(i,o.Width);t+=o.height+this.options.verticalSeparation}t-=this.options.verticalSeparation;var s=this.center.x+this.options.horizontalSeparation+this.center.width;n=this.center.y+(this.center.height-t)/2;for(r=0;r<e.length;r++){a=e[r];var l=new g(s,n);this.arrange(a,l);n+=a.Size.height+this.options.verticalSeparation}},layoutUp:function(e){this.setChildrenDirection(this.center,"Up",false);this.setChildrenLayout(this.center,"Default",false);var t=0,i,n,r;for(r=0;r<e.length;r++){n=e[r];n.TreeDirection="Up";var a=this.measure(n,f.Empty);t+=a.width+this.options.horizontalSeparation}t-=this.options.horizontalSeparation;var o=this.center.x+this.center.width/2-t/2;for(r=0;r<e.length;r++){n=e[r];i=this.center.y-this.options.verticalSeparation-n.Size.height;var s=new g(o,i);this.arrange(n,s);o+=n.Size.width+this.options.horizontalSeparation}},layoutDown:function(e){var t,i;this.setChildrenDirection(this.center,"Down",false);this.setChildrenLayout(this.center,"Default",false);var n=0,r;for(i=0;i<e.length;i++){t=e[i];t.treeDirection="Down";var a=this.measure(t,f.Empty);n+=a.width+this.options.horizontalSeparation}n-=this.options.horizontalSeparation;var o=this.center.x+this.center.width/2-n/2;r=this.center.y+this.options.verticalSeparation+this.center.height;for(i=0;i<e.length;i++){t=e[i];var s=new g(o,r);this.arrange(t,s);o+=t.Size.width+this.options.horizontalSeparation}},layoutRadialTree:function(){this.setChildrenDirection(this.center,"Radial",false);this.setChildrenLayout(this.center,"Default",false);this.previousRoot=null;var e=this.options.startRadialAngle*s;var t=this.options.endRadialAngle*s;if(t<=e)throw"Final angle should not be less than the start angle.";this.maxDepth=0;this.origin=new g(this.center.x,this.center.y);this.calculateAngularWidth(this.center,0);if(this.maxDepth>0)this.radialLayout(this.center,this.options.radialFirstLevelSeparation,e,t);this.center.Angle=t-e},tipOverTree:function(e,t){if(D.isUndefined(t))t=0;this.setChildrenDirection(this.center,"Down",false);this.setChildrenLayout(this.center,"Default",false);this.setChildrenLayout(this.center,"Underneath",false,t);var i=0,n,r,a;for(a=0;a<e.length;a++){r=e[a];r.TreeDirection="Down";var o=this.measure(r,f.Empty);i+=o.width+this.options.horizontalSeparation}i-=this.options.horizontalSeparation;i-=e[e.length-1].width;i+=e[e.length-1].associatedShape.bounds().width;var s=this.center.x+this.center.width/2-i/2;n=this.center.y+this.options.verticalSeparation+this.center.height;for(a=0;a<e.length;a++){r=e[a];var l=new g(s,n);this.arrange(r,l);s+=r.Size.width+this.options.horizontalSeparation}},calculateAngularWidth:function(e,t){if(t>this.maxDepth)this.maxDepth=t;var i=0,n=1e3,r=1e3,a=t===0?0:Math.sqrt(n*n+r*r)/t;if(e.children.length>0){for(var o=0,s=e.children.length;o<s;o++){var l=e.children[o];i+=this.calculateAngularWidth(l,t+1)}i=Math.max(a,i)}else i=a;e.sectorAngle=i;return i},sortChildren:function(e){var t=0,i;if(e.parents.length>1)throw"Node is not part of a tree.";var n=e.parents[0];if(n){var r=new g(n.x,n.y);var a=new g(e.x,e.y);t=this.normalizeAngle(Math.atan2(r.y-a.y,r.x-a.x))}var o=e.children.length;if(o===0)return null;var s=[];var l=[];for(i=0;i<o;++i){var c=e.children[i];var u=new g(c.x,c.y);l[i]=i;s[i]=this.normalizeAngle(-t+Math.atan2(u.y-u.y,u.x-u.x))}D.bisort(s,l);var h=[];var f=e.children;for(i=0;i<o;++i)h.push(f[l[i]]);return h},normalizeAngle:function(e){while(e>Math.PI*2)e-=2*Math.PI;while(e<0)e+=Math.PI*2;return e},radialLayout:function(e,t,i,c){var n=c-i;var h=n/2;var f=e.sectorAngle;var r=0;var a=this.sortChildren(e);for(var o=0,d=a.length;o<d;o++){var s=a[o];var l=s;var u=l.sectorAngle/f;if(s.children.length>0)this.radialLayout(s,t+this.options.radialSeparation,i+r*n,i+(r+u)*n);this.setPolarLocation(s,t,i+r*n+u*h);l.angle=u*n;r+=u}},setPolarLocation:function(e,t,i){e.x=this.origin.x+t*Math.cos(i);e.y=this.origin.y+t*Math.sin(i);e.BoundingRectangle=new d(e.x,e.y,e.width,e.height)},setChildrenDirection:function(e,t,i){var n=e.treeDirection;this.graph.depthFirstTraversal(e,function(e){e.treeDirection=t});if(!i)e.treeDirection=n},setChildrenLayout:function(e,t,i,n){if(D.isUndefined(n))n=0;var r=e.childrenLayout;if(n>0){this.graph.assignLevels(e);this.graph.depthFirstTraversal(e,function(e){if(e.level>=n+1)e.childrenLayout=t})}else{this.graph.depthFirstTraversal(e,function(e){e.childrenLayout=t});if(!i)e.childrenLayout=r}},measure:function(e,t){var i=0,n=0,r;var a=new f(0,0);if(!e)throw"";var c=e.associatedShape.bounds();var o=c.width;var s=c.height;if(e.parents.length!==1)throw"Node not in a spanning tree.";var h=e.parents[0];if(e.treeDirection==="Undefined")e.treeDirection=h.treeDirection;if(D.isEmpty(e.children))a=new f(Math.abs(o)<p?50:o,Math.abs(s)<p?25:s);else if(e.children.length===1){switch(e.treeDirection){case"Radial":r=this.measure(e.children[0],t);i=o+this.options.radialSeparation*Math.cos(e.AngleToParent)+r.width;n=s+Math.abs(this.options.radialSeparation*Math.sin(e.AngleToParent))+r.height;break;case"Left":case"Right":switch(e.childrenLayout){case"TopAlignedWithParent":break;case"BottomAlignedWithParent":break;case"Underneath":r=this.measure(e.children[0],t);i=o+r.width+this.options.underneathHorizontalOffset;n=s+this.options.underneathVerticalTopOffset+r.height;break;case"Default":r=this.measure(e.children[0],t);i=o+this.options.horizontalSeparation+r.width;n=Math.max(s,r.height);break;default:throw"Unhandled TreeDirection in the Radial layout measuring."}break;case"Up":case"Down":switch(e.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":r=this.measure(e.children[0],t);i=Math.max(o,r.width+this.options.underneathHorizontalOffset);n=s+this.options.underneathVerticalTopOffset+r.height;break;case"Default":r=this.measure(e.children[0],t);n=s+this.options.verticalSeparation+r.height;i=Math.max(o,r.width);break;default:throw"Unhandled TreeDirection in the Down layout measuring."}break;default:throw"Unhandled TreeDirection in the layout measuring."}a=new f(i,n)}else{var l,u;switch(e.treeDirection){case"Left":case"Right":switch(e.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":i=o;n=s+this.options.underneathVerticalTopOffset;for(l=0;l<e.children.length;l++){u=e.children[l];r=this.measure(u,t);i=Math.max(i,r.width+this.options.underneathHorizontalOffset);n+=r.height+this.options.underneathVerticalSeparation}n-=this.options.underneathVerticalSeparation;break;case"Default":i=o;n=0;for(l=0;l<e.children.length;l++){u=e.children[l];r=this.measure(u,t);i=Math.max(i,o+this.options.horizontalSeparation+r.width);n+=r.height+this.options.verticalSeparation}n-=this.options.verticalSeparation;break;default:throw"Unhandled TreeDirection in the Right layout measuring."}break;case"Up":case"Down":switch(e.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":i=o;n=s+this.options.underneathVerticalTopOffset;for(l=0;l<e.children.length;l++){u=e.children[l];r=this.measure(u,t);i=Math.max(i,r.width+this.options.underneathHorizontalOffset);n+=r.height+this.options.underneathVerticalSeparation}n-=this.options.underneathVerticalSeparation;break;case"Default":i=0;n=0;for(l=0;l<e.children.length;l++){u=e.children[l];r=this.measure(u,t);i+=r.width+this.options.horizontalSeparation;n=Math.max(n,r.height+this.options.verticalSeparation+s)}i-=this.options.horizontalSeparation;break;default:throw"Unhandled TreeDirection in the Down layout measuring."}break;default:throw"Unhandled TreeDirection in the layout measuring."}a=new f(i,n)}e.SectorAngle=Math.sqrt(i*i/4+n*n/4);e.Size=a;return a},arrange:function(e,t){var i,n,c,r,a,h=e.associatedShape.bounds();var o=h.width;var f=h.height;if(D.isEmpty(e.children)){e.x=t.x;e.y=t.y;e.BoundingRectangle=new d(t.x,t.y,o,f)}else{var s,l;var u;switch(e.treeDirection){case"Left":switch(e.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":u=t;e.x=u.x;e.y=u.y;e.BoundingRectangle=new d(e.x,e.y,e.width,e.height);l=t.y+f+this.options.underneathVerticalTopOffset;for(i=0;i<r.children.length;i++){r=r.children[i];s=u.x-r.associatedShape.width-this.options.underneathHorizontalOffset;n=new g(s,l);this.arrange(r,n);l+=r.Size.height+this.options.underneathVerticalSeparation}break;case"Default":u=new g(t.x+e.Size.width-o,t.y+(e.Size.height-f)/2);e.x=u.x;e.y=u.y;e.BoundingRectangle=new d(e.x,e.y,e.width,e.height);s=u.x-this.options.horizontalSeparation;l=t.y;for(i=0;i<e.children.length;i++){r=e.children[i];n=new g(s-r.Size.width,l);this.arrange(r,n);l+=r.Size.height+this.options.verticalSeparation}break;default:throw"Unsupported TreeDirection"}break;case"Right":switch(e.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":u=t;e.x=u.x;e.y=u.y;e.BoundingRectangle=new d(e.x,e.y,e.width,e.height);s=t.x+o+this.options.underneathHorizontalOffset;l=t.y+f+this.options.underneathVerticalTopOffset;for(i=0;i<e.children.length;i++){r=e.children[i];n=new g(s,l);this.arrange(r,n);l+=r.Size.height+this.options.underneathVerticalSeparation}break;case"Default":u=new g(t.x,t.y+(e.Size.height-f)/2);e.x=u.x;e.y=u.y;e.BoundingRectangle=new d(e.x,e.y,e.width,e.height);s=t.x+o+this.options.horizontalSeparation;l=t.y;for(i=0;i<e.children.length;i++){r=e.children[i];n=new g(s,l);this.arrange(r,n);l+=r.Size.height+this.options.verticalSeparation}break;default:throw"Unsupported TreeDirection"}break;case"Up":u=new g(t.x+(e.Size.width-o)/2,t.y+e.Size.height-f);e.x=u.x;e.y=u.y;e.BoundingRectangle=new d(e.x,e.y,e.width,e.height);if(Math.abs(u.x-t.x)<p){a=0;for(i=0;i<e.children.length;i++){c=e.children[i];a+=c.Size.width+this.options.horizontalSeparation}a-=this.options.horizontalSeparation;s=t.x+(o-a)/2}else s=t.x;for(i=0;i<e.children.length;i++){r=e.children[i];l=u.y-this.options.verticalSeparation-r.Size.height;n=new g(s,l);this.arrange(r,n);s+=r.Size.width+this.options.horizontalSeparation}break;case"Down":switch(e.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":u=t;e.x=u.x;e.y=u.y;e.BoundingRectangle=new d(e.x,e.y,e.width,e.height);s=t.x+this.options.underneathHorizontalOffset;l=t.y+f+this.options.underneathVerticalTopOffset;for(i=0;i<e.children.length;i++){r=e.children[i];n=new g(s,l);this.arrange(r,n);l+=r.Size.height+this.options.underneathVerticalSeparation}break;case"Default":u=new g(t.x+(e.Size.width-o)/2,t.y);e.x=u.x;e.y=u.y;e.BoundingRectangle=new d(e.x,e.y,e.width,e.height);if(Math.abs(u.x-t.x)<p){a=0;for(i=0;i<e.children.length;i++){c=e.children[i];a+=c.Size.width+this.options.horizontalSeparation}a-=this.options.horizontalSeparation;s=t.x+(o-a)/2}else s=t.x;for(i=0;i<e.children.length;i++){r=e.children[i];l=u.y+this.options.verticalSeparation+f;n=new g(s,l);this.arrange(r,n);s+=r.Size.width+this.options.horizontalSeparation}break;default:throw"Unsupported TreeDirection"}break;case"None":break;default:throw"Unsupported TreeDirection"}}},layoutSwitch:function(){if(!this.center)return;if(D.isEmpty(this.center.children))return;var e=this.options.subtype;if(D.isUndefined(e))e="Down";var t,i,n,r;var a=this.center.children;switch(e.toLowerCase()){case"radial":case"radialtree":this.layoutRadialTree();break;case"mindmaphorizontal":case"mindmap":t=this.center.children;if(this.center.children.length===1)this.layoutRight(t);else{r=a.length/2;i=l(this.center.children,function(e){return D.indexOf(a,e)<r});n=l(this.center.children,function(e){return D.indexOf(a,e)>=r});this.layoutLeft(i);this.layoutRight(n)}break;case"mindmapvertical":t=this.center.children;if(this.center.children.length===1)this.layoutDown(t);else{r=a.length/2;i=l(this.center.children,function(e){return D.indexOf(a,e)<r});n=l(this.center.children,function(e){return D.indexOf(a,e)>=r});this.layoutUp(i);this.layoutDown(n)}break;case"right":this.layoutRight(this.center.children);break;case"left":this.layoutLeft(this.center.children);break;case"up":case"bottom":this.layoutUp(this.center.children);break;case"down":case"top":this.layoutDown(this.center.children);break;case"tipover":case"tipovertree":if(this.options.tipOverTreeStartLevel<0)throw"The tip-over level should be a positive integer.";this.tipOverTree(this.center.children,this.options.tipOverTreeStartLevel);break;case"undefined":case"none":break}}}),y=i.extend({init:function(e){var t=this;i.fn.init.call(t);if(D.isUndefined(e))throw"No diagram specified.";this.diagram=e},layout:function(e){this.transferOptions(e);var t=new u(this.diagram);this.graph=t.convert();var i=this.layoutComponents();return new c.LayoutState(this.diagram,i)},layoutComponents:function(){if(this.graph.isEmpty())return;var e=this.graph.getConnectedComponents();if(D.isEmpty(e))return;var t=new _(this.options);var i=[];for(var n=0;n<e.length;n++){var r=e[n];var a=this.getTree(r);if(!a)throw"Failed to find a spanning tree for the component.";var o=a.root;var s=a.tree;t.layout(s,o);i.push(s)}return this.gridLayoutComponents(i)},getTree:function(e){var t=null;if(this.options.roots&&this.options.roots.length>0)for(var i=0,n=e.nodes.length;i<n;i++){var r=e.nodes[i];for(var a=0;a<this.options.roots.length;a++){var o=this.options.roots[a];if(o===r.associatedShape){t=r;break}}}if(!t){t=e.root();if(!t)throw"Unable to find a root for the tree."}return this.getTreeForRoot(e,t)},getTreeForRoot:function(e,t){var i=e.getSpanningTree(t);if(D.isUndefined(i)||i.isEmpty())return null;return{tree:i,root:i.root}}}),x=i.extend({init:function(e){var t=this;i.fn.init.call(t);if(D.isUndefined(e))throw"Diagram is not specified.";this.diagram=e},layout:function(e){this.transferOptions(e);var t=new u(this.diagram);var i=t.convert(e);if(i.isEmpty())return;var n=i.getConnectedComponents();if(D.isEmpty(n))return;for(var r=0;r<n.length;r++){var a=n[r];this.layoutGraph(a,e)}var o=this.gridLayoutComponents(n);return new c.LayoutState(this.diagram,o)},_initRuntimeProperties:function(){for(var e=0;e<this.graph.nodes.length;e++){var t=this.graph.nodes[e];t.layer=-1;t.downstreamLinkCount=0;t.upstreamLinkCount=0;t.isVirtual=false;t.uBaryCenter=0;t.dBaryCenter=0;t.upstreamPriority=0;t.downstreamPriority=0;t.gridPosition=0}},_prepare:function(c){var t=[],e,i,n;var r=new M;var h=0;var a,o,s;D.forEach(c.nodes,function(e){if(e.incoming.length===0){r.set(e,0);t.push(e)}});while(t.length>0){o=t.shift();for(e=0;e<o.outgoing.length;e++){n=o.outgoing[e];s=n.target;if(r.containsKey(s))a=Math.max(r.get(o)+1,r.get(s));else a=r.get(o)+1;r.set(s,a);if(a>h)h=a;if(!v(t,s))t.push(s)}}var f=r.keys();f.sort(function(e,t){var i=r.get(e);var n=r.get(t);return D.sign(n-i)});for(var d=0;d<f.length;++d){var l=f[d];var p=Number.MAX_VALUE;if(l.outgoing.length===0)continue;for(i=0;i<l.outgoing.length;++i){n=l.outgoing[i];p=Math.min(p,r.get(n.target))}if(p>1)r.set(l,p-1)}this.layers=[];var u;for(e=0;e<h+1;e++){u=[];u.linksTo={};this.layers.push(u)}r.forEach(function(e,t){e.layer=t;this.layers[t].push(e)},this);for(i=0;i<this.layers.length;i++){u=this.layers[i];for(e=0;e<u.length;e++)u[e].gridPosition=e}},layoutGraph:function(e,t){if(D.isUndefined(e))throw"No graph given or graph analysis of the diagram failed.";if(D.isDefined(t))this.transferOptions(t);this.graph=e;e.setItemIndices();var i=e.makeAcyclic();this._initRuntimeProperties();this._prepare(e,t);this._dummify();this._optimizeCrossings();this._swapPairs();this.arrangeNodes();this._moveThingsAround();this._dedummify();D.forEach(i,function(e){if(e.points)e.points.reverse()})},setMinDist:function(e,t,i){var n=e.layer;var r=e.layerIndex;this.minDistances[n][r]=i},getMinDist:function(e,t){var i=0,n=e.layerIndex,r=t.layerIndex,a=e.layer,o=Math.min(n,r),s=Math.max(n,r);for(var l=o;l<s;++l)i+=this.minDistances[a][l];return i},placeLeftToRight:function(c){var e=new M,t,i;for(var n=0;n<this.layers.length;++n){var r=c[n];if(!r)continue;for(t=0;t<r.length;t++){i=r[t];if(!e.containsKey(i))this.placeLeft(i,e,n)}var a=Number.POSITIVE_INFINITY;for(t=0;t<r.length;t++){i=r[t];var o=this.rightSibling(i);if(o&&this.nodeLeftClass.get(o)!==n)a=Math.min(a,e.get(o)-e.get(i)-this.getMinDist(i,o))}if(a===Number.POSITIVE_INFINITY){var s=[];for(t=0;t<r.length;t++){i=r[t];var l=[];D.addRange(l,this.upNodes.get(i));D.addRange(l,this.downNodes.get(i));for(var u=0;u<l.length;u++){var h=l[u];if(this.nodeLeftClass.get(h)<n)s.push(e.get(h)-e.get(i))}}s.sort();if(s.length===0)a=0;else if(s.length%2===1)a=s[this.intDiv(s.length,2)];else a=(s[this.intDiv(s.length,2)-1]+s[this.intDiv(s.length,2)])/2}for(t=0;t<r.length;t++){i=r[t];e.set(i,e.get(i)+a)}}return e},placeRightToLeft:function(c){var e=new M,t,i;for(var n=0;n<this.layers.length;++n){var r=c[n];if(!r)continue;for(t=0;t<r.length;t++){i=r[t];if(!e.containsKey(i))this.placeRight(i,e,n)}var a=Number.NEGATIVE_INFINITY;for(t=0;t<r.length;t++){i=r[t];var o=this.leftSibling(i);if(o&&this.nodeRightClass.get(o)!==n)a=Math.max(a,e.get(o)-e.get(i)+this.getMinDist(o,i))}if(a===Number.NEGATIVE_INFINITY){var s=[];for(t=0;t<r.length;t++){i=r[t];var l=[];D.addRange(l,this.upNodes.get(i));D.addRange(l,this.downNodes.get(i));for(var u=0;u<l.length;u++){var h=l[u];if(this.nodeRightClass.get(h)<n)s.push(e.get(i)-e.get(h))}}s.sort();if(s.length===0)a=0;else if(s.length%2===1)a=s[this.intDiv(s.length,2)];else a=(s[this.intDiv(s.length,2)-1]+s[this.intDiv(s.length,2)])/2}for(t=0;t<r.length;t++){i=r[t];e.set(i,e.get(i)+a)}}return e},_getLeftWing:function(){var e={value:null};var t=this.computeClasses(e,1);this.nodeLeftClass=e.value;return t},_getRightWing:function(){var e={value:null};var t=this.computeClasses(e,-1);this.nodeRightClass=e.value;return t},computeClasses:function(c,e){var t=0,i=c.value=new M;for(var n=0;n<this.layers.length;++n){t=n;var r=this.layers[n];for(var a=e===1?0:r.length-1;a>=0&&a<r.length;a+=e){var o=r[a];if(!i.containsKey(o)){i.set(o,t);if(o.isVirtual){var s=this._nodesInLink(o);for(var l=0;l<s.length;l++){var h=s[l];i.set(h,t)}}}else t=i.get(o)}}var u=[];for(var f=0;f<this.layers.length;f++)u.push(null);i.forEach(function(e,t){if(u[t]===null)u[t]=[];u[t].push(e)});return u},_isVerticalLayout:function(){return this.options.subtype.toLowerCase()==="up"||this.options.subtype.toLowerCase()==="down"||this.options.subtype.toLowerCase()==="vertical"},_isHorizontalLayout:function(){return this.options.subtype.toLowerCase()==="right"||this.options.subtype.toLowerCase()==="left"||this.options.subtype.toLowerCase()==="horizontal"},_isIncreasingLayout:function(){return this.options.subtype.toLowerCase()==="right"||this.options.subtype.toLowerCase()==="down"},_moveThingsAround:function(){var u,e,t,i,n,r;for(e=0;e<this.layers.length;++e){i=this.layers[e];i.sort(this._gridPositionComparer)}this.minDistances=[];for(e=0;e<this.layers.length;++e){i=this.layers[e];this.minDistances[e]=[];for(n=0;n<i.length;++n){t=i[n];t.layerIndex=n;this.minDistances[e][n]=this.options.nodeDistance;if(n<i.length-1)if(this._isVerticalLayout())this.minDistances[e][n]+=(t.width+i[n+1].width)/2;else this.minDistances[e][n]+=(t.height+i[n+1].height)/2}}this.downNodes=new M;this.upNodes=new M;D.forEach(this.graph.nodes,function(e){this.downNodes.set(e,[]);this.upNodes.set(e,[])},this);D.forEach(this.graph.links,function(e){var t=e.source;var i=e.target;var n=null,r=null;if(t.layer>i.layer){n=e.source;r=e.target}else{r=e.source;n=e.target}this.downNodes.get(r).push(n);this.upNodes.get(n).push(r)},this);this.downNodes.forEachValue(function(e){e.sort(this._gridPositionComparer)},this);this.upNodes.forEachValue(function(e){e.sort(this._gridPositionComparer)},this);for(e=0;e<this.layers.length-1;++e){i=this.layers[e];for(r=0;r<i.length-1;r++){var l=i[r];if(!l.isVirtual)continue;var a=this.downNodes.get(l)[0];if(!a.isVirtual)continue;for(n=r+1;n<i.length;++n){t=i[n];if(!t.isVirtual)continue;var o=this.downNodes.get(t)[0];if(!o.isVirtual)continue;if(a.gridPosition>o.gridPosition){var h=a.gridPosition;a.gridPosition=o.gridPosition;o.gridPosition=h;var f=a.layerIndex;var d=o.layerIndex;this.layers[e+1][f]=o;this.layers[e+1][d]=a;a.layerIndex=d;o.layerIndex=f}}}}var p=this._getLeftWing();var v=this._getRightWing();var g=this.placeLeftToRight(p);var m=this.placeRightToLeft(v);var c=new M;D.forEach(this.graph.nodes,function(e){c.set(e,(g.get(e)+m.get(e))/2)});var _=new M;var y=new M;for(e=0;e<this.layers.length;++e){i=this.layers[e];var s=-1,b=-1;for(n=0;n<i.length;++n){t=i[n];_.set(t,0);y.set(t,false);if(t.isVirtual)if(s===-1)s=n;else if(s===n-1)s=n;else{b=n;_.set(i[s],0);if(c.get(t)-c.get(i[s])===this.getMinDist(i[s],t))y.set(i[s],true);else y.set(i[s],false);s=n}}}var w=[1,-1];D.forEach(w,function(e){var t=e===1?0:this.layers.length-1;for(var i=t;i>=0&&i<this.layers.length;i+=e){var n=this.layers[i];var r=this._firstVirtualNode(n);var a=null;var o=null;if(r!==-1){a=n[r];o=[];for(u=0;u<r;u++)o.push(n[u])}else{a=null;o=n}if(o.length>0){this._sequencer(c,null,a,e,o);for(u=0;u<o.length-1;++u)this.setMinDist(o[u],o[u+1],c.get(o[u+1])-c.get(o[u]));if(a)this.setMinDist(o[o.length-1],a,c.get(a)-c.get(o[o.length-1]))}while(a){var s=this.nextVirtualNode(n,a);if(!s){r=a.layerIndex;o=[];for(u=r+1;u<n.length;u++)o.push(n[u]);if(o.length>0){this._sequencer(c,a,null,e,o);for(u=0;u<o.length-1;++u)this.setMinDist(o[u],o[u+1],c.get(o[u+1])-c.get(o[u]));this.setMinDist(a,o[0],c.get(o[0])-c.get(a))}}else if(_.get(a)===e){r=a.layerIndex;var l=s.layerIndex;o=[];for(u=r+1;u<l;u++)o.push(n[u]);if(o.length>0)this._sequencer(c,a,s,e,o);y.set(a,true)}a=s}this.adjustDirections(i,e,_,y)}},this);var x=this._isIncreasingLayout()?0:this.layers.length-1;var k=function(e,t){if(t._isIncreasingLayout())return e<t.layers.length;else return e>=0};var C=this._isIncreasingLayout()?+1:-1,S=0;function T(e,t){var i=Number.MIN_VALUE;for(var n=0;n<e.length;++n){var r=e[n];if(t._isVerticalLayout())i=Math.max(i,r.height);else i=Math.max(i,r.width)}return i}for(u=x;k(u,this);u+=C){i=this.layers[u];var A=T(i,this);for(n=0;n<i.length;++n){t=i[n];if(this._isVerticalLayout()){t.x=c.get(t);t.y=S+A/2}else{t.x=S+A/2;t.y=c.get(t)}}S+=this.options.layerSeparation+A}},adjustDirections:function(e,t,c,h){if(e+t<0||e+t>=this.layers.length)return;var i=null,n=null;var r=this.layers[e+t];for(var a=0;a<r.length;++a){var o=r[a];if(o.isVirtual){var s=this.getNeighborOnLayer(o,e);if(s.isVirtual){if(i){var f=h.get(n);var d=this.layers[e];var p=n.layerIndex;var v=s.layerIndex;for(var l=p+1;l<v;++l)if(d[l].isVirtual)f=f&&h.get(d[l]);if(f){c.set(i,t);var g=i.layerIndex;var m=o.layerIndex;for(var u=g+1;u<m;++u)if(r[u].isVirtual)c.set(r[u],t)}}i=o;n=s}}}},getNeighborOnLayer:function(e,t){var i=this.upNodes.get(e)[0];if(i.layer===t)return i;i=this.downNodes.get(e)[0];if(i.layer===t)return i;return null},_sequencer:function(e,t,i,n,r){if(r.length===1)this._sequenceSingle(e,t,i,n,r[0]);if(r.length>1){var a=r.length,o=this.intDiv(a,2);this._sequencer(e,t,i,n,r.slice(0,o));this._sequencer(e,t,i,n,r.slice(o));this.combineSequences(e,t,i,n,r)}},_sequenceSingle:function(e,t,i,n,r){var a=n===-1?this.downNodes.get(r):this.upNodes.get(r);var o=a.length;if(o!==0){if(o%2===1)e.set(r,e.get(a[this.intDiv(o,2)]));else e.set(r,(e.get(a[this.intDiv(o,2)-1])+e.get(a[this.intDiv(o,2)]))/2);if(t)e.set(r,Math.max(e.get(r),e.get(t)+this.getMinDist(t,r)));if(i)e.set(r,Math.min(e.get(r),e.get(i)-this.getMinDist(r,i)))}},combineSequences:function(e,c,h,f,t){var d=t.length,i=this.intDiv(d,2);var n=[],r,a,o,s,l,u;for(r=0;r<i;++r){a=0;s=f===-1?this.downNodes.get(t[r]):this.upNodes.get(t[r]);for(o=0;o<s.length;++o){l=s[o];if(e.get(l)>=e.get(t[r]))a++;else{a--;n.push({k:e.get(l)+this.getMinDist(t[r],t[i-1]),v:2})}}n.push({k:e.get(t[r])+this.getMinDist(t[r],t[i-1]),v:a})}if(c)n.push({k:e.get(c)+this.getMinDist(c,t[i-1]),v:Number.MAX_VALUE});n.sort(this._positionDescendingComparer);var p=[];for(r=i;r<d;++r){a=0;s=f===-1?this.downNodes.get(t[r]):this.upNodes.get(t[r]);for(o=0;o<s.length;++o){l=s[o];if(e.get(l)<=e.get(t[r]))a++;else{a--;p.push({k:e.get(l)-this.getMinDist(t[r],t[i]),v:2})}}p.push({k:e.get(t[r])-this.getMinDist(t[r],t[i]),v:a})}if(h)p.push({k:e.get(h)-this.getMinDist(h,t[i]),v:Number.MAX_VALUE});p.sort(this._positionAscendingComparer);var v=0,g=0;var m=this.getMinDist(t[i-1],t[i]);while(e.get(t[i])-e.get(t[i-1])<m)if(v<g)if(n.length===0){e.set(t[i-1],e.get(t[i])-m);break}else{u=n.shift();v=v+u.v;e.set(t[i-1],u.k);e.set(t[i-1],Math.max(e.get(t[i-1]),e.get(t[i])-m))}else if(p.length===0){e.set(t[i],e.get(t[i-1])+m);break}else{u=p.shift();g=g+u.v;e.set(t[i],u.k);e.set(t[i],Math.min(e.get(t[i]),e.get(t[i-1])+m))}for(r=i-2;r>=0;r--)e.set(t[r],Math.min(e.get(t[r]),e.get(t[i-1])-this.getMinDist(t[r],t[i-1])));for(r=i+1;r<d;r++)e.set(t[r],Math.max(e.get(t[r]),e.get(t[i])+this.getMinDist(t[r],t[i])))},placeLeft:function(e,i,n){var r=Number.NEGATIVE_INFINITY;D.forEach(this._getComposite(e),function(e){var t=this.leftSibling(e);if(t&&this.nodeLeftClass.get(t)===this.nodeLeftClass.get(e)){if(!i.containsKey(t))this.placeLeft(t,i,n);r=Math.max(r,i.get(t)+this.getMinDist(t,e))}},this);if(r===Number.NEGATIVE_INFINITY)r=0;D.forEach(this._getComposite(e),function(e){i.set(e,r)})},placeRight:function(e,i,n){var r=Number.POSITIVE_INFINITY;D.forEach(this._getComposite(e),function(e){var t=this.rightSibling(e);if(t&&this.nodeRightClass.get(t)===this.nodeRightClass.get(e)){if(!i.containsKey(t))this.placeRight(t,i,n);r=Math.min(r,i.get(t)-this.getMinDist(e,t))}},this);if(r===Number.POSITIVE_INFINITY)r=0;D.forEach(this._getComposite(e),function(e){i.set(e,r)})},leftSibling:function(e){var t=this.layers[e.layer],i=e.layerIndex;return i===0?null:t[i-1]},rightSibling:function(e){var t=this.layers[e.layer];var i=e.layerIndex;return i===t.length-1?null:t[i+1]},_getComposite:function(e){return e.isVirtual?this._nodesInLink(e):[e]},arrangeNodes:function(){var e,t,i,n,r;for(t=0;t<this.layers.length;t++){n=this.layers[t];for(i=0;i<n.length;i++){r=n[i];r.upstreamPriority=r.upstreamLinkCount;r.downstreamPriority=r.downstreamLinkCount}}var a=2;for(var o=0;o<a;o++){for(e=this.layers.length-1;e>=1;e--)this.layoutLayer(false,e);for(e=0;e<this.layers.length-1;e++)this.layoutLayer(true,e)}var s=Number.MAX_VALUE;for(t=0;t<this.layers.length;t++){n=this.layers[t];for(i=0;i<n.length;i++){r=n[i];s=Math.min(s,r.gridPosition)}}if(s<0)for(t=0;t<this.layers.length;t++){n=this.layers[t];for(i=0;i<n.length;i++){r=n[i];r.gridPosition=r.gridPosition-s}}},layoutLayer:function(e,t){var i;var r;if(e)r=this.layers[i=t+1];else r=this.layers[i=t-1];var n=[];for(var a=0;a<r.length;a++)n.push(r[a]);n.sort(function(e,t){var i=(e.upstreamPriority+e.downstreamPriority)/2;var n=(t.upstreamPriority+t.downstreamPriority)/2;if(Math.abs(i-n)<1e-4)return 0;if(i<n)return 1;return-1});D.forEach(n,function(e){var t=e.gridPosition;var i=this.calcBaryCenter(e);var n=(e.upstreamPriority+e.downstreamPriority)/2;if(Math.abs(t-i)<1e-4)return;if(Math.abs(t-i)<.25+1e-4)return;if(t<i)while(t<i){if(!this.moveRight(e,r,n))break;t=e.gridPosition}else while(t>i){if(!this.moveLeft(e,r,n))break;t=e.gridPosition}},this);if(i>0)this.calcDownData(i-1);if(i<this.layers.length-1)this.calcUpData(i+1)},moveRight:function(e,t,i){var n=D.indexOf(t,e);if(n===t.length-1){e.gridPosition=e.gridPosition+.5;return true}var r=t[n+1];var a=(r.upstreamPriority+r.downstreamPriority)/2;if(r.gridPosition>e.gridPosition+1){e.gridPosition=e.gridPosition+.5;return true}if(a>i||Math.abs(a-i)<1e-4)return false;if(this.moveRight(r,t,i)){e.gridPosition=e.gridPosition+.5;return true}return false},moveLeft:function(e,t,i){var n=D.indexOf(t,e);if(n===0){e.gridPosition=e.gridPosition-.5;return true}var r=t[n-1];var a=(r.upstreamPriority+r.downstreamPriority)/2;if(r.gridPosition<e.gridPosition-1){e.gridPosition=e.gridPosition-.5;return true}if(a>i||Math.abs(a-i)<1e-4)return false;if(this.moveLeft(r,t,i)){e.gridPosition=e.gridPosition-.5;return true}return false},mapVirtualNode:function(e,t){this.nodeToLinkMap.set(e,t);if(!this.linkToNodeMap.containsKey(t))this.linkToNodeMap.set(t,[]);this.linkToNodeMap.get(t).push(e)},_nodesInLink:function(e){return this.linkToNodeMap.get(this.nodeToLinkMap.get(e))},_dummify:function(){this.linkToNodeMap=new M;this.nodeToLinkMap=new M;var e,t,i,c,h,n,r,f,d=this.graph.links.slice(0);var a=this.layers;var p=function(e,t,i){a[e].linksTo[t]=a[e].linksTo[t]||[];a[e].linksTo[t].push(i)};for(f=0;f<d.length;f++){var o=d[f];var s=o.source;var v=o.target;var l=s.layer;var u=v.layer;var g=s.gridPosition;var m=v.gridPosition;var _=(m-g)/Math.abs(u-l);var y=s;if(l-u>1){for(r=l-1;r>u;r--){i=new b;i.x=s.x;i.y=s.y;i.width=s.width/100;i.height=s.height/100;e=a[r];t=(r-u)*_+g;if(t>e.length)t=e.length;if(g>=a[l].length-1&&m>=a[u].length-1)t=e.length;else if(g===0&&m===0)t=0;i.layer=r;i.uBaryCenter=0;i.dBaryCenter=0;i.upstreamLinkCount=0;i.downstreamLinkCount=0;i.gridPosition=t;i.isVirtual=true;D.insert(e,i,t);for(h=t+1;h<e.length;h++){c=e[h];c.gridPosition=c.gridPosition+1}n=new w(y,i);n.depthOfDumminess=0;p(r-1,r,n);y=i;this.graph._addNode(i);this.graph.addLink(n);i.index=this.graph.nodes.length-1;this.mapVirtualNode(i,o)}p(u-1,u,n);o.changeSource(y);o.depthOfDumminess=l-u-1}else if(l-u<-1){for(r=l+1;r<u;r++){i=new b;i.x=s.x;i.y=s.y;i.width=s.width/100;i.height=s.height/100;e=a[r];t=(r-l)*_+g;if(t>e.length)t=e.length;if(g>=a[l].length-1&&m>=a[u].length-1)t=e.length;else if(g===0&&m===0)t=0;i.layer=r;i.uBaryCenter=0;i.dBaryCenter=0;i.upstreamLinkCount=0;i.downstreamLinkCount=0;i.gridPosition=t;i.isVirtual=true;t&=t;D.insert(e,i,t);for(h=t+1;h<e.length;h++){c=e[h];c.gridPosition=c.gridPosition+1}n=new w(y,i);n.depthOfDumminess=0;p(r-1,r,n);y=i;this.graph._addNode(i);this.graph.addLink(n);i.index=this.graph.nodes.length-1;this.mapVirtualNode(i,o)}p(u-1,u,o);o.changeSource(y);o.depthOfDumminess=u-l-1}else p(l,u,o)}},_dedummify:function(){var e=true;while(e){e=false;for(var t=0;t<this.graph.links.length;t++){var i=this.graph.links[t];if(!i.depthOfDumminess)continue;var n=[];n.unshift({x:i.target.x,y:i.target.y});n.unshift({x:i.source.x,y:i.source.y});var r=i;var a=i.depthOfDumminess;for(var o=0;o<a;o++){var s=r.source;var l=s.incoming[0];n.unshift({x:l.source.x,y:l.source.y});r=l}i.changeSource(r.source);i.depthOfDumminess=0;if(n.length>2){n.splice(0,1);n.splice(n.length-1);i.points=n}else i.points=[];e=true;break}}},_optimizeCrossings:function(){var e=-1,t;var i=3;var n=0;while(e!==0){if(n++>i)break;e=0;for(t=this.layers.length-1;t>=1;t--)e+=this.optimizeLayerCrossings(false,t);for(t=0;t<this.layers.length-1;t++)e+=this.optimizeLayerCrossings(true,t)}},calcUpData:function(e){if(e===0)return;var t=this.layers[e],i,n,r;var a=new h;var o=this.layers[e-1];for(i=0;i<o.length;i++)a.add(o[i]);for(i=0;i<t.length;i++){var s=t[i];var l=0;var u=0;for(n=0;n<s.incoming.length;n++){r=s.incoming[n];if(a.contains(r.source)){u++;l+=r.source.gridPosition}}for(n=0;n<s.outgoing.length;n++){r=s.outgoing[n];if(a.contains(r.target)){u++;l+=r.target.gridPosition}}if(u>0){s.uBaryCenter=l/u;s.upstreamLinkCount=u}else{s.uBaryCenter=i;s.upstreamLinkCount=0}}},calcDownData:function(e){if(e===this.layers.length-1)return;var t=this.layers[e],i,n,r;var a=new h;var o=this.layers[e+1];for(i=0;i<o.length;i++)a.add(o[i]);for(i=0;i<t.length;i++){var s=t[i];var l=0;var u=0;for(n=0;n<s.incoming.length;n++){r=s.incoming[n];if(a.contains(r.source)){u++;l+=r.source.gridPosition}}for(n=0;n<s.outgoing.length;n++){r=s.outgoing[n];if(a.contains(r.target)){u++;l+=r.target.gridPosition}}if(u>0){s.dBaryCenter=l/u;s.downstreamLinkCount=u}else{s.dBaryCenter=i;s.downstreamLinkCount=0}}},optimizeLayerCrossings:function(e,t){var i;var n;if(e)n=this.layers[i=t+1];else n=this.layers[i=t-1];var r=n.slice(0);if(e)this.calcUpData(i);else this.calcDownData(i);var a=this;n.sort(function(e,t){var i=a.calcBaryCenter(e),n=a.calcBaryCenter(t);if(Math.abs(i-n)<1e-4){if(e.degree()===t.degree())return a.compareByIndex(e,t);else if(e.degree()<t.degree())return 1;return-1}var r=(n-i)*1e3;if(r>0)return-1;else if(r<0)return 1;return a.compareByIndex(e,t)});var o,s=0;for(o=0;o<n.length;o++)if(n[o]!==r[o])s++;if(s>0){var l=0;for(o=0;o<n.length;o++){var u=n[o];u.gridPosition=l++}}return s},_swapPairs:function(){var c=this.options.layeredIterations;var e=0;while(true){if(e++>c)break;var t=e%4<=1;var h=e%4===1;for(var i=t?0:this.layers.length-1;t?i<=this.layers.length-1:i>=0;i+=t?1:-1){var n=this.layers[i];var f=false;var d=true;var p=0;for(var r=0;r<n.length-1;r++){var a=0;var o=0;var s=0;if(d){if(i!==0)a=this.countLinksCrossingBetweenTwoLayers(i-1,i);if(i!==this.layers.length-1)o=this.countLinksCrossingBetweenTwoLayers(i,i+1);if(t)a*=2;else o*=2;s=a+o}else s=p;if(s===0)continue;var l=n[r];var u=n[r+1];var v=l.gridPosition;var g=u.gridPosition;n[r]=u;n[r+1]=l;l.gridPosition=g;u.gridPosition=v;a=0;if(i!==0)a=this.countLinksCrossingBetweenTwoLayers(i-1,i);o=0;if(i!==this.layers.length-1)o=this.countLinksCrossingBetweenTwoLayers(i,i+1);if(t)a*=2;else o*=2;var m=a+o;var _=false;if(h)_=m>=s;else _=m>s;if(_){l=n[r];u=n[r+1];v=l.gridPosition;g=u.gridPosition;n[r]=u;n[r+1]=l;l.gridPosition=g;u.gridPosition=v;p=s;d=false}else{f=true;d=true}}if(f){if(i!==this.layers.length-1)this.calcUpData(i+1);if(i!==0)this.calcDownData(i-1)}}}},countLinksCrossingBetweenTwoLayers:function(c,e){var t=this.layers[c].linksTo[e];var i,n,r,a,o,s,l,u;var h=0;var f=t.length;for(l=0;l<f;l++){i=t[l];for(u=l+1;u<f;u++){n=t[u];if(i.target.layer===e){r=i.source;a=i.target}else{r=i.target;a=i.source}if(n.target.layer===e){o=n.source;s=n.target}else{o=n.target;s=n.source}var d=r.gridPosition;var p=a.gridPosition;var v=o.gridPosition;var g=s.gridPosition;if((d-v)*(p-g)<0)h++}}return h},calcBaryCenter:function(e){var t=e.upstreamLinkCount;var i=e.downstreamLinkCount;var n=e.uBaryCenter;var r=e.dBaryCenter;if(t>0&&i>0)return(n+r)/2;if(t>0)return n;if(i>0)return r;return 0},_gridPositionComparer:function(e,t){if(e.gridPosition<t.gridPosition)return-1;if(e.gridPosition>t.gridPosition)return 1;return 0},_positionAscendingComparer:function(e,t){return e.k<t.k?-1:e.k>t.k?1:0},_positionDescendingComparer:function(e,t){return e.k<t.k?1:e.k>t.k?-1:0},_firstVirtualNode:function(e){for(var t=0;t<e.length;t++)if(e[t].isVirtual)return t;return-1},compareByIndex:function(e,t){var i=e.index;var n=t.index;if(i<n)return 1;if(i>n)return-1;return 0},intDiv:function(e,t){return(e-e%t)/t},nextVirtualNode:function(e,t){var i=t.layerIndex;for(var n=i+1;n<e.length;++n)if(e[n].isVirtual)return e[n];return null}}),k=t.Class.extend({init:function(e,t){if(D.isUndefined(e))throw"No diagram given";this.diagram=e;this.nodeMap=new M;this.linkMap=new M;this.capture(t?t:e)},capture:function(e){var t,i,n,r,a,o,s;if(e instanceof c.Graph){for(r=0;r<e.nodes.length;r++){t=e.nodes[r];n=t.associatedShape;this.nodeMap.set(n.visual.id,new d(t.x,t.y,t.width,t.height))}for(r=0;r<e.links.length;r++){o=e.links[r];a=o.associatedConnection;this.linkMap.set(a.visual.id,o.points())}}else if(e instanceof Array){i=e;for(r=0;r<i.length;r++){t=i[r];n=t.associatedShape;if(n)this.nodeMap.set(n.visual.id,new d(t.x,t.y,t.width,t.height))}}else if(e.hasOwnProperty("links")&&e.hasOwnProperty("nodes")){i=e.nodes;s=e.links;for(r=0;r<i.length;r++){t=i[r];n=t.associatedShape;if(n)this.nodeMap.set(n.visual.id,new d(t.x,t.y,t.width,t.height))}for(r=0;r<s.length;r++){o=s[r];a=o.associatedConnection;if(a)this.linkMap.set(a.visual.id,o.points)}}else{var l=this.diagram.shapes;var u=this.diagram.connections;for(r=0;r<l.length;r++){n=l[r];this.nodeMap.set(n.visual.id,n.bounds())}for(r=0;r<u.length;r++){a=u[r];this.linkMap.set(a.visual.id,a.points())}}}});a(c,{init:function(e){t.init(e,c.ui)},SpringLayout:m,TreeLayout:y,GraphAdapter:u,LayeredLayout:x,LayoutBase:i,LayoutState:k})})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.html.base.min",["kendo.core.min"],function(){var e={id:"html.base",name:"Html.Base",category:"web",description:"",depends:["core"],features:[]},n=window.kendo.jQuery,t=void 0,r=window.kendo,i=r.Class,a=(r.html=r.html||{},i.extend({init:function(e,t){var i=this;i.element=n(e);t=t||{};delete t.name;i._initOptions(t)},options:{stylingOptions:[]},_addClasses:function(){var e=this,i=e.options,t=i.stylingOptions,n=e.wrapper.data("added-classes");t=t.map(function(e){var t;if(e==="themeColor"){t=r.cssProperties.getValidClass({widget:i.name,propName:"fillMode",value:i.fillMode});if(!t||t.length===0)return""}return r.cssProperties.getValidClass({widget:i.name,propName:e,value:i[e],fill:i.fillMode})});if(n)e.wrapper.removeClass(n.join(" "));e.wrapper.data("added-classes",t);e.wrapper.addClass(t.join(" "))},html:function(){var e=this;return e.wrapper[0].outerHTML}}));return n.extend(r.html,{HTMLBase:a}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.html.button.min",["kendo.html.base.min"],function(){var t={id:"html.button",name:"Html.Button",category:"web",description:"HTML rendering utility for Kendo UI for jQuery.",depends:["html.base"],features:[]},c=window.kendo.jQuery,i=void 0,h=window.kendo,n=h.html.HTMLBase,r="k-button",f="k-button-icon",a="k-button-text",e=function(e,t){if(arguments[0]===i||c.isPlainObject(arguments[0])){t=e;e=c("<button></button>")}return new o(e,t).html()},o=n.extend({init:function(e,t){var i=this;n.fn.init.call(i,e,t);i.wrapper=i.element.addClass(r);if(!i.element.attr("type"))i.element.attr("type",i.options.type);i._addClasses();i.iconElement();i._textElement()},options:{name:"HTMLButton",type:"button",icon:"",iconClass:"",spriteCssClass:"",imageUrl:"",size:"medium",rounded:"medium",fillMode:"solid",themeColor:"base",stylingOptions:["size","rounded","fillMode","themeColor"]},iconElement:function(){var e=this,t=e.element,i=e.options,n=i.icon,r=i.iconClass,a=i.spriteCssClass,o=i.imageUrl,s,l,u;if(a||o||n||r){u=true;t.contents().filter(function(){return!c(this).hasClass("k-sprite")&&!c(this).hasClass("k-icon")&&!c(this).hasClass("k-image")}).each(function(e,t){if(t.nodeType==1||t.nodeType==3&&h.trim(t.nodeValue).length>0)u=false})}if(u)e.element.addClass("k-icon-button");if(o){l=t.children("img.k-image").first();if(!l[0])l=c('<img alt="icon" class="k-image" />').prependTo(t);l.attr("src",o);l.addClass(f)}else if(n||r){s=t.children("span.k-icon").first();if(!s[0])s=c("<span></span>").prependTo(t);s.attr("class",n?"k-icon k-i-"+n:r);s.addClass(f)}else if(a){s=t.children("span.k-sprite").first();if(!s[0])s=c('<span class="k-sprite"></span>').prependTo(t);s.addClass(a+" "+f)}},_textElement:function(){var e=this.element;e.contents().filter(function(){return!c(this).hasClass(f)&&!c(this).hasClass("k-sprite")&&!c(this).hasClass("k-icon")&&!c(this).hasClass("k-image")}).each(function(e,t){if(t.nodeType==1||t.nodeType==3&&h.trim(t.nodeValue).length>0){if(t.nodeType===3){var i=document.createElement("span");t.parentNode.insertBefore(i,t);i.appendChild(t);t=i}t.classList.add(a)}})}});return c.extend(h.html,{renderButton:e,HTMLButton:o}),h.cssProperties.registerPrefix("HTMLButton","k-button-"),h.cssProperties.registerValues("HTMLButton",[{prop:"fillMode",values:h.cssProperties.fillModeValues.concat(["link"])},{prop:"rounded",values:h.cssProperties.roundedValues.concat([["full","full"]])}]),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.button.menu.min",["kendo.core.min","kendo.popup.min"],function(){var e={id:"button.menu",name:"ButtonMenu",category:"web",description:"The popup Menu list part of the SplitButton and the DropDownButton",depends:["core","popup"]},o=window.kendo.jQuery,i=void 0,a=window.kendo,n=a.ui.Widget,t=".kendoButtonMenu",f=a.ui,r=a.keys,d=o.extend,s=".",l="id",p="next",v="prev",u="k-disabled",g="k-hidden",m="aria-disabled",_="menu",y="menuitem",b="tabindex",w="click",x="menuClick",k="menuOpen",C="menuClose",S="keydown",c="focus",h={popup:"k-menu-popup",list:"k-group k-menu-group k-reset",listItem:"k-item k-menu-item",menuItem:"k-menu-item",itemText:"k-menu-link-text",item:"k-link k-menu-link",sprite:"k-sprite",image:"k-image",icon:"k-icon"},T={text:null,icon:null,url:null,attributes:null,enabled:true,hidden:false,id:null,imageUrl:null,spriteCssClass:null},A='#if(imageUrl){#<img alt="icon" class="'+h.image+'" src="#:imageUrl#" />#}#',M='#if(spriteCssClass){#<span class="'+h.sprite+' #:spriteCssClass#"></span>#}#',D='#if(icon){#<span class="'+h.icon+' k-i-#:icon#"></span>#}#',E='#if(text){#<span class="'+h.itemText+'">#:text#</span>#}#',I='<span class="'+h.item+'">'+A+M+D+E+"</span>",P='<a href="#:url#" class="'+h.item+'">'+A+M+D+E+"</a>";function B(e,t){var i=t===p?o.fn.next:o.fn.prev;var n=t===p?o.fn.first:o.fn.last;var r=i.call(e);var a=":kendoFocusable";if(!r.length)r=n.call(e.parent().find(s+h.menuItem));if(r.is(a)||!r.length)return r;if(r.find(a).length)return n.call(r.find(a));return B(r,t)}var O=n.extend({init:function(e,t){var i=this;n.fn.init.call(i,e,t);i.mainButton=t.mainButton;i._clickHandlers={};i._renderList();i._initPopup();i._attachEvents();i._applyCssClasses(i.list)},options:{name:"ButtonMenu",element:null,items:[],size:"medium"},events:[x,k,C],_renderList:function(){var e=this,t=e.options.items,i=e.element.addClass(h.popup),n=e.mainButton.attr(l)||a.guid(),r=o('<ul role="'+_+'"></ul>').addClass(h.list);e.list=r.appendTo(i);e.list.attr(l,n+"_buttonmenu");t.forEach(e._renderListItem.bind(e))},_renderListItem:function(e){var t=this,i,n;e=d({},T,e,{enabled:e.enable&&e.enabled});i=e.id||a.guid();n=o('<li id="'+i+'" role="'+y+'" class="'+h.listItem+'">'+t._renderItemButton(e)+"</li>");if(e.click)t._clickHandlers[i]=e.click;if(e.attributes)n.attr(e.attributes);if(e.data&&a.isFunction(e.data))n.data(e.data(e));t.list.append(n);t.enable(e.enabled,n);t._hide(e.hidden,n)},_renderItemButton:function(e){var t=this,i=t.options;if(i.itemTemplate)return a.template(i.itemTemplate)(e);if(e.url)return a.template(P)(e);else return a.template(I)(e)},_initPopup:function(){var e=this,t=e.options;e._popup=new f.Popup(e.element,d({},t.popup,{anchor:e.mainButton,isRtl:e._isRtl,toggleTarget:t.toggleTarget,copyAnchorStyles:false,animation:t.animation,open:e._popupOpenHandler.bind(e),close:e._popupCloseHandler.bind(e),activate:e._popupExpandHandler.bind(e)}))},_popupOpenHandler:function(e){var t=this;var i=t.trigger(k);if(i){e.preventDefault();return}t.list.find(s+h.menuItem).attr(b,0)},_popupCloseHandler:function(e){var t=this,i=t.trigger(C);if(i)e.preventDefault();t.list.find(s+h.menuItem).attr(b,-1)},_popupExpandHandler:function(){var e=this;e.list.find(":kendoFocusable").first().trigger(c)},adjustPopupWidth:function(e){var t=this;t.element.addClass("k-split-wrapper");t.element.css({"min-width":e})},_attachEvents:function(){var e=this;e.list.on(w+t,s+h.menuItem,e._click.bind(e)).on(S+t,s+h.menuItem,e.listItemKeydown.bind(e));e.mainButton.on(S+t,e._keydown.bind(e))},_keydown:function(e){var t=this;if(o(e.target).is(s+u)||o(e.target).parents(s+u).length)return;if(e.altKey&&e.keyCode===r.DOWN){t._popup.open();e.preventDefault();return}},listItemKeydown:function(e){var t=this,i=o(e.target);e.preventDefault();if(e.keyCode===r.ESC||e.keyCode===r.TAB||e.altKey&&e.keyCode===r.UP){t._popup.close();t.mainButton.trigger(c)}else if(e.keyCode===r.DOWN)B(i,p).trigger(c);else if(e.keyCode===r.UP)B(i,v).trigger(c);else if(!i.is(s+u)&&(e.keyCode===r.SPACEBAR||e.keyCode===r.ENTER))i.trigger(w);else if(e.keyCode===r.HOME)t.list.find(":kendoFocusable").filter(s+h.menuItem).first().trigger(c);else if(e.keyCode===r.END)t.list.find(":kendoFocusable").filter(s+h.menuItem).last().trigger(c)},_click:function(e){var t=this,i=o(e.target).closest(s+h.menuItem),n=i.attr(l);if(t._clickHandlers[n])t._clickHandlers[n](e);t.trigger(x,{id:n,target:i,type:"menu-click",originalEvent:e})},toggle:function(){this._popup.toggle()},enable:function(e,t){var i=this;if(!t||!t.length)t=i.items();else t=i.list.find(t);t.toggleClass(u,!e);if(e)t.removeAttr(m);else t.attr(m,!e)},_hide:function(e,t){var i=this;if(!t||!t.length)t=i.items();else t=i.list.find(t);t.toggleClass(g,e)},hide:function(e){this._hide(true,e)},show:function(e){this._hide(false,e)},close:function(){this._popup.close()},items:function(){return this.list.children(s+h.menuItem)},destroyPopup:function(){var e=this;if(e._popup){e._popup.destroy();e._popup=null;e.list.off(t);e.list.remove();e.list=null}},destroy:function(){var e=this;delete e._clickHandlers;e.destroyPopup();e.mainButton.off(t);n.fn.destroy.call(e)}});return a.cssProperties.registerPrefix("ButtonMenu","k-menu-group-"),f.plugin(O),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.splitbutton.min",["kendo.html.button.min","kendo.button.menu.min"],function(){var e={id:"splitbutton",name:"SplitButton",category:"web",description:"The SplitButton allows the user to execute a default action which is bound to a Button or to choose a predefined action from a drop-down list.",depends:["button.menu","html.button"]},a=window.kendo.jQuery,f=void 0,n=window.kendo,r=n.ui.Widget,t=".kendoSplitButton",i=n.ui,o=a.extend,d=n.html,p=n._outerWidth,v=n.keys,g=".",s="id",m="aria-haspopup",_="aria-disabled",y="aria-controls",b="aria-label",l="aria-expanded",u="disabled",w="k-disabled",x="k-focus",c="click",k="keydown",C="open",S="close",h="focus",T="blur",A={widget:"k-split-button k-button-group"},M=r.extend({init:function(e,t){var i=this;t.enabled=t.enabled!==false&&!a(e).prop(u);r.fn.init.call(i,e,t);i._wrapper();i._renderButtons();i._renderMenu();i._enable(i.options.enabled);i._aria();i._attachEvents();n.notify(i);i._applyCssClasses()},options:{name:"SplitButton",enabled:true,items:[],rounded:"medium",size:"medium",fillMode:"solid",themeColor:"base",icon:null,popup:null,arrowIcon:"arrow-s",messages:{labelSuffix:"splitbutton"}},events:[c,C,S],_wrapper:function(){var e=this,t=e.element.attr(s)||n.guid(),i=t+"_wrapper";e.wrapper=e.element.wrap('<div id="'+i+'" class="'+A.widget+'"></div>').parent(".k-split-button");e.arrowButton=a('<button tabindex="-1" aria-label="arrow-button" class="k-split-button-arrow"></button>').appendTo(e.wrapper)},_applyCssClasses:function(){var e=this;e.wrapper.addClass(e._getAppearanceClasses())},_clearCssClasses:function(){var e=this;e.wrapper.removeClass(e._getAppearanceClasses())},_getAppearanceClasses:function(){var e=this,t=e.__proto__.options.name,i=n.cssProperties.getValidClass({widget:t,propName:"rounded",value:e.options.rounded});return i},_renderButtons:function(){var e=this;e._mainButton();e._arrowButton()},_mainButton:function(){var e=this,t=o({},e.options,{type:e.element.attr("type")||"button"});delete t.click;d.renderButton(e.element,t)},_arrowButton:function(){var e=this,t=o({},e.options,{type:"button",icon:e.options.arrowIcon});delete t.text;delete t.imageUrl;delete t.click;d.renderButton(e.arrowButton,t)},_aria:function(){var e=this,t=e.element,i=e.menu;t.attr(m,i?"menu":null);t.attr(l,i?false:null);t.attr(y,i?i.list.attr(s):null);if(!t.attr(b))t.attr(b,t.text()+" "+e.options.messages.labelSuffix)},_renderMenu:function(){var e=this,t=o({},e.options),i=a("<div></div>");delete t.click;delete t.name;if(!t.items.length)return;e.menu=i.appendTo(e.wrapper).kendoButtonMenu(o({mainButton:e.element,toggleTarget:e.arrowButton,menuOpen:e.menuOpenHandler.bind(e),menuClose:e.menuCloseHandler.bind(e),menuClick:e._click.bind(e)},t)).data("kendoButtonMenu")},menuOpenHandler:function(e){var t=this,i=p(t.wrapper);var n=t.trigger(C,{target:t.element});if(n){e.preventDefault();return}e.sender.adjustPopupWidth(i);t.element.attr(l,true)},menuCloseHandler:function(e){var t=this,i=t.trigger(S,{target:t.element});if(i){e.preventDefault();return}t.element.attr(l,false);t.element.trigger(h)},_attachEvents:function(){var e=this;e.element.on(c+t,e._click.bind(e));e.element.on(k+t,e._keydown.bind(e));e.element.on(h+t,e._focus.bind(e));e.element.on(T+t,e._blur.bind(e))},_focus:function(){this.wrapper.addClass(x)},_blur:function(){this.wrapper.removeClass(x)},_click:function(e){var t=this,i=a(e.target).closest(".k-button"),n=i.attr(s),r=e;if(e.type==="menu-click"){n=e.id;i=e.target;r=e.originalEvent}t.menu.close();t.trigger(c,{id:n,target:i,originalEvent:r})},_keydown:function(e){var t=this;if(t.element.is(g+w)&&(e.keyCode===v.ENTER||e.keyCode===v.SPACEBAR))e.preventDefault()},focus:function(){var e=this;e.element.trigger(h)},_enable:function(e,t){this.element.add(this.arrowButton).toggleClass(w,!e);if(e)this.element.removeAttr(_);else this.element.attr(_,!e);if(!t)this.element.attr(u,!e);this.arrowButton.attr(u,!e)},enable:function(e,t,i){var n=this;if(e===f)e=true;if(t&&t.length){n.menu.enable(e,t);return}n.options.enabled=e;n._enable(e,i);n.menu.enable(e)},hide:function(e){var t=this;if(e&&e.length)t.menu.hide(e)},show:function(e){var t=this;if(e&&e.length)t.menu.show(e)},open:function(){this.menu._popup.open()},close:function(){this.menu._popup.close()},items:function(){return this.menu.items()},setOptions:function(e){var t=this;r.fn.setOptions.call(t,e);if(e.popup||e.items||e.size){t.menu.destroy();t._renderMenu()}t._renderButtons();t._aria()},destroy:function(){var e=this;e.menu.destroy();e.element.off(t);r.fn.destroy.call(e)}});return n.cssProperties.registerPrefix("SplitButton","k-splitbutton-"),n.cssProperties.registerValues("SplitButton",[{prop:"rounded",values:n.cssProperties.roundedValues.concat([["full","full"]])}]),i.plugin(M),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.dropdownbutton.min",["kendo.html.button.min","kendo.button.menu.min"],function(){var e={id:"dropdownbutton",name:"DropDownButton",category:"web",description:"The DropDownButton allows the user to execute an action from a drop-down list.",depends:["button.menu","html.button"]},n=window.kendo.jQuery,h=void 0,r=window.kendo,a=r.ui.Widget,t=".kendoDropDownButton",f=r.ui,i=r.keys,o=n.extend,d=r.html,p=r._outerWidth,v=".",g="id",m="aria-haspopup",s="aria-disabled",_="aria-controls",l="aria-label",u="aria-expanded",c="disabled",y="k-disabled",b="click",w="keydown",x="open",k="close",C="focus",S={menuButton:"k-menu-button"},T=a.extend({init:function(e,t){var i=this;t.enabled=t.enabled!==false&&!n(e).prop(c);a.fn.init.call(i,e,t);i.wrapper=i.element;i._mainButton();i._renderMenu();i._enable(i.options.enabled);i._aria();i._attachEvents();r.notify(i);i._applyCssClasses()},options:{name:"DropDownButton",enabled:true,items:[],rounded:"medium",size:"medium",fillMode:"solid",themeColor:"base",icon:null,popup:null,messages:{labelSuffix:"dropdownbutton"}},events:[b,x,k],_mainButton:function(){var e=this,t=o({},e.options,{type:e.element.attr("type")||"button"});delete t.click;e.element.addClass(S.menuButton);d.renderButton(e.element,t)},_aria:function(){var e=this,t=e.element,i=e.menu;t.attr(m,i?"menu":null);t.attr(u,i?false:null);t.attr(_,i?i.list.attr(g):null);if(!t.attr(l))t.attr(l,t.text()+" "+e.options.messages.labelSuffix)},_renderMenu:function(){var e=this,t=o({},e.options),i=n("<div></div>");delete t.click;delete t.name;if(!t.items.length)return;e.menu=i.appendTo(document.body).kendoButtonMenu(o({mainButton:e.element,toggleTarget:e.element,menuOpen:e.menuOpenHandler.bind(e),menuClose:e.menuCloseHandler.bind(e),menuClick:e._click.bind(e)},t)).data("kendoButtonMenu")},menuOpenHandler:function(e){var t=this,i=p(t.element);var n=t.trigger(x,{target:t.element});if(n){e.preventDefault();return}e.sender.adjustPopupWidth(i);t.element.attr(u,true)},menuCloseHandler:function(e){var t=this,i=t.trigger(k,{target:t.element});if(i){e.preventDefault();return}t.element.attr(u,false);t.element.trigger(C)},_attachEvents:function(){var e=this;e.element.on(w+t,e._keydown.bind(e))},_click:function(e){var t=this,i=e.id,n=e.target,r=e.originalEvent;t.menu.close();t.trigger(b,{id:i,target:n,originalEvent:r})},_keydown:function(e){var t=this;if(t.element.is(v+y)&&(e.keyCode===i.ENTER||e.keyCode===i.SPACEBAR))e.preventDefault()},focus:function(){var e=this;e.element.trigger(C)},_enable:function(e,t){this.element.toggleClass(y,!e);if(e)this.element.removeAttr(s);else this.element.attr(s,!e);if(!t)this.element.attr(c,!e)},enable:function(e,t,i){var n=this;if(e===h)e=true;if(t&&t.length){n.menu.enable(e,t);return}n.options.enabled=e;n._enable(e,i);n.menu.enable(e)},hide:function(e){var t=this;if(e&&e.length)t.menu.hide(e)},show:function(e){var t=this;if(e&&e.length)t.menu.show(e)},open:function(){this.menu._popup.open()},close:function(){this.menu._popup.close()},items:function(){return this.menu.items()},setOptions:function(e){var t=this;a.fn.setOptions.call(t,e);if(e.popup||e.items||e.size){t.menu.destroy();t._renderMenu()}t._mainButton();t._aria()},destroy:function(){var e=this;e.menu.destroy();e.element.off(t);a.fn.destroy.call(e)}});return f.plugin(T),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.toolbar.min",["kendo.core.min","kendo.userevents.min","kendo.popup.min","kendo.html.button.min","kendo.splitbutton.min","kendo.dropdownbutton.min"],function(){var t={id:"toolbar",name:"ToolBar",category:"web",description:"The ToolBar widget displays one or more command buttons divided into groups.",depends:["core","html.button","splitbutton","dropdownbutton"]},f=window.kendo.jQuery,a=void 0,d=window.kendo,i=d.Class,n=d.ui,r=n.Widget,l=d.isFunction,p=d.keys,o=d._outerWidth,s=".kendoToolBar",u="k-toolbar",c="k-button",h="k-overflow-button",w="k-toggle-button",x="k-button-group",k="k-split-button",C="k-menu-button",S="k-separator",T="k-spacer",A="k-popup",M="k-toolbar-resizable",D="k-selected",E="k-disabled",I="k-hidden",P="k-force-hidden",B="k-group-start",O="k-group-end",z="k-menu-link",L="k-menu-item",R="k-overflow-group",F="k-overflow-hidden",V="k-overflow-anchor",N="k-overflow-container",H="k-overflow-wrapper",U="k-toolbar-first-visible",j="k-toolbar-last-visible",G="k-split-button-arrow",W="k-toolbar-item",q="k-dropdownlist",Y="k-colorpicker",$="k-input-button",X="k-focus",K="aria-disabled",Q="aria-pressed",Z="aria-label",J="click",ee="toggle",te="open",ie="close",v="focus",ne="keydown",re="tap",ae="spacer",oe="both",se="primary",le="href",ue="role",g="button",ce="splitButton",he="dropDownButton",fe="separator",de="overflow",pe="next",ve="prev",m="tabindex",ge="template",me="input",_e="select",ye="checkbox",be="hidden",we="group",_=":kendoFocusable",xe="overflowOpen",ke="overflowClose",Ce="never",Se="auto",Te="always",Ae="_optionlist",Me=d.attr("uid"),De='<li class="k-menu-item k-item">',Ee='<span tabindex="0" class="k-link k-menu-link">'+'<span class="k-menu-link-text">#:text#</span>'+"</span>",Ie='<a href="#:href#" class="k-link k-menu-link">'+'<span class="k-menu-link-text">#:text#</span>'+"</a>",Pe=" ",Be="",Oe="textItem",y=".",b=",",ze="id",Le="uid",Re=(d.toolbar={},{overflowAnchor:'<div tabindex="0" class="k-overflow-anchor k-button k-button-md k-rounded-md k-button-flat k-button-flat-base" title="More tools" role="button"></div>',overflowContainer:'<ul class="k-overflow-container k-list-container"></ul>'}),e=(d.toolbar.registerComponent=function(e,t,i){Re[e]={toolbar:t,overflow:i}},d.Class.extend({addOverflowAttr:function(){this.element.attr(d.attr(de),this.options.overflow||Se)},addUidAttr:function(){this.element.attr(Me,this.options.uid)},addIdAttr:function(){if(this.options.id)this.element.attr(ze,this.options.id)},addOverflowIdAttr:function(){if(this.options.id)this.element.attr(ze,this.options.id+"_overflow")},attributes:function(){var e=this.options.attributes,t;if(e){if(e.class){t=e.class;this.element.addClass(t);delete e.class}this.element.attr(e);e.class=t}},show:function(){this.element.removeClass(I);this.element.removeClass(P);this.options.hidden=false},hide:function(){this.element.addClass(I);this.element.addClass(P);if(this.overflow&&this.overflowHidden)this.overflowHidden();this.options.hidden=true},remove:function(){this.element.remove()},enable:function(e){if(e===a)e=true;this.element.toggleClass(E,!e);this.element.attr(K,!e);this.options.enable=e},twin:function(){var e=this.element.attr(Me);if(this.overflow&&this.options.splitContainerId)return f("#"+this.options.splitContainerId).find("["+Me+"='"+e+"']").data(this.options.type);else if(this.overflow)return this.toolbar.element.find("["+Me+"='"+e+"']").data(this.options.type);else if(this.toolbar.options.resizable)return this.toolbar.popup.element.find("["+Me+"='"+e+"']").data(this.options.type)}})),Fe=(d.toolbar.Item=e).extend({init:function(e,t){this.options=f.extend({},this.options,e);this.toolbar=t}}),Ve=(d.toolbar.BareItem=Fe,e.extend({init:function(e,t){var i=e.useButtonTag?f("<button></button>"):f('<a role="button" href></a>');this.element=i;this.options=f.extend({},this.options,e);this.toolbar=t;this.attributes();if(e.primary)this.options.themeColor=se;if(e.togglable){i.addClass(w);this.toggle(e.selected)}if(e.url!==a&&!e.useButtonTag){i.attr(le,e.url);if(e.mobile)i.attr(d.attr(ue),g)}if(e.group){i.attr(d.attr(we),e.group);this.group=this.toolbar.addToGroup(this,e.group)}if(!e.togglable&&e.click&&l(e.click))this.clickHandler=e.click;if(e.togglable&&e.toggle&&l(e.toggle))this.toggleHandler=e.toggle},options:{showIcon:oe,showText:oe},toggle:function(e,t){e=!!e;if(this.group&&e)this.group.select(this);else if(!this.group)this.select(e);if(t&&this.twin())this.twin().toggle(e)},getParentGroup:function(){if(this.options.isChild)return this.element.closest(y+x).data("buttonGroup")}})),Ne=(d.toolbar.Button=Ve).extend({init:function(e,t){Ve.fn.init.call(this,e,t);var i=this.element;e=this.options;i.addClass(c);this.addIdAttr();if(e.align)i.addClass("k-align-"+e.align);if(!!e.text&&(e.showText=="toolbar"||e.showText==oe))if(e.mobile)i.html('<span class="km-text">'+e.text+"</span>");else i.html(e.text);else if(!!e.text)i.attr(Z,e.text);if(e.icon||e.spriteCssClass||e.imageUrl)if(e.showIcon!=="toolbar"&&e.showIcon!==oe){e.icon=null;e.spriteCssClass=null;e.imageUrl=null}d.html.renderButton(i,e);this.addUidAttr();this.addOverflowAttr();this.enable(e.enable);if(e.hidden)this.hide();this.element.data({type:g,button:this})},select:function(e){if(e===a)e=false;if(this.options.togglable)this.element.attr(Q,e);this.element.toggleClass(D,e);this.options.selected=e}}),He=(d.toolbar.ToolBarButton=Ne,Ve.extend({init:function(e,t){this.overflow=true;Ve.fn.init.call(this,f.extend({},e),t);var i=this.element;e=this.options;if(!!e.text&&(e.showText==de||e.showText==oe))if(e.mobile)i.html('<span class="km-text">'+e.text+"</span>");else i.html(e.text);else if(!!e.text)i.attr(Z,e.text);if(e.icon||e.spriteCssClass||e.imageUrl)if(e.showIcon!==de&&e.showIcon!==oe){e.icon=null;e.spriteCssClass=null;e.imageUrl=null}d.html.renderButton(i,e);if(!e.isChild)this._wrap();this.addOverflowIdAttr();this.attributes();this.addUidAttr();this.addOverflowAttr();this.enable(e.enable);i.addClass(h+Pe+c);if(e.hidden)this.hide();if(e.togglable)this.toggle(e.selected);this.element.data({type:g,button:this})},_wrap:function(){this.element=this.element.wrap(De).parent()},overflowHidden:function(){this.element.addClass(F)},select:function(e){if(e===a)e=false;if(this.options.isChild)this.element.toggleClass(D,e);else this.element.find(y+c).toggleClass(D,e);this.options.selected=e}})),Ue=(d.toolbar.OverflowButton=He,d.toolbar.registerComponent(g,Ne,He),e.extend({createButtons:function(e){var t=this.options;var i=t.buttons||[];var n;for(var r=0;r<i.length;r++){if(!i[r].uid)i[r].uid=d.guid();n=new e(f.extend({mobile:t.mobile,isChild:true,type:g},i[r]),this.toolbar);n.element.appendTo(this.element)}},refresh:function(){this.element.children().filter(":not('."+I+"')").first().addClass(B);this.element.children().filter(":not('."+I+"')").last().addClass(O)}})),je=(d.toolbar.ButtonGroup=Ue).extend({init:function(e,t){var i=this.element=f("<div></div>");this.options=e;this.toolbar=t;this.addIdAttr();if(e.align)i.addClass("k-align-"+e.align);this.createButtons(Ne);this.attributes();this.addUidAttr();this.addOverflowAttr();this.refresh();i.addClass(x);if(e.hidden)this.hide();this.element.data({type:"buttonGroup",buttonGroup:this})}}),Ge=(d.toolbar.ToolBarButtonGroup=je,Ue.extend({init:function(e,t){var i=this.element=f("<li></li>");this.options=e;this.toolbar=t;this.overflow=true;this.addOverflowIdAttr();this.createButtons(He);this.attributes();this.addUidAttr();this.addOverflowAttr();this.refresh();i.addClass((e.mobile?Be:x)+Pe+R);this.element.data({type:"buttonGroup",buttonGroup:this})},overflowHidden:function(){this.element.addClass(F)}})),We=(d.toolbar.OverflowButtonGroup=Ge,d.toolbar.registerComponent("buttonGroup",je,Ge),Ne.extend({init:function(e,t){var i,n,r;e=this.options=f.extend({},this.options,e);if(e.url!==a)i=f(d.template(Ie)({href:e.url,text:e.text}));else i=f(d.template(Ee)({text:e.text}));this.element=i;this.toolbar=t;if(e.click&&l(e.click))this.clickHandler=e.click;if(e.togglable&&e.toggle&&l(e.toggle))this.toggleHandler=e.toggle;if(e.imageUrl){n=f('<img alt="icon" class="k-image" />').prependTo(i);n.attr("src",e.imageUrl)}else if(e.icon){r=f("<span></span>").prependTo(i);r.attr("class","k-icon k-i-"+e.icon)}else if(e.spriteCssClass){r=f('<span class="k-sprite"></span>').prependTo(i);r.addClass(e.spriteCssClass)}this.addIdAttr();this.addUidAttr();this.addOverflowAttr();this.attributes();this.enable(e.enable);if(e.group){i.attr(d.attr(we),e.group);this.group=this.toolbar.addToGroup(this,e.group)}if(e.hidden)this.hide();this.element.data({type:g,button:this})}})),qe=(d.toolbar.ToolBarMenuButton=We,e.extend({init:function(e,t){var i=this;i.options=f.extend({id:e.id||e.uid,enable:true},e,{togglable:false});if(e.primary)i.options.themeColor=se;if(e.showIcon===de)i.options.icon=null;if(e.showText===de)i.options.text="";i.toolbar=t;i.splitButton=new n.SplitButton(f("<button id='"+i.options.id+"'>"+i.options.text+"</button>"),f.extend({},i.options,{items:i._extend(e.menuButtons)}),t.options);i.element=i.splitButton.wrapper;i.splitButton.bind(J,t._buttonClick.bind(t));i.splitButton.bind(ie,i._close.bind(i));i.splitButton.bind(te,i._open.bind(i));i.splitButton.element.data({type:ce,button:i,splitButton:i});i.splitButton.wrapper.data({type:ce,button:i,splitButton:i});i.addOverflowAttr();i.addUidAttr();i.attributes();i.addMenuAttributes();if(i.options.enable===false)i.enable(this.options.enable);if(i.options.hidden)i.hide()},_open:function(e){var t=this;var i=t.toolbar.trigger(te,{target:t.element});if(i)e.preventDefault()},_close:function(e){var t=this;var i=t.toolbar.trigger(ie,{target:t.element});if(i)e.preventDefault();t.splitButton.element.trigger(v)},_extend:function(e){var i=this;return e.map(function(e){var t=new Fe(e,i.toolbar);return f.extend({},e,{togglable:false,data:function(){return{type:g,button:t,splitButton:i}}})})},addMenuAttributes:function(){var e=this,t=e.splitButton.items(),i;t.each(function(e,t){t=f(t);i=t.data(g);i.element=t;i.options=f.extend({type:g,enable:true},i.options);i.addOverflowAttr();i.addUidAttr()})},remove:function(){var e=this.splitButton.wrapper;this.splitButton.destroy();e.remove()},enable:function(e,t){this.splitButton.enable(e,t,true);if(this.twin())this.twin().enable(e)},attributes:function(){var e=this,t=e.splitButton.element,i=this.options.attributes,n;if(i){if(i.class){n=i.class;t.addClass(n);delete i.class}t.attr(i);i.class=n}}})),Ye=(d.toolbar.ToolBarSplitButton=qe,e.extend({init:function(e,t){var i=this.element=f('<li class="'+k+'"></li>'),n=e.menuButtons,r,a;this.options=f.extend({},e,{togglable:false});this.toolbar=t;this.overflow=true;a=(e.id||e.uid)+Ae;this.mainButton=new He(f.extend({isChild:true},e,{togglable:false}));this.mainButton.element.appendTo(i);for(var o=0;o<n.length;o++){r=new He(f.extend({mobile:e.mobile,type:g,splitContainerId:a,isChild:true},n[o],{click:e.click}),this.toolbar);r.element.appendTo(i)}this.addUidAttr();this.addOverflowAttr();this.mainButton.main=true;if(this.options.enable===false)this.enable(this.options.enable);i.data({type:ce,splitButton:this})},enable:function(e){var t=this.element.add(this.element.find(y+h));if(e===a)e=true;t.toggleClass(E,!e);t.attr(K,!e);this.options.enable=e},overflowHidden:function(){this.element.addClass(F)}})),$e=(d.toolbar.OverflowSplitButton=Ye,d.toolbar.registerComponent(ce,qe,Ye),e.extend({init:function(e,t){var i=this;i.options=f.extend({id:e.id||e.uid,enable:true},e,{togglable:false});if(e.primary)i.options.themeColor=se;if(e.showIcon===de)i.options.icon=null;if(e.showText===de)i.options.text="";i.toolbar=t;i.dropDownButton=new n.DropDownButton(f("<button id='"+i.options.id+"'>"+i.options.text+"</button>"),f.extend({},i.options,{items:i._extend(e.menuButtons)}),t.options);i.element=i.dropDownButton.element;i.dropDownButton.bind(J,t._buttonClick.bind(t));i.dropDownButton.bind(ie,i._close.bind(i));i.dropDownButton.bind(te,i._open.bind(i));i.dropDownButton.element.data({type:he,button:i,dropDownButton:i});i.addOverflowAttr();i.addUidAttr();i.attributes();i.addMenuAttributes();if(i.options.enable===false)i.enable(this.options.enable);if(i.options.hidden)i.hide()},_open:function(e){var t=this;var i=t.toolbar.trigger(te,{target:t.element});if(i)e.preventDefault()},_close:function(e){var t=this;var i=t.toolbar.trigger(ie,{target:t.element});if(i)e.preventDefault();t.dropDownButton.element.trigger(v)},_extend:function(e){var i=this;return e.map(function(e){var t=new Fe(e,i.toolbar);return f.extend({},e,{data:function(){return{type:g,button:t,dropDownButton:i}}})})},addMenuAttributes:function(){var e=this,t=e.dropDownButton.items(),i;t.each(function(e,t){t=f(t);i=t.data(g);i.element=t;i.options=f.extend({type:g,enable:true},i.options);i.addOverflowAttr();i.addUidAttr()})},remove:function(){var e=this.dropDownButton.element;this.dropDownButton.destroy();e.remove()},enable:function(e,t){this.dropDownButton.enable(e,t,true);if(this.twin())this.twin().enable(e)},attributes:function(){var e=this,t=e.element,i=this.options.attributes,n;if(i){if(i.class){n=i.class;t.addClass(n);delete i.class}t.attr(i);i.class=n}}})),Xe=(d.toolbar.ToolBarSplitButton=qe,e.extend({init:function(e,t){var i=this.element=f("<span></span>");this.element=i;this.options=e;this.toolbar=t;this.overflow=true;this.attributes();this.addUidAttr();this.addOverflowIdAttr();if(e.icon&&(!e.showIcon||e.showIcon!=="toolbar"))i.append('<span class="k-icon k-i-'+e.icon+'"></span>');if(e.showText!=="toolbar")i.append("<span>"+this.options.text+"</span>");i.data({type:Oe,textItem:this})},overflowHidden:function(){this.element.addClass(F)}})),Ke=e.extend({init:function(e,t){var i=this.element=f('<li class="'+k+" "+C+'"></li>'),n=e.menuButtons,r,a;this.options=f.extend({},e,{togglable:false});this.toolbar=t;this.overflow=true;a=(e.id||e.uid)+Ae;this.mainButton=new Xe(f.extend({isChild:true},e,{togglable:false}));this.mainButton.element.appendTo(i);for(var o=0;o<n.length;o++){r=new He(f.extend({mobile:e.mobile,type:g,splitContainerId:a,isChild:true},n[o],{click:e.click}),this.toolbar);r.element.appendTo(i)}this.addUidAttr();this.addOverflowAttr();this.mainButton.main=true;if(this.options.enable===false)this.enable(this.options.enable);i.data({type:he,dropDownButton:this})},enable:function(e){var t=this.element.add(this.element.find(y+h));if(e===a)e=true;t.toggleClass(E,!e);t.attr(K,!e);this.options.enable=e},overflowHidden:function(){this.element.addClass(F)}}),Qe=(d.toolbar.OverflowSplitButton=Ke,d.toolbar.registerComponent(he,$e,Ke),e.extend({init:function(e,t){var i=this.element=f("<div>&nbsp;</div>");this.element=i;this.options=e;this.toolbar=t;this.attributes();this.addIdAttr();this.addUidAttr();this.addOverflowAttr();i.addClass(S);i.attr(ue,fe);i.data({type:fe,separator:this})}})),Ze=e.extend({init:function(e,t){var i=this.element=f("<li>&nbsp;</li>");this.element=i;this.options=e;this.toolbar=t;this.overflow=true;this.attributes();this.addUidAttr();this.addOverflowIdAttr();i.addClass(S);i.attr(ue,fe);i.data({type:fe,separator:this})},overflowHidden:function(){this.element.addClass(F)}}),Je=(d.toolbar.registerComponent("separator",Qe,Ze),e.extend({init:function(e,t){var i=this.element=f("<div>&nbsp;</div>");this.element=i;this.options=e;this.toolbar=t;i.addClass(T);i.data({type:ae});this.addOverflowAttr()}})),et=(d.toolbar.registerComponent(ae,Je),e.extend({init:function(e,t,i){var n=l(e)?e(t):e;if(!(n instanceof jQuery))n=f("<div class='k-toolbar-item' aria-keyshortcuts='Enter'></div>").html(n);else n=n.wrap("<div class='k-toolbar-item' aria-keyshortcuts='Enter'></div>").parent();this.element=n;this.options=t;this.options.type=t.type||ge;this.toolbar=i;this.attributes();this.addUidAttr();this.addIdAttr();this.addOverflowAttr();if(t.hidden)this.hide();n.data({type:ge,template:this})}})),tt=(d.toolbar.TemplateItem=et,e.extend({init:function(e,t,i){var n=l(e)?f(e(t)):f(e);if(!(n instanceof jQuery))n=f("<li></li>").html(n);else n=n.wrap("<li></li>").parent();this.element=n;this.options=t;this.options.type=ge;this.toolbar=i;this.overflow=true;this.attributes();this.addUidAttr();this.addOverflowIdAttr();this.addOverflowAttr();n.data({type:ge,template:this})},overflowHidden:function(){this.element.addClass(F)}}));function it(e){if(!e.target.is(".k-toggle-button"))e.target.toggleClass(D,e.type=="press")}function nt(e){e=f(e);return e.hasClass("km-actionsheet")?e.closest(".km-popup-wrapper"):e.addClass("km-widget km-actionsheet").wrap('<div class="km-actionsheet-wrapper km-actionsheet-tablet km-widget km-popup"></div>').parent().wrap('<div class="km-popup-wrapper k-popup"></div>').parent()}function rt(e){if(f(e.target).closest("a.k-button").length)e.preventDefault()}function at(e,t){var i=t===pe?f.fn.next:f.fn.prev;var n=t===pe?f.fn.first:f.fn.last;var r=i.call(e);if(!r.length&&e.is(y+V))return e;if(r.is(_)||!r.length)return r;if(r.find(_).length)return n.call(r.find(_));return at(r,t)}d.toolbar.OverflowTemplateItem=tt;var ot=i.extend({init:function(e){this.name=e;this.buttons=[]},add:function(e){this.buttons[this.buttons.length]=e},remove:function(e){var t=f.inArray(e,this.buttons);this.buttons.splice(t,1)},select:function(e){var t;for(var i=0;i<this.buttons.length;i++){t=this.buttons[i];t.select(false)}e.select(true);if(e.twin())e.twin().select(true)}}),st=r.extend({init:function(e,t){var i=this;r.fn.init.call(i,e,t);t=i.options;e=i.wrapper=i.element;e.addClass(u+" k-widget");e.attr(ue,"toolbar");this.uid=d.guid();this._isRtl=d.support.isRtl(e);this._groups={};e.attr(Me,this.uid);i.isMobile=typeof t.mobile==="boolean"?t.mobile:i.element.closest(".km-root")[0];i.animation=i.isMobile?{open:{effects:"fade"}}:{};if(i.isMobile){e.addClass("km-widget");c="km-button";x="km-buttongroup";D="km-state-active";E="km-state-disabled"}if(t.resizable){i._renderOverflow();e.addClass(M);i.overflowUserEvents=new d.UserEvents(i.element,{threshold:5,allowSelection:true,filter:y+V,tap:i._toggleOverflow.bind(i)});i._resizeHandler=d.onResize(function(){i.resize()})}else i.popup={element:f([])};if(t.items&&t.items.length){for(var n=0;n<t.items.length;n++)i.add(t.items[n]);if(t.resizable)i._shrink(i.element.innerWidth())}i.userEvents=new d.UserEvents(document.documentElement,{threshold:5,allowSelection:true,filter:"["+Me+"="+i.uid+"] a."+c+b+Pe+"["+Me+"="+i.uid+"] ."+V+b+Pe+"["+Me+"="+i.uid+"] ."+G+b+Pe+"["+Me+"="+i.uid+"] ."+W+b+Pe+"["+Me+"="+i.uid+"] ."+C,tap:i._buttonClick.bind(i),press:it,release:it});i.element.on(J+s,"a.k-button",rt).on(ne+s,i._keydown.bind(i)).on("focusin"+s,i._focusIn.bind(i)).on("focusout"+s,i._focusOut.bind(i));if(i.options.resizable)i.popup.element.on(J+s,+"a.k-button",rt);if(t.resizable){i.overflowAnchor.appendTo(i.wrapper);this._toggleOverflowAnchor()}i._tabIndex();d.notify(i)},events:[J,ee,te,ie,xe,ke],options:{name:"ToolBar",items:[],resizable:true,mobile:null,navigateOnTab:false},addToGroup:function(e,t){var i;if(!this._groups[t])i=this._groups[t]=new ot;else i=this._groups[t];i.add(e);return i},destroy:function(){var e=this;e.destroySplitButtons();e.destroyDropDownButtons();e.element.off(s,"a.k-button");e.userEvents.destroy();if(e.options.resizable){d.unbindResize(e._resizeHandler);e.overflowUserEvents.destroy();e.popup.element.off(s,"a.k-button");e.popup.destroy()}r.fn.destroy.call(e)},destroySplitButtons:function(){var i=this,e=i.element.find(y+k),n;e.each(function(e,t){n=i._getItem(t);if(n&&n.type===ce)n=n.toolbar;if(n&&n.splitButton&&n.splitButton.destroy){n.splitButton.destroy();f(t).remove()}})},destroyDropDownButtons:function(){var i=this,e=i.element.find(y+C),n;e.each(function(e,t){n=i._getItem(t);if(n&&n.type===he)n=n.toolbar;if(n&&n.dropDownButton&&n.dropDownButton.destroy){n.dropDownButton.destroy();f(t).remove()}})},add:function(e){var t=Re[e.type],i=e.template,n,r=this,a=r.isMobile?Be:"k-item",o=e.overflowTemplate,s,l;f.extend(e,{uid:d.guid(),animation:r.animation,mobile:r.isMobile,rootUid:r.uid});if(e.menuButtons)for(var u=0;u<e.menuButtons.length;u++)f.extend(e.menuButtons[u],{uid:d.guid()});if(i&&!o||e.type===ae)e.overflow=Ce;else if(!e.overflow)e.overflow=Se;if(e.overflow!==Ce&&r.options.resizable){if(o)s=new tt(o,e,r);else if(t){s=new t.overflow(e,r);s.element.addClass(a)}if(s){if(e.overflow===Se)s.overflowHidden();s.element.appendTo(r.popup.container);r.angular("compile",function(){return{elements:s.element.get()}})}}if(e.overflow!==Te){if(i){n=new et(i,e,r);l=n.element.find(me+b+_e);if(!this.options.navigateOnTab&&l.length>0){n.element.attr(m,0);l.attr(m,-1)}}else if(t)n=new t.toolbar(e,r);if(n){n.element.appendTo(r.element);r.angular("compile",function(){return{elements:n.element.get()}})}}},_getItem:function(e){var t,i,n,r=this.options.resizable,a;t=this.element.find(e);if(!t.length)t=f('[data-role="buttonmenu"]').find(e);a=t.length?t.data("type"):Be;i=t.data(a);if(i&&r)n=i.twin();else if(r){t=this.popup.element.find(e);a=t.length?t.data("type"):Be;n=t.data(a);if(a===Oe){t=t.parent(y+C);a="dropDownButton";n=t.data(a)}if(n&&n.main&&a!==Oe){t=t.parent(y+k);a="splitButton";n=t.data(a)}}return{type:a,toolbar:i,overflow:n}},remove:function(e){var t=this._getItem(e);if(t.toolbar)t.toolbar.remove();if(t.overflow)t.overflow.remove();this.resize(true)},hide:function(e){var t=this._getItem(e);var i;if(t.toolbar)if(t.toolbar.options.type===g&&t.toolbar.options.isChild){i=t.toolbar.getParentGroup();t.toolbar.hide();if(i)i.refresh()}else if(!t.toolbar.options.hidden)t.toolbar.hide();if(t.overflow)if(t.overflow.options.type===g&&t.overflow.options.isChild){i=t.overflow.getParentGroup();t.overflow.hide();if(i)i.refresh()}else if(!t.overflow.options.hidden)t.overflow.hide();this.resize(true)},show:function(e){var t=this._getItem(e);var i;if(t.toolbar)if(t.toolbar.options.type===g&&t.toolbar.options.isChild){i=t.toolbar.getParentGroup();t.toolbar.show();if(i)i.refresh()}else if(t.toolbar.options.hidden)t.toolbar.show();if(t.overflow)if(t.overflow.options.type===g&&t.overflow.options.isChild){i=t.overflow.getParentGroup();t.toolbar.show();if(i)i.refresh()}else if(t.overflow.options.hidden)t.overflow.show();this.resize(true)},enable:function(e,t){var i=this._getItem(e);if(typeof t=="undefined")t=true;if(i.toolbar)i.toolbar.enable(t,i.element);if(i.overflow)i.overflow.enable(t)},getSelectedFromGroup:function(e){return this.element.find(y+w+"[data-group='"+e+"']").filter(y+D)},toggle:function(e,t){var i=f(e),n=i.data(g);if(n.options.togglable){if(t===a)t=true;n.toggle(t,true)}},_renderOverflow:function(){var a=this,e=Re.overflowContainer,i=a._isRtl,t=i?"left":"right";a.overflowAnchor=f(Re.overflowAnchor).addClass(c);a.element.append(a.overflowAnchor);if(a.isMobile){a.overflowAnchor.append('<span class="km-icon km-more"></span>');e=nt(e)}else a.overflowAnchor.append('<span class="k-icon k-i-more-vertical"></span>');a.popup=new d.ui.Popup(e,{origin:"bottom "+t,position:"top "+t,anchor:a.overflowAnchor,isRtl:i,animation:a.animation,appendTo:a.isMobile?f(a.isMobile).children(".km-pane"):null,copyAnchorStyles:false,open:function(e){var t=d.wrap(a.popup.element).addClass(H);if(!a.isMobile)t.css("margin-left",(i?-1:1)*((o(t)-t.width())/2+1));else a.popup.container.css("max-height",parseFloat(f(".km-content:visible").innerHeight())-15+"px");if(a.trigger(xe))e.preventDefault()},activate:function(){this.element.find(_).first().trigger(v)},close:function(e){if(a.trigger(ke))e.preventDefault();this.element.trigger(v)}});a.popup.element.on(ne+s,y+c,function(e){var t=f(e.target),i=t.parent(),n=i.is(y+x)||i.is(y+k),r;e.preventDefault();if(e.keyCode===p.ESC||e.keyCode===p.TAB||e.altKey&&e.keyCode===p.UP){a._toggleOverflow();a.overflowAnchor.trigger(v)}else if(e.keyCode===p.DOWN){r=!n||n&&t.is(":last-child")||n&&!t.next().is(_)?i:t;at(r,pe).trigger(v)}else if(e.keyCode===p.UP){r=!n||n&&t.is(":first-child")||n&&!t.prev().is(_)?i:t;at(r,ve).trigger(v)}else if((e.keyCode===p.SPACEBAR||e.keyCode===p.ENTER)&&!f(e.target).is(y+E)){a.userEvents.trigger(re,{target:f(e.target)});a.overflowAnchor.trigger(v)}else if(e.keyCode===p.HOME)i.parent().find(_).first().trigger(v);else if(e.keyCode===p.END)i.parent().find(_).last().trigger(v)});if(a.isMobile)a.popup.container=a.popup.element.find(y+N);else a.popup.container=a.popup.element;a.popup.container.attr(Me,this.uid)},_toggleOverflowAnchor:function(){var e=false;var t=this._isRtl?"padding-left":"padding-right";if(this.options.mobile)e=this.popup.element.find(y+N).children(":not(."+F+", ."+A+")").length>0;else e=this.popup.element.children(":not(."+F+", ."+A+")").length>0;if(e){this.overflowAnchor.css({visibility:"visible",width:Be});this.wrapper.css(t,this.overflowAnchor.outerWidth(true))}else{this.overflowAnchor.css({visibility:be,width:"1px"});this.wrapper.css(t,Be)}},_buttonClick:function(e){var t=this,i=f(e.target),n,r,a,o,s;e.preventDefault();if(i.hasClass(C)||i.hasClass(V)){t._resetTabIndex(i);return}else if(i.hasClass(G)){t._resetTabIndex(i.prev());return}else if(i.hasClass(W)){s=i.find(me+b+_e+b+y+q);if(s.length>0)t._resetTabIndex(s.first());return}if(!i.data(ce))i=f(e.target).closest(y+c+b+y+z,t.element);n=i.data(g);if(n&&!i.hasClass(L))t._resetTabIndex(i);if(!n&&t.popup){i=f(e.target).closest(y+h,t.popup.container);n=i.parent("li").data(g)}if(!n||!n.options.enable)return;if(n.options.togglable){r=l(n.toggleHandler)?n.toggleHandler:null;n.toggle(!n.options.selected,true);a={target:i,group:n.options.group,checked:n.options.selected,id:n.options.id,item:n};if(r)r.call(t,a);t.trigger(ee,a)}else{r=l(n.clickHandler)?n.clickHandler:null;a={sender:t,target:i,id:n.options.id,item:n};if(r)r.call(t,a);t.trigger(J,a)}if(n.options.url){if(n.options.attributes&&n.options.attributes.target)o=n.options.attributes.target;window.open(n.options.url,o||"_self")}if(i.hasClass(h))t.popup.close()},_focusOut:function(e){this.wrapper.find(y+c+y+X).removeClass(X)},_focusIn:function(e){var t=f(e.target);if(t.closest(y+c).length>0)t.closest(y+c).addClass(X)},_keydown:function(e){var t=f(e.target),i=e.keyCode,n=this._getItems(),r=this._isRtl?-1:1,a=t.closest(y+W),o,s,l,c,u;if(e.altKey&&i===p.DOWN){var h=f(document.activeElement).is(y+V);if(h)this._toggleOverflow();return}if(!this.options.navigateOnTab&&i===p.ENTER&&t.hasClass(W)){l=t.find(_+":not('"+y+$+"')"+b+y+q);if(l.length>0){t.attr(m,-1);l.attr(m,0);l.first().trigger(v)}return}else if(!this.options.navigateOnTab&&i===p.ESC&&a.length>0){c=a.find("[data-role]");l=a.find(_+":not('"+y+$+"')"+b+y+q);if(c.length>0){u=d.widgetInstance(c);if(u)if(u.popup&&u.popup.visible())return;else{a.attr(m,0);a.trigger(v);a.find(_).attr(m,-1)}}if(l.length>0){a.attr(m,0);a.trigger(v);l.attr(m,-1)}return}else if((i===p.SPACEBAR||i===p.ENTER)&&!t.is(me+b+ye+b+g)){if(i===p.SPACEBAR){e.preventDefault();this.userEvents.trigger(re,{target:t})}return}if(i===p.HOME){if(t.is(y+q)||t.is(me))return;this._resetTabIndex(n.first());n.first().trigger(v);e.preventDefault()}else if(i===p.END){if(t.is(y+q)||t.is(me))return;o=n.last();if(o.width()===0)o=n.eq(n.length-2);this._resetTabIndex(o);o.trigger(v);e.preventDefault()}else if(!this.options.navigateOnTab&&i===p.RIGHT&&!t.is(me+":not([type=file])"+b+_e+b+y+q+b+y+Y)&&this._getNextElement(e.target,1*r)){s=f(this._getNextElement(e.target,1*r));this._resetTabIndex(s);s.trigger(v);e.preventDefault()}else if(!this.options.navigateOnTab&&i===p.LEFT&&!t.is(me+":not([type=file])"+b+_e+b+Pe+y+q+b+y+Y)&&this._getNextElement(e.target,-1*r)){s=f(this._getNextElement(e.target,-1*r));this._resetTabIndex(s);s.trigger(v);e.preventDefault()}},_getNextElement:function(e,t){var i=this._getItems(),n=i.index(e)===-1?i.index(e.parentElement):i.index(e),r=i[n+t];if(!r)if(t===-1)r=i.last();else r=i.first();return r},_getItems:function(){return this.wrapper.find(_+b+y+W+b+y+V+b+y+"k-switch").filter(function(){var e=f(this);if(e.hasClass("k-hidden"))return false;else if(e.hasClass(V)&&e.css("visibility")===be)return false;else if(e.hasClass(W)&&e.find(y+"k-picker"+b+y+"k-input").length===0)return false;else if(!e.hasClass(W)&&e.closest(y+W).length>0)return false;else if(e.hasClass($)||e.hasClass(G))return false;return true})},_toggle:function(e){var t=f(e.target).closest(y+k).data("splitButton");e.preventDefault();if(!t.options.enable)return;t.toggle()},_toggleOverflow:function(){this.popup.toggle()},_resize:function(e){var t=e.width;if(!this.options.resizable)return;this.popup.close();this._shrink(t);this._stretch(t);this._markVisibles();this._toggleOverflowAnchor()},_childrenWidth:function(){var e=0;var t=parseInt(this.element.css("gap"),10)||0;this.element.children(":visible:not("+y+T+")").each(function(){e+=o(f(this),true)+t});return Math.ceil(e)},_shrink:function(e){var t,i,n;if(e<this._childrenWidth()){i=this.element.children(":visible:not([data-overflow='never'], ."+V+")");for(var r=i.length-1;r>=0;r--){t=i.eq(r);if(e>this._childrenWidth())break;else{n=t.find("[tabindex=0]");if(n.length>0){n.attr(m,-1);this.element.children(y+V).attr(m,0)}this._hideItem(t)}}}},_stretch:function(e){var t,i;if(e>this._childrenWidth()){i=this.element.children(y+I+":not("+y+P+")");for(var n=0;n<i.length;n++){t=i.eq(n);if(e<this._childrenWidth()||!this._showItem(t,e))break}}},_hideItem:function(e){e.addClass(I);if(this.popup)this.popup.container.find(">li[data-uid='"+e.data(Le)+"']").removeClass(F)},_showItem:function(e,t){var i=parseInt(this.element.css("gap"),10)||0;e.removeClass(I);var n=o(e,true)+i;e.addClass(I);if(e.length&&t>this._childrenWidth()+n){e.removeClass(I);if(this.options.navigateOnTab!==true)e.find(_).attr(m,-1);if(this.popup)this.popup.container.find(">li[data-uid='"+e.data(Le)+"']").addClass(F);return true}return false},_markVisibles:function(){var e=this.popup.container.children(),t=this.element.children(":not("+y+V+")"),i=e.filter(":not("+y+F+")"),n=t.filter(":visible");e.add(t).removeClass(U+Pe+j);i.first().add(n.first()).addClass(U);i.last().add(n.last()).addClass(j)},_resetTabIndex:function(e){if(this.options.navigateOnTab!==true){this.wrapper.find(_).attr(m,-1);e.attr(m,0)}},_tabIndex:function(){var e=this.wrapper.find(_+":not('[tabindex=-1]')"),t=e.first();if(this.options.navigateOnTab!==true){e.attr(m,-1);t.attr(m,0)}}});return d.ui.plugin(st),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.toggleinputbase.min",["kendo.core.min"],function(){var u={id:"toggleinputbase",name:"ToggleInputBase",category:"web",description:"The ToggleInputBase component.",depends:["core"]},n=window.kendo.jQuery,r=void 0,a=window.kendo,e=a.ui,o=e.Widget,t="change",s="disabled",l="checked",i=o.extend({init:function(e,t){var i=this;o.fn.init.call(i,e,t);i._wrapper();i._initSettings();i._attachEvents();a.notify(i,a.ui)},events:[t],options:{name:"ToggleInputBase"},NS:".kendoToggleInputBase",RENDER_INPUT:n.noop,check:function(e){var t=this,i=t.element[0];if(e===r)return i.checked;if(i.checked!==e)t.options.checked=i.checked=e;if(e)t.element.attr(l,l);else t.element.prop(l,false)},destroy:function(){o.fn.destroy.call(this);this.wrapper.off(this.NS)},enable:function(e){var t=this.element;if(typeof e=="undefined")e=true;this.options.enabled=e;if(e)t.prop(s,false);else t.attr(s,s)},toggle:function(){var e=this;e.check(!e.element[0].checked)},_attachEvents:function(){this.element.on(t+this.NS,this._change.bind(this))},_change:function(){var e=this.element[0].checked;this.trigger(t,{checked:e})},_initSettings:function(){var e=this,t=e.element[0],i=e.options;if(i.checked===null)i.checked=t.checked;e.check(i.checked);i.enabled=i.enabled&&!e.element.attr(s);e.enable(i.enabled)},_wrapper:function(){var e=this,t=e.options,i=e.RENDER_INPUT;i(e.element,n.extend({},t));e.element.removeClass("input-validation-error");e.wrapper=e.element}});return e.plugin(i),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.html.input.min",["kendo.html.base.min"],function(){var u={id:"html.input",name:"Html.Input",category:"web",description:"HTML rendering utility for Kendo UI for jQuery.",depends:["html.base"],features:[]},r=window.kendo.jQuery,i=void 0,a=window.kendo,n=a.html.HTMLBase,e=function(e,t){if(arguments[0]===i||r.isPlainObject(arguments[0])){t=e;e=r("<input />")}return new s(e,t).html()},t=function(e,t){if(arguments[0]===i||r.isPlainObject(arguments[0])){t=e;e=r("<input />")}return new l(e,t).html()},o=n.extend({init:function(e,t){var i=this;n.fn.init.call(i,e,t);i._wrapper();i._addClasses()},options:{label:null,labelPosition:"after",labelId:null,encoded:true},_wrapper:function(){var e=this,t=e.element[0],i=e.options,n=t.id;e.wrapper=e.element.addClass(i.inputClass).prop("type",i.type);if(!n&&!!i.label)t.id=n=a.guid();if(!!i.label){e.labelEl=r("<label for='"+n+"' class='"+i.labelClass+"'>");if(i.encoded)e.labelEl.text(i.label);else e.labelEl.html(i.label);if(i.labelId)e.labelEl.attr("id",i.labelId);if(i.optional)e.labelEl.append("<span class='"+i.optionalClass+"'>"+i.optionalText+"</span>");e.element[i.labelPosition](e.labelEl)}},html:function(){var e=this,t=e.options.labelPosition==="after",i=n.fn.html.call(e);if(!e.labelEl)return i;if(t)return i+e.labelEl[0].outerHTML;return e.labelEl[0].outerHTML+i}}),s=o.extend({init:function(e,t){var i=this;o.fn.init.call(i,e,t);i._addClasses()},options:{name:"HTMLCheckBox",inputClass:"k-checkbox",labelClass:"k-checkbox-label",optionalClass:"k-label-optional",optionalText:"(Optional)",type:"checkbox",rounded:"medium",size:"medium",stylingOptions:["size","rounded"]}}),l=o.extend({init:function(e,t){var i=this;o.fn.init.call(i,e,t);i._addClasses()},options:{name:"HTMLRadioButton",inputClass:"k-radio",labelClass:"k-radio-label",optionalClass:"k-label-optional",optionalText:"(Optional)",type:"radio",size:"medium",stylingOptions:["size"]}});return r.extend(a.html,{renderCheckBox:e,renderRadioButton:t,HTMLInput:o,HTMLCheckBox:s,HTMLRadioButton:l}),a.cssProperties.registerPrefix("HTMLCheckBox","k-checkbox-"),a.cssProperties.registerValues("HTMLCheckBox",[{prop:"rounded",values:a.cssProperties.roundedValues.concat([["full","full"]])}]),a.cssProperties.registerPrefix("HTMLRadioButton","k-radio-"),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.checkbox.min",["kendo.toggleinputbase.min","kendo.html.input.min"],function(){var e={id:"checkbox",name:"CheckBox",category:"web",description:"The CheckBox widget is used to display boolean value input.",depends:["toggleinputbase","html.input"]},t=window.kendo.jQuery,i=void 0,n=window.kendo,r=n.ui,a,o=r.ToggleInputBase.extend({options:{name:"CheckBox",checked:null,enabled:true,encoded:true,label:null,rounded:"medium",size:"medium"},RENDER_INPUT:n.html.renderCheckBox,NS:".kendoCheckBox",value:function(e){if(typeof e==="string")e=e==="true";return this.check.apply(this,[e])}});return n.cssProperties.registerPrefix("CheckBox","k-checkbox-"),n.cssProperties.registerValues("CheckBox",[{prop:"rounded",values:n.cssProperties.roundedValues.concat([["full","full"]])}]),r.plugin(o),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.list.min",["kendo.data.min","kendo.popup.min"],function(){var e={id:"list",name:"List",category:"framework",depends:["data","popup"],hidden:true},v=window.kendo.jQuery,d=void 0,p=window.kendo,n=p.ui,l=p._outerHeight,y=/^\d+(\.\d+)?%$/i,a=n.Widget,g=p.keys,o=p.support,b=p.htmlEncode,w=p._activeElement,u=p._outerWidth,t=p.data.ObservableArray,r="id",m="change",c="k-focus",f="k-hover",_="k-selected",i="k-i-loading k-input-loading-icon",x="k-list",k="k-table",C="k-data-table",S="k-table-md",T="k-list-ul",A="k-table-list",M=".k-list-group-sticky-header",D=".k-list-item-group-label",E=".k-list-item",I=".k-table-row",P="open",B="close",O="cascade",z="select",L="click",R="mouseleave",F="mouseenter",V="activate",N="deactivate",H="dataBinding",U="dataBound",j="selectedItemChange",G="selected",W="requestStart",q="requestEnd",Y="blur",$="focus",X="focusout",K=v.extend,Q=Array.isArray,Z=o.browser,J="k-hidden",ee="width",te="text",ie="value",ne=Z.msie,re=/"/g,ae={ComboBox:["DropDownList","MultiColumnComboBox"],DropDownList:["ComboBox","MultiColumnComboBox"],MultiColumnComboBox:["ComboBox","DropDownList"]},oe='<ul unselectable="on"/>',se="<div class='k-list'/>",le='<div class="k-no-data" style="display: none;"></div>',ue='<div class="k-list-footer"></div>',ce='<div class="k-table-footer">'+'<span class="k-table-td"></span>'+"</div>",he="mousedown",fe="-list",de="_listbox",pe="aria-labelledby",ve="aria-label",ge="aria-activedescendant",me="aria-autocomplete",_e="aria-controls",ye="aria-live",be="aria-expanded",we="aria-hidden",xe="aria-busy",ke="aria-multiselectable",Ce="aria-selected",Se=".k-table-group-row",Te=p.ui.DataBoundWidget.extend({init:function(e,t){var i=this,n;a.fn.init.call(i,e,t);e=i.element;t=i.options;i._isSelect=e.is(z);if(i._isSelect&&i.element[0].length)if(!t.dataSource){t.dataTextField=t.dataTextField||te;t.dataValueField=t.dataValueField||ie}i._listSize=p.cssProperties.getValidClass({widget:"List",propName:"size",value:t.size});i.ul=v(oe).attr({tabIndex:-1,"aria-hidden":true});i.list=v(se).addClass(i._listSize).append(i.ul);n=e.attr(r);if(!n)n=p.guid();i.list.attr(r,n+fe);i.ul.attr(r,n+de);if(t.columns&&t.columns.length){i.list.removeClass(x).addClass(C);i.list.removeClass(i._listSize).addClass(S);i.ul.removeClass(T).addClass(k);i._columnsHeader()}i._header();i._noData();i._footer();i._accessors();i._initValue()},options:{valuePrimitive:false,footerTemplate:"",headerTemplate:"",noDataTemplate:true,size:"medium",messages:{noData:"No data found.",clear:"clear"}},setOptions:function(e){a.fn.setOptions.call(this,e);if(e&&e.enable!==d)e.enabled=e.enable;if(e.columns&&e.columns.length)this._columnsHeader();this._header();this._noData();this._footer();this._renderFooter();this._renderNoData()},focus:function(){this._focused.trigger($)},readonly:function(e){this._editable({readonly:e===d?true:e,disable:false})},enable:function(e){this._editable({readonly:false,disable:!(e=e===d?true:e)})},_header:function(){var e=this;var t=v(e.header);var i=e.options.headerTemplate;this._angularElement(t,"cleanup");p.destroy(t);t.remove();if(!i){e.header=null;return}var n=typeof i!=="function"?p.template(i):i;t=v(n({}));e.header=t[0]?t:null;if(e.list.parent.length>0)e.list.before(t);this._angularElement(e.header,"compile")},_columnsHeader:function(){var e=this;var t=v(e.columnsHeader);this._angularElement(t,"cleanup");p.destroy(t);t.remove();var i="<div class='k-table-header'><div class='k-table-header-wrap'><table class='k-table' role='presentation'>";var n="<colgroup>";var r="<tr class='k-table-row'>";for(var a=0;a<this.options.columns.length;a++){var o=this.options.columns[a];var c=o.title||o.field||"";var s=o.headerTemplate||c;var h=typeof s!=="function"?p.template(s):s;var l=o.width;var f=parseInt(l,10);var u="";if(l&&!isNaN(f)){u+="style='width:";u+=f;u+=y.test(l)?"%":"px";u+=";'"}n+="<col "+u+"/>";r+="<th class='k-table-th'>";r+=h(o);r+="</th>"}n+="</colgroup>";r+="</tr>";i+=n;i+="<thead class='k-table-thead'>";i+=r;i+="</thead></table></div></div>";e.columnsHeader=t=v(i);e.list.prepend(t);this._angularElement(e.columnsHeader,"compile")},_noData:function(){var e=this;var t=v(e.noData);var i=e.options.noDataTemplate===true?e.options.messages.noData:e.options.noDataTemplate;e.angular("cleanup",function(){return{elements:t}});p.destroy(t);t.remove();if(!i){e.noData=null;return}e.noData=v(le).appendTo(e.list);e.noDataTemplate=typeof i!=="function"?p.template(i):i},_footer:function(){var e=this;var t=v(e.footer);var i=e.options.footerTemplate;var n=this.options.columns&&this.options.columns.length?ce:ue;this._angularElement(t,"cleanup");p.destroy(t);t.remove();if(!i){e.footer=null;return}e.footer=v(n).appendTo(e.list);e.footerTemplate=typeof i!=="function"?p.template(i):i},_listOptions:function(e){var t=this;var i=t.options;var n=i.virtual;var r={change:t._listChange.bind(t)};var a=t._listBound.bind(t);var o=t._focused;var s=t.element.attr("id");var l=v('label[for="'+t.element.attr("id")+'"]');var u=o.attr(pe);if(!u&&l.length)u=l.attr("id")||t._generateLabelId(l,s||p.guid());n=typeof n==="object"?n:{};e=v.extend({autoBind:false,selectable:true,dataSource:t.dataSource,click:t._click.bind(t),activate:t._activateItem.bind(t),columns:i.columns,deactivate:t._deactivateItem.bind(t),dataBinding:function(){t.trigger(H)},dataBound:a,height:i.height,dataValueField:i.dataValueField,dataTextField:i.dataTextField,groupTemplate:i.groupTemplate,fixedGroupTemplate:i.fixedGroupTemplate,template:i.template,ariaLabel:o.attr(ve),ariaLabelledBy:u,listSize:t._listSize},e,n,r);if(!e.template)e.template="#:"+p.expr(e.dataTextField,"data")+"#";if(i.$angular)e.$angular=i.$angular;return e},_initList:function(){var e=this;var t=e._listOptions({selectedItemChange:e._listChange.bind(e)});if(!e.options.virtual)e.listView=new p.ui.StaticList(e.ul,t);else{e.listView=new p.ui.VirtualList(e.ul,t);e.list.addClass("k-virtual-list")}e.listView.bind("listBound",e._listBound.bind(e));e._setListValue()},_setListValue:function(e){e=e||this.options.value;if(e!==d)this.listView.value(e).done(this._updateSelectionState.bind(this))},_updateSelectionState:v.noop,_listMousedown:function(e){if(!this.filterInput||this.filterInput[0]!==e.target)e.preventDefault()},_isFilterEnabled:function(){var e=this.options.filter;return e&&e!=="none"},_hideClear:function(){var e=this;if(e._clear)e._clear.addClass(J)},_showClear:function(){if(this._clear)this._clear.removeClass(J)},_clearValue:function(){this._clearText();this._accessor("");this.listView.value([]);if(this._isSelect)this._customOption=d;if(this._isFilterEnabled()&&!this.options.enforceMinLength){this._filter({word:"",open:false});if(this.options.highlightFirst)this.listView.focus(0)}this._change()},_clearText:function(){this.text("")},_clearFilter:function(){if(!this.options.virtual)this.listView.bound(false);this._filterSource()},_filterSource:function(e,t){var i=this;var n=i.options;var r=n.filterFields&&e&&e.logic&&e.filters&&e.filters.length;var a=i.dataSource;var o=K({},a.filter()||{});var s=e||o.filters&&o.filters.length&&!e;var l=Pe(o,n.dataTextField);this._clearFilterExpressions(o);if((e||l)&&i.trigger("filtering",{filter:e}))return v.Deferred().reject().promise();var u={filters:[],logic:"and"};if(r)u.filters.push(e);else this._pushFilterExpression(u,e);if(Ie(o))if(u.logic===o.logic)u.filters=u.filters.concat(o.filters);else u.filters.push(o);if(i._cascading)this.listView.setDSFilter(u);var c=K({},{page:s?1:a.page(),pageSize:s?a.options.pageSize:a.pageSize(),sort:a.sort(),filter:a.filter(),group:a.group(),aggregate:a.aggregate()},{filter:u});return a[t?"read":"query"](a._mergeState(c))},_pushFilterExpression:function(e,t){if(Ie(t)&&t.value!=="")e.filters.push(t)},_clearFilterExpressions:function(e){if(!e.filters)return;var t;for(var i=0;i<e.filters.length;i++)if("fromFilter"in e.filters[i])t=i;if(!isNaN(t))e.filters.splice(t,1)},_angularElement:function(e,t){if(!e)return;this.angular(t,function(){return{elements:e}})},_renderNoData:function(){var e=this;var t=e.noData;if(!t)return;this._angularElement(t,"cleanup");t.html(e.noDataTemplate({instance:e}));this._angularElement(t,"compile")},_toggleNoData:function(e){v(this.noData).toggle(e)},_toggleHeader:function(e){var t=this.listView.content.prev(M);t.toggle(e)},_renderFooter:function(){var e=this,t=e.footer?this.options.columns&&this.options.columns.length?e.footer.children().first():e.footer:null;if(!t)return;this._angularElement(t,"cleanup");t.html(e.footerTemplate({instance:e}));this._angularElement(t,"compile")},_allowOpening:function(){return this.options.noDataTemplate||this.dataSource.flatView().length},_initValue:function(){var e=this,t=e.options.value;if(t!==null)e.element.val(t);else{t=e._accessor();e.options.value=t}e._old=t},_ignoreCase:function(){var e=this,t=e.dataSource.reader.model,i;if(t&&t.fields){i=t.fields[e.options.dataTextField];if(i&&i.type&&i.type!=="string")e.options.ignoreCase=false}},_focus:function(e){return this.listView.focus(e)},_filter:function(e){var t=this;var i=t.options;var n=e.word;var r=i.filterFields;var a=i.dataTextField;var o;if(r&&r.length){o={logic:"or",filters:[],fromFilter:true};for(var s=0;s<r.length;s++)this._pushFilterExpression(o,t._buildExpression(n,r[s]))}else o=t._buildExpression(n,a);t._open=e.open;t._filterSource(o)},_buildExpression:function(e,t){var i=this;var n=i.options;var r=n.ignoreCase;var a=i.dataSource.options.accentFoldingFiltering;return{value:r?a?e.toLocaleLowerCase(a):e.toLowerCase():e,field:t,operator:n.filter,ignoreCase:r}},_clearButton:function(){var e=this;var t=e.options.messages.clear;if(!e._clear)e._clear=v('<span unselectable="on" class="k-clear-value" title="'+t+'"><span class="k-icon k-i-x"></span></span>').attr({role:"button",tabIndex:-1});if(!e.options.clearButton)e._clear.remove();this._hideClear()},search:function(e){var t=this.options;e=typeof e==="string"?e:this._inputValue();clearTimeout(this._typingTimeout);if(!t.enforceMinLength&&!e.length||e.length>=t.minLength){this._state="filter";if(this.listView)this.listView._emptySearch=!p.trim(e).length;if(!this._isFilterEnabled())this._searchByWord(e);else this._filter({word:e,open:true})}},current:function(e){return this._focus(e)},items:function(){return this.ul[0].children},destroy:function(){var e=this;var t=e.ns;a.fn.destroy.call(e);e._unbindDataSource();e.listView.destroy();e.list.off(t);e.popup.destroy();if(e._form)e._form.off("reset",e._resetHandler)},dataItem:function(e){var t=this;if(e===d)return t.listView.selectedDataItems()[0];if(typeof e!=="number"){if(t.options.virtual)return t.dataSource.getByUid(v(e).data("uid"));e=v(t.items()).index(e)}return t.dataSource.flatView()[e]},_activateItem:function(){var e=this.listView.focus();if(e&&this.popup.visible())this._focused.add(this.filterInput).attr(ge,e.attr("id"))},_deactivateItem:function(){this._focused.add(this.filterInput).removeAttr(ge)},_accessors:function(){var e=this;var t=e.element;var i=e.options;var n=p.getter;var r=t.attr(p.attr("text-field"));var a=t.attr(p.attr("value-field"));if(!i.dataTextField&&r)i.dataTextField=r;if(!i.dataValueField&&a)i.dataValueField=a;e._text=n(i.dataTextField);e._value=n(i.dataValueField)},_aria:function(e){var t=this,i=t.options,n=t._focused,r;if(i.suggest!==d){if(i.filter==="none")if(i.suggest===true)r="inline";else r="none";else if(i.suggest===true)r="both";else r="list";n.attr(me,r)}e=e?e+" "+t.ul[0].id:t.ul[0].id;n.attr({"aria-controls":e});if(t.filterInput&&t.filterInput.length>0)t.filterInput.attr(_e,e);t.ul.attr(ye,!t._isFilterEnabled()?"off":"polite");t._ariaLabel(t._focused)},_blur:function(){var e=this;e._change();e.close();e._userTriggered=false},_isValueChanged:function(e){return e!==s(this._old,typeof e)},_change:function(){var e=this;var t=e.selectedIndex;var i=e.options.value;var n=e.value();var r;if(e._isSelect&&!e.listView.bound()&&i)n=i;if(e._isValueChanged(n))r=true;else if(e._valueBeforeCascade!==d&&e._valueBeforeCascade!==s(e._old,typeof e._valueBeforeCascade)&&e._userTriggered)r=true;else if(t!==d&&t!==e._oldIndex&&!e.listView.isFiltered())r=true;if(r){if(e._old===null||e._old===""||n==="")e._valueBeforeCascade=e._old=n;else if(e.dataItem())e._valueBeforeCascade=e._old=e.options.dataValueField?e.dataItem()[e.options.dataValueField]:e.dataItem();else e._valueBeforeCascade=e._old=null;e._oldIndex=t;if(!e._typing)e.element.trigger(m);e.trigger(m)}e.typing=false},_data:function(){return this.dataSource.view()},_enable:function(){var e=this,t=e.options,i=e.element.is("[disabled]");if(t.enable!==d)t.enabled=t.enable;if(!t.enabled||i)e.enable(false);else e.readonly(e.element.is("[readonly]"))},_dataValue:function(e){var t=this._value(e);if(t===d)t=this._text(e);return t},_offsetHeight:function(){var t=0;var e=this.listView.content.parent().prevAll(":visible");e.each(function(){var e=v(this);t+=l(e,true)});return t},_height:function(e){var t=this;var i=t.list;var n=t.options.height;var r=t.popup.visible();var a=this.options.columns&&this.options.columns.length;var o,s;if(e||t.options.noDataTemplate){s=i.parent().add(i.closest(".k-animation-container")).show();if(!i.parent().is(":visible")){s.hide();return}n=t.listView.content[0].scrollHeight>n?n:"auto";s.height(n);if(n!=="auto"){o=t._offsetHeight();n=n-o;if(a)n=n-(l(v(t.footer))||0)-(l(v(t.columnsHeader))||0)}if(a)t.listView.content.outerHeight(n);else t.listView.content.parent().outerHeight(n);if(!r)i.parent().hide()}return n},_openHandler:function(e){var t;this._adjustListWidth();if(this.trigger(P))e.preventDefault();else{this._focused.attr(be,true);this.ul.attr(we,false);t=this.listView.focus();if(t)this._focused.add(this.filterInput).attr(ge,t.attr("id"))}},_adjustListWidth:function(){var e=this,t=e.list.parent(),i=t[0].style.width,n=e.wrapper,r,a;if(!t.data(ee)&&i)return;r=window.getComputedStyle?window.getComputedStyle(n[0],null):0;a=parseFloat(r&&r.width)||u(n);if(r&&Z.msie)a+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth);if(t.css("box-sizing")!=="border-box")i=a-(u(t)-t.width());else i=a;t.css({fontFamily:n.css("font-family"),width:e.options.autoWidth?"auto":i,minWidth:i,whiteSpace:e.options.autoWidth?"nowrap":"normal"}).data(ee,i);return true},_closeHandler:function(e){if(this.trigger(B))e.preventDefault();else{this._focused.attr(be,false);this.ul.attr(we,true);this._focused.add(this.filterInput).removeAttr(ge)}},_focusItem:function(){var e=this.listView;var t=!e.focus();var i=h(e.select());if(i===d&&this.options.highlightFirst&&t)i=0;if(i!==d)e.focus(i);else if(t)e.scrollToIndex(0)},_calculateGroupPadding:function(e){var t=this.ul.children(".k-first").first();var i=this.listView.content.prev(M);var n=0;var r="right";if(i[0]&&i[0].style.display!=="none"){if(e!=="auto")n=p.support.scrollbar();if(this.element.parents(".k-rtl").length)r="left";n+=parseFloat(t.css("border-"+r+"-width"),10)+parseFloat(t.children(D).css("padding-"+r),10);i.css("padding-"+r,n)}},_calculatePopupHeight:function(e){var t=this._height(this.dataSource.flatView().length||e);this._calculateGroupPadding(t);this._calculateColumnsHeaderPadding(t)},_calculateColumnsHeaderPadding:function(e){if(this.options.columns&&this.options.columns.length){var t=this;var i=o.isRtl(t.wrapper);var n=p.support.scrollbar();t.columnsHeader.css(i?"padding-left":"padding-right",e!=="auto"?n:0)}},_refreshScroll:function(){var e=this.listView;var t=e.element.height()>e.content.height();if(this.options.autoWidth)e.content.css({overflowX:"hidden",overflowY:t?"scroll":"auto"})},_resizePopup:function(e){if(this.options.virtual)return;if(!this.popup.element.is(":visible")){this.popup.one("open",function(e){return function(){this._calculatePopupHeight(e)}.bind(this)}.call(this,e));this.popup.one(V,this._refreshScroll.bind(this))}else this._calculatePopupHeight(e)},_popup:function(){var e=this;e.list.wrap("<div>");e.popup=new n.Popup(e.list.parent(),K({},e.options.popup,{anchor:e.wrapper,open:e._openHandler.bind(e),close:e._closeHandler.bind(e),animation:e.options.animation,isRtl:o.isRtl(e.wrapper),autosize:e.options.autoWidth}));e.popup.element.prepend(e.header).on(he+this.ns,this._listMousedown.bind(this))},_toggleHover:function(e){v(e.currentTarget).toggleClass(f,e.type===F)},_toggle:function(e,t){var i=this;var n=o.mobileOS&&(o.touch||o.MSPointers||o.pointers);e=e!==d?e:!i.popup.visible();if(!t&&!n&&i._focused[0]!==w()){i._prevent=true;i._focused.trigger($);i._prevent=false}i[e?P:B]()},_triggerCascade:function(){var e=this;if(!e._cascadeTriggered||e.value()!==s(e._cascadedValue,typeof e.value())){e._cascadedValue=e.value();e._cascadeTriggered=true;e.trigger(O,{userTriggered:e._userTriggered})}},_triggerChange:function(){if(this._valueBeforeCascade!==this.value())this.trigger(m)},_unbindDataSource:function(){var e=this;e.dataSource.unbind(W,e._requestStartHandler).unbind(q,e._requestEndHandler).unbind("error",e._errorHandler)},requireValueMapper:function(e,t){var i=(e.value instanceof Array?e.value.length:e.value)||(t instanceof Array?t.length:t);if(i&&e.virtual&&typeof e.virtual.valueMapper!=="function")throw new Error("ValueMapper is not provided while the value is being set. See http://docs.telerik.com/kendo-ui/controls/editors/combobox/virtualization#the-valuemapper-function")}});function s(e,t){if(e!==d&&e!==""&&e!==null)if(t==="boolean"){if(typeof e!=="boolean")e=e.toString().toLowerCase()==="true";e=Boolean(e)}else if(t==="number")e=Number(e);else if(t==="string")e=e.toString();return e}K(Te,{inArray:function(e,t){var i,n,r=t.children;if(!e||e.parentNode!==t)return-1;for(i=0,n=r.length;i<n;i++)if(e===r[i])return i;return-1},unifyType:s}),n.Select=(p.ui.List=Te).extend({init:function(e,t){Te.fn.init.call(this,e,t);this._initial=this.element.val()},setDataSource:function(e){var t=this;var i;t.options.dataSource=e;t._dataSource();if(t.listView.bound()){t._initialIndex=null;t.listView._current=null}t.listView.setDataSource(t.dataSource);if(t.options.autoBind)t.dataSource.fetch();i=t._parentWidget();if(i)t._cascadeSelect(i)},close:function(){this.popup.close()},select:function(e){var t=this;if(e===d)return t.selectedIndex;else return t._select(e).done(function(){t._cascadeValue=t._old=t._accessor();t._oldIndex=t.selectedIndex})},_accessor:function(e,t){return this[this._isSelect?"_accessorSelect":"_accessorInput"](e,t)},_accessorInput:function(e){var t=this.element[0];if(e===d)return t.value;else{if(e===null)e="";t.value=e}},_accessorSelect:function(e,t){var i=this.element[0];var n;if(e===d)return De(i).value||"";De(i).selected=false;if(t===d)t=-1;n=e!==null&&e!=="";if(n&&t==-1)this._custom(e);else if(e)i.value=e;else i.selectedIndex=t},_syncValueAndText:function(){return true},_custom:function(e){var t=this;var i=t.element;var n=t._customOption;if(!n){n=v("<option/>");t._customOption=n;i.append(n)}n.text(e);n[0].selected=true},_hideBusy:function(){var e=this;clearTimeout(e._busy);e._arrowIcon.removeClass(i);e._focused.attr(xe,false);e._busy=null;e._showClear()},_showBusy:function(e){var t=this;if(e.isDefaultPrevented())return;t._request=true;if(t._busy)return;t._busy=setTimeout(function(){if(t._arrowIcon){t._focused.attr(xe,true);t._arrowIcon.addClass(i);t._hideClear()}},100)},_requestEnd:function(){this._request=false;this._hideBusy()},_dataSource:function(){var e=this,t=e.element,i=e.options,n=i.dataSource||{},r;n=Array.isArray(n)?{data:n}:n;if(e._isSelect){r=t[0].selectedIndex;if(r>-1)i.index=r;n.select=t;n.fields=[{field:i.dataTextField},{field:i.dataValueField}]}if(e.dataSource)e._unbindDataSource();else{e._requestStartHandler=e._showBusy.bind(e);e._requestEndHandler=e._requestEnd.bind(e);e._errorHandler=e._hideBusy.bind(e)}e.dataSource=p.data.DataSource.create(n).bind(W,e._requestStartHandler).bind(q,e._requestEndHandler).bind("error",e._errorHandler)},_firstItem:function(){this.listView.focusFirst()},_lastItem:function(){this.listView.focusLast()},_nextItem:function(){return this.listView.focusNext()},_prevItem:function(){return this.listView.focusPrev()},_getNormalizedDataItem:function(e){var t=this,i=t.listView,n=typeof e==="number",r=t.optionLabel&&t.optionLabel.length,a;if(n)a=r?--e:e;else a=i.getElementIndex(e);return i.dataItemByIndex(a)},_getNormalizedSelectCandidate:function(e){var t=this,i=t.optionLabel&&t.optionLabel.length,n=typeof e==="number",r=e;if(i&&n)r++;return r},_move:function(e){var t=this;var i=t.listView;var n=e.keyCode;var r=n===g.DOWN;var c=t.options.virtual;var a;var o;var s;var l;var h;if(n===g.UP||r){if(e.altKey)t.toggle(r);else{if(!i.bound()&&!t.ul[0].firstChild){if(!t._fetch){t.dataSource.one(m,function(){t._fetch=false;t._move(e)});t._fetch=true;t._filterSource()}e.preventDefault();return true}s=t._focus();if(!t._fetch&&(!s||s.hasClass(_)))if(r){l=t._nextItem();if(c&&l<=0||!t._focus()&&!l)t._lastItem()}else{l=t._prevItem();if(c&&l>=i.dataSource.total()-1||!t._focus()&&!l)t._firstItem()}h=t._getNormalizedSelectCandidate(t._get(t._focus())||l||0);t._select(h,true).done(function(){var e=function(){if(!t.popup.visible())t._blur();if(t._cascadedValue===null)t._cascadedValue=t.value();else t._cascadedValue=t.dataItem()?t.dataItem()[t.options.dataValueField]||t.dataItem():null};if(t.trigger(z,{dataItem:t._getNormalizedDataItem(h),item:t._focus()}))t._select(s).done(e);else e()})}e.preventDefault();o=true}else if(n===g.ENTER||n===g.TAB){if(t.popup.visible())e.preventDefault();s=t._focus();a=t.dataItem();if(!t.popup.visible()&&(!a||t.text()!==t._text(a)))s=null;var f=t.filterInput&&t.filterInput[0]===w();var u;if(s){a=i.dataItemByIndex(i.getElementIndex(s));var d=true;if(a)d=t._value(a)!==Te.unifyType(t.value(),typeof t._value(a));if(d&&t.trigger(z,{dataItem:a,item:s}))return;u=t._select(s)}else if(t.input){if(t._syncValueAndText()||t._isSelect)t._accessor(t.input.val());t.listView.value(t.input.val())}if(t._focusElement)t._focusElement(t.wrapper);if(f&&n===g.TAB)t.wrapper.focusout();else if(u&&typeof u.done==="function")u.done(function(){t._blur()});else t._blur();t.close();o=true}else if(n===g.ESC){if(t.popup.visible())e.preventDefault();t.close();o=true}else if(t.popup.visible()&&(n===g.PAGEDOWN||n===g.PAGEUP)){e.preventDefault();var p=n===g.PAGEDOWN?1:-1;i.scrollWith(p*i.screenHeight());o=true}return o},_fetchData:function(){var e=this;var t=!!e.dataSource.view().length;if(e._request||e.options.cascadeFrom)return;if(!e.listView.bound()&&!e._fetch&&!t){e._fetch=true;e.dataSource.fetch().done(function(){e._fetch=false})}},_options:function(e,c,t){var i=this,h=i.element,n=h[0],f=e.length,r="",a,o,s,l,u=0;if(c)r=c;for(;u<f;u++){a="<option";o=e[u];s=i._text(o);l=i._value(o);if(l!==d){l+="";if(l.indexOf('"')!==-1)l=l.replace(re,"&quot;");a+=' value="'+l+'"'}a+=">";if(s!==d)a+=b(s);a+="</option>";r+=a}h.html(r);if(t!==d){n.value=t;if(n.value&&!t)n.selectedIndex=-1}if(n.selectedIndex!==-1){a=De(n);if(a)a.setAttribute(G,G)}},_reset:function(){var e=this,t=e.element,i=t.attr("form"),n=i?v("#"+i):t.closest("form");if(n[0]){e._resetHandler=function(){setTimeout(function(){e.value(e._initial)})};e._form=n.on("reset",e._resetHandler)}},_parentWidget:function(){var e=this.options.name;if(!this.options.cascadeFrom)return;var t=v("#"+this.options.cascadeFrom);var i=t.data("kendo"+e);if(!i)for(var n=0;n<ae[e].length;n+=1){i=t.data("kendo"+ae[e][n]);if(!!i)break}return i},_cascade:function(){var t=this;var e=t.options;var i=e.cascadeFrom;var n;if(i){n=t._parentWidget();if(!n)return;t._cascadeHandlerProxy=t._cascadeHandler.bind(t);t._cascadeFilterRequests=[];e.autoBind=false;n.bind("set",function(){t.one("set",function(e){t._selectedValue=e.value||t._accessor()})});n.first(O,t._cascadeHandlerProxy);if(n.listView.bound()){t._toggleCascadeOnFocus();t._cascadeSelect(n)}else{n.one(U,function(){t._toggleCascadeOnFocus();if(n.popup.visible())n._focused.trigger($)});if(!n.value())t.enable(false)}}},_toggleCascadeOnFocus:function(){var e=this;var t=e._parentWidget();var i=ne&&t instanceof n.DropDownList?Y:X;t._focused.add(t.filterInput).on($,function(){t.unbind(O,e._cascadeHandlerProxy);t.unbind(m,e._cascadeHandlerProxy);t.first(m,e._cascadeHandlerProxy)});t._focused.add(t.filterInput).on(i,function(){t.unbind(m,e._cascadeHandlerProxy);t.unbind(O,e._cascadeHandlerProxy);t.first(O,e._cascadeHandlerProxy)})},_cascadeHandler:function(e){var t=this._parentWidget();var i=this.value();this._userTriggered=e.userTriggered||t._userTriggered;if(this.listView.bound())this._clearSelection(t,true);this._cascadeSelect(t,i)},_cascadeChange:function(e){var t=this;var i=t._accessor()||t._selectedValue;if(!t._cascadeFilterRequests.length)t._selectedValue=null;if(t._userTriggered)t._clearSelection(e,true);else if(i){if(i!==s(t.listView.value()[0],typeof i))t.value(i);if(!t.dataSource.view()[0]||t.selectedIndex===-1)t._clearSelection(e,true)}else if(t.dataSource.flatView().length)t.select(t.options.index);t.enable();t._triggerCascade();t._triggerChange();t._userTriggered=false},_cascadeSelect:function(t,e){var i=this;var n=t.dataItem();var r=n?n[i.options.cascadeFromParentField]||t._value(n):null;var a=i.options.cascadeFromField||t.options.dataValueField;var o;i._valueBeforeCascade=e!==d?e:i.value();if(r||r===0){o=i.dataSource.filter()||{};Pe(o,a);var s=function(){var e=i._cascadeFilterRequests.shift();if(e)i.unbind("dataBound",e);e=i._cascadeFilterRequests[0];if(e)i.first("dataBound",e);i._cascadeChange(t)};i._cascadeFilterRequests.push(s);if(i._cascadeFilterRequests.length===1)i.first("dataBound",s);i._cascading=true;i._filterSource({field:a,operator:"eq",value:r});i._cascading=false}else{i.enable(false);i._clearSelection(t);i._triggerCascade();i._triggerChange();i._userTriggered=false}}});var Ae=".StaticList",Me=p.ui.DataBoundWidget.extend({init:function(e,t){a.fn.init.call(this,e,t);this.element.attr("role","listbox").on(L+Ae,"li",this._click.bind(this)).on(F+Ae,"li",function(){v(this).addClass(f)}).on(R+Ae,"li",function(){v(this).removeClass(f)});if(t&&t.ariaLabel)this.element.attr(ve,t.ariaLabel);else if(t&&t.ariaLabelledBy)this.element.attr(pe,t.ariaLabelledBy);if(o.touch)this._touchHandlers();if(this.options.selectable==="multiple")this.element.attr(ke,true);if(this.options.columns&&this.options.columns.length){var i=this.element.parent().find(".k-table-thead");var n=v('<tr class="k-table-group-row">'+'<th class="k-table-th" colspan="'+this.options.columns.length+'"></th>'+"</tr>");i.append(n);this.header=n.find(".k-table-th");this.content=this.element.wrap("<div class='k-table-body k-table-scroller' unselectable='on'></div>").parent();this.element.addClass(A)}else{this.content=this.element.wrap("<div class='k-list-content k-list-scroller' unselectable='on'></div>").parent();this.header=this.content.before('<div class="k-list-group-sticky-header" style="display:none"></div>').prev();this.element.addClass(T)}this.bound(false);this._optionID=p.guid();this._selectedIndices=[];this._view=[];this._dataItems=[];this._values=[];var r=this.options.value;if(r)this._values=Array.isArray(r)?r.slice(0):[r];this._getter();this._templates();this.setDataSource(this.options.dataSource);this._createOnScrollProxy()},options:{name:"StaticList",dataValueField:null,valuePrimitive:false,selectable:true,template:null,groupTemplate:null,fixedGroupTemplate:null,ariaLabel:null,ariaLabelledBy:null},events:[L,m,V,N,H,U,j],setDataSource:function(e){var t=this;var i=e||{};var n;i=Array.isArray(i)?{data:i}:i;i=p.data.DataSource.create(i);if(t.dataSource){t.dataSource.unbind(m,t._refreshHandler);n=t.value();t.value([]);t.bound(false);t.value(n)}else t._refreshHandler=t.refresh.bind(t);t.setDSFilter(i.filter());t.dataSource=i.bind(m,t._refreshHandler);t._fixedHeader()},_touchHandlers:function(){var t=this,i=this.options.columns&&this.options.columns.length?I:E,n,r,a=function(e){return(e.originalEvent||e).changedTouches[0].pageY};t.element.on("touchstart"+Ae,function(e){n=a(e)});t.element.on("touchend"+Ae,function(e){if(e.isDefaultPrevented())return;r=a(e);if(Math.abs(r-n)<10){t._touchTriggered=true;t._triggerClick(v(e.target).closest(i).get(0))}})},skip:function(){return this.dataSource.skip()},setOptions:function(e){a.fn.setOptions.call(this,e);this._getter();this._templates();this._render()},destroy:function(){this.element.off(Ae);if(this._refreshHandler)this.dataSource.unbind(m,this._refreshHandler);clearTimeout(this._scrollId);a.fn.destroy.call(this)},dataItemByIndex:function(e){return this.dataSource.flatView()[e]},screenHeight:function(){return this.content[0].clientHeight},scrollToIndex:function(e){var t=this.element[0].children[e];if(t)this.scroll(t)},scrollWith:function(e){this.content.scrollTop(this.content.scrollTop()+e)},scroll:function(e){if(!e)return;if(e[0])e=e[0];var t=this.content[0],i=e.offsetTop,n=e.offsetHeight,r=t.scrollTop,a=t.clientHeight,o=i+n;if(r>i)r=i;else if(o>r+a)r=o-a;t.scrollTop=r},selectedDataItems:function(e){if(e===d)return this._dataItems.slice();this._dataItems=e;this._values=this._getValues(e)},_getValues:function(e){var t=this._valueGetter;return v.map(e,function(e){return t(e)})},focusNext:function(){var e=this.focus();if(!e)e=0;else e=e.next();this.focus(e)},focusPrev:function(){var e=this.focus();if(!e)e=this.element[0].children.length-1;else e=e.prev();this.focus(e)},focusFirst:function(){this.focus(this.element[0].children[0])},focusLast:function(){this.focus(h(this.element[0].children))},focus:function(e){var t=this;var i=t._optionID;var n;if(e===d)return t._current;e=h(t._get(e));e=v(this.element[0].children[e]);if(t._current){t._current.removeClass(c).removeAttr(r);t.trigger(N)}n=!!e[0];if(n){e.addClass(c);t.scroll(e);e.attr("id",i)}t._current=n?e:null;t.trigger(V)},focusIndex:function(){return this.focus()?this.focus().index():d},skipUpdate:function(e){this._skipUpdate=e},select:function(e){var t=this;var i=t.options.selectable;var n=i!=="multiple"&&i!==false;var r=t._selectedIndices;var c=[this.element.find(".k-selected").index()];var a=[];var o=[];var s;if(e===d)return r.slice();e=t._get(e);if(e.length===1&&e[0]===-1)e=[];var l=v.Deferred().resolve();var u=t.isFiltered();if(u&&!n&&t._deselectFiltered(e))return l;if(n&&!u&&v.inArray(h(e),r)!==-1&&v.inArray(h(e),c)!==-1){if(t._dataItems.length&&t._view.length)t._dataItems=[t._view[r[0]].item];return l}s=t._deselect(e);o=s.removed;e=s.indices;if(e.length){if(n)e=[h(e)];a=t._select(e)}if(a.length||o.length){t._valueComparer=null;t.trigger(m,{added:a,removed:o})}return l},removeAt:function(e){this._selectedIndices.splice(e,1);this._values.splice(e,1);this._valueComparer=null;return{position:e,dataItem:this._dataItems.splice(e,1)[0]}},setValue:function(e){e=Array.isArray(e)||e instanceof t?e.slice(0):[e];this._values=e;this._valueComparer=null},value:function(e){var t=this;var i=t._valueDeferred;var n;if(e===d)return t._values.slice();t.setValue(e);if(!i||i.state()==="resolved")t._valueDeferred=i=v.Deferred();if(t.bound()){n=t._valueIndices(t._values);if(t.options.selectable==="multiple")t.select(-1);t.select(n);i.resolve()}t._skipUpdate=false;return i},items:function(){return this.element.children(E)},_click:function(e){if(this._touchTriggered){this._touchTriggered=false;return}if(!e.isDefaultPrevented())this._triggerClick(e.currentTarget)},_createOnScrollProxy:function(){var e=function(){var e=this;clearTimeout(e._scrollId);e._scrollId=setTimeout(function(){e._renderHeader()},50)};this._onScroll=e.bind(this)},_triggerClick:function(e){if(!this.trigger(L,{item:v(e)}))this.select(e)},_valueExpr:function(e,t){var i=this;var n=0;var r;var a;var o=[];if(!i._valueComparer||i._valueType!==e){i._valueType=e;for(;n<t.length;n++)o.push(s(t[n],e));r="for (var idx = 0; idx < "+o.length+"; idx++) {"+" if (current === values[idx]) {"+"   return idx;"+" }"+"} "+"return -1;";a=new Function("current","values",r);i._valueComparer=function(e){return a(e,o)}}return i._valueComparer},_dataItemPosition:function(e,t){var i=this._valueGetter(e);var n=this._valueExpr(typeof i,t);return n(i)},_getter:function(){this._valueGetter=p.getter(this.options.dataValueField)},_deselect:function(e){var t=this;var i=t.element[0].children;var n=t.options.selectable;var r=t._selectedIndices;var c=t._dataItems;var h=t._values;var a=[];var o=0;var s;var l,u;var f=0;e=e.slice();if(n===true||!e.length){for(;o<r.length;o++){v(i[r[o]]).removeClass(_).attr(Ce,false);a.push({position:o,dataItem:c[o]})}t._values=[];t._dataItems=[];t._selectedIndices=[]}else if(n==="multiple")for(;o<e.length;o++){l=e[o];if(!v(i[l]).hasClass(_))continue;for(s=0;s<r.length;s++){u=r[s];if(u===l){v(i[u]).removeClass(_).attr(Ce,false);var d=this._view[l].item;var p=this._dataItemPosition(d,this._values);a.push({position:p,dataItem:d});c.splice(s,1);r.splice(s,1);e.splice(o,1);h.splice(s,1);f+=1;o-=1;s-=1;break}}}return{indices:e,removed:a}},_deselectFiltered:function(e){var t=this.element[0].children;var i,n,r;var a=[];var o=0;for(;o<e.length;o++){n=e[o];i=this._view[n].item;r=this._dataItemPosition(i,this._values);if(r>-1){a.push(this.removeAt(r));v(t[n]).removeClass(_)}}if(a.length){this.trigger(m,{added:[],removed:a});return true}return false},_select:function(e){var t=this;var i=t.element[0].children;var n=t._view;var r,a;var o=[];var s=0;if(h(e)!==-1)t.focus(e);for(;s<e.length;s++){a=e[s];r=n[a];if(a===-1||!r)continue;r=r.item;t._selectedIndices.push(a);t._dataItems.push(r);t._values.push(t._valueGetter(r));v(i[a]).addClass(_).attr(Ce,true);o.push({dataItem:r})}return o},getElementIndex:function(e){return v(e).data("offset-index")},_get:function(e){if(typeof e==="number")e=[e];else if(!Q(e)){e=this.getElementIndex(e);e=[e!==d?e:-1]}return e},_template:function(){var e=this;var t=e.options;var i=t.template;if(!i)i=p.template('<li tabindex="-1" role="option" unselectable="on" class="k-list-item"><span class="k-list-item-text">${'+p.expr(t.dataTextField,"data")+"}</span></li>",{useWithBlock:false});else{i=p.template(i);i=function(e){return'<li tabindex="-1" role="option" unselectable="on" class="k-list-item">'+i(e)+"</li>"}}return i},_templates:function(){var e;var t=this.options;var i={template:t.template,groupTemplate:t.groupTemplate,fixedGroupTemplate:t.fixedGroupTemplate};if(t.columns)for(var n=0;n<t.columns.length;n++){var r=t.columns[n];var a=r.field?r.field.toString():te;i["column"+n]=r.template||"#: "+a+"#"}for(var o in i){e=i[o];if(e&&typeof e!=="function")i[o]=p.template(e)}this.templates=i},_normalizeIndices:function(e){var t=[];var i=0;for(;i<e.length;i++)if(e[i]!==d)t.push(e[i]);return t},_valueIndices:function(e,t){var i=this._view;var n=0;var r;t=t?t.slice():[];if(!e.length)return[];for(;n<i.length;n++){r=this._dataItemPosition(i[n].item,e);if(r!==-1)t[r]=n}return this._normalizeIndices(t)},_firstVisibleItem:function(){var e=this.element[0];var t=this.content[0];var i=t.scrollTop;var n=v(e.children[0]).height();var r=Math.floor(i/n)||0;var a=e.children[r]||e.lastChild;var o=a.offsetTop<i;while(a)if(o){if(a.offsetTop+n>i||!a.nextSibling)break;a=a.nextSibling}else{if(a.offsetTop<=i||!a.previousSibling)break;a=a.previousSibling}return this._view[v(a).data("offset-index")]},_fixedHeader:function(){if(this.isGrouped()&&this.templates.fixedGroupTemplate){if(this.header.closest(Se).length)this.header.closest(Se).show();else this.header.show();this.content.scroll(this._onScroll)}else{if(this.header.closest(Se).length)this.header.closest(Se).hide();else this.header.hide();this.content.off("scroll",this._onScroll)}},_renderHeader:function(){var e=this.templates.fixedGroupTemplate;if(!e)return;var t=this._firstVisibleItem();if(t&&t.group.toString().length)this.header.html(e(t.group))},_renderItem:function(e){var t='<li tabindex="-1" role="option" unselectable="on" ';var i=e.item;var n=e.index!==0;var r=e.selected;var a=this.isGrouped();var o=this.options.columns&&this.options.columns.length;var s=e.index%2===1?" k-table-alt-row":"";if(o)t+='class="k-table-row'+s;else t+='class="k-list-item';if(n&&e.newGroup)t+=" k-first";if(e.isLastGroupedItem&&o)t+=" k-last";if(r)t+=" k-selected";t+='" aria-selected="'+(r?"true":"false")+'" data-offset-index="'+e.index+'">';if(o)t+=this._renderColumns(i);else{t+='<span class="k-list-item-text">';t+=this.templates.template(i);t+="</span>"}if(n&&e.newGroup)if(o)t+='<span class="k-table-td k-table-group-td"><span>'+this.templates.groupTemplate(e.group)+"</span></span>";else t+='<div class="k-list-item-group-label">'+this.templates.groupTemplate(e.group)+"</div>";else if(a&&o)t+='<span class="k-table-td k-table-spacer-td"></span>';return t+"</li>"},_renderColumns:function(e){var t="";for(var i=0;i<this.options.columns.length;i++){var n=this.options.columns[i].width;var r=parseInt(n,10);var a="";if(n&&!isNaN(r)){a+="style='width:";a+=r;a+=y.test(n)?"%":"px";a+=";'"}t+="<span class='k-table-td' "+a+">";t+=this.templates["column"+i](e);t+="</span>"}return t},_render:function(){var e="";var t=0;var i=0;var n;var r=[];var a=this.dataSource.view();var o=this.value();var s,l,u;var c=this.isGrouped();if(c)for(t=0;t<a.length;t++){s=a[t];l=true;for(u=0;u<s.items.length;u++){n={selected:this._selected(s.items[u],o),item:s.items[u],group:s.value,newGroup:l,isLastGroupedItem:u===s.items.length-1,index:i};r[i]=n;i+=1;e+=this._renderItem(n);l=false}}else for(t=0;t<a.length;t++){n={selected:this._selected(a[t],o),item:a[t],index:t};r[t]=n;e+=this._renderItem(n)}this._view=r;this.element[0].innerHTML=e;if(c&&r.length)this._renderHeader()},_selected:function(e,t){var i=!this.isFiltered()||this.options.selectable==="multiple";return i&&this._dataItemPosition(e,t)!==-1},setDSFilter:function(e){this._lastDSFilter=K({},e)},isFiltered:function(){if(!this._lastDSFilter)this.setDSFilter(this.dataSource.filter());return!p.data.Query.compareFilters(this.dataSource.filter(),this._lastDSFilter)},refresh:function(e){var t=this;var i=e&&e.action;var n=t.options.skipUpdateOnBind;var r=i==="itemchange";var a;t.trigger(H);t._angularItems("cleanup");t._fixedHeader();t._render();t.bound(true);if(r||i==="remove"){a=Ee(t._dataItems,e.items);if(a.changed.length)if(r)t.trigger(j,{items:a.changed});else t.value(t._getValues(a.unchanged))}else if(t.isFiltered()||t._skipUpdate||t._emptySearch){t.focus(0);if(t._skipUpdate){t._skipUpdate=false;t._selectedIndices=t._valueIndices(t._values,t._selectedIndices)}}else if(!n&&(!i||i==="add"))t.value(t._values);if(t._valueDeferred)t._valueDeferred.resolve();t._angularItems("compile");t.trigger(U)},bound:function(e){if(e===d)return this._bound;this._bound=e},isGrouped:function(){return(this.dataSource.group()||[]).length}});function h(e){return e[e.length-1]}function De(e){var t=e.selectedIndex;return t>-1?e.options[t]:{}}function Ee(e,t){var i=t.length;var n=e.length;var r;var a;var o,s;var l=[];var u=[];if(n)for(o=0;o<n;o++){r=e[o];a=false;for(s=0;s<i;s++)if(r===t[s]){a=true;l.push({index:o,item:r});break}if(!a)u.push(r)}return{changed:l,unchanged:u}}function Ie(e){if(!e||v.isEmptyObject(e))return false;if(e.filters&&!e.filters.length)return false;return true}function Pe(e,t){var i;var n=false;if(e.filters){i=v.grep(e.filters,function(e){n=Pe(e,t);if(e.filters)return e.filters.length;else return e.field!=t});if(!n&&e.filters.length!==i.length)n=true;e.filters=i}return n}return n.plugin(Me),p.cssProperties.registerPrefix("List","k-list-"),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.virtuallist.min",["kendo.data.min"],function(){var e={id:"virtuallist",name:"VirtualList",category:"framework",depends:["data"],hidden:true},g=window.kendo.jQuery,m=void 0,o=window.kendo,t=o.ui,u=t.Widget,n,h=/^\d+(\.\d+)?%$/i,f="k-list-content k-virtual-content",d="k-table-body k-table-scroller",p="k-list-group-sticky-header",v="k-list-item",b="k-table-row",a="k-height-container",w="k-list-item-group-label",x="k-list-ul",k="k-table-list",_="k-selected",c="k-focus",C="k-hover",r="change",i="click",S="listBound",T="itemChange",A="activate",M="deactivate",D=".k-table-group-row",s=".VirtualList";function E(e){return e[e.length-1]}function l(e){return e instanceof Array?e:[e]}function y(e){return typeof e==="string"||typeof e==="number"||typeof e==="boolean"}function I(e,t,i){return Math.ceil(e*t/i)}function P(e,t,i){var n=document.createElement(i||"div");if(t)n.className=t;e.appendChild(n);return n}function B(e){var t=g('<div class="k-list '+e+' k-virtual-list">'+'<div class="k-list-content k-virtual-content">'+'<ul class="k-list-ul">'+'<li class="k-list-item">'+'<span class="k-list-item-text">test</span>'+"</li>"+"</ul>"+"</div>"+"</div>");var i;t.css({position:"absolute",left:"-200000px",visibility:"hidden"});t.appendTo(document.body);i=parseFloat(o.getComputedStyles(t.find(".k-list-item")[0],["height"]).height);t.remove();return i}function O(e,t,i){return{down:e*i,up:e*(t-1-i)}}function z(e,t){var n=(e.listScreens-1-e.threshold)*t;var r=e.threshold*t;return function(e,t,i){if(t>i)return t-e.top<n;else return e.top===0||t-e.top>r}}function L(t,i){return function(e){return i(t.scrollTop,e)}}function R(i){return function(e,t){i(e.items,e.index,t);return e}}function F(e,t){e.style.webkitTransform="translateY("+t+"px)";e.style.transform="translateY("+t+"px)"}function V(r,a){return function(e,t){for(var i=0,n=e.length;i<n;i++){r(e[i],t[i],a);if(t[i].item)this.trigger(T,{item:g(e[i]),data:t[i].item,ns:o.ui})}}}function N(e,t){var i;if(t>0){i=e.splice(0,t);e.push.apply(e,i)}else{i=e.splice(t,-t);e.unshift.apply(e,i)}return i}function H(e,t,i){var n=i.template,r=this.options.columns&&this.options.columns.length,a=t.index%2===1?"k-table-alt-row":"";e=g(e);if(!t.item)n=i.placeholderTemplate;if(t.index===0&&this.header&&t.group)this.header.html(i.fixedGroupTemplate(t.group));this.angular("cleanup",function(){return{elements:[e]}});e.attr("data-uid",t.item?t.item.uid:"").attr("data-offset-index",t.index);if(r&&t.item){if(a.length>0)e.addClass(a);else e.removeClass("k-table-alt-row");e.html(U(this.options,t.item,i))}else{e.find("."+w).remove();e.find(".k-list-item-text").html(n(t.item||{}))}e.toggleClass(c,t.current);e.toggleClass(_,t.selected);e.toggleClass("k-first",t.newGroup);e.toggleClass("k-last",t.isLastGroupedItem);e.toggleClass("k-loading-item",!t.item);if(t.index!==0&&t.newGroup)if(r)g('<span class="k-table-td k-table-group-td"><span>'+i.groupTemplate(t.group)+"</span></span>").appendTo(e);else g("<div class="+w+"></div>").appendTo(e).html(i.groupTemplate(t.group));else if(t.group&&r)e.append(g('<span class="k-table-td k-table-spacer-td"></span>'));if(t.top!==m)F(e[0],t.top);this.angular("compile",function(){return{elements:[e],data:[{dataItem:t.item,group:t.group,newGroup:t.newGroup}]}})}function U(e,t,i){var n="";for(var r=0;r<e.columns.length;r++){var a=e.columns[r].width;var o=parseInt(a,10);var s="";if(a){s+="style='width:";s+=o;s+=h.test(a)?"%":"px";s+=";'"}n+="<span class='k-table-td' "+s+">";n+=i["column"+r](t);n+="</span>"}return n}function j(e,t){var i=t.length;var n=e.length;var r;var a;var o,s;var l=[];var u=[];if(n)for(o=0;o<n;o++){r=e[o];a=false;for(s=0;s<i;s++)if(r===t[s]){a=true;l.push({index:o,item:r});break}if(!a)u.push(r)}return{changed:l,unchanged:u}}function G(e){return e&&e.state()!=="resolved"}var W=t.DataBoundWidget.extend({init:function(e,t){var i=this,n=t.columns&&t.columns.length?d:f;i.bound(false);i._fetching=false;u.fn.init.call(i,e,t);if(!i.options.itemHeight)i.options.itemHeight=B(t.listSize);t=i.options;i.element.attr("role","listbox");i.content=i.wrapper=i.element.wrap("<div unselectable='on' class='"+n+"'></div>").parent();if(i.options.columns&&i.options.columns.length){var r=i.element.closest(".k-data-table").find(".k-table-thead");var a=g('<tr class="k-table-group-row">'+'<th class="k-table-th" colspan="'+i.options.columns.length+'"></th>'+"</tr>");r.append(a);i.header=a.find(".k-table-th");i.element.addClass(k+" k-virtual-table")}else{i.header=i.content.before("<div class='"+p+"'></div>").prev();i.element.addClass(x)}if(t.ariaLabel)this.element.attr("aria-label",t.ariaLabel);else if(t.ariaLabelledBy)this.element.attr("aria-labelledby",t.ariaLabelledBy);i.element.on("mouseenter"+s,"li:not(.k-loading-item)",function(){g(this).addClass(C)}).on("mouseleave"+s,"li",function(){g(this).removeClass(C)});i._values=l(i.options.value);i._selectedDataItems=[];i._selectedIndexes=[];i._rangesList={};i._promisesList=[];i._optionID=o.guid();i._templates();i.setDataSource(t.dataSource);i.content.on("scroll"+s,o.throttle(function(){i._renderItems();i._triggerListBound()},t.delay));i._selectable()},options:{name:"VirtualList",autoBind:true,delay:100,height:null,listScreens:4,threshold:.5,itemHeight:null,oppositeBuffer:1,type:"flat",selectable:false,value:[],dataValueField:null,template:"#:data#",placeholderTemplate:"loading...",groupTemplate:"#:data#",fixedGroupTemplate:"#:data#",mapValueTo:"index",valueMapper:null,ariaLabel:null,ariaLabelledBy:null},events:[r,i,S,T,A,M],setOptions:function(e){var t=this.options.columns&&this.options.columns.length?b:v;u.fn.setOptions.call(this,e);if(this._selectProxy&&this.options.selectable===false)this.element.off(i,"."+t,this._selectProxy);else if(!this._selectProxy&&this.options.selectable)this._selectable();this._templates();this.refresh()},items:function(){return g(this._items)},destroy:function(){this.wrapper.off(s);this.dataSource.unbind(r,this._refreshHandler);u.fn.destroy.call(this)},setDataSource:function(e){var t=this;var i=e||{};var n;i=Array.isArray(i)?{data:i}:i;i=o.data.DataSource.create(i);if(t.dataSource){t.dataSource.unbind(r,t._refreshHandler);t._clean();t.bound(false);t._deferValueSet=true;n=t.value();t.value([]);t.mute(function(){t.value(n)})}else t._refreshHandler=t.refresh.bind(t);t.dataSource=i.bind(r,t._refreshHandler);t.setDSFilter(i.filter());if(i.view().length!==0)t.refresh();else if(t.options.autoBind)i.fetch()},skip:function(){return this.dataSource.currentRangeStart()},_triggerListBound:function(){var e=this;var t=e.skip();if(e.bound()&&!e._selectingValue&&e._skip!==t){e._skip=t;e.trigger(S)}},_getValues:function(e){var t=this._valueGetter;return g.map(e,function(e){return t(e)})},_highlightSelectedItems:function(){for(var e=0;e<this._selectedDataItems.length;e++){var t=this._getElementByDataItem(this._selectedDataItems[e]);if(t.length)t.addClass(_)}},refresh:function(e){var t=this;var i=e&&e.action;var n=i==="itemchange";var r=this.isFiltered();var a;if(t._mute)return;t._deferValueSet=false;if(!t._fetching){if(r)t.focus(0);t._createList();if(!i&&t._values.length&&!r&&!t.options.skipUpdateOnBind&&!t._emptySearch){t._selectingValue=true;t.bound(true);t.value(t._values,true).done(function(){t._selectingValue=false;t._triggerListBound()})}else{t.bound(true);t._highlightSelectedItems();t._triggerListBound()}}else{if(t._renderItems)t._renderItems(true);t._triggerListBound()}if(n||i==="remove"){a=j(t._selectedDataItems,e.items);if(a.changed.length)if(n)t.trigger("selectedItemChange",{items:a.changed});else t.value(t._getValues(a.unchanged))}t._fetching=false},removeAt:function(e){var t=this._values.splice(e,1)[0];return{position:e,dataItem:this._removeSelectedDataItem(t)}},_removeSelectedDataItem:function(e){var t=this,i=t._valueGetter;for(var n in t._selectedDataItems)if(i(t._selectedDataItems[n])===e){t._selectedIndexes.splice(n,1);return t._selectedDataItems.splice(n,1)[0]}},setValue:function(e){this._values=l(e)},value:function(e,t){var i=this;if(e===m)return i._values.slice();if(e===null)e=[];e=l(e);if(!i._valueDeferred||i._valueDeferred.state()==="resolved")i._valueDeferred=g.Deferred();var n=i.options.selectable==="multiple"&&i.select().length&&e.length;if(n||!e.length)i.select(-1);i._values=e;if(i.bound()&&!i._mute&&!i._deferValueSet||t)i._prefetchByValue(e);return i._valueDeferred},_checkValuesOrder:function(e){if(this._removedAddedIndexes&&this._removedAddedIndexes.length===e.length){var t=this._removedAddedIndexes.slice();this._removedAddedIndexes=null;return t}return e},_prefetchByValue:function(e){var t=this,i=t._dataView,n=t._valueGetter,r=t.options.mapValueTo,a,o=false,s=[];for(var l=0;l<e.length;l++)for(var u=0;u<i.length;u++){a=i[u].item;if(a){o=y(a)?e[l]===a:e[l]===n(a);if(o)s.push(i[u].index)}}if(s.length===e.length){t._values=[];t.select(s);return}if(typeof t.options.valueMapper==="function")t.options.valueMapper({value:this.options.selectable==="multiple"?e:e[0],success:function(e){if(r==="index")t.mapValueToIndex(e);else if(r==="dataItem")t.mapValueToDataItem(e)}});else if(!t.value()[0])t.select([-1]);else{t._selectingValue=false;t._triggerListBound()}},mapValueToIndex:function(e){if(e===m||e===-1||e===null)e=[];else e=l(e);if(!e.length)e=[-1];else{var t=this._deselect([]).removed;if(t.length)this._triggerChange(t,[])}this.select(e)},mapValueToDataItem:function(e){var t,i;if(e===m||e===null)e=[];else e=l(e);if(!e.length)this.select([-1]);else{t=g.map(this._selectedDataItems,function(e,t){return{index:t,dataItem:e}});i=g.map(e,function(e,t){return{index:t,dataItem:e}});this._selectedDataItems=e;this._selectedIndexes=[];for(var n=0;n<this._selectedDataItems.length;n++){var r=this._getElementByDataItem(this._selectedDataItems[n]);this._selectedIndexes.push(this._getIndecies(r)[0]);r.addClass(_)}this._triggerChange(t,i);if(this._valueDeferred)this._valueDeferred.resolve()}},deferredRange:function(e){var a=this.dataSource;var o=this.itemCount;var s=this._rangesList;var t=g.Deferred();var l=[];var i=Math.floor(e/o)*o;var n=Math.ceil(e/o)*o;var r=n===i?[n]:[i,n];g.each(r,function(e,t){var i=t+o;var n=s[t];var r;if(!n||n.end!==i){r=g.Deferred();s[t]={end:i,deferred:r};a._multiplePrefetch(t,o,function(){r.resolve()})}else r=n.deferred;l.push(r)});g.when.apply(g,l).then(function(){t.resolve()});return t},prefetch:function(e){var i=this,n=this.itemCount,t=!i._promisesList.length;if(!G(i._activeDeferred)){i._activeDeferred=g.Deferred();i._promisesList=[]}g.each(e,function(e,t){i._promisesList.push(i.deferredRange(i._getSkip(t,n)))});if(t)g.when.apply(g,i._promisesList).done(function(){i._promisesList=[];i._activeDeferred.resolve()});return i._activeDeferred},_findDataItem:function(e,t){var i;if(this.options.type==="group")for(var n=0;n<e.length;n++){i=e[n].items;if(i.length<=t)t=t-i.length;else return i[t]}return e[t]},_getRange:function(e,t){return this.dataSource._findRange(e,Math.min(e+t,this.dataSource.total()))},dataItemByIndex:function(e){var t=this;var i=t.itemCount;var n=t._getSkip(e,i);var r=this._getRange(n,i);if(!t._getRange(n,i).length)return null;if(t.options.type==="group"){o.ui.progress(g(t.wrapper),true);t.mute(function(){t.dataSource.range(n,i,function(){o.ui.progress(g(t.wrapper),false)});r=t.dataSource.view()})}return t._findDataItem(r,[e-n])},selectedDataItems:function(){return this._selectedDataItems.slice()},scrollWith:function(e){this.content.scrollTop(this.content.scrollTop()+e)},scrollTo:function(e){this.content.scrollTop(e)},scrollToIndex:function(e){this.scrollTo(e*this.options.itemHeight)},focus:function(e){var t,i,n,r,a=this.options.itemHeight,o=this._optionID,s=true;if(e===m){r=this.element.find("."+c);return r.length?r:null}if(typeof e==="function"){n=this.dataSource.flatView();for(var l=0;l<n.length;l++)if(e(n[l])){e=l;break}}if(e instanceof Array)e=E(e);if(isNaN(e)){t=g(e);i=parseInt(g(t).attr("data-offset-index"),10)}else{i=e;t=this._getElementByIndex(i)}if(i===-1){this.element.find("."+c).removeClass(c);this._focusedIndex=m;return}if(t.length){if(t.hasClass(c))s=false;if(this._focusedIndex!==m){r=this._getElementByIndex(this._focusedIndex);r.removeClass(c).removeAttr("id");if(s)this.trigger(M)}this._focusedIndex=i;t.addClass(c).attr("id",o);var u=this._getElementLocation(i);if(u==="top")this.scrollTo(i*a);else if(u==="bottom")this.scrollTo(i*a+a-this._screenHeight);else if(u==="outScreen")this.scrollTo(i*a);if(s)this.trigger(A)}else{this._focusedIndex=i;this.items().removeClass(c);this.scrollToIndex(i)}},focusIndex:function(){return this._focusedIndex},focusFirst:function(){this.scrollTo(0);this.focus(0)},focusLast:function(){var e=this.dataSource.total();this.scrollTo(this.heightContainer.offsetHeight);this.focus(e-1)},focusPrev:function(){var e=this._focusedIndex;var t;if(!isNaN(e)&&e>0){e-=1;this.focus(e);t=this.focus();if(t&&t.hasClass("k-loading-item")){e+=1;this.focus(e)}return e}else{e=this.dataSource.total()-1;this.focus(e);return e}},focusNext:function(){var e=this._focusedIndex;var t=this.dataSource.total()-1;var i;if(!isNaN(e)&&e<t){e+=1;this.focus(e);i=this.focus();if(i&&i.hasClass("k-loading-item")){e-=1;this.focus(e)}return e}else{e=0;this.focus(e);return e}},_triggerChange:function(e,t){e=e||[];t=t||[];if(e.length||t.length)this.trigger(r,{removed:e,added:t})},select:function(e){var t=this,i,n,r=t.options.selectable!=="multiple",a=G(t._activeDeferred),c=this.isFiltered(),o,s,l,u=[];if(e===m)return t._selectedIndexes.slice();if(!t._selectDeferred||t._selectDeferred.state()==="resolved")t._selectDeferred=g.Deferred();i=t._getIndecies(e);o=r&&!c&&E(i)===E(this._selectedIndexes);u=t._deselectCurrentValues(i);if(u.length||!i.length||o){t._triggerChange(u);if(t._valueDeferred)t._valueDeferred.resolve().promise();return t._selectDeferred.resolve().promise()}if(i.length===1&&i[0]===-1)i=[];n=i;l=t._deselect(i);u=l.removed;i=l.indices;if(r){a=false;if(i.length)i=[E(i)]}var h=function(){var e=t._select(i);if(n.length===i.length||r)t.focus(i);t._triggerChange(u,e);if(t._valueDeferred)t._valueDeferred.resolve();t._selectDeferred.resolve()};s=t.prefetch(i);if(!a)if(s)s.done(h);else h();return t._selectDeferred.promise()},bound:function(e){if(e===m)return this._listCreated;this._listCreated=e},mute:function(e){this._mute=true;e();this._mute=false},setDSFilter:function(e){this._lastDSFilter=g.extend({},e)},isFiltered:function(){if(!this._lastDSFilter)this.setDSFilter(this.dataSource.filter());return!o.data.Query.compareFilters(this.dataSource.filter(),this._lastDSFilter)},skipUpdate:g.noop,_getElementByIndex:function(i){return this.items().filter(function(e,t){return i===parseInt(g(t).attr("data-offset-index"),10)})},_getElementByDataItem:function(e){var t=this._dataView,i=this._valueGetter,n,r;for(var a=0;a<t.length;a++){r=t[a].item&&y(t[a].item)?t[a].item===e:t[a].item&&e&&i(t[a].item)==i(e);if(r){n=t[a];break}}return n?this._getElementByIndex(n.index):g()},_clean:function(){this.result=m;this._lastScrollTop=m;this._skip=m;g(this.heightContainer).remove();this.heightContainer=m;this.element.empty()},_height:function(){var e=!!this.dataSource.view().length,t=this.options.height,i=this.options.itemHeight,n=this.dataSource.total();if(!e)t=0;else if(t/i>n)t=n*i;return t},setScreenHeight:function(){var e=this._height();this.content.height(e);this._screenHeight=e},screenHeight:function(){return this._screenHeight},_getElementLocation:function(e){var t=this.content.scrollTop(),i=this._screenHeight,n=this.options.itemHeight,r=e*n,a=r+n,o=t+i,s;if(r===t-n||a>t&&r<t)s="top";else if(r===o||r<o&&o<a)s="bottom";else if(r>=t&&r<=t+(i-n))s="inScreen";else s="outScreen";return s},_templates:function(){var e=this.options;var t={template:e.template,placeholderTemplate:e.placeholderTemplate,groupTemplate:e.groupTemplate,fixedGroupTemplate:e.fixedGroupTemplate};if(e.columns)for(var i=0;i<e.columns.length;i++){var n=e.columns[i];var r=n.field?n.field.toString():"text";t["column"+i]=n.template||"#: "+r+"#"}for(var a in t)if(typeof t[a]!=="function")t[a]=o.template(t[a]||"");this.templates=t},_generateItems:function(e,t){var i=[],n,r,a=this.options.itemHeight+"px",o=this.options.columns&&this.options.columns.length?b:v;while(t-- >0){r=document.createElement("span");r.className="k-list-item-text";n=document.createElement("li");n.tabIndex=-1;n.className=o;n.setAttribute("role","option");n.style.height=a;n.style.minHeight=a;n.appendChild(r);e.appendChild(n);i.push(n)}return i},_saveInitialRanges:function(){var e=this.dataSource._ranges;var t=g.Deferred();t.resolve();this._rangesList={};for(var i=0;i<e.length;i++)this._rangesList[e[i].start]={end:e[i].end,deferred:t}},_createList:function(){var n=this,e=n.content.get(0),t=n.options,i=n.dataSource;if(n.bound())n._clean();n._saveInitialRanges();n._buildValueGetter();n.setScreenHeight();n.itemCount=I(n._screenHeight,t.listScreens,t.itemHeight);if(n.itemCount>i.total())n.itemCount=i.total();n._items=n._generateItems(n.element[0],n.itemCount);n._setHeight(t.itemHeight*i.total());n.options.type=(i.group()||[]).length?"group":"flat";if(n.options.type==="flat")if(n.header.closest(D).length)n.header.closest(D).hide();else n.header.hide();else if(n.header.closest(D).length)n.header.closest(D).show();else n.header.show();n.getter=n._getter(function(){n._renderItems(true)});n._onScroll=function(e,t){var i=n._listItems(n.getter);return n._fixedHeader(e,i(e,t))};n._renderItems=n._whenChanged(L(e,n._onScroll),R(n._reorderList(n._items,H.bind(n))));n._renderItems();n._calculateGroupPadding(n._screenHeight);n._calculateColumnsHeaderPadding()},_setHeight:function(e){var t,i=this.heightContainer;if(!i)i=this.heightContainer=P(this.content[0],a);else t=i.offsetHeight;if(e!==t){i.innerHTML="";while(e>0){var n=Math.min(e,25e4);P(i).style.height=n+"px";e-=n}}},_getter:function(){var h=null,f=this.dataSource,d=f.skip(),p=this.options.type,v=this.itemCount,g={};if(f.pageSize()<v)this.mute(function(){f.pageSize(v)});return function(e,t){var i=this;if(!f.inRange(t,v)){if(h!==t){h=t;d=t;if(i._getterDeferred)i._getterDeferred.reject();i._getterDeferred=i.deferredRange(t);i._getterDeferred.then(function(){var e=i._indexConstraint(i.content[0].scrollTop);i._getterDeferred=null;if(t<=e&&e<=t+v){i._fetching=true;f.range(t,v)}})}return null}else{if(d!==t)this.mute(function(){f.range(t,v);d=t});var n;if(p==="group"){if(!g[t]){var r=g[t]=[];var a=f.view();for(var o=0,s=a.length;o<s;o++){var l=a[o];for(var u=0,c=l.items.length;u<c;u++)r.push({item:l.items[u],group:l.value})}}n=g[t][e-t]}else n=f.view()[e-t];return n}}},_fixedHeader:function(e,t){var i=this.currentVisibleGroup,n=this.options.itemHeight,r=Math.floor((e-t.top)/n),a=t.items[r];if(a&&a.item){var o=a.group;if(o!==i){var s=o||"";this.header.html(this.templates.fixedGroupTemplate(s));this.currentVisibleGroup=o}}return t},_itemMapper:function(e,t,i){var c=this.options.type,h=this.options.itemHeight,f=this._focusedIndex,n=false,r=false,a=false,d=null,o=false,s=this._valueGetter;if(c==="group"){if(e){a=t===0||this._currentGroup!==false&&this._currentGroup!==e.group;this._currentGroup=e.group}d=e?e.group:null;e=e?e.item:null}if(this.options.mapValueTo==="dataItem"&&this._selectedDataItems.length&&e)for(var l=0;l<this._selectedDataItems.length;l++){o=s(this._selectedDataItems[l])===s(e);if(o){n=true;break}}else if(!this.isFiltered()&&i.length&&e)for(var u=0;u<i.length;u++){o=y(e)?i[u]===e:i[u]===s(e);if(o){i.splice(u,1);n=true;break}}if(f===t)r=true;return{item:e?e:null,group:d,newGroup:a,selected:n,current:r,index:t,top:t*h}},_range:function(e){var t=this.itemCount,i=this._values.slice(),n=[],r;this._view={};this._currentGroup=false;for(var a=e,o=e+t;a<o;a++){r=this._itemMapper(this.getter(a,e),a,i);if(n[n.length-1])n[n.length-1].isLastGroupedItem=r.newGroup;n.push(r);this._view[r.index]=r}this._dataView=n;return n},_getDataItemsCollection:function(e,t){var i=this._range(this._listIndex(e,t));return{index:i.length?i[0].index:0,top:i.length?i[0].top:0,items:i}},_listItems:function(){var e=this._screenHeight,t=this.options;var r=z(t,e);return function(e,t){var i=this.result,n=this._lastScrollTop;if(t||!i||!r(i,e,n))i=this._getDataItemsCollection(e,n);this._lastScrollTop=e;this.result=i;return i}.bind(this)},_whenChanged:function(i,n){var r;return function(e){var t=i(e);if(t!==r){r=t;n(t,e)}}},_reorderList:function(o,s){var l=this;var u=o.length;var c=-Infinity;s=V(s,this.templates).bind(this);return function(e,t,i){var n=t-c;var r,a;if(i||Math.abs(n)>=u){r=o;a=e}else{r=N(o,n);a=n>0?e.slice(-n):e.slice(0,-n)}s(r,a,l.bound());c=t}},_bufferSizes:function(){var e=this.options;return O(this._screenHeight,e.listScreens,e.oppositeBuffer)},_indexConstraint:function(e){var t=this.itemCount,i=this.options.itemHeight,n=this.dataSource.total();return Math.min(Math.max(n-t,0),Math.max(0,Math.floor(e/i)))},_listIndex:function(e,t){var i=this._bufferSizes(),n;n=e-(e>t?i.down:i.up);return this._indexConstraint(n)},_selectable:function(){var e=this.options.columns&&this.options.columns.length?b:v;if(this.options.selectable){this._selectProxy=this._clickHandler.bind(this);this.element.on(i+s,"."+e,this._selectProxy)}},getElementIndex:function(e){if(!(e instanceof jQuery))return m;return parseInt(e.attr("data-offset-index"),10)},_getIndecies:function(e){var t=[],i;if(typeof e==="function"){i=this.dataSource.flatView();for(var n=0;n<i.length;n++)if(e(i[n])){t.push(n);break}}if(typeof e==="number")t.push(e);var r=this.getElementIndex(e);if(!isNaN(r))t.push(r);if(e instanceof Array)t=e;return t},_deselect:function(e){var c=[],t,i,n=this._selectedIndexes,r=this._selectedDataItems,a=0,h=this.options.selectable,f=0,d=this._valueGetter,p,v,o=null;e=e.slice();if(h===true||!e.length){for(var s=0;s<n.length;s++){if(n[s]!==m)this._getElementByIndex(n[s]).removeClass(_);else if(r[s])this._getElementByDataItem(r[s]).removeClass(_);c.push({index:n[s],position:s,dataItem:r[s]})}this._values=[];this._selectedDataItems=[];this._selectedIndexes=[]}else if(h==="multiple")for(var l=0;l<e.length;l++){o=null;a=g.inArray(e[l],n);i=this.dataItemByIndex(e[l]);if(a===-1&&i)for(var u=0;u<r.length;u++){v=y(i)?r[u]===i:d(r[u])===d(i);if(v){p=this._getElementByIndex(e[l]);o=this._deselectSingleItem(p,u,e[l],f)}}else{t=n[a];if(t!==m){p=this._getElementByIndex(t);o=this._deselectSingleItem(p,a,t,f)}}if(o){e.splice(l,1);c.push(o);f++;l--}}return{indices:e,removed:c}},_deselectSingleItem:function(e,t,i,n){var r;if(!e.hasClass(_))return;e.removeClass(_);this._values.splice(t,1);this._selectedIndexes.splice(t,1);r=this._selectedDataItems.splice(t,1)[0];return{index:i,position:t+n,dataItem:r}},_deselectCurrentValues:function(e){var t=this.element[0].children;var i,n,r;var a=this._values;var o=[];var s=0;var l;if(this.options.selectable!=="multiple"||!this.isFiltered())return[];if(e[0]===-1){g(t).removeClass(_);o=g.map(this._selectedDataItems.slice(0),function(e,t){return{dataItem:e,position:t}});this._selectedIndexes=[];this._selectedDataItems=[];this._values=[];return o}for(;s<e.length;s++){r=-1;n=e[s];if(this.dataItemByIndex(n))i=this._valueGetter(this.dataItemByIndex(n));for(l=0;l<a.length;l++)if(i==a[l]){r=l;break}if(r>-1){o.push(this.removeAt(r));g(t[n]).removeClass(_)}}return o},_getSkip:function(e,t){var i=e<t?1:Math.floor(e/t)+1;return(i-1)*t},_select:function(e){var n=this,t=this.options.selectable!=="multiple",r=this.dataSource,a,o,s=this.itemCount,l=this._valueGetter,u=[];if(t){n._selectedIndexes=[];n._selectedDataItems=[];n._values=[]}o=r.skip();g.each(e,function(e,t){var i=n._getSkip(t,s);n.mute(function(){r.range(i,s);a=n._findDataItem(r.view(),[t-i]);n._selectedIndexes.push(t);n._selectedDataItems.push(a);n._values.push(y(a)?a:l(a));u.push({index:t,dataItem:a});n._getElementByIndex(t).addClass(_);r.range(o,s)})});n._values=n._checkValuesOrder(n._values);return u},_clickHandler:function(e){var t=g(e.currentTarget);if(!e.isDefaultPrevented()&&t.attr("data-uid"))this.trigger(i,{item:t})},_buildValueGetter:function(){this._valueGetter=o.getter(this.options.dataValueField)},_calculateGroupPadding:function(e){var t=this.items().first(),i=this.header,n=0;if(i[0]&&i[0].style.display!=="none"){if(e!=="auto")n=o.support.scrollbar();n+=parseFloat(t.css("border-right-width"),10)+parseFloat(t.children(".k-group").css("right"),10);i.css("padding-right",n)}},_calculateColumnsHeaderPadding:function(){if(this.options.columns&&this.options.columns.length){var e=o.support.isRtl(this.wrapper);var t=o.support.scrollbar();var i=this.content.parent().parent().find(".k-table-header");var n=this.dataSource.total();i.css(e?"padding-left":"padding-right",n?t:0)}}});return o.ui.VirtualList=W,o.ui.plugin(W),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.dropdownlist.min",["kendo.list.min","kendo.mobile.scroller.min","kendo.virtuallist.min","kendo.html.button.min"],function(){var t={id:"dropdownlist",name:"DropDownList",category:"web",description:"The DropDownList widget displays a list of values and allows the selection of a single value from the list.",depends:["list","html.button"],features:[{id:"mobile-scroller",name:"Mobile scroller",description:"Support for kinetic scrolling in mobile device",depends:["mobile.scroller"]},{id:"virtualization",name:"VirtualList",description:"Support for virtualization",depends:["virtuallist"]}]},s=window.kendo.jQuery,l=void 0,u=window.kendo,e=u.ui,p=u.html,a=e.List,c=e.Select,o=u.support,v=u._activeElement,g=u.data.ObservableObject,h=u.keys,f=".kendoDropDownList",i=f+"FocusEvent",m="disabled",_="readonly",y="change",n="k-focus",b="k-disabled",w="aria-disabled",x="aria-readonly",r="click"+f+" touchend"+f,k="mouseenter"+f+" mouseleave"+f,d="tabindex",C="filter",S="accept",T="The `optionLabel` option is not valid due to missing fields. Define a custom optionLabel as shown here http://docs.telerik.com/kendo-ui/api/javascript/ui/dropdownlist#configuration-optionLabel",A="open",M="close",D=c.extend({init:function(e,t){var i=this;var n=t&&t.index;var r,a,o;i.ns=f;t=Array.isArray(t)?{dataSource:t}:t;c.fn.init.call(i,e,t);t=i.options;e=i.element.on("focus"+f,i._focusHandler.bind(i));i._focusInputHandler=i._focusInput.bind(i);i.optionLabel=s();i._optionLabel();i._inputTemplate();i._reset();i._prev="";i._word="";i._wrapper();i._tabindex();i.wrapper.data(d,i.wrapper.attr(d));i._span();i._popup();i._mobile();i._dataSource();i._ignoreCase();i._filterHeader();i._aria();i._enable();i._attachFocusHandlers();i._oldIndex=i.selectedIndex=-1;if(n!==l)t.index=n;i._initialIndex=t.index;i.requireValueMapper(i.options);i._initList();i.listView.one("dataBound",i._attachAriaActiveDescendant.bind(i));i._cascade();i.one("set",function(e){if(!e.sender.listView.bound()&&i.hasOptionLabel())i._textAccessor(i._optionLabelText())});if(t.autoBind)i.dataSource.fetch();else if(i.selectedIndex===-1){a=t.text||"";if(!a){r=t.optionLabel;if(r&&t.index===0)a=r;else if(i._isSelect)a=e.children(":selected").text()}i._textAccessor(a)}o=s(i.element).parents("fieldset").is(":disabled");if(o)i.enable(false);i.listView.bind("click",function(e){e.preventDefault()});u.notify(i);i._applyCssClasses()},options:{name:"DropDownList",enabled:true,autoBind:true,index:0,text:null,value:null,delay:500,height:200,dataTextField:"",dataValueField:"",optionLabel:"",cascadeFrom:"",cascadeFromField:"",cascadeFromParentField:"",ignoreCase:true,animation:{},filter:"none",minLength:1,enforceMinLength:false,virtual:false,template:null,valueTemplate:null,optionLabelTemplate:null,groupTemplate:"#:data#",fixedGroupTemplate:"#:data#",autoWidth:false,popup:null,filterTitle:null,size:"medium",fillMode:"solid",rounded:"medium"},events:["open","close",y,"select","filtering","dataBinding","dataBound","cascade","set","kendoKeydown"],setOptions:function(e){c.fn.setOptions.call(this,e);this.listView.setOptions(this._listOptions(e));this._optionLabel();this._inputTemplate();this._accessors();this._filterHeader();this._enable();this._aria();if(!this.value()&&this.hasOptionLabel())this.select(0)},destroy:function(){var e=this;c.fn.destroy.call(e);e.wrapper.off(f);e.wrapper.off(i);e.element.off(f);e._arrow.off();e._arrow=null;e._arrowIcon=null;e.optionLabel.off();if(e.filterInput)e.filterInput.off(i)},open:function(){var e=this;var t=e.dataSource.filter()?e.dataSource.filter().filters.length>0:false;var i=this.listView;if(e.popup.visible())return;if(!e.listView.bound()||e._state===S){e._open=true;e._state="rebind";if(e.filterInput){e.filterInput.val("");e._prev=""}if(e.filterInput&&e.options.minLength!==1&&!t){e.refresh();e.popup.one("activate",e._focusInputHandler);e.wrapper.attr("aria-activedescendant",i._optionID);e.popup.open();e._resizeFilterInput()}else e._filterSource()}else if(e._allowOpening()){e._focusFilter=true;e.popup.one("activate",e._focusInputHandler);e.popup._hovered=true;e.wrapper.attr("aria-activedescendant",i._optionID);e.popup.open();e._resizeFilterInput();e._focusItem()}},close:function(){this._attachAriaActiveDescendant();this.popup.close()},_attachAriaActiveDescendant:function(){var e=this.wrapper,t=e.find(".k-input-inner").attr("id");e.attr("aria-describedby",t)},_focusInput:function(){this._focusElement(this.filterInput)},_resizeFilterInput:function(){var e=this.filterInput;var t=this._prevent;if(!e)return;var i=this.filterInput[0]===v();var n=u.caret(this.filterInput[0])[0];this._prevent=true;e.addClass("k-hidden");e.closest(".k-list-filter").css("width",this.popup.element.css("width"));e.removeClass("k-hidden");if(i){e.trigger("focus");u.caret(e[0],n)}this._prevent=t},_allowOpening:function(){return this.hasOptionLabel()||this.filterInput||c.fn._allowOpening.call(this)},toggle:function(e){this._toggle(e,true)},current:function(e){var t;if(e===l){t=this.listView.focus();if(!t&&this.selectedIndex===0&&this.hasOptionLabel())return this.optionLabel;return t}this._focus(e)},dataItem:function(e){var t=this;var i=null;if(e===null)return e;if(e===l)i=t.listView.selectedDataItems()[0];else{if(typeof e!=="number"){if(t.options.virtual)return t.dataSource.getByUid(s(e).data("uid"));if(e.hasClass("k-list-optionlabel"))e=-1;else e=s(t.items()).index(e)}else if(t.hasOptionLabel())e-=1;i=t.dataSource.flatView()[e]}if(!i)i=t._optionLabelDataItem();return i},refresh:function(){this.listView.refresh()},text:function(e){var t=this;var i;var n=t.options.ignoreCase;e=e===null?"":e;if(e!==l){if(typeof e!=="string"){t._textAccessor(e);return}i=n?e.toLowerCase():e;t._select(function(e){e=t._text(e);if(n)e=(e+"").toLowerCase();return e===i}).done(function(){t._textAccessor(t.dataItem()||e)})}else return t._textAccessor()},_clearFilter:function(){s(this.filterInput).val("");c.fn._clearFilter.call(this)},value:function(e){var t=this;var i=t.listView;var n=t.dataSource;var r=function(){t.value(e)};if(e===l){e=t._accessor()||t.listView.value()[0];return e===l||e===null?"":e}t.requireValueMapper(t.options,e);if(e||!t.hasOptionLabel())t._initialIndex=null;this.trigger("set",{value:e});if(t._request&&t.options.cascadeFrom&&t.listView.bound()){if(t._valueSetter)n.unbind(y,t._valueSetter);t._valueSetter=r.bind(t);n.one(y,t._valueSetter);return}if(t._isFilterEnabled()&&i.bound()&&i.isFiltered())t._clearFilter();else t._fetchData();i.value(e).done(function(){t._old=t._valueBeforeCascade=t._accessor();t._oldIndex=t.selectedIndex})},hasOptionLabel:function(){return this.optionLabel&&!!this.optionLabel[0]},_optionLabel:function(){var e=this;var t=e.options;var i=t.optionLabel;var n=t.optionLabelTemplate;if(!i){e.optionLabel.off().remove();e.optionLabel=s();return}if(!n){n="#:";if(typeof i==="string")n+="data";else n+=u.expr(t.dataTextField,"data");n+="#"}if(typeof n!=="function")n=u.template(n);e.optionLabelTemplate=n;if(!e.hasOptionLabel())e.optionLabel=s('<div role="option" class="k-list-optionlabel"></div>').prependTo(e.list);e.optionLabel.html(n(i)).off().on(r,e._click.bind(e)).on(k,e._toggleHover);e.angular("compile",function(){return{elements:e.optionLabel,data:[{dataItem:e._optionLabelDataItem()}]}})},_optionLabelText:function(){var e=this.options.optionLabel;return typeof e==="string"?e:this._text(e)},_optionLabelDataItem:function(){var e=this;var t=e.options.optionLabel;if(e.hasOptionLabel())return s.isPlainObject(t)?new g(t):e._assignInstance(e._optionLabelText(),"");return l},_buildOptions:function(e){var t=this;if(!t._isSelect)return;var i=t.listView.value()[0];var n=t._optionLabelDataItem();var r=n&&t._value(n);if(i===l||i===null)i="";if(n){if(r===l||r===null)r="";n='<option value="'+r+'">'+t._text(n)+"</option>"}t._options(e,n,i);if(i!==a.unifyType(t._accessor(),typeof i)){t._customOption=null;t._custom(i)}},_listBound:function(){var e=this;var t=e._initialIndex;var i=e._state===C;var n=e.dataSource.flatView();var r;e._presetValue=false;e._renderFooter();e._renderNoData();e._toggleNoData(!n.length);e._resizePopup(true);e.popup.position();e._buildOptions(n);if(!i){if(e._open)e.toggle(e._allowOpening());e._open=false;if(!e._fetch)if(n.length){if(!e.listView.value().length&&t>-1&&t!==null)e.select(t);e._initialIndex=null;r=e.listView.selectedDataItems()[0];if(r&&e.text()!==e._text(r))e._selectValue(r)}else if(e._textAccessor()!==e._optionLabelText()){e.listView.value("");e._selectValue(null);e._oldIndex=e.selectedIndex}}e._hideBusy();e.trigger("dataBound")},_listChange:function(){this._selectValue(this.listView.selectedDataItems()[0]);if(this._presetValue||this._old&&this._oldIndex===-1)this._oldIndex=this.selectedIndex},_filterPaste:function(){this._search()},_attachFocusHandlers:function(){var e=this;var t=e.wrapper;t.on("focusin"+i,e._focusinHandler.bind(e)).on("focusout"+i,e._focusoutHandler.bind(e));if(e.filterInput)e.filterInput.on("focusin"+i,e._focusinHandler.bind(e)).on("focusout"+i,e._focusoutHandler.bind(e))},_focusHandler:function(){this.wrapper.trigger("focus")},_focusinHandler:function(){this.wrapper.addClass(n);this._prevent=false},_focusoutHandler:function(){var e=this;var t=window.self!==window.top;if(!e._prevent){clearTimeout(e._typingTimeout);if(o.mobileOS.ios&&t)e._change();else e._blur();e.wrapper.removeClass(n);e._prevent=true;e._open=false;e.element.trigger("blur")}},_wrapperMousedown:function(){this._prevent=!!this.filterInput},_wrapperClick:function(e){e.preventDefault();this.popup.unbind("activate",this._focusInputHandler);this._focused=this.wrapper;this._prevent=false;this._toggle()},_editable:function(e){var t=this;var i=t.element;var n=e.disable;var r=e.readonly;var a=t.wrapper.add(t.filterInput).off(f);var o=t.wrapper.off(k);if(!r&&!n){i.prop(m,false).prop(_,false);o.removeClass(b).on(k,t._toggleHover);a.attr(d,a.data(d)).attr(w,false).attr(x,false).on("keydown"+f,t,t._keydown.bind(t)).on(u.support.mousedown+f,t._wrapperMousedown.bind(t)).on("paste"+f,t._filterPaste.bind(t));t.wrapper.on("click"+f,t._wrapperClick.bind(t));if(!t.filterInput)a.on("keypress"+f,t._keypress.bind(t));else a.on("input"+f,t._search.bind(t))}else if(n){a.removeAttr(d);o.addClass(b)}else o.removeClass(b);i.attr(m,n).attr(_,r);a.attr(w,n).attr(x,r)},_keydown:function(e){var t=this;var i=e.keyCode;var n=e.altKey;var r;var a;var o=t.popup.visible();if(t.filterInput)r=t.filterInput[0]===v();if(i===h.LEFT){i=h.UP;a=true}else if(i===h.RIGHT){i=h.DOWN;a=true}if(a&&r)return;e.keyCode=i;if(n&&i===h.UP||i===h.ESC)t._focusElement(t.wrapper);if(t._state===C&&i===h.ESC){t._clearFilter();t._open=false;t._state=S}if(i===h.ENTER&&t._typingTimeout&&t.filterInput&&o){e.preventDefault();return}if(i===h.SPACEBAR&&!r){t.toggle(!o);e.preventDefault()}a=t._move(e);if(a)return;if(!o||!t.filterInput){var s=t._focus();if(i===h.HOME){a=true;t._firstItem()}else if(i===h.END){a=true;t._lastItem()}if(a){if(t.trigger("select",{dataItem:t._getElementDataItem(t._focus()),item:t._focus()})){t._focus(s);return}t._select(t._focus(),true).done(function(){if(!o)t._blur()});e.preventDefault()}}if(!n&&!a&&t.filterInput)t._search()},_matchText:function(e,t){var i=this.options.ignoreCase;if(e===l||e===null)return false;e=e+"";if(i)e=e.toLowerCase();return e.indexOf(t)===0},_shuffleData:function(e,t){var i=this._optionLabelDataItem();if(i)e=[i].concat(e);return e.slice(t).concat(e.slice(0,t))},_selectNext:function(){var t=this;var e=t.dataSource.flatView();var i=e.length+(t.hasOptionLabel()?1:0);var n=P(t._word,t._last);var r=t.selectedIndex;var a;var o;if(r===-1)r=0;else{r+=n?1:0;r=I(r,i)}e=e.toJSON?e.toJSON():e.slice();e=t._shuffleData(e,r);for(var s=0;s<i;s++){o=t._text(e[s]);if(n&&t._matchText(o,t._last))break;else if(t._matchText(o,t._word))break}if(s!==i){a=t._focus();t._select(I(r+s,i)).done(function(){var e=function(){if(!t.popup.visible())t._change()};if(t.trigger("select",{dataItem:t._getElementDataItem(t._focus()),item:t._focus()}))t._select(a).done(e);else e()})}},_keypress:function(e){var t=this;if(e.which===0||e.keyCode===u.keys.ENTER)return;var i=String.fromCharCode(e.charCode||e.keyCode);if(t.options.ignoreCase)i=i.toLowerCase();if(i===" ")e.preventDefault();t._word+=i;t._last=i;t._search()},_popupOpen:function(){var e=this.popup;e.wrapper=u.wrap(e.element);if(e.element.closest(".km-root")[0]){e.wrapper.addClass("km-popup km-widget");this.wrapper.addClass("km-widget")}},_popup:function(){c.fn._popup.call(this);this.popup.one("open",this._popupOpen.bind(this))},_getElementDataItem:function(e){if(!e||!e[0])return null;if(e[0]===this.optionLabel[0])return this._optionLabelDataItem();return this.listView.dataItemByIndex(this.listView.getElementIndex(e))},_click:function(e){var t=this;var i=e.item||s(e.currentTarget);e.preventDefault();if(t.trigger("select",{dataItem:t._getElementDataItem(i),item:i})){t.close();return}t._userTriggered=true;t._select(i).done(function(){t._blur();t._focusElement(t.wrapper)})},_focusElement:function(e){var t=v();var i=this.wrapper;var n=this.filterInput;var r=e===n?i:n;var a=o.mobileOS&&(o.touch||o.MSPointers||o.pointers);if(n&&n[0]===e[0]&&a)return;if(n&&(r[0]===t||this._focusFilter)){this._focusFilter=false;this._prevent=true;this._focused=e.trigger("focus")}},_searchByWord:function(t){if(!t)return;var i=this;var e=i.options.ignoreCase;if(e)t=t.toLowerCase();i._select(function(e){return i._matchText(i._text(e),t)})},_inputValue:function(){return this.text()},_search:function(){var t=this;var e=t.dataSource;clearTimeout(t._typingTimeout);if(t._isFilterEnabled())t._typingTimeout=setTimeout(function(){var e=t.filterInput.val();if(t._prev!==e){t._prev=e;t.search(e);t._resizeFilterInput()}t._typingTimeout=null},t.options.delay);else{t._typingTimeout=setTimeout(function(){t._word=""},t.options.delay);if(!t.listView.bound()){e.fetch().done(function(){t._selectNext()});return}t._selectNext()}},_get:function(e){var t,i,n;var r=typeof e==="function";var a=!r?s(e):s();if(this.hasOptionLabel())if(typeof e==="number"){if(e>-1)e-=1}else if(a.hasClass("k-list-optionlabel"))e=-1;if(r){t=this.dataSource.flatView();for(n=0;n<t.length;n++)if(e(t[n])){e=n;i=true;break}if(!i)e=-1}return e},_firstItem:function(){if(this.hasOptionLabel())this._focus(this.optionLabel);else this.listView.focusFirst()},_lastItem:function(){this._resetOptionLabel();this.listView.focusLast()},_nextItem:function(){var e;if(this.optionLabel.hasClass("k-focus")){this._resetOptionLabel();this.listView.focusFirst();e=1}else e=this.listView.focusNext();return e},_prevItem:function(){var e;if(this.optionLabel.hasClass("k-focus"))return;e=this.listView.focusPrev();if(!this.listView.focus()&&!this.options.virtual)this._focus(this.optionLabel);return e},_focusItem:function(){var e=this.options;var t=this.listView;var i=t.focus();var n=t.select();n=n[n.length-1];if(n===l&&e.highlightFirst&&!i)n=0;if(n!==l)t.focus(n);else if(e.optionLabel&&(!e.virtual||e.virtual.mapValueTo!=="dataItem")){this._focus(this.optionLabel);this._select(this.optionLabel);this.listView.content.scrollTop(0)}else t.scrollToIndex(0)},_resetOptionLabel:function(e){this.optionLabel.removeClass("k-focus"+(e||"")).removeAttr("id")},_focus:function(e){var t=this.listView;var i=this.optionLabel;if(e===l){e=t.focus();if(!e&&i.hasClass("k-focus"))e=i;return e}this._resetOptionLabel();e=this._get(e);t.focus(e);if(e===-1){i.addClass("k-focus").attr("id",t._optionID);if(this.filterInput)this.filterInput.removeAttr("aria-activedescendant").attr("aria-activedescendant",t._optionID)}},_select:function(e,t){var i=this;e=i._get(e);return i.listView.select(e).done(function(){if(!t&&i._state===C)i._state=S;if(e===-1)i._selectValue(null)})},_selectValue:function(e){var t=this;var i=t.options.optionLabel;var n=t.listView.select();var r="";var a="";n=n[n.length-1];if(n===l)n=-1;this._resetOptionLabel(" k-selected");if(e||e===0){a=e;r=t._dataValue(e);if(i)n+=1}else if(i){t._focus(t.optionLabel.addClass("k-selected"));a=t._optionLabelText();if(typeof i==="string")r="";else r=t._value(i);n=0}t.selectedIndex=n;if(r===null)r="";t._textAccessor(a);t._accessor(r,n);t._triggerCascade()},_mobile:function(){var e=this,t=e.popup,i=o.mobileOS,n=t.element.parents(".km-root").eq(0);if(n.length&&i)t.options.animation.open.effects=i.android||i.meego?"fadeIn":i.ios||i.wp?"slideIn:up":t.options.animation.open.effects},_filterHeader:function(){var e='<div class="k-list-filter">'+'<span class="k-searchbox k-input k-input-md k-rounded-md k-input-solid" type="text" autocomplete="off">'+'<span class="k-input-icon k-icon k-i-search"></span>'+"</span>"+"</div>";if(this.filterInput){this.filterInput.off(f).closest(".k-list-filter").remove();this.filterInput=null}if(this._isFilterEnabled()){this.filterInput=s('<input class="k-input-inner" type="text" />').attr({placeholder:this.element.attr("placeholder"),title:this.options.filterTitle||this.element.attr("title"),role:"searchbox","aria-label":this.options.filterTitle,"aria-haspopup":"listbox","aria-autocomplete":"list"});this.list.parent().prepend(s(e)).find(".k-searchbox").append(this.filterInput)}},_span:function(){var e=this,t=e.wrapper,i="span.k-input-value-text",n=u.guid(),r=e.options,a,o;a=t.find(i);if(!a[0]){o=p.renderButton('<span role="button" class="k-input-button" aria-label="select"></span>',{icon:"arrow-s",size:r.size,fillMode:r.fillMode,shape:"none",rounded:"none"});t.append('<span id="'+n+'" unselectable="on" class="k-input-inner">'+'<span class="k-input-value-text"></span>'+"</span>").append(o).append(e.element);a=t.find(i)}e.span=a;e._arrow=t.find(".k-input-button");e._arrowIcon=e._arrow.find(".k-icon")},_wrapper:function(){var e=this,t=e.element,i=t[0],n;n=t.parent();if(!n.is("span.k-picker")){n=t.wrap("<span />").parent();n[0].style.cssText=i.style.cssText;n[0].title=i.title}e._focused=e.wrapper=n.addClass("k-picker k-dropdownlist").addClass(i.className).removeClass("input-validation-error").css("display","").attr({accesskey:t.attr("accesskey"),unselectable:"on",role:"combobox","aria-expanded":false});t.hide().removeAttr("accesskey")},_clearSelection:function(e){this.select(e.value()?0:-1)},_openHandler:function(e){this._adjustListWidth();if(this.trigger(A))e.preventDefault();else{this.wrapper.attr("aria-expanded",true);this.ul.attr("aria-hidden",false)}},_closeHandler:function(e){if(this.trigger(M))e.preventDefault();else{this.wrapper.attr("aria-expanded",false);this.ul.attr("aria-hidden",true)}},_inputTemplate:function(){var e=this,t=e.options.valueTemplate;if(!t)t=u.template("#:this._text(data)#",{useWithBlock:false}).bind(e);else t=u.template(t);e.valueTemplate=t;if(e.hasOptionLabel()&&!e.options.optionLabelTemplate)try{e.valueTemplate(e._optionLabelDataItem())}catch(e){throw new Error(T)}},_textAccessor:function(e){var t=null;var i=this.valueTemplate;var n=this._optionLabelText();var r=this.span;if(e===l)return r.text();if(s.isPlainObject(e)||e instanceof g)t=e;else if(n&&n===e)t=this.options.optionLabel;if(!t)t=this._assignInstance(e,this._accessor());if(this.hasOptionLabel())if(t===n||this._text(t)===n){i=this.optionLabelTemplate;if(typeof this.options.optionLabel==="string"&&!this.options.optionLabelTemplate)t=n}var a=function(){return{elements:r.get(),data:[{dataItem:t}]}};this.angular("cleanup",a);try{r.html(i(t))}catch(e){r.html("")}this.angular("compile",a)},_preselect:function(e,t){if(!e&&!t)t=this._optionLabelText();this._accessor(e);this._textAccessor(t);this._old=this._accessor();this._oldIndex=this.selectedIndex;this.listView.setValue(e);this._initialIndex=null;this._presetValue=true},_assignInstance:function(e,t){var i=this.options.dataTextField;var n={};if(i){E(n,i.split("."),e);E(n,this.options.dataValueField.split("."),t);n=new g(n)}else n=e;return n}});function E(e,t,i){var n=0,r=t.length-1,a;for(;n<r;++n){a=t[n];if(!(a in e))e[a]={};e=e[a]}e[t[r]]=i}function I(e,t){if(e>=t)e-=t;return e}function P(e,t){for(var i=0;i<e.length;i++)if(e.charAt(i)!==t)return false;return true}return e.plugin(D),u.cssProperties.registerPrefix("DropDownList","k-picker-"),u.cssProperties.registerValues("DropDownList",[{prop:"rounded",values:u.cssProperties.roundedValues.concat([["full","full"]])}]),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.selectable.min",["kendo.core.min","kendo.userevents.min"],function(){var e={id:"selectable",name:"Selectable",category:"framework",depends:["core","userevents"],advanced:true},c=window.kendo.jQuery,t=void 0,h=window.kendo,a=h.ui.Widget,n=Math.abs,o="aria-selected",f="k-selected",u="k-selecting",d="k-selectable",p="change",i=".kendoSelectable",r="unselect",v="k-unselecting",s="input,a,textarea,.k-multiselect-wrap,select,button,.k-button>span,.k-button>img,span.k-icon.k-i-arrow-60-down,span.k-icon.k-i-arrow-60-up,label.k-checkbox-label.k-no-text,.k-icon.k-i-collapse,.k-icon.k-i-expand,span.k-numeric-wrap,.k-focusable",l=h.support.browser.msie,g=false,m=c.extend,_,y=(c('<div class="parent"><span></span></div>').on("click",">*",function(){g=true}).find("span").trigger("click").end().off(),a.extend({init:function(e,t){var i=this,n,r;a.fn.init.call(i,e,t);i._marquee=c("<div class='k-marquee'><div class='k-marquee-color'></div></div>");i._lastActive=null;i.element.addClass(d);i.relatedTarget=i.options.relatedTarget;n=i.options.multiple;r=i.options.dragToSelect;i.userEvents=new h.UserEvents(i.element,{global:true,allowSelection:true,filter:(!g?"."+d+" ":"")+i.options.filter,tap:i._tap.bind(i),touchAction:n?"none":"pan-x pan-y"});if(n){if(r)i.userEvents.bind("start",i._start.bind(i)).bind("move",i._move.bind(i)).bind("end",i._end.bind(i));i.userEvents.bind("select",i._select.bind(i))}},events:[p,r],options:{name:"Selectable",filter:">*",inputSelectors:s,multiple:false,dragToSelect:true,relatedTarget:c.noop,ignoreOverlapped:false,addIdToRanges:false},_isElement:function(e){var t=this.element;var i,n=t.length,r=false;e=e[0];for(i=0;i<n;i++)if(t[i]===e){r=true;break}return r},_tap:function(e){var t=c(e.target),i=this,n=e.event.ctrlKey||e.event.metaKey,r=i.options.multiple,a=r&&e.event.shiftKey,o=i.options.selectedClass||f,s,l=e.event.which,u=e.event.button;if(!i._isElement(t.closest("."+d))||l&&l==3||u&&u==2)return;if(!this._allowSelection(e.event.target))return;s=t.hasClass(o);t=t.add(i.relatedTarget(t));if(!r){if(s&&n){i._unselect(t);i._notify(p,e)}else if(!s){i.clear();i.value(t,e);i._notify(p,e)}}else if(a){if(!i._lastRange||!b(i._lastRange,t)){i.selectRange(i._firstSelectee(),t,e);i._notify(p,e)}i._lastRange=t}else{i._lastRange=null;if(s&&n){i._unselect(t);i._notify(p,e)}else if(n){i.value(t,e);i._notify(p,e)}else if(!s||i.value().length>1){i.clear();i.value(t,e);i._notify(p,e)}i._lastActive=i._downTarget=t}},_start:function(e){var t=this,i=c(e.target),n=t.options.selectedClass||f,r=i.hasClass(n),a,o=e.event.ctrlKey||e.event.metaKey;if(!this._allowSelection(e.event.target))return;t._downTarget=i;if(!t._isElement(i.closest("."+d))){t.userEvents.cancel();return}if(t.options.useAllItems)t._items=t.element.find(t.options.filter);else{a=i.closest(t.element);t._items=a.find(t.options.filter)}e.sender.capture();t._marquee.appendTo(document.body).css({left:e.x.client+1,top:e.y.client+1,width:0,height:0});if(!o)t.clear();i=i.add(t.relatedTarget(i));if(r){t._selectElement(i,true);if(o)i.addClass(v)}},_move:function(e){var t=this,i={left:e.x.startLocation>e.x.location?e.x.location:e.x.startLocation,top:e.y.startLocation>e.y.location?e.y.location:e.y.startLocation,width:n(e.x.initialDelta),height:n(e.y.initialDelta)};t._marquee.css(i);t._invalidateSelectables(i,e.event.ctrlKey||e.event.metaKey);e.preventDefault()},_end:function(e){var t=this,i=h.attr("range-selected"),n=h.guid();t._marquee.remove();t._unselect(t.element.find(t.options.filter+"."+v)).removeClass(v);var r=t.element.find(t.options.filter+"."+u);r=r.add(t.relatedTarget(r));if(t.options.addIdToRanges)for(var a=0;a<t._currentlyActive.length;a++)c(t._currentlyActive[a]).attr(i,n);if(!t._lastRange||!b(t._lastRange,r)){t.value(r,e);t._notify(p,e)}t._lastRange=r;t._lastActive=t._downTarget;t._items=null},_invalidateSelectables:function(e,t){var i,n,r=this._downTarget[0],a=this._items,o=this.options.selectedClass||f,s,l;this._currentlyActive=[];for(i=0,n=a.length;i<n;i++){l=a.eq(i);s=l.add(this.relatedTarget(l));if(w(l,e)){if(l.hasClass(o)){if(t&&r!==l[0])s.removeClass(o).addClass(v)}else if(!l.hasClass(u)&&!l.hasClass(v)&&!this._collidesWithActiveElement(s,e))s.addClass(u);this._currentlyActive.push(s[0])}else if(l.hasClass(u))s.removeClass(u);else if(t&&l.hasClass(v))s.removeClass(v).addClass(o)}},_collidesWithActiveElement:function(e,t){if(!this.options.ignoreOverlapped)return false;var i=this._currentlyActive;var n=e[0].getBoundingClientRect();var r;var a=false;var o=h.support.isRtl(e);var s=o?"right":"left";var l={};t.right=t.left+t.width;t.bottom=t.top+t.height;for(var u=0;u<i.length;u++){r=i[u].getBoundingClientRect();if(x(n,r)){l[s]=s==="left"?r.right:r.left;n=m({},n,l);if(n.left>n.right)return true;a=!x(n,t)}}return a},value:function(e){var t=this,i=t._selectElement.bind(t);if(e){e.each(function(){i(this)});return}return t.element.find(t.options.filter+"."+(t.options.selectedClass||f))},selectedRanges:function(){var e=this;var r=h.attr("range-selected");var a={};e.element.find("["+r+"]").each(function(e,t){var i=c(t).attr(r);var n=a[i];if(!n)n=a[i]=[];n.push(c(t))});return a},selectedSingleItems:function(){var e=this;var t=h.attr("range-selected");return e.element.find(e.options.filter+"."+(e.options.selectedClass||f)+":not(["+t+"])").toArray().map(function(e){return c(e)})},_firstSelectee:function(){var e=this,t;if(e._lastActive!==null)return e._lastActive;t=e.value();return t.length>0?t[0]:e.element.find(e.options.filter)[0]},_selectElement:function(e,t){var i=c(e),n=this.options.selectedClass||f,r=!t&&this._notify("select",{element:e});i.removeClass(u);if(!r){i.addClass(n);if(this.options.aria)i.attr(o,true)}},_notify:function(e,t){t=t||{};return this.trigger(e,t)},_unselect:function(e){if(this.trigger(r,{element:e}))return;var t=h.attr("range-selected");e.removeClass(this.options.selectedClass||f).removeAttr(t);if(this.options.aria)e.attr(o,false);return e},_select:function(e){if(this._allowSelection(e.event.target))if(!l||l&&!c(h._activeElement()).is(this.options.inputSelectors))e.preventDefault()},_allowSelection:function(e){if(c(e).is(this.options.inputSelectors)){this.userEvents.cancel();this._downTarget=null;return false}return true},resetTouchEvents:function(){this.userEvents.cancel()},clear:function(){var e=this.element.find(this.options.filter+"."+(this.options.selectedClass||f));this._unselect(e)},selectRange:function(e,t){var i=this,n,r,a;i.clear();if(i.element.length>1)a=i.options.continuousItems();if(!a||!a.length)a=i.element.find(i.options.filter);e=c.inArray(c(e)[0],a);t=c.inArray(c(t)[0],a);if(e>t){r=e;e=t;t=r}if(!i.options.useAllItems)t+=i.element.length-1;for(n=e;n<=t;n++)i._selectElement(a[n],true)},destroy:function(){var e=this;a.fn.destroy.call(e);e.element.off(i);e.userEvents.destroy();e._marquee=e._lastActive=e.element=e.userEvents=null}}));function b(e,t){if(e.length!==t.length)return false;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return false;return true}function w(e,t){if(!e.is(":visible"))return false;var i=h.getOffset(e),n=t.left+t.width,r=t.top+t.height;i.right=i.left+h._outerWidth(e);i.bottom=i.top+h._outerHeight(e);return!(i.left>n||i.right<t.left||i.top>r||i.bottom<t.top)}function x(e,t){return!(e.right<=t.left||e.left>=t.right||e.bottom<=t.top||e.top>=t.bottom)}return y.parseOptions=function(e){var t=e.mode||e;var i=typeof t==="string"&&t.toLowerCase();return{multiple:i&&i.indexOf("multiple")>-1,cell:i&&i.indexOf("cell")>-1}},h.ui.plugin(y),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.calendar.min",["kendo.core.min","kendo.selectable.min"],function(){var e={id:"calendar",name:"Calendar",category:"web",description:"The Calendar widget renders a graphical calendar that supports navigation and selection.",depends:["core","selectable"]},y=window.kendo.jQuery,x=void 0,T=window.kendo,t=T.support,i=T.ui,a=i.Widget,g=T.keys,s=T.parseDate,D=T.date.adjustDST,E=T.date.weekInYear,r=T.ui.Selectable,l=T._extractFormat,c=T.template,h=T.getCulture,n=T.support.transitions,f=n?n.css+"transform-origin":"",k=c('<td class="#=data.cssClass#" role="gridcell"><a tabindex="-1" class="k-link" href="\\#" data-#=data.ns#value="#=data.dateString#">#=data.value#</a></td>',{useWithBlock:false}),C=c('<td role="gridcell" class="k-calendar-td k-out-of-range"><a class="k-link"></a></td>',{useWithBlock:false}),S=c('<td role="gridcell" class="k-calendar-td k-out-of-range">&nbsp;</td>',{useWithBlock:false}),I=c('<td class="k-calendar-td k-alt">#= data.weekNumber #</td>',{useWithBlock:false}),d=T._outerWidth,u=".kendoCalendar",p="click"+u,v="keydown"+u,_="id",P="min",B="left",O="slideIn",z="month",L="century",R="change",F="navigate",V="value",N="k-hover",H="k-disabled",U="k-focus",j="k-other-month",G,W="k-nav-today",q="td:has(.k-link)",o="td:has(.k-link):not(."+H+"):not(."+"k-out-of-range"+")",Y="td:not(:has(.k-link))",$="k-selected",X="blur"+u,K="focus",Q=K+u,Z=t.touch?"touchstart":"mouseenter",J=t.touch?"touchstart"+u:"mouseenter"+u,ee=t.touch?"touchend"+u+" touchmove"+u:"mouseleave"+u,te=6e4,ie=864e5,ne="_prevArrow",re="_nextArrow",ae="aria-disabled",oe="aria-selected",se="aria-label",le=y.extend,b=Date,w={month:0,year:1,decade:2,century:3},ue=".k-header, .k-calendar-header",ce='<div class="k-header k-hstack">'+'<a tabindex="-1" href="\\#" #=actionAttr#="prev" role="button" class="k-nav-prev k-button #=size# k-rounded-md k-button-flat k-button-flat-base k-icon-button" '+se+'="Previous"><span class="k-button-icon k-icon k-i-arrow-60-left"></span></a>'+'<a tabindex="-1" href="\\#" #=actionAttr#="nav-up" role="button" id="nav-up" class="k-nav-fast k-button #=size# k-rounded-md k-button-flat k-button-flat-base  k-flex"></a>'+'<a tabindex="-1" href="\\#" #=actionAttr#="next" role="button" class="k-nav-next k-button #=size# k-rounded-md k-button-flat k-button-flat-base  k-icon-button" '+se+'="Next"><span class="k-icon k-i-arrow-60-right"></span></a>'+"</div>",he='<div class="k-calendar-header k-hstack">'+'<a href="\\#" #=actionAttr#="nav-up" id="nav-up" role="button" class="k-calendar-title k-title k-button #=size# k-rounded-md k-button-flat k-button-flat-base "></a>'+'<span class="k-spacer"></span>'+'<span class="k-calendar-nav k-hstack">'+'<a tabindex="-1" #=actionAttr#="prev" class="k-button #=size# k-rounded-md k-button-flat k-button-flat-base  k-icon-button k-prev-view">'+'<span class="k-button-icon k-icon k-i-arrow-60-left"></span>'+"</a>"+'<a tabindex="-1" #=actionAttr#="today" class="k-nav-today">#=messages.today#</a>'+'<a tabindex="-1" #=actionAttr#="next" class="k-button #=size# k-rounded-md k-button-flat k-button-flat-base  k-icon-button k-next-view">'+'<span class="k-button-icon k-icon k-i-arrow-60-right"></span>'+"</a>"+"</span>"+"</div>",fe=a.extend({init:function(e,n){var r=this,t,i;n=n||{};n.componentType=n.componentType||"classic";a.fn.init.call(r,e,n);e=r.wrapper=r.element;n=r.options;n.url=T.unescape(n.url);r.options.disableDates=Ie(r.options.disableDates);r._templates();r._selectable();r._header();r._viewWrapper();if(r.options.hasFooter)r._footer(r.footer);else{r._today=r.element.find("a.k-nav-today");r._toggle()}i=e.addClass("k-widget k-calendar "+(n.weekNumber?" k-week-number":"")).on(J+" "+ee,q,ke).on(v,"table.k-content",r._move.bind(r)).on(p+" touchend",q,function(e){var t=e.currentTarget.firstChild,i=m(t);if(t.href.indexOf("#")!=-1)e.preventDefault();if(r._view.name=="month"&&r.options.disableDates(i))return;if(r._view.name!="month"||n.selectable=="single")r._click(y(t))}).on("mouseup"+u,"table.k-content, .k-footer",function(){r._focusView(r.options.focusOnNav!==false)}).attr(_);if(r._isMultipleSelection()&&r.options.weekNumber)e.on(p,Y,function(e){var t=y(e.currentTarget).closest("tr").find(o).first(),i=r.selectable._lastActive=y(e.currentTarget).closest("tr").find(o).last();r.selectable.selectRange(t,i);r.selectable.trigger(R,{event:e});r._current=r._value=m(i.find("a"));r._setCurrent(r._current)});Te(n);t=s(n.value,n.format,n.culture);r._selectDates=[];r._index=w[n.start];r._current=new b(+me(t,n.min,n.max));r._addClassProxy=function(){r._active=true;if(r._cell.hasClass(H)){var e=r._view.toDateString(ge());r._cell=r._cellByDate(e)}r._cell.addClass(U)};r._removeClassProxy=function(){r._active=false;if(r._cell)r._cell.removeClass(U)};r.value(t);if(r._isMultipleSelection()&&n.selectDates.length>0)r.selectDates(n.selectDates);T.notify(r)},options:{name:"Calendar",value:null,min:new b(1900,0,1),max:new b(2099,11,31),dates:[],disableDates:null,url:"",culture:"",footer:"",format:"",month:{},weekNumber:false,selectable:"single",selectDates:[],start:z,depth:z,size:"medium",animation:{horizontal:{effects:O,reverse:true,duration:500,divisor:2},vertical:{effects:"zoomIn",duration:400}},messages:{weekColumnHeader:"",today:"Today",navigateTo:"Navigate to ",parentViews:{month:"year view",year:"decade view",decade:"century view"}},componentType:"classic"},events:[R,F],componentTypes:{classic:{header:{template:ce},hasFooter:true,linksSelector:".k-button",contentClasses:"k-calendar-table k-content"},modern:{header:{template:he},hasFooter:false,linksSelector:".k-button",contentClasses:"k-calendar-table k-content k-calendar-content"}},setOptions:function(e){var t=this;Te(e);e.disableDates=Ie(e.disableDates);t._destroySelectable();if(e.messages)e.messages=y.extend({},true,t.options.messages,e.messages);a.fn.setOptions.call(t,e);t._templates();t._selectable();t._viewWrapper();if(t.options.hasFooter)t._footer(t.footer);else{t.element.find(".k-footer").hide();t._toggle()}t._index=w[t.options.start];t.navigate();if(e.weekNumber)t.element.addClass("k-week-number")},destroy:function(){var e=this,t=e._today;e.element.off(u);e._title.off(u);e[ne].off(u);e[re].off(u);e._destroySelectable();T.destroy(e._table);if(t)T.destroy(t.off(u));a.fn.destroy.call(e)},current:function(){return this._current},view:function(){return this._view},focus:function(e){e=e||this._table;this._bindTable(e);e.trigger("focus")},min:function(e){return this._option(P,e)},max:function(e){return this._option("max",e)},navigateToPast:function(){this._navigate(ne,-1)},navigateToFuture:function(){this._navigate(re,1)},navigateUp:function(){var e=this,t=e._index;if(e._title.hasClass(H))return;e.navigate(e._current,++t)},navigateDown:function(e){var t=this,i=t._index,n=t.options.depth;if(!e)return;if(i===w[n]){if(!Oe(t._value,t._current)||!Oe(t._value,e)){t.value(e);t.trigger(R)}return}t.navigate(e,--i)},navigate:function(e,t){t=isNaN(t)?w[t]:t;var i=this,n=i.options,c=n.culture,r=n.min,a=n.max,o=i._title,s=i._table,h=i._oldTable,f=i._current,d=e&&+e>+f,p=t!==x&&t!==i._index,v,l,g,u,m=i.element.children(".k-calendar-view");if(!e)e=f;i._current=e=new b(+me(e,r,a));if(t===x)t=i._index;else i._index=t;i._view=l=A.views[t];g=l.compare;u=t===w[L];o.toggleClass(H,u).attr(ae,u);u=g(e,r)<1;i[ne].toggleClass(H,u).attr(ae,u);u=g(e,a)>-1;i[re].toggleClass(H,u).attr(ae,u);if(s&&h&&h.data("animating")){h.kendoStop(true,true);s.kendoStop(true,true)}i._oldTable=s;if(!s||i._changeView){o.html(l.title(e,r,a,c));if(i.options.messages.parentViews&&i._view.name!==L)o.attr("title",i.options.messages.navigateTo+i.options.messages.parentViews[i._view.name]);else o.removeAttr("title");i._table=v=y(l.content(le({min:r,max:a,date:e,url:n.url,dates:n.dates,format:n.format,otherMonth:true,culture:c,disableDates:n.disableDates,isWeekColumnVisible:n.weekNumber,messages:n.messages,contentClasses:i.options.contentClasses},i[l.name])));i._aria();Ae(v,l.name);var _=s&&s.data("start")===v.data("start");i._animate({from:s,to:v,vertical:p,future:d,replace:_});m.removeClass("k-calendar-monthview k-calendar-yearview k-calendar-decadeview k-calendar-centuryview");m.addClass("k-calendar-"+l.name+"view");i.trigger(F);i._focus(e)}if(t===w[n.depth]&&i._selectDates.length>0)i._visualizeSelectedDatesInView();if(i.options.selectable==="single")if(t===w[n.depth]&&i._value&&!i.options.disableDates(i._value))i._selectCell(i._value);i._setCurrent(e);if(!s&&i._cell)i._cell.removeClass(U);i._changeView=true},selectDates:function(e){var t=this,i,n;if(e===x)return t._selectDates;n=e.map(function(e){return e.getTime()}).filter(function(e,t,i){return i.indexOf(e)===t}).map(function(e){return new Date(e)});i=y.grep(n,function(e){if(e)return+t._validateValue(new Date(e.setHours(0,0,0,0)))===+e});t._selectDates=i.length>0?i:n.length===0?n:t._selectDates;t._visualizeSelectedDatesInView()},value:function(e){var t=this,i=t._view,n=t._view;if(e===x)return t._value;e=t._validateValue(e);if(e&&t._isMultipleSelection()){var r=new Date(+e);r.setHours(0,0,0,0);t._selectDates=[r];t.selectable._lastActive=null}if(i&&e===null&&t._cell)t._cell.removeClass($);else{t._changeView=!e||n&&n.compare(e,t._current)!==0;t.navigate(e)}},_aria:function(){var e=this._table;e.attr("aria-labelledby",this._title.attr("id"));if(this._view.name==="month"&&this.options.selectable==="multiple")e.attr("aria-multiselectable","true")},_validateValue:function(e){var t=this,i=t.options,n=i.min,r=i.max;if(e===null)t._current=M(t._current.getFullYear(),t._current.getMonth(),t._current.getDate());e=s(e,i.format,i.culture);if(e!==null){e=new b(+e);if(!_e(e,n,r))e=null}if(e===null||!t.options.disableDates(new Date(+e)))t._value=e;else if(t._value===x)t._value=null;return t._value},_visualizeSelectedDatesInView:function(){var e=this;var i={};y.each(e._selectDates,function(e,t){i[T.calendar.views[0].toDateString(t)]=t});e.selectable.clear();var t=e._table.find(q).filter(function(e,t){return i[y(t.firstChild).attr(T.attr(V))]});if(t.length>0)e.selectable._selectElement(t,true)},_isMultipleSelection:function(){var e=this;return e.options.selectable==="multiple"},_selectable:function(){var e=this;if(!e._isMultipleSelection())return;var t=e.options.selectable,i=r.parseOptions(t);e.selectable=new r(e.wrapper,{aria:true,inputSelectors:"input,textarea,.k-multiselect-wrap,select,button,.k-button>span,.k-button>img,span.k-icon.k-i-arrow-60-down,span.k-icon.k-i-arrow-60-up",multiple:i.multiple,filter:"table.k-month:eq(0) "+o,change:e._onSelect.bind(e),relatedTarget:e._onRelatedTarget.bind(e)})},_onRelatedTarget:function(e){var t=this;if(t.selectable.options.multiple&&e.is(o)){t._current=m(e.find("a"));t._setCurrent(t._current)}},_onSelect:function(e){var n=this,t=e,i=r.parseOptions(n.options.selectable);if(!i.multiple){if(y(t.event.currentTarget).is("td")&&!y(t.event.currentTarget).hasClass("k-selected"))y(t.event.currentTarget).addClass("k-selected");else n._click(y(t.event.currentTarget).find("a"));return}if(t.event.ctrlKey||t.event.metaKey)if(y(t.event.currentTarget).is(o))n._toggleSelection(y(t.event.currentTarget));else{n._cellsBySelector(o).each(function(e,t){var i=m(y(t).find("a"));n._deselect(i)});n._addSelectedCellsToArray()}else if(t.event.shiftKey)n._rangeSelection(n._cell);else if(y(t.event.currentTarget).is(q))n.value(m(y(t.event.currentTarget).find("a")));else{n._selectDates=[];n._addSelectedCellsToArray()}n.trigger(R)},_destroySelectable:function(){var e=this;if(e.selectable){e.selectable.destroy();e.selectable=null}},_toggleSelection:function(e){var t=this,i=m(e.find("a"));if(e.hasClass("k-selected"))t._selectDates.push(i);else t._deselect(i)},_rangeSelection:function(e,t){var i=this,n=t||m(i.selectable.value().first().find("a")),r=m(e.find("a")),a;if(i.selectable._lastActive||i._value)n=i.selectable._lastActive?m(i.selectable._lastActive.find("a")):new Date(+i._value);else i.selectable._lastActive=t?i._cellByDate(i._view.toDateString(t),o):i.selectable.value().first();i._selectDates=[];a=we(n,r);xe(i._selectDates,a,n,i.options.disableDates);i._visualizeSelectedDatesInView()},_cellsBySelector:function(e){var t=this;return t._table.find(e)},_addSelectedCellsToArray:function(){var n=this;n.selectable.value().each(function(e,t){var i=m(y(t.firstChild));if(!n.options.disableDates(i))n._selectDates.push(i)})},_deselect:function(e){var t=this;var i=t._selectDates.map(Number).indexOf(+e);if(i!=-1)t._selectDates.splice(i,1)},_dateInView:function(e){var t=this,i=m(t._cellsBySelector(o).first().find("a")),n=m(t._cellsBySelector(o).last().find("a"));return+e<=+n&&+e>=+i},_isNavigatable:function(e,t){var i=this;var n=i.options.disableDates;var r;var a;if(i._view.name=="month")return!n(e);else{a=i.wrapper.find("."+U).index();r=i.wrapper.find(".k-content td").eq(a+t);return r.is(o)||!n(e)}},_move:function(e){var t=this,c=t.options,i=e.keyCode,h=t._view,f=t._index,n=t.options.min,d=t.options.max,r=new b(+t._current),a=T.support.isRtl(t.wrapper),p=t.options.disableDates,o,s,l,u;if(e.target===t._table[0])t._active=true;if(i==g.RIGHT&&!a||i==g.LEFT&&a){o=1;s=true}else if(i==g.LEFT&&!a||i==g.RIGHT&&a){o=-1;s=true}else if(i==g.UP){o=f===0?-7:-4;s=true}else if(i==g.DOWN){o=f===0?7:4;s=true}else if(i==g.SPACEBAR){o=0;s=true}else if(i==g.HOME||i==g.END){l=i==g.HOME?"first":"last";u=h[l](r);r=new b(u.getFullYear(),u.getMonth(),u.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds());r.setFullYear(u.getFullYear());s=true}else if(i===84){t._todayClick(e);s=true}if(e.ctrlKey||e.metaKey){if(i==g.RIGHT&&!a||i==g.LEFT&&a){t.navigateToFuture();s=true}else if(i==g.LEFT&&!a||i==g.RIGHT&&a){t.navigateToPast();s=true}else if(i==g.UP){t.navigateUp();s=true}else if(i==g.DOWN){t._click(y(t._cell[0].firstChild));s=true}else if((i==g.ENTER||i==g.SPACEBAR)&&t._isMultipleSelection()){t._keyboardToggleSelection(e);var v=m(y(t._cell[0]).find("a"));t._setCurrent(v)}}else if(e.shiftKey){if(o!==x||l){if(!l)h.setDate(r,o);if(!_e(r,n,d))r=me(r,c.min,c.max);if(p(r))r=t._nextNavigatable(r,o);n=M(n.getFullYear(),n.getMonth(),n.getDate());if(t._isMultipleSelection())t._keyboardRangeSelection(e,r);else t._focus(r)}}else{if(i==g.ENTER||i==g.SPACEBAR){if(h.name=="month"&&t._isMultipleSelection()){t.value(m(y(t._cell.find("a"))));t.selectable._lastActive=y(t._cell[0]);t.trigger(R)}else t._click(y(t._cell[0].firstChild));s=true}else if(i==g.PAGEUP){s=true;t.navigateToPast()}else if(i==g.PAGEDOWN){s=true;t.navigateToFuture()}if(o||l){if(!l)h.setDate(r,o);n=M(n.getFullYear(),n.getMonth(),n.getDate());if(!_e(r,n,d))r=me(r,c.min,c.max);if(!t._isNavigatable(r,o))r=t._nextNavigatable(r,o);if(t._isMultipleSelection())if(!t._dateInView(r))t.navigate(r);else{t._current=r;t._setCurrent(r)}else t._focus(r)}}if(s)e.preventDefault();return t._current},_keyboardRangeSelection:function(e,t){var i=this,n,r;if(!i._dateInView(t)){i._selectDates=[];n=i.selectable._lastActive?m(i.selectable._lastActive.find("a")):t;r=we(n,new Date(+t));xe(i._selectDates,r,n,i.options.disableDates);i.navigate(t);i._current=t;i.selectable._lastActive=i.selectable._lastActive||i._cellByDate(i._view.toDateString(t),o);i.trigger(R);return}i.selectable.options.filter=i.wrapper.find("table").length>1&&+t>+i._current?"table.k-month:eq(1) "+o:"table.k-month:eq(0) "+o;i._setCurrent(t);i._current=t;i._rangeSelection(i._cellByDate(i._view.toDateString(t),o),t);i.trigger(R);i.selectable.options.filter="table.k-month:eq(0) "+o},_keyboardToggleSelection:function(e){var t=this;e.currentTarget=t._cell[0];t.selectable._lastActive=y(t._cell[0]);if(y(t._cell[0]).hasClass($))t.selectable._unselect(y(t._cell[0]));else t.selectable.value(y(t._cell[0]));t.selectable.trigger(R,{event:e})},_nextNavigatable:function(e,t){var i=this,n=true,r=i._view,a=i.options.min,o=i.options.max,s=i.options.disableDates,l=new Date(e.getTime());r.setDate(l,-t);while(n){r.setDate(e,t);if(!_e(e,a,o)){e=l;break}n=s(e)}return e},_animate:function(e){var t=this;var i=e.from;var n=e.to;var r=t._active;var a=t.element.children(".k-calendar-view");if(!i){a.append(n);t._bindTable(n)}else if(i.parent().data("animating")){i.off(u);i.parent().kendoStop(true,true).remove();i.remove();a.append(n);t._focusView(r)}else if(!i.is(":visible")||t.options.animation===false||e.replace){n.insertAfter(i);i.off(u).remove();t._focusView(r)}else t[e.vertical?"_vertical":"_horizontal"](i,n,e.future)},_horizontal:function(e,t,i){var n=this,r=n._active,a=n.options.animation.horizontal,o=a.effects,s=d(e),l=d(e,true)-s;if(o&&o.indexOf(O)!=-1){e.add(t).css({width:s});e.wrap("<div/>");n._focusView(r,e);e.parent().css({position:"relative",width:s*2+2*l,display:"flex","margin-left":i?0:-s-l});t[i?"insertAfter":"insertBefore"](e);le(a,{effects:O+":"+(i?"right":B),complete:function(){e.off(u).remove();n._oldTable=null;t.unwrap();n._focusView(r)}});e.parent().kendoStop(true,true).kendoAnimate(a)}},_vertical:function(e,t){var i=this,n=i.options.animation.vertical,r=n.effects,a=i._active,o,s;if(r&&r.indexOf("zoom")!=-1){t.insertBefore(e);e.css({position:"absolute",width:t.width()});if(f){o=i._cellByDate(i._view.toDateString(i._current));s=o.position();s=s.left+parseInt(o.width()/2,10)+"px"+" "+(s.top+parseInt(o.height()/2,10)+"px");t.css(f,s)}e.kendoStop(true,true).kendoAnimate({effects:"fadeOut",duration:600,complete:function(){e.off(u).remove();i._oldTable=null;i._focusView(a)}});t.kendoStop(true,true).kendoAnimate(n)}},_cellByDate:function(e,t){return this._table.find(t?t:"td:not(."+j+")").filter(function(){return y(this.firstChild).attr(T.attr(V))===e})},_selectCell:function(e){var t=this,i=t._selectedCell,n=t._view.toDateString(e);if(i&&i[0]){i[0].removeAttribute(oe);i.removeClass($)}i=t._cellByDate(n,t.options.selectable=="multiple"?q:"td:not(."+j+")");t._selectedCell=i;i.addClass($).attr(oe,true)},_setCurrent:function(e){var t=this,i=T.guid(),n=t._cell,r=t._view.toDateString(e);if(n&&n[0]){n.removeClass(U);n[0].removeAttribute(se);n[0].removeAttribute(_)}n=t._cellByDate(r,t.options.selectable=="multiple"?q:"td:not(."+j+")");t._cell=n;n.attr(_,i).addClass(U);if(t._table[0]){t._table[0].removeAttribute("aria-activedescendant");t._table.attr("aria-activedescendant",i)}},_bindTable:function(e){e.on(Q,this._addClassProxy).on(X,this._removeClassProxy)},_click:function(e){var t=this,i=t.options,n=new Date(+t._current),r=m(e);D(r,0);if(t._view.name=="month"&&t.options.disableDates(r))r=t._value;t._view.setDate(n,r);t.navigateDown(me(n,i.min,i.max))},_focus:function(e){var t=this,i=t._view;if(i.compare(e,t._current)!==0)t.navigate(e);else{t._current=e;t._setCurrent(e)}},_focusView:function(e,t){if(e)this.focus(t)},_viewWrapper:function(){var e=this;var t=e.element;var i=t.children(".k-calendar-view");if(!i[0])i=y("<div class='k-calendar-view' />").insertAfter(t.find(ue))},_footer:function(e){var t=this,i=ge(),n=t.element,r=n.find(".k-footer");if(!e){t._toggle(false);r.hide();return}if(!r[0])r=y('<div class="k-footer"><a tabindex="-1" href="#" class="k-link k-nav-today"></a></div>').appendTo(n);t._today=r.show().find(".k-link").html(e(i)).attr("title",T.toString(i,"D",t.options.culture));t._toggle()},_header:function(){var e=this,t=e.element,i=e.options.linksSelector;if(!t.find(ue)[0])t.html(T.template(e.options.header.template)(y.extend(true,{},e.options,{actionAttr:T.attr("action"),size:T.getValidCssClass("k-button-","size",e.options.size)})));t.find(i).on(p+" touchend"+u,function(){return false});e._title=t.find("["+T.attr("action")+'="nav-up"]').on(p+" touchend"+u,function(){e._active=e.options.focusOnNav!==false;e.navigateUp()});e[ne]=t.find("["+T.attr("action")+'="prev"]').on(p+" touchend"+u,function(){e._active=e.options.focusOnNav!==false;e.navigateToPast()});e[re]=t.find("["+T.attr("action")+'="next"]').on(p+" touchend"+u,function(){e._active=e.options.focusOnNav!==false;e.navigateToFuture()});t.find("["+T.attr("action")+'="today"]').on(p+" touchend"+u,e._todayClick.bind(e))},_navigate:function(e,t){var i=this,n=i._index+1,r=new b(+i._current);if(i._isMultipleSelection()){var a=i._table.find("td:not(.k-other-month):not(.k-out-of-range)").has(".k-link").first();r=m(a.find("a"));i._current=new Date(+r)}e=i[e];if(!e.hasClass(H)){if(n>3)r.setFullYear(r.getFullYear()+100*t);else A.views[n].setDate(r,t);i.navigate(r)}},_option:function(e,t){var i=this,n=i.options,r=i._value||i._current,a;if(t===x)return n[e];t=s(t,n.format,n.culture);if(!t)return;n[e]=new b(+t);if(e===P)a=t>r;else a=r>t;if(a||Ee(r,t)){if(a)i._value=null;i._changeView=true}if(!i._changeView)i._changeView=!!(n.month.content||n.month.empty);i.navigate(i._value);i._toggle()},_toggle:function(e){var t=this,i=t.options,n=t.options.disableDates(ge()),r=t._today,a=t._todayClass();if(e===x)e=_e(ge(),i.min,i.max);if(r){r.off(p);if(e&&!n)r.addClass(a).removeClass(H).on(p,t._todayClick.bind(t));else r.removeClass(a).addClass(H).on(p,Ce)}},_todayClass:function(){return W},_todayClick:function(e){var t=this,i=w[t.options.depth],n=t.options.disableDates,r=ge();e.preventDefault();if(n(r))return;if(t._view.compare(t._current,r)===0&&t._index==i)t._changeView=false;if(t._isMultipleSelection()){t._selectDates=[r];t.selectable._lastActive=null}t._value=r;t.navigate(r,i);t.trigger(R)},_templates:function(){var e=this,t=e.options,i=t.footer,n=t.month,r=n.content,a=n.weekNumber,o=n.empty,s='#= kendo.toString(data,"D","'+t.culture+'") #';e.month={content:c('<td class="#=data.cssClass#" role="gridcell"><a tabindex="-1" class="k-link#=data.linkClass#" href="#=data.url#" '+T.attr(V)+'="#=data.dateString#" title="#=data.title#">'+(r||"#=data.value#")+"</a></td>",{useWithBlock:!!r}),empty:c('<td role="gridcell">'+(o||"&nbsp;")+"</td>",{useWithBlock:!!o}),weekNumber:c('<td class="k-alt">'+(a||"#= data.weekNumber #")+"</td>",{useWithBlock:!!a})};e.year={content:c('<td class="#=data.cssClass#" role="gridcell"><a tabindex="-1" class="k-link" href="\\#" data-#=data.ns#value="#=data.dateString#" aria-label="#=data.label#">#=data.value#</a></td>',{useWithBlock:false})};if(i&&i!==true)s=i;e.footer=i!==false?c(s,{useWithBlock:false}):null},_updateAria:function(e,t){var i=this;var n=i._cell;var r=i.view().valueType();var a=t||i.current();var o;if(r==="month")o=T.toString(a,"MMMM");else if(r==="date")o=T.toString(a,"D");else o=n.text();n.attr("aria-label",e({current:a,valueType:r,text:o}));return n.attr("id")}}),A=(i.plugin(fe),{firstDayOfMonth:function(e){return M(e.getFullYear(),e.getMonth(),1)},firstVisibleDay:function(e,t){t=t||T.culture().calendar;var i=t.firstDay,n=new b(e.getFullYear(),e.getMonth(),1,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());n.setFullYear(e.getFullYear());while(n.getDay()!=i)A.setTime(n,-1*ie);return n},setTime:function(e,t){var i=e.getTimezoneOffset(),n=new b(e.getTime()+t),r=n.getTimezoneOffset()-i;e.setTime(n.getTime()+r*te)},views:[{name:z,title:function(e,t,i,n){return Se(n).months.names[e.getMonth()]+" "+e.getFullYear()},content:function(e){var t=this,i=0,n=e.min,r=e.max,a=e.date,s=e.dates,c=e.format,l=e.culture,h=e.url,f=e.showHeader,d=e.otherMonth,p=e.isWeekColumnVisible,v=h&&s[0],g=Se(l),m=g.firstDay,_=g.days,y=ye(_.names,m),b=ye(_.namesShort,m),w=A.firstVisibleDay(a,g),x=t.first(a),k=t.last(a),C=t.toDateString,u=ge(),S=e.contentClasses,o='<table tabindex="0" role="grid" class="'+S+'" cellspacing="0" data-start="'+C(w)+'">';if(f)o+='<caption class="k-calendar-caption k-month-header">'+this.title(a,n,r,l)+"</caption>";o+='<thead class="k-calendar-thead"><tr role="row" class="k-calendar-tr">';if(p)o+='<th scope="col" class="k-calendar-th k-alt">'+e.messages.weekColumnHeader+"</th>";for(;i<7;i++)o+='<th scope="col" class="k-calendar-th" aria-label="'+y[i]+'">'+b[i]+"</th>";D(u,0);u=+u;return pe({cells:42,perRow:7,html:o+='</tr></thead><tbody class="k-calendar-tbody"><tr role="row" class="k-calendar-tr">',start:w,isWeekColumnVisible:p,weekNumber:e.weekNumber,min:M(n.getFullYear(),n.getMonth(),n.getDate()),max:M(r.getFullYear(),r.getMonth(),r.getDate()),otherMonth:d,content:e.content,lastDayOfMonth:k,empty:e.empty,setter:t.setDate,disableDates:e.disableDates,build:function(e,t,i){var n=["k-calendar-td"],r=e.getDay(),a="",o="#";if(e<x||e>k)n.push(j);if(i(e))n.push(H);if(+e===u)n.push("k-today");if(r===0||r===6)n.push("k-weekend");if(v&&Me(+e,s)){o=h.replace("{0}",T.toString(e,c,l));a=" k-action-link"}return{date:e,dates:s,ns:T.ns,title:T.toString(e,"D",l),value:e.getDate(),dateString:C(e),cssClass:n.join(" "),linkClass:a,url:o}},weekNumberBuild:function(e){return{weekNumber:E(e,T.culture().calendar.firstDay),currentDate:e}}})},first:function(e){return A.firstDayOfMonth(e)},last:function(e){var t=M(e.getFullYear(),e.getMonth()+1,0),i=A.firstDayOfMonth(e),n=Math.abs(t.getTimezoneOffset()-i.getTimezoneOffset());if(n)t.setHours(i.getHours()+n/60);return t},compare:function(e,t){var i,n=e.getMonth(),r=e.getFullYear(),a=t.getMonth(),o=t.getFullYear();if(r>o)i=1;else if(r<o)i=-1;else i=n==a?0:n>a?1:-1;return i},setDate:function(e,t){var i=e.getHours();if(t instanceof b)e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate());else A.setTime(e,t*ie);D(e,i)},toDateString:function(e){return e.getFullYear()+"/"+e.getMonth()+"/"+e.getDate()},valueType:function(){return"date"}},{name:"year",title:function(e){return e.getFullYear()},content:function(e){var t=Se(e.culture).months,i=t.namesAbbr,n=t.names,r=this.toDateString,a=e.min,o=e.max,s="";if(e.showHeader){s+='<table tabindex="0" role="grid" class="k-calendar-table k-content k-meta-view" cellspacing="0">';s+='<caption class="k-calendar-caption k-meta-header">';s+=this.title(e.date);s+="</caption>";s+='<tbody class="k-calendar-tbody">';s+='<tr role="row" class="k-calendar-tr">'}return pe({min:M(a.getFullYear(),a.getMonth(),1),max:M(o.getFullYear(),o.getMonth(),1),start:M(e.date.getFullYear(),0,1),html:s,setter:this.setDate,content:e.content,build:function(e){var t=["k-calendar-td"];return{value:i[e.getMonth()],label:n[e.getMonth()],ns:T.ns,dateString:r(e),cssClass:t.join(" ")}}})},first:function(e){return M(e.getFullYear(),0,e.getDate())},last:function(e){return M(e.getFullYear(),11,e.getDate())},compare:function(e,t){return ve(e,t)},setDate:function(e,t){var i,n=e.getHours();if(t instanceof b){i=t.getMonth();e.setFullYear(t.getFullYear(),i,e.getDate());if(i!==e.getMonth())e.setDate(0)}else{i=e.getMonth()+t;e.setMonth(i);if(i>11)i-=12;if(i>0&&e.getMonth()!=i)e.setDate(0)}D(e,n)},toDateString:function(e){return e.getFullYear()+"/"+e.getMonth()+"/1"},valueType:function(){return"month"}},{name:"decade",title:function(e,t,i){return de(e,t,i,10)},content:function(e){var t=e.date.getFullYear(),n=this.toDateString,i="";if(e.showHeader){i+='<table tabindex="0" role="grid" class="k-calendar-table k-content k-meta-view" cellspacing="0">';i+='<caption class="k-meta-header">';i+=this.title(e.date,e.min,e.max);i+="</caption>";i+='<tbody class="k-calendar-thead">';i+='<tr role="row" class="k-calendar-tr">'}return pe({start:M(t-t%10-1,0,1),min:M(e.min.getFullYear(),0,1),max:M(e.max.getFullYear(),0,1),otherMonth:e.otherMonth,html:i,setter:this.setDate,build:function(e,t){var i=["k-calendar-td"];if(t===0||t===11)i.push(j);return{value:e.getFullYear(),ns:T.ns,dateString:n(e),cssClass:i.join(" ")}}})},first:function(e){var t=e.getFullYear();return M(t-t%10,e.getMonth(),e.getDate())},last:function(e){var t=e.getFullYear();return M(t-t%10+9,e.getMonth(),e.getDate())},compare:function(e,t){return ve(e,t,10)},setDate:function(e,t){be(e,t,1)},toDateString:function(e){return e.getFullYear()+"/0/1"},valueType:function(){return"year"}},{name:L,title:function(e,t,i){return de(e,t,i,100)},content:function(e){var t=e.date.getFullYear(),a=e.min.getFullYear(),o=e.max.getFullYear(),s=this.toDateString,i=a,n=o,r="";i=i-i%10;n=n-n%10;if(n-i<10)n=i+9;if(e.showHeader){r+='<table tabindex="0" role="grid" class="k-calendar-table k-content k-meta-view" cellspacing="0">';r+='<caption class="k-calendar-caption k-meta-header">';r+=this.title(e.date,e.min,e.max);r+="</caption>";r+='<tbody class="k-calendar-tbody">';r+='<tr role="row" class="k-calendar-tr">'}return pe({start:M(t-t%100-10,0,1),min:M(i,0,1),max:M(n,0,1),otherMonth:e.otherMonth,html:r,setter:this.setDate,build:function(e,t){var i=["k-calendar-td"];var n=e.getFullYear(),r=n+9;if(t===0||t===11)i.push(j);if(n<a)n=a;if(r>o)r=o;return{ns:T.ns,value:n+" - "+r,dateString:s(e),cssClass:i.join(" ")}}})},first:function(e){var t=e.getFullYear();return M(t-t%100,e.getMonth(),e.getDate())},last:function(e){var t=e.getFullYear();return M(t-t%100+99,e.getMonth(),e.getDate())},compare:function(e,t){return ve(e,t,100)},setDate:function(e,t){be(e,t,10)},toDateString:function(e){var t=e.getFullYear();return t-t%10+"/0/1"},valueType:function(){return"decade"}}]});function de(e,t,i,n){var r=e.getFullYear(),a=t.getFullYear(),o=i.getFullYear(),s;r=r-r%n;s=r+(n-1);if(r<a)r=a;if(s>o)s=o;return r+"-"+s}function pe(e){var t=0,i,n=e.min,c=e.max,r=e.start,h=e.setter,f=e.build,a=e.weekNumberBuild,d=e.cells||12,o=e.isWeekColumnVisible,p=e.perRow||4,s=e.otherMonth,v=e.lastDayOfMonth,l=e.weekNumber||I,g=e.content||k,m=e.empty||C,_=e.otherMonthCellTemplate||S,u=e.html||'<table tabindex="0" role="grid" class="k-calendar-table k-content k-meta-view" cellspacing="0"><tbody class="k-calendar-tbody"><tr role="row" class="k-calendar-tr">';if(o)u+=l(a(r));for(;t<d;t++){if(t>0&&t%p===0){u+='</tr><tr role="row" class="k-calendar-tr">';if(o)u+=s||+r<=+v?l(a(r)):l({weekNumber:"&nbsp;"})}r=M(r.getFullYear(),r.getMonth(),r.getDate());D(r,0);i=f(r,t,e.disableDates);u+=i.cssClass.indexOf(j)!==-1&&!s?_(i):_e(r,n,c)?g(i):m(i);h(r,1)}return u+"</tr></tbody></table>"}function ve(e,t,i){var n=e.getFullYear(),r=t.getFullYear(),a=r,o=0;if(i){r=r-r%i;a=r-r%i+i-1}if(n>a)o=1;else if(n<r)o=-1;return o}function ge(){var e=new b;return new b(e.getFullYear(),e.getMonth(),e.getDate())}function me(e,t,i){var n=ge();if(e)n=new b(+e);if(t>n)n=new b(+t);else if(i<n)n=new b(+i);return n}function _e(e,t,i){return+e>=+t&&+e<=+i}function ye(e,t){return e.slice(t).concat(e.slice(0,t))}function be(e,t,i){t=t instanceof b?t.getFullYear():e.getFullYear()+i*t;e.setFullYear(t)}function we(e,t){if(+t<+e){var i=+e;A.views[0].setDate(e,t);A.views[0].setDate(t,new Date(i))}var n=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());var r=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.ceil((+r-+n)/T.date.MS_PER_DAY)}function xe(e,t,i,n){for(var r=0;r<=t;r++){var a=new Date(i.getTime());a=new Date(a.setDate(a.getDate()+r));if(!n(a))e.push(a)}}function ke(e){var t=y(this).hasClass("k-disabled");if(!t)y(this).toggleClass(N,Z.indexOf(e.type)>-1||e.type==K)}function Ce(e){e.preventDefault()}function M(e,t,i){var n=new b(e,t,i);n.setFullYear(e,t,i);return n}function Se(e){return h(e).calendars.standard}function Te(e){var t=w[e.start],i=w[e.depth],n=h(e.culture);e.format=l(e.format||n.calendars.standard.patterns.d);if(isNaN(t)){t=0;e.start=z}if(i===x||i>t)e.depth=z;if(e.dates===null)e.dates=[]}function Ae(e,t){e.addClass("k-"+t)}function Me(e,t){for(var i=0,n=t.length;i<n;i++)if(e===+t[i])return true;return false}function De(e,t){if(e)return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate();return false}function Ee(e,t){if(e)return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth();return false}function Ie(e){if(T.isFunction(e))return e;if(Array.isArray(e))return Be(e);return y.noop}function Pe(e){var t=[];for(var i=0;i<e.length;i++)t.push(e[i].setHours(0,0,0,0));return t}function Be(e){var t,i,n=[],r=["su","mo","tu","we","th","fr","sa"],a="if (found) {"+" return true "+"} else {"+"return false"+"}";if(e[0]instanceof b){n=Pe(e);t="var clonedDate = new Date(date); var found = date && window.kendo.jQuery.inArray(clonedDate.setHours(0, 0, 0, 0),["+n+"]) > -1;"+a}else{for(var o=0;o<e.length;o++){var s=e[o].slice(0,2).toLowerCase();var l=y.inArray(s,r);if(l>-1)n.push(l)}t="var clonedDate = new Date(date); var found = date && window.kendo.jQuery.inArray(clonedDate.getDay(),["+n+"]) > -1;"+a}i=new Function("date",t);return i}function Oe(e,t){if(e instanceof Date&&t instanceof Date){e=e.getTime();t=t.getTime()}return e===t}function m(e){var t=y(e).attr(T.attr(V)).split("/");t=M(t[0],t[1],t[2]);return t}return A.isEqualDatePart=De,A.isEqualDate=Oe,A.restrictValue=me,A.isInRange=_e,A.addClassToViewContainer=Ae,A.normalize=Te,A.viewsEnum=w,A.disabled=Ie,A.toDateObject=m,A.getToday=ge,A.createDate=M,T.calendar=A,window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.dateinput.min",["kendo.core.min"],function(){var e={id:"dateinput",name:"DateInput",category:"web",description:"The DateInput widget allows to edit date by typing.",depends:["core"]},o=window.kendo.jQuery,A=void 0,t,M=window.kendo,u=M.caret,i=M.ui,s=i.Widget,p=M.keys,l=".kendoDateInput",n={}.toString,r=(M.support.propertyChangeEvent?"propertychange.kendoDateInput input":"input")+l,c="k-focus",v="k-disabled",a="k-invalid",g="disabled",h="readonly",f="change",d="dMyHhmftsz",m=s.extend({init:function(t,e){var i=this;s.fn.init.call(i,t,e);t=i.element;e=i.options;e.format=M._extractFormat(e.format||M.getCulture(e.culture).calendars.standard.patterns.d);e.min=M.parseDate(t.attr("min"))||M.parseDate(e.min);e.max=M.parseDate(t.attr("max"))||M.parseDate(e.max);var n=t.parent().attr("class")||"";var r=n.indexOf("picker")>=0&&n.indexOf("rangepicker")<0;if(r)i.wrapper=t.parent();else{i.wrapper=t.wrap("<span class='k-dateinput k-input'></span>").parent();i.wrapper.addClass(t[0].className).removeClass("input-validation-error");i.wrapper[0].style.cssText=t[0].style.cssText;t.css({height:t[0].style.height})}i._validationIcon=o("<span class='k-input-validation-icon k-icon k-i-warning k-hidden'></span>").insertAfter(t);i._form();i.element.addClass(r?" ":"k-input-inner").attr("autocomplete","off").on("focus"+l,function(){i.wrapper.addClass(c)}).on("focusout"+l,function(){i.wrapper.removeClass(c);i._change()});try{t[0].setAttribute("type","text")}catch(e){t[0].type="text"}var a=t.is("[disabled]")||o(i.element).parents("fieldset").is(":disabled");if(a)i.enable(false);else i.readonly(t.is("[readonly]"));i.value(i.options.value||t.val());i._applyCssClasses();M.notify(i)},options:{name:"DateInput",culture:"",value:"",format:"",min:new Date(1900,0,1),max:new Date(2099,11,31),messages:{year:"year",month:"month",day:"day",weekday:"day of the week",hour:"hours",minute:"minutes",second:"seconds",dayperiod:"AM/PM"},size:"medium",fillMode:"solid",rounded:"medium"},events:[f],min:function(e){if(e!==A)this.options.min=e;else return this.options.min},max:function(e){if(e!==A)this.options.max=e;else return this.options.max},setOptions:function(e){var t=this;s.fn.setOptions.call(t,e);this._unbindInput();this._bindInput();this._updateElementValue()},destroy:function(){var e=this;e.element.off(l);if(e._formElement)e._formElement.off("reset",e._resetHandler);s.fn.destroy.call(e)},value:function(e){if(e===A)return this._dateTime.getDateObject();if(e===null)e="";if(n.call(e)!=="[object Date]")e=M.parseDate(e,this.options.format,this.options.culture);if(e&&!e.getTime())e=null;this._dateTime=new _(e,this.options.format,this.options.culture,this.options.messages);this._updateElementValue();this._oldValue=e},_updateElementValue:function(){var e=this._dateTime.toPair(this.options.format,this.options.culture,this.options.messages);this.element.val(e[0]);this._oldText=e[0];this._format=e[1]},readonly:function(e){this._editable({readonly:e===A?true:e,disable:false})},enable:function(e){this._editable({readonly:false,disable:!(e=e===A?true:e)})},_bindInput:function(){var e=this;e.element.on("focus"+l,function(){e.wrapper.addClass(c)}).on("focusout"+l,function(){e.wrapper.removeClass(c);e._change()}).on("paste"+l,e._paste.bind(e)).on("keydown"+l,e._keydown.bind(e)).on(r,e._input.bind(e)).on("mouseup"+l,e._mouseUp.bind(e)).on("DOMMouseScroll"+l+" mousewheel"+l,e._scroll.bind(e))},_unbindInput:function(){this.element.off("keydown"+l).off("paste"+l).off("focus"+l).off("focusout"+l).off(r).off("mouseup"+l).off("DOMMouseScroll"+l+" mousewheel"+l)},_editable:function(e){var t=this;var i=t.element;var n=e.disable;var r=e.readonly;var a=t.wrapper;t._unbindInput();if(!r&&!n){a.removeClass(v);if(i&&i.length){i[0].removeAttribute(g);i[0].removeAttribute(h)}t._bindInput()}else{if(n){a.addClass(v);i.attr(g,n);if(i&&i.length)i[0].removeAttribute(h)}if(r)i.attr(h,r)}},_change:function(){var e=this;var t=e._oldValue;var i=e.value();if(i&&e.min()&&i<e.min()){e.value(e.min());i=e.value()}if(i&&e.max()&&i>e.max()){e.value(e.max());i=e.value()}if(t&&i&&i.getTime()!==t.getTime()||t&&!i||!t&&i){e._oldValue=i;e.trigger(f);e.element.trigger(f)}},_input:function(){var e=this;var t=e.element[0];var i=false;if(M._activeElement()!==t)return;var n=y(this._oldText,this._format,this.element[0].value,u(this.element[0])[0]);var r=n.length===1&&n[0][1]===" ";if(!r)for(var a=0;a<n.length;a++){var o=this._dateTime.parsePart(n[a][0],n[a][1]);i=i||!o}this._updateElementValue();if(n.length&&n[0][0]!==" "){this._selectSegment(n[0][0]);if(!r){var s=n[0][0];setTimeout(function(){e._selectSegment(s)})}}if(r){var l={keyCode:39,preventDefault:function(){}};this._keydown(l)}if(i)e._blinkInvalidState()},_blinkInvalidState:function(){var e=this;e._addInvalidState();clearTimeout(e._invalidStateTimeout);e._invalidStateTimeout=setTimeout(e._removeInvalidState.bind(e),100)},_addInvalidState:function(){var e=this;e.wrapper.addClass(a);e._validationIcon.removeClass("k-hidden")},_removeInvalidState:function(){var e=this;e.wrapper.removeClass(a);e._validationIcon.addClass("k-hidden");e._invalidStateTimeout=null},_mouseUp:function(){var e=u(this.element[0]);if(e[0]===e[1])this._selectNearestSegment()},_scroll:function(e){if(M._activeElement()!==this.element[0]||this.element.is("[readonly]"))return;e=window.event||e;var t={keyCode:37,preventDefault:function(){}};if(e.shiftKey)t.keyCode=(e.wheelDelta||-e.detail)>0?37:39;else t.keyCode=(e.wheelDelta||-e.detail)>0?38:40;this._keydown(t);e.returnValue=false;if(e.preventDefault)e.preventDefault();if(e.stopPropagation)e.stopPropagation()},_form:function(){var e=this;var t=e.element;var i=t.attr("form");var n=i?o("#"+i):t.closest("form");var r=t[0].value;if(!r&&e.options.value)r=e.options.value;if(n[0]){e._resetHandler=function(){setTimeout(function(){e.value(r)})};e._formElement=n.on("reset",e._resetHandler)}},_paste:function(e){e.preventDefault()},_keydown:function(e){var t=e.keyCode;var i;if(t==37||t==39){e.preventDefault();i=u(this.element[0]);if(i[0]!=i[1])this._selectNearestSegment();var n=t==37?-1:1;var r=n==-1?u(this.element[0])[0]-1:u(this.element[0])[1]+1;while(r>=0&&r<this._format.length){if(d.indexOf(this._format[r])>=0){this._selectSegment(this._format[r]);break}r+=n}}if(t==38||t==40){e.preventDefault();i=u(this.element[0]);var a=this._format[i[0]];if(d.indexOf(a)>=0){var o=1;if(a=="m")o=this.options.interval||1;this._dateTime.modifyPart(a,t==38?o*1:o*-1);this._updateElementValue();this._selectSegment(a);this.element.trigger(f)}}if(M.support.browser.msie&&M.support.browser.version<10){var s=e.keyCode?e.keyCode:e.which;if(s===8||s===46){var l=this;setTimeout(function(){l._input()},0)}}if(t===p.ENTER)this._change()},_selectNearestSegment:function(){var e=u(this.element[0]);var t=e[0];for(var i=t,n=t-1;i<this._format.length||n>=0;i++,n--){if(i<this._format.length&&d.indexOf(this._format[i])!==-1){this._selectSegment(this._format[i]);return}if(n>=0&&d.indexOf(this._format[n])!==-1){this._selectSegment(this._format[n]);return}}},_selectSegment:function(e){var t=-1,i=0;for(var n=0;n<this._format.length;n++)if(this._format[n]===e){i=n+1;if(t===-1)t=n}if(t<0)t=0;u(this.element,t,i)}}),_=(M.cssProperties.registerPrefix("DateInput","k-input-"),M.cssProperties.registerValues("DateInput",[{prop:"rounded",values:M.cssProperties.roundedValues.concat([["full","full"]])}]),i.plugin(m),function(e,t,i,n){var f=null;var d=true,p=true,v=true,g=true,b=true,w=true,l=true;var m="";var _="";var o={};var r=["","0","00","000","0000"];function s(e,t,i){e=e+"";t=t||2;i=t-e.length;if(i)return r[t].substring(0,i)+e;return e}var a=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|"[^"]*"|'[^']*'/g;var u=null,y=null,c=null,h=false;var x=function(e){var t,i;var n;switch(e){case"d":n=v?f.getDate():o.day;break;case"dd":n=v?s(f.getDate()):o.day;break;case"ddd":n=v&&p&&d?c.namesAbbr[f.getDay()]:o.weekday;break;case"dddd":n=v&&p&&d?c.names[f.getDay()]:o.weekday;break;case"M":n=p?f.getMonth()+1:o.month;break;case"MM":n=p?s(f.getMonth()+1):o.month;break;case"MMM":n=p?u.namesAbbr[f.getMonth()]:o.month;break;case"MMMM":n=p?u.names[f.getMonth()]:o.month;break;case"yy":n=d?s(f.getFullYear()%100):o.year;break;case"yyyy":n=d?s(f.getFullYear(),4):o.year;break;case"h":n=g?f.getHours()%12||12:o.hour;break;case"hh":n=g?s(f.getHours()%12||12):o.hour;break;case"H":n=g?f.getHours():o.hour;break;case"HH":n=g?s(f.getHours()):o.hour;break;case"m":n=b?f.getMinutes():o.minute;break;case"mm":n=b?s(f.getMinutes()):o.minute;break;case"s":n=w?f.getSeconds():o.second;break;case"ss":n=w?s(f.getSeconds()):o.second;break;case"f":n=l?Math.floor(f.getMilliseconds()/100):l;break;case"ff":n=f.getMilliseconds();if(n>99)n=Math.floor(n/10);n=l?s(n):e;break;case"fff":n=l?s(f.getMilliseconds(),3):e;break;case"tt":n=g?f.getHours()<12?y.AM[0]:y.PM[0]:o.dayperiod;break;case"zzz":t=f.getTimezoneOffset();i=t<0;n=Math.abs(t/60).toString().split(".")[0];t=Math.abs(t)-n*60;n=(i?"+":"-")+s(n);n+=":"+s(t);break;case"z":case"zz":n=f.getTimezoneOffset()/60;i=n<0;n=Math.abs(n).toString().split(".")[0];n=(i?"+":"-")+(e==="zz"?s(n):n);break}n=n!==A?n:e.slice(1,e.length-1);if(h){n=""+n;var r="";if(e=="ddd")e="EEE";if(e=="dddd")e="EEEE";for(var a=0;a<n.length;a++)r+=e[0];return r}else return n};function k(e){h=e;return x}function C(e,t){switch(e){case"y":d=t;break;case"M":p=t;if(!t){f.setMonth(0);m=""}break;case"d":v=t;break;case"H":case"h":g=t;if(!t)_="";break;case"m":b=t;break;case"s":w=t;break;default:return}}this.setValue=function(e){v=e};this.getValue=function(){return v};this.modifyPart=function(e,t){var i=new Date(f&&f.getTime?f.getTime():f);switch(e){case"y":i.setFullYear(i.getFullYear()+t);break;case"M":var n=i.getMonth()+t;i.setMonth(n);if(i.getMonth()%12!==(n+12)%12){i.setDate(1);i.setMonth(n)}break;case"d":case"E":i.setDate(i.getDate()+t);break;case"H":case"h":i.setHours(i.getHours()+t);break;case"m":i.setMinutes(i.getMinutes()+t);break;case"s":i.setSeconds(i.getSeconds()+t);break;case"t":i.setHours((i.getHours()+12)%24);break;default:break}if(i.getFullYear()>0){C(e,true);f=i}};this.parsePart=function(e,t){if(!t){C(e,false);return true}var i=new Date(f&&f.getTime?f.getTime():f);var c=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();var n;switch(e){case"d":var r=(v?i.getDate()*10:0)+parseInt(t,10);if(isNaN(r))return;while(r>c)r=parseInt(r.toString().slice(1),10);if(r<1)v=false;else{i.setDate(r);if(i.getMonth()!==f.getMonth())return;v=true}break;case"M":var a=(p?(i.getMonth()+1)*10:0)+parseInt(t,10);if(!isNaN(a)){while(a>12)a=parseInt(a.toString().slice(1),10);if(a<1)p=false;else{i.setMonth(a-1);if(i.getMonth()!==a-1){i.setDate(1);i.setMonth(a-1)}p=true}}else{var h=y.months.names;m+=t.toLowerCase();while(m.length>0){for(var o=0;o<h.length;o++)if(h[o].toLowerCase().indexOf(m)===0){i.setMonth(o);p=true;f=i;return true}m=m.substring(1,m.length)}return false}break;case"y":var s=(d?i.getFullYear()*10:0)+parseInt(t,10);if(isNaN(s))return;while(s>9999)s=parseInt(s.toString().slice(1),10);if(s<1)d=false;else{i.setFullYear(s);d=true}break;case"h":n=(g?(i.getHours()%12||12)*10:0)+parseInt(t,10);if(isNaN(n))return;while(n>12)n=parseInt(n.toString().slice(1),10);i.setHours(Math.floor(i.getHours()/12)*12+n%12);g=true;break;case"H":n=(g?i.getHours()*10:0)+parseInt(t,10);if(isNaN(n))return;while(n>23)n=parseInt(n.toString().slice(1),10);i.setHours(n);g=true;break;case"m":var l=(b?i.getMinutes()*10:0)+parseInt(t,10);if(isNaN(l))return;while(l>59)l=parseInt(l.toString().slice(1),10);i.setMinutes(l);b=true;break;case"s":var u=(w?i.getSeconds()*10:0)+parseInt(t,10);if(isNaN(u))return;while(u>59)u=parseInt(u.toString().slice(1),10);i.setSeconds(u);w=true;break;case"t":if(g){_+=t.toLowerCase();while(_.length>0){if(y.AM[0].toLowerCase().indexOf(_)===0&&i.getHours()>=12||y.PM[0].toLowerCase().indexOf(_)===0&&i.getHours()<12){i.setHours((i.getHours()+12)%24);f=i;return true}_=_.substring(1,_.length)}return false}break;default:break}f=i;return true};this.toPair=function(e,t,i){if(!e)return["",""];t=M.getCulture(t);y=t.calendars.standard;e=y.patterns[e]||e;c=y.days;u=y.months;o=i;return[e.replace(a,k(false)),e.replace(a,k(true))]};this.getDateObject=function(){return d&&p&&v&&g&&b&&w&&l?new Date(f.getTime()):null};if(!e){f=new Date;var S=this.toPair(t,i,n)[1];for(var T=0;T<S.length;T++)C(S[T],false)}else f=new Date(e.getTime())});function y(e,t,i,n){var r=e[n+e.length-i.length];e=e.substring(0,n+e.length-i.length);i=i.substring(0,n);var a=[];var o;if(e===i&&n>0){a.push([t[n-1],i[n-1]]);return a}if(e.indexOf(i)===0&&(i.length===0||t[i.length-1]!==t[i.length])){var s="";for(o=i.length;o<e.length;o++)if(t[o]!==s&&d.indexOf(t[o])>=0){s=t[o];a.push([s,""])}return a}if(i[i.length-1]===" "||i[i.length-1]===r)return[[t[n-1]," "]];if(i.indexOf(e)===0||d.indexOf(t[n-1])===-1){var l=t[0];for(o=Math.max(0,e.length-1);o<t.length;o++)if(d.indexOf(t[o])>=0){l=t[o];break}return[[l,i[n-1]]]}return[[t[n-1],i[n-1]]]}return window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.datepicker.min",["kendo.calendar.min","kendo.popup.min","kendo.dateinput.min","kendo.html.button.min"],function(){var e={id:"datepicker",name:"DatePicker",category:"web",description:"The DatePicker widget allows the user to select a date from a calendar or by direct input.",depends:["calendar","popup","html.button"]},u=window.kendo.jQuery,r=void 0,c=window.kendo,a=c.ui,d=c.html,o=a.Widget,h=c.parseDate,s=c.keys,i=c.support,t=c.template,p=c._activeElement,v="<div />",g="<span />",l=".kendoDatePicker",m="click"+l,_=i.mouseAndTouchPresent?c.applyEventMap("up",l.slice(1)):m,y="open",b="close",w="change",x="disabled",k="readonly",C="k-focus",S="k-selected",T="k-disabled",A="k-hover",M="mouseenter"+l+" mouseleave"+l,D="mousedown"+l,E="navigate",I="id",P="min",B="max",O="month",z="aria-disabled",L="aria-readonly",R="aria-expanded",F="aria-hidden",n="aria-activedescendant",f=c.calendar,V=f.isInRange,N=f.restrictValue,H=f.isEqualDatePart,U=u.extend,j=Date;function G(e){var t=e.parseFormats,i=e.format;f.normalize(e);t=Array.isArray(t)?t:[t];if(!t.length)t.push("yyyy-MM-dd");if(u.inArray(i,t)===-1)t.splice(0,0,e.format);e.parseFormats=t}function W(e){e.preventDefault()}var q=function(e){var t=this,i,n=document.body,r=u(v).attr(F,"true").addClass("k-calendar-container");t.options=e=e||{};i=e.id;if(!e.omitPopup){r.appendTo(n);t.popup=new a.Popup(r,U(e.popup,e,{name:"Popup",isRtl:c.support.isRtl(e.anchor)}))}else r=e.dateDiv;if(i){i+="_dateview";r.attr(I,i);t._dateViewID=i}t.div=r;t.value(e.value)},Y=(q.prototype={_calendar:function(){var e=this;var t=e.calendar;var i=e.options;var n;if(!t){n=u(v).attr(I,c.guid()).appendTo(i.omitPopup?i.dateDiv:e.popup.element).on(D,W).on(m,"td:has(.k-link)",e._click.bind(e));e.calendar=t=new a.Calendar(n,{componentType:i.componentType,size:i.size,messages:i.messages});e._setOptions(i);n.addClass(c.getValidCssClass("k-calendar-","size",i.size));t.navigate(e._value||e._current,i.start);e.value(e._value)}},_setOptions:function(e){this.calendar.setOptions({focusOnNav:false,change:e.change,culture:e.culture,dates:e.dates,depth:e.depth,footer:e.footer,format:e.format,max:e.max,min:e.min,month:e.month,weekNumber:e.weekNumber,start:e.start,messages:e.messages,disableDates:e.disableDates})},setOptions:function(e){var t=this.options;var i=e.disableDates;if(i)e.disableDates=f.disabled(i);this.options=U(t,e,{change:t.change,close:t.close,open:t.open});if(this.calendar)this._setOptions(this.options)},destroy:function(){if(this.popup)this.popup.destroy()},open:function(){var e=this;var t;e._calendar();t=e.popup._hovered;e.popup._hovered=true;e.popup.open();setTimeout(function(){e.popup._hovered=t},1)},close:function(){if(this.popup)this.popup.close()},min:function(e){this._option(P,e)},max:function(e){this._option(B,e)},toggle:function(){var e=this;e[e.popup.visible()?b:y]()},move:function(e){var t=this,i=e.keyCode,n=t.calendar,r=e.ctrlKey&&i==s.DOWN||i==s.ENTER,a=false;if(e.altKey){if(i==s.DOWN){t.open();e.preventDefault();a=true}else if(i==s.UP){t.close();e.preventDefault();a=true}}else if(t.popup&&t.popup.visible()){if(i==s.ESC||r&&n._cell.hasClass(S)){t.close();e.preventDefault();return true}if(i!=s.SPACEBAR)t._current=n._move(e);a=true}return a},current:function(e){this._current=e;if(this.calendar)this.calendar._focus(e)},value:function(e){var t=this,i=t.calendar,n=t.options,r=n.disableDates;if(r&&r(e))e=null;t._value=e;t._current=new j(+N(e,n.min,n.max));if(i)i.value(e)},_click:function(e){if(e.currentTarget.className.indexOf(S)!==-1){this.calendar.trigger("change");this.close()}},_option:function(e,t){var i=this;var n=i.calendar;i.options[e]=t;if(n)n[e](t)}},q.normalize=G,c.DateView=q,o.extend({init:function(n,e){var r=this,t,i,a;o.fn.init.call(r,n,e);n=r.element;e=r.options;e.disableDates=c.calendar.disabled(e.disableDates);e.min=h(n.attr("min"))||h(e.min);e.max=h(n.attr("max"))||h(e.max);G(e);r._initialOptions=U({},e);r._wrapper();r.dateView=new q(U({},e,{id:n.attr(I),anchor:r.wrapper,change:function(){r._change(this.value());r.close()},close:function(e){if(r.trigger(b))e.preventDefault();else{n.attr(R,false);a.attr(F,true);setTimeout(function(){n.removeAttr("aria-activedescendant")})}},open:function(e){var t=r.options,i;if(r.trigger(y))e.preventDefault();else{if(r.element.val()!==r._oldText){i=h(n.val(),t.parseFormats,t.culture);r.dateView[i?"current":"value"](i)}n.attr(R,true);a.attr(F,false);r._updateARIA(i)}}}));a=r.dateView.div;r._icon();try{n[0].setAttribute("type","text")}catch(e){n[0].type="text"}n.addClass("k-input-inner").attr({role:"combobox","aria-expanded":false,"aria-haspopup":"grid","aria-controls":r.dateView._dateViewID,autocomplete:"off"});r._reset();r._template();i=n.is("[disabled]")||u(r.element).parents("fieldset").is(":disabled");if(i)r.enable(false);else r.readonly(n.is("[readonly]"));t=h(e.value||r.element.val(),e.parseFormats,e.culture);r._createDateInput(e);r._old=r._update(t||r.element.val());r._oldText=n.val();r._applyCssClasses();c.notify(r)},events:[y,b,w],options:{name:"DatePicker",value:null,footer:"",format:"",culture:"",parseFormats:[],min:new Date(1900,0,1),max:new Date(2099,11,31),start:O,depth:O,animation:{},month:{},dates:[],disableDates:null,ARIATemplate:"Current focused #=data.valueType# is #=data.text#",dateInput:false,weekNumber:false,messages:{weekColumnHeader:""},componentType:"classic",size:"medium",fillMode:"solid",rounded:"medium"},setOptions:function(e){var t=this;var i=t._value;o.fn.setOptions.call(t,e);e=t.options;e.min=h(e.min);e.max=h(e.max);G(e);t._dateIcon.off(l);t._dateIcon.remove();t.dateView.setOptions(e);t._icon();t._editable(e);t._createDateInput(e);if(!t._dateInput)t.element.val(c.toString(i,e.format,e.culture));if(i)t._updateARIA(i)},_editable:function(e){var t=this,i=t._dateIcon.off(l),n=t.element.off(l),r=t.wrapper.off(l),a=e.readonly,o=e.disable;if(!a&&!o){r.removeClass(T).on(M,t._toggleHover);if(n&&n.length){n[0].removeAttribute(x);n[0].removeAttribute(k)}n.attr(z,false).attr(L,false).on("keydown"+l,t._keydown.bind(t)).on("focusout"+l,t._blur.bind(t)).on("focus"+l,function(){t.wrapper.addClass(C)});i.on(_,t._click.bind(t)).on(D,W)}else{r.addClass(o?T:"").removeClass(o?"":T);n.attr(x,o).attr(k,a).attr(z,o).attr(L,a)}},readonly:function(e){this._editable({readonly:e===r?true:e,disable:false});if(this._dateInput)this._dateInput._editable({readonly:e===r?true:e,disable:false})},enable:function(e){this._editable({readonly:false,disable:!(e=e===r?true:e)});if(this._dateInput)this._dateInput._editable({readonly:false,disable:!(e=e===r?true:e)})},destroy:function(){var e=this;o.fn.destroy.call(e);if(e.dateView.calendar&&e._navigateCalendarHandler){e.dateView.calendar.unbind(E,e._navigateCalendarHandler);e._navigateCalendarHandler=null}e.dateView.destroy();e.element.off(l);e._dateIcon.off(l);if(e._form)e._form.off("reset",e._resetHandler)},open:function(){this.dateView.open();this._navigateCalendar()},close:function(){this.dateView.close()},min:function(e){return this._option(P,e)},max:function(e){return this._option(B,e)},value:function(e){var t=this;if(e===r)return t._value;t._old=t._update(e);if(t._old===null)if(t._dateInput)t._dateInput.value(t._old);else t.element.val("");t._oldText=t.element.val()},_toggleHover:function(e){u(e.currentTarget).toggleClass(A,e.type==="mouseenter")},_blur:function(){var e=this,t=e.element.val();e.close();if(t!==e._oldText){e._change(t);if(!t)e.dateView.current(c.calendar.getToday())}e.wrapper.removeClass(C)},_click:function(e){var t=this;t.dateView.toggle();t._navigateCalendar();t._focusElement(e.type)},_focusElement:function(e){var t=this.element;if((!i.touch||i.mouseAndTouchPresent&&!(e||"").match(/touch/i))&&t[0]!==p())t.trigger("focus")},_change:function(e){var t=this,i=t.element.val(),n;e=t._update(e);n=!c.calendar.isEqualDate(t._old,e);var r=n&&!t._typing;var a=i!==t.element.val();if(r||a)t.element.trigger(w);if(n){t._old=e;t._oldText=t.element.val();t.trigger(w)}t._typing=false},_keydown:function(e){var t=this,i=t.dateView,n=t.element.val(),r=false;if(!i.popup.visible()&&e.keyCode==s.ENTER&&n!==t._oldText)t._change(n);else{r=i.move(e);t._updateARIA(i._current);if(!r)t._typing=true;else if(t._dateInput&&e.stopImmediatePropagation)e.stopImmediatePropagation()}},_icon:function(){var e=this,t=e.element,i=e.options,n;n=t.next("button.k-input-button");if(!n[0])n=u(d.renderButton('<button aria-label="select" tabindex="-1" class="k-input-button k-button k-icon-button"></button>',{icon:"calendar",size:i.size,fillMode:i.fillMode,shape:"none",rounded:"none"})).insertAfter(t);e._dateIcon=n.attr({role:"button"})},_setCalendarAttribute:function(){var e=this;setTimeout(function(){e.element.attr(n,e.dateView.calendar._table.attr(n))})},_navigateCalendar:function(){var e=this;if(!e._navigateCalendarHandler)e._navigateCalendarHandler=e._setCalendarAttribute.bind(e);if(!!e.dateView.calendar)e.dateView.calendar.unbind(E,e._navigateCalendarHandler).bind(E,e._navigateCalendarHandler)},_option:function(e,t){var i=this,n=i.options;if(t===r)return n[e];t=h(t,n.parseFormats,n.culture);if(!t)return;n[e]=new j(+t);i.dateView[e](t)},_update:function(e){var t=this,i=t.options,n=i.min,r=i.max,a=t._value,o=h(e,i.parseFormats,i.culture),s=o===null&&a===null||o instanceof Date&&a instanceof Date,l;if(i.disableDates(o)){o=null;if(!t._old&&!t.element.val())e=null}if(+o===+a&&s){l=c.toString(o,i.format,i.culture);if(l!==e&&!(t._dateInput&&!o))t.element.val(o===null?e:l);return o}if(o!==null&&H(o,n))o=N(o,n,r);else if(!V(o,n,r))o=null;t._value=o;t.dateView.value(o);if(t._dateInput&&o)t._dateInput.value(o||e);else t.element.val(c.toString(o||e,i.format,i.culture));t._updateARIA(o);return o},_wrapper:function(){var e=this,t=e.element,i;i=t.parents(".k-datepicker");if(!i[0])i=t.wrap(g).parent();i[0].style.cssText=t[0].style.cssText;t.css({height:t[0].style.height});e.wrapper=i.addClass("k-datepicker k-input").addClass(t[0].className).removeClass("input-validation-error")},_reset:function(){var e=this,t=e.element,i=t.attr("form"),n=e.options,r=n.disableDates,a=n.parseFormats.length?n.parseFormats:null,o=e._initialOptions.value,s=i?u("#"+i):t.closest("form"),l=t[0].defaultValue;if(o&&(r&&r(o)))o=null;if((!l||!c.parseDate(l,a,n.culture))&&o)t.attr("value",c.toString(o,n.format,n.culture));if(s[0]){e._resetHandler=function(){e.value(o||t[0].defaultValue);e.max(e._initialOptions.max);e.min(e._initialOptions.min)};e._form=s.on("reset",e._resetHandler)}},_template:function(){this._ariaTemplate=t(this.options.ARIATemplate).bind(this)},_createDateInput:function(e){if(this._dateInput){this._dateInput.destroy();this._dateInput=null}if(e.dateInput)this._dateInput=new a.DateInput(this.element,{culture:e.culture,format:e.format,size:e.size,fillMode:e.fillMode,rounded:e.rounded,min:e.min,max:e.max})},_updateARIA:function(e){var t=this;var i=t.dateView.calendar;if(t.element&&t.element.length)t.element[0].removeAttribute(n);if(i)t.element.attr(n,i._updateAria(t._ariaTemplate,e))}}));return c.cssProperties.registerPrefix("DatePicker","k-input-"),c.cssProperties.registerValues("DatePicker",[{prop:"rounded",values:c.cssProperties.roundedValues.concat([["full","full"]])}]),a.plugin(Y),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.floatinglabel.min",["kendo.core.min"],function(){var e={id:"floatinglabel",name:"FloatingLabel",category:"framework",depends:["core"],hidden:true},n=window.kendo.jQuery,r=void 0,a=window.kendo,o=a.ui.Widget,t=a.ui,s=".kendoFloatingLabel",f="k-floating-label-container",i="k-state-empty",l="k-focus",u="k-disabled",c="k-no-click",h="k-readonly",d=o.extend({init:function(e,t){var i=this;o.fn.init.call(i,e,t);t=n.extend(true,{},t);i.refresh();i._editable({readonly:i.options.widget.options.readonly!==r?i.options.widget.options.readonly:false,disable:i.options.widget.options.enable!==r?!i.options.widget.options.enable:false});i.element.addClass(f);a.notify(i)},options:{name:"FloatingLabel",widget:null,useReadOnlyClass:false},readonly:function(e){this._editable({readonly:e===r?true:e,disable:false})},enable:function(e){this._editable({readonly:false,disable:!(e=e===r?true:e)})},refresh:function(){var e=this;var t=e.element;t.removeClass(i).removeClass(l);if(!e.options.widget.element.val())t.addClass(i);if(document.activeElement===e.options.widget.element[0])t.addClass(l)},destroy:function(){var e=this;e.element.off(s);o.fn.destroy.call(e)},_editable:function(e){var t=this;var i=t.element;var n=e.disable;var r=e.readonly;i.off(s);if(!r&&!n){i.removeClass(u).removeClass(t.options.useReadOnlyClass?h:c);i.on("focusin"+s,t.refresh.bind(t));i.on("focusout"+s,t.refresh.bind(t))}else i.toggleClass(u,n).toggleClass(t.options.useReadOnlyClass?h:c,r)}});return t.plugin(d),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.numerictextbox.min",["kendo.core.min","kendo.userevents.min","kendo.floatinglabel.min","kendo.html.button.min"],function(){var e={id:"numerictextbox",name:"NumericTextBox",category:"web",description:"The NumericTextBox widget can format and display numeric, percentage or currency textbox.",depends:["core","userevents","floatinglabel","html.button"]},c=window.kendo.jQuery,h=void 0,f=window.kendo,d=f.caret,n=f.keys,a=f.html,t=f.ui,p=t.Widget,o=f._activeElement,_=f._extractFormat,r=f.parseFloat,s=f.support.placeholder,l=f.getCulture,i="change",u="disabled",y="readonly",b="k-input-inner",w="spin",v=".kendoNumericTextBox",x="touchend",k,C="mouseenter"+v+" "+("mouseleave"+v),S="k-focus",T="k-hover",A="focus",g=".",M="symbol",D="k-icon",E="k-label k-input-label",I="k-selected",P="k-disabled",B="k-invalid",O="aria-disabled",z=/^(-)?(\d*)$/,m=null,L=c.isPlainObject,R=c.extend,F=p.extend({init:function(e,t){var i=this,n=t&&t.step!==h,r,a,o,s,l;var u;p.fn.init.call(i,e,t);t=i.options;e=i.element.on("focusout"+v,i._focusout.bind(i)).attr("role","spinbutton");t.placeholder=t.placeholder||e.attr("placeholder");r=i.min(e.attr("min"));a=i.max(e.attr("max"));o=i._parse(e.attr("step"));if(t.min===m&&r!==m)t.min=r;if(t.max===m&&a!==m)t.max=a;if(!n&&o!==m)t.step=o;i._initialOptions=R({},t);u=e.attr("type");i._reset();i._wrapper();i._arrows();i._validation();i._input();if(!f.support.mobileOS)i._text.on(A+v,i._click.bind(i));else i._text.on(x+v+" "+A+v,function(){if(f.support.browser.edge)i._text.one(A+v,function(){i._focusin()});else i._focusin();i.selectValue()});e.attr("aria-valuemin",t.min!==m?t.min*t.factor:t.min).attr("aria-valuemax",t.max!==m?t.max*t.factor:t.max);t.format=_(t.format);s=t.value;if(s==m)if(u=="number")s=parseFloat(e.val());else s=e.val();i.value(s);l=!t.enable||e.is("[disabled]")||c(i.element).parents("fieldset").is(":disabled");if(l)i.enable(false);else i.readonly(e.is("[readonly]"));i.angular("compile",function(){return{elements:i._text.get()}});i._label();i._ariaLabel(i._text);i._applyCssClasses();f.notify(i)},options:{name:"NumericTextBox",decimals:m,enable:true,restrictDecimals:false,min:m,max:m,value:m,step:1,round:true,culture:"",format:"n",spinners:true,placeholder:"",selectOnFocus:false,factor:1,upArrowText:"Increase value",downArrowText:"Decrease value",label:null,size:"medium",fillMode:"solid",rounded:"medium"},events:[i,w],_editable:function(e){var t=this,i=t.element,n=e.disable,r=e.readonly,a=t._text.add(i),o=t.wrapper.off(C);t._toggleText(true);t._upArrowEventHandler.unbind("press");t._downArrowEventHandler.unbind("press");i.off("keydown"+v).off("keyup"+v).off("input"+v).off("paste"+v);if(t._inputLabel)t._inputLabel.off(v);if(!r&&!n){o.removeClass(P).on(C,t._toggleHover);a.prop(u,false).prop(y,false).attr(O,false);t._upArrowEventHandler.bind("press",function(e){e.preventDefault();t._spin(1);t._upArrow.addClass(I)});t._downArrowEventHandler.bind("press",function(e){e.preventDefault();t._spin(-1);t._downArrow.addClass(I)});t.element.on("keydown"+v,t._keydown.bind(t)).on("keyup"+v,t._keyup.bind(t)).on("paste"+v,t._paste.bind(t)).on("input"+v,t._inputHandler.bind(t));if(t._inputLabel)t._inputLabel.on("click"+v,t.focus.bind(t))}else{o.addClass(n?P:"").removeClass(n?"":P);a.attr(u,n).attr(y,r).attr(O,n)}},readonly:function(e){var t=this;this._editable({readonly:e===h?true:e,disable:false});if(t.floatingLabel)t.floatingLabel.readonly(e===h?true:e)},enable:function(e){var t=this;this._editable({readonly:false,disable:!(e=e===h?true:e)});if(t.floatingLabel)t.floatingLabel.enable(e=e===h?true:e)},setOptions:function(e){var t=this;p.fn.setOptions.call(t,e);t.wrapper.toggleClass("k-expand-padding",!t.options.spinners);t._text.prop("placeholder",t.options.placeholder);t._placeholder(t.options.placeholder);t.element.attr({"aria-valuemin":t.options.min!==m?t.options.min*t.options.factor:t.options.min,"aria-valuemax":t.options.max!==m?t.options.max*t.options.factor:t.options.max});t.options.format=_(t.options.format);t._upArrowEventHandler.destroy();t._downArrowEventHandler.destroy();t._arrowsWrap.remove();t._arrows();t._applyCssClasses();if(e.value!==h)t.value(e.value)},destroy:function(){var e=this;if(e._inputLabel){e._inputLabel.off(v);if(e.floatingLabel)e.floatingLabel.destroy()}e.element.add(e._text).add(e._upArrow).add(e._downArrow).off(v);e._upArrowEventHandler.destroy();e._downArrowEventHandler.destroy();if(e._form)e._form.off("reset",e._resetHandler);p.fn.destroy.call(e)},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},step:function(e){return this._option("step",e)},value:function(e){var t=this,i;if(e===h)return t._value;e=t._parse(e);i=t._adjust(e);if(e!==i)return;t._update(e);t._old=t._value},focus:function(){this._focusin()},_adjust:function(e){var t=this,i=t.options,n=i.min,r=i.max;if(e===m)return e;if(n!==m&&e<n)e=n;else if(r!==m&&e>r)e=r;return e},_arrows:function(){var e=this,t,i=function(){clearTimeout(e._spinning);t.removeClass(I)},n=e.options,r=n.spinners,a=e.element;t=a.siblings(".k-icon-button");if(!t[0]){t=c(V("increase",n.upArrowText,n)+V("decrease",n.downArrowText,n)).appendTo(e.wrapper);e._arrowsWrap=t.wrapAll('<span class="k-input-spinner k-spin-button"/>').parent()}if(!r){t.parent().toggle(r);e.wrapper.addClass("k-expand-padding")}e._upArrow=t.eq(0);e._upArrowEventHandler=new f.UserEvents(e._upArrow,{release:i});e._downArrow=t.eq(1);e._downArrowEventHandler=new f.UserEvents(e._downArrow,{release:i})},_validation:function(){var e=this;var t=e.element;e._validationIcon=c("<span class='k-input-validation-icon "+D+" k-i-warning k-hidden'></span>").insertAfter(t)},_blur:function(){var e=this;e._toggleText(true);e._change(e.element.val())},_click:function(u){var c=this;clearTimeout(c._focusing);c._focusing=setTimeout(function(){var e=u.target,t=d(e)[0],i=e.value.substring(0,t),n=c._format(c.options.format),r=n[","],a,o,s,l=0;if(r){o=new RegExp("\\"+r,"g");s=new RegExp("(-)?("+n[M]+")?([\\d\\"+r+"]+)(\\"+n[g]+")?(\\d+)?")}if(s)a=s.exec(i);if(a){l=a[0].replace(o,"").length;if(i.indexOf("(")!=-1&&c._value<0)l++}c._focusin();d(c.element[0],l);c.selectValue()})},selectValue:function(){if(this.options.selectOnFocus)this.element[0].select()},_getFactorValue:function(e){var t=this,i=t.options.factor;if(i&&i!==1){e=f.parseFloat(e);if(e!==null)e=e/i}return e},_change:function(e){var t=this;e=t._getFactorValue(e);t._update(e);e=t._value;if(t._old!=e){t._old=e;if(!t._typing)t.element.trigger(i);t.trigger(i)}t._typing=false},_culture:function(e){return e||l(this.options.culture)},_focusin:function(){var e=this;e.wrapper.addClass(S);e._toggleText(false);e.element[0].focus()},_focusout:function(){var e=this;clearTimeout(e._focusing);e.wrapper.removeClass(S).removeClass(T);e._blur();e._removeInvalidState()},_format:function(e,t){var i=this._culture(t).numberFormat;e=e.toLowerCase();if(e.indexOf("c")>-1)i=i.currency;else if(e.indexOf("p")>-1)i=i.percent;return i},_input:function(){var e=this,t=e.options,i=e.element.addClass(b).show()[0],n=i.accessKey,r=e.wrapper,a=r.find(g+b),o;o=a.first();if(o.length<2)o=c('<input type="text"/>').attr(f.attr("validate"),false).insertBefore(i);try{i.setAttribute("type","text")}catch(e){i.type="text"}o[0].title=i.title;o[0].tabIndex=i.tabIndex;o[0].style.cssText=i.style.cssText;o.prop("placeholder",t.placeholder);if(n){o.attr("accesskey",n);i.accessKey=""}e._text=o.addClass(i.className).attr({role:"spinbutton","aria-valuemin":t.min!==m?t.min*t.factor:t.min,"aria-valuemax":t.max!==m?t.max*t.factor:t.max,autocomplete:"off"})},_keydown:function(e){var t=this,i=e.keyCode;if(i===n.NUMPAD_DOT)t._numPadDot=true;if(i==n.DOWN){t._step(-1);return}else if(i==n.UP){t._step(1);return}else if(i==n.ENTER){t._change(t.element.val());return}if(i!=n.TAB)t._typing=true;t._cachedCaret=d(t.element)},_keyup:function(){this._removeInvalidState()},_inputHandler:function(){var e=this.element;var t=e.val();var i=this.options.min;var n=this._format(this.options.format);var r=n[g];var a=i!==null&&i>=0&&t.charAt(0)==="-";if(this._numPadDot&&r!==g){t=t.replace(g,r);this.element.val(t);this._numPadDot=false}if(this._isPasted&&this._parse(t))t=this._parse(t).toString().replace(g,n[g]);if(this._numericRegex(n).test(t)&&!a)this._oldText=t;else{this._blinkInvalidState();this.element.val(this._oldText);if(this._cachedCaret){d(e,this._cachedCaret[0]);this._cachedCaret=null}}this._isPasted=false},_blinkInvalidState:function(){var e=this;e._addInvalidState();clearTimeout(e._invalidStateTimeout);e._invalidStateTimeout=setTimeout(e._removeInvalidState.bind(e),100)},_addInvalidState:function(){var e=this;e.wrapper.addClass(B);e._validationIcon.removeClass("k-hidden")},_removeInvalidState:function(){var e=this;e.wrapper.removeClass(B);e._validationIcon.addClass("k-hidden");e._invalidStateTimeout=null},_numericRegex:function(e){var t=this;var i=e[g];var n=t.options.decimals;var r="*";if(i===g)i="\\"+i;if(n===m)n=e.decimals;if(n===0&&t.options.restrictDecimals)return z;if(t.options.restrictDecimals)r="{0,"+n+"}";if(t._separator!==i){t._separator=i;t._floatRegExp=new RegExp("^(-)?(((\\d+("+i+"\\d"+r+")?)|("+i+"\\d"+r+")))?$")}return t._floatRegExp},_paste:function(e){var t=this;var i=e.target;var n=i.value;var r=t._format(t.options.format);t._isPasted=true;setTimeout(function(){var e=t._parse(i.value);if(e===m)t._update(n);else{i.value=e.toString().replace(g,r[g]);if(t._adjust(e)!==e||!t._numericRegex(r).test(i.value)){n=t._getFactorValue(i.value);t._update(n)}}})},_option:function(e,t){var i=this,n=i.element,r=i.options;if(t===h)return r[e];t=i._parse(t);if(!t&&e==="step")return;r[e]=t;n.add(i._text).attr("aria-value"+e,t);n.attr(e,t)},_spin:function(e,t){var i=this;t=t||500;clearTimeout(i._spinning);i._spinning=setTimeout(function(){i._spin(e,50)},t);i._step(e)},_step:function(e){var t=this,i=t.element,n=t._value,r=t._parse(i.val())||0,a=t.options.decimals||2;if(o()!=i[0])t._focusin();if(t.options.factor&&r)r=r/t.options.factor;r=+(r+t.options.step*e).toFixed(a);r=t._adjust(r);t._update(r);t._typing=false;if(n!==r)t.trigger(w)},_toggleHover:function(e){c(e.currentTarget).toggleClass(T,e.type==="mouseenter")},_toggleText:function(e){var t=this;t._text.toggle(e);if(e)t._text.removeAttr("aria-hidden");else t._text.attr("aria-hidden","true");t.element.toggle(!e)},_parse:function(e,t){return r(e,this._culture(t),this.options.format)},_round:function(e,t){var i=this.options.round?f._round:N;return i(e,t)},_update:function(e){var t=this,i=t.options,n=i.factor,r=i.format,a=i.decimals,o=t._culture(),s=t._format(r,o),l,u;if(a===m)a=s.decimals;e=t._parse(e,o);u=e!==m;if(u)e=parseFloat(t._round(e,a),10);t._value=e=t._adjust(e);t._placeholder(f.toString(e,r,o));if(u){if(n)e=parseFloat(t._round(e*n,a),10);e=e.toString();if(e.indexOf("e")!==-1)e=t._round(+e,a);l=e;e=e.replace(g,s[g])}else{e=null;l=null}t.element.val(e);t._oldText=e;t.element.add(t._text).attr("aria-valuenow",l)},_placeholder:function(e){var t=this._text;t.val(e);if(!s&&!e)t.val(this.options.placeholder);t.attr("title",this.element.attr("title")||t.val())},_label:function(){var e=this;var t=e.element;var i=e.options;var n=t.attr("id");var r;var a;if(i.label!==null){r=L(i.label)?i.label.floating:false;a=L(i.label)?i.label.content:i.label;if(r){e._floatingLabelContainer=e.wrapper.wrap("<span></span>").parent();e.floatingLabel=new f.ui.FloatingLabel(e._floatingLabelContainer,{widget:e})}if(f.isFunction(a))a=a.call(e);if(!a)a="";if(!n){n=i.name+"_"+f.guid();t.attr("id",n)}e._inputLabel=c("<label class='"+E+"' for='"+n+"'>"+a+"</label>'").insertBefore(e.wrapper);if(e.element.attr("disabled")===h&&e.element.attr("readonly")===h)e._inputLabel.on("click"+v,e.focus.bind(e))}},_wrapper:function(){var e=this,t=e.element,i=t[0],n;n=t.parents(".k-numerictextbox");if(!n.is("span.k-numerictextbox"))n=t.hide().wrap("<span/>").parent();n[0].style.cssText=i.style.cssText;i.style.width="";e.wrapper=n.addClass("k-numerictextbox k-input").addClass(i.className).removeClass("input-validation-error").css("display","")},_reset:function(){var e=this,t=e.element,i=t.attr("form"),n=i?c("#"+i):t.closest("form");if(n[0]){e._resetHandler=function(){setTimeout(function(){e.value(t[0].value);e.max(e._initialOptions.max);e.min(e._initialOptions.min)})};e._form=n.on("reset",e._resetHandler)}}});function V(e,t,i){var n=e==="increase"?"arrow-n":"arrow-s";var r=e==="increase"?"increase":"decrease";return a.renderButton('<button role="button" tabindex="-1" unselectable="on" class="k-spinner-'+r+'" aria-label="'+t+'" title="'+t+'"></button>',R({},i,{icon:n,shape:null,rounded:null}))}function N(e,t){var i=parseFloat(e,10).toString().split(g);if(i[1])i[1]=i[1].substring(0,t);return i.join(g)}return f.cssProperties.registerPrefix("NumericTextBox","k-input-"),f.cssProperties.registerValues("NumericTextBox",[{prop:"rounded",values:f.cssProperties.roundedValues.concat([["full","full"]])}]),t.plugin(F),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.validator.min",["kendo.core.min"],function(){var e={id:"validator",name:"Validator",category:"web",description:"The Validator offers an easy way to do a client-side form validation.",depends:["core"]},w=window.kendo.jQuery,t=void 0,x=window.kendo,a=x.ui.Widget,o=".kendoValidator",k="k-invalid-msg",l=new RegExp(k,"i"),C="k-invalid",M="k-valid",u="k-validation-summary",S="k-text-error",c="k-messagebox k-messagebox-error",D=".k-input-inner",E=".k-input",T="aria-invalid",n="aria-describedby",i=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/i,r=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,s=":input:not(:button,[type=submit],[type=reset],[disabled],[readonly])",h=":checkbox:not([disabled],[readonly])",f="[type=number],[type=range]",d="blur",A="name",p="form",v="novalidate",g="validate",m="change",I="validateInput",_=function(e,t){if(typeof t==="string")t=new RegExp("^(?:"+t+")$");return t.test(e)},y=function(e,t,i){var n=e.val();if(e.filter(t).length&&n!=="")return _(n,i);return true},b=function(e,t){if(e.length)return e[0].attributes[t]!=null;return false};if(!x.ui.validator)x.ui.validator={rules:{},messages:{},allowSubmit:w.noop,validateOnInit:w.noop};function P(e){var t=x.ui.validator.ruleResolvers||{},i={},n;for(n in t)w.extend(true,i,t[n].resolve(e));return i}function B(e){return e.replace(/&amp/g,"&amp;").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">")}function O(e){e=(e+"").split(".");if(e.length>1)return e[1].length;return 0}function z(e){if(w.parseHTML)return w(w.parseHTML(e));return w(e)}function L(e,t){var i=w(),n,r;for(var a=0,o=e.length;a<o;a++){n=e[a];if(l.test(n.className)){r=n.getAttribute(x.attr("for"));if(r===t)i=i.add(n)}}return i}function R(e,t){if(!e)return false;if(typeof e.nodeName!=="string"||e.nodeName!=="LABEL")return false;if(typeof e.getAttribute("for")!=="string"||typeof t.getAttribute("id")!=="string")return false;if(e.getAttribute("for")!==t.getAttribute("id"))return false;return true}var F="<ul>"+"#for(var i = 0; i < errors.length; i += 1){#"+'<li><a data-field="#=errors[i].field#" href="\\#">#= errors[i].message #</a></li>'+"# } #"+"</ul>",V=a.extend({init:function(e,t){var i=this,n=P(e),r="["+x.attr("validate")+"!=false]";t=t||{};t.rules=w.extend({},x.ui.validator.rules,n.rules,t.rules);t.messages=w.extend({},x.ui.validator.messages,n.messages,t.messages);a.fn.init.call(i,e,t);i._errorTemplate=x.template(i.options.errorTemplate);i._summaryTemplate=x.template(i.options.validationSummary.template||F);if(i.element.is(p))i.element.attr(v,v);i._inputSelector=s+r;i._checkboxSelector=h+r;i._errors={};i._attachEvents();i._isValidated=false;if(i._validateOnInit())i.validate()},events:[g,m,I],options:{name:"Validator",errorTemplate:'<span class="k-form-error">#= message #</span>',messages:{required:"{0} is required",pattern:"{0} is not valid",min:"{0} should be greater than or equal to {1}",max:"{0} should be smaller than or equal to {1}",step:"{0} is not valid",email:"{0} is not valid email",url:"{0} is not valid URL",date:"{0} is not valid date",dateCompare:"End date should be greater than or equal to the start date",captcha:"The text you entered doesn't match the image."},rules:{required:function(e){var t=!e.attr("name")&&!e.is(":checked"),i=e.attr("name"),n=!!i&&i.indexOf("'")>-1?'"':"'",r=e.attr("name")&&!this.element.find("input[name="+n+e.attr("name")+n+"]:checked").length,a=e.filter("[type=checkbox]").length&&(t||r),o=e.filter("[type=radio]").length&&!this.element.find("input[name="+n+e.attr("name")+n+"]:checked").length,s=e.val();return!(b(e,"required")&&(!s||s===""||s.length===0||a||o))},pattern:function(e){if(e.filter("[type=text],[type=email],[type=url],[type=tel],[type=search],[type=password]").filter("[pattern]").length&&e.val()!=="")return _(e.val(),e.attr("pattern"));return true},min:function(e){if(e.filter(f+",["+x.attr("type")+"=number]").filter("[min]").length&&e.val()!==""){var t=parseFloat(e.attr("min"))||0,i=x.parseFloat(e.val());return t<=i}return true},max:function(e){if(e.filter(f+",["+x.attr("type")+"=number]").filter("[max]").length&&e.val()!==""){var t=parseFloat(e.attr("max"))||0,i=x.parseFloat(e.val());return t>=i}return true},step:function(e){if(e.filter(f+",["+x.attr("type")+"=number]").filter("[step]").length&&e.val()!==""){var t=parseFloat(e.attr("min"))||0,i=parseFloat(e.attr("step"))||1,n=parseFloat(e.val()),r=O(i),a;if(r){a=Math.pow(10,r);return Math.floor((n-t)*a)%(i*a)/Math.pow(100,r)===0}return(n-t)%i===0}return true},email:function(e){return y(e,"[type=email],["+x.attr("type")+"=email]",i)},url:function(e){return y(e,"[type=url],["+x.attr("type")+"=url]",r)},date:function(e){if(e.filter("[type^=date],["+x.attr("type")+"=date]").length&&e.val()!=="")return x.parseDate(e.val(),e.attr(x.attr("format")))!==null;return true},captcha:function(e){if(e.filter("["+x.attr("role")+"=captcha]").length){var t=this,i=x.widgetInstance(e),n=function(e){return typeof e!=="undefined"&&e!==null};if(!e.data("captcha_validating")&&!n(i.isValid())&&!!i.getCaptchaId()){e.data("captcha_validating",true);t._validating=true;i.validate().done(function(){t._validating=false;t._checkElement(e)}).fail(function(e){t._validating=false;if(e.error&&e.error==="handler_not_defined")window.console.warn("Captcha's validationHandler is not defined! You should either define a proper validation endpoint or declare a callback function to ensure the required behavior.")})}if(n(i.isValid())){e.removeData("captcha_validating");return i.isValid()}}return true}},validateOnBlur:true,validationSummary:false},_allowSubmit:function(){return x.ui.validator.allowSubmit(this.element,this.errors())},_validateOnInit:function(){return x.ui.validator.validateOnInit(this.element)},destroy:function(){a.fn.destroy.call(this);this.element.off(o);if(this.validationSummary){this.validationSummary.off(o);this.validationSummary=null}},value:function(){if(!this._isValidated)return false;return this.errors().length===0},_submit:function(e){if(!this.validate()&&!this._allowSubmit()||this._validating){e.stopPropagation();e.stopImmediatePropagation();e.preventDefault();return false}return true},_checkElement:function(e){var t=this.value();this.validateInput(e);if(this.value()!==t)this.trigger(m)},_attachEvents:function(){var e=this;if(e.element.is(p))e.element.on("submit"+o,e._submit.bind(e));if(e.options.validateOnBlur)if(!e.element.is(s)){e.element.on(d+o,e._inputSelector,function(){e._checkElement(w(this))});e.element.on("click"+o,e._checkboxSelector,function(){e._checkElement(w(this))})}else{e.element.on(d+o,function(){e._checkElement(e.element)});if(e.element.is(h))e.element.on("click"+o,function(){e._checkElement(e.element)})}},validate:function(){var e;var t;var i=false;var n;var r=this.value();this._errors={};if(!this.element.is(s)){var a=false;e=this.element.find(this._inputSelector);for(t=0,n=e.length;t<n;t++)if(!this.validateInput(e.eq(t)))a=true;i=!a}else i=this.validateInput(this.element);if(this.options.validationSummary&&!r)this.showValidationSummary();this.trigger(g,{valid:i,errors:this.errors()});if(r!==i)this.trigger(m);return i},validateInput:function(e){e=w(e);this._isValidated=true;var t=this,c=t._errorTemplate,h=t._checkValidity(e),i=h.valid,n,f="."+k,r=e.attr(A)||"",a=t._findMessageContainer(r).add(e.next(f).filter(function(){var e=w(this);if(e.filter("["+x.attr("for")+"]").length)return e.attr(x.attr("for"))===r;return true})).addClass("k-hidden"),o=!i?t._extractMessage(e,h.key):"",s=!i?z(c({message:B(o),field:r})):"",d=!e.attr(T),p=e.is(D),v=e.parent(E);e.removeAttr(T);if(e.hasClass("k-hidden"))n=x.widgetInstance(e.closest(".k-signature"));if(!i&&!e.data("captcha_validating")){t._errors[r]=o;var g=a.attr("id");t._decorateMessageContainer(s,r);if(g)s.attr("id",g);if(a.length!==0)a.replaceWith(s);else{n=n||x.widgetInstance(e);var l=e.parent().get(0);var u=e.next().get(0);var m=e.prev().get(0);if(!n&&e.is("[type=radio]"))n=x.widgetInstance(e.closest(".k-radio-list"));if(!n&&e.is("[type=checkbox]"))n=x.widgetInstance(e.closest(".k-checkbox-list"));if(n&&n.wrapper&&(n.element!==n.wrapper||n.options.name=="Signature"))s.insertAfter(n.wrapper);else if(l&&l.nodeName==="LABEL")s.insertAfter(l);else if(u&&R(u,e[0]))s.insertAfter(u);else if(m&&R(m,e[0]))s.insertAfter(e);else if(p&&v.length)s.insertAfter(v);else s.insertAfter(e)}s.removeClass("k-hidden");e.attr(T,true)}else delete t._errors[r];if(d!==i)this.trigger(I,{valid:i,input:e,error:o,field:r});n=n&&n.options.name=="Signature"?n:x.widgetInstance(e);if(!n||!(n._inputWrapper||n.wrapper)){e.toggleClass(C,!i);e.toggleClass(M,i)}if(n){var _=n._inputWrapper||n.wrapper;var y=n._inputLabel;if(_){_.toggleClass(C,!i);_.toggleClass(M,i)}if(y)y.toggleClass(S,!i)}if(d!==i){var b=s?s.attr("id"):a.attr("id");t._associateMessageContainer(e,b);if(this.options.validationSummary&&this.options.validateOnBlur)this.showValidationSummary()}return i},hideMessages:function(){var e=this,t="."+k,i=e.element;e._disassociateMessageContainers();if(!i.is(s))i.find(t).addClass("k-hidden");else i.next(t).addClass("k-hidden")},reset:function(){var e=this,t=e.element.find("."+C),i=e.element.find("."+S);e._errors=[];e.hideMessages();e.hideValidationSummary();t.removeAttr(T);t.removeClass(C);i.removeClass(S)},_findMessageContainer:function(e){var t=x.ui.validator.messageLocators,i,n=w();for(var r=0,a=this.element.length;r<a;r++)n=n.add(L(this.element[r].getElementsByTagName("*"),e));for(i in t)n=n.add(t[i].locate(this.element,e));return n},_decorateMessageContainer:function(e,t){var i=x.ui.validator.messageLocators,n;e.addClass(k).attr(x.attr("for"),t||"");if(!e.attr("id"))e.attr("id",t+"-error");for(n in i)i[n].decorate(e,t)},_extractMessage:function(e,t){var i=this,n=i.options.messages[t],r=e.attr(A),a;if(!x.ui.Validator.prototype.options.messages[t])a=x.isFunction(n)?n(e):n;n=x.isFunction(n)?n(e):n;return x.format(e.attr(x.attr(t+"-msg"))||e.attr("validationMessage")||a||n||e.attr("title")||"",r,e.attr(t)||e.attr(x.attr(t)))},_checkValidity:function(e){var t=this.options.rules,i;for(i in t)if(!t[i].call(this,e))return{valid:false,key:i};return{valid:true}},errors:function(){var e=[],t=this._errors,i;for(i in t)e.push(t[i]);return e},setOptions:function(e){if(e.validationSummary)this.hideValidationSummary();x.deepExtend(this.options,e);this.destroy();this.init(this.element,this.options);this._setEvents(this.options)},_getInputNames:function(){var e=this,t=e.element.find(e._inputSelector),i=[];for(var n=0,r=t.length;n<r;n++){var a=w(t[n]);if(b(a,A))if(i.indexOf(a.attr(A))===-1||a.closest(".k-checkbox-list").length===0&&a.closest(".k-radio-list").length===0)i.push(a.attr(A))}return i},_associateMessageContainer:function(e,t){var i=x.getWidgetFocusableElement(e);if(!i||!t)return;x.toggleAttribute(i,n,t)},_disassociateMessageContainers:function(){var e=this,t=e.element.find("."+C).addBack(),i,n;for(var r=0;r<t.length;r+=1){i=w(t[r]);if(i.is("input")){n=e._findMessageContainer(i.attr(A)).add(i.next("."+k)).attr("id");e._associateMessageContainer(i,n)}}},_errorsByName:function(){var e=this,t=e._getInputNames(),i=[];for(var n=0;n<t.length;n+=1){var r=t[n];if(e._errors[r])i.push({field:r,message:e._errors[r]})}return i},_renderSummary:function(){var e=this,t=this.options.validationSummary,i=this.element,n=i.prev(),r;if(t.container)r=w(t.container);else if(n&&n.hasClass(u))r=n;else r=w("<div />").insertBefore(e.element);r.addClass([u,c].join(" "));r.attr("role","alert");r.on("click"+o,e._summaryClick.bind(e));return r},_summaryClick:function(e){e.preventDefault();var t=this,i=w(e.target),n=t.element.find("[name='"+i.data("field")+"']"),r;if(!n.length)return;r=x.getWidgetFocusableElement(n);if(r)r.trigger("focus")},showValidationSummary:function(){var e=this,t=e.validationSummary,i=e._errorsByName(),n;if(!t)t=e.validationSummary=e._renderSummary();n=z(e._summaryTemplate({errors:i}));t.html(n);t.toggleClass("k-hidden",!i.length)},hideValidationSummary:function(){var e=this,t=e.validationSummary;if(!t)return;t.addClass("k-hidden")}});return x.ui.plugin(V),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.editable.min",["kendo.checkbox.min","kendo.dropdownlist.min","kendo.datepicker.min","kendo.numerictextbox.min","kendo.validator.min","kendo.binder.min"],function(){var t={id:"editable",name:"Editable",category:"framework",depends:["checkbox","dropdownlist","datepicker","numerictextbox","validator","binder"],hidden:true},p=window.kendo.jQuery,d=void 0,v=window.kendo,e=v.ui,n=e.Widget,_=p.extend,g=v.isFunction,m=p.isPlainObject,y=p.inArray,b=".",w="off",x=/("|\%|'|\[|\]|\$|\.|\,|\:|\;|\+|\*|\&|\!|\#|\(|\)|<|>|\=|\?|\@|\^|\{|\}|\~|\/|\||`)/g,i,u="change",f="equalSet",k=["url","email","number","date","boolean"];function C(e){e=e!=null?e:"";return e.type||v.type(e)||"string"}function S(e){e.find(":input:not(:button, .k-combobox .k-input, .k-checkbox-list .k-checkbox, .k-radio-list .k-radio, ["+v.attr("role")+"=listbox], ["+v.attr("role")+"=upload], ["+v.attr("skip")+"], [type=file])").each(function(){var e=v.attr("bind"),t=this.getAttribute(e)||"",i=this.type==="checkbox"||this.type==="radio"?"checked:":"value:",n=this.getAttribute("name")===a.antiForgeryTokenName,r=this.name;if(t.indexOf(i)===-1&&r&&!n){t+=(t.length?",":"")+i+r;p(this).attr(e,t)}})}function l(e){var t=(e.model.fields||e.model)[e.field],i=C(t),n=t?t.validation:{},r=t?t.attributes:{},a,o=v.attr("type"),c=v.attr("bind"),s,l={id:e.id||e.field,name:e.field,title:e.title?e.title:e.field};for(a in n){s=n[a];if(y(a,k)>=0)l[o]=a;else if(!g(s)){var u=v.getCulture();if(typeof s==="number"&&u.name.length){var h=u.numberFormat;var f=s.toString().replace(b,h[b]);l[a]=f}else l[a]=m(s)?s.value||a:s}l[v.attr(a+"-msg")]=s.message;l.autocomplete=w}for(var d in r)l[d]=r[d];if(y(i,k)>=0)l[o]=i;l[c]=(i==="boolean"?"checked:":"value:")+e.field;return l}function o(e,t){var i=e.attr("id");if(i){t.id=i;e.removeAttr("id")}return t}function r(e){var t,i,n,r,a,o;if(e&&e.length){o=[];for(t=0,i=e.length;t<i;t++){n=e[t];a=n.text||n.value||n;r=n.value==null?n.text||n:n.value;o[t]={text:a,value:r}}}return o}function c(e,t){var i;if(!e.length)return;if(e==="DropDownTree"&&t&&t.checkboxes||e==="MultiSelect")i="<select />";else if(e==="RadioGroup"||e==="CheckBoxGroup")i="<ul />";else if(e==="Signature")i="<div></div>";else i=e==="Editor"||e==="TextArea"?"<textarea />":"<input />";return i}var T=["AutoComplete","CheckBox","CheckBoxGroup","ColorGradient","ColorPicker","ColorPalette","ComboBox","DateInput","DatePicker","DateTimePicker","DropDownTree","Editor","FlatColorPicker","MaskedTextBox","MultiColumnComboBox","MultiSelect","NumericTextBox","RadioGroup","Rating","Slider","Switch","TimePicker","DropDownList","TextBox","TextArea","Captcha","Signature"],s,A={number:function(e,t){var i=l(t);i=o(e,i);p('<input type="number"/>').attr(i).appendTo(e)},date:function(e,t){var i=l(t);i=o(e,i);p('<input type="date"/>').attr(i).appendTo(e)},string:function(e,t){var i=l(t);i=o(e,i);p('<input type="text" />').attr(i).appendTo(e)},boolean:function(e,t){var i=l(t);i=o(e,i);p('<input type="checkbox" />').attr(i).appendTo(e)},values:function(e,t){var i=l(t);var n=t.values;var r=p("<select />");i=o(e,i);for(var a in n)p('<option value="'+n[a].value+'">'+n[a].text+"</option>").appendTo(r);r.attr(i).appendTo(e)}};function M(e,t){var i=e?e.validation||{}:{},n,r;for(n in i){r=i[n];if(m(r)&&r.value)r=r.value;if(g(r))t[n]=r}}function h(e,t,i){var n=i?i.shouldRenderHidden||false:false;if(n){e.val(true);t.append(p("<input type='hidden' name='"+i.field+"' value='false' data-skip='true' data-validate='false'/>"))}}var a=n.extend({init:function(e,t){var i=this;if(t.target){t.$angular=t.target.options.$angular;if(t.target.pane)i._isMobile=true}n.fn.init.call(i,e,t);i._validateProxy=i._validate.bind(i);i.refresh()},events:[u],options:{name:"Editable",editors:{hidden:function(e,t){var i=l(t);p('<input type="hidden"/>').attr(i).appendTo(e)},number:function(e,t){var i=l(t);p('<input type="text"/>').attr(i).appendTo(e).kendoNumericTextBox({format:t.format});p("<span "+v.attr("for")+'="'+t.field+'" class="k-invalid-msg k-hidden"/>').appendTo(e)},date:function(e,t){var i=l(t),n=t.format;if(n)n=v._extractFormat(n);i[v.attr("format")]=n;p('<input type="text"/>').attr(i).appendTo(e).kendoDatePicker({format:t.format});p("<span "+v.attr("for")+'="'+t.field+'" class="k-invalid-msg k-hidden"/>').appendTo(e)},string:function(e,t){var i=l(t);p('<input type="text"/>').attr(i).appendTo(e).kendoTextBox()},boolean:function(e,t){var i=l(t);var n=p('<input type="checkbox" />').attr(i).kendoCheckBox().appendTo(e);h(n,e,t)},values:function(e,t){var i=l(t);var n=v.stringify(r(t.values));p("<select "+v.attr("text-field")+'="text"'+v.attr("value-field")+'="value"'+v.attr("source")+"='"+(n?n.replace(/\'/g,"&apos;"):n)+"'"+v.attr("role")+'="dropdownlist"/>').attr(i).appendTo(e);p("<span "+v.attr("for")+'="'+t.field+'" class="k-invalid-msg  k-hidden"/>').appendTo(e)},kendoEditor:function(e,t){var i=l(t);var n=t.editor;var r="kendo"+n;var a=t.editorOptions;var o=c(n,a);var s=p(o).attr(i).appendTo(e)[r](a);h(s,e,t)}},mobileEditors:A,clearContainer:true,validateOnBlur:true,validationSummary:false,errorTemplate:'<div class="k-tooltip k-tooltip-error k-validator-tooltip">'+'<span class="k-tooltip-icon k-icon k-i-warning"></span>'+'<span class="k-tooltip-content">#= message #</span>'+'<span class="k-callout k-callout-n"></span>'+"</div>",skipFocus:false},editor:function(t,e){var i=this,n=i._isMobile?A:i.options.editors,r=m(t),a=r?t.field:t,c=i.options.model||{},h=r&&t.values,f=h?"values":C(e),o=r&&typeof t.editor==="string"&&t.editor==="hidden",s=r&&!o&&t.editor,d=r&&p.inArray(t.editor,T)!==-1,l=s?t.editor:n[o?"hidden":f],u=i.element.find("["+v.attr("container-for")+"="+a.replace(x,"\\$1")+"]");l=l?l:n.string;if(d)l=n.kendoEditor;else if(s&&typeof t.editor==="string")l=function(e){e.append(t.editor)};u=u.length?u:i.element;l(u,_(true,{},r?t:{field:a},{model:c}))},_validate:function(e){var t=this,i,n=e.value,r=t._validationEventInProgress,a={},o=v.attr("bind"),s=e.field.replace(x,"\\$1"),l=new RegExp("(value|checked)\\s*:\\s*"+s+"\\s*(,|$)");a[e.field]=e.value;i=p(":input["+o+'*="'+s+'"]',t.element).filter("["+v.attr("validate")+"!='false']").filter(function(){return l.test(p(this).attr(o))});if(i.length>1)i=i.filter(function(){var e=p(this);return!e.is(":radio")||e.val()==n});try{t._validationEventInProgress=true;if(!t.validatable.validateInput(i)||!r&&t.trigger(u,{values:a}))e.preventDefault()}finally{t._validationEventInProgress=false}},end:function(){return this.validatable.validate()},destroy:function(){var e=this;e.angular("cleanup",function(){return{elements:e.element}});n.fn.destroy.call(e);e.options.model.unbind("set",e._validateProxy);e.options.model.unbind(f,e._validateProxy);v.unbind(e.element);if(e.validatable)e.validatable.destroy();v.destroy(e.element);e.element.removeData("kendoValidator");if(e.element.is("["+v.attr("role")+"=editable]"))e.element.removeAttr(v.attr("role"))},refresh:function(){var e=this,t,i,n=e.options.fields||[],r=e.options.clearContainer?e.element.empty():e.element,a=e.options.model||{},o={},s,c,l,u,h;if(!Array.isArray(n))n=[n];for(t=0,i=n.length;t<i;t++){s=n[t];c=m(s);l=c?s.field:s;u=(a.fields||a)[l];M(u,o);e.editor(s,u)}if(e.options.target)e.angular("compile",function(){return{elements:r,data:r.map(function(){return{dataItem:a}})}});if(!i){h=a.fields||a;for(l in h)M(h[l],o)}S(r);if(e.validatable)e.validatable.destroy();v.bind(r,e.options.model);if(e.options.validateOnBlur){e.options.model.unbind("set",e._validateProxy).bind("set",e._validateProxy);e.options.model.unbind(f,e._validateProxy).bind(f,e._validateProxy)}e.validatable=new v.ui.Validator(r,{validateOnBlur:e.options.validateOnBlur,validationSummary:e.options.validationSummary,errorTemplate:e.options.errorTemplate||d,rules:o});if(!e.options.skipFocus)r.find(":kendoFocusable").eq(0).trigger("focus")}});return a.antiForgeryTokenName="__RequestVerificationToken",e.plugin(a),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.window.min",["kendo.draganddrop.min","kendo.popup.min"],function(){var e={id:"window",name:"Window",category:"web",description:"The Window widget displays content in a modal or non-modal HTML window.",depends:["draganddrop","popup"],features:[{id:"window-fx",name:"Animation",description:"Support for animation",depends:["fx"]}]},w=window.kendo.jQuery,v=void 0,x=window.kendo,b=x.ui.Widget,C=x.ui.Popup.TabKeyTrap,n=x.ui.Draggable,S=w.isPlainObject,r=x._activeElement,o=x._outerWidth,t=x._outerHeight,l=w.extend,a=w.each,s=x.template,h="body",f,g=".kendoWindow",c=".kendoWindowModal",T=".k-window",A=".k-window-title",m=A+"bar",_=".k-window-content",M=".k-dialog-content",d=".k-resize-handle",p=".k-overlay",D="k-content-frame",i="k-i-loading",u="k-hover",E="k-focus",I="k-window-maximized",P="k-display-inline-flex",B=":visible",O="hidden",z="cursor",L="open",R="activate",F="deactivate",V="close",N="refresh",H,U,j="resizeStart",G,W="resizeEnd",q="dragstart",Y="dragend",$="restore",X,K="error",Q="overflow",Z="original-overflow-rule",J="zIndex",ee=".k-window-actions .k-i-window-minimize,.k-window-actions .k-i-window-maximize",te=".k-i-pin",ie=".k-i-unpin",ne=te+","+ie,re=".k-window-titlebar .k-window-action",ae=".k-window-titlebar .k-i-refresh",oe="WindowEventsHandled",se=/^0[a-z]*$/i,le=x.isLocalUrl,ue={small:"k-window-sm",medium:"k-window-md",large:"k-window-lg"};function ce(e){return typeof e!="undefined"}function y(e,t){return parseInt(e.css(t),10)||0}function k(e,t,i){var n;if(e&&isNaN(e)&&e.toString().indexOf("px")<0)n=e;else n=Math.max(Math.min(parseInt(e,10),i===Infinity?i:parseInt(i,10)),t===-Infinity?t:parseInt(t,10));return n}function he(){return!this.type||this.type.toLowerCase().indexOf("script")>=0}function fe(e){var t={top:e.offsetTop,left:e.offsetLeft},i=e.offsetParent;while(i){t.top+=i.offsetTop;t.left+=i.offsetLeft;var n=w(i).css("overflowX");var r=w(i).css("overflowY");if(r==="auto"||r==="scroll")t.top-=i.scrollTop;if(n==="auto"||n==="scroll")t.left-=i.scrollLeft;i=i.offsetParent}return t}var de=b.extend({init:function(e,t){var i=this,n,r={},c,h,a,f=false,o,s,d,l,p=t&&t.actions&&!t.actions.length,u;b.fn.init.call(i,e,t);t=i.options;a=t.position;e=i.element;o=t.content;l=w(window);if(p)t.actions=[];i.appendTo=w(t.appendTo);i.containment=t.draggable.containment?w(t.draggable.containment).first():null;if(o&&!S(o))o=t.content={url:o};e.find("script").filter(he).remove();if(!e.parent().is(i.appendTo)&&!i.containment&&(a.top===v||a.left===v)){if(e.is(B)){r=e.offset();f=true}else{c=e.css("visibility");h=e.css("display");e.css({visibility:O,display:""});if(document.body.contains(e[0]))r=e.offset();else r={top:0,left:0};e.css({visibility:c,display:h})}if(a.top===v)a.top=r.top;if(a.left===v)a.left=r.left}if(!ce(t.visible)||t.visible===null)t.visible=e.is(B);n=i.wrapper=e.closest(T);if(!e.is(".k-window-content")||!n[0]){e.addClass("k-window-content");e.attr("tabindex",0);i._createWindow(e,t);n=i.wrapper=e.closest(T);i.title(i.options.title);i._dimensions()}i.minTop=i.minLeft=-Infinity;i.maxTop=i.maxLeft=Infinity;i._position();if(o)i.refresh(o);if(t.visible)i.toFront(null,!t.modal);s=n.children(_);if(t.visible&&t.modal)i._overlay(n.is(B)).css({opacity:.5});n.on("mouseenter"+g,re,i._buttonEnter.bind(i)).on("mouseleave"+g,re,i._buttonLeave.bind(i)).on("click"+g,"> "+re,i._windowActionHandler.bind(i)).on("keydown"+g,i,i._keydown.bind(i)).on("focus"+g,i._focus.bind(i)).on("blur"+g,i._blur.bind(i));s.on("keydown"+g,i,i._keydownContent.bind(i));d=s.find("."+D)[0];if(d&&!l.data(oe)){l.on("blur"+g,function(){var e=w(document.activeElement).parent(_);if(e.length){var t=x.widgetInstance(e);t._focus()}});l.on("focus"+g,function(){w(_).not(M).each(function(e,t){x.widgetInstance(w(t))._blur()})});l.data(oe,true)}this._resizable();this._draggable();if(t.pinned&&this.wrapper.is(":visible"))i.pin();u=e.attr("id");if(u){u=u+"_wnd_title";n.attr({role:"dialog","aria-labelledby":u}).children(m).children(A).attr("id",u)}n.add(n.children(".k-resize-handle,"+m)).on(x.support.mousedown+g,i.toFront.bind(i));i.touchScroller=x.touchScroller(e);i._resizeHandler=i._onDocumentResize.bind(i);i._marker=x.guid().substring(0,8);w(window).on("resize"+g+i._marker,i._resizeHandler);if(t.visible){i.trigger(L);i.trigger(R)}x.notify(i);if(this.options.modal){this._tabKeyTrap=new C(n);this._tabKeyTrap.trap();this._tabKeyTrap.shouldTrap=function(){return n.data("isFront")}}},_buttonEnter:function(e){w(e.currentTarget).addClass(u)},_buttonLeave:function(e){w(e.currentTarget).removeClass(u)},_focus:function(){this.wrapper.addClass(E)},_blur:function(){this.wrapper.removeClass(E)},_dimensions:function(){var e=this.wrapper;var t=this.options;var i=t.width;var n=t.height;var r=t.maxHeight;var a=t.size;var o=["minWidth","minHeight","maxWidth","maxHeight"];var s=e.css("box-sizing")=="content-box";var c=s?y(e,"border-left-width")+y(e,"border-right-width"):0;var h=s?y(e,"border-top-width")+y(e,"border-bottom-width"):0;var f=s?y(e,"padding-top"):0;if(this.containment&&!this._isPinned){this._updateBoundaries();t.maxHeight=Math.min(this.containment.height-(h+f),r);t.maxWidth=Math.min(this.containment.width-c,t.maxWidth)}for(var l=0;l<o.length;l++){var u=t[o[l]]||"";if(u!=Infinity)e.css(o[l],u)}if(r!=Infinity)this.element.css("maxHeight",r);if(i)e.outerWidth(k(i,t.minWidth,t.maxWidth));else e.outerWidth("");if(n)e.outerHeight(k(n,t.minHeight,t.maxHeight));else e.outerHeight("");if(!t.visible)e.removeClass(P).hide();if(a&&ue[a])e.addClass(ue[a])},_position:function(){var e=this.wrapper,t=this.options.position,i,n;this._updateBoundaries();if(this.containment){t.top=t.top||0;t.left=t.left||0;i=t.top.toString().indexOf("%")>0?parseInt(this.containment.height*(parseFloat(t.top)/100),10):t.top;n=t.left.toString().indexOf("%")>0?parseInt(this.containment.width*(parseFloat(t.left)/100),10):t.left;t.top=k(i,this.minTop,this.maxTop);t.left=k(n,this.minLeft,this.maxLeft)}if(t.top&&t.top.toString().indexOf("px")>0)t.top=Number(t.top.replace("px",""));if(t.left&&t.left.toString().indexOf("px")>0)t.left=Number(t.left.replace("px",""));if(t.top===0)t.top=t.top.toString();if(t.left===0)t.left=t.left.toString();e.css({top:t.top||"",left:t.left||""})},_updateBoundaries:function(){var e=this.containment;if(!e)return null;e.width=e.innerWidth();e.height=e.innerHeight();if(parseInt(e.width,10)>e[0].clientWidth)e.width-=x.support.scrollbar();if(parseInt(e.height,10)>e[0].clientHeight)e.height-=x.support.scrollbar();e.position=fe(e[0]);if(this._isPinned){this.minTop=this.minLeft=-Infinity;this.maxTop=this.maxLeft=Infinity}else{this.minTop=e.scrollTop();this.minLeft=e.scrollLeft();this.maxLeft=this.minLeft+e.width-o(this.wrapper,true);this.maxTop=this.minTop+e.height-t(this.wrapper,true)}},_animationOptions:function(e){var t=this.options.animation;var i={open:{effects:{}},close:{hide:true,effects:{}}};return t&&t[e]||i[e]},_resize:function(){x.resize(this.element.children())},_resizable:function(){var e=this.options.resizable;var i=this.wrapper;if(this.resizing){i.off("dblclick"+g).children(d).remove();this.resizing.destroy();this.resizing=null}if(e){i.on("dblclick"+g,m,function(e){if(!w(e.target).closest(".k-window-action").length)this.toggleMaximization()}.bind(this));a("n e s w se sw ne nw".split(" "),function(e,t){i.append(f.resizeHandle(t))});this.resizing=new pe(this)}i=null},_draggable:function(){var e=this.options.draggable;if(this.dragging){this.dragging.destroy();this.dragging=null}if(e)this.dragging=new ve(this,e.dragHandle||m)},_actions:function(){var e=this.options;var t=e.actions;var i=e.pinned;var n=this.wrapper.children(m);var r=n.find(".k-window-actions");var a=["maximize","minimize"];t=w.map(t,function(e){e=i&&e.toLowerCase()==="pin"?"unpin":e;return{name:a.indexOf(e.toLowerCase())>-1?"window-"+e:e}});r.html(x.render(f.action,t))},setOptions:function(e){var t=this;var i=t.options.size;var n=this.containment&&!t._isPinned?this.containment:w(document);var r=JSON.parse(JSON.stringify(e));l(e.position,t.options.position);l(e.position,r.position);t._containerScrollTop=n.scrollTop();t._containerScrollLeft=n.scrollLeft();b.fn.setOptions.call(t,e);var a=t.options.scrollable!==false;t.restore();if(typeof e.title!=="undefined")t.title(e.title);t.wrapper.removeClass(ue[i]);t._dimensions();t._position();t._resizable();t._draggable();t._actions();if(typeof e.modal!=="undefined"){var o=t.options.visible!==false;t._enableDocumentScrolling();t._overlay(e.modal&&o)}t.element.css(Q,a?"":"hidden")},events:[L,R,F,V,"minimize","maximize",N,$,j,"resize",W,q,Y,"kendoKeydown",K],options:{name:"Window",animation:{open:{effects:{zoom:{direction:"in"},fade:{direction:"in"}},duration:350},close:{effects:{zoom:{direction:"out",properties:{scale:.7}},fade:{direction:"out"}},duration:350,hide:true}},title:"",actions:["Close"],autoFocus:true,modal:false,size:"auto",resizable:true,draggable:true,minWidth:90,minHeight:50,maxWidth:Infinity,maxHeight:Infinity,pinned:false,scrollable:true,position:{},content:null,visible:null,height:null,width:null,appendTo:"body",isMaximized:false,isMinimized:false},_closable:function(){return w.inArray("close",w.map(this.options.actions,function(e){return e.toLowerCase()}))>-1},_keydownContent:function(e){var t=this,i=x.keys,n=e.keyCode;if(n==i.ESC&&t._closable()){e.stopPropagation();t._close(false)}},_keydown:function(e){var t=this,i=t.options,n=x.keys,r=e.keyCode,a=t.wrapper,o,s,l=10,u=i.isMaximized,c=i.isMinimized,h,f,d,p;if(r==n.ESC&&t._closable()){e.stopPropagation();t._close(false)}if(e.target!=e.currentTarget||t._closing)return;if(e.altKey&&r==82)t.refresh();if(e.altKey&&r==80)if(t.options.pinned)t.unpin();else t.pin();if(e.altKey&&r==n.UP){if(c){t.restore();t.wrapper.trigger("focus")}else if(!u){t.maximize();t.wrapper.trigger("focus")}}else if(e.altKey&&r==n.DOWN)if(!c&&!u){t.minimize();t.wrapper.trigger("focus")}else if(u){t.restore();t.wrapper.trigger("focus")}o=x.getOffset(a);if(t.containment&&!t._isPinned)o=t.options.position;if(i.draggable&&!e.ctrlKey&&!e.altKey&&!u){t._updateBoundaries();if(r==n.UP){o.top=k(o.top-l,t.minTop,t.maxTop);s=a.css("top",o.top)}else if(r==n.DOWN){o.top=k(o.top+l,t.minTop,t.maxTop);s=a.css("top",o.top)}else if(r==n.LEFT){o.left=k(o.left-l,t.minLeft,t.maxLeft);s=a.css("left",o.left)}else if(r==n.RIGHT){o.left=k(o.left+l,t.minLeft,t.maxLeft);s=a.css("left",o.left)}}if(i.resizable&&e.ctrlKey&&!u&&!c){if(r==n.UP){s=true;f=a.outerHeight()-l}else if(r==n.DOWN){s=true;if(t.containment&&!t._isPinned)f=Math.min(a.outerHeight()+l,t.containment.height-o.top-y(a,"padding-top")-y(a,"borderBottomWidth")-y(a,"borderTopWidth"));else f=a.outerHeight()+l}if(r==n.LEFT){s=true;h=a.outerWidth()-l}else if(r==n.RIGHT){s=true;if(t.containment&&!t._isPinned)h=Math.min(a.outerWidth()+l,t.containment.width-o.left-y(a,"borderLeftWidth")-y(a,"borderRightWidth"));else h=a.outerWidth()+l}if(s){d=k(h,i.minWidth,i.maxWidth);p=k(f,i.minHeight,i.maxHeight);if(!isNaN(d)){a.outerWidth(d);t.options.width=d+"px"}if(!isNaN(p)){a.outerHeight(p);t.options.height=p+"px"}t.resize()}}if(s)e.preventDefault()},_overlay:function(e){var t=this.containment?this.containment.children(p):this.appendTo.children(p),i=this.wrapper,n=e?"block":"none",r=parseInt(i.css(J),10)-1;if(!t.length)t=w("<div class='k-overlay' />");t.insertBefore(i[0]).css({zIndex:r,display:n});if(this.options.modal.preventScroll&&!this.containment)this._stopDocumentScrolling();return t},_actionForIcon:function(e){var t=/\bk-i(-\w+)+\b/.exec(e[0].className)[0];return{"k-i-close":"_close","k-i-window-maximize":"maximize","k-i-window-minimize":"minimize","k-i-window-restore":"restore","k-i-refresh":"refresh","k-i-pin":"pin","k-i-unpin":"unpin"}[t]},_windowActionHandler:function(e){if(this._closing)return;var t=w(e.target).closest(".k-window-action").find(".k-icon");var i=this._actionForIcon(t);if(i){e.preventDefault();this[i]();return false}},_modals:function(){var e=this,t=w(T+B),i,n=[];for(var r=0;r<t.length;r+=1){i=e._object(w(t[r]));if(i&&i.options&&i.options.modal&&i.options.visible&&i.options.appendTo===e.options.appendTo&&(!i.containment||e.containment&&i.containment[0]===e.containment[0]))n.push(i.wrapper[0])}n.sort(function(e,t){return e.style.zIndex-t.style.zIndex});e=null;return w(n)},_object:function(e){var t=e.children(_);var i=x.widgetInstance(t);if(i)return i;return v},center:function(){var e=this,t=e.options.position,i=e.wrapper,n=w(window),r=0,a=0,o,s;if(e.options.isMaximized)return e;if(e.options.pinned&&!e._isPinned)e.pin();if(!e.options.pinned){r=n.scrollTop();a=n.scrollLeft()}if(this.containment&&!e.options.pinned){o=this.minTop+(this.maxTop-this.minTop)/2;s=this.minLeft+(this.maxLeft-this.minLeft)/2}else{e._scrollIsAppended=true;s=a+Math.max(0,(n.width()-i.outerWidth())/2);o=r+Math.max(0,(n.height()-i.outerHeight()-y(i,"paddingTop"))/2)}i.css({left:s,top:o});t.top=o;t.left=s;return e},title:function(e){var t=this,i,n=true,r=t.wrapper,a=r.children(m),o=a.children(A);if(!arguments.length)return o.html();if(w.isPlainObject(e)){i=typeof e.text!=="undefined"?e.text:"";n=e.encoded!==false}else i=e;if(i===false){r.addClass("k-window-titleless");r.css("padding-top",0);a.remove()}else if(!a.length){r.prepend(f.titlebar({title:n?x.htmlEncode(i):i}));t._actions();a=r.children(m)}else o.html(n?x.htmlEncode(i):i);t.options.title=i;return t},content:function(e,i){var n=this.wrapper.children(_),t=n.children(".km-scroll-container");n=t[0]?t:n;if(!ce(e))return n.html();this.angular("cleanup",function(){return{elements:n.children()}});x.destroy(this.element.children());n.empty().html(e);this.angular("compile",function(){var e=[];for(var t=n.length;--t>=0;)e.push({dataItem:i});return{elements:n.children(),data:e}});return this},open:function(){var e=this,t=e.wrapper,i=e.options,n=this._animationOptions("open"),r=t.children(_),a,o,s=this.containment&&!e._isPinned,l=s?this.containment:w(document);if(!e.trigger(L)){if(e._closing)t.kendoStop(true,true);e._closing=false;e.toFront();if(i.autoFocus)e.wrapper.trigger("focus");i.visible=true;if(i.modal){o=!!e._modals().length;a=e._overlay(o);a.kendoStop(true,true);if(n.duration&&x.effects.Fade&&!o){var u=x.fx(a).fadeIn();u.duration(n.duration||0);u.endValue(.5);u.play()}else a.css("opacity",.5);a.show();w(window).on("focus"+c,function(){if(t.data("isFront")&&!w(document.activeElement).closest(t).length)e.wrapper.trigger("focus")})}if(!t.is(B)){r.css(Q,O);e.wrapper.find(re).addClass("k-button-flat");t.addClass(P).kendoStop().kendoAnimate({effects:n.effects,duration:n.duration,complete:this._activate.bind(this)})}}if(i.isMaximized){e._containerScrollTop=l.scrollTop();e._containerScrollLeft=l.scrollLeft();e._stopDocumentScrolling()}if(this.options.pinned&&!this._isPinned)this.pin();return e},_activate:function(){var e=this.options.scrollable!==false;if(this.options.autoFocus)this.wrapper.trigger("focus");this.element.css(Q,e?"":"hidden");x.resize(this.element.children());this.trigger(R)},_removeOverlay:function(e){var t=this._modals();var i=this.options;var n=i.modal&&!t.length;var r=this._animationOptions("close");if(n){if(!e&&r.duration&&x.effects.Fade){var a=x.fx(i.modal?this._overlay(true):w(v)).fadeOut();a.duration(r.duration||0);a.startValue(.5);a.play()}else this._overlay(false).remove();if(i.modal.preventScroll)this._enableDocumentScrolling()}else if(t.length){this._object(t.last())._overlay(true);if(i.modal.preventScroll)this._stopDocumentScrolling()}},_close:function(e){var t=this,n=t.wrapper,i=t.options,r=this._animationOptions("open"),a=this._animationOptions("close"),o=this.containment&&!t._isPinned,s=o?this.containment:w(document),l;if(t._closing)return;l=t.trigger(V,{userTriggered:!e});t._closing=!l;if(n.is(B)&&!l){i.visible=false;w(T).each(function(e,t){var i=w(t).children(_);if(t!=n&&i.find("> ."+D).length>0)i.children(p).remove()});this._removeOverlay();t.wrapper.find(re).removeClass("k-button-flat");n.kendoStop().kendoAnimate({effects:a.effects||r.effects,reverse:a.reverse===true,duration:a.duration,complete:this._deactivate.bind(this)});w(window).off(c)}if(t.options.isMaximized){t._enableDocumentScrolling();if(t._containerScrollTop&&t._containerScrollTop>0)s.scrollTop(t._containerScrollTop);if(t._containerScrollLeft&&t._containerScrollLeft>0)s.scrollLeft(t._containerScrollLeft)}if(t.options.iframe)t.wrapper.trigger("blur")},_deactivate:function(){var e=this;e.wrapper.removeClass(P).hide().css("opacity","");e.trigger(F);if(e.options.modal){var t=e._object(e._modals().last());if(t)t.toFront()}},close:function(){this._close(true);return this},_actionable:function(e){return w(e).is(re+","+re+" .k-icon, :input, a, .k-input, .k-icon, [role='gridcell'], .k-input-value-text")},_shouldFocus:function(e){var t=r(),i=this.wrapper;return this.options.autoFocus&&!w(t).is(i)&&!this._actionable(e)&&(!i.find(t).length||!i.find(e).length)},toFront:function(e,t){var i=this,a=i.wrapper,o=a[0],n=i.containment&&!i._isPinned,r=this._animationOptions("open"),s=+a.css(J),c=s,h=e&&e.target||null;w(T).each(function(e,t){var i=w(t),n=i.css(J),r=i.children(_);if(!isNaN(n))s=Math.max(+n,s);a.data("isFront",t==o);if(t!=o&&r.find("."+D).length&&!r.find(p).length)r.append(f.overlay)});if(!a[0].style.zIndex||c<s)a.css(J,s+2);i.element.find("> .k-overlay").remove();if(i._shouldFocus(h)){if(!t)setTimeout(function(){i.wrapper.focus()},r?r.duration:0);var l=n?i.containment.scrollTop():w(window).scrollTop(),u=parseInt(a.position().top,10);if(!i.options.pinned&&u>0&&u<l)if(l>0)w(window).scrollTop(u);else a.css("top",l)}a=null;return i},toggleMaximization:function(){if(this._closing)return this;return this[this.options.isMaximized?"restore":"maximize"]()},restore:function(){var e=this;var t=e.options;var i=t.minHeight;var n=e.restoreOptions;var r;var a=e.containment&&!e._isPinned?e.containment:w(document);if(!t.isMaximized&&!t.isMinimized)return e;if(i&&i!=Infinity)e.wrapper.css("min-height",i);if(n&&!t.isMaximized){n.height=k(n.height,e.options.minHeight,e.options.maxHeight);r=t.position.top+parseInt(n.height,10)>e.maxTop;if(r){t.position.top=k(t.position.top,e.minTop,e.maxTop-parseInt(n.height,10));l(n,{left:t.position.left,top:t.position.top})}}e.wrapper.css({position:t.pinned?"fixed":"absolute",left:n.left,top:n.top,width:n.width,height:n.height}).removeClass(I).find(".k-window-content,.k-resize-handle").show().end().find(".k-window-titlebar .k-i-window-restore").parent().remove().end().end().find(ee).parent().show().end().end().find(ne).parent().show();if(t.isMaximized)e.wrapper.find(".k-i-window-maximize").parent().trigger("focus");else if(t.isMinimized)e.wrapper.find(".k-i-window-minimize").parent().trigger("focus");e.options.width=n.width;e.options.height=n.height;if(!e.options.modal.preventScroll)e._enableDocumentScrolling();if(e._containerScrollTop&&e._containerScrollTop>0)a.scrollTop(e._containerScrollTop);if(e._containerScrollLeft&&e._containerScrollLeft>0)a.scrollLeft(e._containerScrollLeft);t.isMaximized=t.isMinimized=false;e.wrapper.removeAttr("aria-labelled-by");e.resize();e.trigger($);return e},_sizingAction:function(e,t){var i=this,n=i.wrapper,r=n[0].style,a=i.options;if(a.isMaximized||a.isMinimized)return i;i.restoreOptions={width:r.width,height:r.height};n.children(d).hide().end().children(m).find(ee).parent().hide().eq(0).before(f.action({name:"window-restore"}));t.call(i);i.wrapper.children(m).find(ne).parent().toggle(e!=="maximize");i.trigger(e);n.find(".k-i-window-restore").parent().trigger("focus");return i},maximize:function(){this._sizingAction("maximize",function(){var e=this,t=e.wrapper,i=this.containment&&!e._isPinned,n=t.position(),r=w(document);l(e.restoreOptions,{left:n.left+(i?this.containment.scrollLeft():0),top:n.top+(i?this.containment.scrollTop():0)});this._containerScrollTop=i?this.containment.scrollTop():r.scrollTop();this._containerScrollLeft=i?this.containment.scrollLeft():r.scrollLeft();e._stopDocumentScrolling();t.css({top:i?this.containment.scrollTop():0,left:i?this.containment.scrollLeft():0,position:i?"absolute":"fixed"}).addClass(I);e.options.isMaximized=true;e._onDocumentResize()});return this},_stopDocumentScrolling:function(){var e=this;var t=e.containment;if(t&&!e._isPinned){e._storeOverflowRule(t);t.css(Q,O);e.wrapper.css({maxWidth:t.innerWidth(),maxHeight:t.innerHeight()});return}var i=w("body");e._storeOverflowRule(i);i.css(Q,O);var n=w("html");e._storeOverflowRule(n);n.css(Q,O)},_enableDocumentScrolling:function(){var e=this;var t=e.containment;if(t&&!e._isPinned){e._restoreOverflowRule(t);e.wrapper.css({maxWidth:t.width,maxHeight:t.height});return}e._restoreOverflowRule(w(document.body));e._restoreOverflowRule(w("html"))},_storeOverflowRule:function(e){if(this._isOverflowStored(e))return;var t=e.get(0).style.overflow;if(typeof t==="string")e.data(Z,t)},_isOverflowStored:function(e){return typeof e.data(Z)==="string"},_restoreOverflowRule:function(e){var t=e.data(Z);if(t!==null&&t!==v){e.css(Q,t);e.removeData(Z)}else e.css(Q,"")},isMaximized:function(){return this.options.isMaximized},minimize:function(){this._sizingAction("minimize",function(){var e=this;e.wrapper.css({height:"",minHeight:""});e.element.hide();e.options.isMinimized=true});this.wrapper.attr("aria-labelled-by",this.element.attr("aria-labelled-by"));this._updateBoundaries();return this},isMinimized:function(){return this.options.isMinimized},pin:function(){var e=this,t=w(window),i=e.wrapper,n=e.options,r=n.position,a=this.containment?fe(i[0]).top+y(this.containment,"borderTopWidth"):y(i,"top"),o=this.containment?fe(i[0]).left+y(this.containment,"borderLeftWidth"):y(i,"left");if(!e.options.isMaximized){r.top=a;r.left=o;if(e._scrollIsAppended&&(!this.containment||this.containment.css("position")!=="fixed")){r.top-=t.scrollTop();r.left-=t.scrollLeft();e._scrollIsAppended=false}i.css(l(r,{position:"fixed"}));i.children(m).find(te).addClass("k-i-unpin").removeClass("k-i-pin");e._isPinned=true;e.options.pinned=true;if(this.containment){n.maxWidth=n.maxHeight=Infinity;i.css({maxWidth:"",maxHeight:""})}}},unpin:function(){var e=this,t=w(window),i=e.wrapper,n=e.options,r=e.options.position,a=e.containment,o=parseInt(i.css("top"),10)+t.scrollTop(),s=parseInt(i.css("left"),10)+t.scrollLeft();if(!e.options.isMaximized){e._isPinned=false;e._scrollIsAppended=true;e.options.pinned=false;if(a){e._updateBoundaries();n.maxWidth=Math.min(a.width,n.maxWidth);n.maxHeight=Math.min(a.height-y(i,"padding-top"),n.maxHeight);i.css({maxWidth:n.maxWidth,maxHeight:n.maxHeight});if(o<a.position.top)o=e.minTop;else if(o>a.position.top+a.height)o=e.maxTop;else o=o+a.scrollTop()-(a.position.top+y(a,"border-top-width"));if(s<a.position.left)s=e.minLeft;else if(s>a.position.left+a.width)s=e.maxLeft;else s=s+a.scrollLeft()-(a.position.left+y(a,"border-left-width"))}r.top=k(o,e.minTop,e.maxTop);r.left=k(s,e.minLeft,e.maxLeft);i.css(l(r,{position:""}));i.children(m).find(ie).addClass("k-i-pin").removeClass("k-i-unpin")}},_onDocumentResize:function(){var e=this,t=e.wrapper,i=w(window),n=x.support.zoomLevel(),r=t.css("box-sizing")=="content-box",a,o;if(!e.options.isMaximized)return;var s=r?y(t,"border-left-width")+y(t,"border-right-width"):0;var l=r?y(t,"border-top-width")+y(t,"border-bottom-width"):0;var u=r?y(t,"padding-top"):0;if(e.containment&&!e._isPinned){a=e.containment.innerWidth()-s;o=e.containment.innerHeight()-(l+u)}else{a=i.width()/n-s;o=i.height()/n-(l+u)}t.css({width:a,height:o});e.options.width=a;e.options.height=o;e.resize()},refresh:function(e){var t=this,i=t.options,n=w(t.element),r,a,o;if(!S(e))e={url:e};e=l(i.content,e);a=ce(i.iframe)?i.iframe:e.iframe;o=e.url;if(o){if(!ce(a))a=!le(o);if(!a)t._ajaxRequest(e);else{r=n.find("."+D)[0];if(r)r.src=o||r.src;else n.html(f.contentFrame(l({},i,{content:e})));n.find("."+D).off("load"+g).on("load"+g,this._triggerRefresh.bind(this))}}else{if(e.template)t.content(s(e.template)({}));t.trigger(N)}n.toggleClass("k-window-iframecontent",!!a);return t},_triggerRefresh:function(){this.trigger(N)},_ajaxComplete:function(){clearTimeout(this._loadingIconTimeout);this.wrapper.find(ae).removeClass(i)},_ajaxError:function(e,t){this.trigger(K,{status:t,xhr:e})},_ajaxSuccess:function(i){return function(e){var t=e;if(i)t=s(i)(e||{});this.content(t,e);this.element.prop("scrollTop",0);this.trigger(N)}},_showLoading:function(){this.wrapper.find(ae).addClass(i)},_ajaxRequest:function(e){this._loadingIconTimeout=setTimeout(this._showLoading.bind(this),100);w.ajax(l({type:"GET",dataType:"html",cache:false,error:this._ajaxError.bind(this),complete:this._ajaxComplete.bind(this),success:this._ajaxSuccess(e.template).bind(this)},e))},_destroy:function(){if(this.resizing)this.resizing.destroy();if(this.dragging)this.dragging.destroy();this.wrapper.off(g).children(_).off(g).end().find(".k-resize-handle,.k-window-titlebar").off(g);w(window).off("resize"+g+this._marker);w(window).off(c);w(window).off(g);clearTimeout(this._loadingIconTimeout);b.fn.destroy.call(this);this.unbind(v);x.destroy(this.wrapper)},destroy:function(){this._destroy();if(this.options.modal)this._removeOverlay(true);this.wrapper.empty().remove();this.wrapper=this.appendTo=this.element=w()},_createWindow:function(){var e=this.element,t=this.options,i,n,r=x.support.isRtl(e);if(t.scrollable===false)e.css("overflow","hidden");n=w(f.wrapper(t));i=e.find("iframe:not(.k-content-frame)").map(function(){var e=this.getAttribute("src");this.src="";return e});n.toggleClass("k-rtl",r).attr("tabindex",0).append(e).find("iframe:not(.k-content-frame)").each(function(e){this.src=i[e]});if(this.containment)this.containment.prepend(n);else if(this.appendTo)n.appendTo(this.appendTo);n.find(".k-window-title").css(r?"left":"right",o(n.find(".k-window-actions"))+10);e.css("visibility","").show();e.find("[data-role=editor]").each(function(){var e=w(this).data("kendoEditor");if(e)e.refresh()});n=e=null}});function pe(e){var t=this;t.owner=e;t._preventDragging=false;t._draggable=new n(e.wrapper,{filter:">"+d,group:e.wrapper.id+"-resizing",dragstart:t.dragstart.bind(t),drag:t.drag.bind(t),dragend:t.dragend.bind(t)});t._draggable.userEvents.bind("press",t.addOverlay.bind(t));t._draggable.userEvents.bind("release",t.removeOverlay.bind(t))}function ve(e,t){var i=this;i.owner=e;i._preventDragging=false;i._draggable=new n(e.wrapper,{filter:t,group:e.wrapper.id+"-moving",dragstart:i.dragstart.bind(i),drag:i.drag.bind(i),dragend:i.dragend.bind(i),dragcancel:i.dragcancel.bind(i)});i._draggable.userEvents.stopPropagation=false}return f={wrapper:s("<div class='k-widget k-window'></div>"),action:s("<a role='button' href='\\#' class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button k-window-action' aria-label='#= name #'>"+"<span class='k-button-icon k-icon k-i-#= name.toLowerCase() #'></span>"+"</a>"),titlebar:s("<div class='k-window-titlebar k-hstack'>"+"<span class='k-window-title'>#= title #</span>"+"<div class='k-window-actions k-hstack'></div>"+"</div>"),overlay:"<div class='k-overlay'></div>",contentFrame:s("<iframe frameborder='0' title='#= title #' class='"+D+"' "+"src='#= content.url #'>"+"This page requires frames in order to show content"+"</iframe>"),resizeHandle:s("<div aria-hidden='true' class='k-resize-handle k-resize-#= data #'></div>")},pe.prototype={addOverlay:function(){this.owner.wrapper.append(f.overlay)},removeOverlay:function(){this.owner.wrapper.find(p).remove()},dragstart:function(e){var t=this;var i=t.owner;var n=i.wrapper;t._preventDragging=i.trigger(j);if(t._preventDragging)return;t.elementPadding=parseInt(n.css("padding-top"),10);t.initialPosition=x.getOffset(n,"position");t.resizeDirection=e.currentTarget.prop("className").replace("k-resize-handle k-resize-","");t.initialSize={width:n.outerWidth(),height:n.outerHeight()};i._updateBoundaries();t.containerOffset=i.containment?i.containment.position:x.getOffset(i.appendTo);var r=n.offsetParent();if(r.is("html"))t.containerOffset.top=t.containerOffset.left=0;else{var a=r.css("margin-top");var o=r.css("margin-left");var c=!se.test(a)||!se.test(o);if(c){var s=fe(n[0]);var l=s.left-t.containerOffset.left-t.initialPosition.left;var u=s.top-t.containerOffset.top-t.initialPosition.top;t._relativeElMarginLeft=l>1?l:0;t._relativeElMarginTop=u>1?u:0;t.initialPosition.left+=t._relativeElMarginLeft;t.initialPosition.top+=t._relativeElMarginTop}}n.children(d).not(e.currentTarget).hide();w(h).css(z,e.currentTarget.css(z))},drag:function(c){if(this._preventDragging)return;var e=this,t=e.owner,h=t.wrapper,i=t.options,n=i.position,f=e.resizeDirection,r=e.containerOffset,a=e.initialPosition,o=e.initialSize,d=t.containment&&!t._isPinned,p=x.support.isRtl(t.containment),v=d&&p&&t.containment.innerWidth()>t.containment.width?x.support.scrollbar():0,s=d?{top:t.containment.scrollTop(),left:t.containment.scrollLeft()}:{top:0,left:0},l,u,g,m,_=Math.max(c.x.location,0),y=Math.max(c.y.location,0);if(f.indexOf("e")>=0){if(t.containment&&_-o.width>=t.maxLeft-s.left+r.left+v)l=t.maxLeft+v-a.left+o.width-s.left;else l=_-a.left-r.left;h.outerWidth(k(l,i.minWidth,i.maxWidth))}else if(f.indexOf("w")>=0){m=a.left+o.width+r.left;l=k(m-_,i.minWidth,i.maxWidth);n.left=m-l-r.left-v-(e._relativeElMarginLeft||0)+s.left;if(t.containment&&n.left<=t.minLeft){n.left=t.minLeft;l=k(m-v-n.left-r.left+s.left,i.minWidth,i.maxWidth)}h.css({left:n.left,width:l})}var b=y;if(t.options.pinned)b-=w(window).scrollTop();if(f.indexOf("s")>=0){u=b-a.top-e.elementPadding-r.top;if(b-o.height-e.elementPadding>=t.maxTop+r.top-s.top)u=t.maxTop-a.top+o.height-s.top;h.outerHeight(k(u,i.minHeight,i.maxHeight))}else if(f.indexOf("n")>=0){g=a.top+o.height+r.top;u=k(g-b,i.minHeight,i.maxHeight);n.top=g-u-r.top-(e._relativeElMarginTop||0)+s.top;if(n.top<=t.minTop&&t.containment){n.top=t.minTop;u=k(g-n.top-r.top+s.top,i.minHeight,i.maxHeight)}h.css({top:n.top,height:u})}if(l)t.options.width=l+"px";if(u)t.options.height=u+"px";t.resize()},dragend:function(e){if(this._preventDragging)return;var t=this,i=t.owner,n=i.wrapper;n.children(d).not(e.currentTarget).show();w(h).css(z,"");if(i.touchScroller)i.touchScroller.reset();if(e.keyCode==27)n.css(t.initialPosition).css(t.initialSize);i.trigger(W);return false},destroy:function(){if(this._draggable)this._draggable.destroy();this._draggable=this.owner=null}},ve.prototype={dragstart:function(e){var t=this.owner,i=t.options.draggable,n=t.element,r=n.find(".k-window-actions"),a=x.getOffset(t.appendTo);this._preventDragging=t.trigger(q)||!i;if(this._preventDragging||t.isMaximized())return;t.initialWindowPosition=x.getOffset(t.wrapper,"position");t.initialPointerPosition={left:t.options.position.left,top:t.options.position.top};t.startPosition={left:e.x.client-t.initialWindowPosition.left,top:e.y.client-t.initialWindowPosition.top};t._updateBoundaries();if(!t.containment){if(r.length>0)t.minLeft=o(r)+parseInt(r.css("right"),10)-o(n);else t.minLeft=20-o(n);t.minLeft-=a.left;t.minTop=-a.top}w(f.overlay).appendTo(t.wrapper).css({opacity:0});t.wrapper.children(d).hide();w(h).css(z,e.currentTarget.css(z))},drag:function(e){var t=this.owner;var i=t.options.position;var n=t.options.draggable.axis;var r;var a;if(this._preventDragging||t.isMaximized())return;if(!n||n.toLowerCase()==="x"){r=e.x.client-t.startPosition.left;if(t.containment&&!t._isPinned)r+=t.containment.scrollLeft();i.left=k(r,t.minLeft,t.maxLeft)}if(!n||n.toLowerCase()==="y"){a=e.y.client-t.startPosition.top;if(t.containment&&!t._isPinned)a+=t.containment.scrollTop();i.top=k(a,t.minTop,t.maxTop)}if(x.support.transforms)w(t.wrapper).css("transform","translate("+(i.left-t.initialPointerPosition.left)+"px, "+(i.top-t.initialPointerPosition.top)+"px)");else w(t.wrapper).css(i)},_finishDrag:function(){var e=this.owner;e.wrapper.children(d).toggle(!e.options.isMinimized).end().find(p).remove();w(h).css(z,"")},dragcancel:function(e){if(this._preventDragging)return;this._finishDrag();e.currentTarget.closest(T).css(this.owner.initialWindowPosition)},dragend:function(){var e=this.owner;if(this._preventDragging||e.isMaximized())return;w(e.wrapper).css(e.options.position).css("transform","");this._finishDrag();e.trigger(Y);return false},destroy:function(){if(this._draggable)this._draggable.destroy();this._draggable=this.owner=null}},x.ui.plugin(de),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("dataviz/diagram/dom.min",["kendo.data.min","kendo.draganddrop.min","kendo.toolbar.min","kendo.editable.min","kendo.window.min","kendo.dropdownlist.min","kendo.dataviz.core.min","kendo.dataviz.themes.min","./svg.min","./services.min","./layout.min"],function(){var r=window.kendo.jQuery,d=void 0,p=kendo.dataviz,_=kendo.drawing,s=kendo.geometry,l=p.diagram,n=kendo.ui.Widget,e=kendo.Class,u=kendo.deepExtend,v=kendo._outerWidth,y=kendo._outerHeight,a=r.extend,b=kendo.data.HierarchicalDataSource,w=l.Canvas,x=l.Group,k=l.Rectangle,C=l.Circle,S=l.CompositeTransform,f=l.Rect,T=l.Path,A=l.DeleteShapeUnit,M=l.DeleteConnectionUnit,D=l.TextBlock,E=l.Image,g=l.Point,I=l.Intersect,P=l.ConnectionEditAdorner,t=l.UndoRedoService,B=l.ToolService,O=l.Selector,z=l.ResizingAdorner,L=l.ConnectorsAdorner,R=l.Cursors,c=l.Utils,F=kendo.Observable,V=l.ToBackUnit,N=l.ToFrontUnit,H=l.PolylineRouter,U=l.CascadingRouter,j=c.isUndefined,G=c.isDefined,o=_.util.defined,W=Array.isArray,q=kendo.isFunction,Y=c.isString,$=r.isPlainObject,m=Math,i=".kendoDiagram",X="cascading",K="itemBoundsChange",Q="change",Z="click",J="drag",ee="dragEnd",te="dragStart",ie="mouseEnter",ne="mouseLeave",re="error",ae="Auto",oe,se,le,ue,ce=9007199254740992,he="select",fe="itemRotate",de="pan",pe="zoomStart",ve="zoomEnd",ge="none",me=600,_e=600,ye="rectangle",be=100,we=100,xe=20,ke=20,Ce=0,Se="Yellow",Te=Number.MAX_VALUE,Ae=-Number.MAX_VALUE,Me="absolute",De="transformed",Ee="rotated",Ie="transparent",Pe="width",Be="height",Oe="x",ze="y",Le="DOMMouseScroll"+i+" mousewheel"+i,Re=.05,Fe=5,Ve='<a class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base #=className#" href="\\#">'+'<span class="k-button-icon #=iconClass# #=imageClass#"></span>'+'<span class="k-button-text">#=text#</span>'+"</a>",Ne=5,He=(l.DefaultConnectors=[{name:"Top"},{name:"Bottom"},{name:"Left"},{name:"Right"},{name:ae,position:function(e){return e.getPosition("center")}}],{cancel:{text:"Cancel",imageClass:"k-i-cancel",className:"k-diagram-cancel",iconClass:"k-icon"},update:{text:"Update",imageClass:"k-i-checkmark",className:"k-diagram-update",iconClass:"k-icon"}});function Ue(e){var t=e.originalEvent,i=0;if(t.wheelDelta){i=-t.wheelDelta/40;i=i>0?m.ceil(i):m.floor(i)}else if(t.detail)i=t.detail;return i}function je(e){return e.options.name.toLowerCase()===ae.toLowerCase()}function Ge(e,t){var i=ce,n,r;for(var a=0;a<t.length;a++){r=t[a];if(!je(r)){var o=e.distanceTo(r.position());if(o<i){i=o;n=r}}}return n}function We(e,t){var i,n=[],r;var a=e.drawingContainer().children;var o=a.length;for(i=0;i<t.length;i++){r=t[i];for(var s=0;s<o;s++)if(a[s]==r.drawingContainer()){n.push(s);break}}return n}l.shapeDefaults=function(e){var t={type:ye,path:"",autoSize:true,visual:null,x:Ce,y:Ce,minWidth:xe,minHeight:ke,width:be,height:we,hover:{},editable:{connect:true,tools:[]},connectors:l.DefaultConnectors,rotation:{angle:0}};c.simpleExtend(t,e);return t};var qe=F.extend({init:function(e){var t=this;t.dataItem=(e||{}).dataItem;F.fn.init.call(t);t.options=u({id:l.randomId()},t.options,e);t.isSelected=false;t.visual=new x({id:t.options.id,autoSize:t.options.autoSize});t.id=t.options.id;t._template()},options:{hover:{},cursor:R.grip,content:{align:"center middle"},selectable:true,serializable:true,enable:true},_getCursor:function(e){if(this.adorner)return this.adorner._getCursor(e);return this.options.cursor},visible:function(e){if(j(e))return this.visual.visible();else this.visual.visible(e)},bounds:function(){},refresh:function(){this.visual.redraw()},position:function(e){this.options.x=e.x;this.options.y=e.y;this.visual.position(e)},toString:function(){return this.options.id},serialize:function(){var e=u({},{options:this.options});if(this.dataItem)e.dataItem=this.dataItem.toString();return e},_content:function(e){if(e!==d){var t=this.options;if(l.Utils.isString(e))t.content.text=e;else u(t.content,e);var i=t.content;var n=this._contentVisual;if(!n)this._createContentVisual(i);else this._updateContentVisual(i)}return this.options.content.text},_createContentVisual:function(e){if(e.text){this._contentVisual=new D(e);this._contentVisual._includeInBBox=false;this.visual.append(this._contentVisual)}},_updateContentVisual:function(e){this._contentVisual.redraw(e)},_hitTest:function(e){var t=this.bounds();return this.visible()&&t.contains(e)&&this.options.enable},_template:function(){var e=this;if(e.options.content.template){var t=e.dataItem||{},i=kendo.template(e.options.content.template,{paramName:"dataItem"});e.options.content.text=i(t)}},_canSelect:function(){return this.options.selectable!==false},toJSON:function(){return{id:this.options.id}}}),Ye=e.extend({init:function(e,t){this.options=u({},this.options,t);this.connections=[];this.shape=e},options:{width:7,height:7,fill:{color:Se},hover:{}},position:function(){if(this.options.position)return this.options.position(this.shape);else return this.shape.getPosition(this.options.name)},toJSON:function(){return{shapeId:this.shape.toString(),connector:this.options.name}}}),h=(Ye.parse=function(e,t){var i=t.split(":"),n=i[0],r=i[1]||ae;for(var a=0;a<e.shapes.length;a++){var o=e.shapes[a];if(o.options.id==n)return o.getConnector(r.trim())}},qe.extend({init:function(e,t){var i=this;qe.fn.init.call(i,e);this.diagram=t;this.updateOptionsFromModel();e=i.options;i.connectors=[];i.type=e.type;i.createShapeVisual();i.updateBounds();i.content(i.content());i._createConnectors()},options:l.shapeDefaults(),_setOptionsFromModel:function(e){var t=Ke(e||this.dataItem);this.options=u({},this.options,t);this.redrawVisual()},updateOptionsFromModel:function(e,t){if(this.diagram&&this.diagram._isEditable){var i=Ke(e||this.dataItem);if(e&&t)if(!p.inArray(t,["x","y","width","height"])){if(this.options.visual)this._redrawVisual();else if(i.type){this.options=u({},this.options,i);this._redrawVisual()}if(this.options.content){this._template();this.content(this.options.content)}}else{var n=this.bounds();n[t]=e[t];this.bounds(n)}else this.options=u({},this.options,i)}},_redrawVisual:function(){this.visual.clear();this._contentVisual=null;this.options.dataItem=this.dataItem;this.createShapeVisual();this.updateBounds()},redrawVisual:function(){this._redrawVisual();if(this.options.content){this._template();this.content(this.options.content)}},updateModel:function(e){var t=this.diagram;if(t&&t._isEditable){var i=this._bounds;var n=this.dataItem;if(n){t._suspendModelRefresh();if(o(n.x)&&i.x!==n.x)n.set("x",i.x);if(o(n.y)&&i.y!==n.y)n.set("y",i.y);if(o(n.width)&&i.width!==n.width)n.set("width",i.width);if(o(n.height)&&i.height!==n.height)n.set("height",i.height);this.dataItem=n;t._resumeModelRefresh();if(e)t._syncShapeChanges()}}},updateBounds:function(){var e=this.visual._measure(true);var t=this.options;this.bounds(new f(t.x,t.y,e.width,e.height));this._rotate();this._alignContent()},content:function(e){var t=this._content(e);this._alignContent();return t},_alignContent:function(){var e=this.options.content||{};var t=this._contentVisual;if(t&&e.align){var i=this.visual._measure();var n=new l.RectAlign(i);var r=t.drawingElement.bbox(null);var a=new f(0,0,r.width(),r.height());var o=n.align(a,e.align);t.position(o.topLeft())}},_createConnectors:function(){var e=this.options,t=e.connectors.length,i=e.connectorDefaults,n,r;for(r=0;r<t;r++){n=new Ye(this,u({},i,e.connectors[r]));this.connectors.push(n)}},bounds:function(e){var t;if(e)if(Y(e))switch(e){case De:t=this._transformedBounds();break;case Me:t=this._transformedBounds();var i=this.diagram._pan;t.x+=i.x;t.y+=i.y;break;case Ee:t=this._rotatedBounds();break;default:t=this._bounds}else{this._setBounds(e);this._triggerBoundsChange();if(!(this.diagram&&this.diagram._layouting))this.refreshConnections()}else t=this._bounds;return t},_setBounds:function(e){var t=this.options;var i=e.topLeft();var n=t.x=i.x;var r=t.y=i.y;var a=t.width=m.max(e.width,t.minWidth);var o=t.height=m.max(e.height,t.minHeight);this._bounds=new f(n,r,a,o);this.visual.redraw({x:n,y:r,width:a,height:o})},position:function(e){if(e)this.bounds(new f(e.x,e.y,this._bounds.width,this._bounds.height));else return this._bounds.topLeft()},clone:function(){var e=this.serialize();e.options.id=l.randomId();if(this.diagram&&this.diagram._isEditable&&o(this.dataItem))e.options.dataItem=st(this.dataItem);return new h(e.options)},select:function(e){var t=this.diagram,i,n;if(j(e))e=true;if(this._canSelect())if(this.isSelected!=e){i=[];n=[];this.isSelected=e;if(this.isSelected){t._selectedItems.push(this);i.push(this)}else{c.remove(t._selectedItems,this);n.push(this)}if(!t._internalSelection)t._selectionChanged(i,n);return true}},rotate:function(e,t,i){var n=this.visual.rotate();if(e!==d){if(i!==false&&this.diagram&&this.diagram.undoRedoService&&e!==n.angle)this.diagram.undoRedoService.add(new l.RotateUnit(this.diagram._resizingAdorner,[this],[n.angle]),false);var r=this.bounds(),a=new g(r.width/2,r.height/2),o,s;if(t){o=e-n.angle;s=r.center().rotate(t,360-o).minus(a);this._rotationOffset=this._rotationOffset.plus(s.minus(r.topLeft()));this.position(s)}this.visual.rotate(e,a);this.options.rotation.angle=e;if(this.diagram&&this.diagram._connectorsAdorner)this.diagram._connectorsAdorner.refresh();this.refreshConnections();if(this.diagram)this.diagram.trigger(fe,{item:this})}return n},connections:function(e){var t=[],i,n,r,a,o;for(i=0;i<this.connectors.length;i++){o=this.connectors[i];a=o.connections;for(n=0,a;n<a.length;n++){r=a[n];if(e=="out"){var s=r.source();if(s.shape&&s.shape==this)t.push(r)}else if(e=="in"){var l=r.target();if(l.shape&&l.shape==this)t.push(r)}else t.push(r)}}return t},refreshConnections:function(){r.each(this.connections(),function(){this.refresh()})},getConnector:function(e){var t,i;if(Y(e)){e=e.toLocaleLowerCase();for(t=0;t<this.connectors.length;t++){i=this.connectors[t];if(i.options.name.toLocaleLowerCase()==e)return i}}else if(e instanceof g)return Ge(e,this.connectors);else return this.connectors.length?this.connectors[0]:null},getPosition:function(e){var t=this.bounds(),i=e.charAt(0).toLowerCase()+e.slice(1);if(q(t[i]))return this._transformPoint(t[i]());return t.center()},redraw:function(e){if(e){var t=this.options;var i;this.shapeVisual.redraw(this._visualOptions(e));if(this._diffNumericOptions(e,[Pe,Be,Oe,ze])){this.bounds(new f(t.x,t.y,t.width,t.height));i=true}if(e.connectors){t.connectors=e.connectors;this._updateConnectors()}t=u(t,e);if(e.rotation||i)this._rotate();if(t.content)this.content(t.content)}},_updateConnectors:function(){var e=this.connections();this.connectors=[];this._createConnectors();var t;var i;var n;for(var r=0;r<e.length;r++){t=e[r];i=t.source();n=t.target();if(i.shape&&i.shape===this)t.source(this.getConnector(i.options.name)||null);else if(n.shape&&n.shape===this)t.target(this.getConnector(n.options.name)||null);t.updateModel()}},_diffNumericOptions:l.diffNumericOptions,_visualOptions:function(e){return{data:e.path,source:e.source,hover:e.hover,fill:e.fill,stroke:e.stroke}},_triggerBoundsChange:function(){if(this.diagram)this.diagram.trigger(K,{item:this,bounds:this._bounds.clone()})},_transformPoint:function(e){var t=this.rotate(),i=this.bounds(),n=i.topLeft();if(t.angle)e.rotate(t.center().plus(n),360-t.angle);return e},_transformedBounds:function(){var e=this.bounds(),t=e.topLeft(),i=e.bottomRight();return f.fromPoints(this.diagram.modelToView(t),this.diagram.modelToView(i))},_rotatedBounds:function(){var e=this.bounds().rotatedBounds(this.rotate().angle),t=e.topLeft(),i=e.bottomRight();return f.fromPoints(t,i)},_rotate:function(){var e=this.options.rotation;if(e&&e.angle)this.rotate(e.angle);this._rotationOffset=new g},_hover:function(e){var t=this.options,i=t.hover,n=t.stroke,r=t.fill;if(e&&G(i.stroke))n=u({},n,i.stroke);if(e&&G(i.fill))r=i.fill;this.shapeVisual.redraw({stroke:n,fill:r});if(t.editable&&t.editable.connect)this.diagram._showConnectors(this,e)},_hitTest:function(e){if(this.visible()){var t=this.bounds(),i,n=this.rotate().angle;if(e.isEmpty&&!e.isEmpty())return I.rects(e,t,n?n:0);else{i=e.clone().rotate(t.center(),n);if(t.contains(i))return this}}},toJSON:function(){return{shapeId:this.options.id}},createShapeVisual:function(){var e=this.options;var t=this._visualOptions(e);var i=e.visual;var n=(e.type+"").toLocaleLowerCase();var r;t.width=e.width;t.height=e.height;if(q(i))r=i.call(this,e);else if(t.data){r=new T(t);ft(r)}else if(n=="rectangle")r=new k(t);else if(n=="circle")r=new C(t);else if(n=="text")r=new D(t);else if(n=="image")r=new E(t);else r=new T(t);this.shapeVisual=r;this.visual.append(this.shapeVisual)}})),$e=qe.extend({init:function(e,t,i){var n=this;qe.fn.init.call(n,i);this.updateOptionsFromModel();this._initRouter();n.path=new l.Polyline(n.options);n.path.fill(Ie);n.visual.append(n.path);n._sourcePoint=n._targetPoint=new g;n._setSource(e);n._setTarget(t);n.content(n.options.content);n.definers=[];if(o(i)&&i.points)n.points(i.points)},options:{hover:{stroke:{}},startCap:ge,endCap:ge,points:[],selectable:true,fromConnector:ae,toConnector:ae},_setOptionsFromModel:function(e){this.updateOptionsFromModel(e||this.dataItem)},updateOptionsFromModel:function(e){if(this.diagram&&this.diagram._isEditable){var t=this.diagram._dataMap;var i=Qe(e||this.dataItem);if(e){if(o(i.from)){var n=t[i.from];if(n&&o(i.fromConnector))n=n.getConnector(i.fromConnector);this.source(n)}else if(o(i.fromX)&&o(i.fromY))this.source(new g(i.fromX,i.fromY));if(o(i.to)){var r=t[i.to];if(r&&o(i.toConnector))r=r.getConnector(i.toConnector);this.target(r)}else if(o(i.toX)&&o(i.toY))this.target(new g(i.toX,i.toY));if(o(i.type)&&this.type()!==i.type){this.points([]);this.type(i.type)}this.dataItem=e;this._template();this.redraw(this.options)}else this.options=u({},i,this.options)}},updateModel:function(e){if(this.diagram&&this.diagram._isEditable)if(this.diagram.connectionsDataSource){var t=this.diagram.connectionsDataSource.getByUid(this.dataItem.uid);if(t){this.diagram._suspendModelRefresh();if(o(this.options.fromX)&&this.options.fromX!==null){ct("from",t);ct("fromConnector",t);t.set("fromX",this.options.fromX);t.set("fromY",this.options.fromY)}else{t.set("from",this.options.from);if(o(t.fromConnector))t.set("fromConnector",this.sourceConnector?this.sourceConnector.options.name:null);ct("fromX",t);ct("fromY",t)}if(o(this.options.toX)&&this.options.toX!==null){ct("to",t);ct("toConnector",t);t.set("toX",this.options.toX);t.set("toY",this.options.toY)}else{t.set("to",this.options.to);if(o(t.toConnector))t.set("toConnector",this.targetConnector?this.targetConnector.options.name:null);ct("toX",t);ct("toY",t)}if(o(this.options.type)&&o(t.type))t.set("type",this.options.type);this.dataItem=t;this.diagram._resumeModelRefresh();if(e)this.diagram._syncConnectionChanges()}}},sourcePoint:function(){return this._resolvedSourceConnector?this._resolvedSourceConnector.position():this._sourcePoint},_setSource:function(e){var t=e instanceof h;var i=this.options.fromConnector||ae;var n;if(t&&!e.getConnector(i))return;if(e!==d)this.from=e;this._removeFromSourceConnector();if(e===null){if(this.sourceConnector){this._sourcePoint=(this._resolvedSourceConnector||this.sourceConnector).position();this._clearSourceConnector();this._setFromOptions(null,this._sourcePoint)}}else if(e instanceof Ye){n=e.shape.dataItem;if(n)this._setFromOptions(n.id);this.sourceConnector=e;this.sourceConnector.connections.push(this)}else if(e instanceof g){this._setFromOptions(null,e);this._sourcePoint=e;if(this.sourceConnector)this._clearSourceConnector()}else if(t){n=e.dataItem;if(n)this._setFromOptions(n.id);this.sourceConnector=e.getConnector(i);this.sourceConnector.connections.push(this)}},source:function(e,t){if(G(e)){if(t&&this.diagram)this.diagram.undoRedoService.addCompositeItem(new l.ConnectionEditUnit(this,e));this._setSource(e);this.refresh()}return this.sourceConnector?this.sourceConnector:this._sourcePoint},_setFromOptions:function(e,t){this.options.from=e;if(t){this.options.fromX=t.x;this.options.fromY=t.y}else{this.options.fromX=null;this.options.fromY=null}},sourceDefiner:function(e){if(e)if(e instanceof l.PathDefiner){e.left=null;this._sourceDefiner=e;this.source(e.point)}else throw"The sourceDefiner needs to be a PathDefiner.";else{if(!this._sourceDefiner)this._sourceDefiner=new l.PathDefiner(this.sourcePoint(),null,null);return this._sourceDefiner}},targetPoint:function(){return this._resolvedTargetConnector?this._resolvedTargetConnector.position():this._targetPoint},_setTarget:function(e){var t=e instanceof h;var i=this.options.toConnector||ae;var n;if(t&&!e.getConnector(i))return;if(e!==d)this.to=e;this._removeFromTargetConnector();if(e===null){if(this.targetConnector){this._targetPoint=(this._resolvedTargetConnector||this.targetConnector).position();this._clearTargetConnector();this._setToOptions(null,this._targetPoint)}}else if(e instanceof Ye){n=e.shape.dataItem;if(n)this._setToOptions(n.id);this.targetConnector=e;this.targetConnector.connections.push(this)}else if(e instanceof g){this._setToOptions(null,e);this._targetPoint=e;if(this.targetConnector)this._clearTargetConnector()}else if(t){n=e.dataItem;if(n)this._setToOptions(n.id);this.targetConnector=e.getConnector(i);this.targetConnector.connections.push(this)}},target:function(e,t){if(G(e)){if(t&&this.diagram)this.diagram.undoRedoService.addCompositeItem(new l.ConnectionEditUnit(this,d,e));this._setTarget(e);this.refresh()}return this.targetConnector?this.targetConnector:this._targetPoint},_setToOptions:function(e,t){this.options.to=e;if(t){this.options.toX=t.x;this.options.toY=t.y}else{this.options.toX=null;this.options.toY=null}},targetDefiner:function(e){if(e)if(e instanceof l.PathDefiner){e.right=null;this._targetDefiner=e;this.target(e.point)}else throw"The sourceDefiner needs to be a PathDefiner.";else{if(!this._targetDefiner)this._targetDefiner=new l.PathDefiner(this.targetPoint(),null,null);return this._targetDefiner}},_updateConnectors:function(){this._updateConnector(this.source(),"source");this._updateConnector(this.target(),"target")},_updateConnector:function(t,i){var n=this;var r=n.diagram;if(t instanceof Ye&&!r.getShapeById(t.shape.id)){var a=t.shape.dataItem;var o=t.options.name;var e=function(){var e=r._dataMap[a.id];t=e.getConnector(o);n[i](t,false);n.updateModel()};if(r._dataMap[a.id])e();else{var s=r._inactiveShapeItems.getByUid(a.uid);if(s)r._deferredConnectionUpdates.push(s.onActivate(e))}}else n[i](t,false)},content:function(e){var t=this._content(e);if(o(e))this._alignContent();return t},_createContentVisual:function(e){var t;if(q(e.visual))t=e.visual.call(this,e);else if(e.text)t=new D(e);if(t){this._contentVisual=t;t._includeInBBox=false;this.visual.append(t)}return t},_updateContentVisual:function(e){if(q(e.visual)){this.visual.remove(this._contentVisual);this._createContentVisual(e)}else this._contentVisual.redraw(e)},_alignContent:function(){if(this._contentVisual){var e=Ne;var t=this.allPoints();var i=m.floor(t.length/2);var n=i-1;while(n>0&&t[n].equals(t[i])){n--;i++}var r=t[i];var a=t[n];var o=this._contentVisual._measure();var c=o.width;var s=o.height;var h=t.length%2===0;var f=a.distanceTo(r);if(h&&t.length>2&&f>0&&(a.y===r.y&&f<c||a.x===r.x&&f<s)){h=false;e=0}var l;if(h){var u=_.util.deg(m.atan2(r.y-a.y,r.x-a.x));l=new g((r.x-a.x)/2+a.x,(r.y-a.y)/2+a.y);if(m.abs(u)===90){l.x+=e;l.y-=s/2}else if(u%180===0){l.x-=c/2;l.y-=s+e}else if(u<-90||0<u&&u<90)l.y-=s;else if(u<0||u>90){l.x-=c;l.y-=s}}else{var d=m.floor(t.length/2);l=t[d].clone();a=t[d-1];r=t[d+1];var p=a.x<=l.x&&r.x<=l.x?e:-o.width-e;var v=a.y<=l.y&&r.y<=l.y?e:-o.height-e;l.x+=p;l.y+=v}this._contentVisual.position(l)}},select:function(e){var t=this.diagram,i,n;if(this._canSelect())if(this.isSelected!==e){this.isSelected=e;i=[];n=[];if(this.isSelected){this.adorner=new P(this,this.options.selection);t._adorn(this.adorner,true);t._selectedItems.push(this);i.push(this)}else if(this.adorner){t._adorn(this.adorner,false);c.remove(t._selectedItems,this);this.adorner=d;n.push(this)}if(this.adorner)this.adorner.refresh();if(!t._internalSelection)t._selectionChanged(i,n);return true}},bounds:function(e){if(e&&!Y(e))this._bounds=e;else return this._bounds},type:function(e){var t=this.options;if(e){if(e!==t.type){t.type=e;this._initRouter();this.refresh()}}else return t.type},_initRouter:function(){var e=(this.options.type||"").toLowerCase();if(e==X)this._router=new U(this);else this._router=new H(this)},points:function(e){if(e){this.definers=[];for(var t=0;t<e.length;t++){var i=e[t];if(i instanceof l.Point)this.definers.push(new l.PathDefiner(i));else if(i.hasOwnProperty("x")&&i.hasOwnProperty("y"))this.definers.push(new l.PathDefiner(new g(i.x,i.y)));else throw"A Connection point needs to be a Point or an object with x and y properties."}}else{var n=[];if(G(this.definers))for(var r=0;r<this.definers.length;r++)n.push(this.definers[r].point);return n}},allPoints:function(){var e=[this.sourcePoint()];if(this.definers)for(var t=0;t<this.definers.length;t++)e.push(this.definers[t].point);e.push(this.targetPoint());return e},refresh:function(){this._resolveConnectors();this._refreshPath();this._alignContent();if(this.adorner)this.adorner.refresh()},_resolveConnectors:function(){var e=this,t,i,n,r,a=e.source(),o=e.target();if(a instanceof g)t=a;else if(a instanceof Ye)if(je(a))n=a.shape.connectors;else n=[a];if(o instanceof g)i=o;else if(o instanceof Ye)if(je(o))r=o.shape.connectors;else r=[o];if(t){if(r)e._resolvedTargetConnector=Ge(t,r)}else if(n)if(i)e._resolvedSourceConnector=Ge(i,n);else if(r)this._resolveAutoConnectors(n,r)},_resolveAutoConnectors:function(c,h){var f=ce;var d=ce;var e,p;var t,i;var n,r;var a,o;var s,l;var u;for(s=0;s<c.length;s++){a=c[s];if(!je(a)){t=a.position();for(l=0;l<h.length;l++){o=h[l];if(!je(o)){i=o.position();u=m.round(t.distanceTo(i));if(u<f&&this.diagram&&this._testRoutePoints(t,i,a,o)){f=u;e=a;p=o}if(u<d){n=a;r=o;d=u}}}}}if(e){n=e;r=p}this._resolvedSourceConnector=n;this._resolvedTargetConnector=r},_testRoutePoints:function(e,t,i,n){var r=this._router;var c=true;if(r instanceof U){var a=r.routePoints(e,t,i,n),o,s,l,h;h=this._getRouteExclude(e,t,i.shape,n.shape);a.unshift(e);a.push(t);for(var u=1;u<a.length;u++){o=a[u-1];s=a[u];l=new f(m.min(o.x,s.x),m.min(o.y,s.y),m.abs(o.x-s.x),m.abs(o.y-s.y));if(l.width>0){l.x++;l.width-=2}if(l.height>0){l.y++;l.height-=2}if(!l.isEmpty()&&this.diagram._shapesQuadTree.hitTestRect(l,h)){c=false;break}}}return c},_getRouteExclude:function(e,t,i,n){var r=[];if(this._isPointInsideShape(e,i))r.push(i);if(this._isPointInsideShape(t,n))r.push(n);return r},_isPointInsideShape:function(e,t){var i=t.bounds(),n,r=t.rotate().angle,a,o,s=i.x,l=i.y;n=e.clone().rotate(i.center(),r);a=n.x;o=n.y;return a>s&&a<s+i.width&&o>l&&o<l+i.height},redraw:function(e){if(e){this.options=u({},this.options,e);var t=this.options.points;if(o(t)&&t.length>0){this.points(t);this._refreshPath()}if(e&&e.content||e.text)this.content(e.content);this.path.redraw({fill:e.fill,stroke:e.stroke,startCap:e.startCap,endCap:e.endCap})}},clone:function(){var e=this.serialize();if(this.diagram&&this.diagram._isEditable&&o(this.dataItem))e.options.dataItem=st(this.dataItem);return new $e(this.from,this.to,e.options)},serialize:function(){var e=this.from.toJSON?this.from.toJSON:this.from.toString(),t=this.to.toJSON?this.to.toJSON:this.to.toString();var i=u({},{options:this.options,from:e,to:t});if(o(this.dataItem))i.dataItem=this.dataItem.toString();i.options.points=this.points();return i},_hitTest:function(e){if(this.visible()){var t=new g(e.x,e.y),i=this.sourcePoint(),n=this.targetPoint();if(e.isEmpty&&!e.isEmpty()&&e.contains(i)&&e.contains(n))return this;if(this._router.hitTest(t))return this}},_hover:function(e){var t=(this.options.stroke||{}).color;if(e&&G(this.options.hover.stroke.color))t=this.options.hover.stroke.color;this.path.redraw({stroke:{color:t}})},_refreshPath:function(){if(!o(this.path))return;this._drawPath();this.bounds(this._router.getBounds())},_drawPath:function(){if(this._router)this._router.route();var e=this.sourcePoint();var t=this.targetPoint();var i=this.points();this.path.redraw({points:[e].concat(i,[t])})},_clearSourceConnector:function(){this.sourceConnector=d;this._resolvedSourceConnector=d},_clearTargetConnector:function(){this.targetConnector=d;this._resolvedTargetConnector=d},_removeFromSourceConnector:function(){if(this.sourceConnector)c.remove(this.sourceConnector.connections,this)},_removeFromTargetConnector:function(){if(this.targetConnector)c.remove(this.targetConnector.connections,this)},toJSON:function(){var e=this;var t,i,n;if(e.from&&e.from.toJSON)t=e.from.toJSON();else{n=e._sourcePoint;t={x:n.x,y:n.y}}if(e.to&&e.to.toJSON)i=e.to.toJSON();else{n=e._targetPoint;i={x:n.x,y:n.y}}return{from:t,to:i}}}),Xe=n.extend({init:function(e,t){var i=this;kendo.destroy(e);n.fn.init.call(i,e,t);i._initTheme();i._initElements();i._extendLayoutOptions(i.options);i._initDefaults(t);i._interactionDefaults();i._initCanvas();i.mainLayer=new x({id:"main-layer"});i.canvas.append(i.mainLayer);i._shapesQuadTree=new ot(i);i._pan=new g;i._adorners=[];i.adornerLayer=new x({id:"adorner-layer"});i.canvas.append(i.adornerLayer);i._createHandlers();i._initialize();i._resizingAdorner=new z(i,{editable:i.options.editable});i._connectorsAdorner=new L(i);i._adorn(i._resizingAdorner,true);i._adorn(i._connectorsAdorner,true);i.selector=new O(i);i._clipboard=[];i.pauseMouseHandlers=false;i._fetchFreshData();i._createGlobalToolBar();i._createOptionElements();i.zoom(i.options.zoom);i.canvas.draw()},options:{name:"Diagram",theme:"default",layout:"",zoomRate:.1,zoom:1,zoomMin:0,zoomMax:2,dataSource:{},draggable:true,template:"",autoBind:true,editable:{rotate:{},resize:{},text:true,tools:[],drag:{snap:{size:10,angle:10}},remove:true},pannable:{},selectable:{key:"none"},tooltip:{enabled:true,format:"{0}"},copy:{enabled:true,offsetX:20,offsetY:20},shapeDefaults:l.shapeDefaults({undoable:true}),connectionDefaults:{editable:{tools:[]},type:X},shapes:[],connections:[]},events:[ve,pe,de,he,fe,K,Q,Z,ie,ne,"toolBarClick","save","cancel","edit","remove","add","dataBound",te,J,ee],items:function(){return r()},_createGlobalToolBar:function(){var e=this.options.editable;if(e){var t=e.tools;if(this._isEditable&&t!==false&&(!t||t.length===0))t=["createShape","undo","redo","rotateClockwise","rotateAnticlockwise"];if(t&&t.length){this.toolBar=new Ze(this,{tools:t||{},click:this._toolBarClick.bind(this),modal:false});this.toolBar.element.css({textAlign:"left"});this.element.prepend(this.toolBar.element);this._resize()}}},createShape:function(){if(this.editor&&this.editor.end()||!this.editor){var e=this.dataSource;var t=e.view()||[];var i=t.length;var n=ut(e,{});var r=this._createShape(n,{});if(!this.trigger("add",{shape:r})){e.insert(i,n);var a=this._inactiveShapeItems.getByUid(n.uid);a.element=r;this.edit(r)}}},_createShape:function(e,t){t=u({},this.options.shapeDefaults,t);t.dataItem=e;var i=new h(t,this);return i},createConnection:function(){if(this.editor&&this.editor.end()||!this.editor){var e=this.connectionsDataSource;var t=e.view()||[];var i=t.length;var n=ut(e,{});var r=this._createConnection(n);if(!this.trigger("add",{connection:r})){this._connectionsDataMap[n.uid]=r;e.insert(i,n);this.addConnection(r,false);this.edit(r)}}},_createConnection:function(e,t,i){var n=u({},this.options.connectionDefaults);n.dataItem=e;var r=new $e(t||new g,i||new g,n);return r},editModel:function(e,t){this.cancelEdit();var i,n;var r=this.options.editable;if(t=="shape"){i=r.shapeEditors;n=r.shapeTemplate}else if(t=="connection"){var a=tt.bind(this);i=u({},{from:a,to:a},r.connectionEditors);n=r.connectionTemplate}else return;this.editor=new et(this.element,{update:this._update.bind(this),cancel:this._cancel.bind(this),model:e,type:t,target:this,editors:i,template:n});this.trigger("edit",this._editArgs())},edit:function(e){if(e.dataItem){var t=e instanceof h?"shape":"connection";this.editModel(e.dataItem,t)}},cancelEdit:function(){if(this.editor){this._getEditDataSource().cancelChanges(this.editor.model);this._destroyEditor()}},saveEdit:function(){if(this.editor&&this.editor.end()&&!this.trigger("save",this._editArgs()))this._getEditDataSource().sync()},_update:function(){if(this.editor&&this.editor.end()&&!this.trigger("save",this._editArgs())){this._getEditDataSource().sync();this._destroyEditor()}},_cancel:function(){if(this.editor&&!this.trigger("cancel",this._editArgs())){var e=this.editor.model;this._getEditDataSource().cancelChanges(e);var t=this._connectionsDataMap[e.uid]||this._dataMap[e.id];if(t)t._setOptionsFromModel(e);this._destroyEditor()}},_getEditDataSource:function(){return this.editor.options.type==="shape"?this.dataSource:this.connectionsDataSource},_editArgs:function(){var e={container:this.editor.wrapper};e[this.editor.options.type]=this.editor.model;return e},_destroyEditor:function(){if(this.editor){this.editor.close();this.editor=null}},_initElements:function(){this.wrapper=this.element.empty().css("position","relative").attr("tabindex",0).addClass("k-widget k-diagram");this.scrollable=r("<div />").appendTo(this.element)},_initDefaults:function(e){var t=this.options;var i=t.editable;var n=t.shapeDefaults;var r=t.connectionDefaults;var a=(e||{}).shapeDefaults;if(i===false){n.editable=false;r.editable=false}else{ht(i,n.editable,["drag","remove","connect"]);ht(i,r.editable,["drag","remove"])}if(a&&a.connectors)t.shapeDefaults.connectors=a.connectors},_interactionDefaults:function(){var e=this.options;var t=e.selectable;var i=e.pannable;var n=kendo.support.mobileOS;if(t&&!o(t.multiple))e.selectable=u({multiple:n?false:true},e.selectable);if(i&&!o(i.key))e.pannable=u({key:n?"none":"ctrl"},e.pannable)},_initCanvas:function(){var e=r("<div class='k-layer'></div>").appendTo(this.scrollable)[0];var t=this.viewport();this.canvas=new w(e,{width:t.width||me,height:t.height||_e})},_createHandlers:function(){var e=this;var t=e.element;t.on(Le,e._wheel.bind(e)).on("keydown"+i,e._keydown.bind(e));e._userEvents=new kendo.UserEvents(this.scrollable,{multiTouch:true,fastTap:true,tap:e._tap.bind(e),start:e._dragStart.bind(e),move:e._drag.bind(e),end:e._dragEnd.bind(e),gesturestart:e._gestureStart.bind(e),gesturechange:e._gestureChange.bind(e),gestureend:e._gestureEnd.bind(e),doubleTap:e._doubleTap.bind(e),supportDoubleTap:true});e.toolService=new B(e);this.scrollable.on("mouseover"+i,e._mouseover.bind(e)).on("mouseout"+i,e._mouseout.bind(e)).on("mousemove"+i,e._mouseMove.bind(e)).on("mousedown"+i,e._mouseDown.bind(e)).on("mouseup"+i,e._mouseUp.bind(e));this._syncHandler=e._syncChanges.bind(e);e._resizeHandler=e.resize.bind(e,false);kendo.onResize(e._resizeHandler);this.bind(pe,e._destroyToolBar.bind(e));this.bind(de,e._destroyToolBar.bind(e))},_dragStart:function(e){this._pauseMouseHandlers=true;var t=this._eventPositions(e,true);var i=e.event;if(this.toolService.start(t,this._meta(i))){this._destroyToolBar();i.preventDefault()}},_drag:function(e){var t=this._eventPositions(e);var i=e.event;if(this.toolService.move(t,this._meta(i)))i.preventDefault()},_dragEnd:function(e){this._pauseMouseHandlers=false;var t=this._eventPositions(e);var i=e.event;if(this.toolService.end(t,this._meta(i))){this._createToolBar();i.preventDefault()}},_mouseMove:function(e){if(!this._pauseMouseHandlers){var t=this._eventPositions(e);this.toolService._updateHoveredItem(t);this.toolService._updateCursor(t)}},_mouseDown:function(){this._pauseMouseHandlers=true},_mouseUp:function(){this._pauseMouseHandlers=false},_tap:function(e){var t=this.toolService;var i=this.options.selectable;var n=this._eventPositions(e);var r=this.focus();t._updateHoveredItem(n);if(t.hoveredItem){var a=t.hoveredItem;this.trigger("click",{item:a,point:n,meta:this._meta(e.event)});if(i&&a.options.selectable!==false){var o=i.multiple!==false;var s=kendo.support.mobileOS||this._meta(e.event).ctrlKey;if(a.isSelected)if(s){this._destroyToolBar();a.select(false)}else this._createToolBar(r);else{this._destroyToolBar();this.select(a,{addToSelection:o&&s});this._createToolBar(r)}}}else if(i){this._destroyToolBar();this.deselect()}},_keydown:function(e){if(this.toolService.keyDown(e.keyCode,this._meta(e)))e.preventDefault()},_wheel:function(e){var t=Ue(e),i=this._eventPositions(e),n=u(this._meta(e),{delta:t});if(this.toolService.wheel(i,n))e.preventDefault()},_meta:function(e){return{ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey,type:e.type}},_eventPositions:function(e,t){var i;if(e.touch){var n=t?"startLocation":"location";i=new g(e.x[n],e.y[n])}else{var r=e.originalEvent;i=new g(r.pageX,r.pageY)}return this.documentToModel(i)},_gestureStart:function(e){this._destroyToolBar();this.scroller.disable();var t=this.documentToModel(new g(e.center.x,e.center.y));var i={point:t,zoom:this.zoom()};if(this.trigger(pe,i))return;this._gesture=e;this._initialCenter=t},_gestureChange:function(e){var t=this._gesture;var i=this._initialCenter;var n=this.documentToView(new g(e.center.x,e.center.y));var r=e.distance/t.distance;var a=this._zoom;var o=false;if(m.abs(r-1)>=Re){this._zoom=a=this._getValidZoom(a*r);this.options.zoom=a;this._gesture=e;o=true}var s=i.times(a);var l=n.minus(s);if(o||this._pan.distanceTo(l)>=Fe){this._panTransform(l);this._updateAdorners()}e.preventDefault()},_doubleTap:function(e){var t=this;var i=this._eventPositions(e);var n=t.options;var r=n.zoomRate;var a=t.zoom()+r;var o=this._meta(e);var s={point:i,meta:o,zoom:a};if(t.trigger(pe,s))return;a=kendo.dataviz.round(Math.max(n.zoomMin,Math.min(n.zoomMax,a)),2);s.zoom=a;t.zoom(a,s);t.trigger(ve,s)},_gestureEnd:function(){if(this.options.pannable!==false)this.scroller.enable();this.trigger(ve,{point:this._initialCenter,zoom:this.zoom()})},_resize:function(){var e=this.viewport();if(this.canvas)this.canvas.size(e);if(this.scrollable&&this.toolBar)this.scrollable.height(e.height)},_mouseover:function(e){var t=e.target._kendoNode;if(t&&t.srcElement._hover)t.srcElement._hover(true,t.srcElement)},_mouseout:function(e){var t=e.target._kendoNode;if(t&&t.srcElement._hover)t.srcElement._hover(false,t.srcElement)},_initTheme:function(){var e=this;var t=((e.options||{}).theme||"").toLowerCase();var i=p.ui.themes||{};var n;if(p.SASS_THEMES.indexOf(t)!=-1)n=p.autoTheme().diagram;else n=(i[t]||{}).diagram;e.options=u({},n,e.options);if(e.options.editable===true)u(e.options,{editable:(n||{}).editable})},_createOptionElements:function(){var e=this.options;var t=e.shapes.length;if(t)this._createShapes();if(e.connections.length)this._createConnections();if(t&&e.layout)this.layout(e.layout)},_createShapes:function(){var e=this,t=e.options,i=t.shapes,n,r;for(r=0;r<i.length;r++){n=i[r];e.addShape(n)}},_createConnections:function(){var e=this,t=e.options,i=t.connectionDefaults,n=t.connections,r,a,o,s;for(s=0;s<n.length;s++){r=n[s];a=e._findConnectionTarget(r.from);o=e._findConnectionTarget(r.to);e.connect(a,o,u({},i,r))}},_findConnectionTarget:function(e){e=e||{};var t=this;var i=Y(e)?e:e.shapeId||e.id;var n;if(i){n=t.getShapeById(i);if(e.connector)n=n.getConnector(e.connector)}else n=new g(e.x||0,e.y||0);return n},destroy:function(){var e=this;n.fn.destroy.call(e);if(this._userEvents)this._userEvents.destroy();kendo.unbindResize(e._resizeHandler);e.clear();e.element.off(i);e.scroller.wrapper.off(i);e.canvas.destroy(true);e.canvas=d;e._destroyEditor();e.destroyScroller();e._destroyGlobalToolBar();e._destroyToolBar()},destroyScroller:function(){var e=this.scroller;if(!e)return;e.destroy();e.element.remove();this.scroller=null},save:function(){var e={shapes:[],connections:[]};var t,i,n;for(t=0;t<this.shapes.length;t++){n=this.shapes[t];if(n.options.serializable)e.shapes.push(n.options)}for(t=0;t<this.connections.length;t++){i=this.connections[t];e.connections.push(u({},i.options,i.toJSON()))}return e},focus:function(){if(!this.element.is(kendo._activeElement())){var e=this.element,t=e[0],i=[],n=[],r=document.documentElement,a;do{t=t.parentNode;if(t.scrollHeight>t.clientHeight){i.push(t);n.push(t.scrollTop)}}while(t!=r);e.trigger("focus");for(a=0;a<i.length;a++)i[a].scrollTop=n[a];return true}},load:function(e){this.clear();this.setOptions(e);this._createShapes();this._createConnections()},setOptions:function(e){u(this.options,e)},clear:function(){var e=this;e.select(false);e.mainLayer.clear();e._shapesQuadTree.clear();e._initialize()},connect:function(e,t,i){var n;if(this.connectionsDataSource&&this._isEditable){var r=this.connectionsDataSource.add({});n=this._connectionsDataMap[r.uid];n.source(e);n.target(t);n.redraw(i);n.updateModel()}else{n=new $e(e,t,u({},this.options.connectionDefaults,i));this.addConnection(n)}return n},connected:function(e,t){for(var i=0;i<this.connections.length;i++){var n=this.connections[i];if(n.from==e&&n.to==t)return true}return false},addConnection:function(e,t){if(t!==false)this.undoRedoService.add(new l.AddConnectionUnit(e,this),false);e.diagram=this;e._setOptionsFromModel();e.refresh();this.mainLayer.append(e.visual);this.connections.push(e);this.trigger(Q,{added:[e],removed:[]});return e},_addConnection:function(e,t){var i=this.connectionsDataSource;var n;if(i&&this._isEditable){n=ut(i,st(e.dataItem));e.dataItem=n;e.updateModel();if(!this.trigger("add",{connection:e})){this._connectionsDataMap[n.uid]=e;i.add(n);this.addConnection(e,t);e._updateConnectors();return e}}else if(!this.trigger("add",{connection:e})){this.addConnection(e,t);e._updateConnectors();return e}},addShape:function(e,t){var i,n=this.options.shapeDefaults;if(e instanceof h){i=e;this._parseBounds(i.bounds())}else if(!(e instanceof kendo.Class)){n=u({},n,e||{});i=new h(n,this);this._parseBounds(i.bounds())}else return;if(t!==false)this.undoRedoService.add(new l.AddShapeUnit(i,this),false);this.shapes.push(i);if(i.diagram!==this){this._shapesQuadTree.insert(i);i.diagram=this}this.mainLayer.append(i.visual);this.trigger(Q,{added:[i],removed:[]});return i},_addShape:function(e,t){var i=this;var n=i.dataSource;var r;if(n&&this._isEditable){r=ut(n,st(e.dataItem));e.dataItem=r;e.updateModel();if(!this.trigger("add",{shape:e})){this.dataSource.add(r);var a=this._inactiveShapeItems.getByUid(r.uid);a.element=e;a.undoable=t;return e}}else if(!this.trigger("add",{shape:e}))return this.addShape(e,t)},_parseBounds:function(e){e.x=typeof e.x=="string"?parseFloat(e.x):e.x;e.y=typeof e.y=="string"?parseFloat(e.y):e.y},remove:function(e,t){e=W(e)?e.slice(0):[e];var i=lt(e);var n=i.shapes;var r=i.connections;var a;if(!o(t))t=true;if(t)this.undoRedoService.begin();this._suspendModelRefresh();for(a=n.length-1;a>=0;a--)this._removeItem(n[a],t,r);for(a=r.length-1;a>=0;a--)this._removeItem(r[a],t);this._resumeModelRefresh();if(t)this.undoRedoService.commit(false);this.trigger(Q,{added:[],removed:e})},_removeShapeDataItem:function(e){if(this._isEditable){this.dataSource.remove(e.dataItem);delete this._dataMap[e.dataItem.id]}},_removeConnectionDataItem:function(e){if(this._isEditable){this.connectionsDataSource.remove(e.dataItem);delete this._connectionsDataMap[e.dataItem.uid]}},_triggerRemove:function(e){var t=[];var i,n,r;for(var a=0;a<e.length;a++){i=e[a];r=i.options.editable;if(i instanceof h)n={shape:i};else n={connection:i};if(r&&r.remove!==false&&!this.trigger("remove",n))t.push(i)}return t},undo:function(){this.undoRedoService.undo()},redo:function(){this.undoRedoService.redo()},select:function(e,t){if(G(e)){t=u({addToSelection:false},t);var i=t.addToSelection,n=[],r=[],a,o;if(!i)this.deselect();this._internalSelection=true;if(e instanceof Array)n=e;else if(e instanceof qe)n=[e];for(a=0;a<n.length;a++){o=n[a];if(o.select(true))r.push(o)}this._selectionChanged(r,[]);this._internalSelection=false}else return this._selectedItems},selectAll:function(){this.select(this.shapes.concat(this.connections))},selectArea:function(e){var t,i,n;this._internalSelection=true;var r=[];if(e instanceof f){i=this.shapes.concat(this.connections);for(t=0;t<i.length;t++){n=i[t];if((!e||n._hitTest(e))&&n.options.enable)if(n.select(true))r.push(n)}}this._selectionChanged(r,[]);this._internalSelection=false},deselect:function(e){this._internalSelection=true;var t=[],i=[],n,r;if(e instanceof Array)i=e;else if(e instanceof qe)i.push(e);else if(!G(e))i=this._selectedItems.slice(0);for(r=0;r<i.length;r++){n=i[r];if(n.select(false))t.push(n)}this._selectionChanged([],t);this._internalSelection=false},toFront:function(e,t){if(!e)e=this._selectedItems.slice();var i=this._getDiagramItems(e),n;if(!o(t)||t){n=We(this.mainLayer,i.visuals);var r=new N(this,e,n);this.undoRedoService.add(r)}else{this.mainLayer.toFront(i.visuals);this._fixOrdering(i,true)}},toBack:function(e,t){if(!e)e=this._selectedItems.slice();var i=this._getDiagramItems(e),n;if(!o(t)||t){n=We(this.mainLayer,i.visuals);var r=new V(this,e,n);this.undoRedoService.add(r)}else{this.mainLayer.toBack(i.visuals);this._fixOrdering(i,false)}},bringIntoView:function(e,t){var i=this.viewport();var n=new l.RectAlign(i);var r,a,o,s;if(i.width===0||i.height===0)return;t=u({animate:false,align:"center middle"},t);if(t.align=="none")t.align="center middle";if(e instanceof qe)a=e.bounds(De);else if(W(e))a=this.boundingBox(e);else if(e instanceof f)a=e.clone();o=a.clone();a.zoom(this._zoom);if(a.width>i.width||a.height>i.height){this._zoom=this._getValidZoom(m.min(i.width/o.width,i.height/o.height));a=o.clone().zoom(this._zoom)}this._zoomMainLayer();r=a.clone();n.align(a,t.align);s=a.topLeft().minus(r.topLeft());this.pan(s.times(-1),t.animate)},alignShapes:function(e){if(j(e))e="Left";var t=this.select(),i,n,r;if(t.length===0)return;switch(e.toLowerCase()){case"left":case"top":i=Te;break;case"right":case"bottom":i=Ae;break}for(r=0;r<t.length;r++){n=t[r];if(n instanceof h)switch(e.toLowerCase()){case"left":i=m.min(i,n.options.x);break;case"top":i=m.min(i,n.options.y);break;case"right":i=m.max(i,n.options.x);break;case"bottom":i=m.max(i,n.options.y);break}}var a=[];var o=[];for(r=0;r<t.length;r++){n=t[r];if(n instanceof h){o.push(n);a.push(n.bounds());switch(e.toLowerCase()){case"left":case"right":n.position(new g(i,n.options.y));break;case"top":case"bottom":n.position(new g(n.options.x,i));break}}}var s=new l.TransformUnit(o,a);this.undoRedoService.add(s,false)},zoom:function(e,t){if(e){var i=t?t.point:new l.Point(0,0);e=this._zoom=this._getValidZoom(e);if(!j(i)){i=new l.Point(m.round(i.x),m.round(i.y));var n=i.times(e);var r=this.modelToView(i);var a=r.minus(n);this._storePan(new l.Point(m.round(a.x),m.round(a.y)))}if(t)t.zoom=e;this._panTransform();this.canvas.surface.hideTooltip();this._updateAdorners()}return this._zoom},_getPan:function(e){var t=this.canvas;if(!t.translate)e=e.plus(this._pan);return e},pan:function(e,t){if(e instanceof g){var i=this;var n=i.scroller;e=i._getPan(e);e=e.times(-1);if(t)n.animatedScrollTo(e.x,e.y,function(){i._updateAdorners()});else{n.scrollTo(e.x,e.y);i._updateAdorners()}}else return this._pan.times(-1)},viewport:function(){var e=this.element;var t=e.width();var i=e.height();if(this.toolBar)i-=y(this.toolBar.element);return new f(0,0,t,i)},copy:function(){if(this.options.copy.enabled){this._clipboard=[];this._copyOffset=1;for(var e=0;e<this._selectedItems.length;e++){var t=this._selectedItems[e];this._clipboard.push(t)}}},cut:function(){if(this.options.copy.enabled){this._clipboard=[];this._copyOffset=0;for(var e=0;e<this._selectedItems.length;e++){var t=this._selectedItems[e];this._clipboard.push(t)}this.remove(this._clipboard,true)}},paste:function(){if(this._clipboard.length>0){var e,t,i;var n={};var r=lt(this._clipboard);var a=r.connections;var o=r.shapes;var s={x:this._copyOffset*this.options.copy.offsetX,y:this._copyOffset*this.options.copy.offsetY};this.deselect();for(i=0;i<o.length;i++){e=o[i];t=e.clone();n[e.id]=t;t.position(new g(e.options.x+s.x,e.options.y+s.y));t.diagram=this;t=this._addShape(t);if(t)t.select()}for(i=0;i<a.length;i++){e=a[i];t=this._addConnection(e.clone());if(t){this._updateCopiedConnection(t,e,"source",n,s);this._updateCopiedConnection(t,e,"target",n,s);t.select(true);t.updateModel()}}this._syncChanges();this._copyOffset+=1}},_updateCopiedConnection:function(t,e,i,n,r){var a,o,s;var l=e[i]();var u=this;if(l instanceof Ye&&n[l.shape.id]){s=n[l.shape.id];if(u.getShapeById(s.id))t[i](s.getConnector(l.options.name));else{o=u._inactiveShapeItems.getByUid(s.dataItem.uid);if(o){a=function(e){s=u._dataMap[e.id];t[i](s.getConnector(l.options.name));t.updateModel()};u._deferredConnectionUpdates.push(o.onActivate(a))}}}else t[i](new g(e[i+"Point"]().x+r.x,e[i+"Point"]().y+r.y))},boundingBox:function(e,t){var i=f.empty(),n,r=G(e)?this._getDiagramItems(e):{shapes:this.shapes};if(r.shapes.length>0){var a=r.shapes[0];i=a.bounds(Ee);for(var o=1;o<r.shapes.length;o++){a=r.shapes[o];n=a.bounds(Ee);if(t===true){n.x-=a._rotationOffset.x;n.y-=a._rotationOffset.y}i=i.union(n)}}return i},_containerOffset:function(){var e=this.element.offset();if(this.toolBar)e.top+=y(this.toolBar.element);return e},documentToView:function(e){var t=this._containerOffset();return new g(e.x-t.left,e.y-t.top)},viewToDocument:function(e){var t=this._containerOffset();return new g(e.x+t.left,e.y+t.top)},viewToModel:function(e){return this._transformWithMatrix(e,this._matrixInvert)},modelToView:function(e){return this._transformWithMatrix(e,this._matrix)},modelToLayer:function(e){return this._transformWithMatrix(e,this._layerMatrix)},layerToModel:function(e){return this._transformWithMatrix(e,this._layerMatrixInvert)},documentToModel:function(e){var t=this.documentToView(e);if(!this.canvas.translate){t.x=t.x+this.scroller.scrollLeft;t.y=t.y+this.scroller.scrollTop}return this.viewToModel(t)},modelToDocument:function(e){return this.viewToDocument(this.modelToView(e))},_transformWithMatrix:function(e,t){var i=e;if(e instanceof g){if(t)i=t.apply(e)}else{var n=this._transformWithMatrix(e.topLeft(),t),r=this._transformWithMatrix(e.bottomRight(),t);i=f.fromPoints(n,r)}return i},setDataSource:function(e){this.options.dataSource=e;this._dataSource();if(this.options.autoBind)this.dataSource.fetch()},setConnectionsDataSource:function(e){this.options.connectionsDataSource=e;this._connectionDataSource();if(this.options.autoBind)this.connectionsDataSource.fetch()},layout:function(e){this._layouting=true;var t;if(j(e))e=this.options.layout;if(j(e)||j(e.type))t="Tree";else t=e.type;var i;switch(t.toLowerCase()){case"tree":i=new l.TreeLayout(this);break;case"layered":i=new l.LayeredLayout(this);break;case"forcedirected":case"force":case"spring":case"springembedder":i=new l.SpringLayout(this);break;default:throw"Layout algorithm '"+t+"' is not supported."}var n=new l.LayoutState(this);var r=i.layout(e);if(r){var a=new l.LayoutUndoUnit(n,r,e?e.animate:null);this.undoRedoService.add(a)}this._layouting=false;this._redrawConnections()},getShapeById:function(t){var e;e=c.first(this.shapes,function(e){return e.visual.id===t});if(e)return e;e=c.first(this.connections,function(e){return e.visual.id===t});return e},getShapeByModelId:function(t){var e;if(this._isEditable)e=this._dataMap[t];else e=c.first(this.shapes,function(e){return(e.dataItem||{}).id===t});return e},getShapeByModelUid:function(t){var e;if(this._isEditable)e=c.first(this.shapes,function(e){return(e.dataItem||{}).uid===t});else e=this._dataMap[t];return e},getConnectionByModelId:function(t){var e;if(this.connectionsDataSource)e=c.first(this.connections,function(e){return(e.dataItem||{}).id===t});return e},getConnectionByModelUid:function(e){var t;if(this.connectionsDataSource)t=this._connectionsDataMap[e];return t},_extendLayoutOptions:function(e){if(e.layout)e.layout=u({},l.LayoutBase.fn.defaultOptions||{},e.layout)},_selectionChanged:function(e,t){if(e.length||t.length)this.trigger(he,{selected:e,deselected:t})},_getValidZoom:function(e){return m.min(m.max(e,this.options.zoomMin),this.options.zoomMax)},_panTransform:function(e){var t=this,i=e||t._pan;if(t.canvas.translate){t.scroller.scrollTo(i.x,i.y);t._zoomMainLayer()}else{t._storePan(i);t._transformMainLayer()}},_finishPan:function(){this.trigger(de,{total:this._pan,delta:Number.NaN})},_storePan:function(e){this._pan=e;this._storeViewMatrix()},_zoomMainLayer:function(){var e=this._zoom;var t=new S(0,0,e,e);t.render(this.mainLayer);this._storeLayerMatrix(t);this._storeViewMatrix()},_transformMainLayer:function(){var e=this._pan,t=this._zoom;var i=new S(e.x,e.y,t,t);i.render(this.mainLayer);this._storeLayerMatrix(i);this._storeViewMatrix()},_storeLayerMatrix:function(e){this._layerMatrix=e.toMatrix();this._layerMatrixInvert=e.invert().toMatrix()},_storeViewMatrix:function(){var e=this._pan,t=this._zoom;var i=new S(e.x,e.y,t,t);this._matrix=i.toMatrix();this._matrixInvert=i.invert().toMatrix()},_toIndex:function(e,t){var i=this._getDiagramItems(e);this.mainLayer.toIndex(i.visuals,t);this._fixOrdering(i,false)},_fixOrdering:function(e,t){var i=t?this.shapes.length-1:0,n=t?this.connections.length-1:0,r,a;for(r=0;r<e.shapes.length;r++){a=e.shapes[r];c.remove(this.shapes,a);c.insert(this.shapes,a,i)}for(r=0;r<e.cons.length;r++){a=e.cons[r];c.remove(this.connections,a);c.insert(this.connections,a,n)}},_getDiagramItems:function(e){var t,i={},n=e;i.visuals=[];i.shapes=[];i.cons=[];if(!e)n=this._selectedItems.slice();else if(!W(e))n=[e];for(t=0;t<n.length;t++){var r=n[t];if(r instanceof h){i.shapes.push(r);i.visuals.push(r.visual)}else if(r instanceof $e){i.cons.push(r);i.visuals.push(r.visual)}}return i},_removeItem:function(e,t,i){e.select(false);if(e instanceof h){this._removeShapeDataItem(e);this._removeShape(e,t,i)}else if(e instanceof $e){this._removeConnectionDataItem(e);this._removeConnection(e,t)}this.mainLayer.remove(e.visual)},_removeShape:function(e,t,i){var n,r,a,o=[],s=[];this.toolService._removeHover();if(t)this.undoRedoService.addCompositeItem(new A(e));c.remove(this.shapes,e);this._shapesQuadTree.remove(e);for(n=0;n<e.connectors.length;n++){a=e.connectors[n];for(var l=0;l<a.connections.length;l++){r=a.connections[l];if(!i||!p.inArray(r,i))if(r.sourceConnector==a)o.push(r);else if(r.targetConnector==a)s.push(r)}}for(n=0;n<o.length;n++){o[n].source(null,t);o[n].updateModel()}for(n=0;n<s.length;n++){s[n].target(null,t);s[n].updateModel()}},_removeConnection:function(e,t){if(e.sourceConnector)c.remove(e.sourceConnector.connections,e);if(e.targetConnector)c.remove(e.targetConnector.connections,e);if(t)this.undoRedoService.addCompositeItem(new M(e));c.remove(this.connections,e)},_removeDataItems:function(e,t){var i,n,r,a;e=W(e)?e:[e];while(e.length){i=e.shift();r=this._dataMap[i.uid];if(r){this._removeShapeConnections(r);this._removeItem(r,false);delete this._dataMap[i.uid];if(t&&i.hasChildren&&i.loaded()){n=i.children.data();for(a=0;a<n.length;a++)e.push(n[a])}}}},_removeShapeConnections:function(e){var t=e.connections();var i;if(t)for(i=0;i<t.length;i++)this._removeItem(t[i],false)},_addDataItem:function(e,t){if(!o(e))return;var i=this._dataMap[e.id];if(i)return i;var n=u({},this.options.shapeDefaults);n.dataItem=e;i=new h(n,this);this.addShape(i,t!==false);this._dataMap[e.id]=i;return i},_addDataItemByUid:function(e){if(!o(e))return;var t=this._dataMap[e.uid];if(t)return t;var i=u({},this.options.shapeDefaults);i.dataItem=e;t=new h(i,this);this.addShape(t);this._dataMap[e.uid]=t;return t},_addDataItems:function(e,t){var i,n,r,a,o;for(n=0;n<e.length;n++){i=e[n];r=this._addDataItemByUid(i);a=this._addDataItemByUid(t);if(a&&!this.connected(a,r))o=this.connect(a,r)}},_refreshSource:function(e){var t=this,i=e.node,n=e.action,r=e.items,a=t.options,o,s;if(e.field){for(o=0;o<r.length;o++)if(this._dataMap[r[o].uid])this._dataMap[r[o].uid].redrawVisual();return}if(n=="remove")this._removeDataItems(e.items,true);else{if((!n||n==="itemloaded")&&!this._bindingRoots){this._bindingRoots=true;s=true}if(!n&&!i)t.clear();this._addDataItems(r,i);for(o=0;o<r.length;o++)r[o].load()}if(a.layout&&(s||n=="remove"||n=="add"))t.layout(a.layout);if(s){this.trigger("dataBound");this._bindingRoots=false}},_addItem:function(e){if(e instanceof h)this.addShape(e);else if(e instanceof $e)this.addConnection(e)},_createToolBar:function(c){var e=this.toolService.diagram;if(!this.singleToolBar&&e.select().length===1){var t=e.select()[0];if(t&&t.options.editable!==false){var i=t.options.editable;var n=i.tools;if(this._isEditable&&n.length===0){if(t instanceof h)n=["edit","rotateClockwise","rotateAnticlockwise"];else if(t instanceof $e)n=["edit"];if(i&&i.remove!==false)n.push("delete")}if(n&&n.length){var r=20;var a;this.singleToolBar=new Ze(e,{tools:n,click:this._toolBarClick.bind(this),modal:true,popupZIndex:parseInt(e.element.closest(".k-window").css("zIndex"),10)+10});var o=v(this.singleToolBar._popup.element);var s=y(this.singleToolBar._popup.element);if(t instanceof h){var l=this.modelToView(t.bounds(Ee));a=new g(l.x,l.y).minus(new g((o-l.width)/2,s+r))}else if(t instanceof $e){var u=this.modelToView(t.bounds());a=new g(u.x,u.y).minus(new g((o-u.width-20)/2,s+r))}if(a){if(!this.canvas.translate)a=a.minus(new g(this.scroller.scrollLeft,this.scroller.scrollTop));a=this.viewToDocument(a);a=new g(m.max(a.x,0),m.max(a.y,0));this.singleToolBar.showAt(a);if(c)this.singleToolBar._popup.one("close",dt)}else this._destroyToolBar()}}}},_toolBarClick:function(e){this.trigger("toolBarClick",e);this._destroyToolBar()},_normalizePointZoom:function(e){return e.times(1/this.zoom())},_initialize:function(){this.shapes=[];this._selectedItems=[];this.connections=[];this._dataMap={};this._connectionsDataMap={};this._inactiveShapeItems=new nt;this._deferredConnectionUpdates=[];this.undoRedoService=new t({undone:this._syncHandler,redone:this._syncHandler});this.id=l.randomId()},_fetchFreshData:function(){var e=this;e._dataSource();if(e._isEditable)e._connectionDataSource();if(e.options.autoBind)if(e._isEditable){this._loadingShapes=true;this._loadingConnections=true;e.dataSource.fetch();e.connectionsDataSource.fetch()}else e.dataSource.fetch()},_dataSource:function(){if(o(this.options.connectionsDataSource)){this._isEditable=true;var e=this.options.dataSource||{};var t=W(e)?{data:e}:e;if(this.dataSource&&this._shapesRefreshHandler)this.dataSource.unbind("change",this._shapesRefreshHandler).unbind("requestStart",this._shapesRequestStartHandler).unbind("error",this._shapesErrorHandler);else{this._shapesRefreshHandler=this._refreshShapes.bind(this);this._shapesRequestStartHandler=this._shapesRequestStart.bind(this);this._shapesErrorHandler=this._error.bind(this)}this.dataSource=kendo.data.DataSource.create(t).bind("change",this._shapesRefreshHandler).bind("requestStart",this._shapesRequestStartHandler).bind("error",this._shapesErrorHandler)}else{this._treeDataSource();this._isEditable=false}},_connectionDataSource:function(){var e=this.options.connectionsDataSource;if(e){var t=W(e)?{data:e}:e;if(this.connectionsDataSource&&this._connectionsRefreshHandler)this.connectionsDataSource.unbind("change",this._connectionsRefreshHandler).unbind("requestStart",this._connectionsRequestStartHandler).unbind("error",this._connectionsErrorHandler);else{this._connectionsRefreshHandler=this._refreshConnections.bind(this);this._connectionsRequestStartHandler=this._connectionsRequestStart.bind(this);this._connectionsErrorHandler=this._connectionsError.bind(this)}this.connectionsDataSource=kendo.data.DataSource.create(t).bind("change",this._connectionsRefreshHandler).bind("requestStart",this._connectionsRequestStartHandler).bind("error",this._connectionsErrorHandler)}},_shapesRequestStart:function(e){if(e.type=="read")this._loadingShapes=true},_connectionsRequestStart:function(e){if(e.type=="read")this._loadingConnections=true},_error:function(){this._loadingShapes=false},_connectionsError:function(){this._loadingConnections=false},_refreshShapes:function(e){if(e.action==="remove"){if(this._shouldRefresh())this._removeShapes(e.items)}else if(e.action==="itemchange"){if(this._shouldRefresh())this._updateShapes(e.items,e.field)}else if(e.action==="add")this._inactiveShapeItems.add(e.items);else if(e.action==="sync")this._syncShapes(e.items);else this.refresh()},_shouldRefresh:function(){return!this._suspended},_suspendModelRefresh:function(){this._suspended=(this._suspended||0)+1},_resumeModelRefresh:function(){this._suspended=m.max((this._suspended||0)-1,0)},refresh:function(){this._loadingShapes=false;if(!this._loadingConnections)this._rebindShapesAndConnections()},_rebindShapesAndConnections:function(){this.clear();this._addShapes(this.dataSource.view());if(this.connectionsDataSource)this._addConnections(this.connectionsDataSource.view(),false);if(this.options.layout)this.layout(this.options.layout);else this._redrawConnections();this.trigger("dataBound")},refreshConnections:function(){this._loadingConnections=false;if(!this._loadingShapes)this._rebindShapesAndConnections()},_redrawConnections:function(){var e=this.connections;for(var t=0;t<e.length;t++)e[t].refresh()},_removeShapes:function(e){var t=this._dataMap;var i,n;for(n=0;n<e.length;n++){i=e[n];if(t[i.id]){this.remove(t[i.id],false);t[i.id]=null}}},_syncShapes:function(){var n=this;var r=n._inactiveShapeItems;r.forEach(function(e){var t=e.dataItem;var i=e.element;if(!t.isNew()){if(i){i._setOptionsFromModel();n.addShape(i,e.undoable);n._dataMap[t.id]=i}else n._addDataItem(t);e.activate();r.remove(t)}})},_updateShapes:function(e,t){for(var i=0;i<e.length;i++){var n=e[i];var r=this._dataMap[n.id];if(r)r.updateOptionsFromModel(n,t)}},_addShapes:function(e){for(var t=0;t<e.length;t++)this._addDataItem(e[t],false)},_refreshConnections:function(e){if(e.action==="remove"){if(this._shouldRefresh())this._removeConnections(e.items)}else if(e.action==="add")this._addConnections(e.items);else if(e.action==="sync");else if(e.action==="itemchange"){if(this._shouldRefresh())this._updateConnections(e.items)}else this.refreshConnections()},_removeConnections:function(e){for(var t=0;t<e.length;t++){this.remove(this._connectionsDataMap[e[t].uid],false);this._connectionsDataMap[e[t].uid]=null}},_updateConnections:function(e){for(var t=0;t<e.length;t++){var i=e[t];var n=this._connectionsDataMap[i.uid];n.updateOptionsFromModel(i)}},_addConnections:function(e,t){var i=e.length;for(var n=0;n<i;n++){var r=e[n];this._addConnectionDataItem(r,t)}},_addConnectionDataItem:function(e,t){if(!this._connectionsDataMap[e.uid]){var i=this._validateConnector(e.from);if(!o(i)||i===null)i=new g(e.fromX,e.fromY);var n=this._validateConnector(e.to);if(!o(n)||n===null)n=new g(e.toX,e.toY);if(o(i)&&o(n)){var r=u({},this.options.connectionDefaults);r.dataItem=e;var a=new $e(i,n,r);this._connectionsDataMap[e.uid]=a;this.addConnection(a,t)}}},_validateConnector:function(e){var t;if(o(e)&&e!==null)t=this._dataMap[e];return t},_treeDataSource:function(){var e=this,t=e.options,i=t.dataSource;i=W(i)?{data:i}:i;if(i instanceof kendo.data.DataSource&&!(i instanceof kendo.data.HierarchicalDataSource))throw new Error("Incorrect DataSource type. If a single dataSource instance is set to the diagram then it should be a HierarchicalDataSource. You should set only the options instead of an instance or a HierarchicalDataSource instance or supply connectionsDataSource as well.");if(!i.fields)i.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}];if(e.dataSource&&e._refreshHandler)e._unbindDataSource();e._refreshHandler=e._refreshSource.bind(e);e._errorHandler=e._error.bind(e);e.dataSource=b.create(i).bind(Q,e._refreshHandler).bind(re,e._errorHandler)},_unbindDataSource:function(){var e=this;e.dataSource.unbind(Q,e._refreshHandler).unbind(re,e._errorHandler)},_adorn:function(e,t){if(t!==d&&e)if(t){this._adorners.push(e);this.adornerLayer.append(e.visual)}else{c.remove(this._adorners,e);this.adornerLayer.remove(e.visual)}},_showConnectors:function(e,t){if(t)this._connectorsAdorner.show(e);else this._connectorsAdorner.destroy()},_updateAdorners:function(){var e=this._adorners;for(var t=0;t<e.length;t++){var i=e[t];if(i.refreshBounds)i.refreshBounds();i.refresh()}},_refresh:function(){for(var e=0;e<this.connections.length;e++)this.connections[e].refresh()},_destroyToolBar:function(){if(this.singleToolBar){this.singleToolBar.hide();this.singleToolBar.destroy();this.singleToolBar=null}},_destroyGlobalToolBar:function(){if(this.toolBar){this.toolBar.hide();this.toolBar.destroy();this.toolBar=null}},exportDOMVisual:function(){var e=this.canvas._viewBox;var t=s.transform().translate(-e.x,-e.y);var i=new s.Rect([0,0],[e.width,e.height]);var n=_.Path.fromRect(i);var r=new _.Group({transform:t});var a=new _.Group({clip:n});var o=this.canvas.drawingElement.children[0];a.append(r);r.children.push(o);return a},exportVisual:function(){var e=s.transform().scale(1/this._zoom);var t=new _.Group({transform:e});var i=this.mainLayer.drawingElement;t.children.push(i);return t},_syncChanges:function(){this._syncShapeChanges();this._syncConnectionChanges()},_syncShapeChanges:function(){if(this.dataSource&&this._isEditable)this.dataSource.sync()},_syncConnectionChanges:function(){var e=this;if(e.connectionsDataSource&&e._isEditable){r.when.apply(r,e._deferredConnectionUpdates).then(function(){e.connectionsDataSource.sync()});e.deferredConnectionUpdates=[]}}});if(p.ExportMixin.extend(Xe.fn,true),kendo.PDFMixin)kendo.PDFMixin.extend(Xe.fn);function Ke(e){var t={};e=e||{};if(o(e.text)&&e.text!==null)t.text=e.text;if(o(e.x)&&e.x!==null)t.x=e.x;if(o(e.y)&&e.y!==null)t.y=e.y;if(o(e.width)&&e.width!==null)t.width=e.width;if(o(e.height)&&e.height!==null)t.height=e.height;if(o(e.type)&&e.type!==null)t.type=e.type;return t}function Qe(e){var t={};e=e||{};if(o(e.text)&&e.text!==null)t.content=e.text;if(o(e.type)&&e.type!==null)t.type=e.type;if(o(e.from)&&e.from!==null)t.from=e.from;if(o(e.fromConnector)&&e.fromConnector!==null)t.fromConnector=e.fromConnector;if(o(e.fromX)&&e.fromX!==null)t.fromX=e.fromX;if(o(e.fromY)&&e.fromY!==null)t.fromY=e.fromY;if(o(e.to)&&e.to!==null)t.to=e.to;if(o(e.toConnector)&&e.toConnector!==null)t.toConnector=e.toConnector;if(o(e.toX)&&e.toX!==null)t.toX=e.toX;if(o(e.toY)&&e.toY!==null)t.toY=e.toY;return t}var Ze=kendo.Observable.extend({init:function(e,t){kendo.Observable.fn.init.call(this);this.diagram=e;this.options=u({},this.options,t);this._tools=[];this.createToolBar();this.createTools();this.appendTools();if(this.options.modal)this.createPopup();this.bind(this.events,t)},events:["click"],createPopup:function(){this.container=r("<div/>").append(this.element);this._popup=this.container.kendoPopup({}).getKendoPopup()},appendTools:function(){for(var e=0;e<this._tools.length;e++){var t=this._tools[e];if(t.buttons&&t.buttons.length||!o(t.buttons))this._toolBar.add(t)}},createToolBar:function(){this.element=r("<div/>");this._toolBar=this.element.kendoToolBar({click:this.click.bind(this),resizable:false}).getKendoToolBar();this.element.css("border","none")},createTools:function(){for(var e=0;e<this.options.tools.length;e++)this.createTool(this.options.tools[e])},createTool:function(e){if(!$(e))e={name:e};var t=e.name+"Tool";if(this[t])this[t](e);else this._tools.push(u({},e,{attributes:this._setAttributes({action:e.name})}))},showAt:function(e){var t=parseInt(this.options.popupZIndex,10);if(this._popup){this._popup.open(e.x,e.y);if(t)this._popup.wrapper.css("zIndex",t)}},hide:function(){if(this._popup)this._popup.close()},newGroup:function(){return{type:"buttonGroup",buttons:[]}},editTool:function(){this._tools.push({icon:"edit",showText:"overflow",type:"button",text:"Edit",attributes:this._setAttributes({action:"edit"})})},deleteTool:function(){this._tools.push({icon:"close",showText:"overflow",type:"button",text:"Delete",attributes:this._setAttributes({action:"delete"})})},rotateAnticlockwiseTool:function(e){this._appendGroup("rotate");this._rotateGroup.buttons.push({icon:"rotate-left",showText:"overflow",text:"RotateAnticlockwise",group:"rotate",attributes:this._setAttributes({action:"rotateAnticlockwise",step:e.step})})},rotateClockwiseTool:function(e){this._appendGroup("rotate");this._rotateGroup.buttons.push({icon:"rotate-right",attributes:this._setAttributes({action:"rotateClockwise",step:e.step}),showText:"overflow",text:"RotateClockwise",group:"rotate"})},createShapeTool:function(){this._appendGroup("create");this._createGroup.buttons.push({icon:"shape",showText:"overflow",text:"CreateShape",group:"create",attributes:this._setAttributes({action:"createShape"})})},createConnectionTool:function(){this._appendGroup("create");this._createGroup.buttons.push({icon:"connector",showText:"overflow",text:"CreateConnection",group:"create",attributes:this._setAttributes({action:"createConnection"})})},undoTool:function(){this._appendGroup("history");this._historyGroup.buttons.push({icon:"undo",showText:"overflow",text:"Undo",group:"history",attributes:this._setAttributes({action:"undo"})})},redoTool:function(){this._appendGroup("history");this._historyGroup.buttons.push({icon:"redo",showText:"overflow",text:"Redo",group:"history",attributes:this._setAttributes({action:"redo"})})},_appendGroup:function(e){var t="_"+e+"Group";if(!this[t]){this[t]=this.newGroup();this._tools.push(this[t])}},_setAttributes:function(e){var t={};if(e.action)t[kendo.attr("action")]=e.action;if(e.step)t[kendo.attr("step")]=e.step;return t},_getAttributes:function(e){var t={};var i=e.attr(kendo.attr("action"));if(i)t.action=i;var n=e.attr(kendo.attr("step"));if(n)t.step=n;return t},click:function(e){var t=this._getAttributes(r(e.target));var i=t.action;if(i&&this[i])this[i](t);this.trigger("click",this.eventData(i,e.target))},eventData:function(e,t){var i=this.selectedElements(),n=i.length,r=[],a=[],o;for(var s=0;s<n;s++){o=i[s];if(o instanceof h)r.push(o);else a.push(o)}return{shapes:r,connections:a,action:e,target:t}},delete:function(){var e=this.diagram;var t=e._triggerRemove(this.selectedElements());if(t.length){this.diagram.remove(t,true);this.diagram._syncChanges()}},edit:function(){var e=this.selectedElements();if(e.length===1)this.diagram.edit(e[0])},rotateClockwise:function(e){var t=parseFloat(e.step||90);this._rotate(t)},rotateAnticlockwise:function(e){var t=parseFloat(e.step||90);this._rotate(-t)},_rotate:function(e){var t=this.diagram._resizingAdorner;t.angle(t.angle()+e);t.rotate()},selectedElements:function(){return this.diagram.select()},createShape:function(){this.diagram.createShape()},createConnection:function(){this.diagram.createConnection()},undo:function(){this.diagram.undo()},redo:function(){this.diagram.redo()},destroy:function(){this.diagram=null;this.element=null;this.options=null;if(this._toolBar)this._toolBar.destroy();if(this._popup)this._popup.destroy()}}),Je=kendo.Observable.extend({init:function(e,t){kendo.Observable.fn.init.call(this);this.options=a(true,{},this.options,t);this.element=e;this.model=this.options.model;this.fields=this._getFields();this._initContainer();this.createEditable()},options:{editors:{}},_initContainer:function(){this.wrapper=this.element},createEditable:function(){var e=this.options;this.editable=new kendo.ui.Editable(this.wrapper,{fields:this.fields,target:e.target,clearContainer:false,model:this.model})},_isEditable:function(e){return this.model.editable&&this.model.editable(e)},_getFields:function(){var e=[];var t=this.model.fields;for(var i in t){var n={};if(this._isEditable(i)){var r=this.options.editors[i];if(r)n.editor=r;n.field=i;e.push(n)}}return e},end:function(){return this.editable.end()},destroy:function(){this.editable.destroy();this.editable.element.find("["+kendo.attr("container-for")+"]").empty();this.model=this.wrapper=this.element=this.columns=this.editable=null}}),et=Je.extend({init:function(e,t){Je.fn.init.call(this,e,t);this.bind(this.events,this.options);this.open()},events:["update","cancel"],options:{window:{modal:true,resizable:false,draggable:true,title:"Edit",visible:false}},_initContainer:function(){var t=this;this.wrapper=r('<div class="k-popup-edit-form"/>').attr(kendo.attr("uid"),this.model.uid);var e="";if(this.options.template){e+=this._renderTemplate();this.fields=[]}else e+=this._renderFields();e+=this._renderButtons();this.wrapper.append(r('<div class="k-edit-form-container"/>').append(e));this.window=new kendo.ui.Window(this.wrapper.appendTo(this.element),this.options.window);this.window.bind("close",function(e){if(e.userTriggered){e.sender.element.trigger("focus");t._cancelClick(e)}});this._attachButtonEvents()},_renderTemplate:function(){var e=this.options.template;if(typeof e==="string")e=kendo.unescape(e);e=kendo.template(e)(this.model);return e},_renderFields:function(){var e="";for(var t=0;t<this.fields.length;t++){var i=this.fields[t];e+='<div class="k-edit-label"><label for="'+i.field+'">'+(i.field||"")+"</label></div>";if(this._isEditable(i.field))e+="<div "+kendo.attr("container-for")+'="'+i.field+'" class="k-edit-field"></div>'}return e},_renderButtons:function(){var e='<div class="k-edit-buttons">';e+=this._createButton("update");e+=this._createButton("cancel");e+="</div>";return e},_createButton:function(e){return kendo.template(Ve)(He[e])},_attachButtonEvents:function(){this._cancelClickHandler=this._cancelClick.bind(this);this.window.element.on(Z+i,"a.k-diagram-cancel",this._cancelClickHandler);this._updateClickHandler=this._updateClick.bind(this);this.window.element.on(Z+i,"a.k-diagram-update",this._updateClickHandler)},_updateClick:function(e){e.preventDefault();this.trigger("update")},_cancelClick:function(e){e.preventDefault();this.trigger("cancel")},open:function(){this.window.center().open()},close:function(){this.window.bind("deactivate",this.destroy.bind(this)).close()},destroy:function(){this.window.close().destroy();this.window.element.off(Z+i,"a.k-diagram-cancel",this._cancelClickHandler);this.window.element.off(Z+i,"a.k-diagram-update",this._updateClickHandler);this._cancelClickHandler=null;this._editUpdateClickHandler=null;this.window=null;Je.fn.destroy.call(this)}});function tt(e,t){var i=this.dataSource.reader.model;if(i){var n=i.fn.fields.text?"text":i.idField;r("<input name='"+t.field+"' />").appendTo(e).kendoDropDownList({dataValueField:i.idField,dataTextField:n,dataSource:this.dataSource.data().toJSON(),optionLabel:" ",valuePrimitive:true})}}function it(e){this.dataItem=e;this.callbacks=[]}function nt(){this.items={}}it.fn=it.prototype={onActivate:function(e){var t=r.Deferred();this.callbacks.push({callback:e,deferred:t});return t},activate:function(){var e=this.callbacks;var t;for(var i=0;i<e.length;i++){t=this.callbacks[i];t.callback(this.dataItem);t.deferred.resolve()}this.callbacks=[]}},nt.fn=nt.prototype={add:function(e){for(var t=0;t<e.length;t++)this.items[e[t].uid]=new it(e[t])},forEach:function(e){for(var t in this.items)e(this.items[t])},getByUid:function(e){return this.items[e]},remove:function(e){delete this.items[e.uid]}};var rt=e.extend({init:function(){this.shapes=[]},_add:function(e,t){this.shapes.push({bounds:t,shape:e});e._quadNode=this},insert:function(e,t){this._add(e,t)},remove:function(e){var t=this.shapes;var i=t.length;for(var n=0;n<i;n++)if(t[n].shape===e){t.splice(n,1);break}},hitTestRect:function(e,t){var i=this.shapes;var n=i.length;for(var r=0;r<n;r++)if(this._testRect(i[r].shape,e)&&!p.inArray(i[r].shape,t))return true},_testRect:function(e,t){var i=e.rotate().angle;var n=e.bounds();var r;if(!i)r=n.overlaps(t);else r=I.rects(t,n,-i);return r}}),at=rt.extend({init:function(e){rt.fn.init.call(this);this.children=[];this.rect=e},inBounds:function(e){var t=this.rect;var i=t.bottomRight();var n=e.bottomRight();var r=t.x<=e.x&&t.y<=e.y&&n.x<=i.x&&n.y<=i.y;return r},overlapsBounds:function(e){return this.rect.overlaps(e)},insert:function(e,t){var i=false;var n=this.children;var r=n.length;if(this.inBounds(t)){if(!r&&this.shapes.length<4)this._add(e,t);else{if(!r)this._initChildren();for(var a=0;a<n.length;a++)if(n[a].insert(e,t)){i=true;break}if(!i)this._add(e,t)}i=true}return i},_initChildren:function(){var e=this.rect,t=this.children,i=this.shapes,n=e.center(),r=e.width/2,a=e.height/2,o,s;t.push(new at(new f(e.x,e.y,r,a)),new at(new f(n.x,e.y,r,a)),new at(new f(e.x,n.y,r,a)),new at(new f(n.x,n.y,r,a)));for(s=i.length-1;s>=0;s--)for(o=0;o<t.length;o++)if(t[o].insert(i[s].shape,i[s].bounds)){i.splice(s,1);break}},hitTestRect:function(e,t){var i;var n=this.children;var r=n.length;var a=false;if(this.overlapsBounds(e))if(rt.fn.hitTestRect.call(this,e,t))a=true;else for(i=0;i<r;i++)if(n[i].hitTestRect(e,t)){a=true;break}return a}}),ot=e.extend({ROOT_SIZE:1e3,init:function(e){var t=this._boundsChange.bind(this);e.bind(K,t);e.bind(fe,t);this.initRoots()},initRoots:function(){this.rootMap={};this.root=new rt},clear:function(){this.initRoots()},_boundsChange:function(e){if(e.item._quadNode)e.item._quadNode.remove(e.item);this.insert(e.item)},insert:function(e){var t=e.bounds(Ee);var i=this.ROOT_SIZE;var n=this.getSectors(t);var r=n[0][0];var a=n[1][0];if(this.inRoot(n))this.root.insert(e,t);else{if(!this.rootMap[r])this.rootMap[r]={};if(!this.rootMap[r][a])this.rootMap[r][a]=new at(new f(r*i,a*i,i,i));this.rootMap[r][a].insert(e,t)}},remove:function(e){if(e._quadNode)e._quadNode.remove(e)},inRoot:function(e){return e[0].length>1||e[1].length>1},getSectors:function(e){var t=this.ROOT_SIZE;var i=e.bottomRight();var n=m.floor(i.x/t);var r=m.floor(i.y/t);var a=[[],[]];for(var o=m.floor(e.x/t);o<=n;o++)a[0].push(o);for(var s=m.floor(e.y/t);s<=r;s++)a[1].push(s);return a},hitTestRect:function(e,t){var i=this.getSectors(e);var n,r,a,o;var s;if(this.root.hitTestRect(e,t))return true;for(n=0;n<i[0].length;n++){a=i[0][n];for(r=0;r<i[1].length;r++){o=i[1][r];s=(this.rootMap[a]||{})[o];if(s&&s.hitTestRect(e,t))return true}}return false}});function st(e){var t=e;if(e instanceof kendo.data.Model){t=e.toJSON();t[e.idField]=e._defaultId}return t}function lt(e){var t=[];var i=[];var n,r;for(r=0;r<e.length;r++){n=e[r];if(n instanceof h)i.push(n);else t.push(n)}return{shapes:i,connections:t}}function ut(e,t){if(e.reader.model)return new e.reader.model(t);return new kendo.data.ObservableObject(t)}function ct(e,t){if(o(t[e]))t.set(e,null)}function ht(e,t,i){var n;for(var r=0;r<i.length;r++){n=i[r];if(t&&!o(t[n]))t[n]=e[n]}}function ft(e){var t=e.drawingContainer().clippedBBox(null);if(t.origin.x!==0||t.origin.y!==0)e.position(-t.origin.x,-t.origin.y)}function dt(e){e.preventDefault()}p.ui.plugin(Xe),u(l,{Shape:h,Connection:$e,Connector:Ye,DiagramToolBar:Ze,QuadNode:at,QuadRoot:rt,ShapesQuadTree:ot,PopupEditor:et})})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.dataviz.diagram.min",["kendo.data.min","kendo.draganddrop.min","kendo.userevents.min","kendo.mobile.scroller.min","kendo.drawing.min","./dataviz/diagram/utils.min","./dataviz/diagram/math.min","./dataviz/diagram/svg.min","./dataviz/diagram/services.min","./dataviz/diagram/layout.min","./dataviz/diagram/dom.min"],function(){var e={id:"dataviz.diagram",name:"Diagram",category:"dataviz",description:"The Kendo DataViz Diagram ",depends:["data","userevents","mobile.scroller","draganddrop","drawing","dataviz.core","dataviz.themes","toolbar"],features:[{id:"dataviz.diagram-pdf-export",name:"PDF export",description:"Export Diagram as PDF",depends:["pdf"]},{id:"dataviz.diagram-editing",name:"Editing",description:"Support for model editing",depends:["editable","window","dropdownlist"]}]};return window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.dataviz.treemap.min",["kendo.data.min","kendo.userevents.min","kendo.dataviz.themes.min"],function(){var t={id:"dataviz.treeMap",name:"TreeMap",category:"dataviz",description:"The Kendo DataViz TreeMap",depends:["data","userevents","dataviz.themes"]},n=window.kendo.jQuery,o=void 0,c=Math,d=Array.isArray,l=window.kendo,p=l._outerHeight,u=l._outerWidth,e=l.Class,i=l.ui.Widget,s=l.template,a=l.deepExtend,v=l.data.HierarchicalDataSource,g=l.getter,m=l.dataviz,_=".kendoTreeMap",r="change",y="dataBound",b="itemCreated",w=Number.MAX_VALUE,x="mouseover"+_,k="mouseleave"+_,C="undefined",S=i.extend({init:function(e,t){l.destroy(e);n(e).empty();i.fn.init.call(this,e,t);this.wrapper=this.element;this._initTheme(this.options);this.element.addClass("k-widget k-treemap");this._setLayout();this._originalOptions=a({},this.options);this._initDataSource();this._attachEvents();l.notify(this,m.ui)},options:{name:"TreeMap",theme:"default",autoBind:true,textField:"text",valueField:"value",colorField:"color"},events:[y,b],_initTheme:function(e){var t=this,i=m.ui.themes||{},n=((e||{}).theme||"").toLowerCase(),r=(i[n]||{}).treeMap;t.options=a({},r,e)},_attachEvents:function(){this.element.on(x,this._mouseover.bind(this)).on(k,this._mouseleave.bind(this));this._resizeHandler=this.resize.bind(this,false);l.onResize(this._resizeHandler)},_setLayout:function(){if(this.options.type==="horizontal"){this._layout=new M(false);this._view=new D(this,this.options)}else if(this.options.type==="vertical"){this._layout=new M(true);this._view=new D(this,this.options)}else{this._layout=new T;this._view=new A(this,this.options)}},_initDataSource:function(){var e=this,t=e.options,i=t.dataSource;e._dataChangeHandler=e._onDataChange.bind(e);e.dataSource=v.create(i).bind(r,e._dataChangeHandler);if(i)if(e.options.autoBind)e.dataSource.fetch()},setDataSource:function(e){var t=this;t.dataSource.unbind(r,t._dataChangeHandler);t.dataSource=e.bind(r,t._dataChangeHandler);if(e)if(t.options.autoBind)t.dataSource.fetch()},_onDataChange:function(e){var t=e.node;var i=e.items;var n=this.options;var r,a;if(!t){this._cleanItems();this.element.empty();r=this._wrapItem(i[0]);this._layout.createRoot(r,u(this.element),p(this.element),this.options.type==="vertical");this._view.createRoot(r);this._root=r;this._colorIdx=0}else if(i.length){var o=this._getByUid(t.uid);o.children=[];i=new l.data.Query(i)._sortForGrouping(n.valueField,"desc");for(a=0;a<i.length;a++){r=i[a];o.children.push(this._wrapItem(r))}var s=this._view.htmlSize(o);this._layout.compute(o.children,o.coord,s);this._setColors(o.children);this._view.render(o)}for(a=0;a<i.length;a++)i[a].load();if(t)this.trigger(y,{node:t})},_cleanItems:function(){var e=this;e.angular("cleanup",function(){return{elements:e.element.find(".k-leaf div,.k-treemap-title,.k-treemap-title-vertical")}})},_setColors:function(e){var t=this.options.colors;var i=this._colorIdx;var n=t[i%t.length];var r,a;if(d(n))r=I(n[0],n[1],e.length);var o=false;for(var s=0;s<e.length;s++){a=e[s];if(!h(a.color))if(r)a.color=r[s];else a.color=n;if(!a.dataItem.hasChildren)o=true}if(o)this._colorIdx++},_contentSize:function(e){this.view.renderHeight(e)},_wrapItem:function(e){var t={};if(h(this.options.valueField))t.value=E(this.options.valueField,e);if(h(this.options.colorField))t.color=E(this.options.colorField,e);if(h(this.options.textField))t.text=E(this.options.textField,e);t.level=e.level();t.dataItem=e;return t},_getByUid:function(e){var t=[this._root];var i;while(t.length){i=t.pop();if(i.dataItem.uid===e)return i;if(i.children)t=t.concat(i.children)}},dataItem:function(e){var t=n(e).attr(l.attr("uid")),i=this.dataSource;return i&&i.getByUid(t)},findByUid:function(e){return this.element.find(".k-treemap-tile["+l.attr("uid")+"='"+e+"']")},_mouseover:function(e){var t=n(e.target);if(t.hasClass("k-leaf")){this._removeActiveState();t.removeClass("k-hover").addClass("k-hover")}},_removeActiveState:function(){this.element.find(".k-hover").removeClass("k-hover")},_mouseleave:function(){this._removeActiveState()},destroy:function(){i.fn.destroy.call(this);this.element.off(_);if(this.dataSource)this.dataSource.unbind(r,this._dataChangeHandler);this._root=null;l.unbindResize(this._resizeHandler);l.destroy(this.element)},items:function(){return n()},getSize:function(){return l.dimensions(this.element)},_resize:function(){var e=this._root;if(e){var t=this.element;var i=t.children();e.coord.width=u(t);e.coord.height=p(t);i.css({width:e.coord.width,height:e.coord.height});this._resizeItems(e,i)}},_resizeItems:function(e,t){if(e.children&&e.children.length){var i=t.children(".k-treemap-wrap").children();var n,r;this._layout.compute(e.children,e.coord,{text:this._view.titleSize(e,t)});for(var a=0;a<e.children.length;a++){n=e.children[a];r=i.filter("["+l.attr("uid")+"='"+n.dataItem.uid+"']");this._view.setItemSize(n,r);this._resizeItems(n,r)}}},setOptions:function(e){var t=e.dataSource;e.dataSource=o;this._originalOptions=a(this._originalOptions,e);this.options=a({},this._originalOptions);this._setLayout();this._initTheme(this.options);i.fn._setEvents.call(this,e);if(t)this.setDataSource(v.create(t));if(this.options.autoBind)this.dataSource.fetch()}}),T=e.extend({createRoot:function(e,t,i){e.coord={width:t,height:i,top:0,left:0}},leaf:function(e){return!e.children},layoutChildren:function(e,t){var i=t.width*t.height;var n=0,r=[],a;for(a=0;a<e.length;a++){r[a]=parseFloat(e[a].value);n+=r[a]}for(a=0;a<r.length;a++)e[a].area=i*r[a]/n;var o=this.layoutHorizontal()?t.height:t.width;var s=[e[0]];var l=e.slice(1);this.squarify(l,s,o,t)},squarify:function(e,t,i,n){this.computeDim(e,t,i,n)},computeDim:function(e,t,i,n){if(e.length+t.length==1){var r=e.length==1?e:t;this.layoutLast(r,i,n);return}if(e.length>=2&&t.length===0){t=[e[0]];e=e.slice(1)}if(e.length===0){if(t.length>0)this.layoutRow(t,i,n);return}var a=e[0];if(this.worstAspectRatio(t,i)>=this.worstAspectRatio([a].concat(t),i))this.computeDim(e.slice(1),t.concat([a]),i,n);else{var o=this.layoutRow(t,i,n);this.computeDim(e,[],o.dim,o)}},layoutLast:function(e,t,i){e[0].coord=i},layoutRow:function(e,t,i){if(this.layoutHorizontal())return this.layoutV(e,t,i);else return this.layoutH(e,t,i)},orientation:"h",layoutVertical:function(){return this.orientation==="v"},layoutHorizontal:function(){return this.orientation==="h"},layoutChange:function(){this.orientation=this.layoutVertical()?"h":"v"},worstAspectRatio:function(e,t){if(!e||e.length===0)return w;var i=0,n=0,r=w;for(var a=0;a<e.length;a++){var o=e[a].area;i+=o;r=r<o?r:o;n=n>o?n:o}return c.max(t*t*n/(i*i),i*i/(t*t*r))},compute:function(e,t,i){if(!(t.width>=t.height&&this.layoutHorizontal()))this.layoutChange();if(e&&e.length>0){var n={width:t.width,height:t.height-i.text,top:0,left:0};this.layoutChildren(e,n)}},layoutV:function(e,t,i){var n=this._totalArea(e),r=0;t=f(n/t);for(var a=0;a<e.length;a++){var o=f(e[a].area/t);e[a].coord={height:o,width:t,top:i.top+r,left:i.left};r+=o}var s={height:i.height,width:i.width-t,top:i.top,left:i.left+t};s.dim=c.min(s.width,s.height);if(s.dim!=s.height)this.layoutChange();return s},layoutH:function(e,t,i){var n=this._totalArea(e);var r=f(n/t),a=i.top,o=0;for(var s=0;s<e.length;s++){e[s].coord={height:r,width:f(e[s].area/r),top:a,left:i.left+o};o+=e[s].coord.width}var l={height:i.height-r,width:i.width,top:i.top+r,left:i.left};l.dim=c.min(l.width,l.height);if(l.dim!=l.width)this.layoutChange();return l},_totalArea:function(e){var t=0;for(var i=0;i<e.length;i++)t+=e[i].area;return t}}),A=e.extend({init:function(e,t){this.options=a({},this.options,t);this.treeMap=e;this.element=n(e.element);this.offset=0},titleSize:function(e,t){var i=t.children(".k-treemap-title");return i.height()||0},htmlSize:function(e){var t=this._getByUid(e.dataItem.uid);var i={text:0};if(e.children){this._clean(t);var n=this._getText(e);if(n){var r=this._createTitle(e);t.append(r);this._compile(r,e.dataItem);i.text=r.height()}t.append(this._createWrap());this.offset=(u(t)-t.innerWidth())/2}return i},_compile:function(e,t){this.treeMap.angular("compile",function(){return{elements:e,data:[{dataItem:t}]}})},_getByUid:function(e){return this.element.find(".k-treemap-tile["+l.attr("uid")+"='"+e+"']")},render:function(e){var t=this._getByUid(e.dataItem.uid);var i=e.children;if(i){var n=t.find(".k-treemap-wrap");for(var r=0;r<i.length;r++){var a=i[r];var o=this._createLeaf(a);n.append(o);this._compile(o.children(),a.dataItem);this.treeMap.trigger(b,{element:o})}}},createRoot:function(e){var t=this._createLeaf(e);this.element.append(t);this._compile(t.children(),e.dataItem);this.treeMap.trigger(b,{element:t})},_clean:function(e){this.treeMap.angular("cleanup",function(){return{elements:e.children(":not(.k-treemap-wrap)")}});e.css("background-color","");e.removeClass("k-leaf");e.removeClass("k-inverse");e.empty()},_createLeaf:function(e){return this._createTile(e).css("background-color",e.color).addClass("k-leaf").toggleClass("k-inverse",this._tileColorBrightness(e)>180).toggle(e.value!==0).append(n("<div></div>").html(this._getText(e)))},_createTile:function(e){var t=n("<div class='k-treemap-tile'></div>");this.setItemSize(e,t);if(h(e.dataItem)&&h(e.dataItem.uid))t.attr(l.attr("uid"),e.dataItem.uid);return t},_itemCoordinates:function(e){var t={width:e.coord.width,height:e.coord.height,left:e.coord.left,top:e.coord.top};if(t.left&&this.offset)t.width+=this.offset*2;else t.width+=this.offset;if(t.top)t.height+=this.offset*2;else t.height+=this.offset;return t},setItemSize:function(e,t){var i=this._itemCoordinates(e);t.css({width:i.width,height:i.height,left:i.left,top:i.top})},_getText:function(e){var t=e.text;if(this.options.template)t=this._renderTemplate(e);return t},_renderTemplate:function(e){var t=s(this.options.template);return t({dataItem:e.dataItem,text:e.text})},_createTitle:function(e){return n("<div class='k-treemap-title'></div>").append(n("<div></div>").html(this._getText(e)))},_createWrap:function(){return n("<div class='k-treemap-wrap'></div>")},_tileColorBrightness:function(e){return F(e.color)}}),M=e.extend({createRoot:function(e,t,i,n){e.coord={width:t,height:i,top:0,left:0};e.vertical=n},init:function(e){this.vertical=e;this.quotient=e?1:0},compute:function(e,t,i){if(e.length>0){var n=t.width;var r=t.height;if(this.vertical)r-=i.text;else n-=i.text;var a={width:n,height:r,top:0,left:0};this.layoutChildren(e,a)}},layoutChildren:function(e,t){var i=t.width*t.height;var n=0;var r=[];var a;for(a=0;a<e.length;a++){var o=e[a];r[a]=parseFloat(e[a].value);n+=r[a];o.vertical=this.vertical}for(a=0;a<r.length;a++)e[a].area=i*r[a]/n;this.sliceAndDice(e,t)},sliceAndDice:function(e,t){var i=this._totalArea(e);if(e[0].level%2===this.quotient)this.layoutHorizontal(e,t,i);else this.layoutVertical(e,t,i)},layoutHorizontal:function(e,t,i){var n=0;for(var r=0;r<e.length;r++){var a=e[r];var o=a.area/(i/t.width);a.coord={height:t.height,width:o,top:t.top,left:t.left+n};n+=o}},layoutVertical:function(e,t,i){var n=0;for(var r=0;r<e.length;r++){var a=e[r];var o=a.area/(i/t.height);a.coord={height:o,width:t.width,top:t.top+n,left:t.left};n+=o}},_totalArea:function(e){var t=0;for(var i=0;i<e.length;i++)t+=e[i].area;return t}}),D=A.extend({htmlSize:function(e){var t=this._getByUid(e.dataItem.uid);var i={text:0,offset:0};if(e.children){this._clean(t);var n=this._getText(e);if(n){var r=this._createTitle(e);t.append(r);this._compile(r,e.dataItem);if(e.vertical)i.text=r.height();else i.text=r.width()}t.append(this._createWrap());this.offset=(u(t)-t.innerWidth())/2}return i},titleSize:function(e,t){var i;if(e.vertical)i=t.children(".k-treemap-title").height();else i=t.children(".k-treemap-title-vertical").width();return i||0},_createTitle:function(e){var t;if(e.vertical)t=n("<div class='k-treemap-title'></div>");else t=n("<div class='k-treemap-title-vertical'></div>");return t.append(n("<div></div>").html(this._getText(e)))}});function E(e,t){if(t===null)return t;var i=g(e,true);return i(t)}function h(e){return typeof e!==C}function I(e,t,i){var n=O(e);var r=O(t);var a=F(e)-F(t)<0;var o=[];o.push(e);for(var s=0;s<i;s++){var l={r:P(n.r,r.r,s,i,a),g:P(n.g,r.g,s,i,a),b:P(n.b,r.b,s,i,a)};o.push(B(l))}o.push(t);return o}function P(e,t,i,n,r){var a=c.min(c.abs(e),c.abs(t));var o=c.max(c.abs(e),c.abs(t));var s=(o-a)/(n+1);var l=s*(i+1);var u;if(r)u=a+l;else u=o-l;return u}function B(e){return"#"+z(e.r)+z(e.g)+z(e.b)}function O(e){e=e.replace("#","");var t=L(e);return{r:R(t.r),g:R(t.g),b:R(t.b)}}function z(e){var t=c.round(e).toString(16).toUpperCase();if(t.length===1)t="0"+t;return t}function L(e){var t=e.length;var i={};if(t===3){i.r=e[0];i.g=e[1];i.b=e[2]}else{i.r=e.substring(0,2);i.g=e.substring(2,4);i.b=e.substring(4,6)}return i}function R(e){return parseInt(e.toString(16),16)}function F(e){var t=0;if(e){e=O(e);t=c.sqrt(.241*e.r*e.r+.691*e.g*e.g+.068*e.b*e.b)}return t}function f(e){var t=c.pow(10,4);return c.round(e*t)/t}return m.ui.plugin(S),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.angular.min",["kendo.core.min"],function(){var e={id:"angular",name:"AngularJS Directives",category:"framework",description:"Adds Kendo UI for AngularJS directives",depends:["core"],defer:true};return function(w,v,x){"use strict";if(!v||!v.injector)return;var u=v.module("kendo.directives",[]),e=v.injector(["ng"]),g=e.get("$parse"),k=e.get("$timeout"),f,m=e.get("$log");function t(e){var t=k;try{k=function(e){return e()};return e()}finally{k=t}}var C;var p=function(){var s={TreeList:"TreeListDataSource",TreeView:"HierarchicalDataSource",Scheduler:"SchedulerDataSource",PivotGrid:"PivotDataSource",PivotConfigurator:"PivotDataSource",PanelBar:"HierarchicalDataSource",Menu:"$PLAIN",ContextMenu:"$PLAIN"};var l=function(e,t){if(t=="$PLAIN")return e;return kendo.data[t].create(e)};return function(e,n,t,i){var r=s[t]||"DataSource";var a=e.$eval(i);var o=l(a,r);e.$watch(i,function(e){var t=L(n);if(t&&typeof t.setDataSource=="function")if(e!==a&&e!==t.dataSource){var i=l(e,r);t.setDataSource(i);a=e}});return o}}();var y={kDataSource:true,kOptions:true,kRebind:true,kNgModel:true,kNgDelay:true};var b={name:true,title:true,style:true};function h(s,l,u,c,f,e){if(!(l instanceof jQuery))throw new Error("The Kendo UI directives require jQuery to be available before AngularJS. Please include jquery before angular in the document.");var i=u.kNgDelay,a=s.$eval(i);e=e||[];var d=e[0],p=e[1];var h=w(l)[c];if(!h){window.console.error("Could not find: "+c);return null}var t=S(s,l,u,c,h);var v=t.options;if(t.unresolved.length){var o=[];for(var n=0,g=t.unresolved.length;n<g;n++){var m=t.unresolved[n];var _=w.Deferred(function(t){var i=s.$watch(m.path,function(e){if(e!==x){i();t.resolve()}})}).promise();o.push(_)}w.when.apply(null,o).then(r);return}if(i&&!a){var y=s.$root||s;var b=function(){var t=s.$watch(i,function(e){if(e!==x){t();l.removeAttr(u.$attr.kNgDelay);i=null;k(r)}})};if(/^\$(digest|apply)$/.test(y.$$phase))b();else s.$apply(b);return}else return r();function r(){var e;if(u.kRebind)e=w(w(l)[0].cloneNode(true));v=S(s,l,u,c,h).options;if(l.is("select"))(function(e){if(e.length>0){var t=w(e[0]);if(!/\S/.test(t.text())&&/^\?/.test(t.val()))t.remove();for(var i=0;i<e.length;i++)w(e[i]).off("$destroy")}})(l[0].options);var t=h.call(l,C=v).data(c);M(t,s,u,c,f);s.$emit("kendoWidgetCreated",t);var i=I(s,t);if(u.kRebind)B(t,s,l,e,u.kRebind,i,u);if(u.kNgDisabled){var n=u.kNgDisabled;var r=s.$eval(n);if(r)t.enable(!r);T(t,s,l,n)}if(u.kNgReadonly){var a=u.kNgReadonly;var o=s.$eval(a);if(o)t.readonly(o);A(t,s,l,a)}if(u.kNgModel)E(t,s,u.kNgModel);if(d)D(t,s,l,d,p);if(t)P(t,l);return t}}function S(n,c,e,h,t){var f=h.replace(/^kendo/,"");var r=[];var i=e.kOptions||e.options;var a=n.$eval(i);if(i&&a===x)r.push({option:"options",path:i});var o=v.extend({},e.defaultOptions,a);function s(e,t){var i=v.copy(n.$eval(t));if(i===x)r.push({option:e,path:t});else o[e]=i}var l=t.widget.prototype.options;var d=t.widget.prototype.events;w.each(e,function(e,t){if(e==="source"||e==="kDataSource"||e==="kScopeField"||e==="scopeField")return;var i="data"+e.charAt(0).toUpperCase()+e.slice(1);if(e.indexOf("on")===0){var n=e.replace(/^on./,function(e){return e.charAt(2).toLowerCase()});if(d.indexOf(n)>-1)o[n]=t}if(l.hasOwnProperty(i))s(i,t);else if(l.hasOwnProperty(e)&&!b[e])s(e,t);else if(!y[e]){var r=e.match(/^k(On)?([A-Z].*)/);if(r){var a=r[2].charAt(0).toLowerCase()+r[2].slice(1);if(r[1]&&e!="kOnLabel")o[a]=t;else{if(e=="kOnLabel")a="onLabel";s(a,t)}}}});var u=e.kDataSource||e.source;if(u)o.dataSource=p(n,c,f,u);o.$angular=[n];return{options:o,unresolved:r}}function T(i,e,t,n){if(kendo.ui.PanelBar&&i instanceof kendo.ui.PanelBar||kendo.ui.Menu&&i instanceof kendo.ui.Menu){m.warn("k-ng-disabled specified on a widget that does not have the enable() method: "+i.options.name);return}e.$watch(n,function(e,t){if(e!=t)i.enable(!e)})}function A(i,e,t,n){if(typeof i.readonly!="function"){m.warn("k-ng-readonly specified on a widget that does not have the readonly() method: "+i.options.name);return}e.$watch(n,function(e,t){if(e!=t)i.readonly(e)})}function M(e,t,i,n,r){if(i[r]){var a=g(i[r]).assign;if(a)a(t,e);else throw new Error(r+" attribute used but expression in it is not assignable: "+i[n])}}function c(e){if(/checkbox|radio/i.test(e.attr("type")))return e.prop("checked");return e.val()}var i=/^(input|select|textarea)$/i;function d(e){return i.test(e[0].tagName)}function D(i,n,r,a,o){if(!i.value)return;var s;var l=false;if(d(r))s=function(){return c(r)};else s=function(){return i.value()};var e=function(){var t=a.$viewValue;if(t===x)t=a.$modelValue;if(t===x)t=null;l=true;setTimeout(function(){l=false;if(i){var e=n[i.element.attr("k-ng-model")];if(e)t=e;if(i.options.autoBind===false&&!i.listView.bound()){if(t)i.value(t)}else i.value(t)}},0)};a.$render=e;setTimeout(function(){if(a.$render!==e){a.$render=e;a.$render()}});if(d(r))r.on("change",function(){l=true});var t=function(t){return function(){var e;if(l&&!r.is("select"))return;if(t&&o)e=o.$pristine;a.$setViewValue(s());if(t){a.$setPristine();if(e)o.$setPristine()}_(n)}};i.first("change",t(false));i.first("spin",t(false));if(!(kendo.ui.AutoComplete&&i instanceof kendo.ui.AutoComplete))i.first("dataBound",t(true));var u=s();if(!isNaN(a.$viewValue)&&u!=a.$viewValue)if(!a.$isEmpty(a.$viewValue))i.value(a.$viewValue);else if(u!=null&&u!==""&&u!=a.$viewValue)a.$setViewValue(u);a.$setPristine()}function E(i,e,t){if(kendo.ui.DateRangePicker&&i instanceof kendo.ui.DateRangePicker){var n=t.split(",");var r=n[0].trim();var a;E(i._startDateInput,e,r);if(n[1]){a=n[1].trim();E(i._endDateInput,e,a);i.range({start:e[r],end:e[a]})}else i.range({start:e[r],end:null});return}if(typeof i.value!="function"){m.warn("k-ng-model specified on a widget that does not have the value() method: "+i.options.name);return}var c=w(i.element).parents("ng-form, form").first();var o=kendo.getter(c.attr("name"),true)(e);var s=g(t);var h=s.assign;var l=false;var f=kendo.ui.MultiSelect&&i instanceof kendo.ui.MultiSelect||kendo.ui.RangeSlider&&i instanceof kendo.ui.RangeSlider;var u=function(e){return e&&f?e.length:0};var d=u(s(e));i.$angular_setLogicValue(s(e));var p=function(e,t){if(e===x)e=null;if(l||e==t&&u(e)==d)return;d=u(e);i.$angular_setLogicValue(e)};if(f)e.$watchCollection(t,p);else e.$watch(t,p);var v=function(){l=true;if(o&&o.$pristine)o.$setDirty();_(e,function(){h(e,i.$angular_getLogicValue());d=u(s(e))});l=false};i.first("change",v);i.first("spin",v)}function I(e,t){var i=e.$on("$destroy",function(){i();if(t){kendo.destroy(t.element);t=null}});return i}function P(n,e){if(!(window.MutationObserver&&n.wrapper))return;var r=[].slice.call(w(e)[0].classList);var t=new MutationObserver(function(e){i();if(!n)return;e.forEach(function(e){var t=w(n.wrapper)[0];switch(e.attributeName){case"class":var i=[].slice.call(e.target.classList);i.forEach(function(e){if(r.indexOf(e)<0){t.classList.add(e);if(kendo.ui.ComboBox&&n instanceof kendo.ui.ComboBox)n.input[0].classList.add(e)}});r.forEach(function(e){if(i.indexOf(e)<0){t.classList.remove(e);if(kendo.ui.ComboBox&&n instanceof kendo.ui.ComboBox)n.input[0].classList.remove(e)}});r=i;break;case"disabled":if(typeof n.enable=="function"&&!n.element.attr("readonly"))n.enable(!w(e.target).attr("disabled"));break;case"readonly":if(typeof n.readonly=="function"&&!n.element.attr("disabled"))n.readonly(!!w(e.target).attr("readonly"));break}});a()});function i(){t.disconnect()}function a(){t.observe(w(e)[0],{attributes:true})}a();n.first("destroy",i)}function B(s,l,u,c,e,h,f){var d=l.$watch(e,function(e,t){if(!s._muteRebind&&e!==t){d();if(f._cleanUp)f._cleanUp();var i=j[s.options.name];if(i)i.forEach(function(e){var t=l.$eval(f["k"+e]);if(t)c.append(w(t).attr(kendo.toHyphens("k"+e),""))});var n=w(s.wrapper)[0];var r=w(s.element)[0];var a=s.options.name==="Upload";if(a)u=w(r);var o=u.injector().get("$compile");s._destroy();if(h)h();s=null;if(r){if(n)n.parentNode.replaceChild(r,n);w(u).replaceWith(c)}o(c)(l)}},true);_(l)}function n(i,n){return function(e,t){return i.call(n,e,t)}}function r(e,t){this[e]=kendo.stringify(t)}u.factory("directiveFactory",["$compile",function(e){var u;var c=false;f=e;var t=function(s,l){return{restrict:"AC",require:["?ngModel","^?form"],scope:false,controller:["$scope","$attrs","$element",function(e,t){this.template=n(r,t);t._cleanUp=n(function(){this.template=null;t._cleanUp=null},this)}],link:function(e,t,i,n){var r=w(t);var a=s.replace(/([A-Z])/g,"-$1");r.attr(a,r.attr("data-"+a));r[0].removeAttribute("data-"+a);var o=h(e,t,i,s,l,n);if(!o)return;if(u)clearTimeout(u);u=setTimeout(function(){e.$emit("kendoRendered");if(!c){c=true;w("form").each(function(){var e=w(this).controller("form");if(e)e.$setPristine()})}})}}};return{create:t}}]);var l={Editor:"textarea",NumericTextBox:"input",DatePicker:"input",DateTimePicker:"input",TimePicker:"input",AutoComplete:"input",ColorPicker:"input",MaskedTextBox:"input",MultiSelect:"input",Upload:"input",Validator:"form",Button:"button",MobileButton:"a",MobileBackButton:"a",MobileDetailButton:"a",ListView:"ul",MobileListView:"ul",ScrollView:"div",PanelBar:"ul",TreeView:"ul",Menu:"ul",ContextMenu:"ul",ActionSheet:"ul",Switch:"input"};var O=["MobileView","MobileDrawer","MobileLayout","MobileSplitView","MobilePane","MobileModalView"];var z=["MobileApplication","MobileView","MobileModalView","MobileLayout","MobileActionSheet","MobileDrawer","MobileSplitView","MobilePane","MobileScrollView","MobilePopOver"];v.forEach(["MobileNavBar","MobileButton","MobileBackButton","MobileDetailButton","MobileTabStrip","MobileScrollView","MobileScroller"],function(n){z.push(n);n="kendo"+n;u.directive(n,function(){return{restrict:"A",link:function(e,t,i){h(e,t,i,n,n)}}})});function a(e,t){function i(t,i){u.directive(t,["directiveFactory",function(e){return e.create(i,t)}])}var n=t?"Mobile":"";n+=e.fn.options.name;var r=n;var a="kendo"+n.charAt(0)+n.substr(1).toLowerCase();n="kendo"+n;var o=n.replace(/([A-Z])/g,"-$1");if(O.indexOf(n.replace("kendo",""))==-1){var s=n===a?[n]:[n,a];v.forEach(s,function(e){u.directive(e,function(){return{restrict:"E",replace:true,template:function(e,t){var i=l[r]||"div";var n=t.kScopeField||t.scopeField;return"<"+i+" "+o+(n?'="'+n+'"':"")+">"+e.html()+"</"+i+">"}}})})}if(z.indexOf(n.replace("kendo",""))>-1)return;i(n,n);if(a!=n)i(a,n)}function L(e){e=w(e);return kendo.widgetInstance(e,kendo.ui)||kendo.widgetInstance(e,kendo.mobile.ui)||kendo.widgetInstance(e,kendo.dataviz.ui)}function _(e,t){var i=e.$root||e;var n=/^\$(digest|apply)$/.test(i.$$phase);if(t)if(n)t();else i.$apply(t);else if(!n)i.$digest()}function R(e,t){e.$destroy();if(t)w(t).removeData("$scope").removeData("$$kendoScope").removeData("$isolateScope").removeData("$isolateScopeNoTemplate").removeClass("ng-scope")}var s=kendo.htmlEncode;var F=/{{/g;var V=/}}/g;var N="{&#8203;{";var H="}&#8203;}";kendo.htmlEncode=function(e){return s(e).replace(F,N).replace(V,H)};var U=[];function o(e,t,i){if(Array.isArray(e))return v.forEach(e,function(e){o(e,t,i)});if(typeof e=="string"){var n=e.split(".");var r=kendo;while(r&&n.length>0)r=r[n.shift()];if(!r){U.push([e,t,i]);return false}e=r.prototype}var a=e[t];e[t]=function(){var e=this,t=arguments;return i.apply({self:e,next:function(){return a.apply(e,arguments.length>0?arguments:t)}},t)};return true}kendo.onWidgetRegistered(function(e){U=w.grep(U,function(e){return!o.apply(null,e)});a(e.widget,e.prefix=="Mobile")});o(["ui.Widget","mobile.ui.Widget"],"angular",function(i,n){var s=this.self;if(i=="init"){if(!n&&C)n=C;C=null;if(n&&n.$angular){s.$angular_scope=n.$angular[0];s.$angular_init(s.element,n)}return}var l=s.$angular_scope;if(l)t(function(){var r=n(),e=r.elements,a=r.data;if(e.length>0)switch(i){case"cleanup":v.forEach(e,function(e){var t=w(e).data("$$kendoScope");if(t&&t!==l&&t.$$kendoScope)R(t,e)});break;case"compile":var t=s.element.injector();var o=t?t.get("$compile"):f;v.forEach(e,function(e,t){var i;if(r.scopeFrom)i=r.scopeFrom;else{var n=a&&a[t];if(n!==x){i=w.extend(l.$new(),n);i.$$kendoScope=true}else i=l}w(e).data("$$kendoScope",i);o(e)(i)});_(l);break}})});o("ui.Widget","$angular_getLogicValue",function(){return this.self.value()});o("ui.Widget","$angular_setLogicValue",function(e){this.self.value(e)});o("ui.Select","$angular_getLogicValue",function(){var e=this.self.dataItem(),t=this.self.options.dataValueField;if(e)if(this.self.options.valuePrimitive)if(!!t)return e[t];else return e;else return e.toJSON();else return null});o("ui.Select","$angular_setLogicValue",function(e){var t=this.self;var i=t.options;var n=i.dataValueField;var r=i.text||"";if(e===x)e="";if(n&&!i.valuePrimitive&&e){r=e[i.dataTextField]||"";e=e[n||i.dataTextField]}if(t.options.autoBind===false&&!t.listView.bound())if(!r&&e&&i.valuePrimitive)t.value(e);else t._preselect(e,r);else t.value(e)});o("ui.MultiSelect","$angular_getLogicValue",function(){var e=this.self.dataItems().slice(0);var t=this.self.options.dataValueField;if(t&&this.self.options.valuePrimitive)e=w.map(e,function(e){return e[t]});return e});o("ui.MultiSelect","$angular_setLogicValue",function(e){if(e==null)e=[];var t=this.self;var i=t.options;var n=i.dataValueField;var r=e;if(n&&!i.valuePrimitive)e=w.map(e,function(e){return e[n]});if(i.autoBind===false&&!i.valuePrimitive&&!t.listView.bound())t._preselect(r,e);else t.value(e)});o("ui.Widget","$angular_init",function(e,t){var i=this.self;if(t&&!Array.isArray(t)){var n=i.$angular_scope;for(var r=i.events.length;--r>=0;){var a=i.events[r];var o=t[a];if(o&&typeof o=="string")t[a]=i.$angular_makeEventHandler(a,n,o)}}});o("ui.Widget","$angular_makeEventHandler",function(e,t,i){i=g(i);return function(e){_(t,function(){i(t,{kendoEvent:e})})}});o(["ui.Grid","ui.ListView","ui.TreeView","ui.PanelBar"],"$angular_makeEventHandler",function(e,d,p){if(e!="change")return this.next();p=g(p);return function(c){var e=c.sender;var t=e.options;var i,n,r={kendoEvent:c},a,o,s,l;if(v.isString(t.selectable)){i=t.selectable.indexOf("cell")!==-1;n=t.selectable.indexOf("multiple")!==-1}if(e._checkBoxSelection)n=true;a=r.selected=this.select();o=r.data=[];s=r.columns=[];for(var u=0;u<a.length;u++){var h=i?a[u].parentNode:a[u];var f=e.dataItem(h);if(i){if(v.element.inArray(f,o)<0)o.push(f);l=v.element(a[u]).index();if(v.element.inArray(l,s)<0)s.push(l)}else o.push(f)}if(!n){r.dataItem=r.data=o[0];r.angularDataItem=kendo.proxyModelSetters(r.dataItem);r.selected=a[0]}_(d,function(){p(d,r)})}});o("ui.Grid","$angular_init",function(e,t){this.next();if(t.columns){var i=w.extend({},kendo.Template,t.templateSettings);v.forEach(t.columns,function(e){if(e.field&&!e.template&&!e.format&&!e.values&&(e.encoded===x||e.encoded))e.template="<span ng-bind='"+kendo.expr(e.field,"dataItem")+"'>#: "+kendo.expr(e.field,i.paramName)+"#</span>"})}});{o("mobile.ui.ButtonGroup","value",function(e){var t=this.self;if(e!=null){t.select(t.element.children("li.km-button").eq(e));t.trigger("change");t.trigger("select",{index:t.selectedIndex})}return t.selectedIndex});o("mobile.ui.ButtonGroup","_select",function(){this.next();this.self.trigger("change")})}u.directive("kendoMobileApplication",function(){return{terminal:true,link:function(e,t,i){h(e,t,i,"kendoMobileApplication","kendoMobileApplication")}}}).directive("kendoMobileView",function(){return{scope:true,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions;i._instance=h(e,t,i,"kendoMobileView","kendoMobileView")},post:function(e,t,i){i._instance._layout();i._instance._scroller()}}}}).directive("kendoMobileDrawer",function(){return{scope:true,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions;i._instance=h(e,t,i,"kendoMobileDrawer","kendoMobileDrawer")},post:function(e,t,i){i._instance._layout();i._instance._scroller()}}}}).directive("kendoMobileModalView",function(){return{scope:true,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions;i._instance=h(e,t,i,"kendoMobileModalView","kendoMobileModalView")},post:function(e,t,i){i._instance._layout();i._instance._scroller()}}}}).directive("kendoMobileSplitView",function(){return{terminal:true,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions;i._instance=h(e,t,i,"kendoMobileSplitView","kendoMobileSplitView")},post:function(e,t,i){i._instance._layout()}}}}).directive("kendoMobilePane",function(){return{terminal:true,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions;h(e,t,i,"kendoMobilePane","kendoMobilePane")}}}}).directive("kendoMobileLayout",function(){return{link:{pre:function(e,t,i){h(e,t,i,"kendoMobileLayout","kendoMobileLayout")}}}}).directive("kendoMobileActionSheet",function(){return{restrict:"A",link:function(e,t,i){t.find("a[k-action]").each(function(){w(this).attr("data-"+kendo.ns+"action",w(this).attr("k-action"))});h(e,t,i,"kendoMobileActionSheet","kendoMobileActionSheet")}}}).directive("kendoMobilePopOver",function(){return{terminal:true,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions;h(e,t,i,"kendoMobilePopOver","kendoMobilePopOver")}}}}).directive("kendoViewTitle",function(){return{restrict:"E",replace:true,template:function(e){return"<span data-"+kendo.ns+"role='view-title'>"+e.html()+"</span>"}}}).directive("kendoMobileHeader",function(){return{restrict:"E",link:function(e,t){t.addClass("km-header").attr("data-role","header")}}}).directive("kendoMobileFooter",function(){return{restrict:"E",link:function(e,t){t.addClass("km-footer").attr("data-role","footer")}}}).directive("kendoMobileScrollViewPage",function(){return{restrict:"E",replace:true,template:function(e){return"<div data-"+kendo.ns+"role='page'>"+e.html()+"</div>"}}});v.forEach(["align","icon","rel","transition","actionsheetContext"],function(n){var r="k"+n.slice(0,1).toUpperCase()+n.slice(1);u.directive(r,function(){return{restrict:"A",priority:2,link:function(e,t,i){t.attr(kendo.attr(kendo.toHyphens(n)),e.$eval(i[r]))}}})});var j={TreeMap:["Template"],MobileListView:["HeaderTemplate","Template"],MobileScrollView:["EmptyTemplate","Template"],Grid:["AltRowTemplate","DetailTemplate","RowTemplate"],ListView:["EditTemplate","Template","AltTemplate"],Pager:["SelectTemplate","LinkTemplate"],PivotGrid:["ColumnHeaderTemplate","DataCellTemplate","RowHeaderTemplate"],Scheduler:["AllDayEventTemplate","DateHeaderTemplate","EventTemplate","MajorTimeHeaderTemplate","MinorTimeHeaderTemplate"],ScrollView:["Template"],PanelBar:["Template"],TreeView:["Template"],Validator:["ErrorTemplate"]};(function(){var i={};v.forEach(j,function(e,t){v.forEach(e,function(e){if(!i[e])i[e]=[];i[e].push("?^^kendo"+t)})});v.forEach(i,function(o,e){var s="k"+e;var l=kendo.toHyphens(s);u.directive(s,function(){return{restrict:"A",require:o,terminal:true,compile:function(e,t){if(t[s]!=="")return;e.removeAttr(l);var a=e[0].outerHTML;return function(e,t,i,n){var r;while(!r&&n.length)r=n.shift();if(!r)m.warn(l+" without a matching parent widget found. It can be one of the following: "+o.join(", "));else{r.template(s,a);t.remove()}}}}})})})()}(window.kendo.jQuery,window.angular),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.dataviz.min",["kendo.core.min","kendo.fx.min","kendo.router.min","kendo.view.min","kendo.data.odata.min","kendo.data.xml.min","kendo.data.min","kendo.data.signalr.min","kendo.binder.min","kendo.userevents.min","kendo.draganddrop.min","kendo.mobile.scroller.min","kendo.popup.min","kendo.tooltip.min","kendo.drawing.min","kendo.dataviz.core.min","kendo.dataviz.themes.min","kendo.dataviz.chart.min","kendo.dataviz.gauge.min","kendo.dataviz.barcode.min","kendo.dataviz.qrcode.min","kendo.dataviz.stock.min","kendo.dataviz.sparkline.min","kendo.dataviz.map.min","kendo.dataviz.diagram.min","kendo.dataviz.treemap.min","kendo.angular.min"],function(){"bundle all";return window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()});
//# sourceMappingURL=kendo.dataviz.min.js.map
