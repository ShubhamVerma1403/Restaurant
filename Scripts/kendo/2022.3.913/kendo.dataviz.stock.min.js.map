{"version":3,"file":"kendo.dataviz.stock.min.js","sources":["kendo.dataviz.stock.js"],"sourcesContent":["/***********************************************************************\n * WARNING: this file is auto-generated.  If you change it directly,\n * your modifications will eventually be lost.  The source code is in\n * `kendo-charts` repository, you should make your changes there and\n * run `src-modules/sync.sh` in this repository.\n */\n(function(f, define) {\n    define('dataviz/stock/kendo-stock-chart',[\n        \"kendo.dataviz.chart\"\n    ], f);\n})(function() {\n\n(function() {\n/* eslint-disable space-before-blocks, space-before-function-paren */\n\nwindow.kendo.dataviz = window.kendo.dataviz || {};\nvar dataviz = kendo.dataviz;\nvar elementStyles = dataviz.elementStyles;\nvar deepExtend = dataviz.deepExtend;\nvar toTime = dataviz.toTime;\nvar datavizConstants = dataviz.constants;\nvar Chart = dataviz.Chart;\nvar drawing = kendo.drawing;\n\nvar FadeOutAnimation = drawing.Animation.extend({\n    setup: function() {\n        this._initialOpacity = parseFloat(elementStyles(this.element, 'opacity').opacity);\n    },\n\n    step: function(pos) {\n        elementStyles(this.element, {\n            opacity: String(dataviz.interpolateValue(this._initialOpacity, 0, pos))\n        });\n    },\n\n    abort: function() {\n        drawing.Animation.fn.abort.call(this);\n        elementStyles(this.element, {\n            display: 'none',\n            opacity: String(this._initialOpacity)\n        });\n    },\n\n    cancel: function() {\n        drawing.Animation.fn.abort.call(this);\n        elementStyles(this.element, {\n            opacity: String(this._initialOpacity)\n        });\n    }\n});\n\nfunction createDiv(className, style) {\n    var div = document.createElement(\"div\");\n    div.className = className;\n    if (style) {\n        div.style.cssText = style;\n    }\n\n    return div;\n}\n\nvar NavigatorHint = dataviz.Class.extend({\n    init: function(container, chartService, options) {\n\n        this.options = deepExtend({}, this.options, options);\n        this.container = container;\n        this.chartService = chartService;\n\n        var padding = elementStyles(container, [ \"paddingLeft\", \"paddingTop\" ]);\n        this.chartPadding = {\n            top: padding.paddingTop,\n            left: padding.paddingLeft\n        };\n\n        this.createElements();\n        container.appendChild(this.element);\n    },\n\n    createElements: function() {\n        var element = this.element = createDiv('k-navigator-hint', 'display: none; position: absolute; top: 1px; left: 1px;');\n        var tooltip = this.tooltip = createDiv('k-tooltip k-chart-tooltip');\n        var scroll = this.scroll = createDiv('k-scroll');\n\n        tooltip.innerHTML = '&nbsp;';\n\n        element.appendChild(tooltip);\n        element.appendChild(scroll);\n    },\n\n    show: function(from, to, bbox) {\n        var ref = this;\n        var element = ref.element;\n        var options = ref.options;\n        var scroll = ref.scroll;\n        var tooltip = ref.tooltip;\n        var middle = dataviz.toDate(toTime(from) + toTime(to - from) / 2);\n        var scrollWidth = bbox.width() * 0.4;\n        var minPos = bbox.center().x - scrollWidth;\n        var maxPos = bbox.center().x;\n        var posRange = maxPos - minPos;\n        var range = options.max - options.min;\n        var scale = posRange / range;\n        var offset = middle - options.min;\n        var text = this.chartService.intl.format(options.format, from, to);\n        var template = dataviz.getTemplate(options);\n\n        this.clearHideTimeout();\n\n        if (!this._visible) {\n            elementStyles(element, {\n                visibility: 'hidden',\n                display: 'block'\n            });\n            this._visible = true;\n        }\n\n        if (template) {\n            text = template({\n                from: from,\n                to: to\n            });\n        }\n\n        tooltip.innerHTML = text;\n        elementStyles(tooltip, {\n            left: bbox.center().x - tooltip.offsetWidth / 2,\n            top: bbox.y1\n        });\n\n        var tooltipStyle = elementStyles(tooltip, [ 'marginTop', 'borderTopWidth', 'height' ]);\n\n        elementStyles(scroll, {\n            width: scrollWidth,\n            left: minPos + offset * scale,\n            top: bbox.y1 + tooltipStyle.marginTop + tooltipStyle.borderTopWidth + tooltipStyle.height / 2\n        });\n\n        elementStyles(element, {\n            visibility: 'visible'\n        });\n    },\n\n    clearHideTimeout: function() {\n        if (this._hideTimeout) {\n            clearTimeout(this._hideTimeout);\n        }\n\n        if (this._hideAnimation) {\n            this._hideAnimation.cancel();\n        }\n    },\n\n    hide: function() {\n        var this$1 = this;\n\n        this.clearHideTimeout();\n\n        this._hideTimeout = setTimeout(function () {\n            this$1._visible = false;\n            this$1._hideAnimation = new FadeOutAnimation(this$1.element);\n            this$1._hideAnimation.setup();\n            this$1._hideAnimation.play();\n        }, this.options.hideDelay);\n    },\n\n    destroy: function() {\n        this.clearHideTimeout();\n        if (this.container) {\n            this.container.removeChild(this.element);\n        }\n        delete this.container;\n        delete this.chartService;\n        delete this.element;\n        delete this.tooltip;\n        delete this.scroll;\n    }\n});\n\ndataviz.setDefaultOptions(NavigatorHint, {\n    format: \"{0:d} - {1:d}\",\n    hideDelay: 500\n});\n\nvar NAVIGATOR_PANE = \"_navigator\";\nvar NAVIGATOR_AXIS = NAVIGATOR_PANE;\n\nvar constants = {\n\tNAVIGATOR_AXIS: NAVIGATOR_AXIS,\n\tNAVIGATOR_PANE: NAVIGATOR_PANE\n};\n\nvar ZOOM_ACCELERATION = 3;\n\nvar Navigator = dataviz.Class.extend({\n    init: function(chart) {\n\n        this.chart = chart;\n        var options = this.options = deepExtend({}, this.options, chart.options.navigator);\n        var select = options.select;\n        if (select) {\n            select.from = this.parseDate(select.from);\n            select.to = this.parseDate(select.to);\n        }\n\n        if (!dataviz.defined(options.hint.visible)) {\n            options.hint.visible = options.visible;\n        }\n\n        var obj;\n        this.chartObserver = new dataviz.InstanceObserver(this, ( obj = {}, obj[datavizConstants.DRAG] = '_drag', obj[datavizConstants.DRAG_END] = '_dragEnd', obj[datavizConstants.ZOOM] = '_zoom', obj[datavizConstants.ZOOM_END] = '_zoomEnd', obj ));\n        chart.addObserver(this.chartObserver);\n    },\n\n    parseDate: function(value) {\n        return dataviz.parseDate(this.chart.chartService.intl, value);\n    },\n\n    clean: function() {\n        if (this.selection) {\n            this.selection.destroy();\n            this.selection = null;\n        }\n\n        if (this.hint) {\n            this.hint.destroy();\n            this.hint = null;\n        }\n    },\n\n    destroy: function() {\n        if (this.chart) {\n            this.chart.removeObserver(this.chartObserver);\n            delete this.chart;\n        }\n\n        this.clean();\n    },\n\n    redraw: function() {\n        this._redrawSelf();\n        this.initSelection();\n    },\n\n    initSelection: function() {\n        var ref = this;\n        var chart = ref.chart;\n        var options = ref.options;\n        var axis = this.mainAxis();\n        var ref$1 = axis.roundedRange();\n        var min = ref$1.min;\n        var max = ref$1.max;\n        var ref$2 = options.select;\n        var from = ref$2.from;\n        var to = ref$2.to;\n        var mousewheel = ref$2.mousewheel;\n        var axisClone = clone(axis);\n\n        if (axis.categoriesCount() === 0) {\n            return;\n        }\n\n        this.clean();\n\n        // \"Freeze\" the selection axis position until the next redraw\n        axisClone.box = axis.box;\n\n        this.selection = new dataviz.Selection(chart, axisClone, {\n            min: min,\n            max: max,\n            from: from || min,\n            to: to || max,\n            mousewheel: dataviz.valueOrDefault(mousewheel, { zoom: \"left\" }),\n            visible: options.visible\n        }, new dataviz.InstanceObserver(this, {\n            selectStart: '_selectStart',\n            select: '_select',\n            selectEnd: '_selectEnd'\n        }));\n\n        if (options.hint.visible) {\n            this.hint = new NavigatorHint(chart.element, chart.chartService, {\n                min: min,\n                max: max,\n                template: dataviz.getTemplate(options.hint),\n                format: options.hint.format\n            });\n        }\n    },\n\n    setRange: function() {\n        var plotArea = this.chart._createPlotArea(true);\n        var axis = plotArea.namedCategoryAxes[NAVIGATOR_AXIS];\n\n        var ref = axis.roundedRange();\n        var min = ref.min;\n        var max = ref.max;\n\n        var select = this.options.select || {};\n        var from = select.from || min;\n        if (from < min) {\n            from = min;\n        }\n\n        var to = select.to || max;\n        if (to > max) {\n            to = max;\n        }\n\n        this.options.select = deepExtend({}, select, {\n            from: from,\n            to: to\n        });\n\n        this.filterAxes();\n    },\n\n    _redrawSelf: function(silent) {\n        var plotArea = this.chart._plotArea;\n\n        if (plotArea) {\n            plotArea.redraw(dataviz.last(plotArea.panes), silent);\n        }\n    },\n\n    redrawSlaves: function() {\n        var chart = this.chart;\n        var plotArea = chart._plotArea;\n        var slavePanes = plotArea.panes.slice(0, -1);\n\n        // Update the original series and categoryAxis before partial refresh.\n        plotArea.srcSeries = chart.options.series;\n        plotArea.options.categoryAxis = chart.options.categoryAxis;\n        plotArea.clearSeriesPointsCache();\n\n        plotArea.redraw(slavePanes);\n    },\n\n    _drag: function(e) {\n        var ref = this;\n        var chart = ref.chart;\n        var selection = ref.selection;\n        var coords = chart._eventCoordinates(e.originalEvent);\n        var navigatorAxis = this.mainAxis();\n        var naviRange = navigatorAxis.roundedRange();\n        var inNavigator = navigatorAxis.pane.box.containsPoint(coords);\n        var axis = chart._plotArea.categoryAxis;\n        var range = e.axisRanges[axis.options.name];\n        var select = this.options.select;\n        var duration;\n\n        if (!range || inNavigator || !selection) {\n            return;\n        }\n\n        if (select.from && select.to) {\n            duration = toTime(select.to) - toTime(select.from);\n        } else {\n            duration = toTime(selection.options.to) - toTime(selection.options.from);\n        }\n\n        var from = dataviz.toDate(dataviz.limitValue(\n            toTime(range.min),\n            naviRange.min, toTime(naviRange.max) - duration\n        ));\n\n        var to = dataviz.toDate(dataviz.limitValue(\n            toTime(from) + duration,\n            toTime(naviRange.min) + duration, naviRange.max\n        ));\n\n        this.options.select = { from: from, to: to };\n\n        if (this.options.liveDrag) {\n            this.filterAxes();\n            this.redrawSlaves();\n        }\n\n        selection.set(from, to);\n\n        this.showHint(from, to);\n    },\n\n    _dragEnd: function() {\n        this.filterAxes();\n        this.filter();\n        this.redrawSlaves();\n\n        if (this.hint) {\n            this.hint.hide();\n        }\n    },\n\n    readSelection: function() {\n        var ref = this;\n        var ref_selection_options = ref.selection.options;\n        var from = ref_selection_options.from;\n        var to = ref_selection_options.to;\n        var select = ref.options.select;\n\n        select.from = from;\n        select.to = to;\n    },\n\n    filterAxes: function() {\n        var ref = this;\n        var select = ref.options.select; if (select === void 0) { select = { }; }\n        var chart = ref.chart;\n        var allAxes = chart.options.categoryAxis;\n        var from = select.from;\n        var to = select.to;\n\n        for (var idx = 0; idx < allAxes.length; idx++) {\n            var axis = allAxes[idx];\n            if (axis.pane !== NAVIGATOR_PANE) {\n                axis.min = from;\n                axis.max = to;\n            }\n        }\n    },\n\n    filter: function() {\n        var ref = this;\n        var chart = ref.chart;\n        var select = ref.options.select;\n\n        if (!chart.requiresHandlers([ \"navigatorFilter\" ])) {\n            return;\n        }\n\n        var mainAxis = this.mainAxis();\n        var args = {\n            from: select.from,\n            to: select.to\n        };\n\n        if (mainAxis.options.type !== 'category') {\n            var axisOptions = new dataviz.DateCategoryAxis(deepExtend({\n                baseUnit: \"fit\"\n            }, chart.options.categoryAxis[0], {\n                categories: [ select.from, select.to ]\n            }), chart.chartService).options;\n\n            args.from = dataviz.addDuration(axisOptions.min, -axisOptions.baseUnitStep, axisOptions.baseUnit);\n            args.to = dataviz.addDuration(axisOptions.max, axisOptions.baseUnitStep, axisOptions.baseUnit);\n        }\n\n        this.chart.trigger(\"navigatorFilter\", args);\n    },\n\n    _zoom: function(e) {\n        var ref = this;\n        var axis = ref.chart._plotArea.categoryAxis;\n        var selection = ref.selection;\n        var ref_options = ref.options;\n        var select = ref_options.select;\n        var liveDrag = ref_options.liveDrag;\n        var mainAxis = this.mainAxis();\n        var delta = e.delta;\n\n        if (!selection) {\n            return;\n        }\n\n        var fromIx = mainAxis.categoryIndex(selection.options.from);\n        var toIx = mainAxis.categoryIndex(selection.options.to);\n        var coords = this.chart._eventCoordinates(e.originalEvent);\n\n        e.originalEvent.preventDefault();\n\n        if (Math.abs(delta) > 1) {\n            delta *= ZOOM_ACCELERATION;\n        }\n\n        if (toIx - fromIx > 1) {\n            selection.zoom(delta, coords);\n            this.readSelection();\n        } else {\n            axis.options.min = select.from;\n            select.from = axis.scaleRange(-e.delta * this.chart._mousewheelZoomRate(), coords).min;\n        }\n\n        if (liveDrag) {\n            this.filterAxes();\n            this.redrawSlaves();\n        }\n\n        selection.set(select.from, select.to);\n\n        this.showHint(this.options.select.from, this.options.select.to);\n    },\n\n    _zoomEnd: function(e) {\n        this._dragEnd(e);\n    },\n\n    showHint: function(from, to) {\n        var plotArea = this.chart._plotArea;\n\n        if (this.hint) {\n            this.hint.show(from, to, plotArea.backgroundBox());\n        }\n    },\n\n    _selectStart: function(e) {\n        return this.chart._selectStart(e);\n    },\n\n    _select: function(e) {\n        this.showHint(e.from, e.to);\n\n        return this.chart._select(e);\n    },\n\n    _selectEnd: function(e) {\n        if (this.hint) {\n            this.hint.hide();\n        }\n\n        this.readSelection();\n        this.filterAxes();\n        this.filter();\n        this.redrawSlaves();\n\n        return this.chart._selectEnd(e);\n    },\n\n    mainAxis: function() {\n        var plotArea = this.chart._plotArea;\n\n        if (plotArea) {\n            return plotArea.namedCategoryAxes[NAVIGATOR_AXIS];\n        }\n    },\n\n    select: function(from, to) {\n        var select = this.options.select;\n\n        if (from && to) {\n            select.from = this.parseDate(from);\n            select.to = this.parseDate(to);\n\n            this.filterAxes();\n            this.filter();\n            this.redrawSlaves();\n\n            this.selection.set(from, to);\n        }\n\n        return {\n            from: select.from,\n            to: select.to\n        };\n    }\n});\n\nNavigator.setup = function(options, themeOptions) {\n    if (options === void 0) { options = {}; }\n    if (themeOptions === void 0) { themeOptions = {}; }\n\n    if (options.__navi) {\n        return;\n    }\n    options.__navi = true;\n\n    var naviOptions = deepExtend({}, themeOptions.navigator, options.navigator);\n    var panes = options.panes = [].concat(options.panes);\n    var paneOptions = deepExtend({}, naviOptions.pane, { name: NAVIGATOR_PANE });\n\n    if (!naviOptions.visible) {\n        paneOptions.visible = false;\n        paneOptions.height = 0.1;\n    }\n\n    panes.push(paneOptions);\n\n    Navigator.attachAxes(options, naviOptions);\n    Navigator.attachSeries(options, naviOptions, themeOptions);\n};\n\nNavigator.attachAxes = function(options, naviOptions) {\n    var series = naviOptions.series || [];\n    var categoryAxes = options.categoryAxis = [].concat(options.categoryAxis);\n    var valueAxes = options.valueAxis = [].concat(options.valueAxis);\n\n    var equallySpacedSeries = dataviz.filterSeriesByType(series, datavizConstants.EQUALLY_SPACED_SERIES);\n    var justifyAxis = equallySpacedSeries.length === 0;\n\n    var base = deepExtend({\n        type: \"date\",\n        pane: NAVIGATOR_PANE,\n        roundToBaseUnit: !justifyAxis,\n        justified: justifyAxis,\n        _collapse: false,\n        majorTicks: { visible: true },\n        tooltip: { visible: false },\n        labels: { step: 1 },\n        autoBind: naviOptions.autoBindElements,\n        autoBaseUnitSteps: {\n            minutes: [ 1 ],\n            hours: [ 1, 2 ],\n            days: [ 1, 2 ],\n            weeks: [],\n            months: [ 1 ],\n            years: [ 1 ]\n        }\n    });\n    var user = naviOptions.categoryAxis;\n\n    categoryAxes.push(\n        deepExtend({}, base, {\n            maxDateGroups: 200\n        }, user, {\n            name: NAVIGATOR_AXIS,\n            title: null,\n            baseUnit: \"fit\",\n            baseUnitStep: \"auto\",\n            labels: { visible: false },\n            majorTicks: { visible: false }\n        }), deepExtend({}, base, user, {\n            name: NAVIGATOR_AXIS + \"_labels\",\n            maxDateGroups: 20,\n            baseUnitStep: \"auto\",\n            labels: { position: \"\" },\n            plotBands: [],\n            autoBaseUnitSteps: {\n                minutes: []\n            },\n            _overlap: true\n        }), deepExtend({}, base, user, {\n            name: NAVIGATOR_AXIS + \"_ticks\",\n            maxDateGroups: 200,\n            majorTicks: {\n                width: 0.5\n            },\n            plotBands: [],\n            title: null,\n            labels: { visible: false, mirror: true },\n            _overlap: true\n        })\n    );\n\n    valueAxes.push(deepExtend({\n        name: NAVIGATOR_AXIS,\n        pane: NAVIGATOR_PANE,\n        majorGridLines: {\n            visible: false\n        },\n        visible: false\n    }, naviOptions.valueAxis));\n};\n\nNavigator.attachSeries = function(options, naviOptions, themeOptions) {\n    var series = options.series = options.series || [];\n    var navigatorSeries = [].concat(naviOptions.series || []);\n    var seriesColors = themeOptions.seriesColors;\n    var defaults = naviOptions.seriesDefaults;\n\n    for (var idx = 0; idx < navigatorSeries.length; idx++) {\n        series.push(\n            deepExtend({\n                color: seriesColors[idx % seriesColors.length],\n                categoryField: naviOptions.dateField,\n                visibleInLegend: false,\n                tooltip: {\n                    visible: false\n                }\n            }, defaults, navigatorSeries[idx], {\n                axis: NAVIGATOR_AXIS,\n                categoryAxis: NAVIGATOR_AXIS,\n                autoBind: naviOptions.autoBindElements\n            })\n        );\n    }\n};\n\nfunction ClonedObject() { }\nfunction clone(obj) {\n    ClonedObject.prototype = obj;\n    return new ClonedObject();\n}\n\nvar AUTO_CATEGORY_WIDTH = 28;\n\nvar StockChart = Chart.extend({\n    applyDefaults: function(options, themeOptions) {\n        var width = dataviz.elementSize(this.element).width || datavizConstants.DEFAULT_WIDTH;\n        var theme = themeOptions;\n\n        var stockDefaults = {\n            seriesDefaults: {\n                categoryField: options.dateField\n            },\n            axisDefaults: {\n                categoryAxis: {\n                    name: \"default\",\n                    majorGridLines: {\n                        visible: false\n                    },\n                    labels: {\n                        step: 2\n                    },\n                    majorTicks: {\n                        visible: false\n                    },\n                    maxDateGroups: Math.floor(width / AUTO_CATEGORY_WIDTH)\n                }\n            }\n        };\n\n        if (theme) {\n            theme = deepExtend({}, theme, stockDefaults);\n        }\n\n        Navigator.setup(options, theme);\n\n        Chart.fn.applyDefaults.call(this, options, theme);\n    },\n\n    _setElementClass: function(element) {\n        dataviz.addClass(element, 'k-chart k-stockchart');\n    },\n\n    setOptions: function(options) {\n        this.destroyNavigator();\n        Chart.fn.setOptions.call(this, options);\n    },\n\n    noTransitionsRedraw: function() {\n        var transitions = this.options.transitions;\n\n        this.options.transitions = false;\n        this._fullRedraw();\n        this.options.transitions = transitions;\n    },\n\n    _resize: function() {\n        this.noTransitionsRedraw();\n    },\n\n    _redraw: function() {\n        var navigator = this.navigator;\n\n        if (!this._dirty() && navigator && navigator.options.partialRedraw) {\n            navigator.redrawSlaves();\n        } else {\n            this._fullRedraw();\n        }\n    },\n\n    _dirty: function() {\n        var options = this.options;\n        var series = [].concat(options.series, options.navigator.series);\n        var seriesCount = dataviz.grep(series, function(s) { return s && s.visible; }).length;\n        var dirty = this._seriesCount !== seriesCount;\n        this._seriesCount = seriesCount;\n\n        return dirty;\n    },\n\n    _fullRedraw: function() {\n        var navigator = this.navigator;\n\n        if (!navigator) {\n            navigator = this.navigator = new Navigator(this);\n            this.trigger(\"navigatorCreated\", { navigator: navigator });\n        }\n\n        navigator.clean();\n        navigator.setRange();\n\n        Chart.fn._redraw.call(this);\n\n        navigator.initSelection();\n    },\n\n    _trackSharedTooltip: function(coords) {\n        var plotArea = this._plotArea;\n        var pane = plotArea.paneByPoint(coords);\n\n        if (pane && pane.options.name === NAVIGATOR_PANE) {\n            this._unsetActivePoint();\n        } else {\n            Chart.fn._trackSharedTooltip.call(this, coords);\n        }\n    },\n\n    bindCategories: function() {\n        Chart.fn.bindCategories.call(this);\n        this.copyNavigatorCategories();\n    },\n\n    copyNavigatorCategories: function() {\n        var definitions = [].concat(this.options.categoryAxis);\n        var categories;\n\n        for (var axisIx = 0; axisIx < definitions.length; axisIx++) {\n            var axis = definitions[axisIx];\n            if (axis.name === NAVIGATOR_AXIS) {\n                categories = axis.categories;\n            } else if (categories && axis.pane === NAVIGATOR_PANE) {\n                axis.categories = categories;\n            }\n        }\n    },\n\n    destroyNavigator: function() {\n        if (this.navigator) {\n            this.navigator.destroy();\n            this.navigator = null;\n        }\n    },\n\n    destroy: function() {\n        this.destroyNavigator();\n        Chart.fn.destroy.call(this);\n    },\n\n    _stopChartHandlers: function(e) {\n        var coords = this._eventCoordinates(e);\n        var pane = this._plotArea.paneByPoint(coords);\n\n        return Chart.fn._stopChartHandlers.call(this, e) || (pane && pane.options.name === NAVIGATOR_PANE);\n    },\n\n    _toggleDragZoomEvents: function() {\n        if (!this._dragZoomEnabled) {\n            this.element.style.touchAction = \"none\";\n\n            this._dragZoomEnabled = true;\n        }\n    }\n});\n\ndataviz.setDefaultOptions(StockChart, {\n    dateField: \"date\",\n    axisDefaults: {\n        categoryAxis: {\n            type: \"date\",\n            baseUnit: \"fit\",\n            justified: true\n        },\n        valueAxis: {\n            narrowRange: true,\n            labels: {\n                format: \"C\"\n            }\n        }\n    },\n    navigator: {\n        select: {},\n        seriesDefaults: {\n            markers: {\n                visible: false\n            },\n            tooltip: {\n                visible: true\n            },\n            line: {\n                width: 2\n            }\n        },\n        hint: {},\n        visible: true\n    },\n    tooltip: {\n        visible: true\n    },\n    legend: {\n        visible: false\n    }\n});\n\nkendo.deepExtend(kendo.dataviz, {\n    constants: constants,\n    Navigator: Navigator,\n    NavigatorHint: NavigatorHint,\n    StockChart: StockChart\n});\n\n})();\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n(function(f, define) {\n    define('dataviz/stock/stock-chart',[\n        \"./kendo-stock-chart\"\n    ], f);\n})(function() {\n\n(function($) {\n\n    var kendo = window.kendo;\n    var dataviz = kendo.dataviz;\n    var ChartInstanceObserver = dataviz.ChartInstanceObserver;\n    var Chart = dataviz.ui.Chart;\n    var KendoStockChart = dataviz.StockChart;\n    var constants = dataviz.constants;\n    var NAVIGATOR_AXIS = constants.NAVIGATOR_AXIS;\n    var NAVIGATOR_PANE = constants.NAVIGATOR_PANE;\n    var deepExtend = kendo.deepExtend;\n    var defined = dataviz.defined;\n\n    var CHANGE = \"change\";\n\n    var StockInstanceObserver = ChartInstanceObserver.extend({\n        handlerMap: {\n            navigatorFilter: '_onNavigatorFilter',\n            navigatorCreated: '_onNavigatorCreated'\n        }\n    });\n\n    var StockChart = Chart.extend({\n\n        options: {\n            name: \"StockChart\",\n            dateField: \"date\",\n            axisDefaults: {\n                categoryAxis: {\n                    type: \"date\",\n                    baseUnit: \"fit\",\n                    justified: true\n                },\n                valueAxis: {\n                    narrowRange: true,\n                    labels: {\n                        format: \"C\"\n                    }\n                }\n            },\n            navigator: {\n                select: {},\n                seriesDefaults: {\n                    markers: {\n                        visible: false\n                    },\n                    tooltip: {\n                        visible: true,\n                        template: \"#= kendo.toString(category, 'd') #\"\n                    },\n                    line: {\n                        width: 2\n                    }\n                },\n                hint: {},\n                visible: true\n            },\n            tooltip: {\n                visible: true\n            },\n            legend: {\n                visible: false\n            },\n            persistSeriesVisibility: true\n        },\n\n        _createChart: function(options, themeOptions) {\n            this._initNavigatorOptions(options);\n            this._instance = new KendoStockChart(this.element[0], options, themeOptions, {\n                observer: new StockInstanceObserver(this),\n                sender: this,\n                rtl: this._isRtl()\n            });\n        },\n\n        _initNavigatorOptions: function(options) {\n            var navigatorOptions = options.navigator || {};\n            var support = kendo.support;\n            var isTouch = support.touch;\n            var isFirefox = support.browser.mozilla;\n\n            deepExtend(navigatorOptions, {\n                autoBindElements: !navigatorOptions.dataSource,\n                partialRedraw: navigatorOptions.dataSource,\n                liveDrag: !isTouch && !isFirefox\n            });\n        },\n\n        _initDataSource: function(userOptions) {\n            var options = userOptions || {},\n                dataSource = options.dataSource,\n                hasServerFiltering = dataSource && dataSource.serverFiltering,\n                mainAxis = [].concat(options.categoryAxis)[0],\n                naviOptions = options.navigator || {},\n                select = naviOptions.select,\n                hasSelect = select && select.from && select.to;\n\n            if (hasServerFiltering && hasSelect) {\n                var filter = [].concat(dataSource.filter || []);\n\n                var from = kendo.parseDate(select.from);\n                var to = kendo.parseDate(select.to);\n                var dummyAxis = new dataviz.DateCategoryAxis(deepExtend({\n                    baseUnit: \"fit\"\n                }, mainAxis, {\n                    categories: [from, to]\n                }), kendo);\n\n                dataSource.filter = buildFilter(dummyAxis.range().min, to).concat(filter);\n            }\n\n            Chart.fn._initDataSource.call(this, userOptions);\n        },\n\n        _onNavigatorCreated: function(e) {\n            this._instance = e.sender;\n            this.options = e.sender.options;\n            this._navigator = this.navigator = e.navigator;\n            this._initNavigatorDataSource();\n        },\n\n        _initNavigatorDataSource: function() {\n            var navigatorOptions = this.options.navigator;\n            var autoBind = navigatorOptions.autoBind;\n            var dsOptions = navigatorOptions.dataSource;\n\n            if (dsOptions) {\n                this._navigatorDataChangedHandler = this._navigatorDataChangedHandler || this._onNavigatorDataChanged.bind(this);\n                this._navigatorDataSource = kendo.data.DataSource\n                    .create(dsOptions)\n                    .bind(CHANGE, this._navigatorDataChangedHandler);\n\n                if (!defined(autoBind)) {\n                   autoBind = this.options.autoBind;\n                }\n\n                if (autoBind) {\n                    this._navigatorDataSource.fetch();\n                }\n            }\n        },\n\n        _bindNavigatorSeries: function(series, data) {\n            var seriesIx, currentSeries,\n                seriesLength = series.length;\n\n            for (seriesIx = 0; seriesIx < seriesLength; seriesIx++) {\n                currentSeries = series[seriesIx];\n\n                if (currentSeries.axis == NAVIGATOR_AXIS && this._isBindable(currentSeries)) {\n                    currentSeries.data = data;\n                }\n            }\n        },\n\n        _onNavigatorDataChanged: function() {\n            var chart = this,\n                instance = chart._instance,\n                categoryAxes = chart.options.categoryAxis,\n                axisIx,\n                axesLength = categoryAxes.length,\n                data = chart._navigatorDataSource.view(),\n                currentAxis,\n                naviCategories;\n\n            this._bindNavigatorSeries(chart.options.series, data);\n            if (chart._sourceSeries) {\n                this._bindNavigatorSeries(chart._sourceSeries, data);\n            }\n\n            for (axisIx = 0; axisIx < axesLength; axisIx++) {\n                currentAxis = categoryAxes[axisIx];\n\n                if (currentAxis.pane == NAVIGATOR_PANE) {\n                    if (currentAxis.name == NAVIGATOR_AXIS) {\n                        chart._bindCategoryAxis(currentAxis, data, axisIx);\n                        naviCategories = currentAxis.categories;\n                    } else {\n                        currentAxis.categories = naviCategories;\n                    }\n                }\n            }\n\n            if (instance._model) {\n                var navigator = this.navigator;\n                navigator.redraw();\n                navigator.setRange();\n\n                if (!chart.options.dataSource || (chart.options.dataSource && chart._dataBound)) {\n                    navigator.redrawSlaves();\n                }\n            }\n        },\n\n        _bindCategories: function() {\n            Chart.fn._bindCategories.call(this);\n            if (this._instance) {\n                this._instance.copyNavigatorCategories();\n            }\n        },\n\n        _onDataChanged: function() {\n            Chart.fn._onDataChanged.call(this);\n\n            this._dataBound = true;\n        },\n\n        setOptions: function(options) {\n            this._removeNavigatorDataSource();\n            this._initNavigatorOptions(options);\n            this._instance.destroyNavigator();\n            Chart.fn.setOptions.call(this, options);\n        },\n\n        _onNavigatorFilter: function(e) {\n            this.dataSource.filter(buildFilter(e.from, e.to));\n        },\n\n        requiresHandlers: function(names) {\n            if (dataviz.inArray('navigatorFilter', names)) {\n                var dataSource = this.dataSource;\n                var hasServerFiltering = dataSource && dataSource.options.serverFiltering;\n                return hasServerFiltering && this.options.navigator.dataSource;\n            }\n\n            return Chart.fn.requiresHandlers.call(this, names);\n        },\n\n        _removeNavigatorDataSource: function() {\n            var navigatorDataSource = this._navigatorDataSource;\n            if (navigatorDataSource) {\n                navigatorDataSource.unbind(CHANGE, this._navigatorDataChangedHandler);\n                delete this._navigatorDataSource;\n            }\n        },\n\n        destroy: function() {\n            Chart.fn.destroy.call(this);\n            this._removeNavigatorDataSource();\n        }\n    });\n\n    dataviz.ui.plugin(StockChart);\n\n    function buildFilter(from, to) {\n        return [{\n            field: \"Date\", operator: \"gte\", value: from\n        }, {\n            field: \"Date\", operator: \"lt\", value: to\n        }];\n    }\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n(function(f, define) {\n    define('kendo.dataviz.stock',[ \"./dataviz/stock/kendo-stock-chart\", \"./dataviz/stock/stock-chart\" ], f);\n})(function() {\n\nvar __meta__ = {\n    id: \"dataviz.stockchart\",\n    name: \"StockChart\",\n    category: \"dataviz\",\n    description: \"StockChart widget and associated financial series.\",\n    depends: [ \"dataviz.chart\" ]\n};\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n"],"names":["define","window","kendo","dataviz","elementStyles","deepExtend","toTime","datavizConstants","constants","Chart","drawing","FadeOutAnimation","Animation","extend","setup","this","_initialOpacity","parseFloat","element","opacity","step","pos","String","interpolateValue","abort","fn","call","display","cancel","createDiv","className","style","div","document","createElement","cssText","NavigatorHint","Class","init","container","chartService","options","padding","chartPadding","top","paddingTop","left","paddingLeft","createElements","appendChild","tooltip","scroll","innerHTML","show","from","to","bbox","ref","middle","toDate","scrollWidth","width","minPos","center","x","maxPos","posRange","range","max","min","scale","offset","text","intl","format","template","getTemplate","clearHideTimeout","_visible","visibility","offsetWidth","y1","tooltipStyle","marginTop","borderTopWidth","height","_hideTimeout","clearTimeout","_hideAnimation","hide","this$1","setTimeout","play","hideDelay","destroy","removeChild","NAVIGATOR_PANE","setDefaultOptions","NAVIGATOR_AXIS","ZOOM_ACCELERATION","Navigator","chart","navigator","select","parseDate","defined","hint","visible","obj","chartObserver","InstanceObserver","DRAG","DRAG_END","ZOOM","ZOOM_END","addObserver","value","clean","selection","removeObserver","redraw","_redrawSelf","initSelection","axis","mainAxis","ref$1","roundedRange","ref$2","mousewheel","axisClone","clone","categoriesCount","box","Selection","valueOrDefault","zoom","selectStart","selectEnd","setRange","plotArea","_createPlotArea","namedCategoryAxes","filterAxes","silent","_plotArea","last","panes","redrawSlaves","slavePanes","slice","srcSeries","series","categoryAxis","clearSeriesPointsCache","_drag","e","coords","_eventCoordinates","originalEvent","navigatorAxis","naviRange","inNavigator","pane","containsPoint","axisRanges","name","duration","limitValue","liveDrag","set","showHint","_dragEnd","filter","readSelection","ref_selection_options","allAxes","idx","length","requiresHandlers","args","type","axisOptions","DateCategoryAxis","baseUnit","categories","addDuration","baseUnitStep","trigger","_zoom","ref_options","delta","fromIx","categoryIndex","toIx","preventDefault","Math","abs","scaleRange","_mousewheelZoomRate","_zoomEnd","backgroundBox","_selectStart","_select","_selectEnd","ClonedObject","prototype","themeOptions","__navi","naviOptions","concat","paneOptions","push","attachAxes","attachSeries","categoryAxes","valueAxes","valueAxis","equallySpacedSeries","filterSeriesByType","EQUALLY_SPACED_SERIES","justifyAxis","base","roundToBaseUnit","justified","_collapse","majorTicks","labels","autoBind","autoBindElements","autoBaseUnitSteps","minutes","hours","days","weeks","months","years","user","maxDateGroups","title","position","plotBands","_overlap","mirror","majorGridLines","navigatorSeries","seriesColors","defaults","seriesDefaults","color","categoryField","dateField","visibleInLegend","AUTO_CATEGORY_WIDTH","StockChart","applyDefaults","elementSize","DEFAULT_WIDTH","theme","stockDefaults","axisDefaults","floor","_setElementClass","addClass","setOptions","destroyNavigator","noTransitionsRedraw","transitions","_fullRedraw","_resize","_redraw","_dirty","partialRedraw","seriesCount","grep","s","dirty","_seriesCount","_trackSharedTooltip","paneByPoint","_unsetActivePoint","bindCategories","copyNavigatorCategories","definitions","axisIx","_stopChartHandlers","_toggleDragZoomEvents","_dragZoomEnabled","touchAction","narrowRange","markers","line","legend","amd","a1","a2","a3","$","jQuery","ChartInstanceObserver","ui","KendoStockChart","CHANGE","StockInstanceObserver","handlerMap","navigatorFilter","navigatorCreated","persistSeriesVisibility","_createChart","_initNavigatorOptions","_instance","observer","sender","rtl","_isRtl","navigatorOptions","support","isTouch","touch","isFirefox","browser","mozilla","dataSource","_initDataSource","userOptions","hasServerFiltering","serverFiltering","hasSelect","dummyAxis","buildFilter","_onNavigatorCreated","_navigator","_initNavigatorDataSource","dsOptions","_navigatorDataChangedHandler","_onNavigatorDataChanged","bind","_navigatorDataSource","data","DataSource","create","fetch","_bindNavigatorSeries","seriesIx","currentSeries","seriesLength","_isBindable","instance","axesLength","view","currentAxis","naviCategories","_sourceSeries","_bindCategoryAxis","_model","_dataBound","_bindCategories","_onDataChanged","_removeNavigatorDataSource","_onNavigatorFilter","names","inArray","navigatorDataSource","unbind","field","operator","plugin","__meta__","id","category","description","depends"],"mappings":"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"}