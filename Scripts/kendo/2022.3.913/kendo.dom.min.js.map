{"version":3,"file":"kendo.dom.min.js","sources":["kendo.dom.js"],"sourcesContent":["(function(f, define) {\n    define('kendo.dom',[ \"kendo.core\" ], f);\n})(function() {\n\nvar __meta__ = {\n    id: \"dom\",\n    name: \"Virtual DOM\",\n    category: \"framework\",\n    depends: [ \"core\" ],\n    advanced: true\n};\n\n(function(kendo) {\n    function Node() {\n        this.node = null;\n    }\n\n    Node.prototype = {\n        remove: function() {\n            if (this.node.parentNode) {\n                this.node.parentNode.removeChild(this.node);\n            }\n            this.attr = {};\n        },\n        attr: {},\n        text: function() {\n            return \"\";\n        }\n    };\n\n    function NullNode() {\n    }\n\n    NullNode.prototype = {\n        nodeName: \"#null\",\n        attr: { style: {} },\n        children: [],\n        remove: function() {\n        }\n    };\n\n    var NULL_NODE = new NullNode();\n\n    function Element(nodeName, attr, children) {\n        this.nodeName = nodeName;\n\n        this.attr = attr || {};\n\n        this.children = children || [];\n    }\n\n    Element.prototype = new Node();\n\n    Element.prototype.appendTo = function(parent) {\n        var node = document.createElement(this.nodeName);\n\n        var children = this.children;\n\n        for (var index = 0; index < children.length; index++) {\n            children[index].render(node, NULL_NODE);\n        }\n\n        parent.appendChild(node);\n\n        return node;\n    };\n\n    Element.prototype.render = function(parent, cached) {\n        var node;\n\n        if (cached.nodeName !== this.nodeName) {\n            cached.remove();\n\n            node = this.appendTo(parent);\n        } else {\n            node = cached.node;\n\n            var index;\n\n            var children = this.children;\n\n            var length = children.length;\n\n            var cachedChildren = cached.children;\n\n            var cachedLength = cachedChildren.length;\n\n            if (Math.abs(cachedLength - length) > 2) {\n                this.render({\n                    appendChild: function(node) {\n                        parent.replaceChild(node, cached.node);\n                    }\n                }, NULL_NODE);\n\n                return;\n            }\n\n            for (index = 0; index < length; index++) {\n                children[index].render(node, cachedChildren[index] || NULL_NODE);\n            }\n\n            for (index = length; index < cachedLength; index++) {\n                cachedChildren[index].remove();\n            }\n        }\n\n        this.node = node;\n\n        this.syncAttributes(cached.attr);\n\n        this.removeAttributes(cached.attr);\n    };\n\n    Element.prototype.syncAttributes = function(cachedAttr) {\n        var attr = this.attr;\n\n        for (var name in attr) {\n            var value = attr[name];\n\n            var cachedValue = cachedAttr[name];\n\n            if (name === \"style\") {\n                this.setStyle(value, cachedValue);\n            } else if (value !== cachedValue) {\n                this.setAttribute(name, value, cachedValue);\n            }\n        }\n    };\n\n    Element.prototype.setStyle = function(style, cachedValue) {\n        var node = this.node;\n        var key;\n\n        if (cachedValue) {\n            for (key in style) {\n                if (style[key] !== cachedValue[key]) {\n                    node.style[key] = style[key];\n                }\n            }\n        } else {\n            for (key in style) {\n                node.style[key] = style[key];\n            }\n        }\n    };\n\n    Element.prototype.removeStyle = function(cachedStyle) {\n        var style = this.attr.style || {};\n        var node = this.node;\n\n        for (var key in cachedStyle) {\n            if (style[key] === undefined) {\n                node.style[key] = \"\";\n            }\n        }\n    };\n\n    Element.prototype.removeAttributes = function(cachedAttr) {\n        var attr = this.attr;\n\n        for (var name in cachedAttr) {\n            if (name === \"style\") {\n                this.removeStyle(cachedAttr.style);\n            } else if (attr[name] === undefined) {\n                this.removeAttribute(name);\n            }\n        }\n    };\n\n    Element.prototype.removeAttribute = function(name) {\n        var node = this.node;\n\n        if (name === \"style\") {\n            node.style.cssText = \"\";\n        } else if (name === \"className\") {\n            node.className = \"\";\n        } else {\n            node.removeAttribute(name);\n        }\n    };\n\n    Element.prototype.setAttribute = function(name, value) {\n        var node = this.node;\n\n        if (node[name] !== undefined) {\n            node[name] = value;\n        } else {\n            node.setAttribute(name, value);\n        }\n    };\n\n    Element.prototype.text = function() {\n        var str = \"\";\n        for (var i = 0; i < this.children.length; ++i) {\n            str += this.children[i].text();\n        }\n        return str;\n    };\n\n    function TextNode(nodeValue) {\n        this.nodeValue = String(nodeValue);\n    }\n\n    TextNode.prototype = new Node();\n\n    TextNode.prototype.nodeName = \"#text\";\n\n    TextNode.prototype.render = function(parent, cached) {\n        var node;\n\n        if (cached.nodeName !== this.nodeName) {\n            cached.remove();\n\n            node = document.createTextNode(this.nodeValue);\n\n            parent.appendChild(node);\n        } else {\n            node = cached.node;\n\n            if (this.nodeValue !== cached.nodeValue) {\n                if (node.parentNode) {\n                    // sometimes in IE parentNode is null (reason unknown),\n                    // and IE throws an error when you try to set a\n                    // parentless' nodeValue, because why not.\n                    node.nodeValue = this.nodeValue;\n                }\n            }\n        }\n\n        this.node = node;\n    };\n\n    TextNode.prototype.text = function() {\n        return this.nodeValue;\n    };\n\n    function HtmlNode(html) {\n        this.html = html;\n    }\n\n    HtmlNode.prototype = {\n       nodeName: \"#html\",\n       attr: {},\n       remove: function() {\n           for (var index = 0; index < this.nodes.length; index++) {\n               var el = this.nodes[index];\n               if (el.parentNode) {\n                   el.parentNode.removeChild(el);\n               }\n           }\n       },\n       render: function(parent, cached) {\n           if (cached.nodeName !== this.nodeName || cached.html !== this.html) {\n               cached.remove();\n\n               var lastChild = parent.lastChild;\n\n               insertHtml(parent, this.html);\n\n               this.nodes = [];\n\n               for (var child = lastChild ? lastChild.nextSibling : parent.firstChild; child; child = child.nextSibling) {\n                   this.nodes.push(child);\n               }\n           } else {\n               this.nodes = cached.nodes.slice(0);\n           }\n       }\n    };\n\n    var HTML_CONTAINER = document.createElement(\"div\");\n\n    function insertHtml(node, html) {\n        HTML_CONTAINER.innerHTML = html;\n\n        while (HTML_CONTAINER.firstChild) {\n            node.appendChild(HTML_CONTAINER.firstChild);\n        }\n    }\n\n    function html(value) {\n        return new HtmlNode(value);\n    }\n\n    function element(nodeName, attrs, children) {\n        return new Element(nodeName, attrs, children);\n    }\n\n    function text(value) {\n        return new TextNode(value);\n    }\n\n    function Tree(root) {\n       this.root = root;\n       this.children = [];\n    }\n\n    Tree.prototype = {\n        html: html,\n        element: element,\n        text: text,\n        render: function(children) {\n            var cachedChildren = this.children;\n\n            var index;\n\n            var length;\n\n            for (index = 0, length = children.length; index < length; index++) {\n                var cached = cachedChildren[index];\n                if (!cached) {\n                    cached = NULL_NODE;\n                } else if (!cached.node || !cached.node.parentNode) {\n                    cached.remove();\n                    cached = NULL_NODE;\n                }\n                children[index].render(this.root, cached);\n            }\n\n            for (index = length; index < cachedChildren.length; index++) {\n                cachedChildren[index].remove();\n            }\n\n            this.children = children;\n        }\n    };\n\n    kendo.dom = {\n        html: html,\n        text: text,\n        element: element,\n        Tree: Tree,\n        Node: Node\n    };\n})(window.kendo);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","depends","advanced","kendo","window","Node","this","node","NullNode","prototype","remove","parentNode","removeChild","attr","text","nodeName","style","children","NULL_NODE","Element","TextNode","nodeValue","String","HtmlNode","html","appendTo","parent","document","createElement","index","length","render","appendChild","cached","cachedChildren","cachedLength","Math","abs","replaceChild","syncAttributes","removeAttributes","cachedAttr","value","cachedValue","setStyle","setAttribute","key","removeStyle","cachedStyle","undefined","removeAttribute","cssText","className","str","i","createTextNode","nodes","el","lastChild","insertHtml","child","nextSibling","firstChild","push","slice","HTML_CONTAINER","innerHTML","element","attrs","Tree","root","dom","amd","a1","a2","a3"],"mappings":"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"}