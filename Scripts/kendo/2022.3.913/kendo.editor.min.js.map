{"version":3,"file":"kendo.editor.min.js","sources":["kendo.editor.js"],"sourcesContent":["(function(f, define){\n    define('util/undoredostack',[ \"kendo.core\" ], f);\n})(function(){\n\n(function(kendo) {\n    var UndoRedoStack = kendo.Observable.extend({\n        init: function(options) {\n            kendo.Observable.fn.init.call(this, options);\n            this.clear();\n        },\n        events: [ \"undo\", \"redo\" ],\n        push: function (command) {\n            this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n            this.currentCommandIndex = this.stack.push(command) - 1;\n        },\n        undo: function () {\n            if (this.canUndo()) {\n                var command = this.stack[this.currentCommandIndex--];\n                command.undo();\n                this.trigger(\"undo\", { command: command });\n            }\n        },\n        redo: function () {\n            if (this.canRedo()) {\n                var command = this.stack[++this.currentCommandIndex];\n                command.redo();\n                this.trigger(\"redo\", { command: command });\n            }\n        },\n        clear: function() {\n            this.stack = [];\n            this.currentCommandIndex = -1;\n        },\n        canUndo: function () {\n            return this.currentCommandIndex >= 0;\n        },\n        canRedo: function () {\n            return this.currentCommandIndex != this.stack.length - 1;\n        }\n    });\n\n    kendo.deepExtend(kendo, {\n        util: {\n            UndoRedoStack: UndoRedoStack\n        }\n    });\n})(kendo);\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/main',[\n        \"../util/undoredostack\",\n        \"kendo.combobox\",\n        \"kendo.dropdownlist\",\n        \"kendo.window\",\n        \"kendo.colorpicker\"\n    ], f);\n})(function() {\n\n(function($,undefined) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        Widget = kendo.ui.Widget,\n        os = kendo.support.mobileOS,\n        browser = kendo.support.browser,\n        extend = $.extend,\n        deepExtend = kendo.deepExtend,\n        keys = kendo.keys;\n\n    var SELECT = \"select\";\n    var SELECT_OVERLAY_SELECTOR = \"select.k-select-overlay\";\n    var PLACEHOLDER_CLASS = \"k-placeholder\";\n    var PLACEHOLDER_TAG_ID = \"placeholder\";\n    var REFRESH_INTERVAL = 200;\n    var DEFAULT_LANGUAGE = \"en\";\n\n    // options can be: template (as string), cssClass, title, defaultValue\n    var ToolTemplate = Class.extend({\n        init: function(options) {\n            this.options = options;\n        },\n\n        getHtml: function() {\n            var options = this.options;\n            return kendo.template(options.template, { useWithBlock: false })(options);\n        }\n    });\n\n    var EditorUtils = {\n        editorWrapperTemplate:\n            '<table cellspacing=\"0\" cellpadding=\"0\" class=\"k-widget k-editor\" role=\"presentation\">' +\n                '<tbody>' +\n                    '<tr role=\"presentation\"><td class=\"k-editor-toolbar-wrap\" role=\"presentation\"><ul class=\"k-toolbar k-editor-toolbar\" role=\"toolbar\"></ul></td></tr>' +\n                    '<tr><td class=\"k-editable-area k-editor-content\"></td></tr>' +\n                '</tbody>' +\n            '</table>',\n\n        buttonTemplate:\n            '# var iconCssClass = \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' +\n            '# var dataPopup = data.popup ? \"data-popup\" : \"\";#' +\n            '<button type=\"button\" tabindex=\"0\" role=\"button\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-tool\" #= dataPopup # title=\"#= data.title #\" aria-label=\"#= data.title #\">' +\n                '<span class=\"#= iconCssClass #\"></span>' +\n                '<span class=\"k-tool-text k-button-text\">#= data.title #</span>' +\n            '</button>',\n\n        iconTextButtonTemplate:\n            '# var iconCssClass = \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' +\n            '# var dataPopup = data.popup ? \"data-popup\" : \"\";#' +\n            '<button type=\"button\" tabindex=\"0\" role=\"button\" class=\"k-i-import k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\" #= dataPopup # title=\"#= data.title #\" aria-label=\"#= data.title #\">' +\n                '<span class=\"k-button-icon #= iconCssClass #\"></span>' +\n                '<span class=\"k-button-text\">#= data.title #</span>' +\n            '</button>',\n\n        tableWizardButtonTemplate:\n            '# var iconCssClass = \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' +\n            '# var dataPopup = data.popup ? \"data-popup\" : \"\";#' +\n            '<button type=\"button\" tabindex=\"0\" role=\"button\" class=\"k-tool k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\" #= dataPopup # title=\"#= data.title #\" aria-label=\"#= data.title #\">' +\n                '<span class=\"#= iconCssClass #\"></span>' +\n                '<span class=\"k-tool-text\">#= data.title #</span>' +\n            '</button>',\n\n        colorPickerTemplate:\n            '<input class=\"k-colorpicker k-icon k-i-#= data.cssClass.replace(\"k-\", \"\") #\" />',\n\n        comboBoxTemplate:\n            '<select title=\"#= data.title #\" aria-label=\"#= data.title #\" class=\"#= data.cssClass #\"></select>',\n\n        dropDownListTemplate:\n            '<span class=\"k-editor-dropdown\"><select title=\"#= data.title #\" aria-label=\"#= data.title #\" class=\"#= data.cssClass #\"></select></span>',\n\n        separatorTemplate:\n            '<span class=\"k-separator\"></span>',\n\n        overflowAnchorTemplate:\n            '<button type=\"button\" tabindex=\"0\" role=\"button\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-tool k-overflow-anchor\" data-popup' +\n                ' title=\"#= data.title #\" aria-label=\"#= data.title #\" aria-haspopup=\"true\" aria-expanded=\"false\">' +\n                '<span class=\"k-icon k-i-more-vertical k-button-icon\"></span>' +\n            '</button>',\n\n        formatByName: function(name, format) {\n            for (var i = 0; i < format.length; i++) {\n                if ($.inArray(name, format[i].tags) >= 0) {\n                    return format[i];\n                }\n            }\n        },\n\n        getToolCssClass: function(name) {\n            var toolCssClassNames = {\n\n                superscript: \"sup-script\",\n                subscript: \"sub-script\",\n                justifyLeft: \"align-left\",\n                justifyCenter: \"align-center\",\n                justifyRight: \"align-right\",\n                justifyFull: \"align-justify\",\n                insertUnorderedList: \"list-unordered\",\n                insertOrderedList: \"list-ordered\",\n                insertUpperRomanList: \"list-roman-upper\",\n                insertLowerRomanList: \"list-roman-lower\",\n                \"import\": \"import\",\n                indent: \"indent-increase\",\n                outdent: \"indent-decrease\",\n                createLink: \"link-horizontal\",\n                unlink: \"unlink-horizontal\",\n                insertImage: \"image\",\n                insertFile: \"file-add\",\n                viewHtml: \"html\",\n                foreColor: \"foreground-color\",\n                backColor: \"paint\",\n                createTable: \"table-insert\",\n                addColumnLeft: \"table-column-insert-left\",\n                addColumnRight: \"table-column-insert-right\",\n                addRowAbove: \"table-row-insert-above\",\n                addRowBelow: \"table-row-insert-below\",\n                deleteRow: \"table-row-delete\",\n                deleteColumn: \"table-column-delete\",\n                mergeCellsHorizontally: \"cells-merge-horizontally\",\n                mergeCellsVertically: \"cells-merge-vertically\",\n                splitCellHorizontally: \"cell-split-horizontally\",\n                splitCellVertically: \"cell-split-vertically\",\n                tableWizard: \"table-properties\",\n                tableWizardInsert: \"table-wizard\",\n                tableAlignLeft: \"table-position-left\",\n                tableAlignCenter: \"table-position-center\",\n                tableAlignRight: \"table-position-right\",\n                cleanFormatting: \"clear-css\",\n                copyFormat: \"copy-format\",\n                applyFormat: \"apply-format\"\n            };\n\n            var cssClass = toolCssClassNames[name];\n            if (cssClass) {\n                return cssClass;\n            }\n            return name;\n        },\n\n        registerTool: function(toolName, tool) {\n            var toolOptions = tool.options;\n            if (toolOptions && toolOptions.template) {\n                toolOptions.template.options.cssClass = \"k-\" + EditorUtils.getToolCssClass(toolName);\n            }\n\n            if (!tool.name) {\n                tool.options.name = toolName;\n                tool.name = toolName.toLowerCase();\n            }\n\n            Editor.defaultTools[toolName] = tool;\n        },\n\n        registerFormat: function(formatName, format) {\n            Editor.fn.options.formats[formatName] = format;\n        },\n\n        cacheComments: function(content, comments) {\n            for (var index in comments) {\n                content = content.replace(comments[index], \"{\" + index + \"}\");\n            }\n            return content;\n        },\n\n        retrieveComments: function(content, comments) {\n            for (var index in comments) {\n                content = content.replace(\"{\" + index + \"}\", comments[index]);\n            }\n            return content;\n        }\n    };\n\n    var messages = {\n        bold: \"Bold\",\n        italic: \"Italic\",\n        underline: \"Underline\",\n        strikethrough: \"Strikethrough\",\n        superscript: \"Superscript\",\n        subscript: \"Subscript\",\n        justifyCenter: \"Center text\",\n        justifyLeft: \"Align text left\",\n        justifyRight: \"Align text right\",\n        justifyFull: \"Justify\",\n        insertUnorderedList: \"Insert unordered list\",\n        insertOrderedList: \"Insert ordered list\",\n        indent: \"Indent\",\n        outdent: \"Outdent\",\n        createLink: \"Insert hyperlink\",\n        unlink: \"Remove hyperlink\",\n        insertImage: \"Insert image\",\n        insertFile: \"Insert file\",\n        insertHtml: \"Insert HTML\",\n        viewHtml: \"View HTML\",\n        fontName: \"Select font family\",\n        fontNameInherit: \"(inherited font)\",\n        fontSize: \"Select font size\",\n        fontSizeInherit: \"(inherited size)\",\n        formatBlock: \"Format\",\n        formatting: \"Format\",\n        foreColor: \"Color\",\n        backColor: \"Background color\",\n        style: \"Styles\",\n        emptyFolder: \"Empty Folder\",\n        editAreaTitle: \"Editable area. Press F10 for toolbar.\",\n        uploadFile: \"Upload\",\n        overflowAnchor: \"More tools\",\n        orderBy: \"Arrange by:\",\n        orderBySize: \"Size\",\n        orderByName: \"Name\",\n        invalidFileType: \"The selected file \\\"{0}\\\" is not valid. Supported file types are {1}.\",\n        deleteFile: 'Are you sure you want to delete \"{0}\"?',\n        overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\n        directoryNotFound: \"A directory with this name was not found.\",\n        imageWebAddress: \"Web address\",\n        imageAltText: \"Alternate text\",\n        imageWidth: \"Width (px)\",\n        imageHeight: \"Height (px)\",\n        fileWebAddress: \"Web address\",\n        fileTitle: \"Title\",\n        fileText: \"Text\",\n        linkWebAddress: \"Web address\",\n        linkText: \"Text\",\n        linkToolTip: \"ToolTip\",\n        linkOpenInNewWindow: \"Open link in new window\",\n        dialogUpdate: \"Update\",\n        dialogInsert: \"Insert\",\n        dialogOk: \"Ok\",\n        dialogCancel: \"Cancel\",\n        cleanFormatting: \"Clean formatting\",\n        createTable: \"Create a table\",\n        createTableHint: \"Create a {0} x {1} table\",\n        addColumnLeft: \"Add column on the left\",\n        addColumnRight: \"Add column on the right\",\n        addRowAbove: \"Add row above\",\n        addRowBelow: \"Add row below\",\n        deleteRow: \"Delete row\",\n        deleteColumn: \"Delete column\",\n        mergeCellsHorizontally: \"Merge cells horizontally\",\n        mergeCellsVertically: \"Merge cells vertically\",\n        splitCellHorizontally: \"Split cells horizontally\",\n        splitCellVertically: \"Split cells vertically\",\n        tableAlignLeft: \"Table Align Left\",\n        tableAlignCenter: \"Table Align Center\",\n        tableAlignRight: \"Table Align Right\",\n        tableWizard: \"Table Wizard\",\n        tableTab: \"Table\",\n        cellTab: \"Cell\",\n        accessibilityTab: \"Accessibility\",\n        caption: \"Caption\",\n        summary: \"Summary\",\n        width: \"Width\",\n        height: \"Height\",\n        units: \"Units\",\n        cellSpacing: \"Cell Spacing\",\n        cellPadding: \"Cell Padding\",\n        cellMargin: \"Cell Margin\",\n        alignment: \"Alignment\",\n        background: \"Background\",\n        cssClass: \"CSS Class\",\n        id: \"ID\",\n        border: \"Border\",\n        borderStyle: \"Border Style\",\n        collapseBorders: \"Collapse borders\",\n        wrapText: \"Wrap text\",\n        associateCellsWithHeaders: \"Associate headers\",\n        alignLeft: \"Align Left\",\n        alignCenter: \"Align Center\",\n        alignRight: \"Align Right\",\n        alignLeftTop: \"Align Left Top\",\n        alignCenterTop: \"Align Center Top\",\n        alignRightTop: \"Align Right Top\",\n        alignLeftMiddle: \"Align Left Middle\",\n        alignCenterMiddle: \"Align Center Middle\",\n        alignRightMiddle: \"Align Right Middle\",\n        alignLeftBottom: \"Align Left Bottom\",\n        alignCenterBottom: \"Align Center Bottom\",\n        alignRightBottom: \"Align Right Bottom\",\n        alignRemove: \"Remove Alignment\",\n        columns: \"Columns\",\n        rows: \"Rows\",\n        selectAllCells: \"Select All Cells\",\n        exportAs: \"Export As\",\n        \"import\": \"Import\",\n        print: \"Print\",\n        headerRows: \"Header Rows\",\n        headerColumns: \"Header Cols\",\n        tableSummaryPlaceholder: \"Summary attribute is not HTML5 compatible.\",\n        associateNone: \"None\",\n        associateScope: \"Associate using 'scope' attribute\",\n        associateIds: \"Associate using Ids\",\n        copyFormat: \"Copy format\",\n        applyFormat: \"Apply format\",\n        borderNone: \"None\",\n        undo: \"Undo\",\n        redo: \"Redo\"\n    };\n\n    var supportedContentEditable = typeof(document.documentElement.contentEditable) != 'undefined';\n\n    var toolGroups = {\n        basic: [ \"bold\", \"italic\", \"underline\" ],\n        alignment: [ \"justifyLeft\", \"justifyCenter\", \"justifyRight\" ],\n        lists: [ \"insertUnorderedList\", \"insertOrderedList\" ],\n        indenting: [ \"indent\", \"outdent\" ],\n        formatPainter: [ \"copyFormat\", \"applyFormat\" ],\n        links: [ \"createLink\", \"unlink\" ],\n        tables: [ \"tableWizard\", \"createTable\", \"addColumnLeft\", \"addColumnRight\", \"addRowAbove\", \"addRowBelow\", \"deleteRow\", \"deleteColumn\", \"mergeCellsHorizontally\", \"mergeCellsVertically\", \"splitCellHorizontally\", \"splitCellVertically\", \"tableAlignLeft\", \"tableAlignCenter\", \"tableAlignRight\" ]\n    };\n\n    var Editor = Widget.extend({\n        init: function(element, options) {\n            var that = this,\n                value,\n                editorNS = kendo.ui.editor,\n                toolbarContainer,\n                toolbarOptions,\n                type, comments;\n            var domElement;\n            var dom = editorNS.Dom;\n\n            /* suppress initialization in devices w/o proper contenteditable support */\n            if (!supportedContentEditable) {\n                return;\n            }\n\n            Widget.fn.init.call(that, element, options);\n\n            that.options = deepExtend({}, that.options, options);\n            that.options.tools = that.options.tools.slice();\n\n            element = that.element;\n            domElement = element[0];\n\n            type = dom.name(domElement);\n\n            this._registerHandler(\n                element.closest(\"form\"), \"submit\", that.update.bind(that, undefined)\n            );\n\n            toolbarOptions = extend({}, that.options);\n            toolbarOptions.editor = that;\n\n            if (type == \"textarea\") {\n                that._wrapTextarea();\n\n                toolbarContainer = that.wrapper.find(\".k-editor-toolbar\");\n\n                if (domElement.id) {\n                    toolbarContainer.attr(\"aria-controls\", domElement.id);\n                }\n            } else {\n                that.element.attr(\"contenteditable\", true).addClass(\"k-widget k-editor k-editor-inline\");\n\n                toolbarOptions.popup = true;\n\n                toolbarContainer = $('<ul class=\"k-toolbar k-editor-toolbar\" role=\"toolbar\" />').insertBefore(element);\n            }\n\n            that.toolbar = new editorNS.Toolbar(toolbarContainer[0], toolbarOptions);\n\n            that.toolbar.bindTo(that);\n\n            if (type == \"textarea\") {\n                setTimeout(function() {\n                    var heightStyle = that.wrapper[0].style.height;\n                    var expectedHeight = parseInt(heightStyle, 10);\n                    var actualHeight = that.wrapper.height();\n                    if (heightStyle.indexOf(\"px\") > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                        that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                    }\n                });\n            }\n\n            that._resizable();\n            that._initializeContentElement(that);\n\n            that.keyboard = new editorNS.Keyboard([\n                new editorNS.BackspaceHandler(that),\n                new editorNS.TypingHandler(that),\n                new editorNS.SystemHandler(that),\n                new editorNS.SelectAllHandler(that)\n            ]);\n\n            that.clipboard = new editorNS.Clipboard(this);\n\n            that.undoRedoStack = new kendo.util.UndoRedoStack();\n\n            if (options && options.value) {\n                value = options.value;\n            } else if (that.textarea) {\n                // indented HTML introduces problematic ranges in IE\n                value = domElement.value;\n\n                if (!value.replace(/\\s/g, '').length) {\n                    value = value.replace(/\\s/g, '');\n                }\n\n                // revert encoding of value when content is fetched from cache\n                if (that.options.encoded && domElement.defaultValue && domElement.defaultValue.trim().length) {\n                    value = domElement.defaultValue;\n                }\n\n                var deserializedRoot = editorNS.Serializer.htmlToDom(value, $(\"<div></div>\")[0], that.options.deserialization);\n                comments = dom.getAllComments(deserializedRoot);\n                value = EditorUtils.cacheComments(value, comments);\n                value = value.replace(/[\\r\\n\\v\\f\\t ]+/ig, \" \");\n                value = EditorUtils.retrieveComments(value, comments);\n            } else {\n                value = domElement.innerHTML;\n            }\n\n            that.value(value || '\\ufeff');\n\n            // using $.proxy here will break #5337\n            this._registerHandler(document, {\n                \"mousedown\": function() { that._endTyping(); },\n                \"mouseup\": function(e) { that._mouseup(e); }\n            });\n\n            that._initializeImmutables();\n\n            if (type == \"textarea\") {\n                that._ariaLabel(that.wrapper.find(\"iframe\"));\n            }\n\n            that.toolbar.resize();\n\n            kendo.notify(that);\n        },\n\n        setOptions: function(options) {\n            var editor = this;\n\n            Widget.fn.setOptions.call(editor, options);\n            if (options.tools) {\n                editor.toolbar.bindTo(editor);\n            }\n\n            this._initializePlaceholder();\n        },\n\n        _togglePlaceholder: function(show) {\n            var that = this,\n                body = that.body,\n                $body = $(body),\n                placeholder = that.options.placeholder;\n\n            if (!that.textarea || !placeholder) {\n                return;\n            }\n\n            $body.attr('aria-label', function() {\n                return show ? placeholder : \"\";\n            });\n\n            $body.toggleClass(PLACEHOLDER_CLASS, show);\n        },\n\n        _endTyping: function() {\n            var keyboard = this.keyboard;\n\n            try {\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping(true);\n                    this.saveSelection();\n                }\n            } catch (e) { }\n        },\n\n        _selectionChange: function() {\n            this._selectionStarted = false;\n            this.saveSelection();\n            this.trigger(\"select\", {});\n        },\n\n        _resizable: function() {\n            var resizable = this.options.resizable;\n            var isResizable = $.isPlainObject(resizable) ? (resizable.content === undefined || resizable.content === true) : resizable;\n\n            if (isResizable && this.textarea) {\n                var draggableElement = $(\"<div class='k-resize-handle'><span class='k-icon k-i-arrow-45-down-right'></span></div>\")\n                    .insertAfter(this.textarea);\n\n                this.wrapper.addClass('k-resizable');\n\n                this.wrapper.kendoResizable(extend({}, this.options.resizable, {\n                    draggableElement: draggableElement,\n                    start: function(e) {\n                        var editor = this.editor = $(e.currentTarget).closest(\".k-editor\");\n                        this.initialSize = editor.height();\n                        editor.find(\"td\").last().append(\"<div class='k-overlay' />\");\n                    },\n                    resize: function(e) {\n                        var delta = e.y.initialDelta;\n                        var newSize = this.initialSize + delta;\n                        var min = this.options.min || 0;\n                        var max = this.options.max || Infinity;\n\n                        newSize = Math.min(max, Math.max(min, newSize));\n\n                        this.editor.height(newSize);\n                    },\n                    resizeend: function() {\n                        this.editor.find(\".k-overlay\").remove();\n                        this.editor = null;\n                    }\n                }));\n\n                if (kendo.support.mobileOS.ios) {\n                    var resizableWidget = this.wrapper.getKendoResizable();\n                    resizableWidget.draggable.options.ignore = SELECT_OVERLAY_SELECTOR;\n                }\n            }\n        },\n\n        _initializeElementResizing: function() {\n            var editor = this;\n\n            kendo.ui.editor.ElementResizingFactory.current.create(editor);\n\n            editor._showElementResizeHandlesProxy = editor._showElementResizeHandles.bind(editor);\n            editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n        },\n\n        _destroyElementResizing: function() {\n            var editor = this;\n            var elementResizing = editor.elementResizing;\n\n            if (elementResizing) {\n                elementResizing.destroy();\n                editor.elementResizing = null;\n            }\n\n            if (editor._showElementResizeHandlesProxy) {\n                editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n            }\n        },\n\n        _showElementResizeHandles: function() {\n            var editor = this;\n            var elementResizing = editor.elementResizing;\n\n            if (elementResizing && elementResizing.element && elementResizing.element.parentNode) {\n                elementResizing.showResizeHandles();\n            } else if (elementResizing && (!elementResizing.element || !elementResizing.element.parentNode)) {\n                editor._destroyElementResizing();\n            }\n        },\n\n        _initializeColumnResizing: function() {\n            kendo.ui.editor.ColumnResizing.create(this);\n        },\n\n        _destroyColumnResizing: function() {\n            var editor = this;\n\n            if (editor.columnResizing) {\n                editor.columnResizing.destroy();\n                editor.columnResizing = null;\n            }\n        },\n\n        _initializeRowResizing: function() {\n            kendo.ui.editor.RowResizing.create(this);\n        },\n\n        _destroyRowResizing: function() {\n            var editor = this;\n\n            if (editor.rowResizing) {\n                editor.rowResizing.destroy();\n                editor.rowResizing = null;\n            }\n        },\n\n        _wrapTextarea: function() {\n            var that = this,\n                textarea = that.element,\n                w = textarea[0].style.width,\n                h = textarea[0].style.height,\n                template = EditorUtils.editorWrapperTemplate,\n                editorWrap = $(template).insertBefore(textarea),\n                editArea = editorWrap.find(\".k-editable-area\");\n\n            editorWrap.css({\n                \"width\": w,\n                \"height\": h\n            });\n\n            textarea.attr(\"autocomplete\", \"off\")\n                .appendTo(editArea).addClass(\"k-content k-raw-content\").css(\"display\", \"none\");\n\n            that.textarea = textarea;\n            that.wrapper = editorWrap;\n        },\n\n        _createContentElement: function(stylesheets) {\n            var editor = this;\n            var iframe, wnd, doc;\n            var textarea = editor.textarea;\n            var specifiedDomain = editor.options.domain;\n            var domain = specifiedDomain || document.domain;\n            var domainScript = \"\";\n            var src = 'javascript:\"\"';\n            var lang = \"\";\n\n            textarea.hide();\n\n            iframe = $(\"<iframe />\", { title: editor.options.messages.editAreaTitle, frameBorder: \"0\" })[0];\n\n            $(iframe)\n                .css(\"display\", \"\")\n                .addClass(\"k-content k-iframe\")\n                .attr(\"tabindex\", textarea[0].tabIndex)\n                .insertBefore(textarea);\n\n            // automatically relax same-origin policy if document.domain != location.hostname,\n            // or forcefully relax if options.domain is specified (for document.domain = document.domain scenario)\n            if (specifiedDomain || domain != location.hostname) {\n                // relax same-origin policy\n                domainScript = \"<script>document.domain=\\\"\" + domain + \"\\\"</script>\";\n                src = \"javascript:document.write('\" + domainScript + \"')\";\n                iframe.src = src;\n            }\n\n            if (!iframe.src) {\n                iframe.src = \"\";\n            }\n\n            wnd = iframe.contentWindow || iframe;\n            doc = wnd.document || iframe.contentDocument;\n\n            $(iframe).one(\"load\", function() {\n                editor.toolbar.decorateFrom(doc.body);\n            });\n\n            lang = document.getElementsByTagName(\"html\")[0].getAttribute(\"lang\") || DEFAULT_LANGUAGE;\n\n            doc.open();\n            doc.write(\n                \"<!DOCTYPE html><html lang='\" + lang + \"'><head>\" +\n                \"<meta charset='utf-8' />\" +\n                \"<title>Kendo UI Editor content</title>\" +\n                \"<style>\" +\n                    \"html{padding:0;margin:0;height:100%;min-height:100%;cursor:text;}\" +\n                    \"body{padding:0;margin:0;}\" +\n                    \"body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;\" +\n                    \"word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;\" +\n                    (kendo.support.isRtl(textarea) ? \"direction:rtl;\" : \"\") +\n                    (os.ios ? \"word-break:keep-all;\" : \"\") +\n                    (browser.edge || browser.chrome ? \"height:100%;\" : \"\") +\n                    \"}\" +\n                    \"h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}\" +\n                    \"p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}\" +\n                    \"ul,ol{padding-left:2.5em}\" +\n                    \"span{-ms-high-contrast-adjust:none;}\" +\n                    \"a{color:#00a}\" +\n                    \"code{font-size:1.23em}\" +\n                    \"telerik\\\\3Ascript{display: none;}\" +\n                    \".k-table{width:100%;border-spacing:0;margin: 0 0 1em;}\" +\n                    \".k-table td{min-width:1px;padding:.2em .3em;}\" +\n                    \".k-table,.k-table td{outline:0;border: 1px dotted #ccc;}\" +\n                    \".k-table th{outline:0;border: 1px dotted #999;}\" +\n                    \".k-table p{margin:0;padding:0;}\" +\n                    \".k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}\" +\n                    \".k-column-resize-handle {width: 100%; height: 100%;}\" +\n                    \".k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}\" +\n                    \".k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}\" +\n                    \".k-row-resize-handle {display: table; width: 100%; height: 100%;}\" +\n                    \".k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}\" +\n                    \".k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}\" +\n                    \".k-element-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}\" +\n                    \".k-element-resize-handle {width: 100%; height: 100%;}\" +\n                    \".k-element-resize-handle.k-resize-east{cursor:e-resize;}\" +\n                    \".k-element-resize-handle.k-resize-north{cursor:n-resize;}\" +\n                    \".k-element-resize-handle.k-resize-northeast{cursor:ne-resize;}\" +\n                    \".k-element-resize-handle.k-resize-northwest{cursor:nw-resize;}\" +\n                    \".k-element-resize-handle.k-resize-south{cursor:s-resize;}\" +\n                    \".k-element-resize-handle.k-resize-southeast{cursor:se-resize;}\" +\n                    \".k-element-resize-handle.k-resize-southwest{cursor:sw-resize;}\" +\n                    \".k-element-resize-handle.k-resize-west{cursor:w-resize;}\" +\n                    \".k-table.k-element-resizing{opacity:0.6;}\" +\n                    \".k-placeholder{color:grey}\" +\n                    \"k\\\\:script{display:none;}\" +\n                \"</style>\" +\n                domainScript +\n                $.map(stylesheets, function(href) {\n                    return \"<link rel='stylesheet' href='\" + href + \"'>\";\n                }).join(\"\") +\n                \"</head><body autocorrect='off' contenteditable='true'></body></html>\"\n            );\n            doc.close();\n\n            return wnd;\n        },\n\n        _blur: function() {\n            var textarea = this.textarea;\n            var old = textarea ? textarea.val() : this._oldValue;\n            var value = this.options.encoded ? this.encodedValue() : this.value();\n\n            this.update();\n\n            if (textarea) {\n                textarea.trigger(\"blur\");\n            }\n\n            if (value != old) {\n                this.trigger(\"change\");\n                if (textarea) {\n                    textarea.trigger(\"change\");\n                }\n            }\n        },\n\n        _spellCorrect: function(editor) {\n            var beforeCorrection;\n            var falseTrigger = false;\n\n            this._registerHandler(editor.body, {\n                \"contextmenu\": function() {\n                    editor.one(\"select\", function() {\n                        beforeCorrection = null;\n                    });\n\n                    editor._spellCorrectTimeout = setTimeout(function() {\n                        beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange(), editor.body);\n                        falseTrigger = false;\n                    }, 10);\n                },\n                \"input\": function() {\n                    if (!beforeCorrection) {\n                        return;\n                    }\n\n                    if (kendo.support.browser.mozilla && !falseTrigger) {\n                        falseTrigger = true;\n                        return;\n                    }\n\n                    kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                }\n            });\n        },\n\n        _registerHandler: function(element, type, handler) {\n            var editor = this;\n            var NS = \".kendoEditor\";\n            var eventNames;\n            var i;\n\n            element = $(element);\n\n            if (!this._handlers) {\n                this._handlers = [];\n            }\n\n            if (element.length) {\n                if ($.isPlainObject(type)) {\n                    for (var t in type) {\n                        if (type.hasOwnProperty(t)) {\n                            this._registerHandler(element, t, type[t]);\n                        }\n                    }\n                } else {\n                    //map the original event to handle interaction on mobile platforms\n                    eventNames = kendo.applyEventMap(type).split(\" \");\n\n                    for (i = 0; i < eventNames.length; i++) {\n                        editor._handlers.push({\n                            element: element,\n                            type: eventNames[i] + NS,\n                            handler: handler\n                        });\n\n                        element.on(eventNames[i] + NS, handler);\n                    }\n                }\n            }\n        },\n\n        _deregisterHandlers: function() {\n            var handlers = this._handlers;\n\n            for (var i = 0; i < handlers.length; i++) {\n                var h = handlers[i];\n                h.element.off(h.type, h.handler);\n            }\n\n            this._handlers = [];\n        },\n\n        _initializeContentElement: function() {\n            var editor = this;\n            var doc;\n            var blurTrigger;\n            var mousedownTrigger;\n\n            if (editor.textarea) {\n                editor.window = editor._createContentElement(editor.options.stylesheets);\n                doc = editor.document = editor.window.contentDocument || editor.window.document;\n\n                // Ensure that body exists as various Firefox plugins can cause a delay of the body creation\n                // https://github.com/telerik/kendo-ui-core/issues/3515\n                if (!doc.body) {\n                    var body = doc.createElement(\"body\");\n                    body.setAttribute(\"contenteditable\", \"true\");\n                    body.setAttribute(\"autocorrect\", \"off\");\n                    doc.getElementsByTagName(\"html\")[0].appendChild(body);\n\n                    var interval = setInterval(function() {\n                        if ($(editor.document).find(\"body\").length > 1) {\n                            $(editor.document).find(\"body\").last().remove();\n                            window.clearInterval(interval);\n                        }\n                    },10);\n                }\n\n                editor.body = doc.body;\n\n                blurTrigger = editor.window;\n                mousedownTrigger = doc;\n\n                this._registerHandler(doc, \"mouseup\", this._mouseup.bind(this));\n            } else {\n                editor.window = window;\n                doc = editor.document = document;\n                editor.body = editor.element[0];\n\n                blurTrigger = editor.body;\n                mousedownTrigger = editor.body;\n\n                editor.toolbar.decorateFrom(editor.body);\n            }\n\n            this._registerHandler(blurTrigger, \"blur\", this._blur.bind(this));\n            editor._registerHandler(mousedownTrigger, \"down\", editor._mousedown.bind(editor));\n\n            try {\n                doc.execCommand(\"enableInlineTableEditing\", null, false);\n            } catch (e) { }\n\n            if (kendo.support.touch) {\n                this._registerHandler(doc, {\n                    \"keydown\": function() {\n                        // necessary in iOS when touch events are bound to the page\n                        if (kendo._activeElement() != doc.body) {\n                            editor.window.focus();\n                        }\n                    }\n                });\n            }\n\n            this._initializePlaceholder();\n\n            this._spellCorrect(editor);\n\n            this._registerHandler(editor.document, {\n                \"mouseover dragenter\": function(e) {\n                    var height = $(editor.body).height();\n                    var htmlHeight = $(editor.body.parentElement).height();\n\n                    if (htmlHeight > height && e.target.nodeName.toLowerCase() === \"html\") {\n                        editor._cachedHeight = \"\" + editor.body.style.height;\n                        editor.body.style.height = \"100%\";\n                    }\n                },\n                \"mouseout dragleave drop contextmenu\": function(e) {\n                    var restoreHeight = function() {\n                        if (editor._cachedHeight !== undefined && e.target === editor.body) {\n                            editor.body.style.height = editor._cachedHeight;\n                            delete editor._cachedHeight;\n                        }\n                    };\n\n                    if (e.type === \"contextmenu\") {\n                        setTimeout(function() {\n                            restoreHeight();\n                        }, 10);\n                    } else {\n                        restoreHeight();\n                    }\n\n                }\n            });\n\n            this._registerHandler(editor.body, {\n                \"keydown\": function(e) {\n                    var range;\n\n                    if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute(\"contenteditable\") !== \"true\") {\n                        return false;\n                    }\n\n                    if (e.keyCode === keys.F10) {\n                        // Handling with timeout to avoid the default IE menu\n                        setTimeout(editor.toolbar.focus.bind(editor.toolbar), 100);\n                        editor.toolbar.preventPopupHide = true;\n                        e.preventDefault();\n                        return;\n                    } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                        // skip bom nodes when navigating with arrows\n                        range = editor.getRange();\n                        var left = e.keyCode == keys.LEFT;\n                        var container = range[left ? \"startContainer\" : \"endContainer\"];\n                        var offset = range[left ? \"startOffset\" : \"endOffset\"];\n                        var direction = left ? -1 : 1;\n\n                        var next = offset + direction;\n                        var nextChar = left ? next : offset;\n\n                        if (container.nodeType == 3 && container.nodeValue[nextChar] == \"\\ufeff\") {\n                            range.setStart(container, next);\n                            range.collapse(true);\n                            editor.selectRange(range);\n                        }\n                    }\n\n                    var tools = editor.toolbar.tools;\n                    var toolName = editor.keyboard.toolFromShortcut(tools, e);\n                    var toolOptions = toolName ? tools[toolName].options : {};\n                    if (toolName && !toolOptions.keyPressCommand) {\n                        e.preventDefault();\n\n                        if (!/^(undo|redo)$/.test(toolName)) {\n                            editor.keyboard.endTyping(true);\n                        }\n\n                        editor.trigger(\"keydown\", e);\n                        editor.exec(toolName);\n                        editor._runPostContentKeyCommands(e);\n\n                        return false;\n                    }\n\n                    editor.keyboard.clearTimeout();\n\n                    editor.keyboard.keydown(e);\n                },\n                \"keypress\": function(e) {\n                    setTimeout(function() {\n                        editor._runPostContentKeyCommands(e);\n                        editor._showElementResizeHandles();\n                    }, 0);\n                },\n                \"keyup\": function(e) {\n                    var selectionCodes = [\n                       keys.BACKSPACE,\n                       keys.TAB,\n                       keys.PAGEUP,\n                       keys.PAGEDOWN,\n                       keys.END,\n                       keys.HOME,\n                       keys.LEFT,\n                       keys.UP,\n                       keys.RIGHT,\n                       keys.DOWN,\n                       keys.INSERT,\n                       keys.DELETE\n                    ];\n\n                    if ($.inArray(e.keyCode, selectionCodes) > -1 || (e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey)) {\n                        window.clearTimeout(this._refreshInterval);\n                        this._refreshInterval = window.setTimeout(function() {\n                            editor._selectionChange();\n                        }, REFRESH_INTERVAL);\n                    }\n\n                    editor.keyboard.keyup(e);\n                },\n                \"click\": function(e) {\n                    var dom = kendo.ui.editor.Dom, range;\n\n                    if (dom.name(e.target) === \"img\") {\n                        range = editor.createRange();\n                        range.selectNode(e.target);\n                        editor.selectRange(range);\n                    }\n                },\n                \"cut copy paste drop dragover\": function(e) {\n                    editor.clipboard[\"on\" + e.type](e);\n                },\n                \"focusin\": function() {\n                    if (editor.body.hasAttribute(\"contenteditable\")) {\n                        $(this).addClass(\"k-active\");\n                        editor.toolbar.show();\n                        editor._togglePlaceholder(false);\n                    }\n                },\n                \"focusout\": function() {\n                    setTimeout(function() {\n                        var active = kendo._activeElement();\n                        var body = editor.body;\n                        var toolbar = editor.toolbar;\n\n                        if (toolbar.options.popup) {\n                            var toolbarContainerElement = toolbar.window.element.get(0);\n                            if (toolbarContainerElement && !($.contains(toolbarContainerElement, active) || toolbarContainerElement == active)) {\n                                toolbar.preventPopupHide = false;\n                            }\n                        }\n\n                        if (active != body && !$.contains(body, active) && !toolbar.focused() && !toolbar.preventPopupHide) {\n                            $(body).removeClass(\"k-active\");\n                            toolbar.hide();\n                        }\n\n                        editor._togglePlaceholder(!editor.value().trim());\n                    }, 10);\n                }\n            });\n\n            editor._initializeColumnResizing();\n            editor._initializeRowResizing();\n            editor._initializeElementResizing();\n        },\n\n        _initializePlaceholder: function() {\n            var that = this,\n                placeholder = that.options.placeholder,\n                style, $head;\n\n            if (!that.textarea || !placeholder) {\n                return;\n            }\n\n            style = \"<style id='\" + PLACEHOLDER_TAG_ID + \"'>.\" +\n                        PLACEHOLDER_CLASS + \":before { content: '\" + placeholder + \"'; }\" +\n                    \"</style>\";\n\n            $head = $(that.document.head);\n            $head.find(\"#\" + PLACEHOLDER_TAG_ID).remove();\n            $head.append(style);\n\n            that._togglePlaceholder(!that.value().trim());\n        },\n\n        _initializeImmutables: function() {\n            var that = this,\n                editorNS = kendo.ui.editor;\n\n            if (that.options.immutables) {\n                that.immutables = new editorNS.Immutables(that);\n            }\n        },\n\n        _mousedown: function(e) {\n            var editor = this;\n            editor._selectionStarted = true;\n\n            if ($(editor.body).parents('.k-window').length) {\n                e.stopPropagation();\n            }\n\n            // handle middle-click and ctrl-click on links\n            if (browser.gecko) {\n                return;\n            }\n\n            var target = $(e.target).closest(\"a[href]\");\n\n            if ((e.which == 2 || (e.which == 1 && e.ctrlKey)) && target && target.is(\"a[href]\")) {\n                window.open(target.attr(\"href\"), \"_new\");\n            }\n\n            if (e.target.tagName && e.target.tagName.toLowerCase() === \"html\") {\n                setTimeout(function() {\n                    editor.body.focus();\n                }, 0);\n            }\n        },\n\n        _mouseup: function(e) {\n            var that = this;\n\n            if (kendo.support.mobileOS.ios && e && $(e.target).is(SELECT_OVERLAY_SELECTOR)) {\n                return;\n            }\n\n            if (that._selectionStarted) {\n                setTimeout(function() {\n                    that._selectionChange();\n                }, 1);\n            }\n        },\n\n        _runPostContentKeyCommands: function(e) {\n            var range = this.getRange();\n            var tools = this.keyboard.toolsFromShortcut(this.toolbar.tools, e);\n\n            for (var i = 0; i < tools.length; i++) {\n                var tool = tools[i];\n                var o = tool.options;\n                if (!o.keyPressCommand) {\n                    continue;\n                }\n\n                var cmd = new o.command({ range: range });\n                if (cmd.changesContent()) {\n                    this.keyboard.endTyping(true);\n                    this.exec(tool.name);\n                }\n            }\n        },\n\n        refresh: function() {\n            var that = this;\n\n            if (that.textarea) {\n                that._destroyResizings();\n                // preserve updated value before re-initializing\n                // don't use update() to prevent the editor from encoding the content too early\n                var value = that.value();\n                that.textarea.val(value);\n                that.wrapper.find(\"iframe\").remove();\n                that._initializeContentElement(that);\n                that.value(value);\n            }\n        },\n\n        events: [\n            \"select\",\n            \"change\",\n            \"execute\",\n            \"error\",\n            \"paste\",\n            \"keydown\",\n            \"keyup\"\n        ],\n\n        options: {\n            name: \"Editor\",\n            messages: messages,\n            placeholder: \"\",\n            formats: {},\n            encoded: true,\n            domain: null,\n            resizable: false,\n            deserialization: {\n                custom: null\n            },\n            serialization: {\n                entities: true,\n                semantic: true,\n                scripts: false,\n                optimizeTags: false,\n                keepEOL: false\n            },\n            pasteCleanup: {\n                all: false,\n                css: false,\n                custom: null,\n                keepNewLines: false,\n                msAllFormatting: false,\n                msConvertLists: true,\n                msTags: true,\n                none: false,\n                span: false\n            },\n            stylesheets: [],\n            dialogOptions: {\n                modal: true, resizable: false, draggable: true,\n                animation: false\n            },\n            imageBrowser: null,\n            fileBrowser: null,\n            fontName: [\n                { text: \"Arial\", value: \"Arial, Helvetica, sans-serif\" },\n                { text: \"Courier New\", value: \"\\\"Courier New\\\", Courier, monospace\" },\n                { text: \"Georgia\", value: \"Georgia, serif\" },\n                { text: \"Impact\", value: \"Impact, Charcoal, sans-serif\" },\n                { text: \"Lucida Console\", value: \"\\\"Lucida Console\\\", Monaco, monospace\" },\n                { text: \"Tahoma\", value: \"Tahoma, Geneva, sans-serif\" },\n                { text: \"Times New Roman\", value: \"\\\"Times New Roman\\\", Times, serif\" },\n                { text: \"Trebuchet MS\", value: \"\\\"Trebuchet MS\\\", Helvetica, sans-serif\" },\n                { text: \"Verdana\", value: \"Verdana, Geneva, sans-serif\" }\n            ],\n            fontSize: [\n                { text: \"1 (8pt)\", value: \"xx-small\" },\n                { text: \"2 (10pt)\", value: \"x-small\" },\n                { text: \"3 (12pt)\", value: \"small\" },\n                { text: \"4 (14pt)\", value: \"medium\" },\n                { text: \"5 (18pt)\", value: \"large\" },\n                { text: \"6 (24pt)\", value: \"x-large\" },\n                { text: \"7 (36pt)\", value: \"xx-large\" }\n            ],\n            formatBlock: [\n                { text: \"Paragraph\", value: \"p\" },\n                { text: \"Quotation\", value: \"blockquote\" },\n                { text: \"Heading 1\", value: \"h1\" },\n                { text: \"Heading 2\", value: \"h2\" },\n                { text: \"Heading 3\", value: \"h3\" },\n                { text: \"Heading 4\", value: \"h4\" },\n                { text: \"Heading 5\", value: \"h5\" },\n                { text: \"Heading 6\", value: \"h6\" }\n            ],\n            tools: [].concat.call(\n                [\"formatting\"],\n                toolGroups.basic,\n                [\"undo\", \"redo\"],\n                toolGroups.alignment,\n                toolGroups.formatPainter,\n                toolGroups.lists,\n                toolGroups.indenting,\n                toolGroups.links,\n                [\"insertImage\"],\n                toolGroups.tables\n            )\n        },\n\n        destroy: function() {\n            var editor = this;\n\n            Widget.fn.destroy.call(this);\n\n            this._endTyping(true);\n\n            this._deregisterHandlers();\n\n            clearTimeout(this._spellCorrectTimeout);\n\n            this._focusOutside();\n\n            this.toolbar.destroy();\n\n            editor._destroyUploadWidget();\n\n            editor._destroyResizings();\n\n            kendo.destroy(this.wrapper);\n        },\n\n        _destroyResizings: function() {\n            var editor = this;\n\n            editor._destroyElementResizing();\n            kendo.ui.editor.ElementResizingFactory.current.dispose(editor);\n            editor._destroyRowResizing();\n            kendo.ui.editor.RowResizing.dispose(editor);\n            editor._destroyColumnResizing();\n            kendo.ui.editor.ColumnResizing.dispose(editor);\n        },\n\n        _focusOutside: function() {\n            // move focus outside the Editor, see https://github.com/telerik/kendo/issues/3673\n            if (kendo.support.browser.msie && this.textarea) {\n                var tempInput = $(\"<input style='position:fixed;left:1px;top:1px;width:1px;height:1px;font-size:0;border:0;opacity:0' />\").appendTo(document.body).trigger(\"focus\");\n                tempInput.trigger(\"blur\").remove();\n            }\n        },\n\n        _destroyUploadWidget: function() {\n            var editor = this;\n            if (editor._uploadWidget) {\n                editor._uploadWidget.destroy();\n                editor._uploadWidget = null;\n            }\n        },\n\n        state: function(toolName) {\n            var tool = Editor.defaultTools[toolName];\n            var finder = tool && (tool.options.finder || tool.finder);\n            var RangeUtils = kendo.ui.editor.RangeUtils;\n            var range, textNodes;\n\n            if (finder) {\n                range = this.getRange();\n\n                textNodes = RangeUtils.textNodes(range);\n\n                if (!textNodes.length && range.collapsed) {\n                    textNodes = [range.startContainer];\n                }\n\n                return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n            }\n\n            return false;\n        },\n\n        value: function(html) {\n            var body = this.body,\n                editorNS = kendo.ui.editor,\n                options = this.options,\n                currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\n\n            if (html === undefined) {\n                return currentHtml;\n            }\n\n            if (html == currentHtml) {\n                return;\n            }\n\n            editorNS.Serializer.htmlToDom(html, body, options.deserialization);\n\n            this.selectionRestorePoint = null;\n            this.update();\n\n            this.toolbar.refreshTools();\n        },\n\n        saveSelection: function(range) {\n            range = range || this.getRange();\n            var container = range.commonAncestorContainer,\n                body = this.body;\n\n            if (container == body || $.contains(body, container)) {\n                this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range, body);\n            }\n        },\n\n        _focusBody: function() {\n            var body = this.body;\n            var iframe = this.wrapper && this.wrapper.find(\"iframe\")[0];\n            var documentElement = this.document.documentElement;\n            var activeElement = kendo._activeElement();\n            var scrollTop;\n\n\n            if (!iframe && body.scrollHeight > body.clientHeight) {\n                scrollTop = body.scrollTop;\n                body.focus();\n                body.scrollTop = scrollTop;\n\n            } else if (activeElement != body && activeElement != iframe) {\n                scrollTop = documentElement.scrollTop;\n                body.focus();\n                documentElement.scrollTop = scrollTop;\n            }\n        },\n\n        restoreSelection: function() {\n            this._focusBody();\n\n            if (this.selectionRestorePoint) {\n                this.selectRange(this.selectionRestorePoint.toRange());\n            }\n        },\n\n        focus: function() {\n            this.restoreSelection();\n        },\n\n        update: function(value) {\n            value = value || this.options.encoded ? this.encodedValue() : this.value();\n\n            if (this.textarea) {\n                this.textarea.val(value);\n                this._togglePlaceholder(!value.trim());\n            } else {\n                this._oldValue = value;\n            }\n        },\n\n        encodedValue: function() {\n            return kendo.ui.editor.Dom.encode(this.value());\n        },\n\n        createRange: function(document) {\n            return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n        },\n\n        getSelection: function() {\n            return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n        },\n\n        selectRange: function(range) {\n            this._focusBody();\n            var selection = this.getSelection();\n            selection.removeAllRanges();\n            selection.addRange(range);\n            this.saveSelection(range);\n        },\n\n        getRange: function() {\n            var selection = this.getSelection(),\n                range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(),\n                doc = this.document;\n\n            if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                range.setStart(this.body, 0);\n                range.collapse(true);\n            }\n\n            return range;\n        },\n\n        _containsRange: function(range) {\n            var dom = kendo.ui.editor.Dom;\n            var body = this.body;\n            return range && dom.isAncestorOrSelf(body, range.startContainer) &&\n                dom.isAncestorOrSelf(body, range.endContainer);\n        },\n\n        _deleteSavedRange: function() {\n            if (\"_range\" in this) {\n                delete this._range;\n            }\n        },\n\n        selectedHtml: function() {\n            return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n        },\n\n        paste: function(html, options) {\n            this.focus();\n\n            var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                range: this.getRange(),\n                html: html\n            }, options));\n\n            command.editor = this;\n\n            command.exec();\n        },\n\n        exec: function(name, params) {\n            var that = this;\n            var command = null;\n            var range, tool, prevented;\n\n            if (!name) {\n                throw new Error(\"kendoEditor.exec(): `name` parameter cannot be empty\");\n            }\n\n            if (that.body.getAttribute(\"contenteditable\") !== \"true\" &&\n                name !== \"print\" &&\n                name !== \"pdf\" &&\n                name !== \"exportAs\") {\n                return false;\n            }\n\n            name = name.toLowerCase();\n\n            if (!that.keyboard.isTypingInProgress()) {\n                that._focusBody();\n                that.selectRange(that._range || that.getRange());\n            }\n\n            tool = that.toolbar.toolById(name);\n\n            if (!tool) {\n                // execute non-toolbar tool\n                for (var id in Editor.defaultTools) {\n                    if (id.toLowerCase() == name) {\n                        tool = Editor.defaultTools[id];\n                        break;\n                    }\n                }\n            }\n\n            if (tool) {\n                range = that.getRange();\n\n                if (tool.command) {\n                    command = tool.command(extend({ range: range, body: that.body, immutables: !!that.immutables }, params));\n                }\n\n                prevented = that.trigger(\"execute\", { name: name, command: command });\n\n                if (prevented) {\n                    return;\n                }\n\n                if (/^(undo|redo)$/i.test(name)) {\n                    that.undoRedoStack[name]();\n                } else if (command) {\n                    that.execCommand(command);\n\n                    if (command.async) {\n                        command.change = that._selectionChange.bind(that);\n                        return;\n                    }\n                }\n\n                that._selectionChange();\n            }\n        },\n\n        execCommand: function(command) {\n            if (!command.managesUndoRedo) {\n                this.undoRedoStack.push(command);\n            }\n\n            command.editor = this;\n            command.exec();\n        }\n    });\n\n    Editor.defaultTools = {};\n\n    kendo.ui.plugin(Editor);\n\n    var Tool = Class.extend({\n        init: function(options) {\n            this.options = options;\n        },\n\n        initialize: function(ui, options) {\n            ui.attr({ unselectable: \"on\", title: options.title, \"aria-label\": options.title });\n        },\n\n        command: function(commandArguments) {\n            return new this.options.command(commandArguments);\n        },\n\n        update: $.noop\n    });\n\n    Tool.exec = function(editor, name, value) {\n        editor.exec(name, { value: value });\n    };\n\n    var UndoTool = Tool.extend({\n        command: $.noop,\n        update: function(ui, nodes, undoRedoStack) {\n            var that = this,\n                name = that.options.name;\n\n            switch (name) {\n                case \"undo\":\n                    ui.attr(\"disabled\", !undoRedoStack.canUndo());\n                    break;\n                case \"redo\":\n                    ui.attr(\"disabled\", !undoRedoStack.canRedo());\n                    break;\n                default:\n                    break;\n            }\n        }\n    });\n\n    EditorUtils.registerTool(\"separator\", new Tool({ template: new ToolTemplate({ template: EditorUtils.separatorTemplate }) }));\n    EditorUtils.registerTool(\"undo\", new UndoTool({ key: \"Z\", ctrl: true, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Undo\" }) }));\n    EditorUtils.registerTool(\"redo\", new UndoTool({ key: \"Y\", ctrl: true, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Redo\" }) }));\n\n    // Exports ================================================================\n\n    var emptyElementContent = '\\ufeff';\n    var emptyTableCellContent = emptyElementContent;\n\n    if (browser.msie || browser.edge) {\n        emptyTableCellContent = emptyElementContent = \"&nbsp;\";\n    }\n\n    extend(kendo.ui, {\n        editor: {\n            ToolTemplate: ToolTemplate,\n            EditorUtils: EditorUtils,\n            Tool: Tool,\n            emptyElementContent: emptyElementContent,\n            emptyTableCellContent: emptyTableCellContent\n        }\n    });\n\n    if (kendo.PDFMixin) {\n        kendo.PDFMixin.extend(Editor.prototype);\n        Editor.prototype._drawPDF = function() {\n            return kendo.drawing.drawDOM(this.body, this.options.pdf);\n        };\n        Editor.prototype.saveAsPDF = function() {\n            var progress = new $.Deferred();\n            var promise = progress.promise();\n            var args = { promise: promise };\n\n            if (this.trigger(\"pdfExport\", args)) {\n                return;\n            }\n\n            var options = this.options.pdf;\n\n            this._drawPDF(progress)\n            .then(function(root) {\n                return kendo.drawing.exportPDF(root, options);\n            })\n            .done(function(dataURI) {\n                kendo.saveAs({\n                    dataURI: dataURI,\n                    fileName: options.fileName,\n                    proxyURL: options.proxyURL,\n                    proxyTarget: options.proxyTarget,\n                    forceProxy: options.forceProxy\n                });\n                progress.resolve();\n            })\n            .fail(function(err) {\n                progress.reject(err);\n            });\n\n            return promise;\n        };\n    }\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/dom',[ \"./main\" ], f);\n})(function() {\n\n(function($) {\n\nvar kendo = window.kendo,\n    map = $.map,\n    extend = $.extend,\n    browser = kendo.support.browser,\n    STYLE = \"style\",\n    FLOAT = \"float\",\n    CSSFLOAT = \"cssFloat\",\n    STYLEFLOAT = \"styleFloat\",\n    CLASS = \"class\",\n    KMARKER = \"k-marker\";\n\nfunction makeMap(items) {\n    var obj = {},\n        i, len;\n\n    for (i = 0, len = items.length; i < len; i++) {\n        obj[items[i]] = true;\n    }\n    return obj;\n}\n\nvar empty = makeMap(\"area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed\".split(\",\")),\n    nonListBlockElements = \"p,div,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption\".split(\",\"),\n    blockElements = nonListBlockElements.concat([\"ul\",\"ol\",\"li\"]),\n    block = makeMap(blockElements),\n    selfClosing = makeMap(\"area,base,br,col,command,embed,hr,img,input,keygen,link,menuitem,meta,param,source,track,wbr\".split(\",\")),\n    inlineElements = \"span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby\".split(\",\"),\n    inline = makeMap(inlineElements),\n    fillAttrs = makeMap(\"checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected\".split(\",\")),\n    nonEmptyNonTextContentElements = [\"hgroup\",\"ol\",\"ul\",\"dl\",\"object\",\"video\",\"audio\",\"table\",\"colgroup\",\"tbody\",\"thead\",\"tfoot\",\"tr\",\"select\",\"optgroup\"];\n\nvar normalize = function(node) {\n    if (node.nodeType == 1) {\n        node.normalize();\n    }\n};\n\nif (browser.msie && browser.version >= 8) {\n    normalize = function(parent) {\n        if (parent.nodeType == 1 && parent.firstChild) {\n            var prev = parent.firstChild,\n                node = prev;\n\n            normalize(node);\n\n            while (true) {\n                node = node.nextSibling;\n\n                if (!node) {\n                    break;\n                }\n\n                normalize(node);\n\n                if (node.nodeType == 3 && prev.nodeType == 3) {\n                    node.nodeValue = prev.nodeValue + node.nodeValue;\n                    Dom.remove(prev);\n                }\n\n                prev = node;\n            }\n        }\n    };\n}\n\nvar whitespace = /^\\s+$/,\n    emptyspace = /^[\\n\\r\\t]+$/,\n    rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i,\n    bom = /\\ufeff/g,\n    whitespaceOrBom = /^(\\s+|\\ufeff)$/,\n    persistedScrollTop,\n    cssAttributes =\n           (\"color,padding-left,padding-right,padding-top,padding-bottom,\" +\n            \"background-color,background-attachment,background-image,background-position,background-repeat,\" +\n            \"border-top-style,border-top-width,border-top-color,\" +\n            \"border-bottom-style,border-bottom-width,border-bottom-color,\" +\n            \"border-left-style,border-left-width,border-left-color,\" +\n            \"border-right-style,border-right-width,border-right-color,\" +\n            \"font-family,font-size,font-style,font-variant,font-weight,line-height\"\n           ).split(\",\"),\n    htmlRe = /[<>\\&]/g,\n    entityRe = /[\\u00A0-\\u2666<>\\&]/g,\n    entityTable = {\n            34: 'quot', 38: 'amp', 39: 'apos', 60: 'lt', 62: 'gt',\n            160: 'nbsp', 161: 'iexcl', 162: 'cent', 163: 'pound', 164: 'curren',\n            165: 'yen', 166: 'brvbar', 167: 'sect', 168: 'uml', 169: 'copy',\n            170: 'ordf', 171: 'laquo', 172: 'not', 173: 'shy', 174: 'reg',\n            175: 'macr', 176: 'deg', 177: 'plusmn', 178: 'sup2', 179: 'sup3',\n            180: 'acute', 181: 'micro', 182: 'para', 183: 'middot', 184: 'cedil',\n            185: 'sup1', 186: 'ordm', 187: 'raquo', 188: 'frac14', 189: 'frac12',\n            190: 'frac34', 191: 'iquest', 192: 'Agrave', 193: 'Aacute', 194: 'Acirc',\n            195: 'Atilde', 196: 'Auml', 197: 'Aring', 198: 'AElig', 199: 'Ccedil',\n            200: 'Egrave', 201: 'Eacute', 202: 'Ecirc', 203: 'Euml', 204: 'Igrave',\n            205: 'Iacute', 206: 'Icirc', 207: 'Iuml', 208: 'ETH', 209: 'Ntilde',\n            210: 'Ograve', 211: 'Oacute', 212: 'Ocirc', 213: 'Otilde', 214: 'Ouml',\n            215: 'times', 216: 'Oslash', 217: 'Ugrave', 218: 'Uacute', 219: 'Ucirc',\n            220: 'Uuml', 221: 'Yacute', 222: 'THORN', 223: 'szlig', 224: 'agrave',\n            225: 'aacute', 226: 'acirc', 227: 'atilde', 228: 'auml', 229: 'aring',\n            230: 'aelig', 231: 'ccedil', 232: 'egrave', 233: 'eacute', 234: 'ecirc',\n            235: 'euml', 236: 'igrave', 237: 'iacute', 238: 'icirc', 239: 'iuml',\n            240: 'eth', 241: 'ntilde', 242: 'ograve', 243: 'oacute', 244: 'ocirc',\n            245: 'otilde', 246: 'ouml', 247: 'divide', 248: 'oslash', 249: 'ugrave',\n            250: 'uacute', 251: 'ucirc', 252: 'uuml', 253: 'yacute', 254: 'thorn',\n            255: 'yuml', 402: 'fnof', 913: 'Alpha', 914: 'Beta', 915: 'Gamma',\n            916: 'Delta', 917: 'Epsilon', 918: 'Zeta', 919: 'Eta', 920: 'Theta',\n            921: 'Iota', 922: 'Kappa', 923: 'Lambda', 924: 'Mu', 925: 'Nu',\n            926: 'Xi', 927: 'Omicron', 928: 'Pi', 929: 'Rho', 931: 'Sigma',\n            932: 'Tau', 933: 'Upsilon', 934: 'Phi', 935: 'Chi', 936: 'Psi',\n            937: 'Omega', 945: 'alpha', 946: 'beta', 947: 'gamma', 948: 'delta',\n            949: 'epsilon', 950: 'zeta', 951: 'eta', 952: 'theta', 953: 'iota',\n            954: 'kappa', 955: 'lambda', 956: 'mu', 957: 'nu', 958: 'xi',\n            959: 'omicron', 960: 'pi', 961: 'rho', 962: 'sigmaf', 963: 'sigma',\n            964: 'tau', 965: 'upsilon', 966: 'phi', 967: 'chi', 968: 'psi',\n            969: 'omega', 977: 'thetasym', 978: 'upsih', 982: 'piv', 8226: 'bull',\n            8230: 'hellip', 8242: 'prime', 8243: 'Prime', 8254: 'oline', 8260: 'frasl',\n            8472: 'weierp', 8465: 'image', 8476: 'real', 8482: 'trade', 8501: 'alefsym',\n            8592: 'larr', 8593: 'uarr', 8594: 'rarr', 8595: 'darr', 8596: 'harr',\n            8629: 'crarr', 8656: 'lArr', 8657: 'uArr', 8658: 'rArr', 8659: 'dArr',\n            8660: 'hArr', 8704: 'forall', 8706: 'part', 8707: 'exist', 8709: 'empty',\n            8711: 'nabla', 8712: 'isin', 8713: 'notin', 8715: 'ni', 8719: 'prod',\n            8721: 'sum', 8722: 'minus', 8727: 'lowast', 8730: 'radic', 8733: 'prop',\n            8734: 'infin', 8736: 'ang', 8743: 'and', 8744: 'or', 8745: 'cap',\n            8746: 'cup', 8747: 'int', 8756: 'there4', 8764: 'sim', 8773: 'cong',\n            8776: 'asymp', 8800: 'ne', 8801: 'equiv', 8804: 'le', 8805: 'ge',\n            8834: 'sub', 8835: 'sup', 8836: 'nsub', 8838: 'sube', 8839: 'supe',\n            8853: 'oplus', 8855: 'otimes', 8869: 'perp', 8901: 'sdot', 8968: 'lceil',\n            8969: 'rceil', 8970: 'lfloor', 8971: 'rfloor', 9001: 'lang', 9002: 'rang',\n            9674: 'loz', 9824: 'spades', 9827: 'clubs', 9829: 'hearts', 9830: 'diams',\n            338: 'OElig', 339: 'oelig', 352: 'Scaron', 353: 'scaron', 376: 'Yuml',\n            710: 'circ', 732: 'tilde', 8194: 'ensp', 8195: 'emsp', 8201: 'thinsp',\n            8204: 'zwnj', 8205: 'zwj', 8206: 'lrm', 8207: 'rlm', 8211: 'ndash',\n            8212: 'mdash', 8216: 'lsquo', 8217: 'rsquo', 8218: 'sbquo', 8220: 'ldquo',\n            8221: 'rdquo', 8222: 'bdquo', 8224: 'dagger', 8225: 'Dagger', 8240: 'permil',\n            8249: 'lsaquo', 8250: 'rsaquo', 8364: 'euro'\n        };\n\nvar Dom = {\n    block: block,\n    inline: inline,\n\n    findNodeIndex: function(node, skipText) {\n        var i = 0;\n\n        if (!node) {\n            return -1;\n        }\n\n        while (true) {\n            node = node.previousSibling;\n\n            if (!node) {\n                break;\n            }\n\n            if (!(skipText && node.nodeType == 3)) {\n                i++;\n            }\n        }\n\n        return i;\n    },\n\n    isDataNode: function(node) {\n        return node && node.nodeValue !== null && node.data !== null;\n    },\n\n    isAncestorOf: function(parent, node) {\n        try {\n            return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n        } catch (e) {\n            return false;\n        }\n    },\n\n    isAncestorOrSelf: function(root, node) {\n        return Dom.isAncestorOf(root, node) || root == node;\n    },\n\n    findClosestAncestor: function(root, node) {\n        if (Dom.isAncestorOf(root, node)) {\n            while (node && node.parentNode != root) {\n                node = node.parentNode;\n            }\n        }\n\n        return node;\n    },\n\n    getAllComments: function(rootElem) {\n        var comments = [];\n        // Fourth argument, which is actually obsolete according to the DOM4 standard, is required in IE 11\n        var iterator = document.createNodeIterator(rootElem,\n            NodeFilter.SHOW_COMMENT,\n            function() {\n                return NodeFilter.FILTER_ACCEPT;\n            }, false);\n\n        var curNode = iterator.nextNode();\n        while (curNode) {\n            comments.push(curNode.nodeValue);\n            curNode = iterator.nextNode();\n        }\n        return comments;\n    },\n\n    getNodeLength: function(node) {\n        return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n    },\n\n    splitDataNode: function(node, offset) {\n        var newNode = node.cloneNode(false);\n        var denormalizedText = \"\";\n        var iterator = node.nextSibling;\n        var temp;\n\n        while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n            denormalizedText += iterator.nodeValue;\n            temp = iterator;\n            iterator = iterator.nextSibling;\n            Dom.remove(temp);\n        }\n\n        node.deleteData(offset, node.length);\n        newNode.deleteData(0, offset);\n        newNode.nodeValue += denormalizedText;\n        Dom.insertAfter(newNode, node);\n    },\n\n    attrEquals: function(node, attributes) {\n        for (var key in attributes) {\n            var value = node[key];\n\n            if (key == FLOAT) {\n                value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n            }\n\n            if (typeof value == \"object\") {\n                if (!Dom.attrEquals(value, attributes[key])) {\n                    return false;\n                }\n            } else if (value != attributes[key]) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    blockParentOrBody: function(node) {\n        return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n    },\n\n    blockParents: function(nodes) {\n        var blocks = [],\n            i, len;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n            if (block && $.inArray(block, blocks) < 0) {\n                blocks.push(block);\n            }\n        }\n\n        return blocks;\n    },\n\n    windowFromDocument: function(document) {\n        return document.defaultView || document.parentWindow;\n    },\n\n    normalize: normalize,\n    blockElements: blockElements,\n    nonListBlockElements: nonListBlockElements,\n    inlineElements: inlineElements,\n    empty: empty,\n    fillAttrs: fillAttrs,\n    nodeTypes: {\n        ELEMENT_NODE: 1,\n        ATTRIBUTE_NODE: 2,\n        TEXT_NODE: 3,\n        CDATA_SECTION_NODE: 4,\n        ENTITY_REFERENCE_NODE: 5,\n        ENTITY_NODE: 6,\n        PROCESSING_INSTRUCTION_NODE: 7,\n        COMMENT_NODE: 8,\n        DOCUMENT_NODE: 9,\n        DOCUMENT_TYPE_NODE: 10,\n        DOCUMENT_FRAGMENT_NODE: 11,\n        NOTATION_NODE: 12\n    },\n\n    toHex: function(color) {\n        var matches = rgb.exec(color);\n\n        if (!matches) {\n            return color;\n        }\n\n        return \"#\" + map(matches.slice(1), function(x) {\n            x = parseInt(x, 10).toString(16);\n            return x.length > 1 ? x : \"0\" + x;\n        }).join(\"\");\n    },\n\n    encode: function(value, options) {\n        var encodableChars = (!options || options.entities) ? entityRe : htmlRe;\n        return value.replace(encodableChars, function(c) {\n            var charCode = c.charCodeAt(0);\n            var entity = entityTable[charCode];\n            return entity ? '&' + entity + ';' : c;\n        });\n    },\n    isBom: function(node) {\n        return node && node.nodeType === 3 && /^[\\ufeff]+$/.test(node.nodeValue);\n    },\n    stripBom: function(text) {\n        return (text || \"\").replace(bom, \"\");\n    },\n\n    stripBomNode: function(node) {\n        if (Dom.isBom(node)) {\n            node.parentNode.removeChild(node);\n        }\n    },\n\n    insignificant: function(node) {\n        var attr = node.attributes;\n\n        return node.className == \"k-marker\" || (Dom.is(node, 'br') && (node.className == \"k-br\" || attr._moz_dirty || attr._moz_editor_bogus_node)) || (Dom.is(node, 'span') && (node.className == \"k-br\"));\n    },\n    tableCell: function(node) {\n        return Dom.is(node, \"td\") || Dom.is(node, \"th\");\n    },\n    significantNodes: function(nodes) {\n        return $.grep(nodes, function(child) {\n            var name = Dom.name(child);\n\n            if (name == 'br') {\n                return false;\n            } else if (Dom.insignificant(child)) {\n                return false;\n            } else if (Dom.emptyTextNode(child)) {\n                return false;\n            } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\n                return false;\n            }\n\n            return true;\n        });\n    },\n\n    emptyTextNode: function(node) {\n        return node && node.nodeType == 3 && whitespaceOrBom.test(node.nodeValue);\n    },\n\n    emptyNode: function(node) {\n        return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n    },\n\n    name: function(node) {\n        return node.nodeName.toLowerCase();\n    },\n\n    significantChildNodes: function(node) {\n        return $.grep(node.childNodes, function(child) {\n            return child.nodeType != 3 || !Dom.isWhitespace(child);\n        });\n    },\n\n    lastTextNode: function(node) {\n        var result = null;\n\n        if (node.nodeType == 3) {\n            return node;\n        }\n\n        for (var child = node.lastChild; child; child = child.previousSibling) {\n            result = Dom.lastTextNode(child);\n\n            if (result) {\n                return result;\n            }\n        }\n\n        return result;\n    },\n\n    is: function(node, nodeName) {\n        return node && Dom.name(node) == nodeName;\n    },\n\n    isMarker: function(node) {\n        return node.className == KMARKER;\n    },\n\n    isWhitespace: function(node) {\n        return whitespace.test(node.nodeValue);\n    },\n\n    allowsTextContent: function(node) {\n        var result = true;\n\n        nonEmptyNonTextContentElements.every(function(name) {\n            if (Dom.is(node, name)) {\n                result = false;\n                return false;\n            } else {\n                return true;\n            }\n        });\n\n        return result;\n    },\n\n    allWhitespaceContent: function(node) {\n        var child = node.firstChild;\n        while (child && Dom.isWhitespace(child)) {\n            child = child.nextSibling;\n        }\n\n        return !child;\n    },\n\n    isEmptyspace: function(node) {\n        return emptyspace.test(node.nodeValue);\n    },\n\n    htmlIndentSpace: function(node) {\n        if (!(Dom.isDataNode(node) && Dom.isWhitespace(node))) {\n            return false;\n        }\n\n        if (emptyspace.test(node.nodeValue)) {\n            return true;\n        }\n\n        var sibling = function(el, direction) {\n            while (el[direction]) {\n                el = el[direction];\n                if (Dom.significantNodes([el]).length > 0) {\n                    return el;\n                }\n            }\n        };\n\n        var parent = node.parentNode;\n        var prev = sibling(node, \"previousSibling\");\n        var next = sibling(node, \"nextSibling\");\n\n        if (bom.test(node.nodeValue)) {\n            return !!(prev || next);\n        }\n\n        if ($(parent).is(\"tr,tbody,thead,tfoot,table,ol,ul\")) {\n            return true;\n        }\n\n        if (Dom.isBlock(parent) || Dom.is(parent, \"body\")) {\n            var isPrevBlock = prev && Dom.isBlock(prev);\n            var isNextBlock = next && Dom.isBlock(next);\n            if ((!next && isPrevBlock) || (!prev && isNextBlock) || (isPrevBlock && isNextBlock)) {\n                return true;\n            }\n        }\n\n        return false;\n    },\n\n    isBlock: function(node) {\n        return block[Dom.name(node)];\n    },\n\n    isSelfClosing: function(node) {\n        return selfClosing[Dom.name(node)];\n    },\n\n    isEmpty: function(node) {\n        return empty[Dom.name(node)];\n    },\n\n    isInline: function(node) {\n        return inline[Dom.name(node)];\n    },\n\n    isBr: function(node) {\n        return Dom.name(node) == \"br\";\n    },\n\n    list: function(node) {\n        var name = node ? Dom.name(node) : \"\";\n        return name == \"ul\" || name == \"ol\" || name == \"dl\";\n    },\n\n    scrollContainer: function(doc) {\n        var wnd = Dom.windowFromDocument(doc),\n            scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n\n        if (scrollContainer.compatMode == 'BackCompat') {\n            scrollContainer = scrollContainer.body;\n        } else {\n            scrollContainer = scrollContainer.scrollingElement || scrollContainer.documentElement;\n        }\n\n        return scrollContainer;\n    },\n\n    scrollTo: function(node, toStart) {\n        var doc = node.ownerDocument;\n        var wnd = Dom.windowFromDocument(doc);\n        var windowHeight = wnd.innerHeight;\n        var scrollContainer = Dom.scrollContainer(doc);\n        var element, elementTop, elementHeight, marker;\n\n        if (Dom.isDataNode(node)) {\n            if (toStart) {\n                marker = Dom.create(doc, \"span\", { \"innerHTML\": \"&#xfeff;\" });\n                Dom.insertBefore(marker, node);\n                element = $(marker);\n            } else {\n                element = $(node.parentNode);\n            }\n        } else {\n            element = $(node);\n        }\n\n        elementTop = element.offset().top;\n        elementHeight = element[0].offsetHeight;\n\n        if (toStart || !elementHeight) {\n            elementHeight = parseInt(element.css(\"line-height\"), 10) ||\n                            Math.ceil(1.2 * parseInt(element.css(\"font-size\"), 10)) ||\n                            15;\n        }\n\n        if (marker) {\n            Dom.remove(marker);\n        }\n\n        if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n            scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n        }\n    },\n\n    persistScrollTop: function(doc) {\n        persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n    },\n\n    offset: function(target, offsetParent) {\n        var result = { top: target.offsetTop, left: target.offsetLeft };\n        var parent = target.offsetParent;\n\n        while (parent && (!offsetParent || Dom.isAncestorOf(offsetParent, parent))) {\n            result.top += parent.offsetTop;\n            result.left += parent.offsetLeft;\n            parent = parent.offsetParent;\n        }\n\n        return result;\n    },\n\n    restoreScrollTop: function(doc) {\n        if (typeof persistedScrollTop == \"number\") {\n            Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n            persistedScrollTop = undefined;\n        }\n    },\n\n    insertAt: function(parent, newElement, position) {\n        parent.insertBefore(newElement, parent.childNodes[position] || null);\n    },\n\n    insertBefore: function(newElement, referenceElement) {\n        if (referenceElement.parentNode) {\n            return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n        } else {\n            return referenceElement;\n        }\n    },\n\n    insertAfter: function(newElement, referenceElement) {\n        return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n    },\n\n    remove: function(node) {\n        if (node.parentNode) {\n            node.parentNode.removeChild(node);\n        }\n    },\n\n    removeChildren: function(node) {\n        while (node.firstChild) {\n            node.removeChild(node.firstChild);\n        }\n    },\n\n    removeTextSiblings: function(node) {\n        var parentNode = node.parentNode;\n\n        while (node.nextSibling && node.nextSibling.nodeType == 3) {\n            parentNode.removeChild(node.nextSibling);\n        }\n\n        while (node.previousSibling && node.previousSibling.nodeType == 3) {\n            parentNode.removeChild(node.previousSibling);\n        }\n    },\n\n    trim: function(parent) {\n        for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n            var node = parent.childNodes[i];\n            if (Dom.isDataNode(node)) {\n                if (!Dom.stripBom(node.nodeValue).length) {\n                    Dom.remove(node);\n                }\n            } else if (node.className != KMARKER) {\n                Dom.trim(node);\n\n                if ((!Dom.isEmpty(node) && node.childNodes.length === 0) ||\n                    (Dom.isBlock(node) && Dom.allWhitespaceContent(node))) {\n                    Dom.remove(node);\n                }\n            }\n        }\n\n        return parent;\n    },\n\n    closest: function(node, tags) {\n        if (typeof tags === \"string\") {\n            tags = [tags];\n        }\n\n        while (node && tags.indexOf(Dom.name(node)) < 0) {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    closestBy: function(node, condition, rootCondition) {\n        while (node && !condition(node)) {\n            if (rootCondition && rootCondition(node)) {\n                return null;\n            }\n            node = node.parentNode;\n        }\n        return node;\n    },\n\n    sibling: function(node, direction) {\n        do {\n            node = node[direction];\n        } while (node && node.nodeType != 1);\n\n        return node;\n    },\n\n    next: function(node) {\n        return Dom.sibling(node, \"nextSibling\");\n    },\n\n    prev: function(node) {\n        return Dom.sibling(node, \"previousSibling\");\n    },\n\n    parentOfType: function(node, tags) {\n        do {\n            node = node.parentNode;\n        } while (node && !(Dom.ofType(node, tags)));\n\n        return node;\n    },\n\n    ofType: function(node, tags) {\n        return $.inArray(Dom.name(node), tags) >= 0;\n    },\n\n    changeTag: function(referenceElement, tagName, skipAttributes) {\n        var newElement = Dom.create(referenceElement.ownerDocument, tagName),\n            attributes = referenceElement.attributes,\n            i, len, name, value, attribute;\n\n        if (!skipAttributes) {\n            for (i = 0, len = attributes.length; i < len; i++) {\n                attribute = attributes[i];\n                if (attribute.specified) {\n                    // IE < 8 cannot set class or style via setAttribute\n                    name = attribute.nodeName;\n                    value = attribute.nodeValue;\n                    if (name == CLASS) {\n                        newElement.className = value;\n                    } else if (name == STYLE) {\n                        newElement.style.cssText = referenceElement.style.cssText;\n                    } else {\n                        newElement.setAttribute(name, value);\n                    }\n                }\n            }\n        }\n\n        while (referenceElement.firstChild) {\n            newElement.appendChild(referenceElement.firstChild);\n        }\n\n        Dom.insertBefore(newElement, referenceElement);\n        Dom.remove(referenceElement);\n        return newElement;\n    },\n\n    editableParent: function(node) {\n        while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    wrap: function(node, wrapper) {\n        Dom.insertBefore(wrapper, node);\n        wrapper.appendChild(node);\n        return wrapper;\n    },\n\n    unwrap: function(node) {\n        var parent = node.parentNode;\n        while (node.firstChild) {\n            parent.insertBefore(node.firstChild, node);\n        }\n\n        parent.removeChild(node);\n    },\n\n    wrapper: function(node) {\n        var wrapper = Dom.closestBy(node, function(el) {\n            return el.parentNode && Dom.significantNodes(el.parentNode.childNodes).length > 1;\n        });\n\n        return $(wrapper).is(\"body,.k-editor\") ? undefined : wrapper;\n    },\n\n    create: function(document, tagName, attributes) {\n        return Dom.attr(document.createElement(tagName), attributes);\n    },\n\n    createEmptyNode: function(document, tagName, attributes) {\n        var node = Dom.attr(document.createElement(tagName), attributes);\n        node.innerHTML = \"\\ufeff\";\n        return node;\n    },\n\n    attr: function(element, attributes) {\n        attributes = extend({}, attributes);\n\n        if (attributes && STYLE in attributes) {\n            Dom.style(element, attributes.style);\n            delete attributes.style;\n        }\n\n        for (var attr in attributes) {\n            if (attributes[attr] === null) {\n                element.removeAttribute(attr);\n                delete attributes[attr];\n            } else if (attr == \"className\") {\n                element[attr] = attributes[attr];\n            }\n        }\n\n        return extend(element, attributes);\n    },\n\n    mergeAttributes: function(origin, target, traverseCss) {\n        if (!origin.attributes.length) {\n            return;\n        }\n\n        $.each(origin.attributes, function() {\n            if (this.name !== \"contenteditable\" && (!traverseCss || this.name !== STYLE)) {\n                $(target).attr(this.name, this.value);\n            }\n\n            if (traverseCss && this.name === STYLE) {\n                $.each(origin.style, function() {\n                    target.style[this] = origin.style[this];\n                });\n            }\n        });\n    },\n\n    style: function(node, value) {\n        $(node).css(value || {});\n    },\n\n    unstyle: function(node, value) {\n        for (var key in value) {\n            if (key == FLOAT) {\n                key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\n            }\n\n            node.style[key] = \"\";\n        }\n\n        if (node.style.cssText === \"\") {\n            node.removeAttribute(STYLE);\n        }\n    },\n\n    inlineStyle: function(body, name, attributes) {\n        var span = $(Dom.create(body.ownerDocument, name, attributes)),\n            style;\n\n        body.appendChild(span[0]);\n\n        style = map(cssAttributes, function(value) {\n            if (browser.msie && value == \"line-height\" && span.css(value) == \"1px\") {\n                return \"line-height:1.5\";\n            } else {\n                return value + \":\" + span.css(value);\n            }\n        }).join(\";\");\n\n        span.remove();\n\n        return style;\n    },\n\n    getEffectiveBackground: function(element) {\n        var backgroundStyle = element.css(\"background-color\") || \"\";\n\n        if (backgroundStyle.indexOf(\"rgba(0, 0, 0, 0\") < 0 && backgroundStyle !== \"transparent\") {\n            return backgroundStyle;\n        } else if (element[0].tagName.toLowerCase() === \"html\") {\n            return \"Window\";\n        } else {\n            return Dom.getEffectiveBackground(element.parent());\n        }\n    },\n\n    innerText: function(node) {\n        var text = node.innerHTML;\n        text = text.replace(/<!--(.|\\s)*?-->/gi, \"\");\n        text = text.replace(/<\\/?[^>]+?\\/?>/gm, \"\");\n\n        return text;\n    },\n\n    removeClass: function(node, classNames) {\n        var className = \" \" + node.className + \" \",\n            classes = classNames.split(\" \"),\n            i, len;\n\n        for (i = 0, len = classes.length; i < len; i++) {\n            className = className.replace(\" \" + classes[i] + \" \", \" \");\n        }\n\n        className = kendo.trim(className);\n\n        if (className.length) {\n            node.className = className;\n        } else {\n            node.removeAttribute(CLASS);\n        }\n    },\n\n    commonAncestor: function() {\n        var count = arguments.length,\n            paths = [],\n            minPathLength = Infinity,\n            output = null,\n            i, ancestors, node, first, j;\n\n        if (!count) {\n            return null;\n        }\n\n        if (count == 1) {\n            return arguments[0];\n        }\n\n        for (i = 0; i < count; i++) {\n            ancestors = [];\n            node = arguments[i];\n            while (node) {\n                ancestors.push(node);\n                node = node.parentNode;\n            }\n            paths.push(ancestors.reverse());\n            minPathLength = Math.min(minPathLength, ancestors.length);\n        }\n\n        if (count == 1) {\n            return paths[0][0];\n        }\n\n        for (i = 0; i < minPathLength; i++) {\n            first = paths[0][i];\n\n            for (j = 1; j < count; j++) {\n                if (first != paths[j][i]) {\n                    return output;\n                }\n            }\n\n            output = first;\n        }\n        return output;\n    },\n\n    closestSplittableParent: function(nodes) {\n        var result;\n\n        if (nodes.length == 1) {\n            result = Dom.parentOfType(nodes[0], [\"ul\",\"ol\"]);\n        } else {\n            result = Dom.commonAncestor.apply(null, nodes);\n        }\n\n        if (!result) {\n            result = Dom.parentOfType(nodes[0], [\"p\", \"td\"]) || nodes[0].ownerDocument.body;\n        }\n\n        if (Dom.isInline(result)) {\n            result = Dom.blockParentOrBody(result);\n        }\n\n        var editableParents = map(nodes, Dom.editableParent);\n        var editableAncestor = Dom.commonAncestor(editableParents)[0];\n\n        if ($.contains(result, editableAncestor)) {\n            result = editableAncestor;\n        }\n\n        return result;\n    },\n\n    closestEditable: function(node, types) {\n        var closest;\n        var editable = Dom.editableParent(node);\n\n        if (Dom.ofType(node, types)) {\n            closest = node;\n        } else {\n            closest = Dom.parentOfType(node, types);\n        }\n\n        if (closest && editable && $.contains(closest, editable)) {\n            closest = editable;\n        } else if (!closest && editable) {\n            closest = editable;\n        }\n\n        return closest;\n    },\n\n    closestEditableOfType: function(node, types) {\n        var editable = Dom.closestEditable(node, types);\n\n        if (editable && Dom.ofType(editable, types) && !$(editable).is(\".k-editor\")) {\n            return editable;\n        }\n    },\n\n    filter: function(tagName, nodes, invert) {\n        var filterFn = function(node) {\n            return Dom.name(node) == tagName;\n        };\n\n        return Dom.filterBy(nodes, filterFn, invert);\n    },\n\n    filterBy: function(nodes, condition, invert) {\n        var i = 0;\n        var len = nodes.length;\n        var result = [];\n        var match;\n\n        for (; i < len; i++) {\n            match = condition(nodes[i]);\n            if ((match && !invert) || (!match && invert)) {\n                result.push(nodes[i]);\n            }\n        }\n\n        return result;\n    },\n\n    ensureTrailingBreaks: function(node) {\n        var elements = $(node).find(\"p,td,th\");\n        var length = elements.length;\n        var i = 0;\n\n        if (length) {\n            for (; i < length; i++) {\n                Dom.ensureTrailingBreak(elements[i]);\n            }\n        } else {\n            Dom.ensureTrailingBreak(node);\n        }\n    },\n\n    removeTrailingBreak: function(node) {\n        $(node).find(\"br[type=_moz],.k-br\").remove();\n    },\n\n    ensureTrailingBreak: function(node) {\n        Dom.removeTrailingBreak(node);\n\n        var lastChild = node.lastChild;\n        var name = lastChild && Dom.name(lastChild);\n        var br;\n\n        if (!name ||\n            (name != \"br\" && name != \"img\") ||\n            (name == \"br\" && lastChild.className != \"k-br\")) {\n            br = node.ownerDocument.createElement(\"br\");\n            br.className = \"k-br\";\n            node.appendChild(br);\n        }\n    },\n\n    // Start: Table Utilities\n\n    reMapTableColumns: function(table, colAttr) {\n        Dom._mapColIndices(table, colAttr);\n    },\n\n    clearTableMappings: function(table, colAttr) {\n        $(table).find(\"[\" + colAttr + \"]\").removeAttr(colAttr);\n    },\n\n    _mapColIndices: function(table, colAttr) {\n        var registeredColumns = {};\n\n        for (var rowIndex = 0; rowIndex < table.rows.length; rowIndex++) {\n            var cells = table.rows[rowIndex].cells;\n            var colIndex = 0;\n            for (var cellIndex = 0; cellIndex < cells.length; cellIndex++, colIndex++) {\n                var cell = cells[cellIndex];\n\n                if (cell.rowSpan > 1) {\n                    this._mapColspan(cell, rowIndex, colIndex, registeredColumns);\n                }\n\n                if (registeredColumns[rowIndex]) {\n                    while (registeredColumns[rowIndex][colIndex]) {\n                        colIndex++;\n                    }\n                }\n\n                cell.setAttribute(colAttr, colIndex);\n\n                if (cell.colSpan > 1) {\n                    colIndex = colIndex + cell.colSpan - 1;\n                }\n            }\n        }\n    },\n\n    _mapColspan: function(cell, rowIndex, colIndex, registeredColumns) {\n        var rowSpan = cell.rowSpan,\n            colSpan = cell.colSpan,\n            index;\n\n        for (var ci = 0; ci < colSpan; ci++) {\n            index = colIndex + ci;\n\n            for (var ri = rowIndex + 1; ri < rowIndex + rowSpan; ri++) {\n\n                if (!registeredColumns[ri]) {\n                    registeredColumns[ri] = {};\n                    registeredColumns[ri].length = 0;\n                }\n\n                if (registeredColumns[rowIndex]) {\n                    while (registeredColumns[rowIndex][index]) {\n                        index++;\n                    }\n                }\n\n                registeredColumns[ri][index] = true;\n                registeredColumns[ri].length++;\n            }\n        }\n\n    },\n\n    associateWithIds: function(table) {\n        var that = this;\n        var numberOfTheadRows = 0;\n        var tableRows = table.rows;\n        var numberOfTableRows = tableRows.length;\n        var theadMatrix = [];\n        var tbodyMatrix = [];\n        var theadRows, i;\n\n        if (table.tHead) {\n            theadRows = table.tHead.rows;\n            numberOfTheadRows = theadRows.length;\n        } else {\n            numberOfTheadRows = that._getNumberOfHeaderRows(table);\n            theadRows = [];\n            for (i = 0; i < numberOfTheadRows; i++) {\n                theadRows.push(tableRows[i]);\n            }\n        }\n        for (i = 0; i < numberOfTheadRows; i++) {\n            theadMatrix.push([]);\n        }\n        for (i = 0; i < numberOfTableRows; i++) {\n            tbodyMatrix.push([]);\n        }\n\n        that._generateIdsForColumns(theadMatrix, theadRows);\n        that._generateIdsForRows(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n        that._assignIds(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n    },\n\n    _generateIdsForColumns: function(theadMatrix, theadRows) {\n        var timestamp = new Date().getTime();\n        var numberOfTheadRows = theadRows ? theadRows.length : 0;\n        var row, cells, cell, col, id, colspan, rowspan, i, j, k, l;\n\n        for (i = 0; i < numberOfTheadRows; i++) {\n            row = theadRows[i];\n            cells = row.cells;\n            col = 0;\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                id = \"table\" + i + j + (++timestamp);\n                cell.setAttribute(\"id\", id);\n                colspan = cell.getAttribute(\"colspan\") || 1;\n                rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                while (theadMatrix[i][j + col]) {\n                    col += 1;\n                }\n\n                for (k = 0; k < rowspan; k++) {\n                    for (l = 0; l < colspan; l++) {\n                        theadMatrix[i + k][j + col + l] = id;\n                    }\n                }\n            }\n        }\n    },\n\n    _generateIdsForRows: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n        var that = this;\n        var timestamp = new Date().getTime();\n        var numberOfTableRows = tableRows.length;\n        var row, cells, cell, col, id, colspan, rowspan, i, j, k, l, colIndex, headers;\n\n        var pushHeaderId = function(row) {\n            headers.push(row[colIndex]);\n        };\n\n        for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n            row = tableRows[i];\n            cells = $(row.cells).filter(\"th\");\n            col = 0;\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                id = \"table\" + i + j + (++timestamp);\n                cell.setAttribute(\"id\", id);\n                colspan = cell.getAttribute(\"colspan\") || 1;\n                rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                while (tbodyMatrix[i][j + col]) {\n                    col += 1;\n                }\n\n                for (k = 0; k < rowspan; k++) {\n                    for (l = 0; l < colspan; l++) {\n                        tbodyMatrix[i + k][j + col + l] = id;\n                    }\n                }\n\n                colIndex = cell.getAttribute(\"col-index\");\n                headers = [];\n                theadMatrix.forEach(pushHeaderId);\n                headers = headers.filter(that._onlyUnique);\n                cell.setAttribute(\"headers\", headers.join(\" \").trim());\n            }\n        }\n    },\n\n    _assignIds: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n        var that = this;\n        var numberOfTableRows = tableRows.length;\n        var row, cells, cell, i, j, colIndex, headers;\n\n        var pushHeaderId = function(row) {\n            headers.push(row[colIndex]);\n        };\n\n        for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n            row = tableRows[i];\n            cells = $(row.cells).filter(\"td\");\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                colIndex = cell.getAttribute(\"col-index\");\n                headers = tbodyMatrix[i].slice();\n\n                theadMatrix.forEach(pushHeaderId);\n                headers = headers.filter(that._onlyUnique);\n                cell.setAttribute(\"headers\", headers.join(\" \").trim());\n            }\n        }\n    },\n\n    _getNumberOfColumns: function(table) {\n        var cells = $(table).find(\"th, td\");\n        var numberOfCols = 0;\n        var cell, i, currentIndex;\n\n        for (i = 0; i < cells.length; i++) {\n            cell = cells[i];\n            currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n            if (currentIndex > numberOfCols) {\n                numberOfCols = currentIndex;\n            }\n        }\n\n        return numberOfCols;\n    },\n\n    _getNumberOfHeaderColumns: function(table, numberOfHeaderRows) {\n        var rows = table.rows;\n        var numberOfCols = 0;\n        var currentIndex, row, i, j, cell;\n\n        for (i = numberOfHeaderRows; i < rows.length; i++) {\n            row = rows[i];\n\n            for (j = 0; j < row.cells.length; j++) {\n                cell = row.cells[j];\n\n                if (this.is(cell, \"th\")) {\n                    currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n                    if (currentIndex > numberOfCols) {\n                        numberOfCols = currentIndex;\n                    }\n                }\n            }\n        }\n\n        return numberOfCols;\n    },\n\n    _getNumberOfHeaderRows: function(table) {\n        var rows = table.rows;\n        var thead = table.tHead;\n        var number = thead && table.tHead.rows ? table.tHead.rows.length : 0;\n        var j, row, cell, length;\n\n        if (number === 0) {\n            row = rows[0];\n            length = row.cells && row.cells.length;\n\n            while (row && length && this.is(row.cells[0], \"th\")) {\n                for (j = 0; j < length; j++) {\n                    cell = row ? row.cells[j] : null;\n\n                    if (!this.is(cell, \"th\")) {\n                        row = null;\n                    }\n                }\n\n                if (row) {\n                    number += 1;\n                    row = this.next(row);\n                    length = row && row.cells && row.cells.length;\n                }\n            }\n        }\n\n        return number;\n    },\n\n    // End: Table Utilities\n\n    _onlyUnique: function(value, index, self) {\n        return self.indexOf(value) === index;\n    }\n};\n\nkendo.ui.editor.Dom = Dom;\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n\n\n(function(f, define) {\n    define('editor/serializer',[ \"./dom\" ], f);\n})(function() {\n\n(function($, undefined) {\n\n// Imports ================================================================\nvar kendo = window.kendo;\nvar Editor = kendo.ui.editor;\nvar dom = Editor.Dom;\nvar extend = $.extend;\n\nvar fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\nvar quoteRe = /\"/g; //\"\nvar brRe = /<br[^>]*>/i;\nvar pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\nvar emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\nvar cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\nvar sizzleAttr = /^sizzle-\\d+/i;\nvar scriptAttr = /^k-script-/i;\nvar onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\nvar br = '<br class=\"k-br\">';\nvar bomSpan = \"<span class='k-br'>\\ufeff</span>\";\n\nvar div = document.createElement(\"div\");\ndiv.innerHTML = \" <hr>\";\nvar supportsLeadingWhitespace = div.firstChild.nodeType === 3;\ndiv = null;\nvar isFunction = kendo.isFunction;\n\nvar TD = \"td\";\n\nvar Serializer = {\n    toEditableHtml: function(html) {\n        return (html || \"\")\n            .replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, \"<!--[CDATA[$1]]-->\")\n            .replace(/<(\\/?)script([^>]*)>/ig, \"<$1k:script$2>\")\n            .replace(/<img([^>]*)>/ig, function(match) {\n                return match.replace(onerrorRe, \"\");\n            })\n            .replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/ig, \"$1\")\n            .replace(/^<(table|blockquote)/i, br + '<$1')\n            .replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1')\n            .replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n    },\n\n    _toEditableImmutables: function(body) {\n        var immutable = Editor.Immutables.immutable,\n            emptyTextNode = dom.emptyTextNode,\n            first = body.firstChild,\n            last = body.lastChild;\n\n        while (emptyTextNode(first)) {\n            first = first.nextSibling;\n        }\n\n        while (emptyTextNode(last)) {\n            last = last.previousSibling;\n        }\n\n        if (first && immutable(first)) {\n            $(bomSpan).prependTo(body);\n        }\n\n        if (last && immutable(last)) {\n            $(bomSpan).appendTo(body);\n        }\n    },\n\n    _fillEmptyElements: function(body) {\n        // fills empty elements to allow them to be focused\n        $(body).find(\"p,td\").each(function() {\n            var p = $(this);\n            if (/^\\s*$/g.test(p.text()) && !p.find(\"img,input\").length) {\n                var node = this;\n                while (node.children[0] && node.children[0].nodeType != 3) {\n                    node = node.children[0];\n                }\n\n                if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                    if (dom.is(node, \"td\")) {\n                        node.innerHTML = kendo.ui.editor.emptyTableCellContent;\n                    }\n                    else {\n                        node.innerHTML = kendo.ui.editor.emptyElementContent;\n                    }\n                }\n            }\n        });\n    },\n\n    _removeSystemElements: function(body) {\n        // removes persisted system elements\n        $(\".k-paste-container\", body).remove();\n    },\n\n    _resetOrderedLists: function(root) {\n        // fix for IE9 OL bug -- https://connect.microsoft.com/IE/feedback/details/657695/ordered-list-numbering-changes-from-correct-to-0-0\n        var ols = root.getElementsByTagName(\"ol\"), i, ol, originalStart;\n\n        for (i = 0; i < ols.length; i++) {\n            ol = ols[i];\n            originalStart = ol.getAttribute(\"start\");\n\n            ol.setAttribute(\"start\", 1);\n\n            if (originalStart) {\n                ol.setAttribute(\"start\", originalStart);\n            } else {\n                ol.removeAttribute(originalStart);\n            }\n        }\n    },\n\n    _preventScriptExecution: function(root) {\n        $(root).find(\"*\").each(function() {\n            var attributes = this.attributes;\n            var attribute, i, l, name;\n            var attributesToRemove = [];\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n                name = attribute.nodeName;\n\n                if (attribute.specified && /^on/i.test(name)) {\n                    this.setAttribute(\"k-script-\" + name, attribute.value);\n                    attributesToRemove.push(name);\n                }\n            }\n\n            for (i = 0, l = attributesToRemove.length; i < l; i++) {\n                this.removeAttribute(attributesToRemove[i]);\n            }\n        });\n    },\n\n    htmlToDom: function(html, root, options) {\n        var browser = kendo.support.browser;\n        var msie = browser.msie;\n        var o = options || {};\n        var immutables = o.immutables;\n\n        html = Serializer.toEditableHtml(html);\n\n        if (isFunction(o.custom)) {\n            html = o.custom(html) || html;\n        }\n        root.innerHTML = html;\n\n        if (immutables) {\n            immutables.deserialize(root);\n        }\n\n        if (msie) {\n            // unicode characters denormalize the DOM tree in IE9\n            dom.normalize(root);\n\n            Serializer._resetOrderedLists(root);\n        }\n\n        Serializer._preventScriptExecution(root);\n\n        Serializer._fillEmptyElements(root);\n\n        Serializer._removeSystemElements(root);\n\n        Serializer._toEditableImmutables(root);\n\n        // add k-table class to all tables\n        $(\"table\", root).addClass(\"k-table\");\n\n        return root;\n    },\n\n    domToXhtml: function(root, options) {\n        var result = [];\n        var immutables = options && options.immutables;\n\n        function semanticFilter(attributes) {\n            return $.grep(attributes, function(attr) {\n                return attr.name != \"style\";\n            });\n        }\n\n        function mapStart(node, tag) {\n            result.push('<' + tag);\n            attr(node);\n            result.push('>');\n        }\n\n        var tagMap = {\n            iframe: {\n                start: function(node) { mapStart(node, \"iframe\"); },\n                end: function() { result.push('</iframe>'); }\n            },\n            'k:script': {\n                start: function(node) { mapStart(node, \"script\"); },\n                end: function() { result.push('</script>'); },\n                skipEncoding: true\n            },\n            span: {\n                canOptimize: true,\n                semantic: true,\n                start: function(node) {\n                    var style = node.style;\n                    var attributes = specifiedAttributes(node);\n                    var semanticAttributes = semanticFilter(attributes);\n\n                    if (semanticAttributes.length) {\n                        result.push(\"<span\"); attr(node, semanticAttributes); result.push(\">\");\n                    }\n\n                    if (style.textDecoration == \"underline\") {\n                        result.push(\"<u>\");\n                    }\n\n                    var font = [];\n                    if (style.color) {\n                        font.push('color=\"' + dom.toHex(style.color) + '\"');\n                    }\n\n                    if (style.fontFamily) {\n                        font.push('face=\"' + style.fontFamily + '\"');\n                    }\n\n                    if (style.fontSize) {\n                        var size = $.inArray(style.fontSize, fontSizeMappings);\n                        font.push('size=\"' + size + '\"');\n                    }\n\n                    if (font.length) {\n                        result.push(\"<font \" + font.join(\" \") + \">\");\n                    }\n                },\n                end: function(node) {\n                    var style = node.style;\n\n                    if (style.color || style.fontFamily || style.fontSize) {\n                        result.push(\"</font>\");\n                    }\n\n                    if (style.textDecoration == \"underline\") {\n                        result.push(\"</u>\");\n                    }\n\n                    if (semanticFilter(specifiedAttributes(node)).length) {\n                        result.push(\"</span>\");\n                    }\n                }\n            },\n            strong: {\n                semantic: true,\n                start: function(node) { mapStart(node, \"b\"); },\n                end: function() { result.push('</b>'); }\n            },\n            em: {\n                semantic: true,\n                start: function(node) { mapStart(node, \"i\"); },\n                end: function() { result.push('</i>'); }\n            },\n            b: {\n                semantic: false,\n                start: function(node) { mapStart(node, \"strong\"); },\n                end: function() { result.push('</strong>'); }\n            },\n            i: {\n                semantic: false,\n                start: function(node) { mapStart(node, \"em\"); },\n                end: function() { result.push('</em>'); }\n            },\n            u: {\n                semantic: false,\n                start: function(node) {\n                    result.push('<span');\n\n                    var attributes = specifiedAttributes(node);\n                    var style = $(attributes).filter(function(i, item) { return item.name == \"style\"; })[0];\n                    var styleObj = { nodeName: \"style\", value: \"text-decoration:underline;\" };\n\n                    if (style) {\n                        styleObj.value = style.value;\n                        if (!/text-decoration/i.test(styleObj.value)) {\n                            styleObj.value = \"text-decoration:underline;\" + styleObj.value;\n                        }\n                        attributes.splice($.inArray(style, attributes), 1);\n                    }\n                    attributes.push(styleObj);\n\n                    attr(node, attributes);\n                    result.push('>');\n                },\n                end: function() { result.push('</span>'); }\n            },\n            font: {\n                canOptimize: true,\n                semantic: false,\n                start: function(node) {\n                    result.push('<span style=\"');\n\n                    var color = node.getAttribute('color');\n                    var size = fontSizeMappings[node.getAttribute('size')];\n                    var face = node.getAttribute('face');\n\n                    if (color) {\n                        result.push('color:');\n                        result.push(dom.toHex(color));\n                        result.push(';');\n                    }\n\n                    if (face) {\n                        result.push('font-family:');\n                        result.push(face);\n                        result.push(';');\n                    }\n\n                    if (size) {\n                        result.push('font-size:');\n                        result.push(size);\n                        result.push(';');\n                    }\n\n                    result.push('\">');\n                },\n                end: function() {\n                    result.push('</span>');\n                }\n            }\n        };\n\n        tagMap.script = tagMap[\"k:script\"];\n\n        options = options || {};\n\n        if (typeof options.semantic == \"undefined\") {\n            options.semantic = true;\n        }\n\n        function cssProperties(cssText) {\n            var trim = kendo.trim;\n            var css = trim(cssText);\n            var match;\n            var property, value;\n            var properties = [];\n\n            cssDeclaration.lastIndex = 0;\n\n            while (true) {\n                match = cssDeclaration.exec(css);\n\n                if (!match) {\n                    break;\n                }\n\n                property = trim(match[1].toLowerCase());\n                value = trim(match[2]);\n\n                if (property == \"font-size-adjust\" || property == \"font-stretch\") {\n                    continue;\n                }\n\n                if (property.indexOf('color') >= 0) {\n                    value = dom.toHex(value);\n                } else if (property.indexOf('font') >= 0) {\n                    value = value.replace(quoteRe, \"'\");\n                } else if (/\\burl\\(/g.test(value)) {\n                    value = value.replace(quoteRe, \"\");\n                }\n\n                properties.push({ property: property, value: value });\n            }\n\n            return properties;\n        }\n\n        function styleAttr(cssText) {\n            var properties = cssProperties(cssText);\n            var i;\n\n            for (i = 0; i < properties.length; i++) {\n                result.push(properties[i].property);\n                result.push(':');\n                result.push(properties[i].value);\n                result.push(';');\n            }\n        }\n\n        function specifiedAttributes(node) {\n            var result = [];\n            var attributes = node.attributes;\n            var attribute, i, l;\n            var name, value, specified;\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n\n                name = attribute.nodeName;\n                value = attribute.value;\n                specified = attribute.specified;\n\n                // In IE < 8 the 'value' attribute is not returned as 'specified'. The same goes for type=\"text\"\n                if (name == 'value' && 'value' in node && node.value) {\n                    specified = true;\n                } else if (name == 'type' && value == 'text') {\n                    specified = true;\n                } else if (name == \"class\" && !value) {\n                    specified = false;\n                } else if (sizzleAttr.test(name)) {\n                    specified = false;\n                } else if (name == 'complete') {\n                    specified = false;\n                } else if (name == 'altHtml') {\n                    specified = false;\n                } else if (name == 'start' && dom.is(node, \"ul\")) {\n                    specified = false;\n                } else if (name == 'start' && dom.is(node, \"ol\") && value == \"1\") {\n                    specified = false;\n                } else if (name.indexOf('_moz') >= 0) {\n                    specified = false;\n                } else if (scriptAttr.test(name)) {\n                    specified = !!options.scripts;\n                } else if (name == 'data-role' && value == 'resizable' && (dom.is(node, \"tr\") || dom.is(node, \"td\"))) {\n                    specified = false;\n                }\n\n                if (specified) {\n                    result.push(attribute);\n                }\n            }\n\n            return result;\n        }\n\n        function attr(node, attributes) {\n            var i, l, attribute, name, value;\n\n            attributes = attributes || specifiedAttributes(node);\n\n            if (dom.is(node, 'img')) {\n                var width = node.style.width,\n                    height = node.style.height,\n                    $node = $(node);\n\n                if (width && pixelRe.test(width)) {\n                    $node.attr('width', parseInt(width, 10));\n                    dom.unstyle(node, { width: undefined });\n                }\n\n                if (height && pixelRe.test(height)) {\n                    $node.attr('height', parseInt(height, 10));\n                    dom.unstyle(node, { height: undefined });\n                }\n            }\n\n            if (!attributes.length) {\n                return;\n            }\n\n            // Remove the following if everything seems to be in order.\n            // https://github.com/telerik/kendo-ui-core/issues/3639\n            // attributes.sort(function (a, b) {\n            //     return a.nodeName > b.nodeName ? 1 : a.nodeName < b.nodeName ? -1 : 0;\n            // });\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n                name = attribute.nodeName;\n                value = attribute.value;\n\n                if (name == \"class\" && value == \"k-table\") {\n                    continue;\n                }\n\n                name = name.replace(scriptAttr, \"\");\n\n                result.push(' ');\n                result.push(name);\n                result.push('=\"');\n\n                if (name == 'style') {\n                    styleAttr(value || node.style.cssText);\n                } else if (name == 'src' || name == 'href') {\n                    result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                } else {\n                    result.push(dom.fillAttrs[name] ? name : value);\n                }\n\n                result.push('\"');\n            }\n        }\n\n        function children(node, skip, skipEncoding) {\n            for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                child(childNode, skip, skipEncoding);\n            }\n        }\n\n        function text(node) {\n            return node.nodeValue.replace(/\\ufeff/g, \"\");\n        }\n\n        function isEmptyBomNode(node) {\n            if (dom.isBom(node)) {\n                do {\n                    node = node.parentNode;\n\n                    if (dom.is(node, TD) && node.childNodes.length === 1) {\n                        return true;\n                    }\n\n                    if (node.childNodes.length !== 1) {\n                        return false;\n                    }\n                } while (!dom.isBlock(node));\n\n                return true;\n            }\n\n            return false;\n        }\n\n        function child(node, skip, skipEncoding) {\n            var nodeType = node.nodeType,\n                tagName, mapper,\n                parent, value, previous, jqNode;\n\n            if (immutables && Editor.Immutables.immutable(node)) {\n                result.push(immutables.serialize(node));\n            } else if (nodeType == 1) {\n                tagName = dom.name(node);\n                jqNode = $(node);\n\n                if (jqNode.hasClass(\"k-element-resize-handle-wrapper\") || jqNode.hasClass(\"k-column-resize-handle-wrapper\") || jqNode.hasClass(\"k-row-resize-handle-wrapper\")) {\n                    return;\n                }\n\n                if (!tagName || dom.insignificant(node)) {\n                    return;\n                }\n\n                if (!options.scripts && (tagName == \"script\" || tagName == \"k:script\")) {\n                    return;\n                }\n\n                mapper = tagMap[tagName];\n\n                if (mapper) {\n                    if (mapper.canOptimize &&\n                        options.optimizeTags &&\n                        shouldOptimize(node)) {\n                            children(node, false, mapper.skipEncoding);\n                        return;\n                    }\n\n                    if (typeof mapper.semantic == \"undefined\" ||\n                        (options.semantic ^ mapper.semantic)) {\n                        mapper.start(node);\n                        children(node, false, mapper.skipEncoding);\n                        mapper.end(node);\n                        return;\n                    }\n                }\n\n                result.push('<');\n                result.push(tagName);\n\n                attr(node);\n\n                if (dom.empty[tagName]) {\n                    result.push(' />');\n                } else {\n                    result.push('>');\n                    children(node, skip || dom.is(node, 'pre'));\n                    result.push('</');\n                    result.push(tagName);\n                    result.push('>');\n                }\n            } else if (nodeType == 3) {\n                if (isEmptyBomNode(node)) {\n                    result.push('&nbsp;');\n                    return;\n                }\n\n                value = text(node);\n\n                if (!skip && supportsLeadingWhitespace) {\n                    parent = node.parentNode;\n                    previous = node.previousSibling;\n\n                    if (!previous) {\n                         previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                    }\n\n                    if (!previous || previous.innerHTML === \"\" || dom.isBlock(previous)) {\n                        if (options.keepEOL) {\n                            value = value.replace(/[\\r\\n\\v\\f\\t ]+/, ' ');\n                        } else {\n                            value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                        }\n                    }\n\n                    value = value.replace(/ +/, ' ');\n                }\n\n                result.push(skipEncoding ? value : dom.encode(value, options));\n\n            } else if (nodeType == 4) {\n                result.push('<![CDATA[');\n                result.push(node.data);\n                result.push(']]>');\n            } else if (nodeType == 8) {\n                if (node.data.indexOf('[CDATA[') < 0) {\n                    result.push('<!--');\n                    result.push(node.data);\n                    result.push('-->');\n                } else {\n                    result.push('<!');\n                    result.push(node.data);\n                    result.push('>');\n                }\n            }\n        }\n\n        function shouldOptimize(node) {\n            return node.attributes.length === 0;\n        }\n\n        function textOnly(root) {\n            var childrenCount = root.childNodes.length;\n            var textChild = childrenCount && root.firstChild.nodeType == 3;\n\n            return textChild && (childrenCount == 1 || (childrenCount == 2 && dom.insignificant(root.lastChild)));\n        }\n\n        function runCustom() {\n            if (kendo.isFunction(options.custom)) {\n                result = options.custom(result) || result;\n            }\n        }\n\n        if (textOnly(root)) {\n            result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n            runCustom();\n\n            return result;\n        }\n\n        children(root);\n        result = result.join('');\n        runCustom();\n\n        // if serialized dom contains only whitespace elements, consider it empty (required field validation)\n        if (result.replace(brRe, \"\").replace(emptyPRe, \"\") === \"\") {\n            return \"\";\n        }\n\n        return result;\n    }\n\n};\n\nextend(Editor, {\n    Serializer: Serializer\n});\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n\n\n(function(f, define) {\n    define('editor/components',[ \"./serializer\" ], f);\n})(function() {\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    DropDownList = kendo.ui.DropDownList,\n    dom = kendo.ui.editor.Dom;\n\nvar SelectBox = DropDownList.extend({\n    init: function(element, options) {\n        var that = this;\n\n        DropDownList.fn.init.call(that, element, options);\n\n        // overlay drop-down with popout for snappier interaction\n        if (kendo.support.mobileOS.ios) {\n            this._initSelectOverlay();\n            this.bind(\"dataBound\", this._initSelectOverlay.bind(this));\n        }\n\n        that.text(that.options.title);\n\n        that.element.attr(\"title\", that.options.title);\n        that.wrapper.attr(\"title\", that.options.title);\n\n        that.bind(\"open\", function() {\n            if (that.options.autoSize) {\n                var list = that.list,\n                    listWidth;\n\n                list.css({\n                        whiteSpace: \"nowrap\",\n                        width: \"auto\"\n                    });\n\n                listWidth = list.width();\n\n                if (listWidth > 0) {\n                    listWidth += 20;\n                } else {\n                    listWidth = that._listWidth;\n                }\n\n                list.css(\"width\", listWidth + kendo.support.scrollbar());\n\n                that._listWidth = listWidth;\n            }\n        });\n    },\n    options: {\n        name: \"SelectBox\",\n        index: -1,\n        size: \"medium\",\n        fillMode: \"solid\",\n        rounded: \"medium\"\n    },\n\n    _initSelectOverlay: function() {\n        var selectBox = this;\n        var value = selectBox.value();\n        var view = this.dataSource.view();\n        var item;\n        var html = \"\";\n        var encode = kendo.htmlEncode;\n\n        for (var i = 0; i < view.length; i++) {\n            item = view[i];\n\n            html += \"<option value='\" + encode(item.value) + \"'\";\n\n            if (item.value == value) {\n                html += \" selected\";\n            }\n\n            html += \">\" + encode(item.text) + \"</option>\";\n        }\n\n        var select = $(\"<select class='k-select-overlay'>\" + html + \"</select>\");\n        var wrapper = $(this.element).closest(\".k-dropdownlist\");\n\n        wrapper.next(\".k-select-overlay\").remove();\n\n        select.insertAfter(wrapper);\n\n        select.on(\"change\", function() {\n            selectBox.value(this.value);\n            selectBox.trigger(\"change\");\n        });\n    },\n\n    value: function(value) {\n        var that = this,\n            result = DropDownList.fn.value.call(that, value);\n\n        if (value === undefined) {\n            return result;\n        }\n\n        if (!DropDownList.fn.value.call(that)) {\n           that.text(that.options.title);\n        }\n    },\n\n    decorate: function(body) {\n        var that = this,\n            dataSource = that.dataSource,\n            items = dataSource.data(),\n            i, tag, className, style;\n\n        if (body) {\n            that.list.css(\"background-color\", dom.getEffectiveBackground($(body)));\n        }\n\n        for (i = 0; i < items.length; i++) {\n            tag = items[i].tag || \"span\";\n            className = items[i].className;\n\n            style = dom.inlineStyle(body, tag, { className: className });\n\n            style = style.replace(/\"/g, \"'\");\n\n            items[i].style = style + \";display:inline-block\";\n        }\n\n        dataSource.trigger(\"change\");\n    }\n});\n\n\nkendo.ui.plugin(SelectBox);\nkendo.ui.editor.SelectBox = SelectBox;\n\nkendo.cssProperties.registerPrefix(\"SelectBox\", \"k-picker-\");\n\nkendo.cssProperties.registerValues(\"SelectBox\", [{\n    prop: \"rounded\",\n    values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n}]);\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/range',[ \"./components\" ], f);\n})(function() {\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        browser = kendo.support.browser,\n        dom = Editor.Dom,\n        findNodeIndex = dom.findNodeIndex,\n        isDataNode = dom.isDataNode,\n        findClosestAncestor = dom.findClosestAncestor,\n        getNodeLength = dom.getNodeLength,\n        normalize = dom.normalize;\n\nvar SelectionUtils = {\n    selectionFromWindow: function(window) {\n        if (!window) {\n            return;\n        }\n\n        if (!(\"getSelection\" in window)) {\n            return new W3CSelection(window.document);\n        }\n\n        return window.getSelection();\n    },\n\n    selectionFromRange: function(range) {\n        var rangeDocument = RangeUtils.documentFromRange(range);\n        return SelectionUtils.selectionFromDocument(rangeDocument);\n    },\n\n    selectionFromDocument: function(document) {\n        return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n    }\n};\n\nvar W3CRange = Class.extend({\n    init: function(doc) {\n        $.extend(this, {\n            ownerDocument: doc, /* not part of the spec; used when cloning ranges, traversing the dom and creating fragments */\n            startContainer: doc,\n            endContainer: doc,\n            commonAncestorContainer: doc,\n            startOffset: 0,\n            endOffset: 0,\n            collapsed: true\n        });\n    },\n\n    // Positioning Methods\n    setStart: function(node, offset) {\n        this.startContainer = node;\n        this.startOffset = offset;\n        updateRangeProperties(this);\n        fixIvalidRange(this, true);\n    },\n\n    setEnd: function(node, offset) {\n        this.endContainer = node;\n        this.endOffset = offset;\n        updateRangeProperties(this);\n        fixIvalidRange(this, false);\n    },\n\n    setStartBefore: function(node) {\n        this.setStart(node.parentNode, findNodeIndex(node));\n    },\n\n    setStartAfter: function(node) {\n        this.setStart(node.parentNode, findNodeIndex(node) + 1);\n    },\n\n    setEndBefore: function(node) {\n        this.setEnd(node.parentNode, findNodeIndex(node));\n    },\n\n    setEndAfter: function(node) {\n        this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n    },\n\n    selectNode: function(node) {\n        this.setStartBefore(node);\n        this.setEndAfter(node);\n    },\n\n    selectNodeContents: function(node) {\n        this.setStart(node, 0);\n        this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n    },\n\n    collapse: function(toStart) {\n        var that = this;\n\n        if (toStart) {\n            that.setEnd(that.startContainer, that.startOffset);\n        } else {\n            that.setStart(that.endContainer, that.endOffset);\n        }\n    },\n\n    // Editing Methods\n\n    deleteContents: function() {\n        var that = this,\n            range = that.cloneRange();\n\n        if (that.startContainer != that.commonAncestorContainer) {\n            that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n        }\n\n        that.collapse(true);\n\n        (function deleteSubtree(iterator) {\n            while (iterator.next()) {\n                if (iterator.hasPartialSubtree()) {\n                    deleteSubtree(iterator.getSubtreeIterator());\n                } else {\n                    iterator.remove();\n                }\n            }\n        })(new RangeIterator(range));\n    },\n\n    cloneContents: function() {\n        // clone subtree\n        var document = RangeUtils.documentFromRange(this);\n        return (function cloneSubtree(iterator) {\n                var node, frag = document.createDocumentFragment();\n\n                while (node = iterator.next()) {\n                    node = node.cloneNode(!iterator.hasPartialSubtree());\n\n                    if (iterator.hasPartialSubtree()) {\n                        node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                    }\n\n                    frag.appendChild(node);\n                }\n\n                return frag;\n        })(new RangeIterator(this));\n    },\n\n    extractContents: function() {\n        var that = this,\n            range = that.cloneRange();\n\n        if (that.startContainer != that.commonAncestorContainer) {\n            that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n        }\n\n        that.collapse(true);\n\n        var document = RangeUtils.documentFromRange(that);\n\n        return (function extractSubtree(iterator) {\n            var node, frag = document.createDocumentFragment();\n\n            while (node = iterator.next()) {\n                if (iterator.hasPartialSubtree()) {\n                    node = node.cloneNode(false);\n                    node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                } else {\n                    iterator.remove(that.originalRange);\n                }\n\n                frag.appendChild(node);\n            }\n\n            return frag;\n        })(new RangeIterator(range));\n    },\n\n    insertNode: function(node) {\n        var that = this;\n\n        if (isDataNode(that.startContainer)) {\n            if (that.startOffset != that.startContainer.nodeValue.length) {\n                dom.splitDataNode(that.startContainer, that.startOffset);\n            }\n\n            dom.insertAfter(node, that.startContainer);\n        } else {\n            dom.insertAt(that.startContainer, node, that.startOffset);\n        }\n\n        that.setStart(that.startContainer, that.startOffset);\n    },\n\n    cloneRange: function() {\n        // fast copy\n        return $.extend(new W3CRange(this.ownerDocument), {\n            startContainer: this.startContainer,\n            endContainer: this.endContainer,\n            commonAncestorContainer: this.commonAncestorContainer,\n            startOffset: this.startOffset,\n            endOffset: this.endOffset,\n            collapsed: this.collapsed,\n\n            originalRange: this /* not part of the spec; used to update the original range when calling extractContents() on clones */\n        });\n    },\n\n    // used for debug purposes\n    toString: function() {\n        var startNodeName = this.startContainer.nodeName,\n            endNodeName = this.endContainer.nodeName;\n\n        return [startNodeName == \"#text\" ? this.startContainer.nodeValue : startNodeName, '(', this.startOffset, ') : ',\n                endNodeName == \"#text\" ? this.endContainer.nodeValue : endNodeName, '(', this.endOffset, ')'].join('');\n    }\n});\n\nW3CRange.fromNode = function(node) {\n    return new W3CRange(node.ownerDocument);\n};\n\n/* can be used in Range.compareBoundaryPoints if we need it one day */\nfunction compareBoundaries(start, end, startOffset, endOffset) {\n    if (start == end) {\n        return endOffset - startOffset;\n    }\n\n    // end is child of start\n    var container = end;\n    while (container && container.parentNode != start) {\n        container = container.parentNode;\n    }\n\n    if (container) {\n        return findNodeIndex(container) - startOffset;\n    }\n\n    // start is child of end\n    container = start;\n    while (container && container.parentNode != end) {\n        container = container.parentNode;\n    }\n\n    if (container) {\n        return endOffset - findNodeIndex(container) - 1;\n    }\n\n    // deep traversal\n    var root = dom.commonAncestor(start, end);\n    var startAncestor = start;\n\n    while (startAncestor && startAncestor.parentNode != root) {\n        startAncestor = startAncestor.parentNode;\n    }\n\n    if (!startAncestor) {\n        startAncestor = root;\n    }\n\n    var endAncestor = end;\n    while (endAncestor && endAncestor.parentNode != root) {\n        endAncestor = endAncestor.parentNode;\n    }\n\n    if (!endAncestor) {\n        endAncestor = root;\n    }\n\n    if (startAncestor == endAncestor) {\n        return 0;\n    }\n\n    return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n}\n\nfunction fixIvalidRange(range, toStart) {\n    function isInvalidRange(range) {\n        try {\n            return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n        } catch (ex) {\n            // range was initially invalid (e.g. when cloned from invalid range) - it must be fixed\n            return true;\n        }\n    }\n\n    if (isInvalidRange(range)) {\n        if (toStart) {\n            range.commonAncestorContainer = range.endContainer = range.startContainer;\n            range.endOffset = range.startOffset;\n        } else {\n            range.commonAncestorContainer = range.startContainer = range.endContainer;\n            range.startOffset = range.endOffset;\n        }\n\n        range.collapsed = true;\n    }\n}\n\nfunction updateRangeProperties(range) {\n    range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n\n    var node = range.startContainer;\n    while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n        node = node.parentNode;\n    }\n\n    range.commonAncestorContainer = node;\n}\n\nvar RangeIterator = Class.extend({\n    init: function(range) {\n        $.extend(this, {\n            range: range,\n            _current: null,\n            _next: null,\n            _end: null\n        });\n\n        if (range.collapsed) {\n            return;\n        }\n\n        var root = range.commonAncestorContainer;\n\n        this._next = range.startContainer == root && !isDataNode(range.startContainer) ?\n        range.startContainer.childNodes[range.startOffset] :\n        findClosestAncestor(root, range.startContainer);\n\n        this._end = range.endContainer == root && !isDataNode(range.endContainer) ?\n        range.endContainer.childNodes[range.endOffset] :\n        findClosestAncestor(root, range.endContainer).nextSibling;\n    },\n\n    hasNext: function() {\n        return !!this._next;\n    },\n\n    next: function() {\n        var that = this,\n            current = that._current = that._next;\n        that._next = that._current && that._current.nextSibling != that._end ?\n        that._current.nextSibling : null;\n\n        if (isDataNode(that._current)) {\n            if (that.range.endContainer == that._current) {\n                current = current.cloneNode(true);\n                current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n            }\n\n            if (that.range.startContainer == that._current) {\n                current = current.cloneNode(true);\n                current.deleteData(0, that.range.startOffset);\n            }\n        }\n\n        return current;\n    },\n\n    traverse: function(callback) {\n        var that = this,\n            current;\n\n        function next() {\n            that._current = that._next;\n            that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n            return that._current;\n        }\n\n        while (current = next()) {\n            if (that.hasPartialSubtree()) {\n                that.getSubtreeIterator().traverse(callback);\n            } else {\n                callback(current);\n            }\n        }\n\n        return current;\n    },\n\n    remove: function(originalRange) {\n        var that = this,\n            inStartContainer = that.range.startContainer == that._current,\n            inEndContainer = that.range.endContainer == that._current,\n            start, end, delta;\n\n        if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n            start = inStartContainer ? that.range.startOffset : 0;\n            end = inEndContainer ? that.range.endOffset : that._current.length;\n            delta = end - start;\n\n            if (originalRange && (inStartContainer || inEndContainer)) {\n                if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                    originalRange.startOffset -= delta;\n                }\n\n                if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                    originalRange.endOffset -= delta;\n                }\n            }\n\n            that._current.deleteData(start, delta);\n        } else {\n            var parent = that._current.parentNode;\n\n            if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                var nodeIndex = findNodeIndex(that._current);\n\n                if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                    originalRange.startOffset -= 1;\n                }\n\n                if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                    originalRange.endOffset -= 1;\n                }\n            }\n\n            dom.remove(that._current);\n        }\n    },\n\n    hasPartialSubtree: function() {\n        return !isDataNode(this._current) &&\n        (dom.isAncestorOrSelf(this._current, this.range.startContainer) ||\n            dom.isAncestorOrSelf(this._current, this.range.endContainer));\n    },\n\n    getSubtreeIterator: function() {\n        return new RangeIterator(this.getSubRange());\n    },\n\n    getSubRange: function() {\n        var that = this,\n            subRange = that.range.cloneRange();\n        subRange.selectNodeContents(that._current);\n        if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n            subRange.setStart(that.range.startContainer, that.range.startOffset);\n        }\n        if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n            subRange.setEnd(that.range.endContainer, that.range.endOffset);\n        }\n\n        return subRange;\n    }\n});\n\nvar W3CSelection = Class.extend({\n    init: function(doc) {\n        this.ownerDocument = doc;\n        this.rangeCount = 1;\n    },\n\n    addRange: function(range) {\n        var textRange = this.ownerDocument.body.createTextRange();\n\n        // end container should be adopted first in order to prevent selection with negative length\n        adoptContainer(textRange, range, false);\n        adoptContainer(textRange, range, true);\n\n        textRange.select();\n    },\n\n    removeAllRanges: function() {\n        var selection = this.ownerDocument.selection;\n\n        if (selection.type != \"None\") {\n            selection.empty();\n        }\n    },\n\n    getRangeAt: function() {\n        var textRange,\n            range = new W3CRange(this.ownerDocument),\n            selection = this.ownerDocument.selection,\n            element, commonAncestor;\n\n        try {\n            textRange = selection.createRange();\n            element = textRange.item ? textRange.item(0) : textRange.parentElement();\n            if (element.ownerDocument != this.ownerDocument) {\n                return range;\n            }\n        } catch (ex) {\n            return range;\n        }\n\n        if (selection.type == \"Control\") {\n            range.selectNode(textRange.item(0));\n        } else {\n            commonAncestor = textRangeContainer(textRange);\n            adoptEndPoint(textRange, range, commonAncestor, true);\n            adoptEndPoint(textRange, range, commonAncestor, false);\n\n            if (range.startContainer.nodeType == 9) {\n                range.setStart(range.endContainer, range.startOffset);\n            }\n\n            if (range.endContainer.nodeType == 9) {\n                range.setEnd(range.startContainer, range.endOffset);\n            }\n\n            if (textRange.compareEndPoints(\"StartToEnd\", textRange) === 0) {\n                range.collapse(false);\n            }\n\n            var startContainer = range.startContainer,\n                endContainer = range.endContainer,\n                body = this.ownerDocument.body;\n\n            if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) && // check for full body selection\n                !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) { // but not when single textnode is selected\n                var movedStart = false,\n                    movedEnd = false;\n\n                while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                    startContainer = startContainer.parentNode;\n                    movedStart = true;\n                }\n\n                while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                    endContainer = endContainer.parentNode;\n                    movedEnd = true;\n                }\n\n                if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                    range.setStart(startContainer, 0);\n                    range.setEnd(endContainer, getNodeLength(body));\n                }\n            }\n        }\n\n        return range;\n    }\n});\n\nfunction textRangeContainer(textRange) {\n    var left = textRange.duplicate(),\n        right = textRange.duplicate();\n\n    left.collapse(true);\n    right.collapse(false);\n\n    return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n}\n\nfunction adoptContainer(textRange, range, start) {\n    // find anchor node and offset\n    var container = range[start ? \"startContainer\" : \"endContainer\"],\n        offset = range[start ? \"startOffset\" : \"endOffset\"],\n        textOffset = 0,\n        isData = isDataNode(container),\n        anchorNode = isData ? container : container.childNodes[offset] || null,\n        anchorParent = isData ? container.parentNode : container,\n        doc = range.ownerDocument,\n        cursor = doc.body.createTextRange(),\n        cursorNode;\n\n    // visible data nodes need a text offset\n    if (container.nodeType == 3 || container.nodeType == 4) {\n        textOffset = offset;\n    }\n\n    if (!anchorParent) {\n        anchorParent = doc.body;\n    }\n\n    if (anchorParent.nodeName.toLowerCase() == \"img\") {\n        cursor.moveToElementText(anchorParent);\n        cursor.collapse(false);\n        textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n    } else {\n        // create a cursor element node to position range (since we can't select text nodes)\n        cursorNode = anchorParent.insertBefore(dom.create(doc, \"a\"), anchorNode);\n\n        cursor.moveToElementText(cursorNode);\n        dom.remove(cursorNode);\n        cursor[start ? \"moveStart\" : \"moveEnd\"](\"character\", textOffset);\n        cursor.collapse(false);\n        textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n    }\n}\n\nfunction adoptEndPoint(textRange, range, commonAncestor, start) {\n    var cursorNode = dom.create(range.ownerDocument, \"a\"),\n        cursor = textRange.duplicate(),\n        comparison = start ? \"StartToStart\" : \"StartToEnd\",\n        result, parent, target,\n        previous, next,\n        args, index,\n        appended = false;\n\n    cursorNode.innerHTML = \"\\ufeff\";\n    cursor.collapse(start);\n\n    parent = cursor.parentElement();\n\n    if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n        parent = commonAncestor;\n    }\n\n    // detect range end points\n    // insert cursorNode within the textRange parent and move the cursor until it gets outside of the textRange\n    do {\n        if (appended) {\n            parent.insertBefore(cursorNode, cursorNode.previousSibling);\n        } else {\n            parent.appendChild(cursorNode);\n            appended = true;\n        }\n        cursor.moveToElementText(cursorNode);\n    } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n\n    target = cursorNode.nextSibling;\n\n    if (result == -1 && isDataNode(target)) {\n        cursor.setEndPoint(start ? \"EndToStart\" : \"EndToEnd\", textRange);\n\n        dom.remove(cursorNode);\n\n        args = [target, cursor.text.length];\n    } else {\n        previous = !start && cursorNode.previousSibling;\n        next = start && cursorNode.nextSibling;\n\n        if (isDataNode(next)) {\n            args = [next, 0];\n        } else if (isDataNode(previous)) {\n            args = [previous, previous.length];\n        } else {\n            index = findNodeIndex(cursorNode);\n\n            if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                args = [parent.nextSibling, 0];\n            } else {\n                args = [parent, index];\n            }\n        }\n\n        dom.remove(cursorNode);\n    }\n\n    range[start ? \"setStart\" : \"setEnd\"].apply(range, args);\n}\n\nvar RangeEnumerator = Class.extend({\n    init: function(range) {\n        this.enumerate = function() {\n            var nodes = [];\n\n            function visit(node) {\n                if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                    nodes.push(node);\n                } else {\n                    node = node.firstChild;\n                    while (node) {\n                        visit(node);\n                        node = node.nextSibling;\n                    }\n                }\n            }\n\n            new RangeIterator(range).traverse(visit);\n\n            return nodes;\n        };\n    }\n});\n\nvar ImmutablesRangeIterator = RangeIterator.extend({\n    hasPartialSubtree: function() {\n        var immutable = Editor.Immutables && Editor.Immutables.immutable;\n        return immutable && !immutable(this._current) && RangeIterator.fn.hasPartialSubtree.call(this);\n    },\n\n    getSubtreeIterator: function() {\n        return new ImmutablesRangeIterator(this.getSubRange());\n    }\n});\n\nvar ImmutablesRangeEnumerator = Class.extend({\n    init: function(range) {\n        this.enumerate = function() {\n            var nodes = [];\n            var immutable = Editor.Immutables && Editor.Immutables.immutable;\n            function visit(node) {\n                if (immutable && !immutable(node)) {\n                    if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                        nodes.push(node);\n                    } else {\n                        node = node.firstChild;\n                        while (node) {\n                            visit(node);\n                            node = node.nextSibling;\n                        }\n                    }\n                }\n            }\n\n            new ImmutablesRangeIterator(range).traverse(visit);\n\n            return nodes;\n        };\n    }\n});\n\nvar RestorePoint = Class.extend({\n    init: function(range, body, options) {\n        var that = this;\n        that.range = range;\n        that.rootNode = RangeUtils.documentFromRange(range);\n        that.body = body || that.getEditable(range);\n        if (dom.name(that.body) != \"body\") {\n            that.rootNode = that.body;\n        }\n\n        that.startContainer = that.nodeToPath(range.startContainer);\n        that.endContainer = that.nodeToPath(range.endContainer);\n        that.startOffset = that.offset(range.startContainer, range.startOffset);\n        that.endOffset = that.offset(range.endContainer, range.endOffset);\n\n        that.immutables = options && options.immutables;\n\n        if (that.immutables) {\n            that.serializedImmutables = Editor.Immutables.removeImmutables(that.body);\n        }\n\n        that.html = that.body.innerHTML;\n\n        if (that.immutables && !that.serializedImmutables.empty) {\n            Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n        }\n    },\n\n    index: function(node) {\n        var result = 0,\n            lastType = node.nodeType;\n\n        while (node = node.previousSibling) {\n            var nodeType = node.nodeType;\n\n            if (nodeType != 3 || lastType != nodeType) {\n                result ++;\n            }\n\n            lastType = nodeType;\n        }\n\n        return result;\n    },\n\n    getEditable: function(range) {\n        var root = range.commonAncestorContainer;\n\n        while (root && (root.nodeType == 3 || root.attributes && (!root.attributes.contentEditable || root.attributes.contentEditable.nodeValue.toLowerCase() == \"false\"))) {\n            root = root.parentNode;\n        }\n\n        return root;\n    },\n\n    restoreHtml: function() {\n        var that = this;\n\n        dom.removeChildren(that.body);\n        that.body.innerHTML = that.html;\n        if (that.immutables && !that.serializedImmutables.empty) {\n            Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n        }\n    },\n\n    offset: function(node, value) {\n        if (node.nodeType == 3) {\n            while ((node = node.previousSibling) && node.nodeType == 3) {\n                value += node.nodeValue.length;\n            }\n        }\n\n        return value;\n    },\n\n    nodeToPath: function(node) {\n        var path = [];\n\n        while (node != this.rootNode) {\n            path.push(this.index(node));\n            node = node.parentNode;\n        }\n\n        return path;\n    },\n\n    toRangePoint: function(range, start, path, denormalizedOffset) {\n        var node = this.rootNode,\n            length = path.length,\n            offset = denormalizedOffset;\n\n        while (length-- && node) {\n            node = node.childNodes[path[length]];\n        }\n\n        while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n            offset -= node.nodeValue.length;\n            node = node.nextSibling;\n        }\n\n        if (node && offset >= 0) {\n            range[start ? 'setStart' : 'setEnd'](node, offset);\n        }\n    },\n\n    toRange: function() {\n        var that = this,\n            result = that.range.cloneRange();\n\n        that.toRangePoint(result, true, that.startContainer, that.startOffset);\n        that.toRangePoint(result, false, that.endContainer, that.endOffset);\n\n        return result;\n    }\n\n});\n\nvar Marker = Class.extend({\n    init: function() {\n        this.caret = null;\n    },\n\n    addCaret: function(range) {\n        var that = this;\n        var caret = that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n        range.insertNode(caret);\n\n        dom.stripBomNode(caret.previousSibling);\n        dom.stripBomNode(caret.nextSibling);\n\n        range.selectNode(caret);\n        return caret;\n    },\n\n    removeCaret: function(range) {\n        var that = this,\n            previous = that.caret.previousSibling,\n            startOffset = 0;\n\n        if (previous) {\n            startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n        }\n\n        var container = that.caret.parentNode;\n        var containerIndex = previous ? findNodeIndex(previous) : 0;\n\n        dom.remove(that.caret);\n        normalize(container);\n\n        var node = container.childNodes[containerIndex];\n\n        if (isDataNode(node)) {\n            range.setStart(node, startOffset);\n        } else if (node) {\n            var textNode = dom.lastTextNode(node);\n            if (textNode) {\n                range.setStart(textNode, textNode.nodeValue.length);\n            } else {\n                range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n            }\n        } else {\n            if (!browser.msie && !container.innerHTML) {\n                container.innerHTML = '<br _moz_dirty=\"\" />';\n            }\n\n            range.selectNodeContents(container);\n        }\n        range.collapse(true);\n    },\n\n    add: function(range, expand) {\n        var that = this;\n\n        var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (expand && range.collapsed) {\n            that.addCaret(range);\n            range = RangeUtils.expand(range);\n        }\n\n        var rangeBoundary = range.cloneRange();\n\n        rangeBoundary.collapse(false);\n        that.end = dom.create(doc, 'span', { className: 'k-marker' });\n        rangeBoundary.insertNode(that.end);\n\n        rangeBoundary = range.cloneRange();\n        rangeBoundary.collapse(true);\n        that.start = that.end.cloneNode(true);\n        rangeBoundary.insertNode(that.start);\n\n        that._removeDeadMarkers(that.start, that.end);\n\n        if (collapsed) {\n            var bom = doc.createTextNode(\"\\ufeff\");\n            dom.insertAfter(bom.cloneNode(), that.start);\n            dom.insertBefore(bom, that.end);\n        }\n\n        normalize(range.commonAncestorContainer);\n\n        range.setStartBefore(that.start);\n        range.setEndAfter(that.end);\n\n        return range;\n    },\n\n    _removeDeadMarkers: function(start, end) {\n        if (start.previousSibling && start.previousSibling.nodeValue == \"\\ufeff\") {\n            dom.remove(start.previousSibling);\n        }\n\n        if (end.nextSibling && end.nextSibling.nodeValue == \"\\ufeff\") {\n            dom.remove(end.nextSibling);\n        }\n    },\n\n    _normalizedIndex: function(node) {\n        var index = findNodeIndex(node);\n        var pointer = node;\n\n        while (pointer.previousSibling) {\n            if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                index--;\n            }\n\n            pointer = pointer.previousSibling;\n        }\n\n        return index;\n    },\n\n    remove: function(range) {\n        var that = this,\n            start = that.start,\n            end = that.end,\n            shouldNormalizeStart,\n            shouldNormalizeEnd,\n            shouldNormalize;\n\n        normalize(range.commonAncestorContainer);\n\n        while (!start.nextSibling && start.parentNode) {\n            start = start.parentNode;\n        }\n\n        while (!end.previousSibling && end.parentNode) {\n            end = end.parentNode;\n        }\n\n        // merely accessing the siblings will solve range issues in IE\n        shouldNormalizeStart = (start.previousSibling && start.previousSibling.nodeType == 3) &&\n                               (start.nextSibling && start.nextSibling.nodeType == 3);\n\n        shouldNormalizeEnd = (end.previousSibling && end.previousSibling.nodeType == 3) &&\n                             (end.nextSibling && end.nextSibling.nodeType == 3);\n\n        shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n\n        start = start.nextSibling;\n        end = end.previousSibling;\n\n        var isBomSelected = start === end && dom.isBom(start);\n        if (isBomSelected && start.length > 1) {\n            start.nodeValue = start.nodeValue.charAt(0);\n        }\n\n        var collapsed = isBomSelected;\n        var collapsedToStart = false;\n        // collapsed range\n        if (start == that.end) {\n            collapsedToStart = !!that.start.previousSibling;\n            start = end = that.start.previousSibling || that.end.nextSibling;\n            collapsed = true;\n        }\n\n        dom.remove(that.start);\n        dom.remove(that.end);\n\n        if (!start || !end) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            range.collapse(true);\n            return;\n        }\n\n        var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n        var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n\n        if (start.nodeType == 3) {\n            while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                start = start.previousSibling;\n                startOffset += start.nodeValue.length;\n            }\n        }\n\n        if (end.nodeType == 3) {\n            while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                end = end.previousSibling;\n                endOffset += end.nodeValue.length;\n            }\n        }\n\n        var startParent = start.parentNode;\n        var endParent = end.parentNode;\n        var startIndex = this._normalizedIndex(start);\n        var endIndex = this._normalizedIndex(end);\n\n        normalize(startParent);\n        if (start.nodeType == 3) {\n            start = startParent.childNodes[startIndex];\n        }\n\n        normalize(endParent);\n        if (end.nodeType == 3) {\n            end = endParent.childNodes[endIndex];\n        }\n\n        if (collapsed) {\n            if (start.nodeType == 3) {\n                range.setStart(start, startOffset);\n            } else {\n                range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n            }\n\n            range.collapse(true);\n\n        } else {\n            if (start.nodeType == 3) {\n                range.setStart(start, startOffset);\n            } else {\n                range.setStartBefore(start);\n            }\n\n            if (end.nodeType == 3) {\n                range.setEnd(end, endOffset);\n            } else {\n                range.setEndAfter(end);\n            }\n        }\n\n        if (that.caret) {\n            that.removeCaret(range);\n        }\n    }\n});\n\nvar boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n\nvar RangeUtils = {\n    nodes: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n        if (!nodes.length) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                nodes = dom.significantChildNodes(range.commonAncestorContainer);\n            }\n        }\n        return nodes;\n    },\n\n    textNodes: function(range) {\n        var allNodes = new RangeEnumerator(range).enumerate(),\n            result = allNodes.filter(function(node) {\n                return dom.allowsTextContent(node.parentElement);\n            });\n\n        return result;\n    },\n\n    editableTextNodes: function(range) {\n        var nodes = [],\n            immutableParent = Editor.Immutables && Editor.Immutables.immutableParent,\n            result = [];\n\n        if (immutableParent && !immutableParent(range.commonAncestorContainer)) {\n            nodes = new ImmutablesRangeEnumerator(range).enumerate();\n            result = nodes.filter(function(node) {\n                return dom.allowsTextContent(node.parentElement);\n            });\n        }\n\n        return result;\n    },\n\n    documentFromRange: function(range) {\n        var startContainer = range.startContainer;\n        return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n    },\n\n    createRange: function(document) {\n        return document.createRange();\n    },\n\n    selectRange: function(range) {\n        var image = RangeUtils.image(range);\n        if (image) {\n            range.setStartAfter(image);\n            range.setEndAfter(image);\n        }\n        var selection = SelectionUtils.selectionFromRange(range);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    },\n\n    stringify: function(range) {\n        return kendo.format(\n            \"{0}:{1} - {2}:{3}\",\n            dom.name(range.startContainer), range.startOffset,\n            dom.name(range.endContainer), range.endOffset\n        );\n    },\n\n    split: function(range, node, trim) {\n        function partition(start) {\n            var partitionRange = range.cloneRange();\n            partitionRange.collapse(start);\n            partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n            var contents = partitionRange.extractContents();\n            if (trim) {\n                contents = dom.trim(contents);\n            }\n            dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n        }\n        partition(true);\n        partition(false);\n    },\n\n    mapAll: function(range, map) {\n        var nodes = [];\n\n        new RangeIterator(range).traverse(function(node) {\n            var mapped = map(node);\n\n            if (mapped && $.inArray(mapped, nodes) < 0) {\n                nodes.push(mapped);\n            }\n        });\n\n        return nodes;\n    },\n\n    getAll: function(range, predicate) {\n        var selector = predicate;\n\n        if (typeof predicate == \"string\") {\n            predicate = function(node) {\n                return dom.is(node, selector);\n            };\n        }\n\n        return RangeUtils.mapAll(range, function(node) {\n            if (predicate(node)) {\n                return node;\n            }\n        });\n    },\n\n    getMarkers: function(range) {\n        return RangeUtils.getAll(range, function(node) {\n            return node.className == 'k-marker';\n        });\n    },\n\n    image: function(range) {\n        var nodes = RangeUtils.getAll(range, \"img\");\n\n        if (nodes.length == 1) {\n            return nodes[0];\n        }\n    },\n\n    isStartOf: function(originalRange, node) {\n        if (originalRange.startOffset !== 0) {\n            return false;\n        }\n\n        var range = originalRange.cloneRange();\n\n        while (range.startOffset === 0 && range.startContainer != node) {\n            var index = dom.findNodeIndex(range.startContainer);\n            var parent = range.startContainer.parentNode;\n\n            while (index > 0 && parent[index - 1] && dom.insignificant(parent[index - 1])) {\n                index--;\n            }\n\n            range.setStart(parent, index);\n        }\n\n        return range.startOffset === 0 && range.startContainer == node;\n    },\n\n    isEndOf: function(originalRange, node) {\n        var range = originalRange.cloneRange();\n\n        range.collapse(false);\n\n        var start = range.startContainer;\n\n        if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n            range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n            range.collapse(true);\n        }\n\n        range.setEnd(node, dom.getNodeLength(node));\n\n        var nodes = [];\n\n        function visit(node) {\n            if (!dom.insignificant(node) && !(dom.isDataNode(node) && /^[\\ufeff]*$/.test(node.nodeValue))) {\n                nodes.push(node);\n            }\n        }\n\n        new RangeIterator(range).traverse(visit);\n\n        return !nodes.length;\n    },\n\n    wrapSelectedElements: function(range) {\n        var startEditable = dom.editableParent(range.startContainer);\n        var endEditable = dom.editableParent(range.endContainer);\n\n        while (range.startOffset === 0 && range.startContainer != startEditable) {\n            range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n        }\n\n        function isEnd(offset, container) {\n            var length = dom.getNodeLength(container);\n\n            if (offset == length) {\n                return true;\n            }\n\n            for (var i = offset; i < length; i++) {\n                if (!dom.insignificant(container.childNodes[i])) {\n                    return false;\n                }\n            }\n\n            return true;\n        }\n\n        while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n            range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n        }\n\n        return range;\n    },\n\n    expand: function(range) {\n        var result = range.cloneRange();\n\n        var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n        var endContainer = result.endContainer.childNodes[result.endOffset];\n\n        if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n            return result;\n        }\n\n        var beforeCaret = startContainer.nodeValue;\n        var afterCaret = endContainer.nodeValue;\n\n        if (!beforeCaret || !afterCaret) {\n            return result;\n        }\n\n        var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n        var endOffset = afterCaret.search(boundary);\n\n        if (!startOffset || !endOffset) {\n            return result;\n        }\n\n        endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n        startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n\n        result.setStart(startContainer, startOffset);\n        result.setEnd(endContainer, endOffset);\n\n        return result;\n    },\n\n    isExpandable: function(range) {\n        var node = range.startContainer;\n        var rangeDocument = RangeUtils.documentFromRange(range);\n\n        if (node == rangeDocument || node == rangeDocument.body) {\n            return false;\n        }\n\n        var result = range.cloneRange();\n\n        var value = node.nodeValue;\n        if (!value) {\n            return false;\n        }\n\n        var beforeCaret = value.substring(0, result.startOffset);\n        var afterCaret = value.substring(result.startOffset);\n\n        var startOffset = 0, endOffset = 0;\n\n        if (beforeCaret) {\n            startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n        }\n\n        if (afterCaret) {\n            endOffset = afterCaret.search(boundary);\n        }\n\n        return startOffset && endOffset;\n    }\n};\n\nextend(Editor, {\n    SelectionUtils: SelectionUtils,\n    W3CRange: W3CRange,\n    RangeIterator: RangeIterator,\n    W3CSelection: W3CSelection,\n    RangeEnumerator: RangeEnumerator,\n    RestorePoint: RestorePoint,\n    Marker: Marker,\n    RangeUtils: RangeUtils\n});\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/immutables',[ \"./range\" ], f);\n})(function() {\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        template = kendo.template,\n        RangeUtils = Editor.RangeUtils,\n        complexBlocks = [\"ul\", \"ol\", \"tbody\", \"thead\", \"table\"],\n        toolsToBeUpdated = [\n            \"bold\",\n            \"italic\",\n            \"underline\",\n            \"strikethrough\",\n            \"superscript\",\n            \"subscript\",\n            \"forecolor\",\n            \"backcolor\",\n            \"fontname\",\n            \"fontsize\",\n            \"createlink\",\n            \"unlink\",\n            \"autolink\",\n            \"addcolumnleft\",\n            \"addcolumnright\",\n            \"addrowabove\",\n            \"addrowbelow\",\n            \"deleterow\",\n            \"deletecolumn\",\n            \"mergecells\",\n            \"formatting\",\n            \"cleanformatting\" ],\n        IMMUTABALE = \"k-immutable\",\n        IMMUTABALE_MARKER_SELECTOR = \"[\" + IMMUTABALE + \"]\",\n        IMMUTABLE_SELECTOR = \"[contenteditable='false']\";\n\n    var rootCondition = function(node) {\n        return $(node).is(\"body,.k-editor\");\n    };\n\n    var immutable = function(node) {\n        return node.getAttribute && node.getAttribute(\"contenteditable\") == \"false\";\n    };\n\n    var immutableParent = function(node) {\n        return dom.closestBy(node, immutable, rootCondition);\n    };\n\n    var expandImmutablesIn = function(range) {\n        var startImmutableParent = immutableParent(range.startContainer);\n        var endImmutableParent = immutableParent(range.endContainer);\n\n        if (startImmutableParent || endImmutableParent) {\n            if (startImmutableParent) {\n                range.setStartBefore(startImmutableParent);\n            }\n            if (endImmutableParent) {\n                range.setEndAfter(endImmutableParent);\n            }\n        }\n    };\n\n    var immutablesContext = function(range) {\n        if (immutableParent(range.commonAncestorContainer)) {\n            return true;\n        } else if (immutableParent(range.startContainer) || immutableParent(range.endContainer)) {\n            var editableNodes = RangeUtils.editableTextNodes(range);\n            if (editableNodes.length === 0) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    var randomId = function(length) {\n        var result = '';\n        var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n        for (var i = length || 10; i > 0; --i) {\n            result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\n        }\n        return result;\n    };\n\n    var removeImmutables = function(root) {\n        var serializedImmutables = { empty: true }, nodeName, id, serialized;\n         $(root).find(IMMUTABLE_SELECTOR).each(function(i, node) {\n            nodeName = dom.name(node);\n            id = randomId();\n            serialized = \"<\" + nodeName + \" \" + IMMUTABALE + \"='\" + id + \"'></\" + nodeName + \">\";\n            serializedImmutables[id] = { node: node, style: $(node).attr(\"style\") };\n            serializedImmutables.empty = false;\n            $(node).replaceWith(serialized);\n        });\n\n        return serializedImmutables;\n    };\n\n    var restoreImmutables = function(root, serializedImmutables) {\n        var id, immutable;\n        $(root).find(IMMUTABALE_MARKER_SELECTOR).each(function(i, node) {\n            id = node.getAttribute(IMMUTABALE);\n            immutable = serializedImmutables[id];\n            $(node).replaceWith(immutable.node);\n            if (immutable.style != $(immutable.node).attr(\"style\")) {\n                $(immutable.node).removeAttr(\"style\").attr(\"style\", immutable.style);\n            }\n        });\n    };\n\n    var deletingKey = function(keyCode) {\n        var keys = kendo.keys;\n        return keyCode === keys.BACKSPACE || keyCode == keys.DELETE;\n    };\n    var updateToolOptions = function(tool) {\n        var options = tool ? tool.options : undefined;\n        if (options && options.finder) {\n            options.finder._initOptions({ immutables: true });\n        }\n    };\n\n    var Immutables = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n            this.serializedImmutables = {};\n            this.options = $.extend({}, editor && editor.options && editor.options.immutables);\n\n            var tools = editor.toolbar.tools;\n            updateToolOptions(tools.justifyLeft);\n            updateToolOptions(tools.justifyCenter);\n            updateToolOptions(tools.justifyRight);\n            updateToolOptions(tools.justifyFull);\n        },\n\n        serialize: function(node) {\n            var result = this._toHtml(node),\n                id;\n\n            if (result.indexOf(IMMUTABALE) === -1) {\n                id = this.randomId();\n                result = result.replace(/>/, ' ' + IMMUTABALE + '=\"' + id + '\">');\n            } else {\n                id = result.match(/k-immutable\\s*=\\s*['\"](.*)['\"]/)[1];\n            }\n\n            this.serializedImmutables[id] = node;\n            return result;\n        },\n\n        _toHtml: function(node) {\n            var serialization = this.options.serialization;\n            var serializationType = typeof serialization;\n            var nodeName;\n\n            switch (serializationType) {\n                case \"string\":\n                    return template(serialization)(node);\n                case \"function\":\n                    return serialization(node);\n                default:\n                    nodeName = dom.name(node);\n                    return \"<\" + nodeName + \"></\" + nodeName + \">\";\n            }\n        },\n\n        deserialize: function(node) {\n            var that = this;\n            var deserialization = this.options.deserialization;\n\n            $(IMMUTABALE_MARKER_SELECTOR, node).each(function() {\n                var id = this.getAttribute(IMMUTABALE);\n                var immutable = that.serializedImmutables[id];\n                if (kendo.isFunction(deserialization)) {\n                    deserialization(this, immutable);\n                }\n                $(this).replaceWith(immutable);\n            });\n\n            that.serializedImmutables = {};\n        },\n\n        randomId: function(length) {\n            return randomId(length);\n        },\n\n        keydown: function(e, range) {\n            var isDeleting = deletingKey(e.keyCode);\n            var shouldCancelEvent = (isDeleting && this._cancelDeleting(e, range)) ||\n                (!isDeleting && this._cancelTyping(e, range));\n\n            if (shouldCancelEvent) {\n                e.preventDefault();\n                return true;\n            }\n        },\n\n        _cancelTyping: function(e, range) {\n            var editor = this.editor;\n            var keyboard = editor.keyboard;\n\n            return range.collapsed && !keyboard.typingInProgress &&\n                keyboard.isTypingKey(e) && immutablesContext(range);\n        },\n\n        _cancelDeleting: function(e, range) {\n            var keys = kendo.keys;\n            var backspace = e.keyCode === keys.BACKSPACE;\n            var del = e.keyCode == keys.DELETE;\n\n            if (!backspace && !del) {\n                return false;\n            }\n            var cancelDeleting = false;\n            if (range.collapsed) {\n                if (immutablesContext(range)) {\n                    return true;\n                }\n                var immutable = this.nextImmutable(range, del);\n                if (immutable && backspace) {\n                    var closestSelectionLi = dom.closest(range.commonAncestorContainer, \"li\");\n                    if (closestSelectionLi) {\n                        var closestImmutableLi = dom.closest(immutable, \"li\");\n                        if (closestImmutableLi && closestImmutableLi !== closestSelectionLi) {\n                            return cancelDeleting;\n                        }\n                    }\n                }\n                if (immutable && !dom.tableCell(immutable)) {\n                    if (dom.parentOfType(immutable, complexBlocks) === dom.parentOfType(range.commonAncestorContainer, complexBlocks)) {\n                        while (immutable && immutable.parentNode.childNodes.length == 1) {\n                            immutable = immutable.parentNode;\n                        }\n                        if (dom.tableCell(immutable)) {\n                            return cancelDeleting;\n                        }\n                        this._removeImmutable(immutable, range);\n                    }\n                    cancelDeleting = true;\n                }\n            }\n            return cancelDeleting;\n        },\n\n        nextImmutable: function(range, forwards) {\n            var commonContainer = range.commonAncestorContainer;\n            if (dom.isBom(commonContainer) || ((forwards && RangeUtils.isEndOf(range, commonContainer)) || (!forwards && RangeUtils.isStartOf(range, commonContainer)))) {\n                var next = this._nextNode(commonContainer, forwards);\n                if (next && dom.isBlock(next) && !immutableParent(next)) {\n                    while (next && next.children && next.children[forwards ? 0 : next.children.length - 1]) {\n                        next = next.children[forwards ? 0 : next.children.length - 1];\n                    }\n                }\n                return immutableParent(next);\n            }\n        },\n\n        _removeImmutable: function(immutable, range) {\n            var editor = this.editor;\n            var startRestorePoint = new Editor.RestorePoint(range, editor.body);\n            dom.remove(immutable);\n            Editor._finishUpdate(editor, startRestorePoint);\n        },\n\n        _nextNode: function(node, forwards) {\n            var sibling = forwards ? \"nextSibling\" : \"previousSibling\";\n            var current = node, next;\n            while (current && !next) {\n                next = current[sibling];\n                if (next && dom.isDataNode(next) && /^\\s|[\\ufeff]$/.test(next.nodeValue)) {\n                    current = next;\n                    next = current[sibling];\n                }\n                if (!next) {\n                    current = current.parentNode;\n                }\n            }\n            return next;\n        }\n    });\n\n    Immutables.immutable = immutable;\n    Immutables.immutableParent = immutableParent;\n    Immutables.expandImmutablesIn = expandImmutablesIn;\n    Immutables.immutablesContext = immutablesContext;\n    Immutables.toolsToBeUpdated = toolsToBeUpdated;\n    Immutables.removeImmutables = removeImmutables;\n    Immutables.restoreImmutables = restoreImmutables;\n\n    Editor.Immutables = Immutables;\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/command',[ \"./immutables\" ], f);\n})(function() {\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        editorNS = kendo.ui.editor,\n        dom = editorNS.Dom,\n        RestorePoint = editorNS.RestorePoint,\n        Marker = editorNS.Marker,\n        extend = $.extend;\n\nfunction finishUpdate(editor, startRestorePoint) {\n    var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n    var command = new GenericCommand(startRestorePoint, endRestorePoint);\n    command.editor = editor;\n\n    editor.undoRedoStack.push(command);\n    editor.toolbar.refreshTools();\n\n    return endRestorePoint;\n}\n\nvar Command = Class.extend({\n    init: function(options) {\n        this.options = options;\n        this.restorePoint = new RestorePoint(options.range, options.body, { immutables: options.immutables });\n        this.marker = new Marker();\n        this.formatter = options.formatter;\n    },\n\n    getRange: function() {\n        return this.restorePoint.toRange();\n    },\n\n    lockRange: function(expand) {\n        return this.marker.add(this.getRange(), expand);\n    },\n\n    releaseRange: function(range) {\n        this.marker.remove(range);\n        this.editor.selectRange(range);\n    },\n\n    undo: function() {\n        var point = this.restorePoint;\n        point.restoreHtml();\n        this.editor.selectRange(point.toRange());\n    },\n\n    redo: function() {\n        this.exec();\n    },\n\n    createDialog: function(content, options) {\n        var editor = this.editor;\n\n        return $(content).appendTo(document.body)\n            .kendoWindow(extend({}, editor.options.dialogOptions, options))\n            .closest(\".k-window\").toggleClass(\"k-rtl\", kendo.support.isRtl(editor.wrapper)).end();\n    },\n\n    exec: function() {\n        var range = this.lockRange(true);\n        this.formatter.editor = this.editor;\n        this.formatter.toggle(range);\n        this.releaseRange(range);\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    expandImmutablesIn: function(range) {\n        if (this.immutables()) {\n            kendo.ui.editor.Immutables.expandImmutablesIn(range);\n            this.restorePoint = new RestorePoint(range, this.editor.body);\n        }\n    }\n});\n\nvar GenericCommand = Class.extend({\n    init: function(startRestorePoint, endRestorePoint) {\n        this.body = startRestorePoint.body;\n        this.startRestorePoint = startRestorePoint;\n        this.endRestorePoint = endRestorePoint;\n    },\n\n    redo: function() {\n        dom.removeChildren(this.body);\n\n        this.body.innerHTML = this.endRestorePoint.html;\n        this.editor.selectRange(this.endRestorePoint.toRange());\n    },\n\n    undo: function() {\n        dom.removeChildren(this.body);\n\n        this.body.innerHTML = this.startRestorePoint.html;\n        this.editor.selectRange(this.startRestorePoint.toRange());\n    }\n});\n\nextend(editorNS, {\n    _finishUpdate: finishUpdate,\n    Command: Command,\n    GenericCommand: GenericCommand\n});\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/toolbar',[ \"./range\" ], f);\n})(function() {\n\n(function($,undefined) {\n    var kendo = window.kendo;\n    var ui = kendo.ui;\n    var editorNS = ui.editor;\n    var Widget = ui.Widget;\n    var extend = $.extend;\n    var keys = kendo.keys;\n    var NS = \".kendoEditor\";\n    var EditorUtils = editorNS.EditorUtils;\n    var ToolTemplate = editorNS.ToolTemplate;\n    var Tool = editorNS.Tool;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n    var OVERFLOWANCHOR = \"overflowAnchor\";\n\n    var focusable = \".k-tool-group:visible .k-tool:not(.k-disabled):not([disabled]),\" +\n                    \".k-tool.k-overflow-anchor:visible,\" +\n                    \".k-tool-group:visible .k-colorpicker:not(input),\" +\n                    \".k-tool-group:visible .k-selectbox,\" +\n                    \".k-tool-group:visible .k-dropdownlist,\" +\n                    \".k-tool-group:visible .k-combobox .k-input-inner\";\n\n    var toolNamesByCssClass = {\n        \"k-i-sup-script\": \"superscript\",\n        \"k-i-sub-script\": \"subscript\",\n        \"k-i-align-left\": \"justifyLeft\",\n        \"k-i-align-center\": \"justifyCenter\",\n        \"k-i-align-right\": \"justifyRight\",\n        \"k-i-align-justify\": \"justifyFull\",\n        \"k-i-list-unordered\": \"insertUnorderedList\",\n        \"k-i-list-ordered\": \"insertOrderedList\",\n        \"k-i-list-roman-upper\": \"insertUpperRomanList\",\n        \"k-i-list-roman-lower\": \"insertLowerRomanList\",\n        \"k-i-import\": \"import\",\n        \"k-i-indent-increase\": \"indent\",\n        \"k-i-indent-decrease\": \"outdent\",\n        \"k-i-link-horizontal\": \"createLink\",\n        \"k-i-unlink-horizontal\": \"unlink\",\n        \"k-i-image\": \"insertImage\",\n        \"k-i-file-add\": \"insertFile\",\n        \"k-i-html\": \"viewHtml\",\n        \"k-i-foreground-color\": \"foreColor\",\n        \"k-i-paint\": \"backColor\",\n        \"k-i-table-insert\": \"createTable\",\n        \"k-i-table-column-insert-left\": \"addColumnLeft\",\n        \"k-i-table-column-insert-right\": \"addColumnRight\",\n        \"k-i-table-row-insert-above\": \"addRowAbove\",\n        \"k-i-table-row-insert-below\": \"addRowBelow\",\n        \"k-i-table-row-delete\": \"deleteRow\",\n        \"k-i-table-column-delete\": \"deleteColumn\",\n        \"k-i-table-properties\": \"tableWizard\",\n        \"k-i-table-wizard\": \"tableWizardInsert\",\n        \"k-i-table-position-left\": \"tableAlignLeft\",\n        \"k-i-table-position-center\": \"tableAlignCenter\",\n        \"k-i-table-position-right\": \"tableAlignRight\",\n        \"k-i-clear-css\": \"cleanFormatting\",\n        \"k-i-cells-merge-horizontally\": \"mergeCellsHorizontally\",\n        \"k-i-cells-merge-vertically\": \"mergeCellsVertically\",\n        \"k-i-cell-split-horizontally\": \"splitCellHorizontally\",\n        \"k-i-cell-split-vertically\": \"splitCellVertically\",\n        \"k-i-copy-format\": \"copyFormat\",\n        \"k-i-apply-format\": \"applyFormat\",\n        \".k-i-undo\": \"undo\",\n        \"k-i-redo\": \"redo\",\n\n    };\n\n    var OverflowAnchorTool = Tool.extend({\n        initialize: function(ui, options) {\n            var toolbar = options.editor.toolbar;\n\n            ui.attr(\"aria-controls\", options.editor.element.attr(\"id\"))\n                .on(\"click\", (function() {\n                    this.overflowPopup.toggle();\n                }).bind(toolbar));\n        },\n\n        options: {\n            name: OVERFLOWANCHOR\n        },\n\n        command: $.noop,\n        update: $.noop,\n        destroy: $.noop\n\n    });\n\n    EditorUtils.registerTool(OVERFLOWANCHOR, new OverflowAnchorTool({\n        key: \"\",\n        ctrl: true,\n        template: new ToolTemplate({ template: EditorUtils.overflowAnchorTemplate })\n    }));\n\n    var Toolbar = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            options = extend({}, options, { name: \"EditorToolbar\" });\n\n            Widget.fn.init.call(that, element, options);\n\n            if (options.popup) {\n                that._initPopup();\n            }\n\n            if (options.resizable && options.resizable.toolbar) {\n                that._resizeHandler = kendo.onResize(function() {\n                    that.resize(true);\n                });\n\n                that.element.addClass(\"k-toolbar-resizable\");\n            }\n        },\n\n        events: [\n            \"execute\"\n        ],\n\n        groups: {\n            basic: [\"bold\", \"italic\", \"underline\", \"strikethrough\"],\n            undo: [\"undo\", \"redo\"],\n            scripts: [\"subscript\", \"superscript\" ],\n            alignment: [\"justifyLeft\", \"justifyCenter\", \"justifyRight\", \"justifyFull\" ],\n            links: [\"insertImage\", \"insertFile\", \"createLink\", \"unlink\"],\n            lists: [\"insertUnorderedList\", \"insertOrderedList\", \"insertUpperRomanList\", \"insertLowerRomanList\", \"indent\", \"outdent\"],\n            tablesInsert: [\"createTable\"],\n            tablesAddDelete: [ \"addColumnLeft\", \"addColumnRight\", \"addRowAbove\", \"addRowBelow\", \"deleteRow\", \"deleteColumn\" ],\n            tablesMerge: [ \"mergeCellsHorizontally\", \"mergeCellsVertically\", \"splitCellHorizontally\", \"splitCellVertically\" ],\n            tablesPosition: [ \"tableAlignLeft\", \"tableAlignCenter\", \"tableAlignRight\" ],\n            advanced: [ \"viewHtml\", \"cleanFormatting\", \"print\", \"pdf\", \"exportAs\", \"import\"],\n            fonts: [ \"fontName\", \"fontSize\" ],\n            colors: [ \"foreColor\", \"backColor\" ],\n            formatPainter: [ \"copyFormat\", \"applyFormat\" ]\n        },\n\n        overflowFlaseTools: [ \"formatting\", \"fontName\", \"fontSize\", \"foreColor\", \"backColor\", \"insertHtml\" ],\n\n        _initPopup: function() {\n            var that = this;\n            this.window = $(this.element)\n                .wrap(\"<div class='editorToolbarWindow' />\")\n                .parent()\n                .prepend(\"<span class='k-editortoolbar-dragHandle'><span class='k-icon k-i-handler-drag'></span></span>\")\n                .kendoWindow({\n                    title: false,\n                    resizable: false,\n                    draggable: {\n                        dragHandle: \".k-editortoolbar-dragHandle\"\n                    },\n                    animation: {\n                        open: { effects: \"fade:in\" },\n                        close: { effects: \"fade:out\" }\n                    },\n                    minHeight: 42,\n                    visible: false,\n                    autoFocus: false,\n                    actions: [],\n                    dragend: function() {\n                        this._moved = true;\n                    }\n                })\n                .on(\"mousedown\", function(e) {\n                    if (!$(e.target).is(\".k-icon\")) {\n                        that.preventPopupHide = true;\n                    }\n                })\n                .on(\"focusout\", function() {\n                    that.options.editor.element.focusout();\n                })\n                .data(\"kendoWindow\");\n        },\n\n        _toggleOverflowStyles: function(element, show) {\n            element\n                .find(\"> li\").toggleClass(\"k-item\", show)\n                .find(\".k-tool:not(.k-disabled), .k-overflow-button\").toggleClass(\"k-overflow-button\", show);\n        },\n\n        _initOverflowPopup: function(ui) {\n            var that = this;\n            var popupTemplate = \"<ul class='k-editor-overflow-popup k-overflow-container k-list-container'></ul>\";\n\n            that.overflowPopup = $(popupTemplate).appendTo(\"body\").kendoPopup({\n                anchor: ui,\n                origin: kendo.support.isRtl(that.element) ? \"bottom left\" : \"bottom right\",\n                position: kendo.support.isRtl(that.element) ? \"top left\" : \"top right\",\n                copyAnchorStyles: false,\n                open: function(e) {\n                    if (this.element.is(\":empty\")) {\n                        e.preventDefault();\n                    }\n\n                    that._toggleOverflowStyles(this.element, true);\n                    ui.attr(\"aria-expanded\", true);\n                },\n                close: function() {\n                    ui.attr(\"aria-expanded\", false);\n                },\n                activate: that.focusOverflowPopup.bind(that)\n            }).data(\"kendoPopup\");\n        },\n\n        items: function() {\n            var isResizable = this.options.resizable && this.options.resizable.toolbar,\n                popup, result;\n\n            result = this.element.children().find(\"> *, select\");\n\n            if (isResizable) {\n                popup = this.overflowPopup;\n                result = result.add(popup.element.children().find(\"> *\"));\n            }\n\n            return result;\n        },\n\n        focused: function() {\n            var active = kendo._activeElement(),\n                popup = this.window,\n                overflowPopup = this.overflowPopup;\n\n            return (popup && $(active).closest(popup.wrapper).length) ||\n                (overflowPopup && overflowPopup.visible());\n        },\n\n        toolById: function(name) {\n            var id, tools = this.tools;\n\n            for (id in tools) {\n                if (id.toLowerCase() == name) {\n                    return tools[id];\n                }\n            }\n        },\n\n        toolGroupFor: function(toolName) {\n            var i, groups = this.groups;\n\n            if (this.isCustomTool(toolName)) {\n                return \"custom\";\n            }\n\n            for (i in groups) {\n                if ($.inArray(toolName, groups[i]) >= 0) {\n                    return i;\n                }\n            }\n        },\n\n        bindTo: function(editor) {\n            var that = this,\n                window = that.window;\n\n            // detach from editor that was previously listened to\n            if (that._editor) {\n                that._editor.unbind(\"select\", that.resize.bind(that));\n            }\n\n            that._editor = editor;\n\n            if (that.options.resizable && that.options.resizable.toolbar) {\n                editor.options.tools.push(OVERFLOWANCHOR);\n            }\n\n            // re-initialize the tools\n            that.tools = that.expandTools(editor.options.tools);\n            that.render();\n\n            that.element.find(\".k-combobox .k-input-inner\").on(\"keydown\", function(e) {\n                var combobox = $(this).closest(\".k-combobox\").data(\"kendoComboBox\"),\n                    key = e.keyCode;\n\n                if (key == keys.RIGHT || key == keys.LEFT) {\n                    combobox.close();\n                } else if (key == keys.DOWN) {\n                    if (!combobox.dropDown.isOpened()) {\n                        e.stopImmediatePropagation();\n                        combobox.open();\n                    }\n                }\n            });\n\n            that._attachEvents();\n\n            that.items().each(function initializeTool() {\n\n                var toolName = that._toolName(this),\n                    tool = toolName !== \"moreVertical\" ? that.tools[toolName] : that.tools.overflowAnchor,\n                    options = tool && tool.options,\n                    messages = editor.options.messages,\n                    description = options && options.tooltip || messages[toolName],\n                    ui = $(this);\n\n                if (!tool || !tool.initialize) {\n                    return;\n                }\n\n                if (toolName == \"fontSize\" || toolName == \"fontName\") {\n                    var inheritText = messages[toolName + \"Inherit\"];\n\n                    ui.find(\"input\").val(inheritText).end()\n                      .find(\"span.k-input-inner\").text(inheritText).end();\n                }\n\n                tool.initialize(ui, {\n                    title: that._appendShortcutSequence(description, tool),\n                    editor: that._editor\n                });\n\n                ui.closest(\".k-dropdownlist\", that.element).addClass(\"k-editor-widget\");\n                ui.closest(\".k-combobox\", that.element).addClass(\"k-editor-widget\");\n\n                ui.closest(\".k-colorpicker\", that.element).next(\".k-colorpicker\").addClass(\"k-editor-widget\");\n            });\n\n            editor.bind(\"select\", that.resize.bind(that));\n\n            that.update();\n\n            if (window) {\n                window.wrapper.css({ top: \"\", left: \"\", width: \"\" });\n            }\n        },\n\n        show: function() {\n            var that = this,\n                window = that.window,\n                editorOptions = that.options.editor,\n                wrapper, editorElement, editorOffset,\n                browser = kendo.support.browser;\n\n            if (window) {\n                wrapper = window.wrapper;\n                editorElement = editorOptions.element;\n\n                if (!wrapper.is(\":visible\") || !that.window.options.visible) {\n\n                    if (!wrapper[0].style.width) {\n                        wrapper.width(this._getWindowWidth());\n                    }\n\n                    // track content position when other parts of page change\n                    if (!window._moved) {\n                        editorOffset = editorElement.offset();\n                        wrapper.css({\n                            top: Math.max(0, parseInt(editorOffset.top, 10) - outerHeight(wrapper) - parseInt(that.window.element.css(\"padding-bottom\"), 10)),\n                            left: Math.max(0, parseInt(editorOffset.left, 10))\n                        });\n                    }\n\n                    if ((browser.msie || browser.edge) && that._overlaps(editorElement)) {\n                        setTimeout(function() {\n                            window.open();\n                        }, 0);\n                    } else {\n                        window.open();\n                    }\n                }\n            }\n        },\n\n        _getWindowWidth: function() {\n            var that = this,\n                wrapper = that.window.wrapper,\n                editorElement = that.options.editor.element;\n\n            return outerWidth(editorElement) - parseInt(wrapper.css(\"border-left-width\"), 10) - parseInt(wrapper.css(\"border-right-width\"), 10);\n        },\n\n        _overlaps: function(box) {\n            var toolbarWrapper = this.window.wrapper,\n                toolbarWrapperOffset = toolbarWrapper.offset(),\n                toolbarWrapperLeft = toolbarWrapperOffset.left,\n                toolbarWrapperTop = toolbarWrapperOffset.top,\n                boxOffset = box.offset(),\n                boxOffsetLeft = boxOffset.left,\n                boxOffsetTop = boxOffset.top;\n\n            return !(boxOffsetLeft + box.width() < toolbarWrapperLeft ||\n                    boxOffsetLeft > toolbarWrapperLeft + toolbarWrapper.width() ||\n                    boxOffsetTop + box.height() < toolbarWrapperTop ||\n                    boxOffsetTop > toolbarWrapperTop + toolbarWrapper.height());\n        },\n\n        hide: function() {\n            if (this.window) {\n                this.window.close();\n            }\n        },\n\n        focus: function() {\n            var TABINDEX = \"tabIndex\";\n            var element = this.element;\n            var tabIndex = this._editor.element.attr(TABINDEX);\n\n            // Chrome can't focus something which has already been focused\n            element.attr(TABINDEX, tabIndex || 0).trigger(\"focus\")\n                .find(focusable).first().trigger(\"focus\");\n\n            if (!tabIndex && tabIndex !== 0) {\n                element.removeAttr(TABINDEX);\n            }\n        },\n\n        focusOverflowPopup: function() {\n            var TABINDEX = \"tabIndex\";\n            var element = this.overflowPopup.element;\n            var tabIndex = this._editor.element.attr(TABINDEX);\n\n            element.closest(\".k-animation-container\").addClass(\"k-overflow-wrapper\");\n\n            element.attr(TABINDEX, tabIndex || 0)\n                .find(focusable).first().trigger(\"focus\");\n\n            if (!tabIndex && tabIndex !== 0) {\n                element.removeAttr(TABINDEX);\n            }\n        },\n\n        _appendShortcutSequence: function(localizedText, tool) {\n            if (!tool.key) {\n                return localizedText;\n            }\n\n            var res = localizedText + \" (\";\n\n            if (tool.ctrl) {\n                res += \"Ctrl + \";\n            }\n\n            if (tool.shift) {\n                res += \"Shift + \";\n            }\n\n            if (tool.alt) {\n                res += \"Alt + \";\n            }\n\n            res += tool.key + \")\";\n\n            return res;\n        },\n\n        _nativeTools: [\n            \"insertLineBreak\",\n            \"insertParagraph\",\n            \"redo\",\n            \"undo\",\n            \"autoLink\"\n        ],\n\n        tools: {}, // tools collection is copied from defaultTools during initialization\n\n        isCustomTool: function(toolName) {\n            return !(toolName in kendo.ui.Editor.defaultTools);\n        },\n\n        // expand the tools parameter to contain tool options objects\n        expandTools: function(tools) {\n            var currentTool,\n                i,\n                nativeTools = this._nativeTools,\n                options,\n                defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools),\n                result = {},\n                name;\n\n            for (i = 0; i < tools.length; i++) {\n                currentTool = tools[i];\n                name = currentTool.name;\n\n                if ($.isPlainObject(currentTool)) {\n                    if (name && defaultTools[name]) {\n                        // configured tool\n                        result[name] = extend({}, defaultTools[name]);\n                        extend(result[name].options, currentTool);\n                    } else {\n                        // custom tool\n                        options = extend({ cssClass: \"k-i-gear\", type: \"button\", title: \"\" }, currentTool);\n                        if (!options.name) {\n                            options.name = \"custom\";\n                        }\n\n                        options.cssClass = \"k-\" + options.name;\n\n                        if (!options.template && options.type == \"button\") {\n                            options.template = editorNS.EditorUtils.buttonTemplate;\n                            options.title = options.title || options.tooltip;\n                        }\n\n                        result[name] = {\n                            options: options\n                        };\n                    }\n                } else if (defaultTools[currentTool]) {\n                    // tool by name\n                    result[currentTool] = defaultTools[currentTool];\n                }\n            }\n\n            for (i = 0; i < nativeTools.length; i++) {\n                if (!result[nativeTools[i]]) {\n                    result[nativeTools[i]] = defaultTools[nativeTools[i]];\n                }\n            }\n\n            return result;\n        },\n\n        render: function() {\n            var that = this,\n                tools = that.tools,\n                options, template, toolElement,\n                toolName,\n                editorElement = that._editor.element,\n                element = that.element.empty(),\n                groupName, newGroupName,\n                toolConfig = that._editor.options.tools,\n                group, i, groupPosition = 0,\n                resizable = that.options.resizable && that.options.resizable.toolbar,\n                overflowFlaseTools = this.overflowFlaseTools;\n\n            function stringify(template) {\n                var result = \"\";\n\n                if (template.getHtml) {\n                    result = template.getHtml();\n                } else {\n                    if (!kendo.isFunction(template)) {\n                        template = kendo.template(template);\n                    }\n\n                    result = template(options);\n                }\n\n                return kendo.trim(result);\n            }\n\n            function endGroup() {\n                if (group.children().length) {\n                    if (resizable) {\n                        group.data(\"position\", groupPosition);\n                        groupPosition++;\n                    }\n\n                    group.appendTo(element);\n                }\n            }\n\n            function startGroup(toolName) {\n                if (toolName !== OVERFLOWANCHOR) {\n                    group = $(\"<li class='k-tool-group' role='presentation' />\");\n                    group.data(\"overflow\", $.inArray(toolName, overflowFlaseTools) === -1 ? true : false);\n                } else {\n                    group = $(\"<li class='k-overflow-tools' />\");\n                }\n            }\n\n            element.empty();\n\n            if (toolConfig.length) {\n                toolName = toolConfig[0].name || toolConfig[0];\n            }\n            startGroup(toolName, overflowFlaseTools);\n\n            for (i = 0; i < toolConfig.length; i++) {\n                toolName = toolConfig[i].name || toolConfig[i];\n                options = tools[toolName] && tools[toolName].options;\n\n                if (!options && $.isPlainObject(toolName)) {\n                    options = toolName;\n                }\n\n                template = options && options.template;\n\n                if (toolName == \"break\") {\n                    endGroup();\n                    $(\"<li class='k-row-break' role='presentation' />\").appendTo(that.element);\n                    startGroup(toolName, overflowFlaseTools);\n                }\n\n                if (!template) {\n                    continue;\n                }\n\n                newGroupName = that.toolGroupFor(toolName);\n\n                if (groupName != newGroupName || toolName == OVERFLOWANCHOR) {\n                    endGroup();\n                    startGroup(toolName, overflowFlaseTools);\n                    groupName = newGroupName;\n                }\n\n                if (toolName == OVERFLOWANCHOR) {\n                    template.options.title = that.options.messages.overflowAnchor;\n                }\n\n                template = stringify(template);\n\n                toolElement = $(template).appendTo(group);\n\n                if (newGroupName == \"custom\") {\n                    endGroup();\n                    startGroup(toolName, overflowFlaseTools);\n                }\n\n                if (options.exec && toolElement.hasClass(\"k-tool\")) {\n                    toolElement.on(\"click\", options.exec.bind(editorElement[0]));\n                }\n            }\n\n            endGroup();\n\n            $(that.element).children(\":has(> .k-tool)\").not(\".k-overflow-tools\").addClass(\"k-button-group\");\n\n            that.updateGroups();\n\n            if (resizable) {\n                that._initOverflowPopup(that.element.find(\".k-overflow-anchor\"));\n            }\n\n            that.angular(\"compile\", function() {\n                return { elements: that.element };\n            });\n        },\n\n        updateGroups: function() {\n            $(this.element).children().not(\".k-overflow-tools\").each(function() {\n                $(this).children()\n                    .removeClass(\"k-group-start k-group-end\")\n                    .first().addClass(\"k-group-start\").end()\n                    .last().addClass(\"k-group-end\").end();\n            });\n        },\n\n        decorateFrom: function(body) {\n            this.items().filter(\".k-decorated\")\n                .each(function() {\n                    var selectBox = $(this).data(\"kendoSelectBox\");\n\n                    if (selectBox) {\n                        selectBox.decorate(body);\n                    }\n                });\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            var id, tools = this.tools;\n\n            for (id in tools) {\n                if (tools[id].destroy) {\n                    tools[id].destroy();\n                }\n            }\n\n            if (this.window) {\n                this.window.destroy();\n            }\n\n            if (this._resizeHandler) {\n                kendo.unbindResize(this._resizeHandler);\n            }\n\n            if (this.overflowPopup) {\n                this.overflowPopup.destroy();\n            }\n        },\n\n        _attachEvents: function() {\n            var that = this,\n                popupElement = that.overflowPopup ? that.overflowPopup.element : $([]);\n\n            that.attachToolsEvents(that.element.add(popupElement));\n        },\n\n        attachToolsEvents: function(element) {\n            var that = this,\n                buttons = \"[role=button].k-tool\",\n                enabledButtons = buttons + \":not(.k-disabled)\" + \", [role=button].k-i-import:not(.k-disabled)\",\n                disabledButtons = buttons + \".k-disabled\",\n                dropdown = \".k-dropdownlist\",\n                colorpicker = \".k-colorpicker\",\n                editorTools = [buttons, dropdown, colorpicker].join(\",\");\n\n            element.off(NS)\n                .on(\"mouseenter\" + NS, enabledButtons, function() { $(this).addClass(\"k-hover\"); })\n                .on(\"mouseleave\" + NS, enabledButtons, function() { $(this).removeClass(\"k-hover\"); })\n                .on(\"mousedown\" + NS, editorTools, function(e) {\n                    e.preventDefault();\n                })\n                .on(\"keydown\" + NS, focusable, function(e) {\n                    var current = this;\n                    var resizable = that.options.resizable && that.options.resizable.toolbar;\n                    var direction = kendo.support.isRtl(that.element) ? -1 : 1;\n                    var focusableItems;\n                    var focusElement,\n                        currentContainer,\n                        keyCode = e.keyCode;\n\n                    function move(direction, container, constrain) {\n                        var tools = container.find(focusable);\n                        var index = tools.index(current) + direction;\n\n                        if (constrain) {\n                            index = Math.max(0, Math.min(tools.length - 1, index));\n                        }\n\n                        return tools[index];\n                    }\n\n                    if (keyCode == keys.RIGHT || keyCode == keys.LEFT) {\n                        if (!$(current).is(\".k-dropdownlist\")) {\n                            focusElement = move(keyCode == keys.RIGHT ? 1 * direction : -1 * direction, that.element, true);\n                        } else {\n                            focusElement = $(current);\n                        }\n                    } else if (resizable && (keyCode == keys.UP || keyCode == keys.DOWN)) {\n                        focusElement = move(keyCode == keys.DOWN ? 1 : -1, that.overflowPopup.element, true);\n                    } else if (keyCode == keys.HOME) {\n                        focusElement = that.element.find(focusable)[0];\n                        e.preventDefault();\n                    } else if (keyCode == keys.END) {\n                        focusableItems = that.element.find(focusable).filter(function() {\n                            return $(this).css('visibility') !== 'hidden';\n                        });\n                        focusElement = focusableItems[focusableItems.length - 1];\n                        e.preventDefault();\n                    } else if (keyCode == keys.ESC) {\n                        if (that.overflowPopup && that.overflowPopup.visible()) {\n                            that.overflowPopup.close();\n                        }\n\n                        focusElement = that._editor;\n                    } else if (keyCode == keys.TAB && !(e.ctrlKey || e.altKey)) {\n                        if (resizable) {\n                            currentContainer = $(current.parentElement).hasClass(\"k-overflow-tool-group\") ? that.overflowPopup.element : that.element;\n                        } else {\n                            currentContainer = that.element;\n                        }\n\n                        // skip tabbing to disabled tools, and focus the editing area when running out of tools\n                        if (e.shiftKey) {\n                            focusElement = move(-1, currentContainer);\n                        } else {\n                            focusElement = move(1, currentContainer);\n\n                            if (!focusElement || $(focusElement).closest(\".k-overflow-tools\").css(\"visibility\") === \"hidden\") {\n                                focusElement = that._editor;\n                            }\n                        }\n                    }\n\n                    if (focusElement) {\n                        e.preventDefault();\n                        focusElement.focus();\n                    }\n\n                    if ((keyCode === keys.ENTER || keyCode === keys.SPACEBAR) && ( $(current).is(\"button\") || $(current).is(\"a\") ) && !$(current).attr(\"href\") ) {\n                        //anchors without href attribute do not respond to Enter key\n                        that._executeToolCommand(current, e);\n                    }\n                })\n                .on(\"click\" + NS, enabledButtons, function(e) {\n                    that._executeToolCommand(this, e);\n                })\n                .on(\"click\" + NS, disabledButtons, function(e) { e.preventDefault(); });\n\n        },\n\n        _executeToolCommand: function(toolElement, e) {\n            var that = this;\n            var button = $(toolElement);\n            e.preventDefault();\n            e.stopPropagation();\n            button.removeClass(\"k-hover\");\n            if (!button.is(\"[data-popup]\")) {\n                that._editor.exec(that._toolName(toolElement));\n            }\n        },\n\n        _toolName: function(element) {\n            if (!element) {\n                return;\n            }\n\n            var className = element.className;\n\n            if (/k-tool\\b/i.test(className)) {\n                className = element.firstChild.className;\n            }\n\n            var tool = $.grep(className.split(\" \"), function(x) {\n                return !/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(x);\n            });\n\n            if (tool[0]) {\n                var toolname = tool[0];\n                if (toolNamesByCssClass[toolname]) {\n                    toolname = toolNamesByCssClass[toolname];\n                }\n                if (toolname.indexOf(\"k-i-\") >= 0) {\n                    return kendo.toCamelCase(toolname.substring(toolname.indexOf(\"k-i-\") + 4));\n                }\n                else {\n                    return toolname.substring(toolname.lastIndexOf(\"-\") + 1);\n                }\n            }\n            return \"custom\";\n        },\n\n        refreshTools: function() {\n            var that = this,\n                editor = that._editor,\n                range = editor.getRange(),\n                nodes = editorNS.RangeUtils.textNodes(range),\n                immutables = editor.options.immutables,\n                immutablesContext = that._immutablesContext(range);\n\n            nodes = editorNS.Dom.filterBy(nodes, editorNS.Dom.htmlIndentSpace, true);\n\n            if (!nodes.length) {\n                nodes = [range.startContainer];\n            }\n\n            that.items().each(function() {\n                var tool = that.tools[that._toolName(this)];\n                if (tool) {\n                    var ui = $(this);\n                    if (tool.update) {\n                        tool.update(ui, nodes, editor.undoRedoStack);\n                    }\n\n                    if (immutables) {\n                        that._updateImmutablesState(tool, ui, immutablesContext);\n                    }\n                }\n            });\n            this.update();\n        },\n\n        _immutablesContext: function(range) {\n            if (this._editor.options.immutables) {\n                if (range.collapsed) {\n                    return editorNS.Immutables.immutablesContext(range);\n                } else {\n                    return editorNS.RangeUtils.editableTextNodes(range).length === 0;\n                }\n            }\n        },\n\n        _updateImmutablesState: function(tool, ui, immutablesContext) {\n            var name = tool.name;\n            var uiElement = ui;\n\n            var trackImmutables = tool.options.trackImmutables;\n            if (trackImmutables === undefined) {\n                trackImmutables = $.inArray(name, editorNS.Immutables.toolsToBeUpdated) > -1;\n            }\n\n            if (trackImmutables) {\n                var display = immutablesContext ? \"none\" : \"\";\n                if (!ui.is(\".k-tool\")) {\n                    var uiData = ui.data();\n                    for (var key in uiData) {\n                        if (key.match(/^kendo[A-Z][a-zA-Z]*/)) {\n                            var widget = uiData[key];\n                            uiElement = widget.wrapper;\n                            break;\n                        }\n                    }\n                }\n                uiElement.css(\"display\", display);\n                var groupUi = uiElement.closest(\"li\");\n                if (groupUi.children(\":visible\").length === 0) {\n                    groupUi.css(\"display\", display);\n                }\n            }\n        },\n\n        update: function() {\n            this.updateGroups();\n        },\n\n        _resize: function(e) {\n            var containerWidth = e.width;\n            var resizable = this.options.resizable && this.options.resizable.toolbar;\n            var popup = this.overflowPopup;\n            var editorElement = this.options.editor.element;\n            var toolbarWindow = this.window;\n\n            this.refreshTools();\n\n            if (!resizable) {\n                return;\n            }\n\n            if (toolbarWindow) {\n                toolbarWindow.wrapper.width(this._getWindowWidth());\n\n                if (!toolbarWindow._moved) {\n                    toolbarWindow.wrapper.css({\n                        left: Math.max(0, parseInt(editorElement.offset().left, 10))\n                    });\n                }\n            }\n\n            if (popup.visible()) {\n                popup.close(true);\n            }\n\n            this._refreshWidths();\n\n            this._shrink(containerWidth);\n            this._stretch(containerWidth);\n\n            this._toggleOverflowStyles(this.element, false);\n            this._toggleOverflowStyles(this.overflowPopup.element, true);\n\n            this.element\n                .children(\"li.k-overflow-tools\")\n                .css(\"visibility\", popup.element.is(\":empty\") ? \"hidden\" : \"visible\");\n        },\n\n        _refreshWidths: function() {\n            this.element.children(\"li\").each(function(idx, element) {\n                var group = $(element);\n                group.data(\"outerWidth\", outerWidth(group, true));\n            });\n        },\n\n        _shrink: function(width) {\n            var group, visibleGroups;\n\n            if (width < this._groupsWidth()) {\n                visibleGroups = this._visibleGroups().filter(\":not(.k-overflow-tools)\");\n\n                for (var i = visibleGroups.length - 1; i >= 0; i--) {\n                    group = visibleGroups.eq(i);\n                    if (width > this._groupsWidth()) {\n                        break;\n                    } else {\n                        this._hideGroup(group);\n                    }\n                }\n            }\n        },\n\n        _stretch: function(width) {\n            var group, hiddenGroups;\n\n            if (width > this._groupsWidth()) {\n                hiddenGroups = this._hiddenGroups();\n\n                for (var i = 0; i < hiddenGroups.length; i++) {\n                    group = hiddenGroups.eq(i);\n                    if (width < this._groupsWidth() || !this._showGroup(group, width)) {\n                        break;\n                    }\n                }\n            }\n        },\n\n        _hiddenGroups: function() {\n            var popup = this.overflowPopup;\n\n            var hiddenGroups = this.element.children(\"li.k-tool-group\").filter(\":hidden\");\n\n            hiddenGroups = hiddenGroups.add(popup.element.children(\"li\"));\n\n            hiddenGroups.sort(function(a, b) {\n                return ($(a).data(\"position\") > $(b).data(\"position\")) ? 1 : -1;\n            });\n\n            return hiddenGroups;\n        },\n\n        _visibleGroups: function() {\n            return this.element.children(\"li.k-tool-group, li.k-overflow-tools\").filter(\":visible\");\n        },\n\n        _groupsWidth: function() {\n            var width = 0;\n\n            this._visibleGroups().each(function() {\n                width += $(this).data(\"outerWidth\");\n            });\n\n            return Math.ceil(width);\n        },\n\n        _hideGroup: function(group) {\n            if (group.data(\"overflow\")) {\n                var popup = this.overflowPopup;\n                group.detach().prependTo(popup.element).addClass(\"k-overflow-tool-group\");\n            } else {\n                group.addClass(\"k-hidden\");\n            }\n        },\n\n        _showGroup: function(group, width) {\n            var position, previous, groupWidth;\n\n            if (group.hasClass('k-disabled')) {\n                return true;\n            }\n\n            if (group.hasClass(\"k-overflow-tool-group\")) {\n                groupWidth = group.data(\"outerWidth\");\n            } else {\n                group.removeClass(\"k-hidden\");\n                groupWidth = outerWidth(group, true);\n                group.addClass(\"k-hidden\");\n            }\n\n            if (group.length && width > this._groupsWidth() + groupWidth) {\n                if (group.hasClass(\"k-overflow-tool-group\")) {\n                    position = group.data(\"position\");\n\n                    if (position === 0) {\n                        group.detach().prependTo(this.element);\n                    } else {\n                        previous = this.element.children().filter(function(idx, element) {\n                            return $(element).data(\"position\") === position - 1;\n                        });\n\n                        group.detach().insertAfter(previous);\n                    }\n\n                    group.removeClass(\"k-overflow-tool-group\");\n\n                } else {\n                    group.removeClass(\"k-hidden\");\n                }\n\n                return true;\n            }\n\n            return false;\n        }\n\n    });\n\n$.extend(editorNS, {\n    Toolbar: Toolbar\n});\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/plugins/viewhtml',[ \"../command\" ], f);\n})(function() {\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    dom = Editor.Dom;\n\nvar ViewHtmlCommand = Command.extend({\n    init: function(options) {\n        var cmd = this;\n        cmd.options = options;\n        Command.fn.init.call(cmd, options);\n        cmd.attributes = null;\n        cmd.async = true;\n    },\n\n    exec: function() {\n        var that = this,\n            editor = that.editor,\n            options = editor.options,\n            messages = editor.options.messages,\n            dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body),\n            textarea = \".k-editor-textarea > textarea\",\n            content, comments;\n\n        options.serialization.immutables = editor.immutables;\n\n        comments = dom.getAllComments(editor.body);\n\n        content = EditorUtils.cacheComments(editor.value(), comments);\n        content = ViewHtmlCommand.indent(content);\n        content = EditorUtils.retrieveComments(content, comments);\n\n        options.serialization.immutables = undefined;\n\n        function apply(e) {\n            options.deserialization.immutables = editor.immutables;\n            editor.value(dialog.find(textarea).val());\n            options.deserialization.immutables = undefined;\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n\n            editor.trigger(\"change\");\n        }\n\n        function close(e) {\n            e.preventDefault();\n\n            dialog.data(\"kendoWindow\").destroy();\n\n            if (editor.immutables) {\n                editor.immutables.serializedImmutables = {};\n            }\n\n            editor.focus();\n        }\n\n        this.createDialog(dialog, {\n            title: messages.viewHtml,\n            width: 600,\n            height: 400,\n            resizable: true,\n            close: close,\n            visible: false\n        })\n            .find(textarea).val(content).end()\n            .find(\".k-dialog-update\").on(\"click\", apply).end()\n            .find(\".k-dialog-close\").on(\"click\", close).end()\n            .data(\"kendoWindow\").center().open();\n\n        dialog.find(textarea).trigger(\"focus\");\n    }\n});\n\nextend(ViewHtmlCommand, {\n    template: \"\" +\n    \"<div class='k-editor-dialog k-popup-edit-form k-viewhtml-dialog'>\" +\n        \"<span class='k-input k-textarea k-input-solid k-input-md k-rounded-md k-editor-textarea'><textarea class='k-input-inner !k-overflow-auto !k-resize-none'></textarea></span>\" +\n        \"<div class='k-edit-buttons'>\" +\n            \"<button class='k-dialog-update k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary'><span class='k-button-text'>#: dialogUpdate #</span></button>\" +\n            \"<button class='k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base'><span class='k-button-text'>#: dialogCancel #</span></button>\" +\n        \"</div>\" +\n    \"</div>\",\n    indent: function(content) {\n        return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/ig, \"</$1>\\n\")\n                      .replace(/<(ul|ol)([^>]*)><li/ig, \"<$1$2>\\n<li\")\n                      .replace(/<br \\/>/ig, \"<br />\\n\")\n                      .replace(/\\n$/, \"\");\n    }\n});\n\nkendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n\nEditor.EditorUtils.registerTool(\"viewHtml\", new Tool({ command: ViewHtmlCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"View HTML\" }) }));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/plugins/format',[ \"../command\" ], f);\n})(function() {\n\n(function($) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    Command = Editor.Command,\n    EditorUtils = Editor.EditorUtils;\n\nvar FormatCommand = Command.extend({\n    init: function(options) {\n        options.formatter = options.formatter();\n        var finder = options.formatter.finder;\n        if (finder && EditorUtils.formatByName(\"immutable\", finder.format)) {\n            finder._initOptions({ immutables: options.immutables });\n        }\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar FormatTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function(commandArguments) {\n        var that = this;\n        return new FormatCommand(extend(commandArguments, {\n                formatter: that.options.formatter\n            }));\n    },\n\n    update: function(ui, nodes) {\n        var isFormatted = this.options.finder.isFormatted(nodes);\n\n        ui.toggleClass(\"k-selected\", isFormatted);\n        ui.attr(\"aria-pressed\", isFormatted);\n    }\n});\n\n$.extend(Editor, {\n    FormatCommand: FormatCommand,\n    FormatTool: FormatTool\n});\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/plugins/inlineformat',[ \"./format\" ], f);\n})(function() {\n(function($) {\n\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    Editor = kendo.ui.editor,\n    formats = kendo.ui.Editor.fn.options.formats,\n    EditorUtils = Editor.EditorUtils,\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    FormatTool = Editor.FormatTool,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    extend = $.extend,\n    registerTool = Editor.EditorUtils.registerTool,\n    registerFormat = Editor.EditorUtils.registerFormat,\n    MOUSEDOWN_NS = \"mousedown.kendoEditor\",\n    KEYDOWN_NS = \"keydown.kendoEditor\",\n    KMARKER = \"k-marker\";\n\nvar InlineFormatFinder = Class.extend({\n    init: function(format) {\n        this.format = format;\n    },\n\n    numberOfSiblings: function(referenceNode) {\n        var textNodesCount = 0,\n            elementNodesCount = 0,\n            markerCount = 0,\n            parentNode = referenceNode.parentNode,\n            node;\n\n        for (node = parentNode.firstChild; node; node = node.nextSibling) {\n            if (node != referenceNode) {\n                if (node.className == KMARKER) {\n                    markerCount++;\n                } else if (node.nodeType == 3) {\n                    textNodesCount++;\n                } else {\n                    elementNodesCount++;\n                }\n            }\n        }\n\n        if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n            // full node selection\n            return 0;\n        } else {\n            return elementNodesCount + textNodesCount;\n        }\n    },\n\n    findSuitable: function(sourceNode, skip) {\n        if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n            return null;\n        }\n\n        var node = sourceNode.parentNode;\n        var tags = this.format[0].tags;\n\n        while (!dom.ofType(node, tags)) {\n            if (this.numberOfSiblings(node) > 0) {\n                return null;\n            }\n\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    findFormat: function(sourceNode) {\n        var format = this.format,\n            attrEquals = dom.attrEquals,\n            i, len, node, tags, attributes;\n\n        for (i = 0, len = format.length; i < len; i++) {\n            node = sourceNode;\n            tags = format[i].tags;\n            attributes = format[i].attr;\n\n            if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                return node;\n            }\n\n            while (node) {\n                node = dom.parentOfType(node, tags);\n                if (node && attrEquals(node, attributes)) {\n                    return node;\n                }\n            }\n        }\n\n        return null;\n    },\n\n    isFormatted: function(nodes) {\n        var i, len;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            if (this.findFormat(nodes[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n});\n\nvar InlineFormatter = Class.extend({\n    init: function(format, values) {\n        this.finder = new InlineFormatFinder(format);\n        this.attributes = extend({}, format[0].attr, values);\n        this.tag = format[0].tags[0];\n    },\n\n    wrap: function(node) {\n        return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n    },\n\n    activate: function(range, nodes) {\n        if (this.finder.isFormatted(nodes)) {\n            this.split(range);\n            this.remove(nodes);\n        } else {\n            this.apply(nodes);\n        }\n    },\n\n    toggle: function(range) {\n        var textNodes = this.immutables() ? RangeUtils.editableTextNodes : RangeUtils.textNodes;\n        var nodes = textNodes(range);\n\n        if (nodes.length > 0) {\n            this.activate(range, nodes);\n        }\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    apply: function(nodes) {\n        var formatNodes = [];\n        var i, l, node, formatNode;\n\n        if (nodes.length > 1) {\n            for (i = 0, l = nodes.length; i < l; i++) {\n                node = nodes[i];\n                formatNode = this.format(node, true);\n                formatNodes.push(formatNode);\n\n            }\n        } else {\n            node = nodes[0];\n            formatNode = this.format(node, false);\n        }\n\n        this.consolidate(formatNodes);\n    },\n\n    format: function(node, outerMostInline) {\n        var formatNode = this.finder.findSuitable(node);\n        var attributes = this.attributes;\n        var styleAttr = attributes ? attributes.style || {} : {};\n\n        if (formatNode) {\n            if (dom.is(formatNode, \"font\")) {\n                if (styleAttr.color) {\n                    formatNode.removeAttribute(\"color\");\n                }\n                if (styleAttr.fontName) {\n                    formatNode.removeAttribute(\"face\");\n                }\n                if (styleAttr.fontSize) {\n                    formatNode.removeAttribute(\"size\");\n                }\n            }\n            dom.attr(formatNode, attributes);\n        } else {\n            while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true' && outerMostInline) {\n                node = node.parentNode;\n            }\n\n            formatNode = this.wrap(node);\n        }\n\n        return formatNode;\n    },\n\n    remove: function(nodes) {\n        var i, l, formatNode;\n\n        for (i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n            if (formatNode) {\n                if (this.attributes && this.attributes.style) {\n                    dom.unstyle(formatNode, this.attributes.style);\n                    if (!formatNode.style.cssText && !formatNode.attributes[\"class\"]) {\n                        dom.unwrap(formatNode);\n                    }\n                } else {\n                    dom.unwrap(formatNode);\n                }\n            }\n        }\n    },\n\n    split: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n        var l = nodes.length;\n        var i, formatNode;\n\n        if (l > 0) {\n            for (i = 0; i < l; i++) {\n                formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    RangeUtils.split(range, formatNode, true);\n                }\n            }\n        }\n    },\n\n    consolidate: function(nodes) {\n        var node, last;\n\n        while (nodes.length > 1) {\n            node = nodes.pop();\n            last = nodes[nodes.length - 1];\n\n            if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                last.appendChild(node.previousSibling);\n            }\n\n            if (node.tagName == last.tagName &&\n                node.previousSibling == last &&\n                node.style.cssText == last.style.cssText &&\n                node.className === last.className) {\n\n                while (node.firstChild) {\n                    last.appendChild(node.firstChild);\n                }\n\n                dom.remove(node);\n            }\n        }\n    }\n});\n\nvar GreedyInlineFormatFinder = InlineFormatFinder.extend({\n    init: function(format, greedyProperty, fontAttr) {\n        this.format = format;\n        this.greedyProperty = greedyProperty;\n        this.fontAttr = fontAttr;\n        InlineFormatFinder.fn.init.call(this, format);\n    },\n\n    getInlineCssValue: function(node) {\n        var attributes = node.attributes;\n        var trim = kendo.trim;\n        var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n        var propertyAndValue, property, value;\n\n        if (!attributes) {\n            return;\n        }\n\n        for (i = 0, l = attributes.length; i < l; i++) {\n            attribute = attributes[i];\n            name = attribute.nodeName;\n            attributeValue = attribute.nodeValue;\n\n            if (attribute.specified && name == \"style\") {\n\n                css = trim(attributeValue || node.style.cssText).split(\";\");\n\n                for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                    pair = css[cssIndex];\n                    if (pair.length) {\n                        propertyAndValue = pair.split(\":\");\n                        property = trim(propertyAndValue[0].toLowerCase());\n                        value = trim(propertyAndValue[1]);\n\n                        if (property != this.greedyProperty) {\n                            continue;\n                        }\n\n                        return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n                    }\n                }\n            }\n\n            if (this.fontAttr && attribute.specified && name == this.fontAttr) {\n                property = attribute.nodeValue;\n                value = attribute.nodeValue;\n\n                return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n            }\n        }\n    },\n\n    getFormatInner: function(node) {\n        var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n        var parents = $node.parentsUntil(\"[contentEditable]\").addBack().toArray().reverse();\n        var i, len, value;\n\n        for (i = 0, len = parents.length; i < len; i++) {\n            value = this.greedyProperty == \"className\" ? parents[i].className : this.getInlineCssValue(parents[i]);\n\n            if (value) {\n                return value;\n            }\n        }\n\n        return \"inherit\";\n    },\n\n    getFormat: function(nodes) {\n        var result = this.getFormatInner(nodes[0]), i, len;\n\n        for (i = 1, len = nodes.length; i < len; i++) {\n            if (result != this.getFormatInner(nodes[i])) {\n                return \"\";\n            }\n        }\n\n        return result;\n    },\n\n    isFormatted: function(nodes) {\n        return this.getFormat(nodes) !== \"\";\n    }\n});\n\nvar GreedyInlineFormatter = InlineFormatter.extend({\n    init: function(format, values, greedyProperty) {\n        InlineFormatter.fn.init.call(this, format, values);\n\n        this.values = values;\n        this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n\n        if (greedyProperty) {\n            this.greedyProperty = kendo.toCamelCase(greedyProperty);\n        }\n\n    },\n\n    activate: function(range, nodes) {\n        var greedyProperty = this.greedyProperty;\n        var action = \"apply\";\n\n        this.split(range);\n\n        if (greedyProperty && this.values.style[greedyProperty] == \"inherit\") {\n            action = \"remove\";\n        }\n\n        this[action](nodes);\n    }\n});\n\nvar InlineFormatTool = FormatTool.extend({\n    init: function(options) {\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new InlineFormatFinder(options.format),\n            formatter: function() { return new InlineFormatter(options.format); }\n        }));\n    }\n});\n\nvar DelayedExecutionTool = Tool.extend({\n    update: function(ui, nodes) {\n        var list = ui.data(this.type);\n\n        list.close();\n        list.value(this.finder.getFormat(nodes));\n    }\n});\n\nvar FontTool = DelayedExecutionTool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        // IE has single selection hence we are using select box instead of combobox\n        this.type = (kendo.support.browser.msie || kendo.support.touch) ? \"kendoDropDownList\" : \"kendoComboBox\";\n        this.format = [{ tags: [\"span\", \"font\"] }];\n        this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr, options.fontAttr);\n    },\n\n    command: function(commandArguments) {\n        var options = this.options,\n            format = this.format,\n            style = {};\n\n        return new Editor.FormatCommand(extend(commandArguments, {\n            formatter: function() {\n                style[options.domAttr] = commandArguments.value;\n\n                return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n            }\n        }));\n    },\n\n    initialize: function(ui, initOptions) {\n        var editor = initOptions.editor,\n            options = this.options,\n            toolName = options.name,\n            dataSource,\n            range,\n            defaultValue = [];\n\n        if (options.defaultValue) {\n           defaultValue = [{\n                text: editor.options.messages[options.defaultValue[0].text],\n                value: options.defaultValue[0].value\n           }];\n        }\n\n        dataSource = defaultValue.concat(options.items ? options.items : (editor.options[toolName] || [] ));\n\n        ui.attr({ title: initOptions.title });\n        ui[this.type]({\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            dataSource: dataSource,\n            change: function() {\n                editor._range = range;\n                Tool.exec(editor, toolName, this.value());\n            },\n            close: function() {\n                setTimeout(function() {\n                    editor._deleteSavedRange();\n                },0);\n            },\n            highlightFirst: false\n        });\n\n        ui.closest(\".k-combobox\").removeClass(\"k-\" + toolName).find(\"*\").addBack().attr(\"unselectable\", \"on\");\n\n        var widget = ui.data(this.type);\n        widget.value(\"inherit\");\n\n        widget.wrapper.on(MOUSEDOWN_NS, \".k-select,.k-input-button,.k-input\", function() {\n            var newRange = editor.getRange();\n            range = editor._containsRange(newRange) ? newRange : range;\n        })\n        .on(KEYDOWN_NS, function(e) {\n            if (e.keyCode === kendo.keys.ENTER) {\n                editor._deleteSavedRange();\n                e.preventDefault();\n            }\n        });\n    }\n\n});\n\nvar ColorTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        this.format = [{ tags: [\"span\",\"font\"] }];\n        this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n    },\n\n    options: {\n        palette: \"websafe\",\n        columns: 18\n    },\n\n    update: function() {\n        this._widget.close();\n    },\n\n    command: function(commandArguments) {\n        var options = this.options,\n            format = this.format,\n            style = {};\n\n        return new Editor.FormatCommand(extend(commandArguments, {\n            formatter: function() {\n                style[options.domAttr] = commandArguments.value;\n\n                return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n            }\n        }));\n    },\n\n    initialize: function(ui, initOptions) {\n        var that = this,\n            editor = initOptions.editor,\n            toolName = this.name,\n            options = extend({}, ColorTool.fn.options, this.options),\n            palette = options.palette,\n            columns = options.columns;\n\n        ui = this._widget = new kendo.ui.ColorPicker(ui, {\n            closeOnSelect: true,\n            views: [\"palette\"],\n            preview: false,\n            input: false,\n            buttons: false,\n            toolIcon: \"k-icon k-i-\" + EditorUtils.getToolCssClass(options.name),\n            palette: palette,\n            columns: columns,\n            change: function() {\n                var color = ui.value();\n\n                if (kendo.support.browser.msie && that.storedRange && that._inputFocused) {\n                    editor.selectRange(that.storedRange);\n                }\n\n                if (color) {\n                    Tool.exec(editor, toolName, color);\n                }\n\n                delete that.storedRange;\n                delete that._inputFocused;\n                editor.focus();\n            },\n            open: function(e) {\n                var picker = e.sender;\n                that.storedRange = editor.getRange();\n\n                picker._popup.element.on(MOUSEDOWN_NS, function(e) {\n                    if (!$(e.target).is(\"input.k-color-value\")) {\n                        e.preventDefault();\n                    }\n                });\n\n                if (!picker._popup.element.is(\"[unselectable='on']\")) {\n                    picker._popup.element\n                        .attr({ unselectable: \"on\" })\n                        .find(\"*:not(input)\").attr(\"unselectable\", \"on\")\n                        .end().find(\"input\").on(\"focus\", function() {\n                            that._inputFocused = true;\n                        });\n                }\n\n                setTimeout(function() {\n                    picker._popup.element.find(\".k-colorpalette\").trigger(\"focus\");\n                });\n            },\n            close: function(e) {\n                e.sender._popup.element.off(MOUSEDOWN_NS);\n\n                if (kendo.support.browser.msie && that.storedRange && that._inputFocused) {\n                    editor.selectRange(that.storedRange);\n                }\n            },\n            activate: function(e) {\n                e.preventDefault();\n\n                if (e.sender._value.toCssRgba() === \"rgba(255, 255, 255, 0)\") {\n                    return;\n                }\n\n                ui.trigger(\"change\");\n            }\n        });\n        ui.wrapper\n            .attr({ title: initOptions.title, unselectable: \"on\" })\n            .find(\"*:not(input)\").attr(\"unselectable\", \"on\");\n\n        ui.value(\"transparent\");\n    }\n});\n\nextend(Editor, {\n    InlineFormatFinder: InlineFormatFinder,\n    InlineFormatter: InlineFormatter,\n    DelayedExecutionTool: DelayedExecutionTool,\n    GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n    GreedyInlineFormatter: GreedyInlineFormatter,\n    InlineFormatTool: InlineFormatTool,\n    FontTool: FontTool,\n    ColorTool: ColorTool\n});\n\nregisterFormat(\"bold\", [ { tags: [\"strong\", \"b\"] }, { tags: [\"span\"], attr: { style: { fontWeight: \"bold\" } } } ]);\nregisterTool(\"bold\", new InlineFormatTool({ key: \"B\", ctrl: true, format: formats.bold, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Bold\" }) }));\n\nregisterFormat(\"italic\", [ { tags: [\"em\", \"i\"] }, { tags: [\"span\"], attr: { style: { fontStyle: \"italic\" } } } ]);\nregisterTool(\"italic\", new InlineFormatTool({ key: \"I\", ctrl: true, format: formats.italic, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Italic\" }) }));\n\nregisterFormat(\"underline\", [ { tags: [\"span\"], attr: { style: { textDecoration: \"underline\" } } }, { tags: [\"u\"] } ]);\nregisterTool(\"underline\", new InlineFormatTool({ key: \"U\", ctrl: true, format: formats.underline, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Underline\" }) }));\n\nregisterFormat(\"strikethrough\", [ { tags: [\"del\", \"strike\"] }, { tags: [\"span\"], attr: { style: { textDecoration: \"line-through\" } } } ]);\nregisterTool(\"strikethrough\", new InlineFormatTool({ format: formats.strikethrough, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Strikethrough\" }) }));\n\nregisterFormat(\"superscript\", [ { tags: [\"sup\"] } ]);\nregisterTool(\"superscript\", new InlineFormatTool({ format: formats.superscript, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Superscript\" }) }));\n\nregisterFormat(\"subscript\", [ { tags: [\"sub\"] } ]);\nregisterTool(\"subscript\", new InlineFormatTool({ format: formats.subscript, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Subscript\" }) }));\n\nregisterTool(\"foreColor\", new ColorTool({ cssAttr: \"color\", fontAttr: \"color\", domAttr: \"color\", name: \"foreColor\", template: new ToolTemplate({ template: EditorUtils.colorPickerTemplate, title: \"Color\" }) }));\n\nregisterTool(\"backColor\", new ColorTool({ cssAttr: \"background-color\", domAttr: \"backgroundColor\", name: \"backColor\", template: new ToolTemplate({ template: EditorUtils.colorPickerTemplate, title: \"Background Color\" }) }));\n\nregisterTool(\"fontName\", new FontTool({ cssAttr: \"font-family\", fontAttr: \"face\", domAttr: \"fontFamily\", name: \"fontName\", defaultValue: [{ text: \"fontNameInherit\", value: \"inherit\" }], template: new ToolTemplate({ template: EditorUtils.comboBoxTemplate, title: \"Font Name\" }) }));\n\nregisterTool(\"fontSize\", new FontTool({ cssAttr: \"font-size\", fontAttr: \"size\", domAttr: \"fontSize\", name: \"fontSize\", defaultValue: [{ text: \"fontSizeInherit\", value: \"inherit\" }], template: new ToolTemplate({ template: EditorUtils.comboBoxTemplate, title: \"Font Size\" }) }));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/plugins/link',[ \"./inlineformat\" ], f);\n})(function() {\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    InlineFormatter = Editor.InlineFormatter,\n    InlineFormatFinder = Editor.InlineFormatFinder,\n    textNodes = RangeUtils.textNodes,\n    editableTextNodes = RangeUtils.editableTextNodes,\n    registerTool = Editor.EditorUtils.registerTool,\n    keys = kendo.keys;\n\nvar HTTP_PROTOCOL = \"http://\";\nvar protocolRegExp = /^\\w*:\\/\\//;\nvar endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\n\nvar LinkFormatFinder = Class.extend({\n    findSuitable: function(sourceNode) {\n        return dom.parentOfType(sourceNode, [\"a\"]);\n    }\n});\n\nvar LinkFormatter = Class.extend({\n    init: function() {\n        this.finder = new LinkFormatFinder();\n    },\n\n    apply: function(range, attributes) {\n        var nodes = this.immutables ? editableTextNodes(range) : textNodes(range);\n        var markers, doc, formatter, a, parent;\n\n        if (attributes.innerText) {\n            doc = RangeUtils.documentFromRange(range);\n            markers = RangeUtils.getMarkers(range);\n\n            range.deleteContents();\n            a = dom.create(doc, \"a\", attributes);\n            range.insertNode(a);\n\n            parent = a.parentNode;\n            if (dom.name(parent) == \"a\") {\n                dom.insertAfter(a, parent);\n            }\n\n            if (dom.emptyNode(parent)) {\n                dom.remove(parent);\n            }\n\n            // move range and markers after inserted link\n            var ref = a;\n            for (var i = 0; i < markers.length; i++) {\n                dom.insertAfter(markers[i], ref);\n                ref = markers[i];\n            }\n\n            if (markers.length) {\n                dom.insertBefore(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                dom.insertAfter(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                range.setStartBefore(markers[0]);\n                range.setEndAfter(markers[markers.length - 1]);\n            }\n        } else {\n            formatter = new InlineFormatter([{ tags: [\"a\"] }], attributes);\n            formatter.finder = this.finder;\n            formatter.apply(nodes);\n        }\n    }\n});\n\nvar UnlinkCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = /** @ignore */ {\n            toggle: function(range) {\n                var nodes = that.immutables() ? editableTextNodes(range) : textNodes(range);\n                new InlineFormatter([{ tags: [\"a\"] }]).remove(nodes);\n            }\n        };\n        this.options = options;\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar LinkCommand = Command.extend({\n    init: function(options) {\n        var that;\n        this.options = options;\n        Command.fn.init.call(this, options);\n        this.formatter = new LinkFormatter();\n\n        if (!options.url) {\n            this.attributes = null;\n            this.async = true;\n        } else {\n            this.exec = function() {\n                this.formatter.immutables = that && that.immutables();\n                this.formatter.apply(options.range, {\n                    href: options.url,\n                    innerText: options.text || options.url,\n                    target: options.target\n                });\n            };\n        }\n    },\n\n    _dialogTemplate: function() {\n        return kendo.template(\n            '<div class=\"k-editor-dialog k-popup-edit-form\">' +\n                '<div class=\"k-edit-form-container\">' +\n                    \"<div class='k-edit-label'>\" +\n                        \"<label for='k-editor-link-url'>#: messages.linkWebAddress #</label>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-field'>\" +\n                        \"<span class=\\\"k-textbox k-input k-input-md k-rounded-md k-input-solid\\\"><input type='text' class='k-input-inner' id='k-editor-link-url'></span>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-label k-editor-link-text-row'>\" +\n                        \"<label for='k-editor-link-text'>#: messages.linkText #</label>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-field k-editor-link-text-row'>\" +\n                        \"<span class=\\\"k-textbox k-input k-input-md k-rounded-md k-input-solid\\\"><input type='text' class='k-input-inner' id='k-editor-link-text'></span>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-label'>\" +\n                        \"<label for='k-editor-link-title'>#: messages.linkToolTip #</label>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-field'>\" +\n                        \"<span class=\\\"k-textbox k-input k-input-md k-rounded-md k-input-solid\\\"><input type='text' class='k-input-inner' id='k-editor-link-title'></span>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-label'></div>\" +\n                    \"<div class='k-edit-field'>\" +\n                        \"<input type='checkbox' class='k-checkbox k-checkbox-md k-rounded-md' id='k-editor-link-target'>\" +\n                        \"<label for='k-editor-link-target' class='k-checkbox-label'>#: messages.linkOpenInNewWindow #</label>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-buttons'>\" +\n                        '<button class=\"k-dialog-insert k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary\"><span class=\"k-button-text\">#: messages.dialogInsert #</span></button>' +\n                        '<button class=\"k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\"><span class=\"k-button-text\">#: messages.dialogCancel #</span></button>' +\n                    \"</div>\" +\n                \"</div>\" +\n            \"</div>\"\n        )({\n            messages: this.editor.options.messages\n        });\n    },\n\n    exec: function() {\n        var messages = this.editor.options.messages;\n        this._initialText = \"\";\n        this._range = this.lockRange(true);\n        this.formatter.immutables = this.immutables();\n\n        var nodes = textNodes(this._range);\n        var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n        var img = nodes.length && dom.name(nodes[0]) == \"img\";\n\n        var dialog = this.createDialog(this._dialogTemplate(), {\n            title: messages.createLink,\n            close: this._close.bind(this),\n            visible: false\n        });\n\n        if (a) {\n            this._range.selectNodeContents(a);\n            nodes = textNodes(this._range);\n        }\n\n        this._initialText = this.linkText(nodes);\n\n        dialog\n            .find(\".k-dialog-insert\").on(\"click\", this._apply.bind(this)).end()\n            .find(\".k-dialog-close\").on(\"click\", this._close.bind(this)).end()\n            .find(\".k-edit-field input\").on(\"keydown\", this._keydown.bind(this)).end()\n            .find(\"#k-editor-link-url\").val(this.linkUrl(a)).end()\n            .find(\"#k-editor-link-text\").val(this._initialText).end()\n            .find(\"#k-editor-link-title\").val(a ? a.title : \"\").end()\n            .find(\"#k-editor-link-target\").attr(\"checked\", a ? a.target == \"_blank\" : false).end()\n            .find(\".k-editor-link-text-row\").toggle(!img);\n\n        this._dialog = dialog.data(\"kendoWindow\").center().open();\n\n        $(\"#k-editor-link-url\", dialog).trigger(\"focus\").select();\n    },\n\n    _keydown: function(e) {\n        var keys = kendo.keys;\n\n        if (e.keyCode == keys.ENTER) {\n            this._apply(e);\n        } else if (e.keyCode == keys.ESC) {\n            this._close(e);\n        }\n    },\n\n    _apply: function(e) {\n        var element = this._dialog.element;\n        var href = $(\"#k-editor-link-url\", element).val();\n        var title, text, target;\n        var textInput = $(\"#k-editor-link-text\", element);\n\n        if (href && href != HTTP_PROTOCOL) {\n\n            if (href.indexOf(\"@\") > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                href = \"mailto:\" + href;\n            }\n\n            this.attributes = { href: href };\n\n            title = $(\"#k-editor-link-title\", element).val();\n            if (title) {\n                this.attributes.title = title;\n            }\n\n            if (textInput.is(\":visible\")) {\n                text = kendo.trim(textInput.val());\n                if (!text && !this._initialText) {\n                    this.attributes.innerText = href;\n                } else if (text && (text !== this._initialText)) {\n                    this.attributes.innerText = dom.stripBom(text);\n                }\n            }\n\n            target = $(\"#k-editor-link-target\", element).is(\":checked\");\n            this.attributes.target = target ? \"_blank\" : null;\n\n            this.formatter.apply(this._range, this.attributes);\n        }\n\n        this._close(e);\n\n        if (this.change) {\n            this.change();\n        }\n    },\n\n    _close: function(e) {\n        e.preventDefault();\n        this._dialog.destroy();\n\n        dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n\n        this.releaseRange(this._range);\n    },\n\n    linkUrl: function(anchor) {\n        if (anchor) {\n            // IE < 8 returns absolute url if getAttribute is not used\n            return anchor.getAttribute(\"href\", 2);\n        }\n\n        return HTTP_PROTOCOL;\n    },\n\n    linkText: function(nodes) {\n        var text = \"\";\n        var i;\n\n        for (i = 0; i < nodes.length; i++) {\n            text += nodes[i].nodeValue;\n        }\n\n        return dom.stripBom(text || \"\");\n    },\n\n    redo: function() {\n        var range = this.lockRange(true);\n\n        this.formatter.apply(range, this.attributes);\n        this.releaseRange(range);\n    }\n\n});\n\nvar AutoLinkCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n\n        this.formatter = new LinkFormatter();\n    },\n\n    exec: function() {\n        var detectedLink = this.detectLink();\n        if (!detectedLink) {\n            return;\n        }\n\n        var range = this.getRange();\n        var linkMarker = new kendo.ui.editor.Marker();\n        var linkRange = range.cloneRange();\n\n        linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\n        linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\n\n        range = this.lockRange();\n        linkMarker.add(linkRange);\n\n        this.formatter.apply(linkRange, {\n            href: this._ensureWebProtocol(detectedLink.text)\n        });\n\n        linkMarker.remove(linkRange);\n        this.releaseRange(range);\n    },\n\n    detectLink: function() {\n        var range = this.getRange();\n        var startNode = range.startContainer;\n        var startOffset = range.startOffset;\n        var prev = startNode.previousSibling;\n        if (!prev && ((dom.isBom(startNode) && !startNode.nextSibling) || (!startOffset && dom.isDataNode(startNode)))) {\n            startNode = startNode.parentNode;\n            startOffset = 0;\n        }\n        var traverser = new LeftDomTextTraverser({\n            node: startNode,\n            offset: startOffset,\n            cancelAtNode: function(node) { return node && dom.name(node) === \"a\"; }\n        });\n\n        var detection = new DomTextLinkDetection(traverser);\n        return detection.detectLink();\n    },\n\n    changesContent: function() {\n        return !!this.detectLink();\n    },\n\n    _ensureWebProtocol: function(linkText) {\n        var hasProtocol = this._hasProtocolPrefix(linkText);\n        return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\n    },\n\n    _hasProtocolPrefix: function(linkText) {\n        return protocolRegExp.test(linkText);\n    },\n\n    _prefixWithWebProtocol: function(linkText) {\n        return HTTP_PROTOCOL + linkText;\n    }\n});\n\nvar UnlinkTool = Tool.extend({\n    init: function(options) {\n        this.options = options;\n        this.finder = new InlineFormatFinder([{ tags: [\"a\"] }]);\n\n        Tool.fn.init.call(this, $.extend(options, { command: UnlinkCommand }));\n    },\n\n    initialize: function(ui, options) {\n        Tool.fn.initialize.call(this, ui, options);\n        ui.addClass(\"k-disabled\");\n    },\n\n    update: function(ui, nodes) {\n        ui.toggleClass(\"k-disabled\", !this.finder.isFormatted(nodes))\n          .removeClass(\"k-hover\");\n    }\n});\n\nvar DomTextLinkDetection = Class.extend({\n    init: function(traverser) {\n        this.traverser = traverser;\n        this.start = DomPos();\n        this.end = DomPos();\n        this.text = \"\";\n    },\n\n    detectLink: function() {\n        var node = this.traverser.node;\n        var offset = this.traverser.offset;\n        if (dom.isDataNode(node)) {\n            var text = node.data.substring(0, offset);\n            if (/\\s{2}$/.test(dom.stripBom(text))) {\n                return;\n            }\n        } else if (offset === 0) {//heuristic for new line\n            var p = dom.closestEditableOfType(node, dom.blockElements);\n            if (p && p.previousSibling) {\n                this.traverser.init({\n                    node: p.previousSibling\n                });\n            }\n        }\n\n        this.traverser.traverse(this._detectEnd.bind(this));\n        if (!this.end.blank()) {\n            this.traverser = this.traverser.clone(this.end);\n            this.traverser.traverse(this._detectStart.bind(this));\n\n            if (!this._isLinkDetected()) {\n                var puntuationOptions = this.traverser.extendOptions(this.start);\n                var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\n                puntuationTraverser.traverse(this._skipStartPuntuation.bind(this));\n                if (!this._isLinkDetected()) {\n                    this.start = DomPos();\n                }\n            }\n        }\n\n        if (this.start.blank()) {\n            return null;\n        } else {\n            return {\n                start: this.start,\n                end: this.end,\n                text: this.text\n            };\n        }\n    },\n\n    _isLinkDetected: function() {\n        return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\n    },\n\n    _detectEnd: function(text, node) {\n        var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\n        if (i > -1) {\n            this.end.node = node;\n            this.end.offset = i + 1;\n\n            return false;\n        }\n    },\n\n    _detectStart: function(text, node) {\n        var i = lastIndexOfRegExp(text, /\\s/);\n        var ii = i + 1;\n        this.text = text.substring(ii) + this.text;\n\n        this.start.node = node;\n        this.start.offset = ii;\n\n        if (i > -1) {\n            return false;\n        }\n    },\n\n    _skipStartPuntuation: function(text, node, offset) {\n        var i = indexOfRegExp(text, /\\w/);\n        var ii = i;\n        if (i === -1) {\n            ii = text.length;\n        }\n\n        this.text = this.text.substring(ii);\n        this.start.node = node;\n        this.start.offset = ii + (offset | 0);\n\n        if (i > -1) {\n            return false;\n        }\n    }\n});\n\nfunction lastIndexOfRegExp(str, search) {\n    var i = str.length;\n    while (i-- && !search.test(str[i])) {}\n\n    return i;\n}\nfunction indexOfRegExp(str, search) {\n    var r = search.exec(str);\n\n    return r ? r.index : -1;\n}\n\nvar DomPos = function() {\n    return {\n        node: null,\n        offset: null,\n        blank: function() {\n            return this.node === null && this.offset === null;\n        }\n    };\n};\n\nvar DomTextTraverser = Class.extend({\n    init: function(options) {\n        this.node = options.node;\n        this.offset = options.offset === undefined ? (dom.isDataNode(this.node) && this.node.length) || 0 : options.offset;\n        this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\n    },\n\n    traverse: function(callback) {\n        if (!callback) {\n            return;\n        }\n        this.cancel = false;\n        this._traverse(callback, this.node, this.offset);\n    },\n\n    _traverse: function(callback, node, offset) {\n        if (!node || this.cancel) {\n            return;\n        }\n        if (node.nodeType === 3) {\n            var text = node.data;\n            if (offset !== undefined) {\n                text = this.subText(text, offset);\n            }\n            this.cancel = (callback(text, node, offset) === false);\n        }\n        else {\n            var edgeNode = this.edgeNode(node);\n            this.cancel = this.cancel || this.cancelAtNode(edgeNode);\n            return this._traverse(callback, edgeNode);\n        }\n\n        var next = this.next(node);\n        if (!next) {\n            var parent = node.parentNode;\n            while (!next && dom.isInline(parent)) {\n                next = this.next(parent);\n                parent = parent.parentNode;\n            }\n        }\n        this.cancel = this.cancel || this.cancelAtNode(next);\n        this._traverse(callback, next);\n    },\n\n    extendOptions: function(o) {\n        return $.extend({\n            node: this.node,\n            offset: this.offset,\n            cancelAtNode: this.cancelAtNode\n        }, o || {});\n    },\n\n    edgeNode: function(node) {},\n    next: function(node) {},\n    subText: function(text, offset) {}\n\n});\n\nvar LeftDomTextTraverser = DomTextTraverser.extend({\n    subText: function(text, splitIndex) {\n        return text.substring(0, splitIndex);\n    },\n\n    next: function(node) {\n        return node.previousSibling;\n    },\n\n    edgeNode: function(node) {\n        return node.lastChild;\n    },\n\n    clone: function(options) {\n        var o = this.extendOptions(options);\n        return new LeftDomTextTraverser(o);\n    }\n});\n\nvar RightDomTextTraverser = DomTextTraverser.extend({\n    subText: function(text, splitIndex) {\n        return text.substring(splitIndex);\n    },\n\n    next: function(node) {\n        return node.nextSibling;\n    },\n\n    edgeNode: function(node) {\n        return node.firstChild;\n    },\n\n    clone: function(options) {\n        var o = this.extendOptions(options);\n        return new RightDomTextTraverser(o);\n    }\n});\n\nextend(kendo.ui.editor, {\n    LinkFormatFinder: LinkFormatFinder,\n    LinkFormatter: LinkFormatter,\n    UnlinkCommand: UnlinkCommand,\n    LinkCommand: LinkCommand,\n    AutoLinkCommand: AutoLinkCommand,\n    UnlinkTool: UnlinkTool,\n    DomTextLinkDetection: DomTextLinkDetection,\n    LeftDomTextTraverser: LeftDomTextTraverser,\n    RightDomTextTraverser: RightDomTextTraverser\n});\n\nregisterTool(\"createLink\", new Tool({ key: \"K\", ctrl: true, command: LinkCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Create Link\" }) }));\nregisterTool(\"unlink\", new UnlinkTool({ key: \"K\", ctrl: true, shift: true, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Remove Link\" }) }));\nregisterTool(\"autoLink\", new Tool({ key: [keys.ENTER, keys.SPACEBAR], keyPressCommand: true, command: AutoLinkCommand }));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/plugins/formatblock',[ \"./format\" ], f);\n})(function() {\n\n(function($) {\n\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    formats = kendo.ui.Editor.fn.options.formats,\n    dom = Editor.Dom,\n    ToolTemplate = Editor.ToolTemplate,\n    FormatTool = Editor.FormatTool,\n    EditorUtils = Editor.EditorUtils,\n    registerTool = EditorUtils.registerTool,\n    registerFormat = EditorUtils.registerFormat,\n    RangeUtils = Editor.RangeUtils;\n\nvar BlockFormatFinder = Class.extend({\n    init: function(format) {\n        this.format = format;\n    },\n\n    contains: function(node, children) {\n        var i, len, child;\n\n        for (i = 0, len = children.length; i < len; i++) {\n            child = children[i];\n            if (!child || !dom.isAncestorOrSelf(node, child)) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    findSuitable: function(nodes) {\n        var format = this.format,\n            suitable = [],\n            i, len, candidate;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            for (var f = format.length - 1; f >= 0; f--) {\n                candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                if (candidate) {\n                    break;\n                }\n            }\n\n            if (!candidate || candidate.contentEditable === 'true') {\n                return [];\n            }\n\n            if ($.inArray(candidate, suitable) < 0) {\n                suitable.push(candidate);\n            }\n        }\n\n        this._resolveListsItems(suitable);\n\n        for (i = 0, len = suitable.length; i < len; i++) {\n            if (this.contains(suitable[i], suitable)) {\n                return [suitable[i]];\n            }\n        }\n\n        return suitable;\n    },\n    _resolveListsItems: function(nodes) {\n        var i, node, wrapper;\n        for (i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n            wrapper = dom.is(node, \"li\") ? node : dom.wrapper(node);\n            wrapper = wrapper && dom.list(wrapper) ? wrapper.children[0] : wrapper;\n            if (dom.is(wrapper, \"li\")) {\n                node = nodes[i] = wrapper;\n            }\n        }\n    },\n\n    findFormat: function(sourceNode, until) {\n        var format = this.format,\n            i, len, node, tags, attributes;\n        var editableParent = dom.editableParent(sourceNode);\n        var immutables = this.options && this.options.immutables;\n        var ImmutablesNS = Editor.Immutables;\n\n        for (i = 0, len = format.length; i < len; i++) {\n            node = sourceNode;\n            tags = format[i].tags;\n            attributes = format[i].attr;\n\n            if (immutables && tags && tags[0] == \"immutable\") {\n                var immutable = ImmutablesNS.immutableParent(node);\n                if (immutable && dom.attrEquals(immutable, attributes)) {\n                    return node;\n                }\n            }\n\n            while (node && dom.isAncestorOf(editableParent, node)) {\n                if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                    return node;\n                }\n\n                if (until && until(node)) {\n                    break;\n                }\n\n                node = node.parentNode;\n            }\n        }\n        return null;\n    },\n\n    getFormat: function(nodes) {\n        var that = this,\n            findFormat = function(node) {\n                    return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                },\n            result = findFormat(nodes[0]),\n            i, len;\n\n        if (!result) {\n            return \"\";\n        }\n\n        for (i = 1, len = nodes.length; i < len; i++) {\n            if (result != findFormat(nodes[i])) {\n                return \"\";\n            }\n        }\n\n        return result.nodeName.toLowerCase();\n    },\n\n    isFormatted: function(nodes, until) {\n        for (var i = 0, len = nodes.length; i < len; i++) {\n            if (!this.findFormat(nodes[i], until)) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n});\n\nvar BlockFormatter = Class.extend({\n    init: function(format, values) {\n        this.format = format;\n        this.values = values;\n        this.finder = new BlockFormatFinder(format);\n    },\n\n    wrap: function(tag, attributes, nodes) {\n\n        var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n\n        if (dom.isInline(commonAncestor)) {\n            commonAncestor = dom.blockParentOrBody(commonAncestor);\n        }\n\n        var ancestors = dom.significantChildNodes(commonAncestor),\n            position = dom.findNodeIndex(ancestors[0]),\n            wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes),\n            i, ancestor;\n\n        for (i = 0; i < ancestors.length; i++) {\n            ancestor = ancestors[i];\n            if (dom.isBlock(ancestor)) {\n                dom.attr(ancestor, attributes);\n\n                if (wrapper.childNodes.length) {\n                    dom.insertBefore(wrapper, ancestor);\n                    wrapper = wrapper.cloneNode(false);\n                }\n\n                position = dom.findNodeIndex(ancestor) + 1;\n\n                continue;\n            }\n\n            wrapper.appendChild(ancestor);\n        }\n\n        if (wrapper.firstChild) {\n            dom.insertAt(commonAncestor, wrapper, position);\n        }\n    },\n\n    apply: function(nodes) {\n        var format, values = this.values;\n\n        function attributes(format) {\n            return extend({}, format && format.attr, values);\n        }\n\n        this._handleImmutables(nodes, true);\n\n        var images = dom.filter(\"img\", nodes);\n        var imageFormat = EditorUtils.formatByName(\"img\", this.format);\n        var imageAttributes = attributes(imageFormat);\n        $.each(images, function() {\n            dom.attr(this, imageAttributes);\n        });\n\n        // only images were selected, no need to wrap\n        if (images.length == nodes.length) {\n            return;\n        }\n\n        var nonImages = dom.filter(\"img\", nodes, true);\n        var formatNodes = this.finder.findSuitable(nonImages);\n\n        if (formatNodes.length) {\n            for (var i = 0, len = formatNodes.length; i < len; i++) {\n                format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                dom.attr(formatNodes[i], attributes(format));\n            }\n        } else {\n            format = this.format[0];\n            this.wrap(format.tags[0], attributes(format), nonImages);\n        }\n    },\n\n    _handleImmutables: function(nodes, applyFormatting) {\n        if (!this.immutables()) {\n            return;\n        }\n        var immutableFormat = EditorUtils.formatByName(\"immutable\", this.format);\n        if (!immutableFormat) {\n            return;\n        }\n        var ImmutablesNS = Editor.Immutables;\n        var l = nodes.length - 1;\n        for (var i = l; i >= 0; i--) {\n            var immutableParent = ImmutablesNS.immutableParent(nodes[i]);\n            if (!immutableParent) {\n                continue;\n            }\n            if (immutableParent !== nodes[i + 1]) {\n                if (applyFormatting) {\n                    dom.attr(immutableParent, immutableFormat.attr);\n                } else {\n                    dom.unstyle(immutableParent, immutableFormat.attr.style);\n                }\n            }\n            nodes.splice(i, 1);\n        }\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    remove: function(nodes) {\n        var i, l, formatNode, namedFormat, name;\n\n        this._handleImmutables(nodes, false);\n\n        for (i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n            if (formatNode) {\n                name = dom.name(formatNode);\n                namedFormat = EditorUtils.formatByName(name, this.format);\n                if (namedFormat.attr.style) {\n                    dom.unstyle(formatNode, namedFormat.attr.style);\n                }\n                if (namedFormat.attr.className) {\n                    dom.removeClass(formatNode, namedFormat.attr.className);\n                }\n            }\n        }\n    },\n\n    toggle: function(range) {\n        var that = this,\n            nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n\n        if (that.finder.isFormatted(nodes)) {\n            that.remove(nodes);\n        } else {\n            that.apply(nodes);\n        }\n    }\n});\n\nvar GreedyBlockFormatter = Class.extend({\n    init: function(format, values) {\n        var that = this;\n        that.format = format;\n        that.values = values;\n        that.finder = new BlockFormatFinder(format);\n    },\n\n    apply: function(nodes) {\n        var format = this.format;\n        var blocks = dom.blockParents(nodes);\n        var formatTag = format[0].tags[0];\n        var i, len, list, formatter, range;\n        var element;\n        var tagName;\n        var block;\n        var immutalbeParent;\n\n        if (blocks.length) {\n            for (i = 0, len = blocks.length; i < len; i++) {\n                block = blocks[i];\n                immutalbeParent = this.immutables() && Editor.Immutables.immutableParent(block);\n\n                if (!immutalbeParent) {\n                    tagName = dom.name(block);\n\n                    if (tagName == \"li\") {\n                        list = block.parentNode;\n                        formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                        range = this.editor.createRange();\n                        range.selectNode(blocks[i]);\n                        formatter.toggle(range);\n                    } else if (formatTag && (tagName == \"td\" || block.attributes.contentEditable)) {\n                        new BlockFormatter(format, this.values).apply(block.childNodes);\n                    } else {\n                        element = dom.changeTag(block, formatTag);\n                        dom.attr(element, format[0].attr);\n                    }\n                }\n            }\n        } else {\n            var blockFormatter = new BlockFormatter(format, this.values);\n            blockFormatter.editor = this.editor;\n            blockFormatter.apply(nodes);\n        }\n    },\n\n    toggle: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n        if (!nodes.length) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                nodes = dom.significantChildNodes(range.commonAncestorContainer);\n            }\n        }\n\n        this.apply(nodes);\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    }\n});\n\nvar BlockFormatTool = FormatTool.extend({ init: function(options) {\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new BlockFormatFinder(options.format),\n            formatter: function() {\n                return new BlockFormatter(options.format);\n            }\n        }));\n    }\n});\n\nextend(Editor, {\n    BlockFormatFinder: BlockFormatFinder,\n    BlockFormatter: BlockFormatter,\n    GreedyBlockFormatter: GreedyBlockFormatter,\n    BlockFormatTool: BlockFormatTool\n});\n\nvar listElements = [\"ul\",\"ol\",\"li\"];\n\nregisterFormat(\"justifyLeft\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"left\" } } },\n    { tags: [\"img\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"left\", listStylePosition: \"\" } } }\n]);\nregisterTool(\"justifyLeft\", new BlockFormatTool({\n    format: formats.justifyLeft,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Justify Left\"\n    })\n}));\n\nregisterFormat(\"justifyCenter\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"center\" } } },\n    { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"center\", listStylePosition: \"inside\" } } }\n]);\nregisterTool(\"justifyCenter\", new BlockFormatTool({\n    format: formats.justifyCenter,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Justify Center\"\n    })\n}));\n\nregisterFormat(\"justifyRight\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"right\" } } },\n    { tags: [\"img\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"right\", listStylePosition: \"inside\" } } }\n]);\nregisterTool(\"justifyRight\", new BlockFormatTool({\n    format: formats.justifyRight,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Justify Right\"\n    })\n}));\n\nregisterFormat(\"justifyFull\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"justify\" } } },\n    { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"justify\", listStylePosition: \"\" } } }\n]);\nregisterTool(\"justifyFull\", new BlockFormatTool({\n    format: formats.justifyFull,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Justify Full\"\n    })\n}));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/plugins/lists',[ \"./formatblock\" ], f);\n})(function() {\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    ToolTemplate = Editor.ToolTemplate,\n    FormatTool = Editor.FormatTool,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    textNodes = RangeUtils.textNodes,\n    registerTool = Editor.EditorUtils.registerTool;\n\nvar ListFormatFinder = BlockFormatFinder.extend({\n    init: function(options) {\n        this.tag = options.tag;\n        this.attr = options.attr;\n        this.altAttr = options.altAttr;\n\n        var tags = this.tags = [this.tag == 'ul' ? 'ol' : 'ul', this.tag];\n        var format = [{ tags: tags, attr: this.attr }];\n\n        if (this.altAttr) {\n            format.push({\n                tags: tags,\n                attr: this.altAttr\n            });\n        }\n\n        BlockFormatFinder.fn.init.call(this, format);\n    },\n\n    matchesType: function(node) {\n        return dom.attrEquals(node, this.attr) || (this.altAttr && dom.attrEquals(node, this.altAttr));\n    },\n\n    isList: function(node) {\n        return dom.list(node);\n    },\n\n    isFormatted: function(nodes) {\n        var formatNodes = [];\n        var formatNode, i;\n\n        for (i = 0; i < nodes.length; i++) {\n            formatNode = this.findFormat(nodes[i], this.isList);\n\n            if (formatNode && dom.name(formatNode) == this.tag && this.matchesType(formatNode)) {\n                formatNodes.push(formatNode);\n            }\n        }\n\n        if (formatNodes.length < 1) {\n            return false;\n        }\n\n        if (formatNodes.length != nodes.length) {\n            return false;\n        }\n\n        // check if sequential lists are selected\n        for (i = 0; i < formatNodes.length; i++) {\n            if (formatNodes[i].parentNode != formatNode.parentNode) {\n                break;\n            }\n\n            if (formatNodes[i] != formatNode) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    findSuitable: function(nodes) {\n        var candidate = this.findFormat(nodes[0], this.isList);\n\n        if (candidate && dom.name(candidate) == this.tag) {\n            return candidate;\n        }\n\n        return null;\n    }\n\n});\n\nvar ListFormatter = Class.extend({\n    init: function(options, unwrapTag) {\n        var that = this;\n        options = $.isPlainObject(options) ? options : { tag: options, attr: null };\n        that.tag = options.tag;\n        that.attr = options.attr;\n        that.finder = new ListFormatFinder(options);\n        that.unwrapTag = unwrapTag;\n    },\n\n    isList: function(node) {\n        return dom.list(node);\n    },\n\n    immutables: function() {\n        return this.editor && !!this.editor.options.immutables;\n    },\n\n    wrap: function(list, nodes) {\n        var li = dom.create(list.ownerDocument, \"li\"),\n            i, node,\n            isImmutable = this.immutables() ? Editor.Immutables.immutable : $.noop;\n\n        for (i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n\n            if (dom.is(node, 'li')) {\n                list.appendChild(node);\n                continue;\n            }\n\n            if (this.isList(node)) {\n                while (node.firstChild) {\n                    list.appendChild(node.firstChild);\n                }\n                continue;\n            }\n\n            if (dom.is(node, \"td\")) {\n                while (node.firstChild) {\n                    li.appendChild(node.firstChild);\n                }\n                list.appendChild(li);\n                node.appendChild(list);\n                list = list.cloneNode(false);\n                li = li.cloneNode(false);\n                continue;\n            }\n\n            li.appendChild(node);\n\n            if (dom.isBlock(node)) {\n                list.appendChild(li);\n                if (!isImmutable(node)) {\n                    dom.unwrap(node);\n                }\n                li = li.cloneNode(false);\n            }\n        }\n\n        if (li.firstChild) {\n            list.appendChild(li);\n        }\n    },\n\n    containsAny: function(parent, nodes) {\n        for (var i = 0; i < nodes.length; i++) {\n            if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                return true;\n            }\n        }\n\n        return false;\n    },\n\n    suitable: function(candidate, nodes) {\n        if (candidate.className == \"k-marker\") {\n            var sibling = candidate.nextSibling;\n\n            if (sibling && dom.isBlock(sibling)) {\n                return false;\n            }\n\n            sibling = candidate.previousSibling;\n\n            if (sibling && dom.isBlock(sibling)) {\n                return false;\n            }\n        }\n\n        return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n    },\n\n    _parentLists: function(node) {\n        var editable = dom.closestEditable(node);\n\n        return $(node).parentsUntil(editable, \"ul,ol\");\n    },\n\n    split: function(range) {\n        var nodes = textNodes(range);\n        var start, end, parents;\n\n        if (nodes.length) {\n            start = dom.parentOfType(nodes[0], ['li']);\n            end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n            range.setStartBefore(start);\n            range.setEndAfter(end);\n\n            for (var i = 0, l = nodes.length; i < l; i++) {\n                var formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    parents = this._parentLists(formatNode);\n                    if (parents.length) {\n                        RangeUtils.split(range, parents.last()[0], true);\n                    } else {\n                        RangeUtils.split(range, formatNode, true);\n                    }\n                }\n            }\n        }\n    },\n\n    merge: function(tag, formatNode) {\n        var prev = formatNode.previousSibling, next;\n\n        while (prev && (prev.className == \"k-marker\" || (prev.nodeType == 3 && dom.isWhitespace(prev)))) {\n            prev = prev.previousSibling;\n        }\n\n        // merge with previous list\n        if (prev && dom.name(prev) == tag && this.finder.matchesType(prev)) {\n            while (formatNode.firstChild) {\n                prev.appendChild(formatNode.firstChild);\n            }\n            dom.remove(formatNode);\n            formatNode = prev;\n        }\n\n        next = formatNode.nextSibling;\n        while (next && (next.className == \"k-marker\" || (next.nodeType == 3 && dom.isWhitespace(next)))) {\n            next = next.nextSibling;\n        }\n\n        // merge with next list\n        if (next && dom.name(next) == tag && this.finder.matchesType(next)) {\n            while (formatNode.lastChild) {\n                next.insertBefore(formatNode.lastChild, next.firstChild);\n            }\n            dom.remove(formatNode);\n        }\n    },\n\n    breakable: function(node) {\n        return (\n            node != node.ownerDocument.body &&\n            !/table|tbody|thead|tr|td/.test(dom.name(node)) &&\n            !node.attributes.contentEditable\n        );\n    },\n\n    findSuitableNode: function(nodes) {\n        var that = this,\n            finder = that.finder,\n            tag = that.tag,\n            formatNode;\n\n        formatNode = finder.findSuitable(nodes);\n\n        if (!formatNode) {\n            // Find the opposite tag\n            finder = new ListFormatFinder({ tag: tag == \"ul\" ? \"ol\" : \"ul\" });\n            formatNode = finder.findSuitable(nodes);\n        }\n\n        if (!formatNode) {\n            // Find the same tag\n            finder = new ListFormatFinder({ tag: tag });\n            formatNode = finder.findSuitable(nodes);\n            formatNode = formatNode && that.finder.matchesType(formatNode) ? null : formatNode;\n        }\n\n\n        return formatNode;\n    },\n\n    applyOnSection: function(section, nodes) {\n        var tag = this.tag;\n        var attr = this.attr;\n        var commonAncestor = dom.closestSplittableParent(nodes);\n\n        var ancestors = [];\n        var formatNode = this.findSuitableNode(nodes);\n\n        var childNodes;\n\n        if (/table|tbody|thead/.test(dom.name(commonAncestor))) {\n            childNodes = $.map(nodes, function(node) {\n                return dom.parentOfType(node, [\"td\"]);\n            });\n        } else {\n            childNodes = dom.significantChildNodes(commonAncestor);\n\n            if ($.grep(childNodes, dom.isBlock).length) {\n                childNodes = $.grep(childNodes, (function(node) {\n                    return this.containsAny(node, nodes);\n                }).bind(this));\n            }\n\n            if (!childNodes.length) {\n                childNodes = nodes;\n            }\n        }\n\n        function pushAncestor() {\n            ancestors.push(this);\n        }\n\n        for (var i = 0; i < childNodes.length; i++) {\n            var child = childNodes[i];\n            var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n\n            if (!suitable) {\n                continue;\n            }\n\n            if (formatNode && this.isList(child)) {\n                // merging lists\n                $.each(child.children, pushAncestor);\n                dom.remove(child);\n            } else {\n                ancestors.push(child);\n            }\n        }\n\n        if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n            ancestors = [commonAncestor];\n        }\n\n        if (!formatNode) {\n            formatNode = dom.create(commonAncestor.ownerDocument, tag, attr);\n            if (dom.isBlock(ancestors[0])) {\n                dom.mergeAttributes(ancestors[0], formatNode);\n            }\n            dom.insertBefore(formatNode, ancestors[0]);\n        }\n\n        this.wrap(formatNode, ancestors);\n\n        while (dom.isBom(formatNode.nextSibling)) {\n            dom.remove(formatNode.nextSibling);\n        }\n\n        if (!this.finder.matchesType(formatNode)) {\n            formatNode.removeAttribute(\"type\");\n            formatNode.style.listStyleType = \"\";\n            dom.mergeAttributes(dom.create(commonAncestor.ownerDocument, tag, attr), formatNode, true);\n        }\n\n        if (formatNode && formatNode.getAttribute(\"type\") === \"\") {\n            formatNode.removeAttribute(\"type\");\n        }\n\n        if (!dom.is(formatNode, tag)) {\n            dom.changeTag(formatNode, tag);\n        }\n\n        this.merge(tag, formatNode);\n    },\n\n    apply: function(nodes) {\n        var i = 0,\n            sections = [],\n            lastSection,\n            lastNodes,\n            section,\n            node,\n            l = nodes.length,\n            immutableParent = this.immutables() ? Editor.Immutables.immutableParent : $.noop;\n\n        function addLastSection() {\n            if (lastSection) {\n                sections.push({\n                    section: lastSection,\n                    nodes: lastNodes\n                });\n            }\n        }\n\n        // split nodes into sections that need to be different lists\n        for (i = 0; i < l; i++) {\n            node = immutableParent(nodes[i]) || nodes[i];\n            section = dom.closestEditable(node, [\"td\",\"th\",\"body\"]);\n            if (!lastSection || section != lastSection) {\n                addLastSection();\n                lastNodes = [node];\n                lastSection = section;\n            } else {\n                lastNodes.push(node);\n            }\n        }\n\n        addLastSection();\n\n        for (i = 0; i < sections.length; i++) {\n            this.applyOnSection(sections[i].section, sections[i].nodes);\n        }\n    },\n\n    unwrap: function(ul) {\n        var fragment = ul.ownerDocument.createDocumentFragment(),\n            unwrapTag = this.unwrapTag,\n            parents,\n            li,\n            p,\n            child;\n\n        for (li = ul.firstChild; li; li = li.nextSibling) {\n            p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n\n            while (li.firstChild) {\n                child = li.firstChild;\n\n                if (dom.isBlock(child)) {\n\n                    if (p.firstChild) {\n                        fragment.appendChild(p);\n                        p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                    }\n\n                    fragment.appendChild(child);\n                } else {\n                    p.appendChild(child);\n                }\n            }\n\n            if (p.firstChild) {\n                fragment.appendChild(p);\n            }\n        }\n\n        parents = this._parentLists(ul);\n\n        if (parents[0]) {\n            dom.insertAfter(fragment, parents.last()[0]);\n            parents.last().remove();\n        } else {\n            dom.insertAfter(fragment, ul);\n        }\n\n        dom.remove(ul);\n    },\n\n    remove: function(nodes) {\n        var formatNode;\n        for (var i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n\n            if (formatNode) {\n                this.unwrap(formatNode);\n            }\n        }\n    },\n\n    toggle: function(range) {\n        var that = this,\n            nodes = textNodes(range),\n            ancestor = range.commonAncestorContainer;\n\n        if (!nodes.length) {\n            range.selectNodeContents(ancestor);\n            nodes = textNodes(range);\n            if (!nodes.length) {\n                var text = ancestor.ownerDocument.createTextNode(\"\");\n                range.startContainer.appendChild(text);\n                nodes = [text];\n                range.selectNode(text.parentNode);\n            }\n        }\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        if (that.finder.isFormatted(nodes)) {\n            that.split(range);\n            that.remove(nodes);\n        } else {\n            that.apply(nodes);\n        }\n    }\n\n});\n\nvar ListCommand = Command.extend({\n    init: function(options) {\n        options.formatter = new ListFormatter({ tag: options.tag, attr: options.attr });\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar ListTool = FormatTool.extend({\n    init: function(options) {\n        this.options = options;\n\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new ListFormatFinder(options)\n        }));\n    },\n\n    command: function(commandArguments) {\n        return new ListCommand(extend(commandArguments, { tag: this.options.tag, attr: this.options.attr }));\n    }\n});\n\nextend(Editor, {\n    ListFormatFinder: ListFormatFinder,\n    ListFormatter: ListFormatter,\n    ListCommand: ListCommand,\n    ListTool: ListTool\n});\n\nregisterTool(\"insertUnorderedList\", new ListTool({ tag: 'ul', attr: { style: { listStyleType: \"\" }, type: \"\" }, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Insert unordered list\" }) }));\nregisterTool(\"insertOrderedList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"\" }, type: \"\" }, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Insert ordered list\" }) }));\nregisterTool(\"insertUpperRomanList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"upper-roman\" } }, altAttr: { type: \"I\" }, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Insert upper roman list\" }) }));\nregisterTool(\"insertLowerRomanList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"lower-roman\" } }, altAttr: { type: \"i\" }, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Insert lower roman list\" }) }));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/plugins/formatting',[ \"./inlineformat\" ], f);\n})(function() {\n\n(function($) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    DelayedExecutionTool = Editor.DelayedExecutionTool,\n    Command = Editor.Command,\n    dom = Editor.Dom,\n    EditorUtils = Editor.EditorUtils,\n    RangeUtils = Editor.RangeUtils,\n    registerTool = EditorUtils.registerTool;\n\n\nvar FormattingTool = DelayedExecutionTool.extend({\n    init: function(options) {\n        var that = this;\n        Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n\n        that.type = \"kendoSelectBox\";\n\n        that.finder = {\n            getFormat: function() { return \"\"; }\n        };\n    },\n\n    options: {\n        items: [\n            { text: \"Paragraph\", value: \"p\" },\n            { text: \"Quotation\", value: \"blockquote\" },\n            { text: \"Heading 1\", value: \"h1\" },\n            { text: \"Heading 2\", value: \"h2\" },\n            { text: \"Heading 3\", value: \"h3\" },\n            { text: \"Heading 4\", value: \"h4\" },\n            { text: \"Heading 5\", value: \"h5\" },\n            { text: \"Heading 6\", value: \"h6\" }\n        ],\n        width: 110\n    },\n\n    toFormattingItem: function(item) {\n        var value = item.value;\n\n        if (!value) {\n            return item;\n        }\n\n        if (item.tag || item.className) {\n            return item;\n        }\n\n        var dot = value.indexOf(\".\");\n\n        if (dot === 0) {\n            item.className = value.substring(1);\n        } else if (dot == -1) {\n            item.tag = value;\n        } else {\n            item.tag = value.substring(0, dot);\n            item.className = value.substring(dot + 1);\n        }\n\n        return item;\n    },\n\n    command: function(args) {\n        var that = this;\n        var item = args.value;\n\n        item = this.toFormattingItem(item);\n\n        return new Editor.FormatCommand({\n            range: args.range,\n            formatter: function() {\n                var formatter,\n                    tags = (item.tag || item.context || \"span\").split(\",\"),\n                    format = [{\n                        tags: tags,\n                        attr: { className: item.className || \"\" }\n                    }];\n\n                if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                    formatter = new Editor.GreedyInlineFormatter(format);\n                } else {\n                    formatter = new Editor.GreedyBlockFormatter(format);\n                }\n\n                formatter.editor = that.editor;\n                return formatter;\n            }\n        });\n    },\n\n    initialize: function(ui, initOptions) {\n        var editor = initOptions.editor;\n        var options = this.options;\n        var toolName = options.name;\n        var that = this;\n        var selectBox;\n\n        that.editor = editor;\n\n        ui.width(options.width);\n\n        selectBox = ui.kendoSelectBox({\n            autoWidth: true,\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            dataSource: options.items || editor.options[toolName],\n            title: editor.options.messages[toolName],\n            autoSize: true,\n            change: function() {\n                var dataItem = this.dataItem();\n\n                if (dataItem) {\n                    Tool.exec(editor, toolName, dataItem.toJSON());\n                }\n            },\n            dataBound: function() {\n                var i, items = this.dataSource.data();\n\n                for (i = 0; i < items.length; i++) {\n                    items[i] = that.toFormattingItem(items[i]);\n                }\n            },\n            highlightFirst: false,\n            template: kendo.template(\n                '<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>'\n            )\n        }).data(\"kendoSelectBox\");\n\n        ui.attr(\"title\", initOptions.title);\n        selectBox.wrapper.attr(\"title\", initOptions.title);\n\n        ui.addClass(\"k-decorated\")\n            .closest(\".k-dropdownlist, .k-combobox\")\n                .removeClass(\"k-\" + toolName)\n                .find(\"*\").addBack()\n                    .attr(\"unselectable\", \"on\");\n    },\n\n    getFormattingValue: function(items, nodes) {\n        for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            var tag = item.tag || item.context || \"\";\n            var className = item.className ? \".\" + item.className : \"\";\n            var selector = tag + className;\n\n            var element = $(nodes[0]).closest(selector)[0];\n\n            if (!element) {\n                continue;\n            }\n\n            if (nodes.length == 1) {\n                return item.value;\n            }\n\n            for (var n = 1; n < nodes.length; n++) {\n                if (!$(nodes[n]).closest(selector)[0]) {\n                    break;\n                } else if (n == nodes.length - 1) {\n                    return item.value;\n                }\n            }\n        }\n\n        return \"\";\n    },\n\n    update: function(ui, nodes) {\n        var selectBox = $(ui).data(this.type);\n\n        // necessary until formatBlock is deleted\n        if (!selectBox) {\n            return;\n        }\n\n        var dataSource = selectBox.dataSource,\n            items = dataSource.data(),\n            i, context,\n            ancestor = dom.commonAncestor.apply(null, nodes);\n\n        if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n            return;\n        } else {\n            this._ancestor = ancestor;\n        }\n\n        for (i = 0; i < items.length; i++) {\n            context = items[i].context;\n\n            items[i].visible = !context || !!$(ancestor).closest(context).length;\n        }\n\n        dataSource.filter([{ field: \"visible\", operator: \"eq\", value: true }]);\n\n        DelayedExecutionTool.fn.update.call(this, ui, nodes);\n\n        selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n\n        selectBox.wrapper.toggleClass(\"k-disabled\", !dataSource.view().length);\n    },\n\n    destroy: function() {\n        this._ancestor = null;\n    }\n});\n\nvar CleanFormatCommand = Command.extend({\n    exec: function() {\n        var range = this.lockRange(true);\n        this.tagsToClean = this.options.remove || \"strong,em,span,sup,sub,del,b,i,u,font\".split(\",\");\n\n        RangeUtils.wrapSelectedElements(range);\n\n        var nodes = RangeUtils.mapAll(range, function(node) {\n            return node;\n        });\n\n\n        for (var c = nodes.length - 1; c >= 0; c--) {\n            var node = nodes[c];\n            if (!this.immutableParent(node)) {\n                this.clean(node);\n            }\n        }\n\n        this.releaseRange(range);\n    },\n\n    clean: function(node) {\n        if (!node || dom.isMarker(node)) {\n            return;\n        }\n\n        var name = dom.name(node);\n\n        if (name == \"ul\" || name == \"ol\") {\n            var listFormatter = new Editor.ListFormatter(name);\n            var prev = node.previousSibling;\n            var next = node.nextSibling;\n\n            listFormatter.unwrap(node);\n\n            // clean contents\n            for (; prev && prev != next; prev = prev.nextSibling) {\n                this.clean(prev);\n            }\n        } else if (name == \"blockquote\") {\n            dom.changeTag(node, \"p\");\n        } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n            for (var i = node.childNodes.length - 1; i >= 0; i--) {\n                this.clean(node.childNodes[i]);\n            }\n\n            node.removeAttribute(\"style\");\n            node.removeAttribute(\"class\");\n        } else {\n            unwrapListItem(node);\n        }\n\n        if ($.inArray(name, this.tagsToClean) > -1) {\n            dom.unwrap(node);\n        }\n    },\n\n    immutableParent: function(node) {\n        return this.immutables() && Editor.Immutables.immutableParent(node);\n    }\n});\n\n\nfunction unwrapListItem(node) {\n    var li = dom.closestEditableOfType(node, [\"li\"]);\n    if (li) {\n        var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n        var range = kendo.ui.editor.W3CRange.fromNode(node);\n        range.selectNode(li);\n        listFormatter.toggle(range);\n    }\n}\n\n$.extend(Editor, {\n    FormattingTool: FormattingTool,\n    CleanFormatCommand: CleanFormatCommand\n});\n\nregisterTool(\"formatting\", new FormattingTool({ template: new ToolTemplate({ template: EditorUtils.dropDownListTemplate, title: \"Format\" }) }));\nregisterTool(\"cleanFormatting\", new Tool({ command: CleanFormatCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Clean formatting\" }) }));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/plugins/image',[ \"kendo.imagebrowser\", \"../command\" ], f);\n})(function() {\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    ToolTemplate = Editor.ToolTemplate,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n    keys = kendo.keys,\n    KEDITORIMAGEURL = \"#k-editor-image-url\",\n    KEDITORIMAGETITLE = \"#k-editor-image-title\",\n    KEDITORIMAGEWIDTH = \"#k-editor-image-width\",\n    KEDITORIMAGEHEIGHT = \"#k-editor-image-height\";\n\nvar ImageCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        Command.fn.init.call(that, options);\n\n        that.async = true;\n        that.attributes = {};\n    },\n\n    insertImage: function(img, range) {\n        var attributes = this.attributes;\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (attributes.src && attributes.src != \"http://\") {\n\n            var removeIEAttributes = function() {\n                setTimeout(function() {\n                    if (!attributes.width) {\n                        img.removeAttribute(\"width\");\n                    }\n\n                    if (!attributes.height) {\n                        img.removeAttribute(\"height\");\n                    }\n\n                    img.removeAttribute(\"complete\");\n                });\n            };\n\n            if (!img) {\n                img = dom.create(doc, \"img\", attributes);\n                img.onload = img.onerror = removeIEAttributes;\n\n                range.deleteContents();\n                range.insertNode(img);\n\n                if (!img.nextSibling) {\n                    dom.insertAfter(doc.createTextNode(\"\\ufeff\"), img);\n                }\n\n                removeIEAttributes();\n\n                range.setStartAfter(img);\n                range.setEndAfter(img);\n                RangeUtils.selectRange(range);\n                return true;\n            } else {\n                img.onload = img.onerror = removeIEAttributes;\n                dom.attr(img, attributes);\n                removeIEAttributes();\n            }\n        }\n\n        return false;\n    },\n\n    _dialogTemplate: function(showBrowser) {\n        return kendo.template(\n            '<div class=\"k-editor-dialog k-popup-edit-form\">' +\n                '<div class=\"k-edit-form-container\">' +\n                    '<div class=\"k-edit-form-content\">' +\n                        '# if (showBrowser) { #' +\n                            '<div class=\"k-filebrowser k-imagebrowser\"></div>' +\n                        '# } #' +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-image-url\">#: messages.imageWebAddress #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-url\"></span>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-image-title\">#: messages.imageAltText #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-title\"></span>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-image-width\">#: messages.imageWidth #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-width\"></span>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-image-height\">#: messages.imageHeight #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-height\"></span>' +\n                        \"</div>\" +\n                    '</div>' +\n                    '<div class=\"k-edit-buttons\">' +\n                        '<button class=\"k-dialog-insert k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary\"><span class=\"k-button-text\">#: messages.dialogInsert #</span></button>' +\n                        '<button class=\"k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\"><span class=\"k-button-text\">#: messages.dialogCancel #</span></button>' +\n                    '</div>' +\n                '</div>' +\n            '</div>'\n        )({\n            messages: this.editor.options.messages,\n            showBrowser: showBrowser\n        });\n    },\n\n    redo: function() {\n        var that = this,\n            range = that.lockRange();\n\n        if (!that.insertImage(RangeUtils.image(range), range)) {\n            that.releaseRange(range);\n        }\n    },\n\n    exec: function() {\n        var that = this,\n            range = that.lockRange(),\n            applied = false,\n            img = RangeUtils.image(range),\n            imageWidth = img && img.getAttribute(\"width\") || \"\",\n            imageHeight = img && img.getAttribute(\"height\") || \"\",\n            dialog,\n            isIE = kendo.support.browser.msie,\n            options = that.editor.options,\n            messages = options.messages,\n            imageBrowser = options.imageBrowser,\n            showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined),\n            dialogOptions = {\n                title: messages.insertImage,\n                visible: false,\n                resizable: showBrowser\n            };\n\n        this.expandImmutablesIn(range);\n\n        function apply(e) {\n            var element = dialog.element,\n                w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10),\n                h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n\n            that.attributes = {\n                src: element.find(KEDITORIMAGEURL).val().replace(/ /g, \"%20\"),\n                alt: element.find(KEDITORIMAGETITLE).val()\n            };\n\n            that.attributes.width = null;\n            that.attributes.height = null;\n\n            if (!isNaN(w) && w > 0) {\n                that.attributes.width = w;\n            }\n\n            if (!isNaN(h) && h > 0) {\n                that.attributes.height = h;\n            }\n\n            applied = that.insertImage(img, range);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n        }\n\n        function close(e) {\n            e.preventDefault();\n            dialog.destroy();\n\n            dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n            if (!applied) {\n                that.releaseRange(range);\n            }\n        }\n\n        function keyDown(e) {\n            if (e.keyCode == keys.ENTER) {\n                apply(e);\n            } else if (e.keyCode == keys.ESC) {\n                close(e);\n            }\n        }\n\n        dialogOptions.close = close;\n\n        if (showBrowser) {\n            dialogOptions.width = 750;\n        }\n\n        dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions)\n            .toggleClass(\"k-filebrowser-dialog\", showBrowser)\n            .find(\".k-dialog-insert\").on(\"click\", apply).end()\n            .find(\".k-dialog-close\").on(\"click\", close).end()\n            .find(\".k-edit-field input\").on(\"keydown\", keyDown).end()\n            // IE < 8 returns absolute url if getAttribute is not used\n            .find(KEDITORIMAGEURL).val(img ? img.getAttribute(\"src\", 2) : \"http://\").end()\n            .find(KEDITORIMAGETITLE).val(img ? img.alt : \"\").end()\n            .find(KEDITORIMAGEWIDTH).val(imageWidth).end()\n            .find(KEDITORIMAGEHEIGHT).val(imageHeight).end()\n            .data(\"kendoWindow\");\n\n        var element = dialog.element;\n        if (showBrowser) {\n            this._imageBrowser = new kendo.ui.ImageBrowser(\n                element.find(\".k-imagebrowser\"),\n                extend({}, imageBrowser)\n            );\n\n            this._imageBrowser.bind(\"change\", function(ev) {\n                if (ev.selected.get(\"type\") === \"f\") {\n                    element.find(KEDITORIMAGEURL).val(this.value());\n                }\n            });\n\n            this._imageBrowser.bind(\"apply\", apply);\n        }\n\n        if (isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n        dialog.center().open();\n        element.find(KEDITORIMAGEURL).trigger(\"focus\").select();\n    }\n\n});\n\nkendo.ui.editor.ImageCommand = ImageCommand;\n\nregisterTool(\"insertImage\", new Editor.Tool({ command: ImageCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Insert Image\" }) }));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/plugins/import',[ \"../main\" ], f);\n})(function() {\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    registerTool = EditorUtils.registerTool,\n    ToolTemplate = Editor.ToolTemplate,\n    loadingOverlay = '<div contenteditable=\"false\" class=\"k-loading-mask\" style=\"width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;\"><div class=\"k-loading-image\"></div><div class=\"k-loading-color\"></div></div>';\n\nvar ImportCommand = Command.extend({\n    exec: function() {\n        (this.editor._uploadWidget || this._initializeUploadWidget()).element.click();\n    },\n\n    _initializeUploadWidget: function() {\n        var cmd = this;\n        var editor = cmd.editor;\n        var importOptions = editor.options[\"import\"];\n        var upload = $('<input id=\"editorImport\" name=\"files\" type=\"file\" />').kendoUpload({\n            success: cmd._onUploadSuccess.bind(cmd),\n            progress: cmd._onUploadProgress.bind(cmd),\n            select: cmd._onUploadSelect.bind(cmd),\n            error: cmd._onUploadError.bind(cmd),\n            complete: cmd._onUploadComplete.bind(cmd),\n            showFileList: false,\n            multiple: false,\n            async: {\n                saveUrl: importOptions.proxyURL,\n                autoUpload: true,\n                saveField: \"file\"\n            },\n            validation: {\n                allowedExtensions: importOptions.allowedExtensions,\n                maxFileSize: importOptions.maxFileSize\n            }\n        }).getKendoUpload();\n\n        editor._uploadWidget = upload;\n\n        return upload;\n    },\n    _onUploadComplete: function(ev) {\n        this._trigger(\"complete\", ev);\n        ev.sender.clearAllFiles();\n\n        this._removeLoadingOverlay();\n    },\n    _onUploadSuccess: function(ev) {\n        this.editor.value(ev.response.html.replace(/<\\/?body>/ig, \"\"));\n        this._trigger(\"success\", ev);\n    },\n    _onUploadProgress: function(ev) {\n        this._trigger(\"progress\", ev);\n    },\n    _onUploadSelect: function(ev) {\n        this._trigger(\"select\", ev);\n        if (!ev.files[0].validationErrors) {\n            this._initLoadingOverlay();\n        }\n    },\n    _onUploadError: function(ev) {\n        this._trigger(\"error\", ev);\n    },\n\n    _trigger: function(eventType, uploadEvent) {\n        var editor = this.editor;\n        var importOptions = editor.options[\"import\"];\n        if (typeof importOptions[eventType] === \"function\") {\n            importOptions[eventType].call(editor, uploadEvent);\n        }\n    },\n\n    _initLoadingOverlay: function() {\n        var editable = this.editor.body;\n        if (Editor.Dom.is(editable, \"body\")) {\n            this._iframeWrapper = this._container =\n                this.editor.wrapper.find(\"iframe\").parent()\n                .css({ position: \"relative\" }).append(loadingOverlay);\n        } else {\n            this._container = $(editable).append(loadingOverlay);\n        }\n\n        kendo.ui.progress(this._container, true);\n    },\n\n    _removeLoadingOverlay: function() {\n        kendo.ui.progress(this._container, false);\n        $(this._iframeWrapper).css({\n            position: \"\"\n        });\n\n        delete this._container;\n        delete this._iframeWrapper;\n    }\n});\n\nextend(Editor, {\n    ImportCommand: ImportCommand\n});\n\nregisterTool(\"import\", new Tool({\n    command: ImportCommand,\n    template: new ToolTemplate({ template: EditorUtils.iconTextButtonTemplate, title: \"Import\" })\n}));\n\n}(window.kendo.jQuery));\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/plugins/insert',[ \"../command\" ], f);\n})(function() {\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        editorNS = kendo.ui.editor,\n        Command = editorNS.Command,\n        GenericCommand = editorNS.GenericCommand,\n        EditorUtils = editorNS.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Tool = editorNS.Tool,\n        ToolTemplate = editorNS.ToolTemplate,\n        RestorePoint = editorNS.RestorePoint,\n        extend = $.extend;\n\nvar InsertHtmlCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n\n        this.managesUndoRedo = true;\n    },\n\n    exec: function() {\n        var editor = this.editor;\n        var options = this.options;\n        var range = options.range;\n        var body = editor.body;\n        var startRestorePoint = new RestorePoint(range, body);\n        var html = options.html || options.value || '';\n\n        editor.selectRange(range);\n\n        editor.clipboard.paste(html, options);\n\n        if (options.postProcess) {\n            options.postProcess(editor, editor.getRange());\n        }\n\n        var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n        genericCommand.editor = editor;\n        editor.undoRedoStack.push(genericCommand);\n\n        editor.focus();\n    }\n});\n\nvar InsertHtmlTool = Tool.extend({\n    initialize: function(ui, initOptions) {\n        var editor = initOptions.editor,\n            options = this.options,\n            dataSource = options.items ? options.items : editor.options.insertHtml;\n\n        this._selectBox = new editorNS.SelectBox(ui, {\n            dataSource: dataSource,\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            change: function() {\n                Tool.exec(editor, 'insertHtml', this.value());\n            },\n            title: editor.options.messages.insertHtml,\n            highlightFirst: false\n        });\n\n        ui.attr(\"title\", initOptions.title);\n        this._selectBox.wrapper.attr(\"title\", initOptions.title);\n    },\n\n    command: function(commandArguments) {\n        return new InsertHtmlCommand(commandArguments);\n    },\n\n    update: function(ui) {\n        var selectbox = ui.data(\"kendoSelectBox\") || ui.find(\"select\").data(\"kendoSelectBox\");\n        selectbox.close();\n        selectbox.value(selectbox.options.title);\n    }\n});\n\nextend(editorNS, {\n    InsertHtmlCommand: InsertHtmlCommand,\n    InsertHtmlTool: InsertHtmlTool\n});\n\nregisterTool(\"insertHtml\", new InsertHtmlTool({ template: new ToolTemplate({ template: EditorUtils.dropDownListTemplate, title: \"Insert HTML\", initialValue: \"Insert HTML\" }) }));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/plugins/export',[ \"../main\" ], f);\n})(function() {\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    registerTool = EditorUtils.registerTool,\n    ToolTemplate = Editor.ToolTemplate,\n    defaultExportAsItems = [\n        { text: 'Docx', value: 'docx' },\n        { text: 'Rtf', value: 'rtf' },\n        { text: 'Pdf', value: 'pdf' },\n        { text: 'Html', value: 'html' },\n        { text: 'Plain Text', value: 'txt' }\n    ];\n\nvar ExportAsCommand = Command.extend({\n    init: function(options) {\n        var cmd = this;\n        cmd.options = options;\n        Command.fn.init.call(cmd, options);\n        cmd.attributes = null;\n        cmd.exportType = options.exportType;\n    },\n\n    exec: function() {\n        var cmd = this;\n        var range = this.lockRange(true);\n        cmd.postToProxy();\n        cmd.releaseRange(range);\n    },\n\n    postToProxy: function() {\n        this.generateForm().appendTo('body').submit().remove();\n    },\n\n    generateForm: function() {\n        var cmd = this;\n        var exportAsOptions = cmd.editor.options.exportAs;\n        var form = $('<form>').attr({\n            action: exportAsOptions && exportAsOptions.proxyURL || \"\",\n            method: 'POST'\n        });\n\n        form.append([\n            cmd.valueInput(),\n            cmd.exportTypeInput(),\n            cmd.fileNameInput()\n        ]);\n\n        return form;\n    },\n\n    valueInput: function() {\n        var editor = this.editor;\n        return $('<input>').attr({\n            value: editor.encodedValue(),\n            name: 'value',\n            type: 'hidden'\n        });\n    },\n\n    exportTypeInput: function() {\n        var cmd = this;\n        return $('<input>').attr({\n            value: cmd.exportType,\n            name: 'exportType',\n            type: 'hidden'\n        });\n\n    },\n\n    fileNameInput: function() {\n        var editor = this.editor;\n        var exportAsOptions = editor.options.exportAs;\n        var fileName = exportAsOptions && exportAsOptions.fileName || editor.element.attr(\"id\") || \"editor\";\n        return $('<input>').attr({\n            value: fileName,\n            name: 'fileName',\n            type: 'hidden'\n        });\n    }\n});\n\nvar ExportAsTool = Tool.extend({\n    init: function(options) {\n        var tool = this;\n        Tool.fn.init.call(tool, kendo.deepExtend({}, tool.options, options));\n        tool.type = 'kendoSelectBox';\n    },\n\n    options: {\n        items: defaultExportAsItems,\n        width: 140\n    },\n\n    command: function(args) {\n        var value = args.value;\n        return new Editor.ExportAsCommand({\n            range: args.range,\n            exportType: value.exportType\n        });\n    },\n\n    initialize: function(ui, initOptions) {\n        var tool = this;\n        var editor = initOptions.editor;\n        var options = tool.options;\n        var toolName = options.name;\n        var changeHandler = tool.changeHandler.bind(tool);\n        var dataSource = options.items || editor.options[toolName];\n        var displayName = editor.options.messages[toolName];\n        var selectBox;\n\n        dataSource.unshift({\n            text: displayName,\n            value: \"\"\n        });\n        tool.editor = editor;\n        ui.width(options.width);\n        selectBox = ui.kendoSelectBox({\n            dataTextField: 'text',\n            dataValueField: 'value',\n            dataSource: dataSource,\n            autoSize: true,\n            change: changeHandler,\n            open: function(e) {\n                var sender = e.sender;\n                sender.items()[0].style.display = \"none\";\n                sender.unbind(\"open\");\n            },\n            highlightFirst: false,\n            template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>'),\n            valueTemplate: '<span class=\"k-editor-export\"><span class=\"k-icon k-i-export\"></span><span class=\"k-export-tool-text\">' + displayName + '</span></span>'\n        }).data(\"kendoSelectBox\");\n\n        ui.attr(\"title\", initOptions.title);\n        selectBox.wrapper.attr(\"title\", initOptions.title);\n\n        ui.addClass('k-decorated').closest('.k-dropdownlist').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n    },\n\n    changeHandler: function(e) {\n        var sender = e.sender;\n        var dataItem = sender.dataItem();\n        var value = dataItem && dataItem.value;\n\n        this._exec(value);\n        sender.value(\"\");\n    },\n\n    _exec: function(value) {\n        if (value) {\n            Tool.exec(this.editor, this.options.name, { exportType: value } );\n        }\n    },\n\n    destroy: function() {\n        this._ancestor = null;\n    }\n});\n\nextend(Editor, {\n    ExportAsTool: ExportAsTool,\n    ExportAsCommand: ExportAsCommand\n});\n\nregisterTool('exportAs', new ExportAsTool({\n    template: new ToolTemplate({\n        template: EditorUtils.dropDownListTemplate,\n        title: 'Export As'\n    })\n}));\n\n}(window.kendo.jQuery));\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/plugins/indent',[ \"./formatblock\" ], f);\n})(function() {\n\n(function($, undefined) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    EditorUtils = Editor.EditorUtils,\n    registerTool = EditorUtils.registerTool,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    RangeUtils = Editor.RangeUtils,\n    blockElements = dom.blockElements,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    BlockFormatter = Editor.BlockFormatter;\n\nfunction indent(node, value) {\n    var isRtl = $(node).css(\"direction\") == \"rtl\",\n        indentDirection = isRtl ? \"Right\" : \"Left\",\n        property = dom.name(node) != \"td\" ? \"margin\" + indentDirection : \"padding\" + indentDirection;\n    if (value === undefined) {\n        return node.style[property] || 0;\n    } else {\n        if (value > 0) {\n            node.style[property] = value + \"px\";\n        } else {\n            node.style[property] = \"\";\n\n            if (!node.style.cssText) {\n                node.removeAttribute(\"style\");\n            }\n        }\n    }\n}\n\nvar IndentFormatter = Class.extend({\n    init: function() {\n        this.finder = new BlockFormatFinder([{ tags: dom.blockElements }]);\n    },\n\n    apply: function(nodes) {\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        var formatNodes = this.finder.findSuitable(nodes),\n            targets = [],\n            i, len, formatNode, parentList, sibling;\n\n        formatNodes = this.mapImmutables(formatNodes);\n\n        if (formatNodes.length) {\n            for (i = 0, len = formatNodes.length; i < len; i++) {\n                if (dom.is(formatNodes[i], \"li\")) {\n                    if (!$(formatNodes[i]).index()) {\n                        targets.push(formatNodes[i].parentNode);\n                    } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                        targets.push(formatNodes[i]);\n                    }\n                } else {\n                    targets.push(formatNodes[i]);\n                }\n            }\n\n            while (targets.length) {\n                formatNode = targets.shift();\n                if (dom.is(formatNode, \"li\")) {\n                    parentList = formatNode.parentNode;\n                    sibling = $(formatNode).prev(\"li\");\n                    var siblingList = sibling.find(\"ul,ol\").last();\n\n                    var nestedList = $(formatNode).children(\"ul,ol\")[0];\n\n                    if (nestedList && sibling[0]) {\n                        if (siblingList[0]) {\n                           siblingList.append(formatNode);\n                           siblingList.append($(nestedList).children());\n                           dom.remove(nestedList);\n                        } else {\n                            sibling.append(nestedList);\n                            nestedList.insertBefore(formatNode, nestedList.firstChild);\n                        }\n                    } else {\n                        nestedList = sibling.children(\"ul,ol\")[0];\n                        if (!nestedList) {\n                            nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList), this.getListTypeAttr(parentList));\n                            sibling.append(nestedList);\n                        }\n\n                        while (formatNode && formatNode.parentNode == parentList) {\n                            nestedList.appendChild(formatNode);\n                            formatNode = targets.shift();\n                        }\n                    }\n                } else {\n                    var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                    indent(formatNode, marginLeft);\n\n                    for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                        if ($.contains(formatNode, targets[targetIndex])) {\n                            targets.splice(targetIndex, 1);\n                        }\n                    }\n                }\n            }\n        } else {\n            var formatter = new BlockFormatter([{ tags: [\"p\"] }], { style: { marginLeft: 30 } });\n\n            formatter.apply(nodes);\n        }\n    },\n\n    getListTypeAttr: function(list) {\n        var type = list.getAttribute(\"type\");\n        var styleType = list.style.listStyleType;\n\n        return type ? { type: type } : { style: { listStyleType: styleType } };\n    },\n\n    mapImmutables: function(nodes) {\n        if (!this.immutables) {\n            return nodes;\n        } else {\n            var immutables = [];\n            return $.map(nodes, function(node) {\n                var immutable = Editor.Immutables.immutableParent(node);\n                if (immutable) {\n                    if ($.inArray(immutable, immutables) === -1) {\n                        immutables.push(immutable);\n                    } else {\n                        return null;\n                    }\n                }\n                return immutable || node;\n            });\n        }\n    },\n\n    remove: function(nodes) {\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        var formatNodes = this.finder.findSuitable(nodes),\n            targetNode, i, len, list, listParent, siblings,\n            formatNode, marginLeft;\n\n        formatNodes = this.mapImmutables(formatNodes);\n\n        for (i = 0, len = formatNodes.length; i < len; i++) {\n            formatNode = $(formatNodes[i]);\n\n            if (formatNode.is(\"li\")) {\n                list = formatNode.parent();\n                listParent = list.parent();\n                // listParent will be ul or ol in case of invalid dom - <ul><li></li><ul><li></li></ul></ul>\n                if (listParent.is(\"li,ul,ol\") && !indent(list[0])) {\n                    // skip already processed nodes\n                    if (targetNode && $.contains(targetNode, listParent[0])) {\n                        continue;\n                    }\n\n                    siblings = formatNode.nextAll(\"li\");\n                    if (siblings.length) {\n                        $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                    }\n\n                    if (listParent.is(\"li\")) {\n                        formatNode.insertAfter(listParent);\n                    } else {\n                        formatNode.appendTo(listParent);\n                    }\n\n                    if (!list.children(\"li\").length) {\n                        list.remove();\n                    }\n\n                    continue;\n                } else {\n                    if (targetNode == list[0]) {\n                        // removing format on sibling LI elements\n                        continue;\n                    }\n                    targetNode = list[0];\n                }\n            } else {\n                targetNode = formatNodes[i];\n            }\n\n            marginLeft = parseInt(indent(targetNode), 10) - 30;\n            indent(targetNode, marginLeft);\n        }\n    }\n\n});\n\nvar IndentCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = /** @ignore */ {\n            toggle: (function(range) {\n                var indentFormatter = new IndentFormatter();\n                indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                indentFormatter.apply(RangeUtils.nodes(range));\n            }).bind(that)\n        };\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar OutdentCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = {\n            toggle: (function(range) {\n                var indentFormatter = new IndentFormatter();\n                indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                indentFormatter.remove(RangeUtils.nodes(range));\n            }).bind(that)\n        };\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar OutdentTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        this.finder = new BlockFormatFinder([{ tags: blockElements }]);\n    },\n\n    initialize: function(ui, options) {\n        Tool.fn.initialize.call(this, ui, options);\n\n        $.extend(this.options, {\n            immutables: options.editor && options.editor.options.immutables\n        });\n\n        ui.addClass(\"k-disabled\");\n    },\n\n    update: function(ui, nodes) {\n        var suitableNodes = this.finder.findSuitable(nodes),\n            isOutdentable, listParentsCount, i, len, suitable, immutableParent;\n        for (i = 0, len = suitableNodes.length; i < len; i++) {\n            suitable = suitableNodes[i];\n\n            if (this.options.immutables) {\n                immutableParent = Editor.Immutables.immutableParent(suitable);\n                if (immutableParent) {\n                    suitable = immutableParent;\n                }\n            }\n\n            isOutdentable = indent(suitable);\n\n            if (!isOutdentable) {\n                listParentsCount = $(suitable).parents(\"ul,ol\").length;\n                isOutdentable = (dom.is(suitable, \"li\") && (listParentsCount > 1 || indent(suitable.parentNode))) ||\n                                (dom.ofType(suitable, [\"ul\",\"ol\"]) && listParentsCount > 0);\n            }\n\n            if (isOutdentable) {\n                ui.removeClass(\"k-disabled\");\n                return;\n            }\n        }\n\n        ui.addClass(\"k-disabled\").removeClass(\"k-hover\");\n    }\n});\n\nextend(Editor, {\n    IndentFormatter: IndentFormatter,\n    IndentCommand: IndentCommand,\n    OutdentCommand: OutdentCommand,\n    OutdentTool: OutdentTool\n});\n\nregisterTool(\"indent\", new Tool({ command: IndentCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Indent\" }) }));\nregisterTool(\"outdent\", new OutdentTool({ command: OutdentCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Outdent\" }) }));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/plugins/linebreak',[ \"./formatblock\" ], f);\n})(function() {\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    extend = $.extend,\n    editorNS = kendo.ui.editor,\n    dom = editorNS.Dom,\n    Command = editorNS.Command,\n    Tool = editorNS.Tool,\n    BlockFormatter = editorNS.BlockFormatter,\n    normalize = dom.normalize,\n    RangeUtils = editorNS.RangeUtils,\n    registerTool = editorNS.EditorUtils.registerTool;\n\nvar ParagraphCommand = Command.extend({\n    init: function(options) {\n        this.options = options;\n        Command.fn.init.call(this, options);\n    },\n\n    _insertMarker: function(doc, range) {\n        var marker = dom.create(doc, 'a'), container;\n        marker.className = \"k-marker\";\n\n        range.insertNode(marker);\n\n        if (!marker.parentNode) {\n            // inserting paragraph in Firefox full body range\n            container = range.commonAncestorContainer;\n            container.innerHTML = \"\";\n            container.appendChild(marker);\n        }\n\n        normalize(marker.parentNode);\n\n        return marker;\n    },\n\n    _moveFocus: function(range, candidate) {\n        if (dom.isEmpty(candidate)) {\n            range.setStartBefore(candidate);\n        } else {\n            range.selectNodeContents(candidate);\n\n            var focusNode = RangeUtils.textNodes(range)[0];\n\n            if (!focusNode) {\n                while (candidate.childNodes.length && !dom.is(candidate.firstChild, \"br\")) {\n                    candidate = candidate.firstChild;\n                }\n\n                focusNode = candidate;\n            }\n\n            if (dom.isEmpty(focusNode)) {\n                range.setStartBefore(focusNode);\n            } else {\n                if (dom.emptyNode(focusNode)) {\n                    focusNode.innerHTML = \"\\ufeff\";\n                }\n                var startNode = focusNode.firstChild || focusNode;\n                if (dom.isDataNode(startNode)) {\n                    range.setStart(startNode, 0);\n                } else {\n                    range.setStartBefore(startNode);\n                }\n            }\n        }\n    },\n\n    shouldTrim: function(range) {\n        var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','),\n            startInBlock = dom.parentOfType(range.startContainer, blocks),\n            endInBlock = dom.parentOfType(range.endContainer, blocks);\n        return (startInBlock && !endInBlock) || (!startInBlock && endInBlock);\n    },\n\n    _blankAfter: function(node) {\n        while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === \"\")) {\n            node = node.nextSibling;\n        }\n\n        return !node;\n    },\n\n    exec: function() {\n        var range = this.getRange(),\n            doc = RangeUtils.documentFromRange(range),\n            parent, previous, next,\n            emptyParagraphContent = editorNS.emptyElementContent,\n            paragraph, marker, li, heading, tableNode, rng,\n            shouldTrim;\n\n        this.expandImmutablesIn(range);\n\n        shouldTrim = this.shouldTrim(range);\n\n        range.deleteContents();\n        marker = this._insertMarker(doc, range);\n\n        dom.stripBomNode(marker.previousSibling);\n        dom.stripBomNode(marker.nextSibling);\n\n        li = dom.closestEditableOfType(marker, ['li']);\n        heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n        tableNode = dom.is(marker.parentNode, 'table') && marker.parentNode;\n\n        if (li) {\n            // hitting 'enter' in empty li\n            if (dom.emptyNode(li)) {\n                paragraph = dom.create(doc, 'p');\n\n                if (dom.next(li)) {\n                    rng = range.cloneRange();\n                    rng.selectNode(li);\n\n                    RangeUtils.split(rng, li.parentNode);\n                }\n\n                var br = $(\"br\", li);\n                if (br.length == 1) {\n                    br.remove();\n                }\n\n                var parentNode = li.parentNode;\n                var parentChildrenLength = li.parentNode.children.length;\n                var firstChild = parentChildrenLength > 1 && li.childNodes.length == 1 && li.children[0];\n\n                dom.insertAfter(paragraph, parentNode);\n                dom.remove(parentChildrenLength == 1 ? li.parentNode : li);\n\n                if (firstChild && firstChild !== marker) {\n                    paragraph.appendChild(firstChild);\n                    paragraph.appendChild(marker);\n                } else {\n                    paragraph.innerHTML = emptyParagraphContent;\n                }\n                next = paragraph;\n            }\n        } else if (heading && this._blankAfter(marker)) {\n            paragraph = this._insertParagraphAfter(heading);\n            dom.remove(marker);\n            next = paragraph;\n        } else if (tableNode) {\n            paragraph = this._insertParagraphAfter(tableNode);\n            dom.remove(marker);\n            next = paragraph;\n        }\n\n        if (!next) {\n            if (!(li || heading)) {\n                new BlockFormatter([{ tags: ['p'] }]).apply([marker]);\n            }\n\n            range.selectNode(marker);\n\n            parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\n\n            RangeUtils.split(range, parent, shouldTrim);\n\n            previous = parent.previousSibling;\n\n            if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                previous = previous.firstChild;\n            }\n\n            next = parent.nextSibling;\n\n            this.clean(previous, { links: true });\n            this.clean(next, { links: true });\n\n            if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                next = next.firstChild;\n            }\n\n            dom.remove(parent);\n\n            // normalize updates the caret display in Gecko\n            normalize(previous);\n        }\n\n        normalize(next);\n\n        this._moveFocus(range, next);\n\n        range.collapse(true);\n\n        dom.scrollTo(next, true);\n\n        RangeUtils.selectRange(range);\n    },\n\n    _insertParagraphAfter: function(node) {\n        var range = this.getRange();\n        var doc = RangeUtils.documentFromRange(range);\n        var emptyElementContent = editorNS.emptyElementContent;\n        var paragraph = dom.create(doc, 'p');\n\n        dom.insertAfter(paragraph, node);\n        paragraph.innerHTML = emptyElementContent;\n\n        return paragraph;\n    },\n\n    clean: function(node, options) {\n        var root = node;\n\n        if (node.firstChild && dom.is(node.firstChild, 'br')) {\n            dom.remove(node.firstChild);\n        }\n\n        if (dom.isDataNode(node) && !node.nodeValue) {\n            node = node.parentNode;\n        }\n\n        if (node) {\n            var siblings = false;\n            while (node.firstChild && node.firstChild.nodeType == 1) {\n                siblings = siblings || (dom.significantNodes(node.childNodes).length > 1);\n                node = node.firstChild;\n            }\n\n            if (!dom.isEmpty(node) && node.className != \"k-br\" && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                $(root).find(\".k-br\").remove();\n                node.innerHTML = editorNS.emptyElementContent;\n            }\n\n            if (options && options.links) {\n                while (node != root) {\n                    if (dom.is(node, \"a\") && dom.emptyNode(node)) {\n                        dom.unwrap(node);\n                        break;\n                    }\n                    node = node.parentNode;\n                }\n            }\n        }\n    }\n});\n\nvar NewLineCommand = Command.extend({\n    init: function(options) {\n        this.options = options;\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var range = this.getRange();\n        this.expandImmutablesIn(range);\n\n        var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n        var node = range.startContainer;\n        var filler;\n        var browser = kendo.support.browser;\n        var oldIE = browser.msie && browser.version < 11;\n        var tableNode = dom.is(node, 'table') && node;\n        var kbrParent;\n\n        range.deleteContents();\n        if (tableNode) {\n            dom.insertAfter(br, tableNode);\n        } else {\n            kbrParent = $(node).closest('.k-br');\n            range.insertNode(br);\n\n            if (kbrParent.length) {\n                // pressing enter in an k-br node\n                dom.unwrap(kbrParent[0]);\n            }\n        }\n\n        normalize(br.parentNode);\n\n        if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n            // Gecko and WebKit cannot put the caret after only one br.\n            if (!!br.nextSibling && dom.isWhitespace(br.nextSibling)) {\n                $(br.nextSibling).remove();\n            }\n            filler = br.cloneNode(true);\n            filler.className = 'k-br';\n            dom.insertAfter(filler, br);\n        }\n\n        range.setStartAfter(br);\n        range.collapse(true);\n\n        dom.scrollTo(br.nextSibling || br, true);\n\n        RangeUtils.selectRange(range);\n    }\n});\n\nextend(editorNS, {\n    ParagraphCommand: ParagraphCommand,\n    NewLineCommand: NewLineCommand\n});\n\nregisterTool(\"insertLineBreak\", new Tool({ key: 13, shift: true, command: NewLineCommand }));\nregisterTool(\"insertParagraph\", new Tool({ key: 13, command: ParagraphCommand }));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/plugins/file',[ \"kendo.filebrowser\", \"./link\" ], f);\n})(function() {\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    ToolTemplate = Editor.ToolTemplate,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n    LinkFormatter = Editor.LinkFormatter,\n    textNodes = RangeUtils.textNodes,\n    keys = kendo.keys,\n    KEDITORFILEURL = \"#k-editor-file-url\",\n    KEDITORFILETEXT = \"#k-editor-file-text\",\n    KEDITORFILETITLE = \"#k-editor-file-title\";\n\nvar FileCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        Command.fn.init.call(that, options);\n\n        that.formatter = new LinkFormatter();\n\n        that.async = true;\n        that.attributes = {};\n    },\n\n    insertFile: function(file, range) {\n        var attributes = this.attributes;\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (attributes.href && attributes.href != \"http://\") {\n\n            if (!file) {\n                file = dom.create(doc, \"a\", { href: attributes.href });\n                file.innerHTML = attributes.innerHTML;\n                file.title = attributes.title;\n\n                range.deleteContents();\n                range.insertNode(file);\n\n                if (!file.nextSibling) {\n                    dom.insertAfter(doc.createTextNode(\"\\ufeff\"), file);\n                }\n\n                range.setStartAfter(file);\n                range.setEndAfter(file);\n                RangeUtils.selectRange(range);\n                return true;\n            } else {\n                dom.attr(file, attributes);\n            }\n        }\n\n        return false;\n    },\n\n    _dialogTemplate: function(showBrowser) {\n        return kendo.template(\n            '<div class=\"k-editor-dialog k-popup-edit-form\">' +\n                '<div class=\"k-edit-form-container\">' +\n                    '<div class=\"k-edit-form-content\">' +\n                        '# if (showBrowser) { #' +\n                            '<div class=\"k-filebrowser\"></div>' +\n                        '# } #' +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-file-url\">#: messages.fileWebAddress #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-file-url\"></span>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-file-text\">#: messages.fileText #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-file-text\"></span>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-file-title\">#: messages.fileTitle #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-file-title\"></span>' +\n                        \"</div>\" +\n                    '</div>' +\n                    '<div class=\"k-edit-buttons\">' +\n                        '<button class=\"k-dialog-insert k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary\"><span class=\"k-button-text\">#: messages.dialogInsert #</span></button>' +\n                        '<button class=\"k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\"><span class=\"k-button-text\">#: messages.dialogCancel #</span></button>' +\n                    '</div>' +\n                '</div>' +\n            '</div>'\n        )({\n            messages: this.editor.options.messages,\n            showBrowser: showBrowser\n        });\n    },\n\n    redo: function() {\n        var that = this,\n            range = that.lockRange();\n\n        this.formatter.apply(range, this.attributes);\n        that.releaseRange(range);\n    },\n\n    exec: function() {\n        var that = this,\n            range = that.lockRange(),\n            nodes = textNodes(range),\n            applied = false,\n            file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null,\n            dialog,\n            isIE = kendo.support.browser.msie,\n            options = that.editor.options,\n            messages = options.messages,\n            fileBrowser = options.fileBrowser,\n            showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined),\n            dialogOptions = {\n                title: messages.insertFile,\n                visible: false,\n                resizable: showBrowser\n            };\n\n        this.expandImmutablesIn(range);\n\n        function apply(e) {\n            var element = dialog.element,\n                href = element.find(KEDITORFILEURL).val().replace(/ /g, \"%20\"),\n                innerHTML = element.find(KEDITORFILETEXT).val(),\n                title = element.find(KEDITORFILETITLE).val();\n\n            that.attributes = {\n                href: href,\n                innerHTML: innerHTML !== \"\" ? innerHTML : href,\n                title: title\n            };\n\n            applied = that.insertFile(file, range);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n        }\n\n        function close(e) {\n            e.preventDefault();\n            dialog.destroy();\n\n            dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n            if (!applied) {\n                that.releaseRange(range);\n            }\n        }\n\n        function keyDown(e) {\n            if (e.keyCode == keys.ENTER) {\n                apply(e);\n            } else if (e.keyCode == keys.ESC) {\n                close(e);\n            }\n        }\n\n        dialogOptions.close = close;\n\n        if (showBrowser) {\n            dialogOptions.width = 750;\n        }\n\n        dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions)\n            .toggleClass(\"k-filebrowser-dialog\", showBrowser)\n            .find(\".k-dialog-insert\").on(\"click\", apply).end()\n            .find(\".k-dialog-close\").on(\"click\", close).end()\n            .find(\".k-edit-field input\").on(\"keydown\", keyDown).end()\n            // IE < 8 returns absolute url if getAttribute is not used\n            .find(KEDITORFILEURL).val(file ? file.getAttribute(\"href\", 2) : \"http://\").end()\n            .find(KEDITORFILETEXT).val(file ? file.innerText : \"\").end()\n            .find(KEDITORFILETITLE).val(file ? file.title : \"\").end()\n            .data(\"kendoWindow\");\n\n        var element = dialog.element;\n        if (showBrowser) {\n            that._fileBrowser = new kendo.ui.FileBrowser(\n                element.find(\".k-filebrowser\"),\n                extend({}, fileBrowser)\n            );\n\n            that._fileBrowser.bind(\"change\", function(ev) {\n                if (ev.selected.get(\"type\") === \"f\") {\n                    element.find(KEDITORFILEURL).val(this.value());\n                }\n            } );\n\n            that._fileBrowser.bind(\"apply\", apply);\n        }\n\n        if (isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n        dialog.center().open();\n        element.find(KEDITORFILEURL).trigger(\"focus\").select();\n    }\n\n});\n\nkendo.ui.editor.FileCommand = FileCommand;\n\nregisterTool(\"insertFile\", new Editor.Tool({ command: FileCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Insert File\" }) }));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/plugins/tables',[ \"./formatblock\", \"./insert\" ], f);\n})(function() {\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    EditorUtils = Editor.EditorUtils,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n\n    NS = \"kendoEditor\",\n    ACTIVESTATE = \"k-active\",\n    SELECTEDSTATE = \"k-selected\",\n    SCOPE = \"scope\",\n    ROW = \"row\",\n    COL = \"col\",\n    ROWGROUP = \"rowgroup\",\n    COLGROUP = \"colgroup\",\n    COLSPAN = \"colspan\",\n    ROWSPAN = \"rowspan\",\n    TABLE = \"table\",\n    THEAD = \"thead\",\n    TBODY = \"tbody\",\n    TR = \"tr\",\n    TD = \"td\",\n    TH = \"th\",\n\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    InsertHtmlCommand = Editor.InsertHtmlCommand,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    BlockFormatTool = Editor.BlockFormatTool,\n    FormatCommand = Editor.FormatCommand,\n    registerTool = Editor.EditorUtils.registerTool,\n    registerFormat = Editor.EditorUtils.registerFormat,\n    formats = kendo.ui.Editor.fn.options.formats,\n    getTouches = kendo.getTouches;\nvar template = kendo.template;\n\nvar columnTemplate = \"<td style='width:#=width#%;'>#=content#</td>\";\n\nvar tableFormatFinder = new BlockFormatFinder([{ tags: [TABLE] }]);\n\nvar TableCommand = InsertHtmlCommand.extend({\n    init: function(options) {\n        var o = $.extend({\n            postProcess: this.postProcess,\n            skipCleaners: true\n        }, options || {});\n\n        InsertHtmlCommand.fn.init.call(this, o);\n    },\n    _tableHtml: function(rows, columns) {\n        rows = rows || 1;\n        columns = columns || 1;\n        var columnHtml = template(columnTemplate)({ width: 100 / columns, content: Editor.emptyTableCellContent });\n        var rowHeight = 100 / rows;\n\n        return \"<table class='k-table' data-last>\" +\n                    new Array(rows + 1).join(\n                    \"<tr style='height:\" + rowHeight + \"%;'>\" +\n                        new Array(columns + 1).join(columnHtml) +\n                    \"</tr>\") +\n               \"</table>\";\n    },\n\n    postProcess: function(editor, range) {\n        var insertedTable = $(\"table[data-last]\", editor.document).removeAttr(\"data-last\");\n\n        range.setStart(insertedTable.find(TD)[0], 0);\n        range.collapse(true);\n\n        editor.selectRange(range);\n    },\n\n    exec: function() {\n        var options = this.options;\n        options.html = this._tableHtml(options.rows, options.columns);\n\n        InsertHtmlCommand.fn.exec.call(this);\n    }\n});\n\nvar PopupTool = Tool.extend({\n    initialize: function(ui, options) {\n        Tool.fn.initialize.call(this, ui, options);\n\n        var popup = $(this.options.popupTemplate).appendTo(\"body\").kendoPopup({\n            anchor: ui,\n            copyAnchorStyles: false,\n            open: this._open.bind(this),\n            activate: this._activate.bind(this),\n            close: this._close.bind(this)\n        }).data(\"kendoPopup\");\n\n        ui.on(\"click\", this._toggle.bind(this))\n          .on(\"keydown\", this._keydown.bind(this));\n\n        var editor = this._editor = options.editor;\n        this._popup = popup;\n\n        var tableWizard = new Editor.TableWizardTool({\n            template: new ToolTemplate({ template: EditorUtils.tableWizardButtonTemplate, title: editor.options.messages.tableWizard }),\n            command: Editor.TableWizardCommand,\n            insertNewTable: true\n        });\n\n        registerTool(\"tableWizardInsert\", tableWizard);\n\n        var twTool = $(\"<div>\" + tableWizard.options.template.getHtml() + \"</div>\");\n        twTool.appendTo(popup.element);\n\n        if (editor.toolbar) {\n            editor.toolbar.attachToolsEvents(twTool);\n        }\n    },\n\n    popup: function() {\n        return this._popup;\n    },\n\n    _activate: $.noop,\n\n    _open: function() {\n        this._popup.options.anchor.addClass(ACTIVESTATE);\n    },\n\n    _close: function() {\n        this._popup.options.anchor.removeClass(ACTIVESTATE);\n    },\n\n    _keydown: function(e) {\n        var that = this,\n            keys = kendo.keys,\n            key = e.keyCode,\n            shouldContinue = true;\n\n        if ((key == keys.DOWN && e.altKey) || key == keys.ENTER || key == keys.SPACEBAR ) {\n            that._popup.open();\n            shouldContinue = false;\n        } else if (key == keys.ESC) {\n            that._popup.close();\n        }\n    },\n\n    _toggle: function(e) {\n        var button = $(e.target).closest(\".k-tool\");\n\n        if (!button.hasClass(\"k-disabled\")) {\n            this.popup().toggle();\n        }\n    },\n\n    update: function(ui) {\n        var popup = this.popup();\n\n        if (popup.wrapper && popup.wrapper.css(\"display\") == \"block\") {\n            popup.close();\n        }\n\n        ui.removeClass(\"k-hover\");\n    },\n\n    destroy: function() {\n        this._popup.destroy();\n    }\n});\n\nvar InsertTableTool = PopupTool.extend({\n    init: function(options) {\n        this.cols = 8;\n        this.rows = 6;\n\n        PopupTool.fn.init.call(this, $.extend(options, {\n            command: TableCommand,\n            popupTemplate:\n                \"<div class='k-ct-popup'>\" +\n                    \"<div>\" +\n                        new Array(this.cols * this.rows + 1).join(\"<span class='k-ct-cell k-disabled'></span>\") +\n                    \"</div>\" +\n                    \"<div class='k-status'></div>\" +\n                \"</div>\"\n        }));\n    },\n\n    _activate: function() {\n        var that = this,\n            element = that._popup.element,\n            cells = element.find(\".k-ct-cell\"),\n            firstCell = cells.eq(0),\n            lastCell = cells.eq(cells.length - 1),\n            start = kendo.getOffset(firstCell),\n            end = kendo.getOffset(lastCell),\n            cols = that.cols,\n            rows = that.rows,\n            cellWidth, cellHeight;\n\n        element.find(\"*\").addBack().attr(\"unselectable\", \"on\");\n\n        end.left += lastCell[0].offsetWidth;\n        end.top += lastCell[0].offsetHeight;\n\n        cellWidth = (end.left - start.left) / cols;\n        cellHeight = (end.top - start.top) / rows;\n\n        function tableFromLocation(e) {\n            var w = $(window);\n            return {\n                row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n            };\n        }\n\n        element.autoApplyNS(NS)\n            .on(\"mousemove\", \".k-ct-cell\", function(e) {\n                that._setTableSize(tableFromLocation(e));\n            })\n            .on(\"mouseleave\", \".k-ct-cell\", function() {\n                that._setTableSize();\n            })\n            .on(\"down\", \".k-ct-cell\", function(e) {\n                e.preventDefault();\n                var touch = getTouches(e)[0];\n                that._exec(tableFromLocation(touch.location));\n            });\n    },\n\n    _valid: function(size) {\n        return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n    },\n\n    _exec: function(size) {\n        if (this._valid(size)) {\n            this._editor.exec(\"createTable\", {\n                rows: size.row,\n                columns: size.col\n            });\n            this._popup.close();\n        }\n    },\n\n    _setTableSize: function(size) {\n        var element = this._popup.element;\n        var status = element.find(\".k-status\");\n        var cells = element.find(\".k-ct-cell\");\n        var cols = this.cols;\n        var messages = this._editor.options.messages;\n\n        if (this._valid(size)) {\n            status.text(kendo.format(messages.createTableHint, size.row, size.col));\n\n            cells.each(function(i) {\n                $(this).toggleClass(\n                    SELECTEDSTATE,\n                    i % cols < size.col && i / cols < size.row\n                );\n            });\n        } else {\n            status.text(messages.createTable);\n            cells.removeClass(SELECTEDSTATE);\n        }\n    },\n\n    _keydown: function(e) {\n        var initiallyVisible = this._popup.visible();\n\n        PopupTool.fn._keydown.call(this, e);\n\n        if (!this._popup.visible()) {\n            return;\n        }\n\n        var keys = kendo.keys;\n        var key = e.keyCode;\n        var cells = this._popup.element.find(\".k-ct-cell\");\n        var focus = Math.max(cells.filter(\".k-selected\").last().index(), 0);\n        var selectedRows = Math.floor(focus / this.cols);\n        var selectedColumns = focus % this.cols;\n\n        var changed = false,\n            button;\n\n        if (key == keys.DOWN && !e.altKey) {\n            changed = true;\n            selectedRows++;\n        } else if (key == keys.UP) {\n            changed = true;\n            selectedRows--;\n        } else if (key == keys.RIGHT) {\n            changed = true;\n            selectedColumns++;\n        } else if (key == keys.LEFT) {\n            changed = true;\n            selectedColumns--;\n        } else if (key == keys.TAB) {\n            button = this._popup.element.find(\".k-button\");\n\n            if (button.length > 0) {\n                changed = true;\n                button.trigger(\"focus\");\n            }\n        }\n\n        var tableSize = {\n            row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n            col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n        };\n\n        if (key == keys.ENTER && initiallyVisible) {\n            this._exec(tableSize);\n        } else {\n            this._setTableSize(tableSize);\n        }\n\n        if (changed) {\n            e.preventDefault();\n            e.stopImmediatePropagation();\n        }\n    },\n\n    _open: function() {\n        var messages = this._editor.options.messages;\n\n        PopupTool.fn._open.call(this);\n\n        this.popup().element\n            .find(\".k-status\").text(messages.createTable).end()\n            .find(\".k-ct-cell\").removeClass(SELECTEDSTATE);\n    },\n\n    _close: function() {\n        PopupTool.fn._close.call(this);\n        this.popup().element.off(\".\" + NS);\n    }\n});\n\nvar TableModificationCommand = Command.extend({\n    undo: function() {\n        var point = this.restorePoint;\n        point.restoreHtml();\n\n        $(this.editor.body).find(\".k-element-resize-handle-wrapper\")\n            .each(function(index,el) {\n                el.remove();\n            });\n\n        this.editor.selectRange(point.toRange());\n    },\n    _clearColIndexAttr: function(table) {\n        dom.clearTableMappings(table, \"col-index\");\n    },\n    _mapColIndices: function(table) {\n        dom.reMapTableColumns(table, \"col-index\");\n    },\n    _findRowSpanCell: function(parent, rowIndex, colIndex) {\n        var row, cell;\n\n        for (var i = rowIndex; i >= 0; i--) {\n            row = parent.rows[i];\n            cell = $(row).find(\"[col-index=\" + colIndex + \"]\");\n\n            if (cell.length) {\n                return cell;\n            }\n        }\n    },\n    _resetElementResizing: function(editor) {\n        editor._destroyResizings();\n        editor._initializeColumnResizing();\n        editor._initializeRowResizing();\n        editor._initializeElementResizing();\n    },\n    _findNextTdInRow: function(row, colIndex) {\n        var lastTd = row.find(\"td:last-child\"),\n            lastIndex = parseInt(lastTd.attr(\"col-index\"), 10) + lastTd.prop(\"colSpan\") - 1,\n            td;\n\n        for (var i = colIndex; i <= lastIndex; i++) {\n            td = row.find(\"[col-index=\" + i + \"]\");\n            if (td.length) {\n                return td;\n            }\n        }\n    },\n    _adjustColgroups: function(row, table) {\n        var colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            cells = row.cells,\n            numberOfCells = cells.length,\n            i, colgroup, cell;\n\n        while (colElements.length > 0) {\n            colElements[0].remove();\n        }\n        while (colgroupElements.length > 0) {\n            colgroupElements[0].remove();\n        }\n\n        for (i = numberOfCells - 1; i >= 0; i--) {\n            cell = cells[i];\n            if (cell.getAttribute(SCOPE) === COLGROUP) {\n                colgroup = dom.createEmptyNode(this.editor.document, COLGROUP);\n                colgroup.setAttribute(\"span\", cell.getAttribute(COLSPAN));\n                table.prepend(colgroup);\n            } else {\n                table.prepend(dom.createEmptyNode(this.editor.document, COL));\n            }\n        }\n    },\n    _associateHeaderIds: function(table) {\n        dom.clearTableMappings(table, \"col-index\");\n        dom.reMapTableColumns(table, \"col-index\");\n        $(table).find(\"th, td\").removeAttr(\"id headers\");\n        dom.associateWithIds(table);\n    },\n    _getNumberOfColumns: function(table) {\n        return dom._getNumberOfColumns(table, \"td, th\");\n    }\n});\n\nvar InsertRowCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(true),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            position = this.options.position || \"after\",\n            cellCount, row, cell,\n            newRow, rowIndex, rowSpanIndex, createdCell;\n\n        if (!table || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        row = td.parentNode;\n        rowIndex = dom.findNodeIndex(row, true);\n\n        if (td.rowSpan > 1 && position === \"after\") {\n            row = table.rows[rowIndex + td.rowSpan - 1];\n        }\n\n        cellCount = this._getNumberOfColumns(table);\n        newRow = row.cloneNode(true);\n        $(newRow).empty();\n\n        for (var i = 0; i < cellCount; i = i + cell.prop(\"colSpan\")) {\n            cell = $(row).find(\"[col-index=\" + i + \"]\");\n\n            if (cell.length) {\n                if (cell.prop(\"rowSpan\") > 1 && position === \"after\" && cell) {\n                    cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                } else {\n                    this._appendCell(newRow, cell);\n                }\n            } else {\n                rowIndex = dom.findNodeIndex(row, true);\n                cell = this._findRowSpanCell(row.parentElement, rowIndex, i);\n                rowSpanIndex = cell.closest(TR).index();\n\n                if (rowSpanIndex + cell.prop(\"rowSpan\") - 1 === rowIndex && position === \"after\") {\n                    this._appendCell(newRow, cell);\n                } else {\n                    cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                }\n            }\n\n            createdCell = $(newRow).find(\"[col-index=\" + i + \"]\");\n            if (createdCell.attr(SCOPE) === ROWGROUP && !createdCell.attr(ROWSPAN)) {\n                createdCell.attr(SCOPE, ROW);\n            }\n        }\n\n        if (position == \"before\") {\n            dom.insertBefore(newRow, row);\n        } else {\n            dom.insertAfter(newRow, row);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n\n        this._resetElementResizing(this.editor);\n    },\n    _appendCell: function(row, cell) {\n        var newCell;\n\n        newCell = cell.clone();\n        newCell.html(Editor.emptyTableCellContent);\n        newCell.removeAttr(ROWSPAN);\n        newCell.appendTo(row);\n    }\n});\n\nvar InsertColumnCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(true),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            columnIndex,\n            i,\n            rows = table && table.rows,\n            cell,\n            newCell,\n            position = this.options.position || \"after\";\n\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        columnIndex = parseInt(td.getAttribute(\"col-index\"),10);\n\n        if (td.colSpan > 1 && position === \"after\") {\n            td.setAttribute(\"col-index\", columnIndex + td.colSpan - 1);\n            columnIndex = columnIndex + td.colSpan - 1;\n        }\n\n        for (i = 0; i < rows.length; i++) {\n            cell = this._processForColSpan(rows[i], columnIndex, position, td);\n\n            if (!cell) {\n                continue;\n            }\n\n            newCell = cell.cloneNode();\n            newCell.innerHTML = Editor.emptyTableCellContent;\n            newCell.removeAttribute(COLSPAN);\n\n            if (newCell.getAttribute(SCOPE) && newCell.getAttribute(SCOPE) === COLGROUP) {\n                newCell.setAttribute(SCOPE, COL);\n            }\n\n            if (position == \"before\") {\n                dom.insertBefore(newCell, cell);\n            } else {\n                dom.insertAfter(newCell, cell);\n            }\n\n            this._resizeCells(newCell, cell);\n        }\n\n        if (colElements.length > 0 || colgroupElements.length > 0) {\n            this._adjustColgroups(rows[0], table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n\n        this._resetElementResizing(this.editor);\n    },\n    _processForColSpan: function(row, columnIndex, position, selectedCell) {\n        var cell,\n            colSpanEffect,\n            index = columnIndex - 1;\n\n        cell = $(row).find(\"[col-index=\" + columnIndex + \"]\")[0];\n\n        if (cell && cell.colSpan > 1 && position === \"after\" && cell !== selectedCell) {\n            cell.colSpan += 1;\n            return;\n        }\n\n        if (cell) {\n            return cell;\n        }\n\n        for (index; index >= 0; index--) {\n            cell = $(row).find(\"[col-index=\" + index + \"]\")[0];\n\n            if (cell && cell.colSpan > 1) {\n                break;\n            }\n        }\n\n        if (!cell) {\n            return;\n        }\n\n        colSpanEffect = parseInt(cell.getAttribute(\"col-index\"),10) + cell.colSpan - 1;\n\n        if (colSpanEffect === columnIndex && position === \"after\") {\n            return cell;\n        } else if (columnIndex <= colSpanEffect) {\n            cell.setAttribute(COLSPAN, cell.colSpan + 1);\n        }\n    },\n    _resizeCells: function(newCell, cell) {\n        var width = newCell.style.width,\n        parsedWidth, unit, calculatedWidth;\n\n        if (!width) {\n            return;\n        }\n\n        parsedWidth = parseFloat(width);\n        unit = width.slice(parsedWidth.toString().length);\n        calculatedWidth = (parsedWidth / 2) + unit;\n\n        newCell.style.width = calculatedWidth;\n        cell.style.width = calculatedWidth;\n    }\n});\n\nvar DeleteRowCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange();\n        var rows = RangeUtils.mapAll(range, function(node) {\n            return $(node).closest(TR)[0];\n        });\n        var td = dom.closest(range.endContainer, [TD, TH]);\n        var row = rows[0];\n        var rowSpan = td ? td.rowSpan : 1;\n        var rowIndex = $(rows[0]).index();\n        var table = dom.closest(row, TABLE);\n        var rowParent = row.parentElement;\n        var focusElement;\n\n        if (!table || (this.immutables() && Editor.Immutables.immutableParent(row))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        for (var x = 0; x < rowSpan; x++) {\n            if (rows.indexOf(rowParent.rows[rowIndex + x]) < 0) {\n                rows.push(rowParent.rows[rowIndex + x]);\n            }\n        }\n\n        if (table.rows.length <= rows.length) {\n            focusElement = dom.next(table);\n            if (!focusElement || dom.insignificant(focusElement)) {\n                focusElement = dom.prev(table);\n            }\n\n            if (focusElement && focusElement.rows) {\n                focusElement = focusElement.rows[0].cells[0];\n            }\n\n            dom.remove(table);\n            this._resetElementResizing(this.editor);\n        } else if (rowParent.rows.length <= rows.length) {\n            focusElement = rowParent.nextSibling;\n\n            if (!focusElement) {\n                focusElement = rowParent.previousSibling;\n            }\n\n            dom.remove(rowParent);\n        } else {\n            this._mapColIndices(table);\n\n            for (var i = 0; i < rows.length; i++) {\n                row = rows[i];\n                dom.removeTextSiblings(row);\n                focusElement = dom.next(row) || dom.prev(row);\n                focusElement = focusElement.cells[0];\n\n                // IE needs to focus the new row before removing the old one\n                this._focusElement(range, focusElement);\n                focusElement = null;\n\n                this._handleRowSpanCells(table, row);\n\n                dom.remove(row);\n            }\n\n            this._clearColIndexAttr(table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        } else if (dom.is(rowParent, THEAD) && $(table).find(\"[scope]\").length > 0) {\n            this._adjustColgroups(rowParent.rows[0], table);\n        }\n\n        if (focusElement) {\n            this._focusElement(range, focusElement);\n        }\n\n        this._resetElementResizing(this.editor);\n    },\n    _focusElement: function(range, node) {\n        range.setStart(node, 0);\n        range.collapse(true);\n        this.editor.selectRange(range);\n    },\n    _handleRowSpanCells: function(table, row) {\n        var index, cell, adjacentCell, nextRow, rowIndex = dom.findNodeIndex(row, true),\n            firstRow = table.rows[0],\n            lastCell = firstRow.cells[firstRow.cells.length - 1],\n            lastIndex = parseInt(lastCell.getAttribute(\"col-index\"),10) + lastCell.colSpan - 1;\n\n        for (index = 0; index <= lastIndex; index = index + cell.prop(\"colSpan\")) {\n            cell = $(row).find(\"[col-index=\" + index + \"]\");\n\n            if (cell.length && cell.prop(\"rowSpan\") > 1) {\n                nextRow = table.rows[rowIndex + 1];\n                adjacentCell = $(nextRow).find(\"[col-index=\" + (index + 1) + \"]\");\n\n                if (adjacentCell.length) {\n                    adjacentCell.before(cell);\n                } else {\n                    $(nextRow).append(cell);\n                }\n                this._reduceRowSpan(cell);\n            }\n\n            if (!cell.length) {\n                cell = this._findRowSpanCell(row.parentElement, rowIndex, index);\n                this._reduceRowSpan(cell);\n            }\n        }\n    },\n    _reduceRowSpan: function(td) {\n        var rowSpanValue = td.prop(\"rowSpan\") - 1;\n\n        if (rowSpanValue <= 1) {\n            td.removeAttr(ROWSPAN);\n            if (td.attr(SCOPE) === ROWGROUP) {\n                td.attr(SCOPE, ROW);\n            }\n        } else {\n            td.attr(ROWSPAN, rowSpanValue);\n        }\n    }\n});\n\nvar DeleteColumnCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            rows = table && table.rows,\n            columnIndex = dom.findNodeIndex(td, true),\n            columnCount = rows && rows[0].cells.length,\n            colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            focusElement, i, cell, x;\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        if (columnCount == 1 || td.colSpan == columnCount) {\n            focusElement = dom.next(table);\n            if (!focusElement || dom.insignificant(focusElement)) {\n                focusElement = dom.prev(table);\n            }\n\n            if (focusElement && focusElement.rows) {\n                focusElement = focusElement.rows[0].cells[0];\n            }\n\n            dom.remove(table);\n            this._resetElementResizing(this.editor);\n        } else {\n            dom.removeTextSiblings(td);\n\n            focusElement = dom.next(td) || dom.prev(td);\n\n            this._mapColIndices(table);\n\n            columnIndex = parseInt(td.getAttribute(\"col-index\"), 10);\n\n            for (x = 0; x < td.colSpan; x++) {\n                for (i = 0; i < rows.length; i = i + (cell.prop(\"rowSpan\") || 1)) {\n                    cell = $(rows[i]).find(\"[col-index=\" + (columnIndex + x) + \"]\");\n\n                    if (cell.length && cell.prop(\"colSpan\") <= 1) {\n                        cell.remove();\n                    } else {\n                        this._handleColSpanCells(rows[i], columnIndex + x);\n                    }\n                }\n            }\n\n            this._clearColIndexAttr(table);\n        }\n\n        if (colElements.length > 0 || colgroupElements.length > 0) {\n            this._adjustColgroups(rows[0], table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        if (focusElement) {\n            range.setStart(focusElement, 0);\n            range.collapse(true);\n            this.editor.selectRange(range);\n        }\n\n        this._resetElementResizing(this.editor);\n    },\n    _handleColSpanCells: function(row, colIndex) {\n        var cell = $(row).find(\"[col-index=\" + colIndex + \"]\");\n\n        if (cell.length && cell.prop(\"colSpan\") > 1) {\n            var clone = cell.clone(true);\n            cell.after(clone);\n            this._reduceColSpan(clone);\n            clone.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n            cell.remove();\n            return;\n        }\n\n        for (var i = colIndex; i >= 0; i--) {\n            cell = $(row).find(\"[col-index=\" + i + \"]\");\n\n            if (cell.length) {\n                this._reduceColSpan(cell);\n                cell.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n                return;\n            }\n        }\n    },\n    _reduceColSpan: function(td) {\n        var colSpanValue = td.prop(\"colSpan\") - 1;\n\n        if (colSpanValue <= 1) {\n            td.removeAttr(COLSPAN);\n            if (td.attr(SCOPE) === COLGROUP) {\n                td.attr(SCOPE, COL);\n            }\n        } else {\n            td.attr(COLSPAN, colSpanValue);\n        }\n    }\n});\n\nvar MergeCellsHorizontallyCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table, row, columnIndex, nextTd, colspan;\n\n            if (!td) {\n                this.releaseRange(range);\n                return;\n            }\n\n            table = dom.closest(td, TABLE);\n            row = td.parentNode;\n            columnIndex = dom.findNodeIndex(td, true);\n            nextTd = row.children[columnIndex + 1];\n\n            if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            columnIndex = parseInt($(td).attr(\"col-index\"), 10);\n            nextTd = $(row).find(\"[col-index=\" + (columnIndex + 1 + this._getColspan(td) - 1) + \"]\").get(0);\n\n            if (!nextTd || nextTd.rowSpan !== td.rowSpan || td.tagName !== nextTd.tagName) {\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                return;\n            }\n\n            colspan = this._getColspan(td) + this._getColspan(nextTd);\n\n            $(td).prop(COLSPAN, colspan)\n                 .append(dom.emptyNode(nextTd) ? \"\" : \"<br/>\" + nextTd.innerHTML);\n\n            $(td).width(td.offsetWidth);\n            $(nextTd).remove();\n\n            if (td.getAttribute(SCOPE) === COL) {\n                td.setAttribute(SCOPE, COLGROUP);\n            }\n            if (td.getAttribute(SCOPE) === COLGROUP) {\n                this._adjustColgroups(row, table);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n            this._resetElementResizing(this.editor);\n    },\n    _getColspan: function(td) {\n        return parseInt(td.getAttribute(COLSPAN), 10) || 1;\n    }\n});\n\nvar MergeCellsVerticallyCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            tr, parent, table, columnIndex, rowIndex, targetRow, bottomTd;\n\n            if (!td) {\n                this.releaseRange(range);\n                return;\n            }\n\n            tr = dom.closest(td, TR);\n            parent = dom.closest(td, [THEAD, TBODY]);\n            table = dom.closest(td, TABLE);\n            columnIndex = dom.findNodeIndex(td, true);\n            rowIndex = dom.findNodeIndex(tr, true);\n\n            if (rowIndex + 1 === parent.rows.length) {\n                this.releaseRange(range);\n                return;\n            }\n\n            targetRow = parent.rows[rowIndex + this._getRowspan(td)];\n            bottomTd = targetRow && targetRow.children[columnIndex];\n\n            if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            columnIndex = $(td).attr(\"col-index\");\n            bottomTd = $(targetRow).find(\"[col-index=\" + columnIndex + \"]\").get(0);\n\n            if (!bottomTd || bottomTd.colSpan !== td.colSpan || td.tagName !== bottomTd.tagName) {\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                return;\n            }\n\n            $(td).prop(ROWSPAN, this._getRowspan(td) + this._getRowspan(bottomTd))\n                 .append(dom.emptyNode(bottomTd) ? \"\" : \"<br/>\" + bottomTd.innerHTML);\n\n            if (td.getAttribute(SCOPE) === ROW) {\n                td.setAttribute(SCOPE, ROWGROUP);\n            }\n\n            $(bottomTd).remove();\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n    },\n    _getRowspan: function(td) {\n        return parseInt(td.getAttribute(ROWSPAN), 10) || 1;\n    }\n});\n\nvar SplitCellCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            type = this.options.type,\n            attr = type === \"row\" ? COLSPAN : ROWSPAN,\n            td = dom.closest(range.endContainer, [TD, TH]),\n            parent = dom.closest(td, [THEAD, TBODY]),\n            table = dom.closest(td, TABLE),\n            emptyTd = dom.createEmptyNode(this.editor.document, td.nodeName.toLowerCase());\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        if (type === \"row\" && $(td).is(\"[\" + attr + \"]\")) {\n            this._splitCellHorizontally(td, parent, attr, emptyTd);\n        } else if (type === \"column\" && $(td).is(\"[\" + attr + \"]\")) {\n            this._splitCellVertically(td, parent, attr, emptyTd);\n        }\n\n        if ($(td).prop(attr.toLowerCase()) <= 1) {\n            $(td).removeAttr(attr);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n    },\n    _getRowspanValue: function(td) {\n        return parseInt(td.getAttribute(ROWSPAN), 10);\n    },\n    _getColspanValue: function(td) {\n        return parseInt(td.getAttribute(COLSPAN), 10);\n    },\n    _splitCellHorizontally: function(td, parent, attr, emptyTd) {\n        var rowSpan = td.rowSpan,\n            colSpan = td.colSpan,\n            tdToAdd = $(emptyTd),\n            colSpanResult = Math.floor(colSpan / 2);\n\n            if (colSpanResult > 1) {\n                tdToAdd.attr(COLSPAN, colSpanResult);\n            }\n\n            if (rowSpan > 1) {\n                tdToAdd.attr(ROWSPAN, rowSpan);\n            }\n\n            $(td).prop(attr, colSpan - colSpanResult)\n                .after(tdToAdd);\n\n            $(td).width(td.offsetWidth);\n            tdToAdd.width(tdToAdd[0].offsetWidth);\n\n            if (td.hasAttribute(SCOPE)) {\n                if (td.getAttribute(SCOPE) === COLGROUP) {\n                    tdToAdd.attr(SCOPE, COL);\n                    if (!td.getAttribute(COLSPAN) || td.getAttribute(COLSPAN) === \"1\") {\n                        td.setAttribute(SCOPE, COL);\n                    }\n\n                    this._adjustColgroups(td.parentNode, parent.parentNode);\n                } else {\n                    tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                }\n            }\n    },\n    _splitCellVertically: function(td, parent, attr, emptyTd) {\n        var tr = dom.closest(td,TR),\n            columnIndex = parseInt($(td).attr(\"col-index\"), 10),\n            rowIndex = dom.findNodeIndex(tr, true),\n            rowSpan = td.rowSpan,\n            colSpan = td.colSpan,\n            rowSpanResult = Math.floor(rowSpan / 2),\n            targetRow = $(parent).find(TR).eq(rowIndex + rowSpan - rowSpanResult),\n            nextTd = this._findNextTdInRow(targetRow, columnIndex + colSpan),\n            tdToAdd = $(emptyTd);\n\n            if (rowSpanResult > 1) {\n                tdToAdd.attr(ROWSPAN, rowSpanResult);\n            }\n            if (colSpan > 1) {\n                tdToAdd.attr(COLSPAN, colSpan);\n            }\n\n            if (nextTd && nextTd.length) {\n                nextTd.before(tdToAdd);\n            } else {\n                targetRow.append(tdToAdd);\n            }\n\n            $(td).prop(attr, rowSpan - rowSpanResult);\n\n            if (td.hasAttribute(SCOPE)) {\n                if (td.getAttribute(SCOPE) === ROWGROUP) {\n                    tdToAdd.attr(SCOPE, ROW);\n                    if (!td.getAttribute(ROWSPAN) || td.getAttribute(ROWSPAN) === \"1\") {\n                        td.setAttribute(SCOPE, ROW);\n                    }\n                } else {\n                    tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                }\n            }\n    }\n});\n\nvar TableModificationTool = Tool.extend({\n    command: function(options) {\n        var commandsMap = {\n            row: {\n                insert: InsertRowCommand,\n                \"delete\": DeleteRowCommand,\n                merge: MergeCellsHorizontallyCommand,\n                split: SplitCellCommand\n            },\n            column: {\n                insert: InsertColumnCommand,\n                \"delete\": DeleteColumnCommand,\n                merge: MergeCellsVerticallyCommand,\n                split: SplitCellCommand\n            }\n        };\n\n        options = extend(options, this.options);\n        options.action = options.action || \"insert\";\n\n        return new commandsMap[options.type][options.action](options);\n    },\n    initialize: function(ui, options) {\n        Tool.fn.initialize.call(this, ui, options);\n        ui.addClass(\"k-disabled\");\n        ui.attr(\"disabled\", \"disabled\");\n    },\n\n    update: function(ui, nodes) {\n        var isFormatted = !tableFormatFinder.isFormatted(nodes);\n\n        if (isFormatted === true) {\n            ui.parent().addClass(\"k-hidden k-disabled\");\n            ui.attr(\"disabled\", \"disabled\");\n            ui.addClass(\"k-disabled\");\n        } else {\n            ui.parent().removeClass(\"k-hidden k-disabled\");\n            ui.prop(\"disabled\", false);\n            ui.removeClass(\"k-disabled\");\n        }\n    }\n});\n\nvar TableFormatCommand = FormatCommand.extend({\n    exec: function() {\n        var that = this;\n        var editor = that.editor;\n\n        FormatCommand.fn.exec.call(this);\n\n        if (editor.elementResizing) {\n            editor.elementResizing._showResizeHandles();\n        }\n    }\n});\n\n// var tableAlignFormatFinder = BlockFormatFinder.extend({\n\n// });\n\nvar TableFormatTool = BlockFormatTool.extend({\n    initialize: function(ui, options) {\n        BlockFormatTool.fn.initialize.call(this, ui, options);\n        ui.addClass(\"k-disabled\");\n        ui.attr(\"disabled\", \"disabled\");\n    },\n    update: function(ui, nodes) {\n        var isTable = !tableFormatFinder.isFormatted(nodes);\n        var isFormatted = this.options.finder.isFormatted(nodes, this.isTable);\n\n        if (isTable === true) {\n            ui.parent().addClass(\"k-hidden k-disabled\");\n            ui.attr(\"disabled\", \"disabled\");\n            ui.addClass(\"k-disabled\");\n        } else {\n            ui.parent().removeClass(\"k-hidden k-disabled\");\n            ui.prop(\"disabled\", false);\n            ui.removeClass(\"k-disabled\");\n        }\n\n        ui.toggleClass(\"k-selected\", isFormatted);\n        ui.attr(\"aria-pressed\", isFormatted);\n    },\n    command: function(commandArguments) {\n        var that = this;\n\n        return new TableFormatCommand(extend(commandArguments, {\n            formatter: that.options.formatter\n        }));\n    },\n    isTable: function(node) {\n        return dom.is(node, \"table\");\n    }\n});\n\nextend(kendo.ui.editor, {\n    PopupTool: PopupTool,\n    TableCommand: TableCommand,\n    InsertTableTool: InsertTableTool,\n    TableFormatTool: TableFormatTool,\n    TableFormatCommand: TableFormatCommand,\n    TableModificationTool: TableModificationTool,\n    InsertRowCommand: InsertRowCommand,\n    InsertColumnCommand: InsertColumnCommand,\n    DeleteRowCommand: DeleteRowCommand,\n    DeleteColumnCommand: DeleteColumnCommand,\n    MergeCellsHorizontallyCommand: MergeCellsHorizontallyCommand,\n    MergeCellsVerticallyCommand: MergeCellsVerticallyCommand,\n    SplitCellCommand: SplitCellCommand\n});\n\nregisterTool(\"createTable\", new InsertTableTool({ template: new ToolTemplate({ template: EditorUtils.buttonTemplate, popup: true, title: \"Create table\" }) }));\n\nregisterTool(\"addColumnLeft\", new TableModificationTool({ type: \"column\", position: \"before\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Add column on the left\" }) }));\nregisterTool(\"addColumnRight\", new TableModificationTool({ type: \"column\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Add column on the right\" }) }));\nregisterTool(\"addRowAbove\", new TableModificationTool({ type: \"row\", position: \"before\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Add row above\" }) }));\nregisterTool(\"addRowBelow\", new TableModificationTool({ type: \"row\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Add row below\" }) }));\nregisterTool(\"deleteRow\", new TableModificationTool({ type: \"row\", action: \"delete\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Delete row\" }) }));\nregisterTool(\"deleteColumn\", new TableModificationTool({ type: \"column\", action: \"delete\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Delete column\" }) }));\nregisterTool(\"mergeCellsHorizontally\", new TableModificationTool({ type: \"row\", action: \"merge\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Merge Cell Right\" }) }));\nregisterTool(\"mergeCellsVertically\", new TableModificationTool({ type: \"column\", action: \"merge\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Merge Cell Down\" }) }));\nregisterTool(\"splitCellHorizontally\", new TableModificationTool({ type: \"row\", action: \"split\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Split Cell\" }) }));\nregisterTool(\"splitCellVertically\", new TableModificationTool({ type: \"column\", action: \"split\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Split Cell\" }) }));\n\nregisterFormat(\"tableAlignLeft\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"\", marginRight: \"auto\" } } },\n    { tags: [\"table\"], attr: { align: \"left\" } }\n]);\nregisterTool(\"tableAlignLeft\", new TableFormatTool({\n    format: formats.tableAlignLeft,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Table Align Left\"\n    })\n}));\n\nregisterFormat(\"tableAlignCenter\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"auto\" } } },\n    { tags: [\"table\"], attr: { align: \"center\" } }\n]);\nregisterTool(\"tableAlignCenter\", new TableFormatTool({\n    format: formats.tableAlignCenter,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Table Align Center\"\n    })\n}));\n\nregisterFormat(\"tableAlignRight\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"\" } } },\n    { tags: [\"table\"], attr: { align: \"right\" } }\n]);\nregisterTool(\"tableAlignRight\", new TableFormatTool({\n    format: formats.tableAlignRight,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Table Align Left\"\n    })\n}));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/plugins/clipboard',[ \"../command\" ], f);\n})(function() {\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        editorNS = kendo.ui.editor,\n        RangeUtils = editorNS.RangeUtils,\n        dom = editorNS.Dom,\n        RestorePoint = editorNS.RestorePoint,\n        Marker = editorNS.Marker,\n        browser = kendo.support.browser,\n        extend = $.extend;\n\nvar Clipboard = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n        var pasteCleanup = editor.options.pasteCleanup;\n        this.cleaners = [\n            new ScriptCleaner(pasteCleanup),\n            new TabCleaner(pasteCleanup),\n            new MSWordFormatCleaner(pasteCleanup),\n            new WebkitFormatCleaner(pasteCleanup),\n            new HtmlTagsCleaner(pasteCleanup),\n            new HtmlAttrCleaner(pasteCleanup),\n            new HtmlContentCleaner(pasteCleanup),\n            new CustomCleaner(pasteCleanup) //always keep at end\n        ];\n    },\n\n    htmlToFragment: function(html) {\n        var editor = this.editor,\n            doc = editor.document,\n            container = dom.create(doc, 'div'),\n            fragment = doc.createDocumentFragment();\n\n        container.innerHTML = html;\n\n        while (container.firstChild) {\n            fragment.appendChild(container.firstChild);\n        }\n\n        return fragment;\n    },\n\n    isBlock: function(html) {\n        return (/<(div|p|ul|ol|table|h[1-6])/i).test(html);\n    },\n\n    _startModification: function() {\n        var range;\n        var restorePoint;\n        var editor = this.editor;\n\n        if (this._inProgress) {\n            return;\n        }\n\n        this._inProgress = true;\n\n        range = editor.getRange();\n        restorePoint = new RestorePoint(range, editor.body);\n\n        dom.persistScrollTop(editor.document);\n\n        return { range: range, restorePoint: restorePoint };\n    },\n\n    _endModification: function(modificationInfo) {\n        editorNS._finishUpdate(this.editor, modificationInfo.restorePoint);\n\n        this.editor._selectionChange();\n\n        this._inProgress = false;\n    },\n\n    _contentModification: function(before, after) {\n        var that = this;\n        var editor = that.editor;\n        var modificationInfo = that._startModification();\n\n        if (!modificationInfo) {\n            return;\n        }\n\n        before.call(that, editor, modificationInfo.range);\n\n        setTimeout(function() {\n            after.call(that, editor, modificationInfo.range);\n\n            that._endModification(modificationInfo);\n        });\n    },\n\n    _removeBomNodes: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n\n        for (var i = 0; i < nodes.length; i++) {\n            nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue) || nodes[i].nodeValue;\n        }\n    },\n\n    _onBeforeCopy: function(range) {\n        var marker = new Marker();\n        marker.add(range);\n\n        this._removeBomNodes(range);\n\n        marker.remove(range);\n\n        this.editor.selectRange(range);\n    },\n\n    oncopy: function() {\n        this._onBeforeCopy(this.editor.getRange());\n    },\n\n    oncut: function() {\n        this._onBeforeCopy(this.editor.getRange());\n        this._contentModification($.noop, $.noop);\n    },\n\n    _fileToDataURL: function(blob) {\n        var deferred = $.Deferred();\n\n        var reader = new FileReader();\n\n        if (!(blob instanceof window.File) && blob.getAsFile) {\n            blob = blob.getAsFile();\n        }\n\n        reader.onload = deferred.resolve.bind(deferred);\n\n        reader.readAsDataURL(blob);\n\n        return deferred.promise();\n    },\n\n    _triggerPaste: function(html, options) {\n        var args = { html: html || \"\" };\n\n        args.html = args.html.replace(/\\ufeff/g, \"\");\n\n        this.editor.trigger(\"paste\", args);\n\n        this.paste(args.html, options || {});\n    },\n\n    _handleImagePaste: function(e) {\n        if (!('FileReader' in window) || (browser.msie && browser.version > 10)) {\n            return;\n        }\n\n        var clipboardData = e.clipboardData || e.originalEvent.clipboardData ||\n                    window.clipboardData || {};\n\n        var items = clipboardData.items || clipboardData.files;\n\n        return this._insertImages(items);\n    },\n\n    _insertImages: function(items) {\n        if (!items) {\n            return;\n        }\n\n        var images = $.grep(items, function(item) { return (/^image\\//i).test(item.type); });\n        var html = $.grep(items, function(item) { return (/^text\\/html/i).test(item.type); });\n\n        if (html.length || !images.length) {\n            return;\n        }\n\n        var modificationInfo = this._startModification();\n\n        if (!modificationInfo) {\n            return;\n        }\n\n        $.when.apply($, $.map(images, this._fileToDataURL))\n            .done((function() {\n                var results = Array.prototype.slice.call(arguments);\n                var html = $.map(results, function(e) {\n                    return '<img src=\"' + e.target.result + '\" />';\n                }).join(\"\");\n\n                this._triggerPaste(html);\n\n                this._endModification(modificationInfo);\n            }).bind(this));\n\n        return true;\n    },\n\n    onpaste: function(e) {\n        if (this.editor.body.contentEditable === \"false\") {\n            return;\n        }\n\n        if (this._handleImagePaste(e)) {\n            e.preventDefault();\n            return;\n        }\n\n        this.expandImmutablesIn();\n\n        this._contentModification(\n            function beforePaste(editor, range) {\n                var clipboardNode = dom.create(editor.document, 'div', {\n                        className: 'k-paste-container',\n                        innerHTML: \"\\ufeff\"\n                    });\n                var browser = kendo.support.browser;\n                var body = editor.body;\n\n                this._decoreateClipboardNode(clipboardNode, body);\n\n                body.appendChild(clipboardNode);\n\n                //Browser scrolls to clipboardNode\n                if (browser.webkit) {\n                    this._moveToCaretPosition(clipboardNode, range);\n                }\n\n                // text ranges are slow in IE10-, DOM ranges are buggy in IE9-10\n                if (browser.msie && browser.version < 11) {\n                    e.preventDefault();\n                    var r = editor.createRange();\n                    r.selectNodeContents(clipboardNode);\n                    editor.selectRange(r);\n                    var textRange = editor.document.body.createTextRange();\n                    textRange.moveToElementText(clipboardNode);\n                    $(body).off('paste');\n                    textRange.execCommand('Paste');\n                    $(body).on('paste', this.onpaste.bind(this));\n                } else {\n                    var clipboardRange = editor.createRange();\n                    clipboardRange.selectNodeContents(clipboardNode);\n                    editor.selectRange(clipboardRange);\n                }\n\n                range.deleteContents();\n            },\n            function afterPaste(editor, range) {\n                var html = \"\", containers;\n\n                editor.selectRange(range);\n\n                containers = $(editor.body).children(\".k-paste-container\");\n\n                containers.each(function() {\n                    var lastChild = this.lastChild;\n\n                    if (lastChild && dom.is(lastChild, 'br')) {\n                        dom.remove(lastChild);\n                    }\n\n                    html += this.innerHTML;\n                });\n\n                containers.remove();\n\n                this._triggerPaste(html, { clean: true });\n            }\n        );\n    },\n    ondragover: function(e) {\n        if (browser.msie || browser.edge) {\n            e.stopPropagation();\n            e.preventDefault();\n        }\n    },\n    ondrop: function(e) {\n        if (!('FileReader' in window)) {\n            return;\n        }\n\n        var dataTransfer = (e.originalEvent || e).dataTransfer || {};\n        var items = dataTransfer.items || dataTransfer.files;\n\n        if (this._insertImages(items)) {\n            e.preventDefault();\n        }\n    },\n    _decoreateClipboardNode: function(node, body) {\n        if (!browser.msie && !browser.webkit) {\n            return;\n        }\n\n        node = $(node);\n        node.css({\n            borderWidth: \"0px\",\n            width: \"0px\",\n            height: \"0px\",\n            overflow: \"hidden\",\n            margin: \"0\",\n            padding: \"0\"\n        });\n\n        if (browser.msie) {\n            //node inherits BODY styles and this causes the browser to add additional\n            var documentElement = $(body.ownerDocument.documentElement);\n\n            node.css({\n                fontVariant: \"normal\",\n                fontWeight: \"normal\",\n                lineSpacing: \"normal\",\n                lineHeight: \"normal\",\n                textDecoration: \"none\"\n            });\n            var color = documentElement.css(\"color\");\n            if (color) {\n                node.css(\"color\", color);\n            }\n            var fontFamily = documentElement.css(\"fontFamily\");\n            if (fontFamily) {\n                node.css(\"fontFamily\", fontFamily);\n            }\n            var fontSize = documentElement.css(\"fontSize\");\n            if (fontSize) {\n                node.css(\"fontSize\", fontSize);\n            }\n        }\n    },\n    _moveToCaretPosition: function(node, range) {\n        var that = this;\n        var body = that.editor.body;\n        var nodeOffset = dom.offset(node, body);\n        var caretOffset = that._caretOffset(range, body);\n        var translateX = caretOffset.left - nodeOffset.left;\n        var translateY = caretOffset.top - nodeOffset.top;\n        var translate = \"translate(\" + translateX + \"px,\" + translateY + \"px)\";\n\n        $(node).css({\n            \"-webkit-transform\": translate,\n            \"transform\": translate\n        });\n    },\n    _caretOffset: function(range, body) {\n        var editor = this.editor;\n        var caret = dom.create(editor.document, 'span', { innerHTML: \"\\ufeff\" });\n        var startContainer = range.startContainer;\n        var rangeChanged;\n\n        if (range.collapsed) {\n            var isStartTextNode = dom.isDataNode(startContainer);\n            if (isStartTextNode && (dom.isBom(startContainer) || range.startOffset === 0)) {\n                dom.insertBefore(caret, startContainer);\n            } else if (isStartTextNode && range.startOffset === startContainer.length) {\n                dom.insertAfter(caret, startContainer);\n            } else {\n                range.insertNode(caret);\n                rangeChanged = true;\n            }\n        } else {\n            startContainer = startContainer === body ?\n                startContainer.childNodes[range.startOffset] : startContainer;\n            dom.insertBefore(caret, startContainer);\n        }\n\n        var offset = dom.offset(caret, body);\n        var prev = caret.previousSibling;\n        var next = caret.nextSibling;\n\n        dom.remove(caret);\n\n        if (rangeChanged && dom.isDataNode(prev) && dom.isDataNode(next) && !dom.isBom(prev) && !dom.isBom(next)) {\n            var prevLength = prev.length;\n            next.data = prev.data + next.data;\n            range.setStart(next, prevLength);\n            dom.remove(prev);\n\n            range.collapse(true);\n            editor.selectRange(range);\n        }\n\n        return offset;\n    },\n\n    expandImmutablesIn: function(range) {\n        var editor = this.editor;\n        if (editor && editor.options.immutables) {\n            var body = editor.body;\n            range = range || editor.getRange();\n            kendo.ui.editor.Immutables.expandImmutablesIn(range);\n            if (range.startContainer === body && range.startOffset === 0) {\n                var doc = body.ownerDocument;\n                var bomNode = doc.createTextNode(\"\\ufeff\");\n                body.insertBefore(bomNode, body.childNodes[0]);\n                range.setStartBefore(bomNode);\n            }\n            editor.selectRange(range);\n        }\n    },\n\n    splittableParent: function(block, node) {\n        var parentNode, body;\n\n        if (block) {\n            return dom.closestEditableOfType(node, ['p', 'ul', 'ol']) || node.parentNode;\n        }\n\n        parentNode = node.parentNode;\n        body = node.ownerDocument.body;\n\n        if (dom.isInline(parentNode)) {\n            while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                parentNode = parentNode.parentNode;\n            }\n        }\n\n        return parentNode;\n    },\n\n    paste: function(html, options) {\n        var editor = this.editor,\n            i, l, childNodes;\n\n        this.expandImmutablesIn();\n\n        options = extend({ clean: false, split: true }, options);\n\n        if (!options.skipCleaners) {\n            for (i = 0, l = this.cleaners.length; i < l; i++) {\n                if (this.cleaners[i].applicable(html)) {\n                    html = this.cleaners[i].clean(html);\n                }\n            }\n        }\n\n        if (options.clean) {\n            // remove br elements which immediately precede block elements\n            html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/ig, \"$3\");\n            // remove empty inline elements\n            html = html.replace(/<(a|span)[^>]*><\\/\\1>/ig, \"\");\n        }\n\n        html = html.replace(/<(a|span|font)([^>]*)> <\\/\\1>/ig, \"<$1$2>&nbsp;</$1>\");\n\n        // It is possible in IE to copy just <li> tags\n        html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n\n        var block = this.isBlock(html);\n\n        editor.focus();\n        var range = editor.getRange();\n        range.deleteContents();\n\n        if (range.startContainer == editor.document) {\n            range.selectNodeContents(editor.body);\n        }\n\n        var marker = new Marker();\n        var caret = marker.addCaret(range);\n\n        var parent = this.splittableParent(block, caret);\n        var unwrap = false;\n        var splittable = parent != editor.body && !dom.is(parent, \"td\");\n\n        if (options.split && splittable && (block || dom.isInline(parent))) {\n            range.selectNode(caret);\n            RangeUtils.split(range, parent, true);\n            unwrap = true;\n        }\n\n        var fragment = this.htmlToFragment(html);\n\n        if (fragment.firstChild && fragment.firstChild.className === \"k-paste-container\") {\n            var fragmentsHtml = [];\n            for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n            }\n\n            fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n        }\n\n        childNodes = fragment.childNodes;\n\n        $(childNodes)\n            .filter(\"table\").addClass(\"k-table\").end()\n            .find(\"table\").addClass(\"k-table\");\n\n        $(childNodes).each(function(index, elm) {\n           if (dom.isBlock(elm) && !dom.isSelfClosing(elm) && elm.innerHTML === \"\") {\n                elm.appendChild(editor.document.createTextNode(\"\\ufeff\"));\n           }\n        });\n\n        range.insertNode(fragment);\n\n        parent = this.splittableParent(block, caret);\n        if (unwrap) {\n            while (caret.parentNode != parent) {\n                dom.unwrap(caret.parentNode);\n            }\n\n            dom.unwrap(caret.parentNode);\n        }\n\n        dom.normalize(range.commonAncestorContainer);\n        caret.style.display = 'inline';\n        dom.restoreScrollTop(editor.document);\n        dom.scrollTo(caret);\n        marker.removeCaret(range);\n\n        var rangeEnd = range.commonAncestorContainer.parentNode;\n        if (range.collapsed && dom.name(rangeEnd) == \"tbody\" || range.collapsed && dom.name(rangeEnd) == \"thead\") {\n            range.setStartAfter($(rangeEnd).closest(\"table\")[0]);\n            range.collapse(true);\n        }\n\n        var focusedTable = $(range.commonAncestorContainer.parentNode).closest(\"table\");\n\n        if (focusedTable.get(0)) {\n            var siblingNodes = focusedTable.parent().contents();\n            var lastSiblingIndex = siblingNodes.length - 1;\n            var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n            while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n                lastSiblingIndex -= 1;\n                lastSibling = siblingNodes.get(lastSiblingIndex);\n            }\n\n            if (lastSibling === focusedTable.get(0) && !focusedTable.parents(\"table\").length) {\n                dom.insertAfter(dom.createEmptyNode(editor.document, \"p\"), focusedTable[0]);\n            }\n        }\n\n        editor.selectRange(range);\n    }\n});\n\nvar Cleaner = Class.extend({\n    init: function(options) {\n        this.options = options || {};\n        this.replacements = [];\n    },\n\n    clean: function(html, customReplacements) {\n        var that = this,\n            replacements = customReplacements || that.replacements,\n            i, l;\n\n        for (i = 0, l = replacements.length; i < l; i += 2) {\n            html = html.replace(replacements[i], replacements[i + 1]);\n        }\n\n        return html;\n    }\n});\n\nvar ScriptCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.replacements = [\n            /<(\\/?)script([^>]*)>/i, \"<$1telerik:script$2>\"\n        ];\n    },\n\n    applicable: function(html) {\n        return !this.options.none && (/<script[^>]*>/i).test(html);\n    }\n});\n\nvar TabCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        var replacement = ' ';\n        this.replacements = [\n            /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi, replacement,\n            /\\t/gi, replacement,\n            /&nbsp;&nbsp; &nbsp;/gi, replacement\n        ];\n    },\n\n    applicable: function(html) {\n        return (/&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i).test(html);\n    }\n});\n\nvar MSWordFormatCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.junkReplacements = [\n            /<\\?xml[^>]*>/gi, '',\n            /<!--(.|\\n)*?-->/g, '', /* comments */\n            /&quot;/g, \"'\", /* encoded quotes (in attributes) */\n            /<o:p>&nbsp;<\\/o:p>/ig, '&nbsp;',\n            /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/ig, '', /* external references and namespaced tags */\n            /<\\/o>/g, ''\n        ];\n        this.replacements = this.junkReplacements.concat([\n            /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g, '$1',\n            /<br><br>/g, '<BR><BR>',\n            /<br>\\n/g, '<br/>',\n            /<br>(?!\\n)/g, ' ',\n            /<table([^>]*)>(\\s|&nbsp;)+<t/gi, '<table$1><t',\n            /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi, '',\n            /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi, '',\n            /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi, '',\n            /<BR><BR>/g, '<br>',\n            /^\\s*(&nbsp;)+/gi, '',\n            /(&nbsp;|<br[^>]*>)+\\s*$/gi, '',\n            /mso-[^;\"]*;?/ig, '', /* office-related CSS attributes */\n            /<(\\/?)b(\\s[^>]*)?>/ig, '<$1strong$2>',\n            /<(\\/?)font(\\s[^>]*)?>/ig, this.convertFontMatch,\n            /<(\\/?)i(\\s[^>]*)?>/ig, '<$1em$2>',\n            /style=([\"|'])\\s*\\1/g, '', /* empty style attributes */\n            /(<br[^>]*>)?\\n/g, function($0, $1) { return $1 ? $0 : ' '; } /* phantom extra line feeds */\n        ]);\n    },\n\n    convertFontMatch: function(match, closing, args) {\n        var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n        var face = faceRe.exec(args);\n        var family = args && face && face[1];\n\n        if (closing) {\n            return '</span>';\n        } else if (family) {\n            return '<span style=\"font-family:' + family + '\">';\n        } else {\n            return '<span>';\n        }\n    },\n\n    applicable: function(html) {\n        return (/class=\"?Mso/i).test(html) ||\n               (/style=\"[^\"]*mso-/i).test(html) ||\n               (/urn:schemas-microsoft-com:office/).test(html);\n    },\n\n    stripEmptyAnchors: function(html) {\n        return html.replace(/<a([^>]*)>\\s*<\\/a>/ig, function(a, attributes) {\n            if (!attributes || attributes.indexOf(\"href\") < 0) {\n                return \"\";\n            }\n\n            return a;\n        });\n    },\n\n    listType: function(p, listData) {\n        var html = p.innerHTML;\n        var text = dom.innerText(p);\n\n        var startingSymbol;\n        var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\n        var symbol = matchSymbol && matchSymbol[1];\n        var isNumber = /^[a-z\\d]/i.test(symbol);//including alpha-numeric and roman numerals\n\n        var trimStartText = function(text) {\n            return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\n        };\n\n        if (matchSymbol) {\n            startingSymbol = true;\n        }\n\n        html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\u00a0');\n\n        if ((!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html)) ||\n            (startingSymbol && /^.\\u00a0+/.test(html)) ||\n            (symbol && !isNumber && listData)) {\n            return {\n                tag: 'ul',\n                style: this._guessUnorderedListStyle(trimStartText(text))\n            };\n        }\n\n        if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\n            return {\n                tag: 'ol',\n                style: this._guessOrderedListStyle(trimStartText(text))\n            };\n        }\n    },\n\n    _convertToLi: function(p) {\n        var content;\n\n        if (p.childNodes.length == 1) {\n            content = p.firstChild.nodeType === dom.nodeTypes.TEXT_NODE ? dom.innerText(p) : p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, \"\");\n            content = this._checkForBullet(content);\n        } else {\n            content = this._getHtmlNoBullet(p);\n        }\n\n        dom.remove(p);\n\n        return dom.create(document, 'li', { innerHTML: content });\n    },\n\n    _checkForBullet: function(html) {\n        var p = dom.create(document, 'p', { innerHTML: html });\n        var bulletRgx = /^\\s*\\w+[\\.\\)]\\s+/;\n\n        if (bulletRgx.test(p.innerText)) {\n            return this._getHtmlNoBullet(p);\n        }\n\n        return html;\n    },\n\n    _getHtmlNoBullet: function(element) {\n        var content,\n            name = dom.name(element);\n\n        dom.remove(element.firstChild);\n\n        // check for roman numerals\n        if (element.firstChild.nodeType == 3) {\n            if (/^[ivxlcdm]+\\.$/i.test(element.firstChild.nodeValue)) {\n                dom.remove(element.firstChild);\n            }\n        }\n\n        if (/^(&nbsp;|\\s)+$/i.test(element.firstChild.innerHTML)) {\n            dom.remove(element.firstChild);\n        }\n\n        if (name != \"p\") {\n            content = \"<\" + name + \">\" + element.innerHTML + \"</\" + name + \">\";\n        } else {\n            content = element.innerHTML;\n        }\n\n        return content;\n    },\n\n    _guessUnorderedListStyle: function(symbol) {\n        if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\n            return null;//return \"disc\"; //default CSS value\n        } else if (/^o/.test(symbol)) {\n            return \"circle\";\n        } else {\n            return \"square\";\n        }\n    },\n    _guessOrderedListStyle: function(symbol) {\n        var listType = null;\n        if (!/^\\d/.test(symbol)) {\n            listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') +\n                       (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\n        }\n\n        return listType;\n    },\n\n    extractListLevels: function(html) {\n        var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\n\n        html = html.replace(msoListRegExp, function(match, list, level) {\n            return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\n        });\n\n        return html;\n    },\n\n    _createList: function(type, styleType) {\n        return dom.create(document, type, {\n            style: { listStyleType: styleType }\n        });\n    },\n\n    lists: function(placeholder) {\n        var blockChildren = $(placeholder).find(dom.blockElements.join(',')),\n            lastMargin = -1,\n            name,\n            levels = {},\n            li,\n            rootMargin,\n            rootIndex,\n            lastRootLi,\n            isLastRootLi,\n            rootList,\n            i, p, type, margin, list, listData,\n            acceptedNameTags = [\"p\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"],\n            isParentTable = false;\n\n        for (i = 0; i < blockChildren.length; i++) {\n            p = blockChildren[i];\n            listData = $(p).data();\n            var listIndex = listData.list;\n            name = dom.name(p);\n            isParentTable = !!$(p).parents(\"table\").length;\n\n            if (isParentTable) {\n                continue;\n            }\n\n            var listType = this.listType(p, listData);\n            type = listType && listType.tag;\n\n            if (!type || acceptedNameTags.indexOf(name) < 0) {\n                if (!p.innerHTML) {\n                    dom.remove(p);\n                } else if (li && !isLastRootLi) {\n                    li.appendChild(p);\n                }\n                continue;\n            }\n\n            // not supported list levels in ie\n            if (browser.msie) {\n                continue;\n            }\n\n            margin = listData.level || parseFloat(p.style.marginLeft || 0);\n\n            var levelType = type + listIndex;\n            if (!levels[margin]) {\n                levels[margin] = {};\n            }\n\n            if (!rootMargin || rootMargin < 0) {\n                rootMargin = margin;\n                rootIndex = listIndex;\n                lastRootLi = $(placeholder).find(\"[data-list='\" + rootIndex + \"']\").last()[0];\n                rootList = this._createList(type, listType.style);\n                dom.insertBefore(rootList, p);\n                lastMargin = margin;\n                levels[margin][levelType] = rootList;\n            }\n\n            isLastRootLi = lastRootLi === p;\n\n            list = levels[margin][levelType];\n\n            if (margin > lastMargin || !list) {\n                list = this._createList(type, listType.style);\n                levels[margin][levelType] = list;\n                li.appendChild(list);\n            }\n\n            li = this._convertToLi(p);\n            list.appendChild(li);\n\n            if (isLastRootLi) {\n                rootMargin = lastMargin = -1;\n            } else {\n                lastMargin = margin;\n            }\n        }\n    },\n\n    removeAttributes: function(element) {\n        var attributes = element.attributes,\n            i = attributes.length,\n            significantStyles = [],\n            isSignificantCss = function(val) {\n                var significantCss = [\"border\", \"background\", \"padding\"];\n\n                return significantCss.filter(function(cssAttr) {\n                    return val.trim().indexOf(cssAttr) === 0;\n                }).length > 0;\n            },\n            addSignificantStyles = function(val) {\n                if (isSignificantCss(val)) {\n                    significantStyles.push(val.trim());\n                }\n            },\n            attr, attributeName, attributeValues;\n\n        while (i--) {\n            if (dom.name(attributes[i]) != \"colspan\") {\n                attr = attributes[i];\n                attributeName = attr.name;\n\n                if (attributeName === \"style\" && (element.nodeName === \"TD\" || element.nodeName === \"TH\")) {\n                    attributeValues = attr.value.split(\";\");\n                    attributeValues.forEach(addSignificantStyles);\n                }\n\n                element.removeAttributeNode(attributes[i]);\n            }\n        }\n\n        if (significantStyles.length > 0) {\n            element.setAttribute(\"style\", significantStyles.join(\";\"));\n        }\n    },\n\n    createColGroup: function(row) {\n        var cells = row.cells;\n        var table = $(row).closest(\"table\");\n        var colgroup = table.children(\"colgroup\");\n\n        if (cells.length < 2) {\n            return;\n        } else if (colgroup.length) {\n            cells = colgroup.children();\n            colgroup[0].parentNode.removeChild(colgroup[0]);\n        }\n\n        colgroup = $($.map(cells, function(cell) {\n                var width = cell.width;\n                if (width && parseInt(width, 10) !== 0) {\n                    return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                }\n\n                return \"<col />\";\n            }).join(\"\"));\n\n        // jquery 1.9/2.0 discrepancy\n        if (!colgroup.is(\"colgroup\")) {\n            colgroup = $(\"<colgroup/>\").append(colgroup);\n        }\n\n        colgroup.prependTo(table);\n    },\n\n    convertHeaders: function(row) {\n        var cells = row.cells,\n            i,\n            boldedCells = $.map(cells, function(cell) {\n                var child = $(cell).children(\"p\").children(\"strong\")[0];\n\n                if (child && dom.name(child) == \"strong\") {\n                    return child;\n                }\n            });\n\n        if (boldedCells.length == cells.length) {\n            for (i = 0; i < boldedCells.length; i++) {\n                dom.unwrap(boldedCells[i]);\n            }\n\n            $(row).closest(\"table\")\n                .find(\"colgroup\").after(\"<thead></thead>\").end()\n                .find(\"thead\").append(row);\n\n            for (i = 0; i < cells.length; i++) {\n                dom.changeTag(cells[i], \"th\");\n            }\n        }\n    },\n\n    removeParagraphs: function(cells) {\n        var i, j, len, cell, paragraphs;\n\n        for (i = 0; i < cells.length; i++) {\n            this.removeAttributes(cells[i]);\n\n            // remove paragraphs and insert line breaks between them\n            cell = $(cells[i]);\n            paragraphs = cell.children(\"p\");\n\n            for (j = 0, len = paragraphs.length; j < len; j++) {\n                if (j < len - 1) {\n                    dom.insertAfter(dom.create(document, \"br\"), paragraphs[j]);\n                }\n\n                dom.unwrap(paragraphs[j]);\n            }\n        }\n    },\n\n    removeTextNodes: function(trs) {\n        var i, j, childNodes, currentNode, row;\n\n        for (i = 0; i < trs.length; i++) {\n            row = trs[i];\n            childNodes = row.childNodes;\n\n            for (j = 0; j < childNodes.length; j++) {\n                currentNode = childNodes[j];\n\n                if (currentNode.nodeType === dom.nodeTypes.TEXT_NODE) {\n                    row.removeChild(currentNode);\n                }\n            }\n        }\n    },\n\n    tables: function(placeholder) {\n        var tables = $(placeholder).find(\"table\"),\n            that = this,\n            rows,\n            firstRow, longestRow, i, j;\n\n        for (i = 0; i < tables.length; i++) {\n            rows = tables[i].rows;\n            longestRow = firstRow = rows[0];\n\n            for (j = 1; j < rows.length; j++) {\n                if (rows[j].cells.length > longestRow.cells.length) {\n                    longestRow = rows[j];\n                }\n            }\n\n            that.createColGroup(longestRow);\n            that.convertHeaders(firstRow);\n\n            that.removeAttributes(tables[i]);\n\n            that.removeParagraphs(tables.eq(i).find(\"td,th\"));\n\n            that.removeTextNodes(tables.eq(i).find(\"tr\"));\n        }\n    },\n\n    headers: function(placeholder) {\n        var titles = $(placeholder).find(\"p.MsoTitle\");\n\n        for (var i = 0; i < titles.length; i++) {\n            dom.changeTag(titles[i], \"h1\");\n        }\n    },\n\n    removeFormatting: function(placeholder) {\n        $(placeholder).find(\"*\").each(function() {\n            $(this).css({\n                fontSize: \"\",\n                fontFamily: \"\"\n            });\n\n            if (!this.getAttribute(\"style\") && !this.style.cssText) {\n                this.removeAttribute(\"style\");\n            }\n        });\n    },\n\n    clean: function(html) {\n        var that = this, placeholder;\n        var filters = this.options;\n\n        if (filters.none) {\n            html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\n            html = that.stripEmptyAnchors(html);\n        } else {\n\n            html = filters.msConvertLists ? this.extractListLevels(html) : html;\n            html = Cleaner.fn.clean.call(that, html);\n            html = that.stripEmptyAnchors(html);\n\n            placeholder = dom.create(document, 'div', { innerHTML: html });\n            that.headers(placeholder);\n\n            if (filters.msConvertLists) {\n                that.lists(placeholder);\n            }\n            that.tables(placeholder);\n\n            if (filters.msAllFormatting) {\n                that.removeFormatting(placeholder);\n            }\n\n            html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/ig, '$1');\n        }\n\n        return html;\n    }\n});\n\nvar WebkitFormatCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.replacements = [\n            /\\s+class=\"Apple-style-span[^\"]*\"/gi, '',\n            /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi, '<$1',\n            /^<div>(.*)<\\/div>$/, '$1'\n        ];\n    },\n\n    applicable: function(html) {\n        return (/class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i).test(html);\n    }\n});\n\nvar DomCleaner = Cleaner.extend({\n    clean: function(html) {\n        var container = dom.create(document, 'div', { innerHTML: html });\n        container = this.cleanDom(container);\n        return container.innerHTML;\n    },\n\n    cleanDom: function(container) {\n        return container;\n    }\n});\n\nvar HtmlTagsCleaner = DomCleaner.extend({\n    cleanDom: function(container) {\n        var tags = this.collectTags();\n\n        $(container).find(tags).each(function() {\n            dom.unwrap(this);\n        });\n\n        return container;\n    },\n\n    collectTags: function() {\n        if (this.options.span) {\n            return \"span\";\n        }\n    },\n\n    applicable: function() {\n        return this.options.span;\n    }\n});\n\nvar HtmlAttrCleaner = DomCleaner.extend({\n    cleanDom: function(container) {\n        var attributes = this.collectAttr();\n        var nodes = $(container).find(\"[\" + attributes.join(\"],[\") + \"]\");\n        nodes.removeAttr(attributes.join(\" \"));\n\n        return container;\n    },\n\n    collectAttr: function() {\n        if (this.options.css) {\n            return [\"class\", \"style\"];\n        }\n\n        return [];\n    },\n\n    applicable: function() {\n        return this.options.css;\n    }\n});\n\nvar TextContainer = function() {\n    this.text = \"\";\n    this.add = function(text) {\n        this.text += text;\n    };\n};\n\nvar HtmlTextLines = Class.extend({\n    init: function(separators) {\n        this.separators = separators || {\n                text: \" \",\n                line: \"<br/>\"\n            };\n        this.lines = [];\n        this.inlineBlockText = [];\n        this.resetLine();\n    },\n\n    appendText: function(text) {\n        if (text.nodeType === 3) {\n            text = text.nodeValue;\n        }\n\n        this.textContainer.add(text);\n    },\n\n    appendInlineBlockText: function(text) {\n        this.inlineBlockText.push(text);\n    },\n\n    flashInlineBlockText: function() {\n        if (this.inlineBlockText.length) {\n            this.appendText(this.inlineBlockText.join(\" \"));\n            this.inlineBlockText = [];\n        }\n    },\n\n    endLine: function() {\n        this.flashInlineBlockText();\n        this.resetLine();\n    },\n\n    html: function() {\n        var separators = this.separators;\n        var result = \"\";\n        var lines = this.lines;\n\n        this.flashInlineBlockText();\n\n        for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\n            var line = lines[i];\n            for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\n                var text = line[j].text;\n                result += text;\n                if (j !== jl1) {\n                    result += separators.text;\n                }\n            }\n            if (i !== il1) {\n                result += separators.line;\n            }\n        }\n\n        return result;\n    },\n\n    resetLine: function() {\n        this.textContainer = new TextContainer();\n        this.line = [];\n        this.line.push(this.textContainer);\n        this.lines.push(this.line);\n    }\n});\n\nvar DomEnumerator = Class.extend({\n    init: function(callback) {\n        this.callback = callback;\n    },\n    enumerate: function(node) {\n        if (!node) {\n            return;\n        }\n\n        var preventDown = this.callback(node);\n\n        var child = node.firstChild;\n        if (!preventDown && child) {\n            this.enumerate(child);\n        }\n\n        this.enumerate(node.nextSibling);\n    }\n});\n\nvar HtmlContentCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n        this.hasText = false; //unpleasant flag to prevent an empty line at the beginning of the generated content.\n        this.enumerator = new DomEnumerator(this.buildText.bind(this));\n    },\n\n    clean: function(html) {\n        var container = dom.create(document, 'div', { innerHTML: html });\n\n        return this.cleanDom(container);\n    },\n\n    cleanDom: function(container) {\n        this.separators = this.getDefaultSeparators();\n        this.htmlLines = new HtmlTextLines(this.separators);\n        this.enumerator.enumerate(container.firstChild);\n        this.hasText = false;\n\n        return this.htmlLines.html();\n    },\n\n    buildText: function(node) {\n        if (dom.isDataNode(node)) {\n            if (dom.isEmptyspace(node)) {\n                return;\n            }\n            this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\n            this.hasText = true;\n        } else if (dom.isBlock(node) && this.hasText) {\n            var action = this.actions[dom.name(node)] || this.actions.block;\n            return action(this, node);\n        } else if (dom.isBr(node)) {\n            this.htmlLines.appendText(this.separators.line);\n        }\n    },\n\n    applicable: function() {\n        var o = this.options;\n        return o.all || o.keepNewLines;\n    },\n\n    getDefaultSeparators: function() {\n        if (this.options.all) {\n            return { text: \" \", line: \" \" };\n        } else {\n            return { text: \" \", line: \"<br/>\" };\n        }\n    },\n\n    actions: {\n        ul: $.noop,\n        ol: $.noop,\n        table: $.noop,\n        thead: $.noop,\n        tbody: $.noop,\n        td: function(cleaner, node) {\n            var tdCleaner = new HtmlContentCleaner({ all: true });\n\n            var cellText = tdCleaner.cleanDom(node);\n            cleaner.htmlLines.appendInlineBlockText(cellText);\n\n            return true;\n        },\n\n        block: function(cleaner) {\n            cleaner.htmlLines.endLine();\n        }\n    }\n});\n\nvar CustomCleaner = Cleaner.extend({\n    clean: function(html) {\n        return this.options.custom(html);\n    },\n\n    applicable: function() {\n        return typeof(this.options.custom) === \"function\";\n    }\n});\n\nextend(editorNS, {\n    Clipboard: Clipboard,\n    Cleaner: Cleaner,\n    ScriptCleaner: ScriptCleaner,\n    TabCleaner: TabCleaner,\n    MSWordFormatCleaner: MSWordFormatCleaner,\n    WebkitFormatCleaner: WebkitFormatCleaner,\n    HtmlTagsCleaner: HtmlTagsCleaner,\n    HtmlAttrCleaner: HtmlAttrCleaner,\n    HtmlContentCleaner: HtmlContentCleaner,\n    HtmlTextLines: HtmlTextLines,\n    CustomCleaner: CustomCleaner\n});\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/plugins/keyboard',[ \"../command\" ], f);\n})(function() {\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    editorNS = kendo.ui.editor,\n    RangeUtils = editorNS.RangeUtils,\n    dom = editorNS.Dom,\n    RestorePoint = editorNS.RestorePoint,\n    Marker = editorNS.Marker,\n    browser = kendo.support.browser,\n    bomSpan = \"<span  class='k-br'>\\ufeff</span>\",\n    extend = $.extend;\nvar nodeTypes = dom.nodeTypes;\nvar PREVIOUS_SIBLING = \"previousSibling\";\n\nfunction selected(node, range) {\n    return range.startContainer === node && range.endContainer === node &&\n        range.startOffset === 0 && range.endOffset == node.childNodes.length;\n}\n\nfunction getSibling(node, direction, condition) {\n    var sibling = node ? node[direction] : null;\n\n    while (sibling && !condition(sibling)) {\n        sibling = sibling[direction];\n    }\n\n    return sibling;\n}\n\nvar tableCells = \"td,th,caption\";\nvar tableCellsWrappers = \"table,tbody,thead,tfoot,tr\";\nvar tableElements = tableCellsWrappers + \",\" + tableCells;\nvar inTable = function(range) { return !range.collapsed && $(range.commonAncestorContainer).is(tableCellsWrappers); };\n\nvar RemoveTableContent = Class.extend({\n    remove: function(range) {\n        var that = this;\n        var marker = new Marker();\n        marker.add(range, false);\n\n        var nodes = RangeUtils.getAll(range, function(node) { return $(node).is(tableElements); });\n        var doc = RangeUtils.documentFromRange(range);\n        var start = marker.start;\n        var end = marker.end;\n        var cellsTypes = tableCells.split(\",\");\n        var startCell = dom.parentOfType(start, cellsTypes);\n        var endCell = dom.parentOfType(end, cellsTypes);\n        that._removeContent(start, startCell, true);\n        that._removeContent(end, endCell, false);\n        $(nodes).each(function(i, node) {\n            node = $(node);\n            (node.is(tableCells) ? node : node.find(tableCells)).each(function(j, cell) {\n                cell.innerHTML = \"&#65279;\";\n            });\n        });\n        if (startCell && !start.previousSibling) {\n            dom.insertBefore(doc.createTextNode(\"\\ufeff\"), start);\n        }\n        if (endCell && !end.nextSibling) {\n            dom.insertAfter(doc.createTextNode(\"\\ufeff\"), end);\n        }\n        if (startCell) {\n            range.setStartBefore(start);\n        } else if (nodes[0]) {\n            startCell = $(nodes[0]);\n            startCell = startCell.is(tableCells) ? startCell : startCell.find(tableCells).first();\n            if (startCell.length) {\n                range.setStart(startCell.get(0), 0);\n            }\n        }\n\n        range.collapse(true);\n\n        dom.remove(start);\n        dom.remove(end);\n    },\n    _removeContent: function(start, top, forwards) {\n        if (top) {\n            var sibling = forwards ? \"nextSibling\" : \"previousSibling\",\n                next,\n                getNext = function(node) {\n                    while (node && !node[sibling]) {\n                        node = node.parentNode;\n                    }\n                    return node && $.contains(top, node) ? node[sibling] : null;\n                };\n            start = getNext(start);\n            while (start) {\n                next = getNext(start);\n                dom.remove(start);\n                start = next;\n            }\n        }\n    }\n});\n\nvar TypingHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n\n    keydown: function(e) {\n        var that = this,\n            editor = that.editor,\n            keyboard = editor.keyboard,\n            isTypingKey = keyboard.isTypingKey(e),\n            evt = extend($.Event(), e);\n\n        that.editor.trigger(\"keydown\", evt);\n\n        if (evt.isDefaultPrevented()) {\n            e.preventDefault();\n            return true;\n        }\n\n        if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n            var range = editor.getRange();\n            var body = editor.body;\n            that.startRestorePoint = new RestorePoint(range, body);\n\n            if (inTable(range)) {\n                var removeTableContent = new RemoveTableContent(editor);\n                removeTableContent.remove(range);\n                editor.selectRange(range);\n            }\n\n            if (browser.webkit && !range.collapsed && selected(body, range)) {\n                body.innerHTML = \"\";\n            }\n\n            if (editor.immutables && editorNS.Immutables.immutablesContext(range)) {\n                var backspaceHandler = new editorNS.BackspaceHandler(editor);\n                backspaceHandler.deleteSelection(range);\n            }\n\n            keyboard.startTyping(function() {\n                that._removeBomSpan();\n                that.endRestorePoint = editorNS._finishUpdate(editor, that.startRestorePoint);\n            });\n\n            return true;\n        }\n\n        return false;\n    },\n\n    keyup: function(e) {\n        var keyboard = this.editor.keyboard;\n\n        this.editor.trigger(\"keyup\", e);\n\n        if (keyboard.isTypingInProgress()) {\n            keyboard.endTyping();\n            return true;\n        }\n\n        return false;\n    },\n\n    _removeBomSpan: function() {\n        var node = this.editor.getRange().commonAncestorContainer;\n\n        if (!dom.emptyNode(node)) {\n            if (node.nodeType === 3) {\n                node = node.parentNode;\n            }\n\n            if (dom.insignificant(node)) {\n                // typing in an insignificant node\n                // make it significant\n                node.textContent = dom.stripBom(node.textContent);\n                dom.unwrap(node);\n            }\n        }\n    }\n});\n\nvar BackspaceHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n    _addCaret: function(container) {\n        var caret = dom.create(this.editor.document, \"a\");\n\n        // Only if not Chrome: Make sure to include cared in the formatted inline node\n        if (!kendo.support.browser.chrome && container.firstChild &&\n            container.firstChild.nodeType === nodeTypes.ELEMENT_NODE) {\n\n            container = container.firstChild;\n        }\n\n        dom.insertAt(container, caret, 0);\n        dom.stripBomNode(caret.previousSibling);\n        dom.stripBomNode(caret.nextSibling);\n        return caret;\n    },\n    _restoreCaret: function(caret) {\n        var range = this.editor.createRange();\n\n        if (!caret.nextSibling && dom.isDataNode(caret.previousSibling)) {\n            range.setStart(caret.previousSibling, caret.previousSibling.length);\n        } else {\n            range.setStartAfter(caret);\n        }\n\n        range.collapse(true);\n        this.editor.selectRange(range);\n        dom.remove(caret);\n    },\n    _handleDelete: function(range) {\n        var node = range.endContainer;\n        var block = dom.closestEditableOfType(node, dom.blockElements);\n\n        if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n            // join with next sibling\n            var next = dom.next(block);\n            if (!next || dom.name(next) != \"p\") {\n                return false;\n            }\n\n            var caretPlaceholder = dom.significantChildNodes(next)[0];\n            caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder)) ? caretPlaceholder : next;\n            var caret = this._addCaret(caretPlaceholder);\n\n            this._merge(block, next);\n\n            this._restoreCaret(caret);\n\n            return true;\n        }\n\n        return false;\n    },\n    _cleanBomBefore: function(range) {\n        var offset = range.startOffset;\n        var node = range.startContainer;\n        var text = node.nodeValue;\n        var count = 0;\n        while (offset - count >= 0 && text[offset - count - 1] == \"\\ufeff\") {\n            count++;\n        }\n\n        if (count > 0) {\n            node.deleteData(offset - count, count);\n\n            range.setStart(node, Math.max(0, offset - count));\n            range.collapse(true);\n\n            this.editor.selectRange(range);\n        }\n    },\n    _handleBackspace: function(range) {\n        var node = range.startContainer;\n        var li = dom.closestEditableOfType(node, ['li']);\n        var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n        var editor = this.editor;\n        var previousSibling;\n\n        if (dom.isDataNode(node)) {\n            if (range.collapsed && /^\\s[\\ufeff]+$/.test(node.nodeValue)) {\n                range.setStart(node, 0);\n                range.setEnd(node, node.length);\n                editor.selectRange(range);\n                return false;\n            }\n            this._cleanBomBefore(range);\n        }\n\n        previousSibling = getSibling(block, PREVIOUS_SIBLING, function(sibling) {\n            return !dom.htmlIndentSpace(sibling);\n        });\n\n        //deleting the first list item with empty content in IE results in invalid range\n        if (range.collapsed && range.startOffset !== range.endOffset && range.startOffset < 0) {\n            range.startOffset = 0;\n            range.endOffset = 0;\n            editor.selectRange(range);\n        }\n\n        var startAtLi = li && editorNS.RangeUtils.isStartOf(range, li);\n        var liIndex = li && $(li).index();\n        var startAtNonFirstLi = startAtLi && liIndex > 0;\n        if (startAtNonFirstLi) {\n            block = li;\n            previousSibling = dom.prev(li);\n        }\n\n        if (block && previousSibling && dom.is(previousSibling, 'table') && editorNS.RangeUtils.isStartOf(range, block)) {\n            if (block.innerText === '') {\n                block.innerHTML = '\\ufeff';\n            }\n            return true;\n        }\n\n        // outdent\n        if (editorNS.RangeUtils.isStartOf(range, block) && parseInt(block.style.marginLeft,10) > 0) {\n            editor.exec(\"outdent\");\n            return true;\n        }\n\n        // unwrap block\n        if ((block && previousSibling && editorNS.RangeUtils.isStartOf(range, block)) || startAtNonFirstLi) {\n            var caretPlaceholder = dom.significantChildNodes(block)[0];\n            caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder)) ? caretPlaceholder : block;\n            var caret = this._addCaret(caretPlaceholder);\n            this._merge(previousSibling, block);\n            this._restoreCaret(caret);\n\n            return true;\n        }\n\n        // unwrap li element\n        if (startAtLi && liIndex === 0) {\n            var child = li.firstChild;\n            if (!child) {\n                li.innerHTML = editorNS.emptyElementContent;\n                child = li.firstChild;\n            }\n\n            var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), \"p\");\n            range.selectNodeContents(li);\n            formatter.toggle(range);\n\n            if (dom.insignificant(child)) {\n                range.setStartBefore(child);\n            } else {\n                range.setStart(child, 0);\n            }\n\n            editor.selectRange(range);\n\n            return true;\n        }\n\n        var rangeStartNode = node.childNodes[range.startOffset - 1];\n        var linkRange = range;\n        var anchor = rangeStartNode && dom.closestEditableOfType(rangeStartNode, ['a']);\n        var previousNode = getSibling(rangeStartNode || node, PREVIOUS_SIBLING, function(sibling) {\n            return !dom.isDataNode(sibling) || (!dom.isBom(sibling) && sibling.length > 0);\n        });\n        if (anchor || ((range.startOffset === 0 || rangeStartNode) && dom.is(previousNode, \"a\"))) {\n            anchor = anchor || previousNode;\n            linkRange = editor.createRange();\n            linkRange.setStart(anchor, anchor.childNodes.length);\n            linkRange.collapse(true);\n        }\n\n        anchor = anchor || dom.closestEditableOfType(rangeStartNode || linkRange.startContainer, ['a']);\n        var isEndOfLink = anchor && editorNS.RangeUtils.isEndOf(linkRange, anchor);\n        if (isEndOfLink) {\n            var command = new editorNS.UnlinkCommand({ range: linkRange, body: editor.body, immutables: !!editor.immutables });\n            editor.execCommand(command);\n            editor._selectionChange();\n        }\n        return false;\n    },\n    _handleSelection: function(range) {\n        var ancestor = range.commonAncestorContainer;\n        var table = dom.closest(ancestor, \"table\");\n        var emptyParagraphContent = editorNS.emptyElementContent;\n        var editor = this.editor;\n        var parentElementOrNode;\n\n        if (inTable(range)) {\n            var removeTableContent = new RemoveTableContent(editor);\n            removeTableContent.remove(range);\n            editor.selectRange(range);\n            return true;\n        }\n\n        var marker = new Marker();\n        marker.add(range, false);\n\n        if (range.commonAncestorContainer === editor.body) {\n            this._surroundFullyContent(marker, range);\n        }\n\n        if (editor.immutables) {\n            this._handleImmutables(marker);\n        }\n\n        this._surroundFullySelectedAnchor(marker, range);\n\n        range.setStartAfter(marker.start);\n        range.setEndBefore(marker.end);\n\n        var start = range.startContainer;\n        var end = range.endContainer;\n\n        range.deleteContents();\n\n        if (end.tagName.toLocaleLowerCase() === \"li\" && dom.emptyNode(end)) {\n            range.selectNode(end);\n            range.deleteContents();\n        }\n\n        if (table && $(table).text() === \"\") {\n            range.selectNode(table);\n            range.deleteContents();\n        }\n\n        ancestor = range.commonAncestorContainer;\n\n        if (dom.name(ancestor) === \"p\" && ancestor.innerHTML === \"\") {\n            ancestor.innerHTML = emptyParagraphContent;\n            range.setStart(ancestor, 0);\n        }\n\n        this._join(start, end);\n\n        dom.insertAfter(editor.document.createTextNode(\"\\ufeff\"), marker.start);\n        marker.remove(range);\n\n        start = range.startContainer;\n        if (dom.name(start) == \"tr\") {\n            start = start.childNodes[Math.max(0, range.startOffset - 1)];\n            range.setStart(start, dom.getNodeLength(start));\n        }\n\n        range.collapse(true);\n\n        editor.selectRange(range);\n\n        parentElementOrNode = start.parentElement || start.parentNode;\n\n        if (dom.isDataNode(start) && !dom.emptyNode(parentElementOrNode)) {\n            this._cleanBomBefore(range);\n        }\n\n        return true;\n    },\n    _handleImmutables: function(marker) {\n        var immutableParent = editorNS.Immutables.immutableParent;\n        var startImmutable = immutableParent(marker.start);\n        var endImmutable = immutableParent(marker.start);\n        if (startImmutable) {\n            dom.insertBefore(marker.start, startImmutable);\n        }\n        if (endImmutable) {\n            dom.insertAfter(marker.end, endImmutable);\n        }\n        if (startImmutable) {\n            dom.remove(startImmutable);\n        }\n        if (endImmutable && endImmutable.parentNode) {\n            dom.remove(endImmutable);\n        }\n    },\n    _surroundFullyContent: function(marker, range) {\n        var children = range.commonAncestorContainer.children,\n            startParent = children[0],\n            endParent = children[children.length - 1];\n\n        this._moveMarker(marker, range, startParent, endParent);\n    },\n    _surroundFullySelectedAnchor: function(marker, range) {\n        var start = marker.start,\n            startParent = $(start).closest(\"a\").get(0),\n            end = marker.end,\n            endParent = $(end).closest(\"a\").get(0);\n\n        this._moveMarker(marker, range, startParent, endParent);\n    },\n    _moveMarker: function(marker, range, startParent, endParent) {\n        var start = marker.start,\n            end = marker.end;\n\n        if (startParent && RangeUtils.isStartOf(range, startParent)) {\n            dom.insertBefore(start, startParent);\n        }\n\n        if (endParent && RangeUtils.isEndOf(range, endParent)) {\n            dom.insertAfter(end, endParent);\n        }\n    },\n    _root: function(node) {\n        while (node && dom.name(node) != \"body\" && node.parentNode && dom.name(node.parentNode) != \"body\") {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n    _join: function(start, end) {\n        start = this._root(start);\n        end = this._root(end);\n\n        if (start != end && dom.is(end, \"p\")) {\n            this._merge(start, end);\n        }\n    },\n    _merge: function(dest, src) {\n        dom.removeTrailingBreak(dest);\n\n        while (dest && src.firstChild) {\n            if (dest.nodeType == 1) {\n                dest = dom.list(dest) ? dest.children[dest.children.length - 1] : dest;\n\n                if (dest) {\n                    dest.appendChild(src.firstChild);\n                }\n            } else if (dest.nodeType === nodeTypes.TEXT_NODE) {\n                this._mergeWithTextNode(dest, src.firstChild);\n            } else {\n                dest.parentNode.appendChild(src.firstChild);\n            }\n        }\n\n        dom.remove(src);\n    },\n\n    _mergeWithTextNode: function(textNode, appendedNode) {\n        if (textNode && textNode.nodeType === nodeTypes.TEXT_NODE) {\n            if (textNode.nextSibling && this._isCaret(textNode.nextSibling)) {\n                dom.insertAfter(appendedNode, textNode.nextSibling);\n            }\n            else {\n                dom.insertAfter(appendedNode, textNode);\n            }\n        }\n    },\n\n    _isCaret: function(element) {\n        return $(element).is(\"a\");\n    },\n\n    keydown: function(e) {\n        var method, startRestorePoint;\n        var editor = this.editor;\n        var range = editor.getRange();\n        var keyCode = e.keyCode;\n        var keys = kendo.keys;\n        var backspace = keyCode === keys.BACKSPACE;\n        var del = keyCode == keys.DELETE;\n\n        if (editor.immutables && editor.immutables.keydown(e, range)) {\n            return;\n        }\n\n        if ((backspace || del) && !range.collapsed) {\n            method = \"_handleSelection\";\n        } else if (backspace) {\n            method = \"_handleBackspace\";\n        } else if (del) {\n            method = \"_handleDelete\";\n        }\n\n        if (!method) {\n            return;\n        }\n\n        startRestorePoint = new RestorePoint(range, editor.body);\n\n        if (this[method](range)) {\n            e.preventDefault();\n\n            editorNS._finishUpdate(editor, startRestorePoint);\n        }\n    },\n    deleteSelection: function(range) {\n        this._handleSelection(range);\n    },\n    keyup: $.noop\n});\n\nvar SystemHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n        this.systemCommandIsInProgress = false;\n    },\n\n    createUndoCommand: function() {\n        this.startRestorePoint = this.endRestorePoint = editorNS._finishUpdate(this.editor, this.startRestorePoint);\n    },\n\n    changed: function() {\n        if (this.startRestorePoint) {\n            return this.startRestorePoint.html != this.editor.body.innerHTML;\n        }\n\n        return false;\n    },\n\n    keydown: function(e) {\n        var that = this,\n            editor = that.editor,\n            keyboard = editor.keyboard;\n\n        if (keyboard.isModifierKey(e)) {\n\n            if (keyboard.isTypingInProgress()) {\n                keyboard.endTyping(true);\n            }\n\n            that.startRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n            return true;\n        }\n\n        if (keyboard.isSystem(e)) {\n            that.systemCommandIsInProgress = true;\n\n            if (that.changed()) {\n                that.systemCommandIsInProgress = false;\n                that.createUndoCommand();\n            }\n\n            return true;\n        }\n\n        return false;\n    },\n\n    keyup: function() {\n        var that = this;\n\n        if (that.systemCommandIsInProgress && that.changed()) {\n            that.systemCommandIsInProgress = false;\n            that.createUndoCommand();\n            return true;\n        }\n\n        return false;\n    }\n});\n\nvar SelectAllHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n\n    keydown: function(e) {\n        if (!browser.webkit || e.isDefaultPrevented() ||\n            !(e.ctrlKey && e.keyCode == 65 && !e.altKey && !e.shiftKey)) {\n            return;\n        }\n        if (this.editor.options.immutables) {\n            this._toSelectableImmutables();\n        }\n        this._selectEditorBody();\n    },\n\n    _selectEditorBody: function() {\n        var editor = this.editor;\n        var range = editor.getRange();\n        range.selectNodeContents(editor.body);\n\n        setTimeout(function() {\n            editor.selectRange(range);\n        });\n    },\n\n    _toSelectableImmutables: function() {\n        var editor = this.editor,\n            body = editor.body,\n            immutable = editorNS.Immutables.immutable,\n            emptyTextNode = dom.emptyTextNode,\n            first = body.firstChild,\n            last = body.lastChild;\n\n        while (emptyTextNode(first)) {\n            first = first.nextSibling;\n        }\n\n        while (emptyTextNode(last)) {\n            last = last.previousSibling;\n        }\n\n        if (first && immutable(first)) {\n            $(bomSpan).prependTo(body);\n        }\n\n        if (last && immutable(last)) {\n            $(bomSpan).appendTo(body);\n        }\n    },\n\n    keyup: $.noop\n});\n\nvar Keyboard = Class.extend({\n    init: function(handlers) {\n        this.handlers = handlers;\n        this.typingInProgress = false;\n    },\n\n    isCharacter: function(keyCode) {\n        return (keyCode >= 48 && keyCode <= 90) || (keyCode >= 96 && keyCode <= 111) ||\n               (keyCode >= 186 && keyCode <= 192) || (keyCode >= 219 && keyCode <= 222) ||\n               keyCode == 229;\n    },\n\n    toolFromShortcut: function(tools, e) {\n        var key = String.fromCharCode(e.keyCode),\n            toolName,\n            toolOptions,\n            modifier = this._getShortcutModifier(e, navigator.platform);\n\n        for (toolName in tools) {\n            toolOptions = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n            if ((toolOptions.key == key || toolOptions.key == e.keyCode) &&\n                toolOptions.ctrl == modifier &&\n                toolOptions.alt == e.altKey &&\n                toolOptions.shift == e.shiftKey) {\n                return toolName;\n            }\n        }\n    },\n\n    _getShortcutModifier: function(e, platform) {\n        var mac = platform.toUpperCase().indexOf('MAC') >= 0;\n        return mac ? e.metaKey : e.ctrlKey;\n    },\n\n    toolsFromShortcut: function(tools, e) {\n        var key = String.fromCharCode(e.keyCode),\n            toolName,\n            o,\n            matchesKey,\n            found = [];\n        var matchKey = function(toolKey) { return toolKey == key || toolKey == e.keyCode || toolKey == e.charCode; };\n\n        for (toolName in tools) {\n            o = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n            matchesKey = Array.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\n            if (matchesKey &&\n                o.ctrl == e.ctrlKey &&\n                o.alt == e.altKey &&\n                o.shift == e.shiftKey) {\n                found.push(tools[toolName]);\n            }\n        }\n\n        return found;\n    },\n\n    isTypingKey: function(e) {\n        var keyCode = e.keyCode;\n        return (this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey) ||\n               keyCode == 32 || keyCode == 13 || keyCode == 8 ||\n               (keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey);\n    },\n\n    isModifierKey: function(e) {\n        var keyCode = e.keyCode;\n        return (keyCode == 17 && !e.shiftKey && !e.altKey) ||\n               (keyCode == 16 && !e.ctrlKey && !e.altKey) ||\n               (keyCode == 18 && !e.ctrlKey && !e.shiftKey);\n    },\n\n    isSystem: function(e) {\n        return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n    },\n\n    startTyping: function(callback) {\n        this.onEndTyping = callback;\n        this.typingInProgress = true;\n    },\n\n    stopTyping: function() {\n        if (this.typingInProgress && this.onEndTyping) {\n            this.onEndTyping();\n        }\n        this.typingInProgress = false;\n    },\n\n    endTyping: function(force) {\n        var that = this;\n        that.clearTimeout();\n        if (force) {\n            that.stopTyping();\n        } else {\n            that.timeout = window.setTimeout(that.stopTyping.bind(that), 1000);\n        }\n    },\n\n    isTypingInProgress: function() {\n        return this.typingInProgress;\n    },\n\n    clearTimeout: function() {\n        window.clearTimeout(this.timeout);\n    },\n\n    notify: function(e, what) {\n        var i, handlers = this.handlers;\n\n        for (i = 0; i < handlers.length; i++) {\n            if (handlers[i][what](e)) {\n                break;\n            }\n        }\n    },\n\n    keydown: function(e) {\n        this.notify(e, 'keydown');\n    },\n\n    keyup: function(e) {\n        this.notify(e, 'keyup');\n    }\n});\n\nextend(editorNS, {\n    TypingHandler: TypingHandler,\n    SystemHandler: SystemHandler,\n    BackspaceHandler: BackspaceHandler,\n    SelectAllHandler: SelectAllHandler,\n    Keyboard: Keyboard\n});\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/plugins/exportpdf',[ \"../command\" ], f);\n})(function() {\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        editorNS = kendo.ui.editor,\n        Command = editorNS.Command,\n        EditorUtils = editorNS.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Tool = editorNS.Tool,\n        ToolTemplate = editorNS.ToolTemplate,\n        extend = $.extend;\n\nvar ExportPdfCommand = Command.extend({\n    init: function(options) {\n        this.async = true;\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var that = this;\n        var range = that.lockRange(true);\n        var editor = that.editor;\n\n        editor._destroyResizings();\n\n        editor.saveAsPDF().then(function() {\n            that.releaseRange(range);\n            editor._initializeColumnResizing();\n            editor._initializeRowResizing();\n            editor._initializeElementResizing();\n        });\n    }\n});\n\nextend(editorNS, {\n    ExportPdfCommand: ExportPdfCommand\n});\n\nregisterTool(\"pdf\", new Tool({ command: ExportPdfCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Export PDF\" }) }));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/plugins/print',[ \"../command\" ], f);\n})(function() {\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        editorNS = kendo.ui.editor,\n        Command = editorNS.Command,\n        EditorUtils = editorNS.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Tool = editorNS.Tool,\n        ToolTemplate = editorNS.ToolTemplate,\n        extend = $.extend;\n\nvar PrintCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n\n        this.managesUndoRedo = true;\n    },\n\n    exec: function() {\n        var editor = this.editor;\n\n        if (kendo.support.browser.msie) {\n            editor.document.execCommand(\"print\", false, null);\n        } else if (editor.window.print) {\n            editor.window.print();\n        }\n    }\n});\n\nextend(editorNS, {\n    PrintCommand: PrintCommand\n});\n\nregisterTool(\"print\", new Tool({ command: PrintCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Print\" }) }));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/plugins/formatpainter',[ \"../command\" ], f);\n})(function() {\n\n(function($) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    Command = Editor.Command,\n    ToolTemplate = Editor.ToolTemplate,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    registerTool = EditorUtils.registerTool;\n\nvar CopyFormatCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var range = this.lockRange(true);\n        this.inlineStyles = [];\n        this.blockStyles = [];\n        this.collectStyles(range);\n        this.editor.inlineStyles = this.inlineStyles;\n        this.editor.blockStyles = this.blockStyles;\n        this.releaseRange(range);\n    },\n\n    collectStyles: function(range) {\n        var rangeNodes = RangeUtils.nodes(range);\n        var node;\n\n        if (rangeNodes.length === 1) {\n            node = rangeNodes[0].parentNode;\n        } else {\n            node = range.startContainer;\n        }\n\n        while (node && !dom.is(node, \"body\") && node.getAttribute(\"data-role\") !== \"editor\") {\n            if (dom.isBlock(node)) {\n                this.populateStyles(node, \"blockStyles\");\n                if (dom.is(node, \"li\")) {\n                    node = node.parentNode;\n                } else {\n                    node = null;\n                }\n            } else {\n                this.populateStyles(node, \"inlineStyles\");\n                node = node.parentNode;\n            }\n        }\n    },\n\n    populateStyles: function(node, destination) {\n        var styles = node.style;\n        var attributes = node.attributes;\n        var nodeStyles = {\n            tags: [ node.tagName ],\n            attr: {\n                style: {}\n            }\n        };\n        var styleValue, styleKey, attributeKey, attributeValue, i;\n\n        for (i = 0; styles && i < styles.length; i++) {\n            styleKey = styles[i];\n            styleValue = styles[styleKey];\n            nodeStyles.attr.style[styleKey] = styleValue;\n        }\n\n        for (i = 0; attributes && i < attributes.length; i++) {\n            attributeKey = attributes[i].nodeName;\n            attributeValue = attributes[i].nodeValue;\n            if (attributeKey === \"style\") {\n                continue;\n            } else if (attributeKey === \"class\") {\n                nodeStyles.attr.className = attributeValue;\n            } else {\n                nodeStyles.attr[attributeKey] = attributeValue;\n            }\n        }\n\n        this[destination].push(nodeStyles);\n    }\n});\n\nvar ApplyFormatCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var range = this.lockRange(true);\n        var markers = RangeUtils.getMarkers(range);\n        var editor = this.editor;\n        var inlineStyles = editor.inlineStyles;\n        var blockStyles = editor.blockStyles;\n        var nodes;\n\n        if ((!inlineStyles || inlineStyles.length === 0) && (!blockStyles || blockStyles.length === 0)) {\n            return;\n        }\n\n        if (markers.length === 3) {\n            this.marker.removeCaret(range);\n            this.marker.caret = null;\n        }\n\n        this.removeEmptyElementsFromRange(range);\n        nodes = RangeUtils.nodes(range);\n        this.cleanInlineParents(nodes);\n        dom.normalize(range.commonAncestorContainer);\n\n        if (markers.length === 2) {\n            range.setStartAfter(markers[0]);\n            range.setEndBefore(markers[1]);\n        } else {\n            range.setStartBefore(nodes[0]);\n            range.setEndAfter(nodes[0]);\n        }\n\n        nodes = RangeUtils.nodes(range);\n\n        if (nodes && blockStyles && blockStyles.length) {\n            this.applyBlockStyles(nodes, blockStyles);\n        }\n\n        if (nodes && inlineStyles && inlineStyles.length) {\n            this.applyInlineStyles(nodes, inlineStyles);\n        }\n\n        this.releaseRange(range);\n    },\n\n    removeEmptyElementsFromRange: function(range) {\n        var isEmptyInline = function(node) {\n            return dom.isInline(node) && !node.firstChild && !dom.isMarker(node);\n        };\n        var emptyElements, i;\n\n        emptyElements = RangeUtils.getAll(range, isEmptyInline);\n\n        if (emptyElements && emptyElements.length > 0) {\n            for (i = 0; i < emptyElements.length; i++) {\n                emptyElements[i].parentNode.removeChild(emptyElements[i]);\n            }\n        }\n    },\n\n    cleanInlineParents: function(nodes) {\n        var i, node, parent, children, j, child, newNode;\n\n        for (i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n            parent = node.parentNode;\n\n            if (this.immutableParent(node)) {\n                continue;\n            }\n\n            while (parent && dom.isInline(parent)) {\n                children = parent.childNodes;\n\n                for (j = 0; j < children.length; j++) {\n                    child = children[j];\n\n                    if (!dom.isMarker(child) && child !== node) {\n                        newNode = parent.cloneNode(true);\n                        newNode.innerHTML = \"\";\n                        dom.wrap(child, newNode);\n                    }\n                }\n\n                dom.unwrap(parent);\n                parent = node.parentNode;\n            }\n        }\n    },\n\n    applyBlockStyles: function(nodes, blockStyles) {\n        var formatTag = blockStyles[0].tags[0];\n        var attr = blockStyles[0].attr;\n        var document = this.editor.document;\n        var i, len, node, wrapper, blockParent, outerWrapper;\n        var previousNodes, nextNodes, previous, next, prevWrapper, nextWrapper, child, j, listItems;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            node = nodes[i];\n\n            if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                continue;\n            }\n\n            blockParent = dom.blockParentOrBody(node);\n\n            if (blockParent.tagName !== \"BODY\" && blockParent.tagName !== formatTag) {\n                if (blockParent.tagName !== \"LI\" && blockParent.tagName !== \"TD\" && blockParent.tagName !== \"TH\") {\n                    previousNodes = [];\n                    nextNodes = [];\n                    previous = node.previousSibling;\n                    next = node.nextSibling;\n\n                    while (previous) {\n                        if (!dom.isMarker(previous)) {\n                            previousNodes.push(previous);\n                        }\n\n                        previous = previous.previousSibling;\n                    }\n\n                    if (previousNodes.length) {\n                        prevWrapper = blockParent.cloneNode(true);\n                        prevWrapper.innerHTML = \"\";\n                        dom.insertBefore(prevWrapper, previousNodes[0]);\n\n                        for (j = 0; j < previousNodes.length; j++) {\n                            child = previousNodes[j];\n                            dom.insertAt(prevWrapper, child, 0);\n                        }\n                    }\n\n                    while (next) {\n                        if (!dom.isMarker(next)) {\n                            nextNodes.push(next);\n                        }\n\n                        next = next.nextSibling;\n                    }\n\n                    if (nextNodes.length) {\n                        nextWrapper = blockParent.cloneNode(true);\n                        nextWrapper.innerHTML = \"\";\n                        dom.insertBefore(nextWrapper, nextNodes[0]);\n\n                        for (j = 0; j < nextNodes.length; j++) {\n                            child = nextNodes[j];\n                            nextWrapper.appendChild(child);\n                        }\n                    }\n\n                    dom.unwrap(blockParent);\n                }\n\n                wrapper = dom.create(document, formatTag, attr);\n                dom.wrap(node, wrapper);\n            } else if (blockParent.tagName === formatTag) {\n                dom.attr(blockParent, attr);\n            }\n        }\n\n        if (blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\" && formatTag === \"LI\") {\n            listItems = [];\n\n            while (dom.is(wrapper, \"li\")) {\n                listItems.push(wrapper);\n                wrapper = dom.prev(wrapper);\n            }\n\n            outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n            dom.insertBefore(outerWrapper, listItems[listItems.length - 1]);\n            outerWrapper.appendChild(listItems[0]);\n\n            for (i = 1, len = listItems.length; i < len; i++) {\n                dom.insertBefore(listItems[i], outerWrapper.firstChild);\n            }\n        } else if (blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\") {\n            outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n            dom.wrap(wrapper, outerWrapper);\n        }\n    },\n\n    applyInlineStyles: function(nodes, inlineStyles) {\n        var document = this.editor.document;\n        var currentStyle, createdNode, topNode, i, newNode, node;\n\n        for (i = 0; i < inlineStyles.length; i++) {\n            currentStyle = inlineStyles[i];\n            createdNode = dom.create(document, currentStyle.tags[0], currentStyle.attr);\n\n            if (topNode) {\n                createdNode.appendChild(topNode);\n            }\n\n            topNode = createdNode;\n        }\n\n        if (topNode) {\n            for (i = 0; i < nodes.length; i++) {\n                node = nodes[i];\n                if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                    continue;\n                }\n                newNode = topNode.cloneNode(true);\n                dom.insertBefore(newNode, node);\n\n                while (newNode.children && newNode.children.length) {\n                    newNode = newNode.children[0];\n                }\n\n                newNode.appendChild(node);\n            }\n        }\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    immutableParent: function(node) {\n        return this.immutables() && Editor.Immutables.immutableParent(node);\n    }\n});\n\nvar CopyFormatTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function(commandArguments) {\n        return new CopyFormatCommand(commandArguments);\n    }\n});\n\nvar ApplyFormatTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function(commandArguments) {\n        return new ApplyFormatCommand(commandArguments);\n    }\n});\n\n$.extend(Editor, {\n    CopyFormatCommand: CopyFormatCommand,\n    ApplyFormatCommand: ApplyFormatCommand,\n    CopyFormatTool: CopyFormatTool,\n    ApplyFormatTool: ApplyFormatTool\n});\n\nregisterTool(\"copyFormat\", new CopyFormatTool({ template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Copy format\" }) }));\nregisterTool(\"applyFormat\", new ApplyFormatTool({ template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Apply format\" }) }));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/resizing/resizing-utils',[\"../main\"], f);\n})(function() {\n\n(function(kendo, undefined) {\n    var global = window;\n    var math = global.Math;\n    var min = math.min;\n    var max = math.max;\n    var parseFloat = global.parseFloat;\n\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n\n    var Editor = kendo.ui.editor;\n\n    var PERCENTAGE = \"%\";\n    var PIXEL = \"px\";\n    var REGEX_NUMBER_IN_PERCENTAGES = /(\\d+)(\\.?)(\\d*)%/;\n    var REGEX_NUMBER_IN_PIXELS = /(\\d+)(\\.?)(\\d*)px/;\n    var STRING = \"string\";\n\n    function constrain(options) {\n        var value = options.value;\n        var lowerBound = options.min;\n        var upperBound = options.max;\n\n        return max(min(parseFloat(value), parseFloat(upperBound)), parseFloat(lowerBound));\n    }\n\n    function getScrollBarWidth(element) {\n        if (element && !$(element).is(\"body\") && element.scrollHeight > element.clientHeight) {\n            return kendo.support.scrollbar();\n        }\n\n        return 0;\n    }\n\n    function calculatePercentageRatio(value, total) {\n        if (inPercentages(value)) {\n            return parseFloat(value);\n        }\n        else {\n            return ((parseFloat(value) / total) * 100);\n        }\n    }\n\n    function inPercentages(value) {\n        return (typeof(value) === STRING && REGEX_NUMBER_IN_PERCENTAGES.test(value));\n    }\n\n    function inPixels(value) {\n        return (typeof(value) === STRING && REGEX_NUMBER_IN_PIXELS.test(value));\n    }\n\n    function toPercentages(value) {\n        return (parseFloat(value) + PERCENTAGE);\n    }\n\n    function toPixels(value) {\n        return (parseFloat(value) + PIXEL);\n    }\n\n    var ResizingUtils = {\n        constrain: constrain,\n        getScrollBarWidth: getScrollBarWidth,\n        calculatePercentageRatio: calculatePercentageRatio,\n        inPercentages: inPercentages,\n        inPixels: inPixels,\n        toPercentages: toPercentages,\n        toPixels: toPixels\n    };\n\n    extend(Editor, {\n        ResizingUtils: ResizingUtils\n    });\n})(window.kendo);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/resizing/table-element-resizing',[\"../main\", \"kendo.resizable\", \"./resizing-utils\"], f);\n})(function() {\n\n(function(kendo, undefined) {\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n    var noop = $.noop;\n\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n\n    var KEY_DOWN = \"keydown\";\n    var MOUSE_DOWN = \"mousedown\";\n    var MOUSE_ENTER = \"mouseenter\";\n    var MOUSE_LEAVE = \"mouseleave\";\n    var MOUSE_MOVE = \"mousemove\";\n    var MOUSE_UP = \"mouseup\";\n\n    var COMMA = \",\";\n    var DOT = \".\";\n    var LAST_CHILD = \":last-child\";\n\n    var TABLE = \"table\";\n\n    var TableElementResizing = Class.extend({\n        init: function(element, options) {\n            var that = this;\n\n            that.options = extend({}, that.options, options);\n\n            that.options.tags = Array.isArray(that.options.tags) ? that.options.tags : [that.options.tags];\n\n            if ($(element).is(TABLE)) {\n                that.element = element;\n                that._attachEventHandlers();\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n            var eventNamespace = that.options.eventNamespace;\n\n            if (that.element) {\n                $(that.element).off(eventNamespace);\n                that.element = null;\n            }\n\n            $(that.options.rootElement).off(KEY_DOWN + eventNamespace);\n\n            that._destroyResizeHandle();\n        },\n\n        options: {\n            tags: [],\n            min: 0,\n            rootElement: null,\n            eventNamespace: \"\",\n            rtl: false,\n            handle: {\n                dataAttribute: \"\",\n                height: 0,\n                width: 0,\n                classNames: {},\n                template: \"\"\n            }\n        },\n\n        _attachEventHandlers: function() {\n            var that = this;\n            var options = that.options;\n\n            $(that.element).on(MOUSE_MOVE + options.eventNamespace, options.tags.join(COMMA), that.detectElementBorderHovering.bind(that));\n        },\n\n        resizingInProgress: function() {\n            var that = this;\n            var resizable = that._resizable;\n\n            if (resizable) {\n                return !!resizable.resizing;\n            }\n\n            return false;\n        },\n\n        resize: noop,\n\n        detectElementBorderHovering: function(e) {\n            var that = this;\n            var options = that.options;\n            var handleOptions = options.handle;\n            var tableElement = $(e.currentTarget);\n            var resizeHandle = that.resizeHandle;\n            var dataAttribute = handleOptions.dataAttribute;\n\n            if (!that.resizingInProgress()) {\n                if (!tableElement.is(LAST_CHILD) && that.elementBorderHovered(tableElement, e)) {\n                    if (resizeHandle) {\n                        if (resizeHandle.data(dataAttribute) && resizeHandle.data(dataAttribute) !== tableElement[0]) {\n                            that.showResizeHandle(tableElement, e);\n                        }\n                    }\n                    else {\n                        that.showResizeHandle(tableElement, e);\n                    }\n                }\n                else {\n                    if (resizeHandle) {\n                        that._destroyResizeHandle();\n                    }\n                }\n            }\n        },\n\n        elementBorderHovered: noop,\n\n        showResizeHandle: function(tableElement, e) {\n            var that = this;\n\n            if (e.buttons !== 0) {\n                //prevent showing when a mouse button is still being pressed\n                return;\n            }\n\n            that._initResizeHandle();\n            that.setResizeHandlePosition(tableElement);\n            that.setResizeHandleDimensions();\n            that.setResizeHandleDataAttributes(tableElement[0]);\n            that._attachResizeHandleEventHandlers();\n\n            that._initResizable(tableElement);\n\n            that._hideResizeMarker();\n            that.resizeHandle.show();\n        },\n\n        _initResizeHandle: function() {\n            var that = this;\n            var options = that.options;\n\n            that._destroyResizeHandle();\n\n            that.resizeHandle = $(options.handle.template).appendTo(options.rootElement);\n        },\n\n        setResizeHandlePosition: noop,\n\n        setResizeHandleDimensions: noop,\n\n        setResizeHandleDataAttributes: function(tableElement) {\n            var that = this;\n\n            that.resizeHandle.data(that.options.handle.dataAttribute, tableElement);\n        },\n\n        _attachResizeHandleEventHandlers: function() {\n            var that = this;\n            var options = that.options;\n            var eventNamespace = options.eventNamespace;\n            var markerClass = options.handle.classNames.marker;\n            var resizeHandle = that.resizeHandle;\n\n            that.resizeHandle\n                .on(MOUSE_DOWN + eventNamespace, function() {\n                    resizeHandle.find(DOT + markerClass).show();\n                })\n                .on(MOUSE_UP + eventNamespace, function() {\n                    resizeHandle.find(DOT + markerClass).hide();\n                });\n        },\n\n        _hideResizeMarker: function() {\n            var that = this;\n\n            that.resizeHandle.find(DOT + that.options.handle.classNames.marker).hide();\n        },\n\n        _destroyResizeHandle: function() {\n            var that = this;\n\n            if (that.resizeHandle) {\n                that._destroyResizable();\n                that.resizeHandle.off(that.options.eventNamespace).remove();\n                that.resizeHandle = null;\n            }\n        },\n\n        _initResizable: function(tableElement) {\n            var that = this;\n\n            if (!that.resizeHandle) {\n                return;\n            }\n\n            that._destroyResizable();\n\n            that._resizable = new kendo.ui.Resizable(tableElement, {\n                draggableElement: that.resizeHandle[0],\n                start: that.onResizeStart.bind(that),\n                resize: that.onResize.bind(that),\n                resizeend: that.onResizeEnd.bind(that)\n            });\n        },\n\n        _destroyResizable: function() {\n            var that = this;\n\n            if (that._resizable) {\n                that._resizable.destroy();\n                that._resizable = null;\n            }\n        },\n\n        onResizeStart: function() {\n            this._disableKeyboard();\n        },\n\n        onResize: function(e) {\n            this.setResizeHandleDragPosition(e);\n        },\n\n        setResizeHandleDragPosition: noop,\n\n        onResizeEnd: function(e) {\n            var that = this;\n\n            that.resize(e);\n            that._destroyResizeHandle();\n            that._enableKeyboard();\n        },\n\n        _enableKeyboard: function() {\n            var options = this.options;\n\n            $(options.rootElement).off(KEY_DOWN + options.eventNamespace);\n        },\n\n        _disableKeyboard: function() {\n            var options = this.options;\n\n            $(options.rootElement).on(KEY_DOWN + options.eventNamespace, function(e) {\n                e.preventDefault();\n            });\n        },\n\n        _forceResizing: function(e) {\n            var resizable = this._resizable;\n\n            if (resizable && resizable.userEvents) {\n                resizable.userEvents._end(e);\n            }\n        }\n    });\n\n    var ResizingFactory = Class.extend({\n        create: function(editor, options) {\n            var that = this;\n            var resizingName = options.name;\n            var NS = options.eventNamespace;\n\n            $(editor.body)\n                .on(MOUSE_ENTER + NS, TABLE, function(e) {\n                    var table = e.currentTarget;\n                    var resizing = editor[resizingName];\n\n                    e.stopPropagation();\n\n                    if (resizing) {\n                        if (resizing.element !== table && !resizing.resizingInProgress()) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, table, options);\n                        }\n                    }\n                    else {\n                        that._initResizing(editor, table, options);\n                    }\n                })\n                .on(MOUSE_LEAVE + NS, TABLE, function(e) {\n                    var parentTable;\n                    var resizing = editor[resizingName];\n\n                    e.stopPropagation();\n\n                    if (resizing && !resizing.resizingInProgress() && !resizing.resizeHandle) {\n                        parentTable = $(resizing.element).parents(TABLE)[0];\n\n                        if (parentTable) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                })\n                .on(MOUSE_LEAVE + NS, function() {\n                    var resizing = editor[resizingName];\n\n                    if (resizing && !resizing.resizingInProgress()) {\n                        that._destroyResizing(editor, options);\n                    }\n                })\n                .on(MOUSE_UP + NS, function(e) {\n                    var resizing = editor[resizingName];\n                    var parentTable;\n\n                    if (resizing && resizing.resizingInProgress()) {\n                        parentTable = $(e.target).parents(TABLE)[0];\n\n                        if (parentTable) {\n                            resizing._forceResizing(e);\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                });\n        },\n\n        dispose: function(editor, options) {\n            $(editor.body).off(options.eventNamespace);\n        },\n\n        _initResizing: function(editor, tableElement, options) {\n            var resizingName = options.name;\n            var resizingType = options.type;\n\n            editor[resizingName] = new resizingType(tableElement, {\n                rtl: kendo.support.isRtl(editor.element),\n                rootElement: editor.body\n            });\n        },\n\n        _destroyResizing: function(editor, options) {\n            var resizingName = options.name;\n\n            if (editor[resizingName]) {\n                editor[resizingName].destroy();\n                editor[resizingName] = null;\n            }\n        }\n    });\n    ResizingFactory.current = new ResizingFactory();\n\n    TableElementResizing.create = function(editor, options) {\n        ResizingFactory.current.create(editor, options);\n    };\n\n    TableElementResizing.dispose = function(editor, options) {\n        ResizingFactory.current.dispose(editor, options);\n    };\n\n    extend(Editor, {\n        TableElementResizing: TableElementResizing\n    });\n\n})(window.kendo);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/resizing/column-resizing',[\"../main\", \"./resizing-utils\", \"./table-element-resizing\", \"../dom\"], f);\n})(function() {\n\n(function(kendo, undefined) {\n    var global = window;\n    var math = global.Math;\n    var abs = math.abs;\n\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n\n    var Editor = kendo.ui.editor;\n    var dom = Editor.Dom;\n    var TableElementResizing = Editor.TableElementResizing;\n    var ResizingUtils = Editor.ResizingUtils;\n    var constrain = ResizingUtils.constrain;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n    var inPercentages = ResizingUtils.inPercentages;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerWidth = kendo._outerWidth;\n\n    var NS = \".kendoEditorColumnResizing\";\n    var RESIZE_HANDLE_CLASS = \"k-column-resize-handle\";\n    var RESIZE_MARKER_CLASS = \"k-column-resize-marker\";\n\n    var BODY = \"body\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n    var TD = \"td\";\n    var TH = \"th\";\n    var TR = \"tr\";\n\n    var COLATTR = \"col-index\";\n\n    var COMMA = \",\";\n    var WIDTH = \"width\";\n\n    var ColumnResizing = TableElementResizing.extend({\n        options: {\n            tags: [TD, TH],\n            min: 20,\n            rootElement: null,\n            eventNamespace: NS,\n            rtl: false,\n            handle: {\n                dataAttribute: \"column\",\n                width: 10,\n                height: 0,\n                classNames: {\n                    handle: RESIZE_HANDLE_CLASS,\n                    marker: RESIZE_MARKER_CLASS\n                },\n                template:\n                    '<div class=\"k-column-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                        '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                            '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                        '</div>' +\n                    '</div>'\n            }\n        },\n\n        elementBorderHovered: function(column, e) {\n            var that = this;\n            var options = that.options;\n            var handleWidth = options.handle.width;\n            var borderOffset = column.offset().left + (options.rtl ? 0 : outerWidth(column));\n\n\n            var mousePosition = e.clientX + $(column[0].ownerDocument).scrollLeft();\n\n            if ((mousePosition > (borderOffset - handleWidth)) && (mousePosition < (borderOffset + handleWidth))) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        },\n\n        setResizeHandlePosition: function(column) {\n            var that = this;\n            var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n            var options = that.options;\n            var rtl = options.rtl;\n            var handleWidth = options.handle.width;\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var columnWidthOffset = rtl ? 0 : outerWidth(column);\n            var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var columnOffsetLeft = column.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(column.css(\"marginLeft\"));\n            var innerElementOffsetTop = tableInnerElement.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(tableInnerElement.css(\"marginTop\"));\n            var browser = kendo.support.browser;\n\n            if (rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            that.resizeHandle.css({\n                top: innerElementOffsetTop + scrollTopOffset,\n                left: columnOffsetLeft + columnWidthOffset + (scrollLeftOffset - scrollBarWidth) - (handleWidth / 2),\n                position: \"absolute\"\n            });\n        },\n\n        setResizeHandleDimensions: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableBody = $(that.element).children(TBODY);\n            var fullHeight = tableHead.length > 0 ? tableHead.height() + tableBody.height() : tableBody.height();\n\n            that.resizeHandle.css({\n                width: that.options.handle.width,\n                height: fullHeight\n            });\n        },\n\n        setResizeHandleDragPosition: function(e) {\n            var that = this;\n            var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n            var options = that.options;\n            var rootElement = $(options.rootElement);\n            var handleWidth = options.handle ? options.handle.width : 0;\n            var min = options.min;\n            var rtl = options.rtl;\n            var columnWidth = outerWidth(column);\n            var columnLeftOffset = column.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(column.css(\"marginLeft\"));\n            var adjacentColumnWidth = outerWidth(column.next());\n            var resizeHandle = $(that.resizeHandle);\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var resizeHandleOffsetLeft = resizeHandle.offset().left -\n                                            (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                            parseFloat(resizeHandle.css(\"marginLeft\"));\n            var browser = kendo.support.browser;\n\n            if (rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            var handleOffset = constrain({\n                value: resizeHandleOffsetLeft + (scrollLeftOffset - scrollBarWidth) + e.x.delta,\n                min: columnLeftOffset + (scrollLeftOffset - scrollBarWidth) - (rtl ? adjacentColumnWidth : 0) + min,\n                max: columnLeftOffset + columnWidth + (scrollLeftOffset - scrollBarWidth) + (rtl ? 0 : adjacentColumnWidth) - handleWidth - min\n            });\n\n            resizeHandle.css({ left: handleOffset });\n        },\n\n        resize: function(e) {\n            var that = this;\n            var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n            var options = that.options;\n            var rtlModifier = options.rtl ? (-1) : 1;\n            var min = options.min;\n            var initialDeltaX = rtlModifier * e.x.initialDelta;\n            var newWidth;\n            var initialAdjacentColumnWidth;\n            var initialColumnWidth;\n            var colIndex;\n            var nextColumn;\n\n            dom.reMapTableColumns(that.element, COLATTR);\n\n            colIndex = parseInt(column.attr(COLATTR), 10);\n\n            if (column.prop(\"colSpan\") > 1) {\n                column = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + column.prop(\"colSpan\") - 1) + \"]\").eq(0);\n                colIndex = parseInt(column.attr(COLATTR), 10);\n            }\n\n            nextColumn = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + 1) + \"]:not([colspan])\");\n\n            that._setTableComputedWidth();\n            that._setColumnsComputedWidth();\n\n            initialColumnWidth = outerWidth(column);\n            initialAdjacentColumnWidth = outerWidth(nextColumn);\n\n            newWidth = constrain({\n                value: initialColumnWidth + initialDeltaX,\n                min: min,\n                max: initialColumnWidth + initialAdjacentColumnWidth - min\n            });\n\n            that._resizeColumn(column[0], newWidth);\n            that._resizeTopAndBottomColumns(column[0], newWidth);\n            that._resizeAdjacentColumns(parseInt(column.attr(COLATTR),10), initialAdjacentColumnWidth, initialColumnWidth, (initialColumnWidth - newWidth));\n\n            dom.clearTableMappings(that.element, COLATTR);\n        },\n\n        _setTableComputedWidth: function() {\n            var element = this.element;\n\n            if (element.style[WIDTH] === \"\") {\n                element.style[WIDTH] = toPixels(outerWidth($(element)));\n            }\n        },\n\n        _setColumnsComputedWidth: function() {\n            var that = this;\n            var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n            var innerElementWidth = outerWidth(tableInnerElement);\n            var columns = tableInnerElement.children(TR).children(TD);\n            var length = columns.length;\n            var currentColumnsWidths = columns.map(function() {\n                return outerWidth($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                if (inPercentages(columns[i].style[WIDTH])) {\n                    columns[i].style[WIDTH] = toPercentages(calculatePercentageRatio(currentColumnsWidths[i], innerElementWidth));\n                }\n                else {\n                    columns[i].style[WIDTH] = toPixels(currentColumnsWidths[i]);\n                }\n            }\n        },\n\n        _resizeTopAndBottomColumns: function(column, newWidth) {\n            var that = this;\n            var columnIndex = $(column).attr(COLATTR);\n            var topAndBottomColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                .filter(function() {\n                    var cell = this;\n                    return ($(cell).attr(COLATTR) === columnIndex && cell !== column);\n                });\n            var length = topAndBottomColumns.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that._resizeColumn(topAndBottomColumns[i], newWidth);\n            }\n        },\n\n        _resizeColumn: function(column, newWidth) {\n            var innerTableElement = $(this.element.tHead || this.element.tBodies[0]);\n            if (inPercentages(column.style[WIDTH])) {\n                column.style[WIDTH] = toPercentages(calculatePercentageRatio(newWidth, outerWidth(innerTableElement)));\n            }\n            else {\n                column.style[WIDTH] = toPixels(newWidth);\n            }\n        },\n\n        _resizeAdjacentColumns: function(columnIndex, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n            var that = this;\n            var adjacentColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                .filter(function() {\n                    return (parseInt($(this).attr(COLATTR),10) === (columnIndex + 1));\n                });\n            var length = adjacentColumns.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that._resizeAdjacentColumn(adjacentColumns[i], initialAdjacentColumnWidth, initialColumnWidth, deltaWidth);\n            }\n        },\n\n        _resizeAdjacentColumn: function(adjacentColumn, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n            var that = this;\n            var min = that.options.min;\n            var newWidth;\n\n            newWidth = constrain({\n                value: initialAdjacentColumnWidth + deltaWidth,\n                min: min,\n                max: abs(initialColumnWidth + initialAdjacentColumnWidth - min)\n            });\n\n            that._resizeColumn(adjacentColumn, newWidth);\n        }\n    });\n\n    ColumnResizing.create = function(editor) {\n        TableElementResizing.create(editor, {\n            name: \"columnResizing\",\n            type: ColumnResizing,\n            eventNamespace: NS\n        });\n    };\n\n    ColumnResizing.dispose = function(editor) {\n        TableElementResizing.dispose(editor, {\n            eventNamespace: NS\n        });\n    };\n\n    extend(Editor, {\n        ColumnResizing: ColumnResizing\n    });\n\n})(window.kendo);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/resizing/row-resizing',[\"../main\", \"./resizing-utils\", \"./table-element-resizing\"], f);\n})(function() {\n\n(function(kendo, undefined) {\n    var math = window.Math;\n    var abs = math.abs;\n\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n\n    var Editor = kendo.ui.editor;\n    var TableElementResizing = Editor.TableElementResizing;\n    var ResizingUtils = Editor.ResizingUtils;\n    var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n    var constrain = ResizingUtils.constrain;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var inPercentages = ResizingUtils.inPercentages;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerHeight = kendo._outerHeight;\n\n    var NS = \".kendoEditorRowResizing\";\n    var RESIZE_HANDLE_CLASS = \"k-row-resize-handle\";\n    var RESIZE_HANDLE_MARKER_WRAPPER_CLASS = \"k-row-resize-marker-wrapper\";\n    var RESIZE_MARKER_CLASS = \"k-row-resize-marker\";\n\n    var BODY = \"body\";\n    var TR = \"tr\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n\n    var COMMA = \",\";\n    var HEIGHT = \"height\";\n\n    var RowResizing = TableElementResizing.extend({\n        options: {\n            tags: [TR],\n            min: 20,\n            rootElement: null,\n            eventNamespace: NS,\n            rtl: false,\n            handle: {\n                dataAttribute: \"row\",\n                width: 0,\n                height: 10,\n                classNames: {\n                    handle: RESIZE_HANDLE_CLASS,\n                    marker: RESIZE_MARKER_CLASS\n                },\n                template:\n                    '<div class=\"k-row-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                        '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                            '<div class=\"' + RESIZE_HANDLE_MARKER_WRAPPER_CLASS + '\">' +\n                                '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                            '</div>' +\n                        '</div>' +\n                    '</div>'\n            }\n        },\n\n        elementBorderHovered: function(tableElement, e) {\n            var that = this;\n            var handleHeight = that.options.handle[HEIGHT];\n            var borderOffset = tableElement.offset().top + outerHeight(tableElement);\n            var mousePosition = e.clientY + $(tableElement[0].ownerDocument).scrollTop();\n\n            if ((mousePosition > (borderOffset - handleHeight)) && (mousePosition < (borderOffset + handleHeight))) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        },\n\n        setResizeHandlePosition: function(row) {\n            var that = this;\n            var options = that.options;\n            var handleHeight = options.handle[HEIGHT];\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n\n            var rowOffsetLeft = row.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(row.css(\"marginLeft\"));\n            var rowOffsetTop = row.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(row.css(\"marginTop\"));\n            var browser = kendo.support.browser;\n\n            if (options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            that.resizeHandle.css({\n                top: rowOffsetTop + outerHeight(row) + scrollTopOffset - (handleHeight / 2),\n                left: rowOffsetLeft + (scrollLeftOffset - scrollBarWidth),\n                position: \"absolute\"\n            });\n        },\n\n        setResizeHandleDimensions: function() {\n            var that = this;\n            var innerTableElement = $(that.element.tHead || that.element.tBodies[0]);\n\n            that.resizeHandle.css({\n                width: innerTableElement.width(),\n                height: that.options.handle[HEIGHT]\n            });\n        },\n\n        setResizeHandleDragPosition: function(e) {\n            var that = this;\n            var options = that.options;\n            var min = options.min;\n            var tableHead = $(that.element).children(THEAD);\n            var tableBody = $(that.element).children(TBODY);\n            var topInnerTableElement = tableHead.length > 0 ? tableHead : tableBody;\n            var resizeHandle = $(that.resizeHandle);\n            var row = $(e.currentTarget).data(options.handle.dataAttribute);\n            var $row = $(row);\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var tableTopOffset = topInnerTableElement.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(topInnerTableElement.css(\"marginTop\"));\n\n            var rowOffsetTop = $row.offset().top -\n                                (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                parseFloat($row.css(\"marginTop\"));\n\n            var resizeHandleOffsetTop = resizeHandle.offset().top -\n                                (Math.max(0 , rootElement.offset().top) + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                parseFloat(resizeHandle.css(\"marginTop\"));\n\n            var handleOffset = constrain({\n                value: resizeHandleOffsetTop + scrollTopOffset + e.y.delta,\n                min: rowOffsetTop + scrollTopOffset + min,\n                max: tableTopOffset + outerHeight(tableHead) + outerHeight(tableBody) + scrollTopOffset - options.handle[HEIGHT] - min\n            });\n\n            resizeHandle.css({ top: handleOffset });\n        },\n\n        resize: function(e) {\n            var that = this;\n            var options = that.options;\n            var row = $(e.currentTarget).data(options.handle.dataAttribute);\n            var currentRowHeight = outerHeight($(row));\n            var element = $(that.element);\n            var initialTableHeight = outerHeight(element);\n            var tableHead = element.children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = element.children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var initialStyleHeight = row.style[HEIGHT];\n            var newRowHeight = constrain({\n                value: currentRowHeight + e.y.initialDelta,\n                min: options.min,\n                max: abs(tableHeadHeight + tableBodyHeight - options.min)\n            });\n\n            that._setRowsHeightInPixels();\n            row.style[HEIGHT] = toPixels(newRowHeight);\n            that._setTableHeight(initialTableHeight + (newRowHeight - currentRowHeight));\n\n            if (inPercentages(initialStyleHeight)) {\n                //resize rows in percentages as late as possible to prevent incorrect precision calculations\n                that._setRowsHeightInPercentages();\n            }\n        },\n\n        _setRowsHeightInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(TBODY + COMMA + THEAD).children(TR);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n            }\n        },\n\n        _setRowsHeightInPercentages: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = $(that.element).children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(TR);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n            }\n        },\n\n        _setTableHeight: function(newHeight) {\n            var element = this.element;\n\n            if (inPercentages(element.style[HEIGHT])) {\n                element.style[HEIGHT] = toPercentages(calculatePercentageRatio(newHeight, $(element).parent().height()));\n            }\n            else {\n                element.style[HEIGHT] = toPixels(newHeight);\n            }\n        }\n    });\n\n    RowResizing.create = function(editor) {\n        TableElementResizing.create(editor, {\n            name: \"rowResizing\",\n            type: RowResizing,\n            eventNamespace: NS\n        });\n    };\n\n    RowResizing.dispose = function(editor) {\n        TableElementResizing.dispose(editor, {\n            eventNamespace: NS\n        });\n    };\n\n    extend(Editor, {\n        RowResizing: RowResizing\n    });\n\n})(window.kendo);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/resizing/element-resize-handle',[\"../main\", \"kendo.draganddrop\", \"./resizing-utils\"], f);\n})(function() {\n\n(function(kendo, undefined) {\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n    var noop = $.noop;\n\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n    var Draggable = kendo.ui.Draggable;\n    var Observable = kendo.Observable;\n    var getScrollBarWidth = Editor.ResizingUtils.getScrollBarWidth;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n\n    var NS = \".kendoEditorElementResizeHandle\";\n    var RESIZE_HANDLE_CLASS = \"k-element-resize-handle\";\n\n    var DRAG_START = \"dragStart\";\n    var DRAG = \"drag\";\n    var DRAG_END = \"dragEnd\";\n    var HALF_INSIDE = \"halfInside\";\n    var MOUSE_OVER = \"mouseover\";\n    var MOUSE_OUT = \"mouseout\";\n\n    var BODY = \"body\";\n    var TABLE = \"table\";\n\n    var EAST = \"east\";\n    var NORTH = \"north\";\n    var NORTHEAST = \"northeast\";\n    var NORTHWEST = \"northwest\";\n    var SOUTH = \"south\";\n    var SOUTHEAST = \"southeast\";\n    var SOUTHWEST = \"southwest\";\n    var WEST = \"west\";\n\n    var DOT = \".\";\n\n    var ElementResizeHandle = Observable.extend({\n        init: function(options) {\n            var that = this;\n\n            Observable.fn.init.call(that);\n\n            that.options = extend({}, that.options, options);\n            that.element = $(that.options.template).appendTo(that.options.appendTo)[0];\n\n            that._attachEventHandlers();\n            that._addStyles();\n            that._initDraggable();\n            that._initPositioningStrategy();\n            that._initDraggingStrategy();\n\n            $(that.element).data(TABLE, that.options.resizableElement);\n        },\n\n        destroy: function() {\n            var that = this;\n\n            $(that.element).off(NS).remove();\n            that.element = null;\n\n            that._destroyDraggable();\n\n            that.unbind();\n        },\n\n        options: {\n            appendTo: null,\n            direction: SOUTHEAST,\n            resizableElement: null,\n            rtl: false,\n            template:\n                \"<div class='k-element-resize-handle-wrapper' unselectable='on' contenteditable='false'>\" +\n                    \"<div class='\" + RESIZE_HANDLE_CLASS + \"'></div>\" +\n                \"</div>\"\n        },\n\n        events: [\n            DRAG_START,\n            DRAG,\n            DRAG_END,\n            MOUSE_OVER,\n            MOUSE_OUT\n        ],\n\n        show: function() {\n            this._setPosition();\n        },\n\n        _setPosition: function() {\n            var that = this;\n            var position = that._positioningStrategy.getPosition();\n\n            $(that.element).css({\n                top: position.top,\n                left: position.left,\n                position: \"absolute\"\n            });\n        },\n\n        _attachEventHandlers: function() {\n            var that = this;\n\n            $(that.element)\n                .on(MOUSE_OVER + NS, that._onMouseOver.bind(that))\n                .on(MOUSE_OUT + NS, that._onMouseOut.bind(that));\n        },\n\n        _onMouseOver: function() {\n            this.trigger(MOUSE_OVER);\n        },\n\n        _onMouseOut: function() {\n            this.trigger(MOUSE_OUT);\n        },\n\n        _addStyles: function() {\n            var that = this;\n            $(that.element).children(DOT + RESIZE_HANDLE_CLASS).addClass(\"k-resize-\" + that.options.direction);\n        },\n\n        _initPositioningStrategy: function() {\n            var that = this;\n            var options = that.options;\n\n            that._positioningStrategy = HandlePositioningStrategy.create({\n                name: options.direction,\n                handle: that.element,\n                resizableElement: options.resizableElement,\n                rootElement: options.rootElement,\n                rtl: options.rtl\n            });\n        },\n\n        _initDraggable: function() {\n            var that = this;\n            var element = that.element;\n\n            if (that._draggable || !element) {\n                return;\n            }\n\n            that._draggable = new Draggable(element, {\n                dragstart: that._onDragStart.bind(that),\n                drag: that._onDrag.bind(that),\n                dragend: that._onDragEnd.bind(that)\n            });\n        },\n\n        _onDragStart: function() {\n            this.trigger(DRAG_START);\n        },\n\n        _onDrag: function(e) {\n            var that = this;\n\n            that.trigger(DRAG, that._draggingStrategy.adjustDragDelta({\n                deltaX: e.x.delta,\n                deltaY: e.y.delta,\n                initialDeltaX: e.x.initialDelta,\n                initialDeltaY: e.y.initialDelta\n            }));\n        },\n\n        _onDragEnd: function() {\n            this.trigger(DRAG_END);\n        },\n\n        _destroyDraggable: function() {\n            var that = this;\n\n            if (that._draggable) {\n                that._draggable.destroy();\n                that._draggable = null;\n            }\n        },\n\n        _initDraggingStrategy: function() {\n            var that = this;\n\n            that._draggingStrategy = HandleDraggingStrategy.create({\n                name: that.options.direction\n            });\n        }\n    });\n\n    var StrategyFactory = Class.extend({\n        init: function() {\n            this._items = [];\n        },\n\n        register: function(name, type) {\n            this._items.push({\n                name: name,\n                type: type\n            });\n        },\n\n        create: function(options) {\n            var items = this._items;\n            var itemsLength = items.length;\n            var name = options.name ? options.name.toLowerCase() : \"\";\n            var match;\n            var item;\n            var i;\n\n            for (i = 0; i < itemsLength; i++) {\n                item = items[i];\n\n                if (item.name.toLowerCase() === name) {\n                    match = item;\n                    break;\n                }\n            }\n\n            if (match) {\n                return new match.type(options);\n            }\n        }\n    });\n\n    var PositioningStrategyFactory = StrategyFactory.extend({});\n    PositioningStrategyFactory.current = new PositioningStrategyFactory();\n\n    var HandlePositioningStrategy = Class.extend({\n        init: function(options) {\n            var that = this;\n            that.options = extend({}, that.options, options);\n        },\n\n        options: {\n            handle: null,\n            offset: HALF_INSIDE,\n            resizableElement: null,\n            rootElement: null,\n            rtl: false\n        },\n\n        getPosition: function() {\n            var that = this;\n\n            var position = that.calculatePosition();\n            var handleOffsetPosition = that.applyHandleOffset(position);\n            var scrollOffsetPosition = that.applyScrollOffset(handleOffsetPosition);\n\n            return scrollOffsetPosition;\n        },\n\n        calculatePosition: noop,\n\n        applyHandleOffset: function(position) {\n            var options = this.options;\n            var handle = $(options.handle);\n\n            if (options.offset === HALF_INSIDE) {\n                return {\n                    top: position.top - (outerHeight(handle) / 2),\n                    left: position.left - (outerWidth(handle) / 2)\n                };\n            }\n\n            return position;\n        },\n\n        applyScrollOffset: function(position) {\n            var options = this.options;\n            var rootElement = $(options.rootElement);\n            var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var browser = kendo.support.browser;\n            var rootLeft;\n\n            if (!rootElement.is(BODY)) {\n                rootLeft = kendo.scrollLeft(rootElement) || 0;\n\n                if (options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    rootLeft = rootLeft * -1;\n                }\n\n                return {\n                    top: position.top + (rootElement.scrollTop() || 0),\n                    left: position.left + rootLeft - scrollBarWidth\n                };\n            }\n\n            return position;\n        }\n    });\n\n    HandlePositioningStrategy.create = function(options) {\n        return PositioningStrategyFactory.current.create(options);\n    };\n\n    var EastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + (outerHeight(resizableElement) / 2),\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(EAST, EastPositioningStrategy);\n\n    var NorthPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTH, NorthPositioningStrategy);\n\n    var NortheastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTHEAST, NortheastPositioningStrategy);\n\n    var NorthwestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTHWEST, NorthwestPositioningStrategy);\n\n    var SouthPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTH, SouthPositioningStrategy);\n\n    var SoutheastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTHEAST, SoutheastPositioningStrategy);\n\n    var SouthwestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTHWEST, SouthwestPositioningStrategy);\n\n    var WestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + (outerHeight(resizableElement) / 2),\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(WEST, WestPositioningStrategy);\n\n    var DraggingStrategyFactory = StrategyFactory.extend({});\n    DraggingStrategyFactory.current = new DraggingStrategyFactory();\n\n    var HandleDraggingStrategy = Class.extend({\n        init: function(options) {\n            var that = this;\n            that.options = extend({}, that.options, options);\n        },\n\n        options: {\n            deltaX: {\n                adjustment: null,\n                modifier: null\n            },\n            deltaY: {\n                adjustment: null,\n                modifier: null\n            }\n        },\n\n        adjustDragDelta: function(deltas) {\n            var options = this.options;\n            var xAxisAdjustment = options.deltaX.adjustment * options.deltaX.modifier;\n            var yAxisAdjustment = options.deltaY.adjustment * options.deltaY.modifier;\n\n            return {\n                deltaX: deltas.deltaX * xAxisAdjustment,\n                deltaY: deltas.deltaY * yAxisAdjustment,\n                initialDeltaX: deltas.initialDeltaX * xAxisAdjustment,\n                initialDeltaY: deltas.initialDeltaY * yAxisAdjustment\n            };\n        }\n    });\n\n    HandleDraggingStrategy.create = function(options) {\n        return DraggingStrategyFactory.current.create(options);\n    };\n\n    var HorizontalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 1,\n                modifier: 1\n            },\n            deltaY: {\n                adjustment: 0,\n                modifier: 0\n            }\n        }\n    });\n\n    var EastDraggingStrategy = HorizontalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(EAST, EastDraggingStrategy);\n\n    var WestDraggingStrategy = HorizontalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(WEST, WestDraggingStrategy);\n\n    var VerticalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 0,\n                modifier: 0\n            },\n            deltaY: {\n                adjustment: 1,\n                modifier: 1\n            }\n        }\n    });\n\n    var NorthDraggingStrategy = VerticalDraggingStrategy.extend({\n        options: {\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTH, NorthDraggingStrategy);\n\n    var SouthDraggingStrategy = VerticalDraggingStrategy.extend({\n        options: {\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTH, SouthDraggingStrategy);\n\n    var HorizontalAndVerticalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 1,\n                modifier: 1\n            },\n            deltaY: {\n                adjustment: 1,\n                modifier: 1\n            }\n        }\n    });\n\n    var NorthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            },\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTHEAST, NorthEastDraggingStrategy);\n\n    var NorthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            },\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTHWEST, NorthWestDraggingStrategy);\n\n    var SouthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            },\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTHEAST, SouthEastDraggingStrategy);\n\n    var SouthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            },\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTHWEST, SouthWestDraggingStrategy);\n\n    extend(Editor, {\n        ElementResizeHandle: ElementResizeHandle\n    });\n})(window.kendo);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/resizing/element-resizing',[\"../main\", \"./element-resize-handle\", \"./resizing-utils\"], f);\n})(function() {\n\n(function(kendo, undefined) {\n    var global = window;\n    var math = global.Math;\n    var min = math.min;\n    var max = math.max;\n\n    var $ = kendo.jQuery;\n    var contains = $.contains;\n    var extend = $.extend;\n\n    var browser = kendo.support.browser;\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n    var ElementResizeHandle = Editor.ElementResizeHandle;\n    var ResizingUtils = Editor.ResizingUtils;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var constrain = ResizingUtils.constrain;\n    var inPercentages = ResizingUtils.inPercentages;\n    var inPixels = ResizingUtils.inPixels;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n    var RangeUtils = Editor.RangeUtils;\n\n    var NS = \".kendoEditorElementResizing\";\n    var RESIZE_HANDLE_WRAPPER_CLASS = \"k-element-resize-handle-wrapper\";\n    var TABLE_CLASS = \"k-table\";\n    var ELEMENT_RESIZING_CLASS = \"k-element-resizing\";\n\n    var DRAG_START = \"dragStart\";\n    var DRAG = \"drag\";\n    var DRAG_END = \"dragEnd\";\n    var KEY_DOWN = \"keydown\";\n    var MOUSE_DOWN = \"mousedown\";\n    var SELECT = \"select\";\n    var DROP = \"drop\";\n\n    var COLUMN = \"td\";\n    var ROW = \"tr\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n    var TABLE = \"table\";\n    var IMG = \"img\";\n    var ELEMENT_TYPES = [\"TABLE\", \"IMG\"];\n\n    var COMMA = \",\";\n    var WIDTH = \"width\";\n    var HEIGHT = \"height\";\n\n    var EAST = \"east\";\n    var NORTH = \"north\";\n    var NORTHEAST = \"northeast\";\n    var NORTHWEST = \"northwest\";\n    var SOUTH = \"south\";\n    var SOUTHEAST = \"southeast\";\n    var SOUTHWEST = \"southwest\";\n    var WEST = \"west\";\n\n    var DOT = \".\";\n\n    function isUndefined(value) {\n        return typeof(value) === \"undefined\";\n    }\n\n    var ElementResizing = Class.extend({\n        init: function(element, options) {\n            var that = this;\n\n            that.options = extend({}, that.options, options);\n            that.handles = [];\n\n            // Check whether the element is TABLE or IMG\n            if (ELEMENT_TYPES.indexOf(element.nodeName) >= 0) {\n                that.element = element;\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n\n            $(that.element).off(NS);\n            that.element = null;\n\n            $(that.options.rootElement).off(KEY_DOWN + NS);\n\n            that._destroyResizeHandles();\n        },\n\n        options: {\n            appendHandlesTo: null,\n            rtl: false,\n            rootElement: null,\n            minWidth: 10,\n            minHeight: 10,\n            handles: [{\n                direction: NORTHWEST\n            }, {\n                direction: NORTH\n            }, {\n                direction: NORTHEAST\n            }, {\n                direction: EAST\n            }, {\n                direction: SOUTHEAST\n            }, {\n                direction: SOUTH\n            }, {\n                direction: SOUTHWEST\n            }, {\n                direction: WEST\n            }]\n        },\n\n        resize: function(args) {\n            var that = this;\n            var deltas = extend({}, {\n                deltaX: 0,\n                deltaY: 0,\n                initialDeltaX: 0,\n                initialDeltaY: 0\n            }, args);\n\n            that._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            that._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n            that.showResizeHandles();\n        },\n\n        _resizeWidth: function() {\n            return false;\n        },\n\n        _resizeHeight: function() {\n            return false;\n        },\n\n        _getMaxDimensionValue: function(dimension) {\n            var that = this;\n            var element = $(that.element);\n            var dimensionLowercase = dimension.toLowerCase();\n            var rtlModifier = that.options.rtl ? (-1) : 1;\n            var parent = $(that.element).parent();\n            var parentElement = parent[0];\n            var parentDimension = parent[dimensionLowercase]();\n            var parentScrollOffset = rtlModifier * (dimension === WIDTH ? kendo.scrollLeft(parent) : parent.scrollTop());\n\n            if (parentElement && parentElement === element.closest(COLUMN)[0]) {\n                if (parentElement.style[dimensionLowercase] === \"\" && !inPercentages(that.element.style[dimensionLowercase])) {\n                    return Infinity;\n                }\n                else {\n                    return (parentDimension + parentScrollOffset);\n                }\n            }\n            else {\n                return (parentDimension + parentScrollOffset);\n            }\n        },\n\n        showResizeHandles: function() {\n            var that = this;\n\n            that._initResizeHandles();\n            that._showResizeHandles();\n        },\n\n        _initResizeHandles: function() {\n            var that = this;\n            var handles = that.handles;\n            var options = that.options;\n            var handleOptions = that.options.handles;\n            var length = handleOptions.length;\n            var i;\n\n            if (handles && handles.length > 0) {\n                return;\n            }\n\n            for (i = 0; i < length; i++) {\n                that.handles.push(new ElementResizeHandle(extend({\n                    appendTo: options.appendHandlesTo,\n                    resizableElement: that.element,\n                    rootElement: options.rootElement,\n                    rtl: options.rtl\n                }, handleOptions[i])));\n            }\n\n            that._bindToResizeHandlesEvents();\n        },\n\n        _destroyResizeHandles: function() {\n            var that = this;\n            var length = that.handles ? that.handles.length : 0;\n\n            for (var i = 0; i < length; i++) {\n                that.handles[i].destroy();\n            }\n\n            that.handles = [];\n        },\n\n        _showResizeHandles: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that.handles[i].show();\n            }\n        },\n\n        _bindToResizeHandlesEvents: function() {\n            return false;\n        },\n\n        _onResizeHandleDragStart: function() {\n            var that = this;\n            var element = $(that.element);\n\n            element.addClass(ELEMENT_RESIZING_CLASS);\n\n            that._initialElementHeight = outerHeight(element);\n            that._initialElementWidth = outerWidth(element);\n            that._disableKeyboard();\n        },\n\n        _onResizeHandleDrag: function(e) {\n            this.resize(e);\n        },\n\n        _onResizeHandleDragEnd: function() {\n            var that = this;\n            $(that.element).removeClass(ELEMENT_RESIZING_CLASS);\n            that._enableKeyboard();\n        },\n\n        _enableKeyboard: function() {\n            $(this.options.rootElement).off(KEY_DOWN + NS);\n        },\n\n        _disableKeyboard: function() {\n            $(this.options.rootElement).on(KEY_DOWN + NS, function(e) {\n                e.preventDefault();\n            });\n        }\n    });\n\n    var TableResizing = ElementResizing.extend({\n        _bindToResizeHandlesEvents: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n            var handle;\n\n            for (i = 0; i < length; i++) {\n                handle = handles[i];\n                handle.bind(DRAG_START, that._onResizeHandleDragStart.bind(that));\n                handle.bind(DRAG, that._onResizeHandleDrag.bind(that));\n                handle.bind(DRAG_END, that._onResizeHandleDragEnd.bind(that));\n            }\n        },\n\n        _hasRowsInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n\n            for (var i = 0; i < rows.length; i++) {\n                if (rows[i].style.height === \"\" || inPixels(rows[i].style.height)) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        _resizeWidth: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var styleWidth = element[0].style[WIDTH];\n            var currentWidth = outerWidth(element);\n            var parentWidth = element.parent().width();\n            var maxWidth = that._getMaxDimensionValue(WIDTH);\n            var newWidth;\n            var ratioValue;\n            var ratioTotalValue;\n            var constrainedWidth;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementWidth)) {\n                that._initialElementWidth = currentWidth;\n            }\n\n            //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedWidth = constrain({\n                value: that._initialElementWidth + initialDelta,\n                min: that.options.minWidth,\n                max: maxWidth\n            });\n\n            if (inPercentages(styleWidth)) {\n                //detect resizing greater than 100%\n                if (currentWidth + delta > parentWidth) {\n                    ratioValue = max(constrainedWidth, parentWidth);\n                    ratioTotalValue = min(constrainedWidth, parentWidth);\n                }\n                else {\n                    ratioValue = min(constrainedWidth, parentWidth);\n                    ratioTotalValue = max(constrainedWidth, parentWidth);\n                }\n\n                newWidth = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n            }\n            else {\n                newWidth = toPixels(constrainedWidth);\n            }\n\n            that._setColumnsWidth();\n\n            element[0].style[WIDTH] = newWidth;\n        },\n\n        _resizeHeight: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var styleHeight = element[0].style[HEIGHT];\n            var currentHeight = outerHeight(element);\n            var parent = element.parent();\n            var parentHeight = parent.height();\n            var maxHeight = that._getMaxDimensionValue(HEIGHT);\n            var newHeight;\n            var ratioValue;\n            var ratioTotalValue;\n            var constrainedHeight;\n            var minHeight = that.options.minHeight;\n            var hasRowsInPixels = that._hasRowsInPixels();\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementHeight)) {\n                that._initialElementHeight = currentHeight;\n            }\n\n            //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedHeight = constrain({\n                value: that._initialElementHeight + initialDelta,\n                min: minHeight,\n                max: maxHeight\n            });\n\n            if (hasRowsInPixels && delta < 0) {\n                //decreasing table height when rows are sized in pixels is not possible\n                that._setRowsHeightInPercentages();\n            }\n\n            if (inPercentages(styleHeight)) {\n                //detect resizing greater than 100%\n                if (currentHeight + delta > parentHeight) {\n                    ratioValue = max(constrainedHeight, parentHeight);\n                    ratioTotalValue = min(constrainedHeight, parentHeight);\n                }\n                else {\n                    ratioValue = min(constrainedHeight, parentHeight);\n                    ratioTotalValue = max(constrainedHeight, parentHeight);\n                }\n\n                newHeight = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n            }\n            else {\n                newHeight = toPixels(constrainedHeight);\n            }\n\n            element[0].style[HEIGHT] = newHeight;\n\n            if (hasRowsInPixels && delta < 0) {\n                //restore original rows height unit\n                that._setRowsHeightInPixels();\n            }\n        },\n\n        _setColumnsWidth: function() {\n            var that = this;\n            var element = $(that.element);\n            var parentElement = element.parent()[0];\n            var parentColumn = element.closest(COLUMN);\n            var columns = parentColumn.closest(ROW).children();\n            var columnsLength = columns.length;\n            var i;\n\n            function isWidthInPercentages(element) {\n                var styleWidth = element.style.width;\n\n                if (styleWidth !== \"\") {\n                    return inPercentages(styleWidth) ? true : false;\n                }\n                else {\n                    return $(element).hasClass(TABLE_CLASS) ? true : false;\n                }\n            }\n\n            if (isWidthInPercentages(element[0]) && parentElement === parentColumn[0] && parentElement.style[WIDTH] === \"\") {\n                for (i = 0; i < columnsLength; i++) {\n                    columns[i].style[WIDTH] = toPixels($(columns[i]).width());\n                }\n            }\n        },\n\n        _setRowsHeightInPercentages: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = $(that.element).children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n            }\n        },\n\n        _setRowsHeightInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n            }\n        }\n    });\n\n    var ImageResizing = ElementResizing.extend({\n        _bindToResizeHandlesEvents: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n            var handle;\n\n            for (i = 0; i < length; i++) {\n                handle = handles[i];\n                handle.bind(DRAG_START, that._onResizeHandleDragStart.bind(that));\n\n                if (handle.options.direction === \"north\" || handle.options.direction === \"south\") {\n                    handle.bind(DRAG, that._onResizeHandleDragVertical.bind(that));\n                } else if (handle.options.direction === \"east\" || handle.options.direction === \"west\") {\n                    handle.bind(DRAG, that._onResizeHandleDragHorizontal.bind(that));\n                } else {\n                    handle.bind(DRAG, that._onResizeHandleDragLocked.bind(that));\n                }\n\n                handle.bind(DRAG_END, that._onResizeHandleDragEnd.bind(that));\n            }\n        },\n\n        _getDeltas: function(args) {\n            return extend({}, {\n                deltaX: 0,\n                deltaY: 0,\n                initialDeltaX: 0,\n                initialDeltaY: 0\n            }, args);\n        },\n\n        _onResizeHandleDragVertical: function(args) {\n            var deltas = this._getDeltas(args);\n\n            this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n            this.showResizeHandles();\n        },\n\n        _onResizeHandleDragHorizontal: function(args) {\n            var deltas = this._getDeltas(args);\n\n            this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            this.showResizeHandles();\n        },\n\n        _onResizeHandleDragLocked: function(args) {\n            var min = Math.min(Math.abs(args.initialDeltaX), Math.abs(args.initialDeltaY)),\n                initialWidth = this._initialElementWidth,\n                initialHeight = this._initialElementHeight,\n                deltas;\n\n            if (min === args.initialDeltaX || min === args.initialDeltaX * -1) {\n                args.initialDeltaY = args.initialDeltaX * initialHeight / initialWidth;\n                args.deltaY = args.deltaX;\n            } else if (min === args.initialDeltaY || min === args.initialDeltaY * -1) {\n                args.initialDeltaX = args.initialDeltaY * initialWidth / initialHeight;\n                args.deltaX = args.deltaY;\n            }\n\n            deltas = this._getDeltas(args);\n\n            this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n            this.showResizeHandles();\n        },\n\n        _resizeWidth: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var currentWidth = outerWidth(element);\n            var newWidth;\n            var constrainedWidth;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementWidth)) {\n                that._initialElementWidth = currentWidth;\n            }\n\n            //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedWidth = constrain({\n                value: that._initialElementWidth + initialDelta,\n                min: that.options.minWidth,\n                max: that._getMaxDimensionValue(WIDTH)\n            });\n\n            newWidth = toPixels(constrainedWidth);\n            element[0].style[WIDTH] = newWidth;\n            element.attr(WIDTH, Math.floor(constrainedWidth));\n        },\n\n        _resizeHeight: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var currentHeight = outerHeight(element);\n            var newHeight;\n            var constrainedHeight;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementHeight)) {\n                that._initialElementHeight = currentHeight;\n            }\n\n            //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedHeight = constrain({\n                value: that._initialElementHeight + initialDelta,\n                min: that.options.minHeight,\n                max: Number.MAX_SAFE_INTEGER\n            });\n\n            newHeight = toPixels(constrainedHeight);\n            element[0].style[HEIGHT] = newHeight;\n            element.attr(HEIGHT, Math.floor(constrainedHeight));\n        }\n    });\n\n    var ElementResizingFactory = Class.extend({\n        create: function(editor) {\n            var factory = this;\n\n            $(editor.body)\n                .on(\"dragstart\" + NS, function() {\n                    var nodes = RangeUtils.nodes(editor.getRange()),\n                        hasImg = false;\n\n                    nodes.forEach(function(node) {\n                        if (node.nodeName === \"IMG\") {\n                            hasImg = true;\n                        }\n                    });\n\n                    if (hasImg && nodes.length > 1) {\n                        editor.elementResizing._destroyResizeHandles();\n                    }\n                })\n                .on(DROP + NS, function() {\n                    setTimeout(function() {\n                        var image = RangeUtils.image(editor.getRange());\n\n                        if (image) {\n                            editor.elementResizing._destroyResizeHandles();\n                            editor.elementResizing.element = image;\n                            editor.elementResizing.showResizeHandles();\n                        }\n                    });\n                })\n                .on(MOUSE_DOWN + NS, TABLE + COMMA + IMG, function(e) {\n                    var eventTarget = e.target;\n                    var eventCurrentTarget = e.currentTarget;\n                    var elementResizing = editor.elementResizing;\n                    var element = elementResizing ? elementResizing.element : null;\n\n                    if (elementResizing) {\n                        if (element && eventCurrentTarget !== element) {\n                            if (contains(eventCurrentTarget, element) && element !== eventTarget && contains(element, eventTarget)) {\n                                //prevent a parent table resizing init when clicking on a nested table when the event bubbles\n                                //instead of stopping event propagation\n                                return;\n                            }\n                            else {\n                                if (element !== eventTarget) {\n                                    editor._destroyElementResizing();\n                                    factory._initResizing(editor, eventCurrentTarget);\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        factory._initResizing(editor, eventCurrentTarget);\n                    }\n\n                    editor._showElementResizeHandles();\n                })\n                .on(MOUSE_DOWN + NS, function(e) {\n                    var elementResizing = editor.elementResizing;\n                    var element = elementResizing ? elementResizing.element : null;\n                    var target = e.target;\n                    var isResizeHandleOrChild = $(target).hasClass(RESIZE_HANDLE_WRAPPER_CLASS) || $(target).parents(DOT + RESIZE_HANDLE_WRAPPER_CLASS).length > 0;\n\n                    if (elementResizing && element !== target && !contains(element, target) && !isResizeHandleOrChild) {\n                        editor._destroyElementResizing();\n                    }\n                });\n        },\n\n        dispose: function(editor) {\n            $(editor.body).off(NS);\n        },\n\n        _initResizing: function(editor, element) {\n            // table and image resizing is natively supported in IE\n            // https://stackoverflow.com/questions/53831846/resizing-images-in-contenteditable-div-stopped-working-in-firefox\n            // Enable custom resize handlers for FF too\n            if (!browser.msie) {\n                if ($(element).is(TABLE)) {\n                    editor.elementResizing = editor.tableResizing = new TableResizing(element, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body\n                    });\n                } else if ($(element).is(IMG)) {\n                    editor.elementResizing = new ImageResizing(element, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body\n                    });\n                }\n\n                if (editor._showElementResizeHandlesProxy) {\n                    editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n                    editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n                }\n            }\n        }\n    });\n\n    ElementResizingFactory.current = new ElementResizingFactory();\n\n    extend(Editor, {\n        TableResizing: TableResizing,\n        ImageResizing: ImageResizing,\n        ElementResizing: ElementResizing,\n        ElementResizingFactory: ElementResizingFactory\n    });\n\n})(window.kendo);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define) {\n   define('editor/table-wizard/table-wizard-command',[\"./../plugins/tables\"], f);\n})(function() {\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    RangeUtils = Editor.RangeUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    ToolTemplate = Editor.ToolTemplate,\n    Command = Editor.Command;\n\nvar tableFormatFinder = new Editor.BlockFormatFinder([{ tags: [\"table\"] }]);\nvar cellsFormatFinder = new Editor.BlockFormatFinder([{ tags: [\"td\",\"th\"] }]);\nvar reUnit = /([a-z]+|%)$/i;\n\nvar COL = \"col\";\nvar ROW = \"row\";\nvar COLGROUP = \"colgroup\";\nvar SCOPE = \"scope\";\nvar COL_INDEX = \"col-index\";\nvar TH = \"th\";\nvar TD = \"td\";\nvar THEAD = \"thead\";\nvar HEADERS = \"headers\";\nvar TABLE = \"table\";\n\nvar TableWizardCommand = Command.extend({\n    exec: function() {\n        var cmd = this;\n        var editor = cmd.editor;\n        var range = cmd.range = cmd.lockRange();\n        var selectedTable = cmd._sourceTable = !cmd.options.insertNewTable ? cmd._selectedTable(range) : undefined;\n        var selectedCells = cmd._selectedTableCells = selectedTable ? cmd._selectedCells(range) : undefined;\n        var options = {\n            visible: false,\n            messages: editor.options.messages,\n            closeCallback: cmd.onDialogClose.bind(cmd),\n            table: cmd.parseTable(selectedTable, selectedCells),\n            dialogOptions: editor.options.dialogOptions,\n            isRtl: kendo.support.isRtl(editor.wrapper)\n        };\n\n        var dialog = new Editor.TableWizardDialog(options);\n        dialog.open();\n    },\n\n    onDialogClose: function(data) {\n        var cmd = this;\n        cmd.releaseRange(cmd.range);\n\n        if (data) { //Ok button pressed\n            if (cmd.options.insertNewTable) {\n                cmd.insertTable(cmd.createNewTable(data));\n            } else {\n                cmd.updateTable(data, cmd._sourceTable, cmd._selectedTableCells);\n            }\n        }\n    },\n    releaseRange: function(range) {\n        var cmd = this;\n        var doc = cmd.editor.document;\n        dom.windowFromDocument(doc).focus();\n        Command.fn.releaseRange.call(cmd, range);\n    },\n    insertTable: function(table) {\n        var range = this.range;\n\n        range.insertNode(table);\n        range.collapse(true);\n        this.editor.selectRange(range);\n\n        this._ensureFocusableAfterTable(table);\n    },\n    _ensureFocusableAfterTable: function(table) {\n        var siblingNodes = $(table).parent().contents();\n        var lastSiblingIndex = siblingNodes.length - 1;\n        var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n        while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n            lastSiblingIndex -= 1;\n            lastSibling = siblingNodes.get(lastSiblingIndex);\n        }\n\n        if (lastSibling === table) {\n            dom.insertAfter(dom.createEmptyNode(this.editor.document, \"p\"), table);\n        }\n    },\n    updateTable: function(data, table, selectedCells) {\n        var cmd = this;\n        var tableRows = $(table.rows).toArray();\n        var tableProp = data.tableProperties;\n        var rows = tableProp.rows;\n        var tHead = table.tHead;\n        var last = cmd._lastInCollection;\n        var lastSelectedRow, cellProp;\n\n        //Leave only first selected cell\n        while (selectedCells.length > 1) {\n            selectedCells.pop();\n        }\n\n        lastSelectedRow = selectedCells.length ? last(selectedCells).parentNode : last(tableRows);\n\n        cmd._deleteTableRows(tableRows, tableRows.length - rows);\n\n        if (tableRows.length < rows) {\n            cmd._addRows(lastSelectedRow, rows, tableRows);\n        }\n\n        dom.reMapTableColumns(table, COL_INDEX);\n        cmd._updateColumns(tableRows, tableProp.columns, selectedCells, lastSelectedRow);\n        cmd._updateTableProperties(table, tableProp);\n\n        cellProp = data.cellProperties;\n        if (selectedCells[0]) {\n            dom.attr(selectedCells[0], { id: cellProp.id || null });\n        }\n        (cellProp.selectAllCells ? $(tableRows).children() : $(selectedCells)).each(function(i, cell) {\n            cmd._updateCellProperties(cell, cellProp);\n        });\n\n        cmd._updateCaption(table, tableProp);\n\n        if (tHead) {\n            cmd._updateHeadersWithThead(table, data);\n        } else {\n            cmd._updateHeadersNoThead(table, data);\n        }\n\n        cmd._updateHeaderAssociates(table, tableProp);\n        dom.clearTableMappings(table, COL_INDEX);\n    },\n    _isHeadingRow: function(row) {\n        return dom.is(row.cells[0], TH) && dom.is(row.parentNode, THEAD);\n    },\n    _isHeadingCell: function(cell) {\n        return dom.is(cell, TH);\n    },\n    cellsWithHeadersAssociated: function(table) {\n        var cells = $(table.rows).children();\n        var headingIds = [];\n        var checkHeader = function(header) {\n            return headingIds.indexOf(header) > -1;\n        };\n\n        cells.each(function(c, cell) {\n            if (cell.id && dom.is(cell, TH)) {\n                headingIds.push(cell.id);\n            }\n        });\n\n        var associatedCells = cells.filter(function(c, cell) {\n            var headersAttr = cell.getAttribute(HEADERS);\n            var headersArray;\n\n            if (headersAttr && !dom.is(cell, TH)) {\n                headersArray = headersAttr.split(\" \");\n\n                if (headersArray && headersArray.length > 0) {\n                    return headersArray.some(checkHeader);\n                }\n            }\n\n            return false;\n        });\n\n        return !!associatedCells.length;\n    },\n    _insertCells: function(count, row, index) {\n        index = isNaN(index) ? -1 : index;\n        for (var i = 0, cell; i < count; i++) {\n            cell = row.insertCell(index);\n            cell.innerHTML = \"&nbsp;\";\n        }\n    },\n    _deleteTableRows: function(rows, count) {\n        for (var i = 0, row, rowParent; i < count; i++) {\n            row = rows.pop();\n            rowParent = row.parentNode;\n            rowParent.removeChild(row);\n            if (!rowParent.rows.length) {\n                dom.remove(rowParent);\n            }\n        }\n    },\n    createNewTable: function(data) {\n        var cmd = this;\n        var doc = cmd.editor.document;\n        var tableProp = data.tableProperties;\n        var table = dom.create(doc, TABLE);\n        var rowIndex = 0;\n        var thead;\n\n        cmd._updateTableProperties(table, tableProp);\n        cmd._updateCaption(table, tableProp);\n\n        if (tableProp.headerRows && tableProp.headerRows > 0) {\n            thead = table.createTHead();\n            cmd._createTableRows(data, thead, rowIndex, true);\n            rowIndex += tableProp.headerRows;\n        }\n\n        var tbody = table.createTBody();\n        cmd._createTableRows(data, tbody, rowIndex, false);\n\n        dom.reMapTableColumns(table, COL_INDEX);\n\n        if (tableProp.cellsWithHeaders === \"ids\") {\n            dom.associateWithIds(table);\n        } else if (tableProp.cellsWithHeaders === \"scope\") {\n            cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n        }\n\n        dom.clearTableMappings(table, COL_INDEX);\n\n        return table;\n    },\n    _createTableRows: function(data, container, initialIndex, headerRows) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var cellProp = data.cellProperties;\n        var columns = tableProp.columns;\n        var rows = headerRows ? tableProp.headerRows : tableProp.rows;\n        var cellPropToAll = cellProp.selectAllCells;\n        var headerColumns = tableProp.headerColumns;\n\n        for (var r = initialIndex, row; r < rows; r++) {\n            row = container.insertRow();\n\n            for (var c = 0, cell; c < columns; c++) {\n                if (headerRows || headerColumns > c) {\n                    cell = document.createElement(TH);\n                } else {\n                    cell = document.createElement(TD);\n                }\n\n                row.appendChild(cell);\n                cell.innerHTML = \"&nbsp;\";\n                if (r === 0 && c === 0 && cellProp.id) {\n                    cell.id = cellProp.id;\n                }\n                cmd._updateCellProperties(cell, (cellPropToAll || (r === 0 && c === 0)) ? cellProp : {});\n            }\n        }\n    },\n    _addRows: function(lastSelectedRow, rows, tableRows) {\n        var cmd = this;\n        var rowIndex = $(lastSelectedRow).index();\n        var cellsLength = lastSelectedRow.cells.length;\n        var newRowsCount = rows - tableRows.length;\n        var parent = lastSelectedRow.parentNode;\n        var row;\n\n        while (newRowsCount) {\n            row = parent.insertRow(rowIndex + 1);\n            cmd._insertCells(cellsLength - row.cells.length, row);\n            newRowsCount--;\n        }\n    },\n    _updateColumns: function(tableRows, columns, selectedCells, lastSelectedRow) {\n        var cmd = this;\n        var last = cmd._lastInCollection;\n        var firstRowLastCell = last(tableRows[0].cells);\n        var numberOfColumns = Number(firstRowLastCell.getAttribute(COL_INDEX)) + firstRowLastCell.colSpan;\n\n        if (numberOfColumns > columns) {\n            $(tableRows).each(function(i, row) {\n                var lastCurrentCell = last(row.cells);\n                var rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n\n                while (rowColumns > columns) {\n                    if (lastCurrentCell.colSpan && lastCurrentCell.colSpan > 1) {\n                        lastCurrentCell.colSpan -= 1;\n                    } else {\n                        row.deleteCell(-1);\n                    }\n\n                    lastCurrentCell = last(row.cells);\n                    rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n                }\n            });\n        }\n\n        if (numberOfColumns < columns) {\n            var cellIndex = $(last(selectedCells) || last(lastSelectedRow.cells)).index();\n            $(tableRows).each(function(i, row) {\n                var lastCurrentCell = last(row.cells);\n                cmd._insertCells(columns - Number(lastCurrentCell.getAttribute(COL_INDEX)) - lastCurrentCell.colSpan, row, cellIndex + 1);\n            });\n        }\n    },\n    _updateTableProperties: function(table, data) {\n        var style = this._getStylesData(data);\n        dom.attr(table, {\n            cellSpacing: data.cellSpacing || null,\n            cellPadding: data.cellPadding || null,\n            className: data.className || null,\n            id: data.id || null,\n            summary: data.summary || null,\n            style: style || null\n        });\n        $(table).addClass(\"k-table\");\n    },\n    _updateCellProperties: function(cell, data) {\n        var style = this._getStylesData(data);\n        style.padding = data.cellPadding || null;\n        style.margin = data.cellMargin || null;\n        dom.attr(cell, {\n            style: style || null,\n            className: data.className || null\n        });\n    },\n    _updateCaption: function(table, data) {\n        if (table.caption && !data.captionContent) {\n            table.deleteCaption();\n        } else if (data.captionContent) {\n            var caption = table.createCaption();\n            caption.innerHTML = data.captionContent;\n            var alignment = this._getAlignmentData(data.captionAlignment);\n            dom.attr(caption, {\n                style: {\n                    textAlign: alignment.textAlign,\n                    verticalAlign: alignment.verticalAlign\n                }\n            });\n        }\n    },\n    _updateHeadersNoThead: function(table, data) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var rows = table.rows;\n        var row, cells, cell, i, j;\n\n        for (i = 0; i < rows.length; i++) {\n            row = rows[i];\n            cells = row.cells;\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                if (!cmd._isHeadingCell(cell) && (i < tableProp.headerRows || tableProp.headerColumns > cell.getAttribute(COL_INDEX))) {\n                    dom.changeTag(cell, TH, false);\n                } else if (cmd._isHeadingCell(cell) && i >= tableProp.headerRows && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TD, false);\n                }\n            }\n        }\n    },\n    _updateHeadersWithThead: function(table, data) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var thead = table.tHead;\n        var rowIndex = 0;\n        var tbody = table.tBodies[0];\n        var row, cell, i;\n\n        if (!tbody) {\n            tbody = table.createTBody();\n        }\n\n        if (tableProp.headerRows && tableProp.headerRows > 0) {\n            if (!thead) {\n                thead = table.createTHead();\n            }\n\n            while (thead.rows.length < tableProp.headerRows) {\n                thead.appendChild(tbody.rows[0]);\n            }\n\n            while (thead.rows.length > tableProp.headerRows) {\n                tbody.appendChild(thead.rows[0]);\n            }\n\n            cmd._swapToHeaderCells(thead);\n        } else if (thead) {\n            while (thead.rows.length > 0) {\n                tbody.appendChild(thead.rows[thead.rows.length - 1]);\n            }\n\n            table.deleteTHead();\n        }\n\n        while (tbody.rows.length > rowIndex) {\n            row = tbody.rows[rowIndex];\n            for (i = 0; i < row.cells.length; i++) {\n                cell = row.cells[i];\n                if (cmd._isHeadingCell(cell) && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TD, false);\n                } else if (!cmd._isHeadingCell(cell) && tableProp.headerColumns > cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TH, false);\n                }\n            }\n            rowIndex += 1;\n        }\n    },\n    _updateHeaderAssociates: function(table, tableProp) {\n        var cmd = this;\n\n        if (tableProp.cellsWithHeaders === \"ids\") {\n            if (!cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeScopes(table);\n            }\n            dom.associateWithIds(table);\n        } else if (tableProp.cellsWithHeaders === \"scope\") {\n            if (cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeAssociates(table);\n            }\n            cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n        } else {\n            if (cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeAssociates(table);\n            } else {\n                cmd._removeScopes(table);\n            }\n        }\n    },\n    _addScopes: function(table, headerRows, headerCols) {\n        var rows = table.rows;\n        var i, j, row, cell;\n\n        for (i = 0; i < rows.length; i++) {\n            row = rows[i];\n\n            for (j = 0; j < row.cells.length; j++) {\n                cell = row.cells[j];\n\n                if (i < headerRows) {\n                    cell.setAttribute(SCOPE, COL);\n                } else if (cell.getAttribute(COL_INDEX) < headerCols) {\n                    cell.setAttribute(SCOPE, ROW);\n                }\n            }\n        }\n    },\n    _removeScopes: function(table) {\n        $(table).find(TH).removeAttr(SCOPE);\n        $(table).find(COL).remove();\n        $(table).find(COLGROUP).remove();\n    },\n    _removeAssociates: function(table) {\n        $(table).find(\"th, td\").removeAttr(\"id headers\");\n    },\n    _swapToHeaderCells: function(thead) {\n        var tds = $(thead).find(\"td\");\n        var swapCell = function(index, cell) {\n            dom.changeTag(cell, TH, false);\n        };\n        tds.each(swapCell);\n    },\n    _getStylesData: function(data) {\n        var alignment = this._getAlignmentData(data.alignment);\n        var whiteSpace = \"wrapText\" in data ? (data.wrapText ? \"\" : \"nowrap\") : null;\n\n        return {\n            width: data.width ? data.width + data.widthUnit : null,\n            height: data.height ? data.height + data.heightUnit : null,\n            textAlign: alignment.textAlign,\n            verticalAlign: alignment.verticalAlign,\n            backgroundColor: data.bgColor || \"\",\n            borderWidth: data.borderWidth,\n            borderStyle: data.borderStyle,\n            borderColor: data.borderColor || \"\",\n            borderCollapse: data.collapseBorders ? \"collapse\" : null,\n            whiteSpace: whiteSpace\n        };\n    },\n    _getAlignmentData: function(alignment) {\n        var textAlign = \"\";\n        var verticalAlign = textAlign;\n\n        if (alignment) {\n            if (alignment.indexOf(\" \") != -1) {\n                var align = alignment.split(\" \");\n                textAlign = align[0];\n                verticalAlign = align[1];\n            } else {\n                textAlign = alignment;\n            }\n        }\n        return { textAlign: textAlign, verticalAlign: verticalAlign };\n    },\n    parseTable: function(table, selectedCells) {\n        if (!table) {\n            return { tableProperties: {}, selectedCells: [] };\n        }\n\n        var cmd = this;\n        var tStyle = table.style;\n        var rows = table.rows;\n        var caption = table.caption;\n        var captionClone = $(caption ? caption.cloneNode(true) : undefined);\n        captionClone.find(\".k-marker\").remove();\n\n        var cssClass = table.className;\n        cssClass = cssClass.replace(/^k-table\\s|\\sk-table$/, \"\");\n        cssClass = cssClass.replace(/\\sk-table\\s/, \" \");\n        cssClass = cssClass.replace(/^k-table$/, \"\");\n\n        var tableAlignment = cmd._getAlignment(table, true);\n        var captionAlignment = caption ? cmd._getAlignment(caption) : undefined;\n        var numberOfHeaderRows = dom._getNumberOfHeaderRows(table);\n\n        var cellsWithHeaders;\n        if (cmd.cellsWithHeadersAssociated(table)) {\n            cellsWithHeaders = \"ids\";\n        } else if ($(table).find(\"th[scope]\").length > 0) {\n            cellsWithHeaders = \"scope\";\n        } else {\n            cellsWithHeaders = \"none\";\n        }\n\n        dom.reMapTableColumns(table, COL_INDEX);\n        var numberOfColumns = dom._getNumberOfColumns(table);\n        var numberOfHeaderColumns = dom._getNumberOfHeaderColumns(table, numberOfHeaderRows);\n        dom.clearTableMappings(table, COL_INDEX);\n\n        var tableJson = {\n            tableProperties: {\n                width: tStyle.width || table.width ? parseFloat(tStyle.width || table.width) : null,\n                height: tStyle.height || table.height ? parseFloat(tStyle.height || table.height) : null,\n                columns: numberOfColumns,\n                rows: rows.length,\n                widthUnit: cmd._getUnit(tStyle.width),\n                heightUnit: cmd._getUnit(tStyle.height),\n                cellSpacing: table.cellSpacing,\n                cellPadding: table.cellPadding,\n                alignment: tableAlignment.textAlign,\n                bgColor: tStyle.backgroundColor || table.bgColor,\n                className: cssClass,\n                id: table.id,\n                borderWidth: tStyle.borderWidth || table.border,\n                borderColor: tStyle.borderColor,\n                borderStyle: tStyle.borderStyle || \"\",\n                collapseBorders: !!tStyle.borderCollapse,\n                summary: table.summary,\n                captionContent: caption ? captionClone.html() : \"\",\n                captionAlignment: caption && captionAlignment.textAlign ? captionAlignment.textAlign + \" \" + captionAlignment.verticalAlign : \"\",\n                headerRows: numberOfHeaderRows,\n                headerColumns: numberOfHeaderColumns,\n                cellsWithHeaders: cellsWithHeaders\n            },\n            selectedCells: []\n        };\n\n        tableJson.rows = cmd.parseTableRows(rows, selectedCells, tableJson);\n\n        return tableJson;\n    },\n    parseTableRows: function(rows, selectedCells, tableJson) {\n        var cmd = this;\n        var data = [], row, rowData, cells, cell, cellData;\n        for (var i = 0; i < rows.length; i++) {\n            row = rows[i];\n            rowData = { cells: [] };\n            cells = row.cells;\n            data.push(rowData);\n            for (var j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                cellData = cmd.parseCell(cell);\n                if ($.inArray(cell, selectedCells) != -1) {\n                    tableJson.selectedCells.push(cellData);\n                }\n                rowData.cells.push(cellData);\n            }\n        }\n        return data;\n    },\n    parseCell: function(cell) {\n        var cmd = this;\n        var cStyle = cell.style;\n        var alignment = cmd._getAlignment(cell);\n        alignment = alignment.textAlign ? alignment.textAlign + \" \" + alignment.verticalAlign : \"\";\n\n        var data = {\n            width: cStyle.width || cell.width ? parseFloat(cStyle.width || cell.width) : null,\n            height: cStyle.height || cell.height ? parseFloat(cStyle.height || cell.height) : null,\n            widthUnit: cmd._getUnit(cStyle.width),\n            heightUnit: cmd._getUnit(cStyle.height),\n            cellMargin: cStyle.margin,\n            cellPadding: cStyle.padding,\n            alignment: alignment,\n            bgColor: cStyle.backgroundColor || cell.bgColor,\n            className: cell.className,\n            id: cell.id,\n            borderWidth: cStyle.borderWidth || cell.border,\n            borderColor: cStyle.borderColor,\n            borderStyle: cStyle.borderStyle,\n            wrapText: cStyle.whiteSpace != \"nowrap\"\n        };\n\n        return data;\n    },\n    _getAlignment: function(element, horizontalOnly) {\n        var style = element.style;\n        var hAlign = style.textAlign || element.align || \"\";\n        if (horizontalOnly) {\n            return { textAlign: hAlign };\n        }\n        var vAlign = style.verticalAlign || element.vAlign || \"\";\n        if (hAlign && vAlign) {\n            return { textAlign: hAlign, verticalAlign: vAlign };\n        }\n        if (!hAlign && vAlign) {\n            return { textAlign: \"left\", verticalAlign: vAlign };\n        }\n        if (hAlign && !vAlign) {\n            return { textAlign: hAlign, verticalAlign: \"top\" };\n        }\n        return { textAlign: \"\", verticalAlign: \"\" };\n    },\n    _getUnit: function(value) {\n        var unit = (value || \"\").match(reUnit);\n        return unit ? unit[0] : \"px\";\n    },\n    _selectedTable: function(range) {\n        var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n        return tableFormatFinder.findSuitable(nodes)[0];\n    },\n    _selectedCells: function(range) {\n        var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n        return cellsFormatFinder.findSuitable(nodes);\n    },\n    _lastInCollection: function(collection) {\n        return collection[collection.length - 1];\n    }\n});\n\nvar TableWizardTool = Editor.Tool.extend({\n    command: function(options) {\n        options.insertNewTable = this.options.insertNewTable;\n        return new TableWizardCommand(options);\n    }\n});\n\nvar TableWizardEditTool = TableWizardTool.extend({\n    update: function(ui, nodes) {\n        var isFormatted = !tableFormatFinder.isFormatted(nodes);\n\n        if (isFormatted === true) {\n            ui.parent().addClass(\"k-hidden k-disabled\");\n            ui.attr(\"disabled\", \"disabled\");\n            ui.addClass(\"k-disabled\");\n        } else {\n            ui.parent().removeClass(\"k-hidden k-disabled\");\n            ui.prop(\"disabled\", false);\n            ui.removeClass(\"k-disabled\");\n        }\n    }\n});\n\nkendo.ui.editor.TableWizardTool = TableWizardTool;\nkendo.ui.editor.TableWizardCommand = TableWizardCommand;\n\nregisterTool(\"tableWizard\", new TableWizardEditTool({ command: TableWizardCommand, insertNewTable: false, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Table Wizard\" }) }));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) {\n    (a3 || a2)(); });\n(function(f, define) {\n   define('editor/table-wizard/table-wizard-dialog',[\"./table-wizard-command\", \"kendo.tabstrip\"], f);\n})(function() {\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    numericTextBoxSettings = { format: \"0\", min: 0 },\n    units = [\"px\", \"em\"],\n    borderStyles = [\"solid\", \"dotted\", \"dashed\", \"double\", \"groove\", \"ridge\", \"inset\", \"outset\", \"initial\", \"inherit\", \"none\", \"hidden\"];\n\nvar DEFAULT_NUMBER_OF_COLS_AND_ROWS = 4;\n\nvar tableAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"k-icon k-i-table-align-middle-left\",\n        value: \"left\"\n    }, {\n        className: \"k-icon k-i-table-align-middle-center\",\n        value: \"center\"\n    }, {\n        className: \"k-icon k-i-table-align-middle-right\",\n        value: \"right\"\n    }, {\n        className: \"k-icon k-i-align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: \"<span class='#: className #' title='#: tooltip #'></span>\",\n    valueTemplate: \"<span class='k-align-group #: className #' title='#: tooltip #'></span>\"\n};\n\nvar cellAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"k-icon k-i-table-align-top-left\",\n        value: \"left top\"\n    }, {\n        className: \"k-icon k-i-table-align-top-center\",\n        value: \"center top\"\n    }, {\n        className: \"k-icon k-i-table-align-top-right\",\n        value: \"right top\"\n    }, {\n        className: \"k-icon k-i-table-align-middle-left\",\n        value: \"left middle\"\n    }, {\n        className: \"k-icon k-i-table-align-middle-center\",\n        value: \"center middle\"\n    }, {\n        className: \"k-icon k-i-table-align-middle-right\",\n        value: \"right middle\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-left\",\n        value: \"left bottom\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-center\",\n        value: \"center bottom\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-right\",\n        value: \"right bottom\"\n    }, {\n        className: \"k-icon k-i-align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: \"<span class='#: className #' title='#: tooltip #'></span>\",\n    valueTemplate: \"<span class='k-align-group #: className #' title='#: tooltip #'></span>\"\n};\n\nvar accessibilityAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"k-icon k-i-table-align-top-left\",\n        value: \"left top\"\n    }, {\n        className: \"k-icon k-i-table-align-top-center\",\n        value: \"center top\"\n    }, {\n        className: \"k-icon k-i-table-align-top-right\",\n        value: \"right top\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-left\",\n        value: \"left bottom\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-center\",\n        value: \"center bottom\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-right\",\n        value: \"right bottom\"\n    }, {\n        className: \"k-icon k-i-align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: \"<span class='#: className #' title='#: tooltip #'></span>\",\n    valueTemplate: \"<span class='k-align-group #: className #' title='#: tooltip #'></span>\"\n};\n\nvar dialogTemplate =\n    '<div class=\"k-editor-dialog k-editor-table-wizard-dialog k-action-window k-popup-edit-form\">' +\n        '<div class=\"k-edit-form-container\">' +\n            '<div id=\"k-table-wizard-tabs\" class=\"k-root-tabs\">' +\n                '<ul>' +\n                    '<li class=\"k-active\">#= messages.tableTab #</li>' +\n                    '<li>#= messages.cellTab #</li>' +\n                    '<li>#= messages.accessibilityTab #</li>' +\n                '</ul>' +\n                '<div id=\"k-table-properties\">' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-width\">#= messages.width #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-width\" />' +\n                        '<input id=\"k-editor-table-width-type\" aria-label=\"#= messages.units #\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-height\">#= messages.height #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-height\" />' +\n                        '<input id=\"k-editor-table-height-type\" aria-label=\"#= messages.units #\" />' +\n                    '</div>' +\n\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-columns\">#= messages.columns #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-columns\" />' +\n                    '</div>' +\n\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-rows\">#= messages.rows #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-rows\" />' +\n                    '</div>' +\n\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-cell-spacing\">#= messages.cellSpacing #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-cell-spacing\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-cell-padding\">#= messages.cellPadding #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-cell-padding\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-alignment\">#= messages.alignment #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-table-alignment\" class=\"k-align\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-bg\">#= messages.background #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-table-bg\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-css-class\">#= messages.cssClass #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-css-class\" class=\"k-input-inner\" type=\"text\" /></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-id\">#= messages.id #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-id\" class=\"k-input-inner\" type=\"text\" /></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-border-width\">#= messages.border #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-border-width\" />' +\n                        '<input id=\"k-editor-border-color\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-border-style\">#= messages.borderStyle #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-border-style\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">&nbsp;</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-collapse-borders\" type=\"checkbox\" class=\"k-checkbox k-checkbox-md k-rounded-md\" />' +\n                        '<label for=\"k-editor-collapse-borders\" class=\"k-checkbox-label\">#= messages.collapseBorders #</label>' +\n                    '</div>' +\n                '</div>' +\n\n                '<div id=\"k-cell-properties\">' +\n\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-selectAllCells\" type=\"checkbox\" class=\"k-checkbox k-checkbox-md k-rounded-md\" />' +\n                        '<label for=\"k-editor-selectAllCells\" class=\"k-checkbox-label\">#= messages.selectAllCells #</label>' +\n                    '</div>' +\n\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-width\">#= messages.width #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-cell-width\" />' +\n                        '<input id=\"k-editor-cell-width-type\" aria-label=\"#= messages.units #\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-height\">#= messages.height #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-cell-height\" />' +\n                        '<input id=\"k-editor-cell-height-type\" aria-label=\"#= messages.units #\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-cell-margin\">#= messages.cellMargin #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-cell-margin\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-cells-padding\">#= messages.cellPadding #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-cells-padding\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-alignment\">#= messages.alignment #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-cell-alignment\" class=\"k-align\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-bg\">#= messages.background #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-cell-bg\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-css-class\">#= messages.cssClass #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-cell-css-class\" class=\"k-input-inner\" type=\"text\" /></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-id\">#= messages.id #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-cell-id\" class=\"k-input-inner\" type=\"text\" /></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-border-width\">#= messages.border #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-cell-border-width\" />' +\n                        '<input id=\"k-editor-cell-border-color\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-border-style\">#= messages.borderStyle #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-cell-border-style\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">&nbsp;</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-wrap-text\" type=\"checkbox\" class=\"k-checkbox k-checkbox-md k-rounded-md\" />' +\n                        '<label for=\"k-editor-wrap-text\" class=\"k-checkbox-label\">#= messages.wrapText #</label>' +\n                    '</div>' +\n                '</div>' +\n\n                '<div id=\"k-accessibility-properties\">' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-header-rows\">#= messages.headerRows #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-header-rows\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-header-columns\">#= messages.headerColumns #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-header-columns\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-caption\">#= messages.caption #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-table-caption\" class=\"k-input-inner\" type=\"text\"/></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-accessibility-alignment\">#= messages.alignment #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-accessibility-alignment\" class=\"k-align\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-accessibility-summary\">#= messages.summary #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-input k-textarea k-input-solid k-input-md k-rounded-md\"><textarea id=\"k-editor-accessibility-summary\" rows=\"5\" class=\"k-input-inner k-editor-accessibility-summary\" placeholder=\"#= messages.tableSummaryPlaceholder #\"></textarea></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cells-headers\">#= messages.associateCellsWithHeaders #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<select id=\"k-editor-cells-headers\">' +\n                            '<option value=\"none\">#= messages.associateNone #</option>' +\n                            '<option value=\"scope\">#= messages.associateScope #</option>' +\n                            '<option value=\"ids\">#= messages.associateIds #</option>' +\n                        '</select>' +\n                    '</div>' +\n                '</div>' +\n                '</div>' +\n                '<div class=\"k-edit-buttons\">' +\n                '<button class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary k-dialog-ok\"><span class=\"k-button-text\">#= messages.dialogOk #</span></button>' +\n                '<button class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-dialog-close\"><span class=\"k-button-text\">#= messages.dialogCancel #</span></button>' +\n            '</div>' +\n        '</div>' +\n    '</div>';\n\nvar TableWizardDialog = kendo.Class.extend({\n    init: function(options) {\n        this.options = options;\n    },\n    open: function() {\n        var that = this,\n            options = that.options,\n            dialogOptions = options.dialogOptions,\n            tableData = options.table,\n            dialog,\n            messages = options.messages,\n            isIE = kendo.support.browser.msie;\n\n        function close(e) {\n            e.preventDefault();\n            that.destroy();\n            dialog.destroy();\n        }\n\n        function okHandler(e) {\n            that.collectDialogValues(tableData);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n\n            options.closeCallback(tableData);\n        }\n\n        function closeHandler(e) {\n            close(e);\n            options.closeCallback();\n        }\n\n        dialogOptions.close = closeHandler;\n        dialogOptions.title = messages.tableWizard;\n        dialogOptions.visible = options.visible;\n\n        dialog = $(that._dialogTemplate(messages)).appendTo(document.body)\n            .kendoWindow(dialogOptions)\n            .closest(\".k-window\").toggleClass(\"k-rtl\", options.isRtl).end()\n            .find(\".k-dialog-ok\").on(\"click\", okHandler).end()\n            .find(\".k-dialog-close\").on(\"click\", closeHandler).end()\n            .data(\"kendoWindow\");\n\n        var element = dialog.element;\n        that._initTabStripComponent(element);\n        that._initTableViewComponents(element, tableData);\n        that._initCellViewComponents(element, tableData);\n        that._initAccessibilityViewComponents(element, tableData);\n\n        dialog.center();\n        dialog.open();\n\n        if (isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n    },\n\n    _initTabStripComponent: function(element) {\n        var components = this.components = {};\n        components.tabStrip = element.find(\"#k-table-wizard-tabs\").kendoTabStrip({\n            animation: false\n        }).data(\"kendoTabStrip\");\n    },\n\n    collectDialogValues: function() {\n        var that = this;\n        var data = that.options.table;\n        that._collectTableViewValues(data);\n        that._collectCellViewValues(data);\n        that._collectAccessibilityViewValues(data);\n    },\n\n    _collectTableViewValues: function(tableData) {\n        var tableView = this.components.tableView;\n        var tableProperties = tableData.tableProperties;\n        tableProperties.width = tableView.width.value();\n        tableProperties.widthUnit = tableView.widthUnit.value();\n        tableProperties.height = tableView.height.value();\n        tableProperties.columns = tableView.columns.value();\n        tableProperties.rows = tableView.rows.value();\n        tableProperties.heightUnit = tableView.heightUnit.value();\n        tableProperties.cellSpacing = tableView.cellSpacing.value();\n        tableProperties.cellPadding = tableView.cellPadding.value();\n        tableProperties.alignment = tableView.alignment.value();\n        tableProperties.bgColor = tableView.bgColor.value();\n        tableProperties.className = tableView.className.value;\n        tableProperties.id = tableView.id.value;\n        tableProperties.borderWidth = tableView.borderWidth.value();\n        tableProperties.borderColor = tableView.borderColor.value();\n        tableProperties.borderStyle = tableView.borderStyle.value();\n        tableProperties.collapseBorders = tableView.collapseBorders.checked;\n    },\n\n    _collectCellViewValues: function(table) {\n        var cellData = table.cellProperties = {};\n        var cellView = this.components.cellView;\n\n        cellData.selectAllCells = cellView.selectAllCells.checked;\n        cellData.width = cellView.width.value();\n        cellData.widthUnit = cellView.widthUnit.value();\n        cellData.height = cellView.height.value();\n        cellData.heightUnit = cellView.heightUnit.value();\n        cellData.cellMargin = cellView.cellMargin.value();\n        cellData.cellPadding = cellView.cellPadding.value();\n        cellData.alignment = cellView.alignment.value();\n        cellData.bgColor = cellView.bgColor.value();\n        cellData.className = cellView.className.value;\n        cellData.id = cellView.id.value;\n        cellData.borderWidth = cellView.borderWidth.value();\n        cellData.borderColor = cellView.borderColor.value();\n        cellData.borderStyle = cellView.borderStyle.value();\n        cellData.wrapText = cellView.wrapText.checked;\n\n        if (!cellData.width) {\n            cellData.selectAllCells = true;\n            cellData.width = 100 / table.tableProperties.columns;\n            cellData.widthUnit = \"%\";\n        }\n    },\n\n   _collectAccessibilityViewValues: function(table) {\n        var tableProperties = table.tableProperties;\n        var accessibilityView = this.components.accessibilityView;\n        tableProperties.captionContent = accessibilityView.captionContent.value;\n        tableProperties.captionAlignment = accessibilityView.captionAlignment.value();\n        tableProperties.summary = accessibilityView.summary.value;\n        tableProperties.cellsWithHeaders = accessibilityView.cellsWithHeaders.value();\n\n        tableProperties.headerRows = accessibilityView.headerRows.value();\n        tableProperties.headerColumns = accessibilityView.headerColumns.value();\n    },\n    _addUnit: function(units, value) {\n        if (value && $.inArray(value, units) == -1) {\n            units.push(value);\n        }\n    },\n    _initTableViewComponents: function(element, table) {\n        var that = this;\n        var components = that.components;\n        var tableView = components.tableView = {};\n        var tableProperties = table.tableProperties = table.tableProperties || {};\n        tableProperties.borderStyle = tableProperties.borderStyle || \"\";\n\n        var onColumnsNumberChange = function(args) {\n            var accessibilityView = that.components.accessibilityView;\n            var headerColumnsNumeric = accessibilityView.headerColumns;\n            var currentNumberOfColumnsHeaders = headerColumnsNumeric.value();\n            var numberOfColumns = args.sender.value();\n\n            if (numberOfColumns < currentNumberOfColumnsHeaders) {\n                headerColumnsNumeric.value(numberOfColumns);\n            }\n\n            headerColumnsNumeric.max(numberOfColumns);\n        };\n\n        var onRowsNumberChange = function(args) {\n            var accessibilityView = that.components.accessibilityView;\n            var headerRowsNumeric = accessibilityView.headerRows;\n            var currentNumberOfRowHeaders = headerRowsNumeric.value();\n            var numberOfRows = args.sender.value();\n\n            if (numberOfRows < currentNumberOfRowHeaders) {\n                headerRowsNumeric.value(numberOfRows);\n            }\n\n            headerRowsNumeric.max(numberOfRows);\n        };\n\n        that._addUnit(units, tableProperties.widthUnit);\n        that._addUnit(units, tableProperties.heightUnit);\n\n        that._initNumericTextbox(element.find(\"#k-editor-table-width\"), \"width\", tableProperties, tableView);\n        that._initNumericTextbox(element.find(\"#k-editor-table-height\"), \"height\", tableProperties, tableView);\n        that._initNumericTextbox(element.find(\"#k-editor-table-columns\"), \"columns\", tableProperties, tableView, { min: 1, value: DEFAULT_NUMBER_OF_COLS_AND_ROWS, change: onColumnsNumberChange });\n        that._initNumericTextbox(element.find(\"#k-editor-table-rows\"), \"rows\", tableProperties, tableView, { min: 1, value: DEFAULT_NUMBER_OF_COLS_AND_ROWS, change: onRowsNumberChange });\n        that._initDropDownList(element.find(\"#k-editor-table-width-type\"), \"widthUnit\", tableProperties, tableView, units);\n        that._initDropDownList(element.find(\"#k-editor-table-height-type\"), \"heightUnit\", tableProperties, tableView, units);\n        that._initNumericTextbox(element.find(\"#k-editor-table-cell-spacing\"), \"cellSpacing\", tableProperties, tableView);\n        that._initNumericTextbox(element.find(\"#k-editor-table-cell-padding\"), \"cellPadding\", tableProperties, tableView);\n        that._initTableAlignmentDropDown(element.find(\"#k-editor-table-alignment\"), tableProperties);\n        that._initColorPicker(element.find(\"#k-editor-table-bg\"), \"bgColor\", tableProperties, tableView);\n        that._initInput(element.find(\"#k-editor-css-class\"), \"className\", tableProperties, tableView);\n        that._initInput(element.find(\"#k-editor-id\"), \"id\", tableProperties, tableView);\n        that._initNumericTextbox(element.find(\"#k-editor-border-width\"), \"borderWidth\", tableProperties, tableView);\n        that._initColorPicker(element.find(\"#k-editor-border-color\"), \"borderColor\", tableProperties, tableView);\n        that._initBorderStyleDropDown(element.find(\"#k-editor-border-style\"), \"borderStyle\", tableProperties, tableView, borderStyles);\n        that._initCheckbox(element.find(\"#k-editor-collapse-borders\"), \"collapseBorders\", tableProperties, tableView);\n    },\n\n    _initCellViewComponents: function(element, table) {\n        var components = this.components;\n        var cellView = components.cellView = {};\n        table.selectedCells = table.selectedCells = table.selectedCells || [];\n        var cellProperties = table.selectedCells[0] || { borderStyle: \"\", wrapText: true };\n        this._addUnit(units, cellProperties.widthUnit);\n        this._addUnit(units, cellProperties.heightUnit);\n\n        this._initCheckbox(element.find(\"#k-editor-selectAllCells\"), \"selectAllCells\", table.tableProperties, cellView);\n        this._initNumericTextbox(element.find(\"#k-editor-cell-width\"), \"width\", cellProperties, cellView);\n        this._initNumericTextbox(element.find(\"#k-editor-cell-height\"), \"height\", cellProperties, cellView);\n        this._initDropDownList(element.find(\"#k-editor-cell-width-type\"), \"widthUnit\", cellProperties, cellView, units);\n        this._initDropDownList(element.find(\"#k-editor-cell-height-type\"), \"heightUnit\", cellProperties, cellView, units);\n        this._initNumericTextbox(element.find(\"#k-editor-table-cell-margin\"), \"cellMargin\", cellProperties, cellView);\n        this._initNumericTextbox(element.find(\"#k-editor-table-cells-padding\"), \"cellPadding\", cellProperties, cellView);\n        this._initCellAlignmentDropDown(element.find(\"#k-editor-cell-alignment\"), cellProperties);\n        this._initColorPicker(element.find(\"#k-editor-cell-bg\"), \"bgColor\", cellProperties, cellView);\n        this._initInput(element.find(\"#k-editor-cell-css-class\"), \"className\", cellProperties, cellView);\n        this._initInput(element.find(\"#k-editor-cell-id\"), \"id\", cellProperties, cellView);\n        this._initNumericTextbox(element.find(\"#k-editor-cell-border-width\"), \"borderWidth\", cellProperties, cellView);\n        this._initColorPicker(element.find(\"#k-editor-cell-border-color\"), \"borderColor\", cellProperties, cellView);\n        this._initBorderStyleDropDown(element.find(\"#k-editor-cell-border-style\"), \"borderStyle\", cellProperties, cellView, borderStyles);\n        this._initCheckbox(element.find(\"#k-editor-wrap-text\"), \"wrapText\", cellProperties, cellView);\n    },\n\n    _initAccessibilityViewComponents: function(element, table) {\n        var components = this.components;\n        var accessibilityView = components.accessibilityView = {};\n        var tableProperties = table.tableProperties;\n\n        this._initInput(element.find(\"#k-editor-table-caption\"), \"captionContent\", tableProperties, accessibilityView);\n        this._initAccessibilityAlignmentDropDown(element.find(\"#k-editor-accessibility-alignment\"), tableProperties);\n        this._initInput(element.find(\"#k-editor-accessibility-summary\"), \"summary\", tableProperties, accessibilityView);\n        this._initAssociationDropDown(element.find(\"#k-editor-cells-headers\"), \"cellsWithHeaders\", { valuePrimitive: true }, tableProperties, accessibilityView);\n        this._initNumericTextbox(element.find(\"#k-editor-table-header-rows\"), \"headerRows\", tableProperties, accessibilityView, { max: tableProperties.rows || DEFAULT_NUMBER_OF_COLS_AND_ROWS });\n        this._initNumericTextbox(element.find(\"#k-editor-table-header-columns\"), \"headerColumns\", tableProperties, accessibilityView, { max: tableProperties.columns || DEFAULT_NUMBER_OF_COLS_AND_ROWS });\n    },\n\n    _initNumericTextbox: function(element, property, data, storage, settings) {\n        var component = storage[property] = element.kendoNumericTextBox(\n                settings ? $.extend({}, numericTextBoxSettings, settings) : numericTextBoxSettings\n            ).data(\"kendoNumericTextBox\");\n        if (property in data) {\n            component.value(parseInt(data[property], 10));\n        }\n    },\n\n    _initDropDownList: function(element, property, data, storage, dataSource) {\n        var component = storage[property] = element.kendoDropDownList({\n            dataSource: dataSource\n        }).data(\"kendoDropDownList\");\n        this._setComponentValue(component, data, property);\n    },\n\n    _initBorderStyleDropDown: function(element, property, data, storage, dataSource) {\n        var component = storage[property] = element.kendoDropDownList({\n            dataSource: dataSource,\n            optionLabel: this.options.messages.borderNone\n        }).data(\"kendoDropDownList\");\n        this._setComponentValue(component, data, property);\n    },\n\n    _initTableAlignmentDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var tableView = this.components.tableView;\n        var dataSource = tableAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeft;\n        dataSource[1].tooltip = messages.alignCenter;\n        dataSource[2].tooltip = messages.alignRight;\n        dataSource[3].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, tableAlignmentDropDownSettings, \"alignment\", data, tableView);\n    },\n\n    _initCellAlignmentDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var cellView = this.components.cellView;\n        var dataSource = cellAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeftTop;\n        dataSource[1].tooltip = messages.alignCenterTop;\n        dataSource[2].tooltip = messages.alignRightTop;\n        dataSource[3].tooltip = messages.alignLeftMiddle;\n        dataSource[4].tooltip = messages.alignCenterMiddle;\n        dataSource[5].tooltip = messages.alignRightMiddle;\n        dataSource[6].tooltip = messages.alignLeftBottom;\n        dataSource[7].tooltip = messages.alignCenterBottom;\n        dataSource[8].tooltip = messages.alignRightBottom;\n        dataSource[9].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, cellAlignmentDropDownSettings, \"alignment\", data, cellView);\n    },\n\n    _initAccessibilityAlignmentDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var accessibilityView = this.components.accessibilityView;\n        var dataSource = accessibilityAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeftTop;\n        dataSource[1].tooltip = messages.alignCenterTop;\n        dataSource[2].tooltip = messages.alignRightTop;\n        dataSource[3].tooltip = messages.alignLeftBottom;\n        dataSource[4].tooltip = messages.alignCenterBottom;\n        dataSource[5].tooltip = messages.alignRightBottom;\n        dataSource[6].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, accessibilityAlignmentDropDownSettings, \"captionAlignment\", data, accessibilityView);\n    },\n    _initAlignmentDropDown: function(element, settings, name, data, storage) {\n        var component = storage[name] =\n            element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n        component.list.addClass('k-align').css('width', '110px');\n        this._setComponentValue(component, data, name);\n    },\n    _initAssociationDropDown: function(element, name, settings, data, storage) {\n        var component = storage[name] =\n            element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n        this._setComponentValue(component, data, name);\n    },\n    _setComponentValue: function(component, data, property) {\n        if (property in data) {\n            component.value(data[property]);\n        }\n    },\n\n    _initColorPicker: function(element, property, data, storage) {\n        var component = storage[property] =\n            element.kendoColorPicker({ buttons: false, clearButton: true }).data(\"kendoColorPicker\");\n\n        if (data[property]) {\n            component.value(data[property]);\n        }\n    },\n    _initInput: function(element, property, data, storage) {\n        var component = storage[property] = element.get(0);\n        if (property in data) {\n            component.value = data[property];\n        }\n    },\n\n    _initCheckbox: function(element, property, data, storage) {\n        var component = storage[property] = element.get(0);\n        if (property in data) {\n            component.checked = data[property];\n        }\n    },\n\n    destroy: function() {\n        this._destroyComponents(this.components.tableView);\n        this._destroyComponents(this.components.cellView);\n        this._destroyComponents(this.components.accessibilityView);\n        this._destroyComponents(this.components);\n\n        delete this.components;\n    },\n    _destroyComponents: function(components) {\n        for (var widget in components) {\n            if (components[widget].destroy) {\n                components[widget].destroy();\n            }\n            delete components[widget];\n        }\n    },\n\n    _dialogTemplate: function(messages) {\n        return kendo.template(dialogTemplate)({ messages: messages });\n    }\n});\n\nkendo.ui.editor.TableWizardDialog = TableWizardDialog;\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) {\n    (a3 || a2)(); });\n(function(f, define) {\n    define('kendo.editor',[\n        \"kendo.combobox\", \"kendo.dropdownlist\", \"kendo.resizable\", \"kendo.window\", \"kendo.colorpicker\", \"kendo.imagebrowser\", \"kendo.numerictextbox\",\n\n        \"./util/undoredostack\",\n        \"./editor/main\",\n        \"./editor/dom\",\n        \"./editor/serializer\",\n        \"./editor/range\",\n        \"./editor/command\",\n        \"./editor/components\",\n        \"./editor/toolbar\",\n        \"./editor/immutables\",\n\n        \"./editor/plugins/viewhtml\",\n        \"./editor/plugins/link\",\n        \"./editor/plugins/lists\",\n        \"./editor/plugins/formatting\",\n        \"./editor/plugins/image\",\n        \"./editor/plugins/import\",\n        \"./editor/plugins/insert\",\n        \"./editor/plugins/export\",\n        \"./editor/plugins/indent\",\n        \"./editor/plugins/linebreak\",\n        \"./editor/plugins/format\",\n        \"./editor/plugins/inlineformat\",\n        \"./editor/plugins/formatblock\",\n        \"./editor/plugins/file\",\n        \"./editor/plugins/tables\",\n        \"./editor/plugins/clipboard\",\n        \"./editor/plugins/keyboard\",\n        \"./editor/plugins/exportpdf\",\n        \"./editor/plugins/print\",\n        \"./editor/plugins/formatpainter\",\n\n        \"./editor/resizing/column-resizing\",\n        \"./editor/resizing/row-resizing\",\n        \"./editor/resizing/element-resizing\",\n        \"./editor/resizing/element-resize-handle\",\n        \"./editor/table-wizard/table-wizard-command\",\n        \"./editor/table-wizard/table-wizard-dialog\"\n    ], f);\n})(function() {\n\n    var __meta__ = {\n        id: \"editor\",\n        name: \"Editor\",\n        category: \"web\",\n        description: \"Rich text editor component\",\n        depends: [ \"combobox\", \"dropdownlist\", \"window\", \"colorpicker\" ],\n        features: [ {\n            id: \"editor-imagebrowser\",\n            name: \"Image Browser\",\n            description: \"Support for uploading and inserting images\",\n            depends: [ \"imagebrowser\" ]\n        }, {\n            id: \"editor-resizable\",\n            name: \"Resize handle\",\n            description: \"Support for resizing the content area via a resize handle\",\n            depends: [ \"resizable\" ]\n        }, {\n            id: \"editor-tablewizard\",\n            name: \"Table wizard dialog\",\n            description: \"Support for table properties configuration\",\n            depends: [ \"tabstrip\", \"button\", \"numerictextbox\" ]\n        }, {\n            id: \"editor-pdf-export\",\n            name: \"PDF export\",\n            description: \"Export Editor content as PDF\",\n            depends: [ \"pdf\", \"drawing\" ]\n        }]\n    };\n\n\treturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n"],"names":["define","kendo","UndoRedoStack","Observable","extend","init","options","fn","call","this","clear","events","push","command","stack","slice","currentCommandIndex","undo","canUndo","trigger","redo","canRedo","length","deepExtend","util","amd","a1","a2","a3","$","window","jQuery","undefined","Class","Widget","ui","os","support","mobileOS","browser","keys","SELECT","SELECT_OVERLAY_SELECTOR","PLACEHOLDER_CLASS","PLACEHOLDER_TAG_ID","REFRESH_INTERVAL","DEFAULT_LANGUAGE","ToolTemplate","getHtml","template","useWithBlock","EditorUtils","editorWrapperTemplate","buttonTemplate","iconTextButtonTemplate","tableWizardButtonTemplate","colorPickerTemplate","comboBoxTemplate","dropDownListTemplate","separatorTemplate","overflowAnchorTemplate","formatByName","name","format","i","inArray","tags","getToolCssClass","toolCssClassNames","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","insertUpperRomanList","insertLowerRomanList","import","indent","outdent","createLink","unlink","insertImage","insertFile","viewHtml","foreColor","backColor","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","mergeCellsHorizontally","mergeCellsVertically","splitCellHorizontally","splitCellVertically","tableWizard","tableWizardInsert","tableAlignLeft","tableAlignCenter","tableAlignRight","cleanFormatting","copyFormat","applyFormat","cssClass","registerTool","toolName","tool","toolOptions","toLowerCase","Editor","defaultTools","registerFormat","formatName","formats","cacheComments","content","comments","index","replace","retrieveComments","messages","supportedContentEditable","document","documentElement","toolGroups","basic","alignment","lists","indenting","formatPainter","links","tables","element","that","value","editorNS","editor","toolbarContainer","toolbarOptions","type","domElement","dom","Dom","tools","_registerHandler","closest","update","bind","_wrapTextarea","wrapper","find","id","attr","addClass","popup","insertBefore","toolbar","Toolbar","bindTo","setTimeout","heightStyle","style","height","expectedHeight","parseInt","actualHeight","indexOf","isNaN","_resizable","_initializeContentElement","keyboard","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","SelectAllHandler","clipboard","Clipboard","undoRedoStack","textarea","encoded","defaultValue","trim","deserializedRoot","Serializer","htmlToDom","deserialization","getAllComments","innerHTML","mousedown","_endTyping","mouseup","e","_mouseup","_initializeImmutables","_ariaLabel","resize","notify","setOptions","_initializePlaceholder","_togglePlaceholder","show","body","$body","placeholder","toggleClass","isTypingInProgress","endTyping","saveSelection","_selectionChange","_selectionStarted","resizable","isResizable","isPlainObject","draggableElement","insertAfter","kendoResizable","start","currentTarget","initialSize","last","append","delta","y","initialDelta","newSize","min","max","Infinity","Math","resizeend","remove","ios","resizableWidget","getKendoResizable","draggable","ignore","_initializeElementResizing","ElementResizingFactory","current","create","_showElementResizeHandlesProxy","_showElementResizeHandles","_destroyElementResizing","elementResizing","destroy","unbind","parentNode","showResizeHandles","_initializeColumnResizing","ColumnResizing","_destroyColumnResizing","columnResizing","_initializeRowResizing","RowResizing","_destroyRowResizing","rowResizing","w","width","h","editorWrap","editArea","css","appendTo","_createContentElement","stylesheets","iframe","wnd","doc","specifiedDomain","domain","domainScript","src","lang","hide","title","editAreaTitle","frameBorder","tabIndex","location","hostname","contentWindow","contentDocument","one","decorateFrom","getElementsByTagName","getAttribute","open","write","isRtl","edge","chrome","map","href","join","close","_blur","old","val","_oldValue","encodedValue","_spellCorrect","beforeCorrection","falseTrigger","contextmenu","_spellCorrectTimeout","RestorePoint","getRange","input","mozilla","_finishUpdate","handler","NS","eventNames","_handlers","t","hasOwnProperty","applyEventMap","split","on","_deregisterHandlers","handlers","off","blurTrigger","mousedownTrigger","createElement","setAttribute","appendChild","interval","setInterval","clearInterval","_mousedown","execCommand","touch","keydown","_activeElement","focus","mouseover dragenter","htmlHeight","parentElement","target","nodeName","_cachedHeight","mouseout dragleave drop contextmenu","restoreHeight","range","keyCode","BACKSPACE","DELETE","F10","preventPopupHide","preventDefault","LEFT","RIGHT","left","container","offset","direction","next","nextChar","nodeType","nodeValue","setStart","collapse","selectRange","toolFromShortcut","keyPressCommand","test","exec","_runPostContentKeyCommands","clearTimeout","keypress","keyup","selectionCodes","TAB","PAGEUP","PAGEDOWN","END","HOME","UP","DOWN","INSERT","ctrlKey","altKey","shiftKey","_refreshInterval","click","createRange","selectNode","cut copy paste drop dragover","focusin","hasAttribute","focusout","active","toolbarContainerElement","get","contains","focused","removeClass","$head","head","immutables","Immutables","parents","stopPropagation","gecko","which","is","tagName","toolsFromShortcut","o","cmd","changesContent","refresh","_destroyResizings","bold","italic","underline","strikethrough","insertHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","emptyFolder","uploadFile","overflowAnchor","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","fileText","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogOk","dialogCancel","createTableHint","tableTab","cellTab","accessibilityTab","caption","summary","units","cellSpacing","cellPadding","cellMargin","background","border","borderStyle","collapseBorders","wrapText","associateCellsWithHeaders","alignLeft","alignCenter","alignRight","alignLeftTop","alignCenterTop","alignRightTop","alignLeftMiddle","alignCenterMiddle","alignRightMiddle","alignLeftBottom","alignCenterBottom","alignRightBottom","alignRemove","columns","rows","selectAllCells","exportAs","print","headerRows","headerColumns","tableSummaryPlaceholder","associateNone","associateScope","associateIds","borderNone","custom","serialization","entities","semantic","scripts","optimizeTags","keepEOL","pasteCleanup","all","keepNewLines","msAllFormatting","msConvertLists","msTags","none","span","dialogOptions","modal","animation","imageBrowser","fileBrowser","text","concat","_focusOutside","_destroyUploadWidget","dispose","msie","tempInput","_uploadWidget","state","finder","RangeUtils","textNodes","collapsed","startContainer","getFormat","isFormatted","html","currentHtml","domToXhtml","selectionRestorePoint","refreshTools","commonAncestorContainer","_focusBody","activeElement","scrollTop","scrollHeight","clientHeight","restoreSelection","toRange","encode","getSelection","SelectionUtils","selectionFromDocument","selection","removeAllRanges","addRange","rangeCount","getRangeAt","endContainer","startOffset","endOffset","_containsRange","isAncestorOrSelf","_deleteSavedRange","_range","selectedHtml","cloneContents","paste","InsertHtmlCommand","params","prevented","Error","toolById","async","change","managesUndoRedo","Tool","plugin","initialize","unselectable","aria-label","commandArguments","noop","UndoTool","nodes","emptyElementContent","key","ctrl","emptyTableCellContent","PDFMixin","prototype","_drawPDF","drawing","drawDOM","pdf","saveAsPDF","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","proxyTarget","forceProxy","resolve","fail","err","reject","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","makeMap","items","obj","len","empty","nonListBlockElements","blockElements","block","selfClosing","inlineElements","inline","fillAttrs","nonEmptyNonTextContentElements","normalize","node","version","parent","firstChild","prev","nextSibling","whitespace","emptyspace","rgb","bom","whitespaceOrBom","persistedScrollTop","cssAttributes","htmlRe","entityRe","entityTable","34","38","39","60","62","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","402","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","931","932","933","934","935","936","937","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","977","978","982","8226","8230","8242","8243","8254","8260","8472","8465","8476","8482","8501","8592","8593","8594","8595","8596","8629","8656","8657","8658","8659","8660","8704","8706","8707","8709","8711","8712","8713","8715","8719","8721","8722","8727","8730","8733","8734","8736","8743","8744","8745","8746","8747","8756","8764","8773","8776","8800","8801","8804","8805","8834","8835","8836","8838","8839","8853","8855","8869","8901","8968","8969","8970","8971","9001","9002","9674","9824","9827","9829","9830","338","339","352","353","376","710","732","8194","8195","8201","8204","8205","8206","8207","8211","8212","8216","8217","8218","8220","8221","8222","8224","8225","8240","8249","8250","8364","findNodeIndex","skipText","previousSibling","isDataNode","data","isAncestorOf","findClosestAncestor","rootElem","iterator","createNodeIterator","NodeFilter","SHOW_COMMENT","FILTER_ACCEPT","curNode","nextNode","getNodeLength","childNodes","splitDataNode","newNode","cloneNode","denormalizedText","temp","deleteData","attrEquals","attributes","cssFloat","blockParentOrBody","parentOfType","ownerDocument","blockParents","blocks","windowFromDocument","defaultView","parentWindow","nodeTypes","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","toHex","color","matches","x","toString","encodableChars","c","charCode","charCodeAt","entity","isBom","stripBom","stripBomNode","removeChild","insignificant","className","_moz_dirty","_moz_editor_bogus_node","tableCell","significantNodes","grep","child","emptyTextNode","emptyNode","significantChildNodes","isWhitespace","lastTextNode","result","lastChild","isMarker","allowsTextContent","every","allWhitespaceContent","isEmptyspace","htmlIndentSpace","sibling","el","isBlock","isPrevBlock","isNextBlock","isSelfClosing","isEmpty","isInline","isBr","list","scrollContainer","compatMode","scrollingElement","scrollTo","toStart","windowHeight","innerHeight","elementTop","elementHeight","marker","top","offsetHeight","ceil","persistScrollTop","offsetParent","offsetTop","offsetLeft","restoreScrollTop","insertAt","newElement","position","referenceElement","removeChildren","removeTextSiblings","closestBy","condition","rootCondition","ofType","changeTag","skipAttributes","attribute","specified","cssText","editableParent","contentEditable","wrap","unwrap","createEmptyNode","removeAttribute","mergeAttributes","origin","traverseCss","each","unstyle","inlineStyle","getEffectiveBackground","backgroundStyle","innerText","classNames","classes","commonAncestor","count","arguments","paths","minPathLength","output","ancestors","first","j","reverse","closestSplittableParent","apply","editableParents","editableAncestor","closestEditable","types","editable","closestEditableOfType","filter","invert","filterFn","filterBy","match","ensureTrailingBreaks","elements","ensureTrailingBreak","removeTrailingBreak","br","reMapTableColumns","table","colAttr","_mapColIndices","clearTableMappings","removeAttr","registeredColumns","rowIndex","cells","colIndex","cellIndex","cell","rowSpan","_mapColspan","colSpan","ci","ri","associateWithIds","numberOfTheadRows","tableRows","numberOfTableRows","theadMatrix","tbodyMatrix","theadRows","tHead","_getNumberOfHeaderRows","_generateIdsForColumns","_generateIdsForRows","_assignIds","timestamp","Date","getTime","row","col","colspan","rowspan","k","l","headers","pushHeaderId","forEach","_onlyUnique","_getNumberOfColumns","numberOfCols","currentIndex","Number","_getNumberOfHeaderColumns","numberOfHeaderRows","thead","number","self","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","bomSpan","div","supportsLeadingWhitespace","isFunction","TD","toEditableHtml","_toEditableImmutables","immutable","prependTo","_fillEmptyElements","p","children","_removeSystemElements","_resetOrderedLists","ols","ol","originalStart","_preventScriptExecution","attributesToRemove","deserialize","semanticFilter","mapStart","tag","tagMap","end","k:script","skipEncoding","canOptimize","specifiedAttributes","semanticAttributes","textDecoration","font","fontFamily","size","strong","em","b","u","item","styleObj","splice","face","script","cssProperties","property","properties","lastIndex","styleAttr","$node","htmlEncode","skip","childNode","isEmptyBomNode","mapper","previous","jqNode","serialize","hasClass","shouldOptimize","textOnly","childrenCount","textChild","runCustom","DropDownList","SelectBox","_initSelectOverlay","autoSize","listWidth","whiteSpace","_listWidth","scrollbar","fillMode","rounded","selectBox","view","dataSource","select","decorate","registerPrefix","registerValues","prop","values","roundedValues","selectionFromWindow","W3CSelection","selectionFromRange","rangeDocument","documentFromRange","W3CRange","updateRangeProperties","fixIvalidRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","RangeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","compareBoundaries","startAncestor","endAncestor","isInvalidRange","ex","fromNode","_current","_next","_end","hasNext","traverse","callback","inStartContainer","inEndContainer","nodeIndex","getSubRange","subRange","textRange","createTextRange","adoptContainer","textRangeContainer","adoptEndPoint","compareEndPoints","movedStart","movedEnd","duplicate","right","textOffset","isData","anchorNode","anchorParent","cursor","cursorNode","moveToElementText","setEndPoint","comparison","appended","RangeEnumerator","enumerate","visit","ImmutablesRangeIterator","ImmutablesRangeEnumerator","rootNode","getEditable","nodeToPath","serializedImmutables","removeImmutables","restoreImmutables","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","Marker","caret","addCaret","removeCaret","containerIndex","textNode","add","expand","isExpandable","rangeBoundary","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","shouldNormalize","isBomSelected","charAt","collapsedToStart","startParent","endParent","startIndex","endIndex","boundary","allNodes","editableTextNodes","immutableParent","image","stringify","partition","partitionRange","contents","mapAll","mapped","getAll","predicate","selector","getMarkers","isStartOf","isEndOf","wrapSelectedElements","startEditable","endEditable","isEnd","beforeCaret","afterCaret","search","substring","complexBlocks","toolsToBeUpdated","IMMUTABALE","IMMUTABALE_MARKER_SELECTOR","IMMUTABLE_SELECTOR","expandImmutablesIn","startImmutableParent","endImmutableParent","immutablesContext","editableNodes","randomId","chars","round","random","serialized","replaceWith","deletingKey","updateToolOptions","_initOptions","_toHtml","serializationType","isDeleting","shouldCancelEvent","_cancelDeleting","_cancelTyping","typingInProgress","isTypingKey","backspace","del","cancelDeleting","nextImmutable","closestSelectionLi","closestImmutableLi","_removeImmutable","forwards","commonContainer","_nextNode","startRestorePoint","finishUpdate","endRestorePoint","GenericCommand","Command","restorePoint","formatter","lockRange","releaseRange","point","createDialog","kendoWindow","toggle","outerWidth","_outerWidth","outerHeight","_outerHeight","OVERFLOWANCHOR","focusable","toolNamesByCssClass","k-i-sup-script","k-i-sub-script","k-i-align-left","k-i-align-center","k-i-align-right","k-i-align-justify","k-i-list-unordered","k-i-list-ordered","k-i-list-roman-upper","k-i-list-roman-lower","k-i-import","k-i-indent-increase","k-i-indent-decrease","k-i-link-horizontal","k-i-unlink-horizontal","k-i-image","k-i-file-add","k-i-html","k-i-foreground-color","k-i-paint","k-i-table-insert","k-i-table-column-insert-left","k-i-table-column-insert-right","k-i-table-row-insert-above","k-i-table-row-insert-below","k-i-table-row-delete","k-i-table-column-delete","k-i-table-properties","k-i-table-wizard","k-i-table-position-left","k-i-table-position-center","k-i-table-position-right","k-i-clear-css","k-i-cells-merge-horizontally","k-i-cells-merge-vertically","k-i-cell-split-horizontally","k-i-cell-split-vertically","k-i-copy-format","k-i-apply-format",".k-i-undo","k-i-redo","OverflowAnchorTool","overflowPopup","_initPopup","_resizeHandler","onResize","groups","tablesInsert","tablesAddDelete","tablesMerge","tablesPosition","advanced","fonts","colors","overflowFlaseTools","prepend","dragHandle","effects","minHeight","visible","autoFocus","actions","dragend","_moved","_toggleOverflowStyles","_initOverflowPopup","popupTemplate","kendoPopup","anchor","copyAnchorStyles","activate","focusOverflowPopup","toolGroupFor","isCustomTool","_editor","expandTools","render","combobox","dropDown","isOpened","stopImmediatePropagation","_attachEvents","initializeTool","_toolName","description","tooltip","inheritText","_appendShortcutSequence","editorOptions","editorElement","editorOffset","_getWindowWidth","_overlaps","box","toolbarWrapper","toolbarWrapperOffset","toolbarWrapperLeft","toolbarWrapperTop","boxOffset","boxOffsetLeft","boxOffsetTop","TABINDEX","localizedText","res","shift","alt","_nativeTools","currentTool","nativeTools","toolElement","groupName","newGroupName","toolConfig","group","groupPosition","endGroup","startGroup","not","updateGroups","angular","unbindResize","popupElement","attachToolsEvents","buttons","enabledButtons","disabledButtons","dropdown","colorpicker","editorTools","focusableItems","focusElement","currentContainer","move","constrain","ESC","ENTER","SPACEBAR","_executeToolCommand","button","toolname","toCamelCase","lastIndexOf","_immutablesContext","_updateImmutablesState","uiElement","trackImmutables","display","uiData","widget","groupUi","_resize","containerWidth","toolbarWindow","_refreshWidths","_shrink","_stretch","idx","visibleGroups","_groupsWidth","_visibleGroups","eq","_hideGroup","hiddenGroups","_hiddenGroups","_showGroup","sort","a","detach","groupWidth","ViewHtmlCommand","dialog","center","FormatCommand","FormatTool","MOUSEDOWN_NS","KEYDOWN_NS","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","formatNodes","formatNode","consolidate","outerMostInline","pop","GreedyInlineFormatFinder","greedyProperty","fontAttr","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parentsUntil","addBack","toArray","GreedyInlineFormatter","action","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","initOptions","dataTextField","dataValueField","highlightFirst","newRange","ColorTool","palette","_widget","ColorPicker","closeOnSelect","views","preview","toolIcon","storedRange","_inputFocused","picker","sender","_popup","_value","toCssRgba","fontWeight","fontStyle","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","ref","UnlinkCommand","LinkCommand","url","_dialogTemplate","_initialText","img","_close","_apply","_keydown","linkUrl","_dialog","textInput","AutoLinkCommand","detectedLink","detectLink","linkMarker","linkRange","_ensureWebProtocol","startNode","traverser","LeftDomTextTraverser","cancelAtNode","detection","DomTextLinkDetection","hasProtocol","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","DomPos","_detectEnd","blank","clone","_detectStart","_isLinkDetected","puntuationOptions","extendOptions","puntuationTraverser","RightDomTextTraverser","_skipStartPuntuation","lastIndexOfRegExp","ii","indexOfRegExp","str","r","DomTextTraverser","cancel","_traverse","subText","edgeNode","splitIndex","BlockFormatFinder","suitable","candidate","f","_resolveListsItems","until","ImmutablesNS","BlockFormatter","ancestor","_handleImmutables","images","imageFormat","imageAttributes","nonImages","applyFormatting","immutableFormat","namedFormat","GreedyBlockFormatter","formatTag","immutalbeParent","ListFormatter","blockFormatter","BlockFormatTool","listElements","textAlign","float","marginLeft","marginRight","listStylePosition","ListFormatFinder","altAttr","matchesType","isList","unwrapTag","li","isImmutable","containsAny","_parentLists","merge","breakable","findSuitableNode","applyOnSection","section","pushAncestor","listStyleType","sections","lastSection","lastNodes","addLastSection","ul","fragment","ListCommand","ListTool","FormattingTool","toFormattingItem","dot","context","kendoSelectBox","autoWidth","dataItem","toJSON","dataBound","getFormattingValue","n","_ancestor","field","operator","CleanFormatCommand","tagsToClean","clean","listFormatter","unwrapListItem","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onload","onerror","showBrowser","applied","isIE","ImageBrowser","transport","read","keyDown","_imageBrowser","ev","selected","dialogHeight","loadingOverlay","ImportCommand","_initializeUploadWidget","importOptions","upload","kendoUpload","success","_onUploadSuccess","_onUploadProgress","_onUploadSelect","error","_onUploadError","complete","_onUploadComplete","showFileList","multiple","saveUrl","autoUpload","saveField","validation","allowedExtensions","maxFileSize","getKendoUpload","_trigger","clearAllFiles","_removeLoadingOverlay","response","files","validationErrors","_initLoadingOverlay","eventType","uploadEvent","_iframeWrapper","_container","postProcess","genericCommand","InsertHtmlTool","_selectBox","selectbox","initialValue","defaultExportAsItems","ExportAsCommand","exportType","postToProxy","generateForm","submit","exportAsOptions","form","method","valueInput","exportTypeInput","fileNameInput","ExportAsTool","changeHandler","displayName","unshift","valueTemplate","_exec","indentDirection","IndentFormatter","targets","parentList","mapImmutables","siblingList","nestedList","getListTypeAttr","targetIndex","styleType","targetNode","listParent","siblings","nextAll","IndentCommand","indentFormatter","OutdentCommand","OutdentTool","suitableNodes","isOutdentable","listParentsCount","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","emptyParagraphContent","paragraph","heading","tableNode","rng","parentChildrenLength","_insertParagraphAfter","NewLineCommand","filler","oldIE","kbrParent","KEDITORFILEURL","KEDITORFILETEXT","KEDITORFILETITLE","FileCommand","file","FileBrowser","_fileBrowser","ACTIVESTATE","SELECTEDSTATE","SCOPE","ROW","COL","ROWGROUP","COLGROUP","COLSPAN","ROWSPAN","TABLE","THEAD","TBODY","TR","TH","getTouches","columnTemplate","tableFormatFinder","TableCommand","skipCleaners","_tableHtml","columnHtml","rowHeight","Array","insertedTable","PopupTool","_open","_activate","_toggle","TableWizardTool","TableWizardCommand","insertNewTable","twTool","shouldContinue","InsertTableTool","cols","firstCell","lastCell","getOffset","cellWidth","cellHeight","offsetWidth","tableFromLocation","floor","clientY","clientX","scrollLeft","autoApplyNS","_setTableSize","_valid","status","initiallyVisible","selectedRows","selectedColumns","changed","tableSize","TableModificationCommand","_clearColIndexAttr","_findRowSpanCell","_resetElementResizing","_findNextTdInRow","lastTd","td","_adjustColgroups","colElements","colgroupElements","numberOfCells","colgroup","_associateHeaderIds","InsertRowCommand","cellCount","newRow","rowSpanIndex","createdCell","_appendCell","newCell","InsertColumnCommand","columnIndex","_processForColSpan","_resizeCells","selectedCell","colSpanEffect","parsedWidth","unit","calculatedWidth","parseFloat","DeleteRowCommand","rowParent","_focusElement","_handleRowSpanCells","adjacentCell","nextRow","firstRow","before","_reduceRowSpan","rowSpanValue","DeleteColumnCommand","columnCount","_handleColSpanCells","after","_reduceColSpan","colSpanValue","MergeCellsHorizontallyCommand","nextTd","_getColspan","MergeCellsVerticallyCommand","tr","targetRow","bottomTd","_getRowspan","SplitCellCommand","emptyTd","_splitCellHorizontally","_splitCellVertically","_getRowspanValue","_getColspanValue","tdToAdd","colSpanResult","rowSpanResult","TableModificationTool","commandsMap","insert","delete","column","TableFormatCommand","_showResizeHandles","TableFormatTool","isTable","align","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","originalEvent","_insertImages","when","results","onpaste","beforePaste","clipboardNode","_decoreateClipboardNode","webkit","_moveToCaretPosition","clipboardRange","afterPaste","containers","ondragover","ondrop","dataTransfer","borderWidth","overflow","margin","padding","fontVariant","lineSpacing","lineHeight","nodeOffset","caretOffset","_caretOffset","translateX","translateY","translate","-webkit-transform","transform","rangeChanged","isStartTextNode","prevLength","bomNode","splittableParent","applicable","splittable","fragmentsHtml","elm","rangeEnd","focusedTable","siblingNodes","lastSiblingIndex","lastSibling","Cleaner","replacements","customReplacements","replacement","junkReplacements","convertFontMatch","$0","$1","closing","faceRe","family","stripEmptyAnchors","listType","listData","startingSymbol","matchSymbol","symbol","isNumber","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","_checkForBullet","_getHtmlNoBullet","bulletRgx","extractListLevels","msoListRegExp","level","_createList","blockChildren","lastMargin","levels","rootMargin","rootIndex","lastRootLi","isLastRootLi","rootList","acceptedNameTags","isParentTable","listIndex","levelType","removeAttributes","significantStyles","isSignificantCss","significantCss","addSignificantStyles","attributeName","attributeValues","removeAttributeNode","createColGroup","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeTextNodes","trs","currentNode","longestRow","titles","removeFormatting","filters","DomCleaner","cleanDom","collectTags","collectAttr","TextContainer","HtmlTextLines","separators","line","lines","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","hasText","enumerator","buildText","getDefaultSeparators","htmlLines","tbody","cleaner","tdCleaner","cellText","PREVIOUS_SIBLING","getSibling","tableCells","tableCellsWrappers","tableElements","inTable","RemoveTableContent","cellsTypes","startCell","endCell","_removeContent","getNext","evt","Event","isDefaultPrevented","removeTableContent","backspaceHandler","deleteSelection","startTyping","_removeBomSpan","textContent","_addCaret","_restoreCaret","_handleDelete","caretPlaceholder","_merge","_cleanBomBefore","_handleBackspace","startAtLi","liIndex","startAtNonFirstLi","rangeStartNode","previousNode","isEndOfLink","_handleSelection","parentElementOrNode","_surroundFullyContent","_surroundFullySelectedAnchor","toLocaleLowerCase","_join","startImmutable","endImmutable","_moveMarker","_root","dest","_mergeWithTextNode","appendedNode","_isCaret","systemCommandIsInProgress","createUndoCommand","isModifierKey","isSystem","_toSelectableImmutables","_selectEditorBody","isCharacter","String","fromCharCode","modifier","_getShortcutModifier","navigator","platform","mac","toUpperCase","metaKey","matchesKey","found","matchKey","toolKey","isArray","onEndTyping","stopTyping","force","timeout","what","ExportPdfCommand","PrintCommand","CopyFormatCommand","inlineStyles","blockStyles","collectStyles","rangeNodes","populateStyles","destination","styles","nodeStyles","styleValue","styleKey","attributeKey","ApplyFormatCommand","removeEmptyElementsFromRange","cleanInlineParents","applyBlockStyles","applyInlineStyles","isEmptyInline","emptyElements","blockParent","outerWrapper","previousNodes","nextNodes","prevWrapper","nextWrapper","listItems","currentStyle","createdNode","topNode","CopyFormatTool","ApplyFormatTool","global","math","PERCENTAGE","PIXEL","REGEX_NUMBER_IN_PERCENTAGES","REGEX_NUMBER_IN_PIXELS","STRING","ResizingUtils","lowerBound","upperBound","getScrollBarWidth","calculatePercentageRatio","total","inPercentages","inPixels","toPercentages","toPixels","KEY_DOWN","MOUSE_DOWN","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_MOVE","MOUSE_UP","COMMA","DOT","LAST_CHILD","TableElementResizing","_attachEventHandlers","eventNamespace","rootElement","_destroyResizeHandle","rtl","handle","dataAttribute","detectElementBorderHovering","resizingInProgress","resizing","handleOptions","tableElement","resizeHandle","elementBorderHovered","showResizeHandle","_initResizeHandle","setResizeHandlePosition","setResizeHandleDimensions","setResizeHandleDataAttributes","_attachResizeHandleEventHandlers","_initResizable","_hideResizeMarker","markerClass","_destroyResizable","Resizable","onResizeStart","onResizeEnd","_disableKeyboard","setResizeHandleDragPosition","_enableKeyboard","_forceResizing","userEvents","ResizingFactory","resizingName","_destroyResizing","_initResizing","parentTable","resizingType","abs","RESIZE_HANDLE_CLASS","RESIZE_MARKER_CLASS","BODY","COLATTR","WIDTH","handleWidth","borderOffset","mousePosition","tableInnerElement","tBodies","scrollTopOffset","scrollLeftOffset","columnWidthOffset","scrollBarWidth","columnOffsetLeft","innerElementOffsetTop","tableHead","tableBody","fullHeight","columnWidth","columnLeftOffset","adjacentColumnWidth","resizeHandleOffsetLeft","handleOffset","rtlModifier","initialDeltaX","newWidth","initialAdjacentColumnWidth","initialColumnWidth","nextColumn","_setTableComputedWidth","_setColumnsComputedWidth","_resizeColumn","_resizeTopAndBottomColumns","_resizeAdjacentColumns","innerElementWidth","currentColumnsWidths","topAndBottomColumns","innerTableElement","deltaWidth","adjacentColumns","_resizeAdjacentColumn","adjacentColumn","RESIZE_HANDLE_MARKER_WRAPPER_CLASS","HEIGHT","handleHeight","rowOffsetLeft","rowOffsetTop","topInnerTableElement","$row","tableTopOffset","resizeHandleOffsetTop","currentRowHeight","initialTableHeight","tableHeadHeight","tableBodyHeight","initialStyleHeight","newRowHeight","_setRowsHeightInPixels","_setTableHeight","_setRowsHeightInPercentages","currentRowsHeights","newHeight","Draggable","DRAG_START","DRAG","DRAG_END","HALF_INSIDE","MOUSE_OVER","MOUSE_OUT","EAST","NORTH","NORTHEAST","NORTHWEST","SOUTH","SOUTHEAST","SOUTHWEST","WEST","ElementResizeHandle","_addStyles","_initDraggable","_initPositioningStrategy","_initDraggingStrategy","resizableElement","_destroyDraggable","_setPosition","_positioningStrategy","getPosition","_onMouseOver","_onMouseOut","HandlePositioningStrategy","_draggable","dragstart","_onDragStart","drag","_onDrag","_onDragEnd","_draggingStrategy","adjustDragDelta","deltaX","deltaY","initialDeltaY","HandleDraggingStrategy","StrategyFactory","_items","register","itemsLength","PositioningStrategyFactory","calculatePosition","handleOffsetPosition","applyHandleOffset","scrollOffsetPosition","applyScrollOffset","rootLeft","EastPositioningStrategy","NorthPositioningStrategy","NortheastPositioningStrategy","NorthwestPositioningStrategy","SouthPositioningStrategy","SoutheastPositioningStrategy","SouthwestPositioningStrategy","WestPositioningStrategy","DraggingStrategyFactory","adjustment","deltas","xAxisAdjustment","yAxisAdjustment","HorizontalDraggingStrategy","EastDraggingStrategy","WestDraggingStrategy","VerticalDraggingStrategy","NorthDraggingStrategy","SouthDraggingStrategy","HorizontalAndVerticalDraggingStrategy","NorthEastDraggingStrategy","NorthWestDraggingStrategy","SouthEastDraggingStrategy","SouthWestDraggingStrategy","RESIZE_HANDLE_WRAPPER_CLASS","TABLE_CLASS","ELEMENT_RESIZING_CLASS","DROP","COLUMN","IMG","ELEMENT_TYPES","isUndefined","ElementResizing","handles","_destroyResizeHandles","appendHandlesTo","minWidth","_resizeWidth","_resizeHeight","_getMaxDimensionValue","dimension","dimensionLowercase","parentDimension","parentScrollOffset","_initResizeHandles","_bindToResizeHandlesEvents","_onResizeHandleDragStart","_initialElementHeight","_initialElementWidth","_onResizeHandleDrag","_onResizeHandleDragEnd","TableResizing","_hasRowsInPixels","styleWidth","currentWidth","parentWidth","maxWidth","ratioValue","ratioTotalValue","constrainedWidth","_setColumnsWidth","styleHeight","currentHeight","parentHeight","maxHeight","constrainedHeight","hasRowsInPixels","parentColumn","columnsLength","isWidthInPercentages","ImageResizing","_onResizeHandleDragVertical","_onResizeHandleDragHorizontal","_onResizeHandleDragLocked","_getDeltas","initialWidth","initialHeight","MAX_SAFE_INTEGER","factory","hasImg","eventTarget","eventCurrentTarget","isResizeHandleOrChild","tableResizing","cellsFormatFinder","reUnit","COL_INDEX","HEADERS","selectedTable","_sourceTable","_selectedTable","selectedCells","_selectedTableCells","_selectedCells","closeCallback","onDialogClose","parseTable","TableWizardDialog","insertTable","createNewTable","updateTable","_ensureFocusableAfterTable","tableProp","tableProperties","_lastInCollection","lastSelectedRow","cellProp","_deleteTableRows","_addRows","_updateColumns","_updateTableProperties","cellProperties","_updateCellProperties","_updateCaption","_updateHeadersWithThead","_updateHeadersNoThead","_updateHeaderAssociates","_isHeadingRow","_isHeadingCell","cellsWithHeadersAssociated","headingIds","checkHeader","header","associatedCells","headersAttr","headersArray","some","_insertCells","insertCell","createTHead","_createTableRows","createTBody","cellsWithHeaders","_addScopes","initialIndex","cellPropToAll","insertRow","cellsLength","newRowsCount","firstRowLastCell","numberOfColumns","lastCurrentCell","rowColumns","deleteCell","_getStylesData","captionContent","deleteCaption","createCaption","_getAlignmentData","captionAlignment","verticalAlign","_swapToHeaderCells","deleteTHead","_removeScopes","_removeAssociates","headerCols","tds","swapCell","widthUnit","heightUnit","backgroundColor","bgColor","borderColor","borderCollapse","tStyle","captionClone","tableAlignment","_getAlignment","numberOfHeaderColumns","tableJson","_getUnit","parseTableRows","rowData","cellData","parseCell","cStyle","horizontalOnly","hAlign","vAlign","collection","TableWizardEditTool","numericTextBoxSettings","borderStyles","DEFAULT_NUMBER_OF_COLS_AND_ROWS","tableAlignmentDropDownSettings","cellAlignmentDropDownSettings","accessibilityAlignmentDropDownSettings","dialogTemplate","tableData","okHandler","collectDialogValues","closeHandler","_initTabStripComponent","_initTableViewComponents","_initCellViewComponents","_initAccessibilityViewComponents","components","tabStrip","kendoTabStrip","_collectTableViewValues","_collectCellViewValues","_collectAccessibilityViewValues","tableView","checked","cellView","accessibilityView","_addUnit","onColumnsNumberChange","headerColumnsNumeric","currentNumberOfColumnsHeaders","onRowsNumberChange","headerRowsNumeric","currentNumberOfRowHeaders","numberOfRows","_initNumericTextbox","_initDropDownList","_initTableAlignmentDropDown","_initColorPicker","_initInput","_initBorderStyleDropDown","_initCheckbox","_initCellAlignmentDropDown","_initAccessibilityAlignmentDropDown","_initAssociationDropDown","valuePrimitive","storage","settings","component","kendoNumericTextBox","kendoDropDownList","_setComponentValue","optionLabel","_initAlignmentDropDown","kendoColorPicker","clearButton","_destroyComponents","__meta__","category","depends","features"],"mappings":"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B,UAAW,0BACXvzB,MAAO,KAEXi8C,cAAe,YACfC,eAAgB,QAChB5hD,SAAU,4DACV4vD,cAAe,2EAGfkzB,EACA,+FACI,sCACI,qDACI,OACI,mDACA,iCACA,0CACJ,QACA,gCACI,6BACI,gEACJ,SACA,6BACI,qDACA,4EACJ,SACA,6BACI,kEACJ,SACA,6BACI,sDACA,6EACJ,SAEA,6BACI,oEACJ,SACA,6BACI,uDACJ,SAEA,6BACI,8DACJ,SACA,6BACI,oDACJ,SAEA,6BACI,6EACJ,SACA,6BACI,4DACJ,SACA,6BACI,6EACJ,SACA,6BACI,4DACJ,SACA,6BACI,wEACJ,SACA,6BACI,0DACJ,SACA,6BACI,kEACJ,SACA,6BACI,mCACJ,SACA,6BACI,iEACJ,SACA,6BACI,mJACJ,SACA,6BACI,oDACJ,SACA,6BACI,4IACJ,SACA,6BACI,kEACJ,SACA,6BACI,sDACA,uCACJ,SACA,6BACI,uEACJ,SACA,6BACI,uCACJ,SACA,yCACA,6BACI,yGACA,wGACJ,SACJ,SAEA,+BAEI,6BACI,uGACA,qGACJ,SAEA,6BACI,+DACJ,SACA,6BACI,oDACA,2EACJ,SACA,6BACI,iEACJ,SACA,6BACI,qDACA,4EACJ,SACA,6BACI,2EACJ,SACA,6BACI,2DACJ,SACA,6BACI,8EACJ,SACA,6BACI,6DACJ,SACA,6BACI,uEACJ,SACA,6BACI,yDACJ,SACA,6BACI,iEACJ,SACA,6BACI,kCACJ,SACA,6BACI,sEACJ,SACA,6BACI,wJACJ,SACA,6BACI,yDACJ,SACA,6BACI,iJACJ,SACA,6BACI,uEACJ,SACA,6BACI,2DACA,4CACJ,SACA,6BACI,4EACJ,SACA,6BACI,4CACJ,SACA,yCACA,6BACI,kGACA,0FACJ,SACJ,SAEA,wCACI,6BACI,2EACJ,SACA,6BACI,2DACJ,SACA,6BACI,iFACJ,SACA,6BACI,8DACJ,SACA,6BACI,oEACJ,SACA,6BACI,sJACJ,SACA,6BACI,gFACJ,SACA,6BACI,kEACJ,SACA,6BACI,4EACJ,SACA,6BACI,4PACJ,SACA,6BA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"}