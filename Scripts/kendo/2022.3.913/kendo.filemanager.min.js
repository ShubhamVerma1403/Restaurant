/**
 * Kendo UI v2022.3.913 (http://www.telerik.com/kendo-ui)
 * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(define){define("filemanager/commands.min",["kendo.core.min"],function(){var e=window.kendo.jQuery,l=void 0,u=window.kendo,a=e.extend,n=e.Deferred,t=u.Class,i=t.extend({init:function(e){this.options=e;this.filemanager=e.filemanager}}),o=i.extend({init:function(e){i.fn.init.call(this,e)},exec:function(){var e=this,t=e.filemanager,i=t._commandStack,n=t._viewDataSource||t.dataSource,a=e._remove.bind(e);e._item=n._createNewModel();i.push({item:e._item.toJSON()}).fail(a);n.add(e._item)},_remove:function(){var e=this,t=e.filemanager,i=t._viewDataSource||t.dataSource;i.pushDestroy(e._item)}}),r=i.extend({init:function(e){i.fn.init.call(this,e)},exec:function(){var e=this,t=e.options.target,i=e.filemanager,n=i._commandStack,a=i._view.widgetComponent.dataItem(t);if(t&&a){n.push({target:t,item:a});e.filemanager._view.edit(t)}else e._renameTreeViewItem(t)},_renameTreeViewItem:function(t){var e=this,i=e.filemanager,n=i._commandStack,a=t.data("uid"),o=e.filemanager.treeView.widgetComponent.dataSource.getByUid(a),r=e.filemanager.dataSource.get(o.id);e.filemanager._prompt({type:"rename",defaultInput:r.name,target:t}).done(function(e){n.push({target:t,item:r});r.set("name",e)})}}),d=i.extend({init:function(e){i.fn.init.call(this,e)},exec:function(){var e=this,t=e.options.target,i=e.filemanager,n=i.getSelected(),a=e.filemanager._view.widgetComponent.dataItem(t),o;if(t&&t.is(".k-selected")&&n&&n.length)o=n;else if(t&&a)o=a;else if(t){var r=t.data("uid");var d=e.filemanager.treeView.widgetComponent.dataSource.getByUid(r);var s=e.filemanager.dataSource.get(d.id);o=s}i._confirm({type:"delete",target:t}).done(function(){e.removeItems(o)})},removeItems:function(e){var t=this;t._itemsToRemove=Array.isArray(e)?e:[e];t._removeItem()},_removeItem:function(){var e=this,t=e.filemanager,i=t._commandStack,n=t.dataSource,a=!!e._itemsToRemove.length&&e._itemsToRemove.splice(0,1)[0];if(a){i.push({item:a}).then(e._removeItem.bind(e),e._removeItem.bind(e));n.remove(a)}}}),s=i.extend({init:function(e){i.fn.init.call(this,e)},exec:function(){var e=this,t=e.filemanager,i=t.dataSource,n=t._commandStack,a=e.options.items,o=i.get(e.options.target),r=o.children;for(var d=0;d<a.length;d++){var s=i.get(a[d]).toJSON();s.fileManagerNewItem=true;n.push({item:s,target:o});r.add(s)}}}),c=i.extend({init:function(e){var t=this;i.fn.init.call(t,e);t._itemsToRemove=[]},exec:function(){var e=this,t=e.filemanager,i=t._commandStack,n=t.dataSource,a=e.options.items,o=n.get(e.options.target),c=o.children,r=[];for(var d=0;d<a.length;d++){var s=n.get(a[d]);var l=s.toJSON();l.fileManagerNewItem=true;var f=i.push({item:s,target:o}).then(e._delete.bind(e));r.push(f);c.add(l)}u.whenAll(r).always(e._removeItem.bind(e))},_delete:function(e){var t=this;t._itemsToRemove.push(e.item)},_removeItem:function(){var e=this,t=e.filemanager,i=t._commandStack,n=t.dataSource,a=!!e._itemsToRemove.length&&e._itemsToRemove.splice(0,1)[0];if(a){i.push({item:a}).then(e._removeItem.bind(e),e._removeItem.bind(e));n.remove(a)}}}),f=i.extend({init:function(e){i.fn.init.call(this,e)},exec:function(){var e=this,t=e.options,i=e.filemanager,n=i.defaultSortOption;a(n,{dir:t.dir,field:t.field});i._view.widgetComponent.dataSource.sort([i.folderSortOption,n])}}),m=i.extend({init:function(e){i.fn.init.call(this,e)},exec:function(){var e=this,t=e.options,i=e.filemanager,n={field:t.field,operator:t.operator,value:t.value};i._view.widgetComponent.dataSource.filter(n)}}),p=i.extend({init:function(e){i.fn.init.call(this,e)},exec:function(){var e=this,t=e.options,i=e.filemanager;i.view(t.value);i.resize(true)}}),g=i.extend({init:function(e){i.fn.init.call(this,e)},exec:function(){var e=this,t=e.filemanager,i=t[e.options.type];if(i)i.open();else window.console.warn(u.format("The {0} dialog is not available!",e.options.type))}}),h=i.extend({init:function(e){i.fn.init.call(this,e)},exec:function(){var e=this,t=e.filemanager,i=t[e.options.type],n=e.getResizable();if(i){i.toggle();if(n)t.wrapper.find(n.options.handle).toggle()}},getResizable:function(){var e=this,t=e.filemanager,i=e.options.type;if(!t._resizeDraggable)return;return t._resizeDraggable[i]}}),v=t.extend({init:function(){var e=this;e._stack={};e._keys=[]},push:function(e){var t=this,i=u.guid();t._keys.push(i);t._stack[i]={guid:i,data:e,deferred:n()};return t._stack[i].deferred},next:function(){var e=this,t=e.keys().splice(0,1),i=e._stack[t];return i},resolve:function(e){var t=this;delete t._stack[e.guid];e.deferred.resolve(e.data)},reject:function(e){var t=this;delete t._stack[e.guid];e.deferred.reject(e.data)},keys:function(){return this._keys},empty:function(){return this.keys().length===0}});return a(u.ui,{filemanager:{FileManagerCommand:i,CommandStack:v,commands:{CreateFolderCommand:o,RenameCommand:r,DeleteCommand:d,MoveCommand:c,CopyCommand:s,SortCommand:f,SearchCommand:m,ChangeViewCommand:p,OpenDialogCommand:g,TogglePaneCommand:h}}}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("filemanager/view.min",["kendo.listview.min","kendo.treeview.min"],function(){var c=window.kendo.jQuery,m=void 0,f=window.kendo,r=f.ui,l=f.Observable,u=c.extend,a=f.keys,p="navigate",i="select",t="expand",g="change",h="open",v="load",o="keydown",n="keydownAction",d=".kendoFileManagerViewComponent",w=[],b=null,e=function(e,t){r.filemanager.ViewComponents[e]=t},_=function(e){return r.filemanager.ViewComponents[e]||null},s=l.extend({init:function(e,t,i){var n=this;n.element=t;n.options=i;if(e)n.widgetComponent=new e(t,i);else throw new Error("The widget for the ViewComponent is not available! Please add the corresponding scripts!");l.fn.init.call(n)},_bindEvents:function(){this.widgetComponent.bind("dataBinding",this._binding.bind(this));this.widgetComponent.bind("dataBound",this._bound.bind(this))},_binding:function(e){if(this.trigger("dataBinding",e))e.preventDefault()},_bound:function(){this.trigger("dataBound")},_setDSOptions:function(e,t){if(!e.dataSource&&t)e.dataSource=t},_initDragAndDrop:function(e,t){var i=this;t=t||i.options.dropFilter;e=e||i.element;i.draggable=e.kendoDraggable({filter:t,hint:i._hint.bind(i),cursorOffset:{top:-10,left:-50},holdToDrag:true,ignore:"input, .k-focusable",hold:i._hold.bind(i)}).data("kendoDraggable");i.draggable.userEvents.minHold=150;i.droptarget=e.kendoDropTargetArea({filter:t,drop:i._onDrop.bind(i),dragenter:function(e){e.dropTarget.addClass("k-filemanager-drop-target")},dragleave:function(e){e.dropTarget.removeClass("k-filemanager-drop-target")}}).data("kendoDraggable")},_hold:function(e){var t=this,i=e.currentTarget;if(!i.is(".k-selected")){if(t.widgetComponent.selectable)t.widgetComponent.selectable.clear();t.widgetComponent.select(i)}if(t.widgetComponent.selectable)t.widgetComponent.selectable.userEvents.cancel()},_hint:function(e){var t=this,i=t.widgetComponent.dataItem(e),n=t.widgetComponent.select();b=t.widgetComponent;w=n;if(n.length>1)return f.format("<div class='k-filemanager-drag-hint'><span class='k-icon k-i-{0}'></span> <span>{1} {2}</span></div>","file",n.length,t.options.messages.items);return f.format("<div class='k-filemanager-drag-hint'><span class='k-icon k-i-{0}'></span> <span>{1}</span></div>",i.isDirectory?"folder":"file",i.name)},_onDrop:function(e){var t=this,i=t.widgetComponent.dataItem(e.dropTarget),n=i.id,a=[];if(!i.isDirectory)return;for(var o=0;o<w.length;o++){var r=b.dataItem(w[o]).id;a.push(r)}this.trigger("drop",{target:n,items:a})},getSelected:function(){throw new Error("Not Implemented!")},refresh:function(e){this.widgetComponent.setDataSource(e)},destroy:function(){f.destroy(this.element)}}),k=(u(f.ui.filemanager,{ViewComponent:s,ViewComponents:{},registerViewComponent:e,getViewComponent:_}),s.extend({init:function(e,t,i){var n=this,a=i.dataSource,o=i.messages;t=u({},n.defaultOptions,t,{messages:o});n._setDSOptions(t,a);t.kendoKeydown=t.kendoKeydown||n._kendoKeydown.bind(n);s.fn.init.call(this,r.ListView,e,t);n.listView=n.widgetComponent;n._bindEvents();if(i.draggable!==false&&!a.isLocalBinding)n._initDragAndDrop()},defaultOptions:{layout:"flex",flex:{direction:"row",wrap:"wrap"},selectable:f.support.mobileOS?"row":"multiple",template:"<div class='k-listview-item' title='#:name##:extension#'>"+"<div class='k-file-preview'><span class='k-file-icon k-icon k-i-#= !isDirectory ? kendo.getFileGroup(extension, true) : 'folder' #'></span></div>"+"<div class='k-file-name file-name'>#:name##:extension#</div>"+"</div>",editTemplate:"<div class='k-listview-item'>"+"<div class='k-file-preview'><span class='k-file-icon k-icon k-i-#= !isDirectory ? kendo.getFileGroup(extension, true) : 'folder' #'></span></div>"+"<div class='k-file-name'><span class='k-textbox k-input k-input-md k-rounded-md k-input-solid'><input type='text' class='k-input-inner' data-bind='value:name' name='name' required='required' /><span></div>"+"</div>",dropFilter:".k-listview-item",navigatable:true},_bindEvents:function(){var n=this,e=n.listView;e.bind(g,n._select.bind(n));e.element.on("dblclick"+d,n._dblClick.bind(n));e.element.on("mousedown"+d,".k-listview-item:not(.k-edit-item)",n._mousedown.bind(n));e.element.on(o+d,".k-edit-item",n._keydown.bind(n));e.element.on(o+d,n._keydownAction.bind(n));e.bind("edit",function(e){var t=e.sender;var i=e.item.find("input");i.on("blur",function(){var e=t._modelFromElement(t.editable.element).dirty;t._closeEditable();if(!e)n.trigger("cancel")})});e.bind("cancel",function(){n.trigger("cancel")});s.fn._bindEvents.call(this)},_select:function(){var e=this,t=e.getSelected();e.trigger(i,{entries:t})},_keydown:function(e){var t=this;if(e.keyCode===f.keys.ESC){t.listView._closeEditable();t.trigger("cancel")}},_keydownAction:function(e){var t=this,i=c(e.target).find(".k-focus");if(i.length&&!i.is(".k-edit-item"))t.trigger(n,{target:i,keyCode:e.keyCode})},_mousedown:function(e){var t=this,i=c(e.target).closest(".k-listview-item");if(e.which===3&&!i.is(".k-selected")){t.listView.selectable.clear();t.listView.select(i)}},_kendoKeydown:function(e){var t=this;if(e.keyCode===a.ENTER&&!e.preventKendoKeydown)t._handleEnterKey(e)},_handleEnterKey:function(e){var t=this,i=c(e.target),n=t.listView.current();if(t.widgetComponent.editable&&i.is("input"))i.trigger("blur");else if(!t.widgetComponent.editable)t._triggerOpen(n);e.preventKendoKeydown=true},_dblClick:function(e){var t=this,i=c(e.target).closest(".k-listview-item");t._triggerOpen(i)},_triggerOpen:function(e){var t=this;if(e.is(".k-edit-item"))return;var i=t.listView.dataItem(e);if(i)t.trigger(h,{entry:i})},addFolder:function(){this.listView.add()},edit:function(e){var t=this,i=t.listView.select();t.listView.edit(e||i)},getSelected:function(){var e=this,t=e.listView.select(),i=[];for(var n=0;n<t.length;n++){var a=e.listView.dataItem(t[n]);if(a)i.push(a)}return i},destroy:function(){this.listView.element.off(d);s.fn.destroy.call(this)}})),y=(r.filemanager.registerViewComponent("list",k),s.extend({init:function(e,t,i){var n=this,a=i.messages;t=u({},n.defaultOptions,t,{messages:a});s.fn.init.call(this,r.TreeView,e,t);n.treeView=n.widgetComponent;n._bindEvents();if(i.draggable!==false&&!i.isLocalBinding)n._initDragAndDrop()},defaultOptions:{dataTextField:"name",dropFilter:".k-item"},_refreshDataSource:function(e){var t=this,i=t.treeView,n=e.action,a=e.node,o=null,r=i.element,d=r.attr("aria-activedescendant"),s=e.items.filter(function(e){return e.isDirectory}).map(function(e){return u({},e.toJSON(),{id:e.id||f.guid(),hasChildren:e.hasChildren,items:[]})});if(a){o=i.findByUid(i.dataSource.get(a.id).uid);i._progress(o,false)}if(!s.length)return;if(n=="itemloaded"||o&&n==="sync"){o.find(".k-item").each(function(e,t){i.remove(t)});i.append(s,o);if(t._shouldFocus){i.current(o);i.focus()}}else if(n=="remove")this._remove(s[0].id);else if(n=="itemchange"){var l=i.dataSource.get(s[0].id);if(l)l.set(e.field,s[0][e.field]);else i.append(s[0],o)}else if(!i.dataSource.data().length)i.append(s);else if(n==="sync"||n===m&&!o){i.items().each(function(e,t){i.remove(t)});i.append(s);if(t._shouldFocus){i.current(i._nextVisible(c()));i.focus()}}if(!!d&&r.find("#"+d).length===0)r.removeAttr("aria-activedescendant")},_remove:function(e){var t=this,i=t.treeView,n=i.dataSource,a=n.get(e),o;if(a){o=i.findByUid(a.uid);i.remove(o)}},_bindEvents:function(){var e=this;e.treeView.bind(i,e._navigate.bind(e));e.treeView.bind(t,e._expand.bind(e));e.treeView.element.on(o,e._keydownAction.bind(e))},_keydownAction:function(e){var t=this,i=c(e.target).find(".k-focus").closest(".k-item");t.trigger(n,{target:i,keyCode:e.keyCode})},_expand:function(e){var t=this,i=t.treeView,n=i.dataItem(e.node);e.preventDefault();t.trigger(v,{entryId:n.id})},_navigate:function(e){var t=this,i=e.node,n=t.treeView.dataItem(i),a=n.id;e.preventDefault();t.trigger(p,{path:a,entry:n.toJSON()})},_hold:c.noop,getSelected:function(){var e=this,t=e.treeView.element.find(".k-selected").closest(".k-item"),i=e.treeView.dataItem(t);return i},refresh:function(e){var t=this,i=t.treeView,n=i.dataSource.get(e),a=n&&i.findByUid(n.uid);if(n&&a){i.element.find(".k-selected").removeClass("k-selected");a.find("> div .k-in").removeClass("k-hover").addClass("k-selected")}},reload:function(){this.treeView.dataSource.read()}}));if(r.filemanager.registerViewComponent("tree",y),f.ui.Grid){var C=s.extend({init:function(e,t,i){var n=this,a=i.dataSource,o=i.messages;t=u({},n.defaultOptions,t,{messages:o});n._setDSOptions(t,a);n._setupColumns(t,o);t.kendoKeydown=t.kendoKeydown||n._kendoKeydown.bind(n);s.fn.init.call(this,r.Grid,e,t);n.grid=n.widgetComponent;n._bindEvents();if(i.draggable!==false&&!a.isLocalBinding)n._initDragAndDrop()},defaultOptions:{selectable:f.support.mobileOS?"row":"multiple",editable:{mode:"inline",confirmation:false},sortable:true,dropFilter:"tr:not(.k-grid-edit-row)",navigatable:true},_setupColumns:function(e,t){if(!e.columns)e.columns=[{field:"name",title:t.nameField||"Name",template:function(e){var t=!e.isDirectory?f.getFileGroup(e.extension,true):"folder";var i="<div class='file-group-icon'>"+"<span class='k-icon k-i-"+t+"'></span>"+"</div>"+"<div class='file-name'>"+f.htmlEncode(e.name+e.extension)+"<div>";return i}},{field:"created",title:t.dateCreatedField,format:"{0:G}"},{field:"size",title:t.sizeField,template:function(e){if(e.size>0)return f.getFileSizeMessage(e.size);else return""}}]},_bindEvents:function(){var e=this,t=e.grid;t.bind(g,e._select.bind(e));t.table.on("dblclick"+d,e._dblClick.bind(e));t.table.on("mousedown"+d,"tr:not(.k-grid-edit-row)",e._mousedown.bind(e));t.table.on(o+d,".k-grid-edit-row",e._keydown.bind(e));t.table.on(o+d,e._keydownAction.bind(e));t.bind("edit",function(){e._toggleFocusable(true)});t.bind("cancel",function(){e.trigger("cancel")});t.saveRow=c.noop;s.fn._bindEvents.call(this)},_kendoKeydown:function(e){var t=this,i=t.grid.current(),n=i?i.closest("tr[data-uid]"):null;if(n&&e.keyCode===a.ENTER&&!e.preventKendoKeydown){t._triggerOpen(n);e.preventKendoKeydown=true}if(e.keyCode===a.F2)e.preventKendoKeydown=true},_keydownAction:function(e){var t=this,i=c(e.target).find(".k-focus").closest("tr");if(i.length&&!i.is(".k-grid-edit-row"))t.trigger(n,{target:i,keyCode:e.keyCode})},_keydown:function(e){var t=this,i=t.grid;if(!c(e.target).closest(".k-grid-edit-row").length)return;if(e.keyCode===f.keys.ENTER){setTimeout(function(){var e=t.grid._editContainer||c();e.find("input").trigger("blur");t._closeEditable()});t._tryCancel()}if(e.keyCode===f.keys.ESC){i.cancelChanges();t.trigger("cancel")}},_mousedown:function(e){var t=this,i=c(e.target).closest("tr[data-uid]");if(e.which===1&&t.grid.editable){setTimeout(function(){t._closeEditable()});t._tryCancel()}if(e.which===3&&!i.is(".k-selected")){t.grid.selectable.clear();t.grid.select(i)}},_tryCancel:function(){var e=this,t=e.grid,i;if(t.editable){i=t._editContainer;if(!i.find("input").val())t.cancelChanges()}setTimeout(function(){e._toggleFocusable(false)})},_toggleFocusable:function(e){var t=this,i=t.grid;i.table.find("tr,td").children().addBack().toggleClass("k-focusable",e)},_closeEditable:function(){var e=this,t;if(e.grid.editable&&!e.grid.editable.options.model.dirty){t=e.grid._editContainer;e.grid._destroyEditable();e.grid._displayRow(t);e.trigger("cancel")}},_select:function(){var e=this,t=e.getSelected();e.trigger(i,{entries:t})},_dblClick:function(e){var t=this,i=c(e.target).closest("tr[data-uid]");t._triggerOpen(i)},_triggerOpen:function(e){var t=this;if(e.is(".k-grid-edit-row"))return;var i=t.grid.dataItem(e);if(i)t.trigger(h,{entry:i})},getSelected:function(){var e=this,t=e.grid.select(),i=[];for(var n=0;n<t.length;n++)i.push(e.grid.dataItem(t[n]));return i},addFolder:function(){this.grid.addRow()},edit:function(e){var t=this,i=t.grid.select();t.grid.editRow(e||i)},destroy:function(){this.grid.table.off(d);this.grid.element.off(d);s.fn.destroy.call(this)}});r.filemanager.registerViewComponent("grid",C)}return window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("filemanager/toolbar.min",["kendo.toolbar.min","kendo.switch.min"],function(){var d=window.kendo.jQuery,a=void 0,s=window.kendo,l=d.extend,n=s.ui.ToolBar,e=s.toolbar.Item,r=s.toolbar.TemplateItem,c="click",o="toggle",u="close",t="action",i="change",f=".fileManagerToolbar",m=n.extend({init:function(e,t){var i=this;i._extendOptions(t);n.fn.init.call(i,e,t);i._attachEvents()},events:n.fn.events.concat([t]),defaultTools:{createFolder:{type:"button",text:"New Folder",name:"createFolder",command:"CreateFolderCommand",rules:'{ "remote": true }'},upload:{type:"button",text:"Upload",name:"upload",command:"OpenDialogCommand",options:'{ "type": "uploadDialog" }',rules:'{ "remote": true }'},sortDirection:{type:"buttonGroup",text:"Sort Direction",name:"sortDirection",buttons:[{name:"sortDirectionAsc",icon:"sort-asc-sm",togglable:true,group:"sortDirection",command:"SortCommand",options:'{ "dir": "asc" }',selected:true},{name:"sortDirectionDesc",icon:"sort-desc-sm",togglable:true,group:"sortDirection",command:"SortCommand",options:'{ "dir": "desc" }'}]},sortField:{type:"splitButton",text:"Sort By",name:"sortField",command:"SortCommand",menuButtons:[{name:"nameField",text:"Name",options:'{"field": "name"}',command:"SortCommand"},{name:"typeField",text:"Type",options:'{"field": "extension"}',command:"SortCommand"},{name:"sizeField",text:"Size",options:'{"field": "size"}',command:"SortCommand"},{name:"dateCreatedField",text:"Date created",options:'{"field": "createdUtc"}',command:"SortCommand"},{name:"dateModifiedField",text:"Date modified",options:'{"field": "modifiedUtc"}',command:"SortCommand"}]},changeView:{type:"buttonGroup",text:"Change View",name:"changeView",buttons:[{name:"gridView",icon:"grid-layout",togglable:true,group:"changeView",command:"ChangeViewCommand",options:"grid"},{name:"listView",icon:"grid",togglable:true,group:"changeView",command:"ChangeViewCommand",options:"list"}]},spacer:{type:"spacer"},details:{type:"fileManagerDetailsToggle",text:"View Details",name:"details",overflow:"never",command:"TogglePaneCommand",options:'{ "type": "preview" }'},search:{type:"fileManagerSearch",text:"Search",name:"search",command:"SearchCommand",icon:"search",overflow:"never",options:'{ "field": "name", "operator": "startswith" }'}},_attachEvents:function(){var e=this;e.bind(o,e._click.bind(e));e.bind(u,e._click.bind(e));e.bind(c,e._click.bind(e));e.bind(i,e._change.bind(e))},_extendOptions:function(e){var t=this,i=e.items?e.items:Object.keys(t.defaultTools);t.options=e;t.options.items=t._extendToolsOptions(i)},_extendToolsOptions:function(e){var o=this,r=o.options.messages;if(!e.length)return;return e.map(function(e){var t=d.isPlainObject(e)&&Object.keys(e).length===1&&e.name,i,n,a;e=t?e.name:e;i=d.isPlainObject(e)?e:l({},o.defaultTools[e]);n=i.rules?JSON.parse(i.rules):{};a={"aria-label":r[i.name],title:r[i.name],"data-command":i.command,"data-options":i.options};if(i.type==="fileManagerDetailsToggle")delete a["aria-label"];s.deepExtend(i,{id:i.name+"-"+s.guid(),name:i.name,text:r[i.name],attributes:a,overflow:i.overflow});if(i.type==="buttonGroup"){delete i.attributes["aria-label"];i.buttons=i.buttons.map(o._mapButtonGroups.bind(o))}if(i.type==="splitButton")i.menuButtons=i.menuButtons.map(o._mapMenuButtons.bind(o));if(n.remote&&o.options.filemanager.dataSource.isLocalBinding)i.hidden=true;return i},o)},_mapButtonGroups:function(e){var t=this,i=t.options.messages;if(e.group==="changeView"&&e.options===t.options.filemanager.options.initialView)e.selected=true;return s.deepExtend(e,{attributes:l({},e.attributes,{"aria-label":i[e.name],title:i[e.name],"data-command":e.command,"data-options":e.options})})},_mapMenuButtons:function(e){var t=this,i=t.options.messages;return s.deepExtend(e,{text:i[e.name],attributes:l({},e.attributes,{"aria-label":i[e.name],title:i[e.name],"data-command":e.command,"data-options":e.options})})},_click:function(e){var t=d(e.target).data("command"),i=d(e.target).data("options");if(!t)return;this.action({command:t,options:i})},_change:function(e){var t=d(e.target).data("command"),i=d(e.target).data("options");i=l({},i,{value:d(e.target).val()});if(!t)return;this.action({command:t,options:i})},isToolEnabled:function(e){var t=this,i=t.options,n=false;for(var a=0;a<i.items.length;a++)if(i.items[a].name==e){n=true;break}return i.items[e]||n},action:function(e){this.trigger(t,e)},destroy:function(){if(this.fileManagerSearch)this.fileManagerSearch.destroy();n.fn.destroy.call(this)}}),p=r.extend({init:function(e,t){var i=this,n=d("<input class='k-input-inner' autocomplete='off' />"),a=d("<span class='k-input-icon k-icon k-i-search'/>"),o=d('<span class="k-searchbox k-input k-input-md k-rounded-md k-input-solid"></span>');i.input=n;i.icon=a;r.fn.init.call(this,o,e,t);i.options.type="fileManagerSearch";i.renderIcon();o.append(a).append(n);i.input.attr({placeholder:i.options.text,title:i.options.text});i._bindEvents();i.toolbar.fileManagerSearch=i},attributes:function(){if(this.options.attributes)this.input.attr(this.options.attributes)},renderIcon:function(){if(this.options.icon)this.icon.addClass("k-icon k-i-"+this.options.icon)},_bindEvents:function(){this._inputHandler=this._input.bind(this);this.input.on("input"+f,this._inputHandler)},_input:function(e){this.toolbar.trigger(i,{target:e.target})},destroy:function(){this.element.off(f)}}),g=(s.toolbar.registerComponent("fileManagerSearch",p),e.extend({init:function(e,t){var i=this,n=d("<div class='k-filemanager-details-toggle'></div>"),a=d("<label>"+e.text+"</label>"),o=d("<input title='"+e.text+"' />");i.element=n;i.input=o;i.label=a;i.options=e;i.toolbar=t;i.attributes();i.addUidAttr();i.addIdAttr();i.addOverflowAttr();i.element.append(i.label);i.element.append(i.input);i.input.attr("aria-label",e.text);i.switchInstance=new s.ui.Switch(i.input,{change:i._change.bind(i),messages:{checked:t.options.messages.detailsChecked,unchecked:t.options.messages.detailsUnchecked}});i.label.on(c+f,i._click.bind(i));i.toolbar.fileManagerDetailsToggle=i},_change:function(e){this.toolbar.trigger(i,{target:e.sender.wrapper.parent()})},_click:function(e){this.switchInstance.toggle();this.toolbar.trigger(i,{target:d(e.target).parent()})},destroy:function(){this.element.off(f)}}));return s.toolbar.registerComponent("fileManagerDetailsToggle",g),l(s.ui.filemanager,{ToolBar:m}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("filemanager/data.min",["kendo.data.min"],function(){var i=window.kendo.jQuery,l=void 0,a=window.kendo,e=i.extend,t=a.data,o=t.Node,n=t.HierarchicalDataSource,r=t.DataSource,d=(e(true,a.data,{schemas:{filemanager:{data:function(e){return e.items||e||[]},model:{id:"path",hasChildren:"hasDirectories",fields:{name:{editable:true,type:"string",defaultValue:"New Folder"},size:{editable:false,type:"number"},path:{editable:false,type:"string"},extension:{editable:false,type:"string"},isDirectory:{editable:false,defaultValue:true,type:"boolean"},hasDirectories:{editable:false,defaultValue:false,type:"boolean"},created:{type:"date",editable:false},createdUtc:{type:"date",editable:false},modified:{type:"date",editable:false},modifiedUtc:{type:"date",editable:false}}}}}}),o.define({init:function(e){var t=this,i=this.isDirectory;o.fn.init.call(this,e);if(typeof i==="string")i=a.getter(i);if(a.isFunction(i)){var n=i.call(t,t);if(n&&n.length===0)t.isDirectory=false;else t.isDirectory=!!n}if(t.isDirectory)t._initChildren()},_initChildren:function(){var i=this;var e,t,n;if(!(i.children instanceof a.data.FileManagerDataSource)){e=i.children=new a.data.FileManagerDataSource(i._childrenOptions);t=e.transport;n=t.parameterMap;t.parameterMap=function(e,t){if(t==="read"||t==="create")e.target=i.id;if(n)e=n.call(i,e,t);return e};e.parent=function(){return i};e.bind("change",function(e){e.node=e.node||i;i.trigger("change",e)});e.bind("error",function(e){var t=i.parent();if(t){e.node=e.node||i;t.trigger("error",e)}});i._updateChildrenField()}},isNew:function(){if(this.fileManagerNewItem){delete this.fileManagerNewItem;return true}return this.id===this._defaultId}})),s=n.extend({init:function(e){var t=d.define({children:e});if(e.filter&&!e.serverFiltering){this._hierarchicalFilter=e.filter;e.filter=null}r.fn.init.call(this,i.extend(true,{},{schema:{modelBase:t,model:t}},e));this.isLocalBinding=this.transport instanceof a.data.LocalTransport;this._attachBubbleHandlers()},insert:function(e,t){var i=this.parent();if(i&&i._initChildren){if(t&&t.isDirectory)i.hasDirectories=true;i.hasChildren=true;i._initChildren()}return r.fn.insert.call(this,e,t)},remove:function(e){var t=this,i=e.parentNode(),n=t,a;if(i&&i._initChildren)n=i.children;t._cleanDestroyed(e);a=r.fn.remove.call(n,e);if(i&&(n.data()&&!n.data().length))i.hasChildren=false;else if(i&&!this._hasDirectories(i))i.hasDirectories=false;return a},_cleanDestroyed:function(e){var t=this,i=t;if(e.parentNode&&e.parentNode()){e=e.parentNode();i=e.children;i._destroyed=[];t._cleanDestroyed(e)}else i._destroyed=[]},_hasDirectories:function(e){var t;if(!e.children.data())return false;t=e.children.data().filter(function(e){return e.isDirectory});return!!t.length}});return s.create=function(e){e=e&&e.push?{data:e}:e;var t=e||{},i=t.data;if(i&&i._dataSource)return i._dataSource;t.data=i;return t instanceof s?t:new s(t)},a.observableFileManagerData=function(e){var t=s.create({data:e,schema:a.data.schemas.filemanager});t.fetch();t._data._dataSource=t;return t._data},e(a.data,{FileManagerDataSource:s,FileEntry:d}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("filemanager/contextmenu.min",["kendo.menu.min"],function(){var r=window.kendo.jQuery,e=void 0,t=window.kendo,n=r.extend,i=t.template,a=t.ui.ContextMenu,o="action",d=a.extend({init:function(e,t){var i=this;a.fn.init.call(i,e,t);i._overrideTemplates();i._restrictDefaultItems();i._extendItems();i.bind("select",i._onSelect.bind(i));i.bind("open",i._onOpen.bind(i))},_overrideTemplates:function(){this.templates.sprite=i("#if(spriteCssClass) {#<span class='#= spriteCssClass #'></span>#}#")},_restrictDefaultItems:function(){var e=this;if(e.options.isLocalBinding)e.defaultItems={}},defaultItems:{rename:{text:"Rename",spriteCssClass:"k-icon k-i-edit",command:"RenameCommand"},delete:{text:"Delete",spriteCssClass:"k-icon k-i-delete",command:"DeleteCommand"}},events:a.fn.events.concat([o]),_extendItems:function(){var e=this,t=e.options.items,i,n;if(t&&t.length)for(var a=0;a<t.length;a++){i=t[a];n=r.isPlainObject(i)&&Object.keys(i).length===1&&i.name;if(n)i=i.name;if(r.isPlainObject(i)){e._extendItem(i);e.append(i)}else if(e.defaultItems[i]){i=e.defaultItems[i];e._extendItem(i);e.append(i)}}else for(var o in e.defaultItems){i=e.defaultItems[o];e._extendItem(i);e.append(i)}},_extendItem:function(e){var t=this,i=t.options.messages;n(e,{text:i[e.text],spriteCssClass:e.spriteCssClass||"",attr:{"data-command":e.command}})},_onSelect:function(e){var t=r(e.item).data("command");var i=r(e.target);if(!t)return;this.action({command:t,options:{target:i}})},_onOpen:function(e){var t=e.sender,i=t.options.items;if(!i&&r.isEmptyObject(this.defaultItems))e.preventDefault()},action:function(e){this.trigger(o,e)}});return n(t.ui.filemanager,{ContextMenu:d}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(define){define("kendo.filemanager.min",["./filemanager/commands.min","./filemanager/view.min","./filemanager/toolbar.min","./filemanager/data.min","./filemanager/contextmenu.min","kendo.breadcrumb.min","kendo.upload.min","kendo.dialog.min","kendo.resizable.min"],function(){var e={id:"filemanager",name:"FileManager",category:"web",description:"The FileManager widget displays offers file management functionality.",depends:["core","data","listview","toolbar","breadcrumb","menu","treeview","upload","dialog","switch","resizable","selectable","editable"],features:[{id:"filemanager-grid-view",name:"GridView",description:"Support for GridView",depends:["grid"]}]},s=window.kendo.jQuery,g=void 0,r=kendo.ui,d=s.extend,h=s.isPlainObject,v=Array.isArray,n=r.DataBoundWidget,w=kendo.template,b=kendo._outerHeight,a="navigate",_="select",l="open",c="error",k="change",y="upload",C="success",S="close",D="hide",x="load",f="dataBinding",F="dataBound",o="drop",V="execute",u="command",T="keydownAction",z="cancel",I="tree",m=".",p={wrapper:"k-widget k-filemanager",header:"k-filemanager-header",navigation:"k-filemanager-navigation",contentContainer:"k-filemanager-content-container",content:"k-filemanager-content",preview:"k-filemanager-preview",toolbar:"k-filemanager-toolbar",treeview:"k-filemanager-treeview",breadcrumb:"k-filemanager-breadcrumb",view:"k-filemanager-view",grid:"k-filemanager-grid",list:"k-filemanager-listview",upload:"k-filemanager-upload",uploadDialog:"k-filemanager-upload-dialog",splitBar:"k-splitbar",splitBarHorizontal:"k-splitbar-horizontal k-splitbar-draggable-horizontal",splitBarHover:"k-splitbar-horizontal-hover",splitBarIcon:"k-icon k-resize-handle",splitBarNavigation:"k-filemanager-splitbar-navigation",splitBarPreview:"k-filemanager-splitbar-preview",resizable:"k-filemanager-resizable"},M={filePreview:"k-file-preview",fileInfo:"k-file-info",fileName:"k-file-name",fileMeta:"k-file-meta",metaLabel:"k-file-meta-label",metaValue:"k-file-meta-value",extension:"k-file-type",size:"k-file-size",created:"k-file-created",modified:"k-file-modified"},t,i,B,O,P=n.extend({init:function(e,t){var i=this;n.fn.init.call(i,e,t);i.options=kendo.deepExtend({},i.options,t);i.defaultSortOption={field:"name",dir:"asc"};i.folderSortOption={field:"isDirectory",dir:"desc"};i._commandStack=new r.filemanager.CommandStack;i._dataSource();i._wrapper();i._renderHeader();i._renderContentContainer();i._initContextMenu();i._renderNavigation();i._renderContent();i._renderPreview();i._initUploadDialog();i._resizable();i.resize();kendo.notify(i,kendo.ui)},options:{name:"FileManager",height:500,resizable:true,initialView:{grid:"grid",list:"list"}.list,toolbar:{resizable:true},contextMenu:{},upload:{},uploadUrl:"",views:{},breadcrumb:{},draggable:true,dialogs:{upload:{width:530},moveConfirm:{width:350,closable:true},deleteConfirm:{width:360,closable:true},renamePrompt:{width:350,closable:true}},previewPane:{metaFields:["extension","size","created","modified"],noFileTemplate:""+'<div class="#:styles.fileInfo#">'+'<div class="#:styles.filePreview#">'+'<span class="k-file-icon k-icon k-i-none"></span>'+"</div>"+'<span class="#:styles.fileName#" k-no-file-selected>#: messages.noFileSelected #</span>'+"</div>",singleFileTemplate:""+'<div class="#:styles.fileInfo#">'+'<div class="#:styles.filePreview#">'+'<span class="k-file-icon k-icon k-i-#: !selection[0].isDirectory ? kendo.getFileGroup(selection[0].extension, true) : "folder" #"></span>'+"</div>"+'<span class="#:styles.fileName#">#:selection[0].name#</span>'+"#if(metaFields){#"+'<dl class="#:styles.fileMeta#">'+"#for(var i = 0; i < metaFields.length; i+=1){#"+"#var field = metaFields[i]#"+'<dt class="#:styles.metaLabel#">#:messages[field]#: </dt>'+'<dd class="#:styles.metaValue# #:styles[field]#">'+'#if(field == "size"){#'+" #:kendo.getFileSizeMessage(selection[0][field])#"+"#} else if(selection[0][field] instanceof Date) {#"+' #:kendo.toString(selection[0][field], "G")#'+'#} else if(field == "extension") {#'+' #: !selection[0].isDirectory ? kendo.getFileGroup(selection[0].extension) : "folder"#'+"#} else {#"+" #:selection[0][field]#"+"#}#"+"</dd>"+'<dd class="k-line-break"></dd>'+"# } #"+"</dl>"+"#}#"+"</div>",multipleFilesTemplate:""+'<div class="#:styles.fileInfo#">'+'<div class="#:styles.filePreview#">'+'<span class="k-file-icon k-icon k-i-file"></span>'+"</div>"+'<span class="#:styles.fileName#">'+"#:selection.length# "+"#:messages.items#"+"</span>"+"</div>"},messages:{toolbar:{createFolder:"New Folder",upload:"Upload",sortDirection:"Sort Direction",sortDirectionAsc:"Sort Direction Ascending",sortDirectionDesc:"Sort Direction Descending",sortField:"Sort By",nameField:"Name",sizeField:"File Size",typeField:"Type",dateModifiedField:"Date Modified",dateCreatedField:"Date Created",listView:"List View",gridView:"Grid View",search:"Search",details:"View Details",detailsChecked:"On",detailsUnchecked:"Off",delete:"Delete",rename:"Rename"},views:{nameField:"Name",sizeField:"File Size",typeField:"Type",dateModifiedField:"Date Modified",dateCreatedField:"Date Created",items:"items",listLabel:"FileManager ListView",gridLabel:"FileManager Grid",treeLabel:"FileManager TreeView"},dialogs:{upload:{title:"Upload Files",clear:"Clear List",done:"Done"},moveConfirm:{title:"Confirm",content:"<p style='text-align: center;'>Do you want to move or copy?</p>",okText:"Copy",cancel:"Move",close:"close"},deleteConfirm:{title:"Confirm",content:"<p style='text-align: center;'>Are you sure you want to delete the selected file(s)?</br>You cannot undo this action.</p>",okText:"Delete",cancel:"Cancel",close:"close"},renamePrompt:{title:"Prompt",content:"<p style='text-align: center;'>Enter new name for the file.</p>",okText:"Rename",cancel:"Cancel",close:"close"}},previewPane:{noFileSelected:"No File Selected",extension:"Type",size:"Size",created:"Date Created",createdUtc:"Date Created UTC",modified:"Date Modified",modifiedUtc:"Date Modified UTC",items:"items"}}},events:[a,_,l,f,F,c,o,V,u],_dataSource:function(){var e=this,t=e.options,i=t.dataSource||{},n=e.folderSortOption,a=e.defaultSortOption,o;if(!(i instanceof kendo.data.FileManagerDataSource)){if(v(i))o={data:i,autoSync:false,sort:[n,a]};else o=d(true,i,{autoSync:false,sort:[n,a]});if(i&&h(i.schema))o.schema=i.schema;else if(h(kendo.data.schemas.filemanager))o.schema=kendo.data.schemas.filemanager}else o=i;if(e.dataSource&&e._errorHandler){e.dataSource.unbind(c,e._errorHandler);e.dataSource.unbind(k,e._changeHandler)}else{e._errorHandler=e._error.bind(e);e._changeHandler=e._change.bind(e)}e.dataSource=kendo.data.FileManagerDataSource.create(o).bind(c,e._errorHandler).bind(k,e._changeHandler)},_error:function(e){if(!this.trigger(c,e))window.console.warn("Error! The requested URL returned "+e.xhr.status+" - "+e.xhr.statusText)},_wrapper:function(){var e=this,t=e.options,i=t.width,n=t.height;e.wrapper=e.element.addClass(p.wrapper);if(i)e.wrapper.width(i);if(n)e.wrapper.height(n);e._resizeHandler=kendo.onResize(function(){e.resize(true)})},_renderHeader:function(){var e=this,t=e.options;if(t.toolbar)e.header=s("<div />").addClass(p.header);e.wrapper.append(e.header);if(t.toolbar){e._initToolbar();e.toolbar._tabIndex()}},_renderContentContainer:function(){var e=this,t=s("<div />").addClass(p.contentContainer);e.contentContainer=t;e.wrapper.append(e.contentContainer)},_initContextMenu:function(){var e=this,t=e.options,i=d({},t.contextMenu,{filemanager:e,messages:t.messages.toolbar,target:e.contentContainer,filter:"[data-uid]",action:e.executeCommand.bind(e),isLocalBinding:e.dataSource.isLocalBinding});if(t.contextMenu===false)return;e.contextMenu=new r.filemanager.ContextMenu("<ul></ul>",i);e.contextMenu.bind(l,e._cacheFocus.bind(e))},_renderNavigation:function(){var e=this;e.navigation=s("<div />").addClass(p.navigation);e.navigation.append(e._initTreeView().element);e.contentContainer.append(e.navigation)},_renderContent:function(){var e=this,t=e.options,i=e.toolbar;e.content=s("<div />").addClass(p.content);if(t.breadcrumb)e.content.append(e._initBreadcrumb().element);e.content.append(e._initView());if(!i||!i.isToolEnabled(i.defaultTools.upload.name))e.content.append(e._initUpload().wrapper.hide());e.contentContainer.append(e.content)},_renderPreview:function(){var e=this,t=e.options.previewPane;if(!t)return;e.preview=s("<div />").addClass(p.preview);e.previewContainer=s("<div />").addClass(p.previewContainer);e.preview.append(e.previewContainer);e._setPreviewPaneContent();e.contentContainer.append(e.preview.hide())},_setPreviewPaneContent:function(){var e=this,t=e.options,i=t.messages.previewPane,n=t.previewPane,a=e.getSelected(),o;if(!a){o=w(n.noFileTemplate)({styles:M,messages:i});e.previewContainer.html(o);return}o=a.length===1?n.singleFileTemplate:n.multipleFilesTemplate;o=w(o)({styles:M,messages:i,selection:a,metaFields:n.metaFields});e.previewContainer.html(o)},_initToolbar:function(){var e=this,t=e.options,i=s("<div />").addClass(p.toolbar),n=d({},t.toolbar,{filemanager:this,messages:t.messages.toolbar,action:e.executeCommand.bind(e)});e.header.append(i);e.toolbar=new r.filemanager.ToolBar(i,n);return e.toolbar},_initTreeView:function(){var e=this,t=s("<div />").addClass(p.treeview),i=e.options.views[I],n=d(true,{},{dataSource:e.options.dataSource,messages:e.options.messages.views,draggable:e.options.draggable,isLocalBinding:e.dataSource.isLocalBinding});e.treeView=new r.filemanager.ViewComponents[I](t,i,n);e.treeView.bind(a,e._navigate.bind(e)).bind(x,e._load.bind(e)).bind(o,e._drop.bind(e)).bind(T,e._keydownAction.bind(e));return e.treeView},_drop:function(e){var t=this;if(!t.trigger(o,e)&&e.items.indexOf(e.target)<0)t._confirm({type:"move",target:e.target}).done(function(){t.executeCommand({command:"CopyCommand",options:e})}).fail(function(){t.executeCommand({command:"MoveCommand",options:e})})},_keydownAction:function(e){var t=this,i=e.keyCode,n=kendo.keys;if(i===n.DELETE)t.executeCommand({command:"DeleteCommand",options:{target:e.target}});if(i===n.F2)t.executeCommand({command:"RenameCommand",options:{target:e.target}})},_confirm:function(e){var t=this,i=t.options.messages.dialogs[e.type+"Confirm"];var n=s("<div></div>").kendoConfirm(d({},{title:i.title,content:i.content,messages:i},t.options.dialogs[e.type+"Confirm"])).data("kendoConfirm");n.bind(l,t._cacheFocus.bind(t));n.bind(D,t._restoreFocus.bind(t,e.target));n.open();n.wrapper.removeClass("k-confirm");return n.result},_prompt:function(e){var t=this,i=this.options.messages.dialogs[e.type+"Prompt"];var n=s("<div></div>").kendoPrompt(d({},{title:i.title,content:i.content,messages:i,value:e.defaultInput},this.options.dialogs[e.type+"Prompt"])).data("kendoPrompt");n.bind(l,t._cacheFocus.bind(t));n.bind(S,t._restoreFocus.bind(t,e.target));n.open();n.wrapper.removeClass("k-prompt");return n.result},_cacheFocus:function(){var e=this,t=s(document.activeElement),i=e.view(),n=e.treeView.widgetComponent;if(e.contextMenu&&e.contextMenu.popup.visible())return;e.treeView._shouldFocus=false;if(n.current()&&n.current().find(".k-focus").length||t.hasClass(p.treeview)){e.treeView._shouldFocus=true;i._focusElement=t;return}i._focusElement=t.hasClass(p[e._viewType])?t:null},_restoreFocus:function(e){var t=this,i=t.view();if(!e)return;if(i._focusElement)i._focusElement.trigger("focus");else if(e.closest&&e.closest(":kendoFocusable").length)e.closest(":kendoFocusable").trigger("focus")},_initView:function(){var e=this,t=s("<div />").addClass(p.view),i=e.options.initialView;e.viewWrapper=t;e.viewWrapper.append(e.view(i));return t},_initBreadcrumb:function(){var e=this,t=e.options,i=s("<nav />").addClass(p.breadcrumb),n=d({},{items:[{type:"rootitem",text:""}],change:e._breadcrumbChange.bind(e)},t.breadcrumb);e.breadcrumb=new r.Breadcrumb(i,n);return e.breadcrumb},_breadcrumbChange:function(t){var e=t.sender.items().filter(function(e){return e.path===t.value.substring(1)}).shift();this._navigate({path:e?e.id:""})},_initUploadDialog:function(){var e=this,t=e.options,i=t.messages.dialogs.upload,n=s("<div />"),a=d({},{title:i.title,modal:true,visible:false,width:500,actions:[{text:i.clear,action:e._clearUploadFilesList.bind(e)},{text:i.done,primary:true}],messages:i},t.dialogs.upload),o;if(!e._shouldInitUpload())return;o=e._initUpload();e.uploadDialog=new r.Dialog(n,a);e.uploadDialog.wrapper.addClass(p.uploadDialog);e.uploadDialog.element.append(o.wrapper);e.uploadDialog.bind(l,e._toggleUploadDropZone.bind(e,""));e.uploadDialog.bind(S,e._toggleUploadDropZone.bind(e,e.viewWrapper));return e.uploadDialog},_shouldInitUpload:function(){var e=this,t=e.options,i=false;if((t.uploadUrl||t.upload.async&&t.upload.async.saveUrl)&&t.upload!==false)i=true;return i},_initUpload:function(){var e=this,t=e.options,i=s("<input type='file' name='file'/>").addClass(p.upload),n=d(true,{async:{autoUpload:true,saveUrl:t.uploadUrl},dropZone:e.viewWrapper},t.upload);e.upload=new r.Upload(i[0],n);e.upload.bind(y,e._sendUploadPathParameter.bind(e));e.upload.bind(C,e._success.bind(e));return e.upload},_sendUploadPathParameter:function(e){e.data=d(e.data,{path:this.path()})},_success:function(){this._view.widgetComponent.dataSource.read()},_clearUploadFilesList:function(){var e=this,t=e.upload;if(t)t.clearAllFiles()},_toggleUploadDropZone:function(e){var t=this,i=t.upload;if(i)i.setOptions({dropZone:e})},_binding:function(e){if(this.trigger(f,{source:"view",action:e.action,items:e.items,index:e.index}))e.preventDefault()},_bound:function(){if(this.options.previewPane)this._setPreviewPaneContent();this.trigger(F)},_createResizableSplitBar:function(e){var t=s("<div />").addClass(p.splitBar).addClass(p.splitBarHorizontal).addClass(e),i=s("<span />").addClass(p.splitBarIcon);t.append(i);t.hover(function(){s(this).toggleClass(p.splitBarHover)});return t},_initResizableNavigation:function(){var e=this,i=e.wrapper,t=e._createResizableSplitBar(p.splitBarNavigation),n=i.find(m+p.content),a=i.find(m+p.navigation),o,r;t.insertAfter(a);e._resizeDraggable.navigation=e.wrapper.find(t).end().kendoResizable({handle:m+p.splitBarNavigation,start:function(){o=n.width();r=a.width()},resize:function(e){var t=e.x.initialDelta;if(kendo.support.isRtl(i))t*=-1;if(r+t<-2||o-t<-2)return;a.width(r+t)}}).getKendoResizable()},_initResizablePreview:function(){var e=this,i=e.wrapper,t=e._createResizableSplitBar(p.splitBarPreview),n=i.find(m+p.content),a=i.find(m+p.preview),o,r;if(!e.options.previewPane)return;t.insertBefore(a).hide();e._resizeDraggable.preview=i.find(t).end().kendoResizable({handle:m+p.splitBarPreview,start:function(){o=n.width();r=a.width()},resize:function(e){var t=e.x.initialDelta;if(kendo.support.isRtl(i))t*=-1;if(r-t<-2||o+t<-2)return;a.width(r-t)}}).getKendoResizable()},_resizable:function(){var e=this,t=e.options;e._resizeDraggable={};if(!t.resizable)return;e.wrapper.addClass(p.resizable);e._initResizableNavigation();e._initResizablePreview()},view:function(e){var t=this,i=s('<div aria-label="'+t.options.messages.views[e+"Label"]+'"></div>'),n=t.options.views[e],a=d(true,{},{dataSource:t._viewDataSource||t.dataSource,messages:t.options.messages.views,draggable:t.options.draggable});if(e===g)return t._view;if(!r.filemanager.ViewComponents[e])throw new Error(kendo.format("There is no {0} ViewComponent registered!",e));if(t._view&&t._view.destroy){t._view.destroy();t.viewWrapper.empty()}t._viewType=e;t._view=new r.filemanager.ViewComponents[e](i,n,a);t._view.bind(_,t._select.bind(t));t._view.bind(l,t._open.bind(t));t._view.bind(f,t._binding.bind(t));t._view.bind(F,t._bound.bind(t));t._view.bind(o,t._drop.bind(t));t._view.bind(T,t._keydownAction.bind(t));t._view.bind(z,t._cancel.bind(t));t._view.element.addClass(p[e]);t.viewWrapper.removeClass(Object.keys(r.filemanager.ViewComponents).map(function(e){return p.view+"-"+e}).join(" ")).addClass(p.view+"-"+e);t.viewWrapper.append(t._view.element)},executeCommand:function(e){var t=e.command,i=d({filemanager:this},h(e.options)?e.options:{value:e.options}),n=new r.filemanager.commands[t](i);if(!this.trigger(V,e))return n.exec()},_navigate:function(e){var t=this,i=e.path;if(!t.trigger(a,{path:i}))t.navigate(i)},_load:function(e){var t=this.dataSource.get(e.entryId);t.load()},_select:function(e){if(this.options.previewPane)this._setPreviewPaneContent();this.trigger(_,{entries:e.entries})},_open:function(e){var t=this,i=e.entry;t.trigger(l,{entry:i});if(i.isDirectory)t._navigate({path:i.id})},_cancel:function(){var e=this,t=e._commandStack,i=t.next();t.reject(i);e.trigger(u,{status:"cancel",action:"itemchange",data:i.data})},_change:function(t){var i=this,n=i._commandStack,e=t.node?t.node.children:i.dataSource;if(i.trigger(f,{source:"tree",action:t.action,items:t.items,index:t.index}))return;i.treeView._refreshDataSource(t);if(t.action==="remove"||t.action==="itemchange"||t.action==="add")if(n.empty())e.sync();else{var a=n.next();e.sync().then(function(e){n.resolve(a);i.trigger(u,{status:"success",action:t.action,data:a.data,response:e})}).fail(function(e){n.reject(a);i.trigger(u,{status:"fail",action:t.action,data:a.data,response:e})})}if(t.action==="remove"&&i._viewDataSource&&i._viewDataSource.parent()&&t.items[0]===i._viewDataSource.parent())i._navigateToParent(t.items[0]);if(t.action=="itemchange"&&i._viewDataSource&&i._viewDataSource.parent()&&i.path().indexOf(t.items[0].id)>=0)i._navigateToParent(t.items[0]);if(t.action==="itemchange")t.items[0].loaded(false)},_navigateToParent:function(e){var t=this;var i=e.parentNode();var n=i?i.id:"";t._navigate({path:n})},_buildBreadcrumbPath:function(e){var t=this,i=t.breadcrumb,n=[];while(e){n.push({id:e.id,text:e.name,path:e.path});e=e.parentNode&&e.parentNode()}n.push({type:"rootItem",id:"",text:""});i.items(n.reverse())},_adjustDimensions:function(){var e=this,t=e.wrapper,i=m+p.grid,n=m+p.list,a=m+p.contentContainer,o=t.height(),r=0,d=0;if(e.toolbar)r=b(e.toolbar.wrapper);if(e.breadcrumb)d=b(e.breadcrumb.wrapper);if(e.options.height!=="auto"){t.find([i].join(",")).height(o-(r+d+1));t.find(n).parent().height(o-(r+d+1));t.find(a).height(o-r)}},_resize:function(){this._adjustDimensions();kendo.resize(this.element.children())},setDataSource:function(e){var t=this;t.options.dataSource=e;t._dataSource();if(t.toolbar){t.toolbar.destroy();t.header.empty();t._initToolbar();t.toolbar._tabIndex()}if(t.treeView){t.treeView.destroy();t.navigation.empty();t.navigation.append(t._initTreeView().element)}if(t._view)t.view(t._viewType||t.options.initialView);t._initContextMenu()},refresh:function(){var e=this,t=e._viewDataSource||e.dataSource;t.read()},getSize:function(){return kendo.dimensions(this.wrapper)},getSelected:function(){var e=this,t=e._view.getSelected(),i=e.treeView;if(t&&t.length)return t;var n=i.getSelected();if(n)return[e.dataSource.get(n.id)]},path:function(){return this._path||""},navigate:function(e){var t=this,i=t.dataSource,n=i.get(e.replace(/^\//,"")),a=t._view,o=t.treeView,r=t.breadcrumb,d=e===""||e==="/";if(!n&&!d){window.console.warn("Error! Could not navigate to the folder at the requested path("+e+"). Make sure that the parent folder of the target folder has already been loaded.");return}t._path=e;if(t.trigger(f,{source:"navigation",action:"rebind",items:[n]}))return;if(r)t._buildBreadcrumbPath(n);if(d){i.sort([t.folderSortOption,t.defaultSortOption]);t._viewDataSource=i;a.refresh(t._viewDataSource);o.treeView.select(s());if(t.options.previewPane)t._setPreviewPaneContent();return}if(n.loaded&&!n.loaded())n.load();if(a){t._viewDataSource=n.children;t._viewDataSource._sort=[t.folderSortOption,t.defaultSortOption];a.refresh(t._viewDataSource)}if(o)o.refresh(n.id);if(t.options.previewPane)t._setPreviewPaneContent()},items:function(){var e=this;return e.treeView.widgetComponent.items().add(e._view.widgetComponent.items())},destroy:function(){var e=this;n.fn.destroy.call(e);e.dataSource.unbind(c,e._errorHandler).unbind(k,e._changeHandler);if(e._resizeDraggable.navigation){e._resizeDraggable.navigation.destroy();e._resizeDraggable.navigation=null}if(e._resizeDraggable.preview){e._resizeDraggable.preview.destroy();e._resizeDraggable.preview=null}if(e.uploadDialog){e.uploadDialog.destroy();e.uploadDialog=null}if(e.upload){e.upload.destroy();e.upload=null}if(e.contextMenu){e.contextMenu.destroy();e.contextMenu=null}kendo.unbindResize(e._resizeHandler);e.dataSource=null;e._viewDataSource=null;kendo.destroy(e.element)}});return r.plugin(P),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()});
//# sourceMappingURL=kendo.filemanager.min.js.map
