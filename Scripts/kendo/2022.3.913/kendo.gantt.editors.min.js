/**
 * Kendo UI v2022.3.913 (http://www.telerik.com/kendo-ui)
 * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(define){define("kendo.gantt.editors.min",["kendo.data.min","kendo.popup.min","kendo.window.min","kendo.gantt.data.min","kendo.grid.min","kendo.datetimepicker.min","kendo.numerictextbox.min","kendo.textbox.min","kendo.form.min"],function(){var t={id:"gantt.editors",name:"GanttEditors",category:"web",description:"The Gantt component editors.",depends:["data","popup","window","gantt.data","grid","datetimepicker","numerictextbox","textbox","form"],hidden:true},u=window.kendo.jQuery,e=void 0,p=window.kendo,n,s=p.support.browser,a=p.Observable,i=p.ui.Widget,r=p._outerWidth,o=u.extend({F10:121},p.keys),c=u.extend,d=u.isPlainObject,f=".kendoGantt",l="p0",h="click",g="width",b="string",m=".",k={down:{origin:"bottom left",position:"top left"},up:{origin:"top left",position:"bottom left"}},y=p.template('<div class="#=styles.popupWrapper#">'+'<ul class="#=styles.popupList#" role="listbox" aria-label="Add dropdown">'+"#for(var i = 0, l = actions.length; i < l; i++){#"+'<li tabindex="0" class="#=styles.item#" data-action="#=actions[i].data#" role="option">'+'<span class="k-link k-menu-link">'+'<span class="k-menu-link-text">#=actions[i].text#</span>'+"</span>"+"</li>"+"#}#"+"</ul>"+"</div>"),v={buttonDelete:"k-gantt-delete",buttonCancel:"k-gantt-cancel",buttonSave:"k-gantt-update",focused:"k-focus",gridContent:"k-grid-content",hovered:"k-hover",item:"k-item k-menu-item",popupWrapper:"k-popup k-menu-popup",popupList:"k-menu-group k-menu-group-md k-reset",popup:{form:"k-popup-edit-form",editForm:"k-gantt-edit-form",formContainer:"k-edit-form-container",resourcesFormContainer:"k-resources-form-container",message:"k-popup-message",buttonsContainer:"k-edit-buttons",button:"k-button",buttonDefaults:"k-button-md k-rounded-md k-button-solid k-button-solid-base",editField:"k-edit-field",editLabel:"k-edit-label",resourcesField:"k-gantt-resources"},primary:"k-button-solid-primary",toolbar:{appendButton:"k-gantt-create"}},w=function(t,e){var i={name:e.field,title:e.title};var n=e.model.fields[e.field].validation;if(n&&d(n)&&n.message)i[p.attr("dateCompare-msg")]=n.message;u('<input type="text" required '+'id="'+e.field+'"'+p.attr("type")+'="date" '+p.attr("role")+'="datetimepicker" '+p.attr("bind")+'="value:'+e.field+'" '+p.attr("validate")+"='true' />").attr(i).appendTo(t);u("<span "+p.attr("for")+'="'+e.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},x=function(t,e){u('<div class="'+v.popup.resourcesField+'" style="display:none"></div><a href="#" class="'+e.styles.button+" "+e.styles.buttonDefaults+'"><span class="k-button-text">'+e.messages.assignButton+"</span></a>").on("click",e.click).appendTo(t)},_=function(t,e){var i=e.field;var n="";if(e.model.get(i)!==null)n=e.model.get(i);t.append("<span>"+n+"</span>")},C=a.extend({init:function(t,e){a.fn.init.call(this);this.element=t;this.options=c(true,{},this.options,e);this._popup()},options:{direction:"down"},destroy:function(){clearTimeout(this._focusTimeout);this.popup.destroy();this.element.off(f);this.list.off(f);this.unbind()},_adjustListWidth:function(){var t=this.list;var e=t[0].style.width;var i=this.element;var n=r(t);var o;var a;if(!t.data(g)&&e)return;o=window.getComputedStyle?window.getComputedStyle(i[0],null):0;a=o?parseFloat(o.width):r(i);if(o&&(s.mozilla||s.msie))a+=parseFloat(o.paddingLeft)+parseFloat(o.paddingRight)+parseFloat(o.borderLeftWidth)+parseFloat(o.borderRightWidth);if(t.css("box-sizing")!=="border-box")e=a-(r(t)-t.width());else e=a;if(n>e)e=n;t.css({fontFamily:i.css("font-family"),width:e}).data(g,e)},_current:function(t){var e=this.list.find(m+v.focused);var i=e[t]();if(i.length){e.removeClass(v.focused).removeAttr("id");i.addClass(v.focused).trigger("focus")}},_popup:function(){var n=this;var t="li"+m+"k-item";var e=this.options.messages.actions;this.list=u(y({styles:v,actions:[{data:"add",text:e.addChild},{data:"insert-before",text:e.insertBefore},{data:"insert-after",text:e.insertAfter}]}));this.element.append(this.list);this.popup=new p.ui.Popup(this.list,c({anchor:this.element,open:function(){n._adjustListWidth()},animation:this.options.animation},k[this.options.direction]));this.element.on(h+f,function(t){var e=u(this);var i=e.attr(p.attr("action"));t.preventDefault();if(i)n.trigger("command",{type:i});else{n.popup.open();n.list.find("li:first").addClass(v.focused).trigger("focus")}});this.list.find(t).hover(function(){u(this).addClass(v.hovered)},function(){u(this).removeClass(v.hovered)}).end().on(h+f,t,function(){n.trigger("command",{type:u(this).attr(p.attr("action"))});n.popup.close()});this.popup.bind("close",function(){n.list.find(t).removeClass(v.focused);n.element.parents("["+p.attr("role")+'="gantt"]').find(m+v.gridContent+" > table").first().trigger("focus")});this.list.find("ul").on("keydown"+f,function(t){var e=t.keyCode;switch(e){case o.UP:t.preventDefault();n._current("prev");break;case o.DOWN:t.preventDefault();n._current("next");break;case o.ENTER:n.list.find(m+v.focused).click();break;case o.ESC:t.preventDefault();n.popup.close();break}})}}),F={desktop:{dateRange:w,resources:x,readonly:_}},D=p.Observable.extend({init:function(t,e){p.Observable.fn.init.call(this);this.element=t;this.options=c(true,{},this.options,e);this.createButton=this.options.createButton},fields:function(e,i,t){var n=this;var o=this.options;var a=o.messages.editor;var r=o.resources;var s;var d=function(t){t.preventDefault();r.editor(n.container.find(m+v.popup.resourcesField),i)};if(o.editable.template)s=u.map(i.fields,function(t,e){return{field:e}});else{s=[{field:"title",title:a.title},{field:"start",title:a.start,editor:e.dateRange},{field:"end",title:a.end,editor:e.dateRange},{field:"percentComplete",title:a.percentComplete,format:l}];if(t)s.splice.apply(s,[1,0].concat([{field:"plannedStart",title:a.plannedStart,editor:e.dateRange},{field:"plannedEnd",title:a.plannedEnd,editor:e.dateRange}]));if(i.get(r.field))s.push({field:r.field,title:a.resources,messages:a,editor:e.resources,click:d,styles:v.popup});s=s.map(function(t){if(!i.editable||i.editable(t.field))return t;else return c(true,t,{editor:e.readonly})})}return s.map(function(t){return c(true,t,{label:t.title})})},_buildEditTemplate:function(t){var e=this.options.editable.template;var i=c({},p.Template,this.options.templateSettings);var n="";if(e){if(typeof e===b)e=p.unescape(e);n+=p.template(e,i)(t)}else{this.renderForm=true;n+='<div class="k-gantt-form"></div>'}return n}}),T=D.extend({destroy:function(){this.close();this.unbind()},close:function(){var t=this;var e=function(){if(t.editable){t.container.data("kendoWindow").destroy();t.editable=null;t.container=null}if(t.popup){t.popup.destroy();t.popup=null}};if(t.editable&&t.container.is(":visible")){t.trigger("close",{window:t.container});t.container.data("kendoWindow").bind("deactivate",e).close()}else e()},editTask:function(t,e){this.editable=this._createPopupEditor(t,e)},showDialog:function(t){var i=t.buttons;var e=v.popup;var n=p.format('<div class="{0}"><div class="{1}"><p class="{2}">{3}</p><div class="{4}">',e.form,e.formContainer,e.message,t.text,e.buttonsContainer);for(var o=0,a=i.length;o<a;o++)n+=this.createButton(i[o]);n+="</div></div></div>";var r=this.element;if(this.popup)this.popup.destroy();var s=this.popup=u(n).appendTo(r).eq(0).on("click",m+e.button,function(t){t.preventDefault();s.close();var e=u(t.currentTarget).index();i[e].click()}).kendoWindow({modal:true,autoFocus:false,resizable:false,draggable:false,title:t.title,visible:false,deactivate:function(){this.destroy();r.trigger("focus")}}).getKendoWindow();s.center().open();s.element.find(".k-button-solid-primary").trigger("focus")},_createPopupEditor:function(r,s){var d=this;var t={};var e=this.options.messages;var i=v.popup;var n;var o=p.format('<div {0}="{1}" class="{2} {3}"><div class="{4}">',p.attr("uid"),r.uid,i.form,i.editForm,i.formContainer);var a=this.fields(F.desktop,r,s);o+=this._buildEditTemplate(r);o+='<div class="'+i.buttonsContainer+'">';o+=this.createButton({name:"update",text:e.save,className:v.primary});o+=this.createButton({name:"cancel",text:e.cancel});if(d.options.editable.destroy!==false)o+=this.createButton({name:"delete",text:e.destroy});o+="</div></div></div>";var l=this.container=u(o).appendTo(this.element).eq(0).kendoWindow(c({modal:true,resizable:false,draggable:true,title:e.editor.editorTitle,visible:false,close:function(t){if(t.userTriggered)if(d.trigger("cancel",{container:l,model:r}))t.preventDefault()}},t));if(this.renderForm){this.form=l.find(".k-gantt-form").kendoForm({items:a,formData:r,buttonsTemplate:"",validatable:{validateOnBlur:true}}).data("kendoForm");n=this.form.editable}else n=l.kendoEditable({model:r,clearContainer:false,validateOnBlur:true,target:d.options.target}).data("kendoEditable");p.cycleForm(l);if(!this.trigger("edit",{container:l,model:r})){l.data("kendoWindow").center().open();l.on(h+f,m+v.buttonCancel,function(t){t.preventDefault();t.stopPropagation();d.trigger("cancel",{container:l,model:r})});l.on(h+f,m+v.buttonSave,function(t){t.preventDefault();t.stopPropagation();var e=d.fields(F.desktop,r,s);var i={};var n;for(var o=0,a=e.length;o<a;o++){n=e[o].field;i[n]=r.get(n)}d.trigger("save",{container:l,model:r,updateInfo:i})});l.on(h+f,m+v.buttonDelete,function(t){t.preventDefault();t.stopPropagation();d.trigger("remove",{container:l,model:r})})}else d.trigger("cancel",{container:l,model:r});return n}}),B=i.extend({init:function(t,e){i.fn.init.call(this,t,e);this.wrapper=this.element;this.model=this.options.model;this.resourcesField=this.options.resourcesField;this.createButton=this.options.createButton;this._initContainer();this._attachHandlers()},events:["save"],close:function(){this.window.bind("deactivate",this.destroy.bind(this)).close()},destroy:function(){this._dettachHandlers();this.grid.destroy();this.grid=null;this.window.destroy();this.window=null;i.fn.destroy.call(this);p.destroy(this.wrapper);this.element=this.wrapper=null},open:function(){this.window.center().open()},_attachHandlers:function(){var o=this.grid;var e=this._cancelProxy=this._cancel.bind(this);this.container.on(h+f,m+v.buttonCancel,this._cancelProxy);this._saveProxy=this._save.bind(this);this.container.on(h+f,m+v.buttonSave,this._saveProxy);this.window.bind("close",function(t){if(t.userTriggered)e(t)});o.wrapper.on(h+f,"input[type='checkbox']",function(){var t=u(this);var e=u(t).closest("tr");var i=o.dataSource.getByUid(e.attr(p.attr("uid")));var n=u(t).is(":checked")?1:"";i.set("value",n)})},_cancel:function(t){t.preventDefault();this.close()},_createButtons:function(){var t=this.options.buttons;var e='<div class="'+v.popup.buttonsContainer+'">';for(var i=0,n=t.length;i<n;i++)e+=this.createButton(t[i]);e+="</div>";this.container.append(e)},_dettachHandlers:function(){this._cancelProxy=null;this._saveProxy=null;this.container.off(f);this.grid.wrapper.off()},_initContainer:function(){var t=this;var e=v.popup;var i=p.format('<div class="{0} {1}"><div class="{2} {3}"></div></div>"',e.form,e.editForm,e.formContainer,e.resourcesFormContainer);i=u(i);this.container=i.find(m+e.resourcesFormContainer);this.window=i.kendoWindow({modal:true,resizable:false,draggable:true,visible:false,title:this.options.messages.resourcesEditorTitle,open:function(){t.grid.resize(true)}}).data("kendoWindow");this._resourceGrid();this._createButtons()},_resourceGrid:function(){var t=this;var e=this.options.messages;var i=u('<div id="resources-grid"/>').appendTo(this.container);this.grid=new p.ui.Grid(i,{columns:[{field:"name",title:e.resourcesHeader,template:"<label><input type='checkbox' value='#=name#'"+"# if (value > 0 && value !== null) {#"+"checked='checked'"+"# } #"+"/>#=name#</labe>"},{field:"value",title:e.unitsHeader,template:function(t){var e=t.format;var i=t.value!==null?t.value:"";return e?p.toString(i,e):i}}],height:280,sortable:true,editable:true,filterable:true,dataSource:{data:t.options.data,schema:{model:{id:"id",fields:{id:{from:"id"},name:{from:"name",type:"string",editable:false},value:{from:"value",type:"number",validation:this.options.unitsValidation},format:{from:"format",type:"string"}}}}},save:function(t){var e=!!t.values.value;t.container.parent().find("input[type='checkbox']").prop("checked",e)}})},_save:function(t){t.preventDefault();this._updateModel();if(!this.wrapper.is(m+v.popup.resourcesField))this.trigger("save",{container:this.wrapper,model:this.model});this.close()},_updateModel:function(){var t=[];var e;var i=this.grid.dataSource.data();for(var n=0,o=i.length;n<o;n++){e=i[n].get("value");if(e!==null&&e>0)t.push(i[n])}this.model[this.resourcesField]=t}});return p.gantt={TaskDropDown:C,Editor:D,PopupEditor:T,ResourceEditor:B},window.kendo})}("function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()});
//# sourceMappingURL=kendo.gantt.editors.min.js.map
