/**
 * Kendo UI v2022.3.913 (http://www.telerik.com/kendo-ui)
 * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(define){define("imageeditor/toolbar.min",["kendo.toolbar.min","kendo.dropdownlist.min"],function(){var s=window.kendo.jQuery,l=void 0,m=window.kendo,a=m.ui,r=s.extend,i=m.ui.ToolBar,d=m.toolbar.TemplateItem,t="click",o="dropDownChange",n="action",c=i.extend({init:function(e,t){var o=this;o._extendOptions(t);i.fn.init.call(o,e,t);o._attachEvents();o.toggleTools()},events:i.fn.events.concat([o,n]),defaultTools:{open:{type:"button",icon:"upload",name:"open",command:"OpenImageEditorCommand",showText:"overflow"},save:{type:"button",icon:"download",name:"save",command:"SaveImageEditorCommand",showText:"overflow",toggleCondition:"canExport"},separator:{type:"separator"},undo:{type:"button",icon:"undo",name:"undo",command:"UndoImageEditorCommand",showText:"overflow",toggleCondition:"undo"},redo:{type:"button",icon:"redo",name:"redo",command:"RedoImageEditorCommand",showText:"overflow",toggleCondition:"redo"},separator1:{type:"separator"},crop:{type:"button",icon:"crop",name:"crop",command:"OpenPaneImageEditorCommand",options:"crop",showText:"overflow",toggleCondition:"canExport"},resize:{type:"button",icon:"image-resize",name:"resize",command:"OpenPaneImageEditorCommand",options:"resize",showText:"overflow",toggleCondition:"canExport"},zoomIn:{type:"button",icon:"zoom-in",name:"zoomIn",command:"ZoomImageEditorCommand",showText:"overflow",options:"zoomIn",toggleCondition:"enable"},zoomOut:{type:"button",icon:"zoom-out",name:"zoomOut",command:"ZoomImageEditorCommand",showText:"overflow",options:"zoomOut",toggleCondition:"enable"},zoomDropdown:{type:"imageEditorZoomDropDown",name:"zoomDropdown",command:"ZoomImageEditorCommand",text:"Zoom options",toggleCondition:"enable",items:[{name:"zoomActualSize",icon:"zoom-actual-size",text:"Show actual size",options:"actualSize"},{name:"zoomFitToScreen",icon:"zoom-best-fit",text:"Fit to screen",options:"fitToScreen"}]}},_attachEvents:function(){var e=this;e.bind(o,e._dropDownChange.bind(e));e.bind(t,e._click.bind(e))},_extendOptions:function(e){var t=this,o=e.items?e.items:Object.keys(t.defaultTools);t.options=e;t.options.items=t._extendToolsOptions(o)},_extendToolsOptions:function(e){var n=this,a=n.options.messages;if(!e.length)return;return e.map(function(e){var t=s.isPlainObject(e)&&Object.keys(e).length===1&&e.name,o,i;e=t?e.name:e;o=s.isPlainObject(e)?e:r({},n.defaultTools[e]);i=a[o.name]||o.text;m.deepExtend(o,{id:o.name+"-"+m.guid(),name:o.name,text:i,attributes:{"aria-label":i,title:i,"data-command":o.command,"data-options":o.options,"data-toggle":o.toggleCondition},overflow:o.overflow});if(o.type==="imageEditorZoomDropDown")o.items=n._extendToolsOptions(o.items);return o},n)},_click:function(e){var t=s(e.target).data("command"),o=s(e.target).data("options");if(!t)return;this.action({command:t,options:o})},_dropDownChange:function(e){if(!e.command)return;this.action({command:e.command,options:e.options})},action:function(e){this.trigger(n,e)},toggleTools:function(r){var d=this,e=d.element.find("[data-toggle]"),t=d.element.find(":kendoFocusable").not("[tabindex=-1]");e.each(function(e,t){var o=s(t),i=null,n=o.data("toggle"),a=r&&r[n];if(o.is("[data-role]"))i=m.widgetInstance(o);if(i&&i.enable)i.enable(a||false);else d.enable(o,a)});d.element.find(":kendoFocusable").not("[tabindex=-1]").attr("tabindex",-1);t.attr("tabindex",0)},destroy:function(){var e=this;if(e.zoomDropdown)e.zoomDropdown.destroy();i.fn.destroy.call(this)}}),e=d.extend({init:function(e,t){var o=this,i=s("<input />").attr(e.attributes),n='<span class="k-icon k-i-#:icon#"></span> #:text#';o.input=i;delete e.attributes["aria-label"];o.dropDown=new a.DropDownList(o.input,{optionLabel:{text:e.text,icon:""},dataTextField:"text",dataSource:e.items,template:n,change:o._change.bind(o)});d.fn.init.call(this,o.dropDown.wrapper,e,t);o.dropDown.list.find(".k-list-optionlabel").hide();o.toolbar.zoomDropdown=o},_change:function(e){var t=this;t.toolbar.trigger(o,{command:e.sender.element.data("command"),options:e.sender.dataItem().options})},destroy:function(){this.dropDown.destroy()}});return m.toolbar.registerComponent("imageEditorZoomDropDown",e),r(m.ui,{imageeditor:{ToolBar:c,ZoomDropDown:e}}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,o){(o||t)()}),function(define){define("imageeditor/pane.min",["kendo.core.min","kendo.form.min","kendo.buttongroup.min","kendo.draganddrop.min"],function(){var g=window.kendo.jQuery,a=void 0,w=window.kendo,x=g.extend,r,i=".k-imageeditor-pane",n="click",h={form:"k-imageeditor-pane-form",button:"k-imageeditor-pane-button",confirmButton:"k-imageeditor-pane-confirm-button",cropOverlay:"k-imageeditor-crop-overlay",crop:"k-imageeditor-crop",resizeHandle:"k-resize-handle",resizeHandlePrefix:"k-resize-"},u=function(e){return Math.round(e*1e3)/1e3},o=w.Class.extend({init:function(e){var t=this;t.imageeditor=e;if(t.imageeditor.currentPaneTool)t.imageeditor.currentPaneTool.destroy();t.element=g("<div></div>").addClass(h.form)},open:function(){var e=this,t=e.imageeditor,o=t.options.messages.common;t.paneWrapper.append(e.element);e.formWidget=new w.ui.Form(e.element,x(e.formSettings(),{buttonsTemplate:w.format("<button class='{0} k-button k-button-md k-rounded-md k-button-solid k-button-solid-base' data-action='cancel'><span class='k-button-text'>{2}</span></button>"+"<button class='{0} {1} k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary' data-action='confirm'><span class='k-button-text'>{3}</span></button>",h.button,h.confirmButton,o.cancel,o.confirm)}));e.bindButtonEvents();t.paneWrapper.show();t.currentPaneTool=e},bindButtonEvents:function(){var e=this,t=e.formWidget,o=t.element.find("."+h.button);e._clickHandler=e._click.bind(e);o.on(n+i,e._clickHandler)},_click:function(e){var t=this,o=g(e.target).closest("."+h.button),i=o.data("action");if(t[i])t[i]()},cancel:function(){this.destroy()},confirm:function(){window.console.error("Pane's confirm method is not implemented!");this.destroy()},refresh:function(){},destroy:function(){var e=this,t=e.imageeditor;e.formWidget.element.find("."+h.button).off(i);e.formWidget.destroy();t.paneWrapper.html("");t.paneWrapper.hide();delete t.currentPaneTool}}),e=o.extend({init:function(e){var t=this;o.fn.init.call(t,e);t.buildCropModel();t.canvasUI()},confirm:function(){var e=this,t=e.formWidget._model.toJSON();e.destroy();e.imageeditor.executeCommand({command:"CropImageEditorCommand",options:t})},formSettings:function(){var e=this,t=e.imageeditor.options.messages.panes.crop,o=e.imageeditor.options.messages.common,i=t.aspectRatioItems,n=[];if(i)for(var a in i)n.push({value:a,text:i[a]});else n=[{value:"originalRatio",text:"Original ratio"},{value:"1:1",text:"1:1 (Square)"},{value:"4:5",text:"4:5 (8:10)"},{value:"5:7",text:"5:7"},{value:"2:3",text:"2:3 (4:6)"},{value:"16:9",text:"16:9"}];return{formData:e._model,change:e.onChange.bind(e),items:[{type:"group",label:t.title||"Crop Image",layout:"grid",grid:{cols:2,gutter:"0 8px"},items:[{label:t.aspectRatio||"Aspect ratio:",field:"aspectRatio",editor:"DropDownList",editorOptions:{dataValueField:"value",dataTextField:"text",dataSource:n},colSpan:2},{label:t.orientation,field:"orientation",editor:e._orientationEditor.bind(e),colSpan:2},{label:o.width||"Width:",field:"width",attributes:{style:"max-width: 100px;"},editor:"NumericTextBox",editorOptions:{format:"n0",max:e._model.width,min:0},colSpan:1},{label:o.height||"Height:",field:"height",attributes:{style:"max-width: 100px;"},editor:"NumericTextBox",editorOptions:{format:"n0",max:e._model.height,min:0},colSpan:1},{label:o.lockAspectRatio||"Lock aspect ratio",field:"lockAspectRatio",colSpan:2}]}]}},_orientationEditor:function(e,o){var t=this,i=t.imageeditor.options.messages.panes.crop,n=o.model[o.field];t._orientationWidget=g("<div name='"+o.field+"'></div>").appendTo(e).kendoButtonGroup({items:[{text:i.portrait||"Portrait",attributes:{"data-value":"portrait"},selected:n==="portrait"},{text:i.landscape||"Landscape",attributes:{"data-value":"landscape"},selected:n==="landscape"}],select:function(e){var t=e.sender.wrapper.find(".k-selected").data("value");o.model.set(o.field,t)}}).data("kendoButtonGroup")},buildCropModel:function(){var e=this,t=e.imageeditor,o=t.getCanvasElement(),i=o.width,n=o.height;e._model={top:0,left:0,aspectRatio:"originalRatio",width:i,height:n,orientation:i-n<0?"portrait":"landscape",lockAspectRatio:true}},canvasUI:function(){var t=this,e=t.imageeditor,o=t.imageeditor.canvasContainer,l=g("<div></div>").addClass(h.cropOverlay),i=g("<div></div>").addClass(h.crop),c="<span class='"+h.resizeHandle+"'></span>",n=["nw","n","ne","w","e","sw","s","se"],a=e.getZoomLevel();for(var r=0;r<n.length;r++){var d=g(c).addClass(h.resizeHandlePrefix+n[r]).attr("data-orientation",n[r]);t._initResizeHandle(d);i.append(d)}t.cropElement=i;t._canvasUI=l.append(i).appendTo(o);var s=Math.round(t._model.width*a);var m=Math.round(t._model.height*a);var p=parseInt(t.cropElement.css("border-top-width"),10);t.cropElement.css({width:s,height:m,backgroundImage:"url('"+e._image.src+"')",backgroundSize:w.format("{0}px {1}px",s,m),backgroundClip:"content-box",backgroundPosition:w.format("-{0}px -{0}px",p)});t.cropElement.kendoDraggable({ignore:"."+h.resizeHandle,drag:function(e){t._adjustTopLeft(e.target.offsetTop+e.y.delta,e.target.offsetLeft+e.x.delta)}})},refresh:function(){var e=this,t=e.formWidget._model,o=e.imageeditor.getZoomLevel(),i=Math.round(t.width*o),n=Math.round(t.height*o),a=Math.round(t.top*o),r=Math.round(t.left*o),d=parseInt(e.cropElement.css("border-top-width"),10);e.cropElement.css({top:a,left:r,width:i,height:n,backgroundSize:w.format("{0}px {1}px",e._model.width*o,e._model.height*o),backgroundPosition:w.format("-{0}px -{1}px",r+d,a+d)})},_initResizeHandle:function(e){var m=this;e.kendoDraggable({drag:function(e){var t=g(e.sender.element),o=m.formWidget._model,i=m._model,n=t.data("orientation"),a={},r=m.imageeditor.getZoomLevel(),d=o.left*r,s=o.top*r;if(n.indexOf("w")>=0){a.left=m.cropElement[0].offsetLeft+e.x.delta;a.width=m.cropElement[0].offsetWidth-e.x.delta}else if(n.indexOf("e")>=0)a.width=m.cropElement[0].offsetWidth+e.x.delta;if(n.indexOf("n")>=0){a.top=m.cropElement[0].offsetTop+e.y.delta;a.height=m.cropElement[0].offsetHeight-e.y.delta}else if(n.indexOf("s")>=0)a.height=m.cropElement[0].offsetHeight+e.y.delta;if(a.width&&(a.left||d)+a.width<=i.width*r)o.set("width",Math.round(a.width/r));if(a.height&&(a.top||s)+a.height<=i.height*r)o.set("height",Math.round(a.height/r));if(a.top||a.left)m._adjustTopLeft(a.top,a.left)}})},_adjustTopLeft:function(e,t,o){var i=this,n=o||i.formWidget._model,a=i.formWidget._model,r=i._model,d=i.imageeditor.getZoomLevel();if(e>=0&&e/d+n.height<=r.height)a.set("top",Math.round(e/d));if(t>=0&&t/d+n.width<=r.width)a.set("left",Math.round(t/d))},onChange:function(e){var t=this,o=t.imageeditor.getZoomLevel(),i=e.sender._model,n=t._model,a=n.width,r=n.height,d=n.width+":"+n.height,s=t._gcd(n.width,n.height);d=n.width/s+":"+n.height/s;if(e.field==="aspectRatio"&&e.value==="originalRatio"){i.set("top",0);i.set("left",0);i.set("orientation",n.orientation);i.set("width",n.width);i.set("height",n.height)}else if(e.field==="orientation"){var l=x({},i,{width:i.height,height:i.width});var m=t._calcSize(l,d,a,r);i.set("width",m.width);i.set("height",m.height);t._orientationWidget.select(e.value==="portrait"?0:1)}else if(i.lockAspectRatio){var c=e.field;var p=t._calcSize(i,d,a,r,c);i.set("width",p.width);i.set("height",p.height)}var g=Math.round(i.width*o);var h=Math.round(i.height*o);var u=Math.round(i.top*o);var f=Math.round(i.left*o);var v=parseInt(t.cropElement.css("border-top-width"),10);t.cropElement.css({top:u,left:f,width:g,height:h,backgroundPosition:w.format("-{0}px -{1}px",f+v,u+v)})},_calcSize:function(e,t,l,c,o){var i=Math.min(e.width,l),n=Math.min(e.height,c),a=e.orientation==="portrait",r=e.aspectRatio;if(r.indexOf(":")<0)r=t;r=r.split(":").map(function(e){return parseInt(e,10)});var p=a?Math.min(r[0],r[1]):Math.max(r[0],r[1]);var g=!a?Math.min(r[0],r[1]):Math.max(r[0],r[1]);var d=u(p/g);var s=u(i/n);var m={width:Math.round(n*d),height:Math.round(i/d)};if(o==="width")return{width:i,height:m.height};if(o==="height")return{width:m.width,height:n};if(s>d)i=m.width;else if(s<d)n=m.height;return{width:i,height:n}},_gcd:function(e,t){return t===0?e:this._gcd(t,e%t)},destroy:function(){w.destroy(this._canvasUI);this._canvasUI.remove();o.fn.destroy.call(this)}}),t=o.extend({init:function(e){o.fn.init.call(this,e);this.buildResizeModel()},confirm:function(){var e=this,t=e._model.width,o=e._model.height,i=e.formWidget._model.toJSON();if(i.measure==="percents"){i.width=t*(i.width/100);i.height=o*(i.height/100)}e.imageeditor.executeCommand({command:"ResizeImageEditorCommand",options:i});e.destroy()},formSettings:function(){var e=this,t=e.imageeditor.options.messages.panes.resize,o=e.imageeditor.options.messages.common;return{formData:e._model,change:e.onChange.bind(e),items:[{type:"group",label:t.title||"Resize image",layout:"grid",grid:{cols:2,gutter:"0 8px"},items:[{label:o.width||"Width:",field:"width",attributes:{style:"max-width: 100px;"},editor:"NumericTextBox",editorOptions:{format:"n0",min:0},colSpan:1},{field:"measureW",editor:"DropDownList",attributes:{style:"max-width: 100px;"},label:{text:"&nbsp;",encoded:false},editorOptions:{dataTextField:"text",dataValueField:"value",dataSource:[{text:t.pixels||"Pixels",value:"pixels"},{text:t.percents||"Percents",value:"percents"}]},colSpan:1},{label:o.height||"Height:",field:"height",attributes:{style:"max-width: 100px;"},editor:"NumericTextBox",editorOptions:{format:"n0",min:0},colSpan:1},{field:"measureH",label:{text:"&nbsp;",encoded:false},attributes:{style:"max-width: 100px;"},editor:"DropDownList",editorOptions:{dataTextField:"text",dataValueField:"value",dataSource:[{text:t.pixels||"Pixels",value:"pixels"},{text:t.percents||"Percents",value:"percents"}]},colSpan:1},{label:o.lockAspectRatio||"Lock aspect ratio",field:"lockAspectRatio",colSpan:2}]}]}},buildResizeModel:function(){var e=this,t=e.imageeditor,o=t.getCanvasElement(),i=o.width,n=o.height;e._model={width:i,height:n,measure:"pixels",measureW:"pixels",measureH:"pixels",lockAspectRatio:true,ratio:u(i/n)}},onChange:function(e){var t=this,o=e.sender._model,i=o.lockAspectRatio;if(e.field==="measureW"||e.field==="measureH"){o.set("measureW",e.value);o.set("measureH",e.value);o.set("measure",e.value)}else if(e.field==="measure")t.resetNumericsTo(e.value);else if(e.field==="width"&&i&&!t._preventChange)o.set("height",o.width/o.ratio);else if(e.field==="height"&&i&&!t._preventChange)o.set("width",o.height*o.ratio);o.set("ratio",u(o.width/o.height))},resetNumericsTo:function(e){var t=this,o=t._model.width,i=t._model.height,n=t.formWidget,a=n._model,r=n.element.find("[name=width]").data("kendoNumericTextBox"),d=n.element.find("[name=height]").data("kendoNumericTextBox"),s=e==="percents",m={percents:{format:"#\\%"},pixels:{format:"n0"}};r.setOptions(m[e]);d.setOptions(m[e]);t._preventChange=true;a.set("width",s?o/r.value()*100:o*(r.value()/100));a.set("height",s?i/d.value()*100:i*(d.value()/100));t._preventChange=false}});return x(w.ui.imageeditor,{ImageEditorPane:o,panes:{crop:e,resize:t}}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,o){(o||t)()}),function(define){define("imageeditor/commands.min",["./pane.min","kendo.upload.min"],function(){var d=window.kendo.jQuery,l=void 0,i=window.kendo,n=i.ui.imageeditor,a=d.extend,c,t=i.Class.extend({init:function(e){this.options=a({},e,this.options);this.imageeditor=e.imageeditor}}),e=t.extend({init:function(e){t.fn.init.call(this,e)},exec:function(){var e=this,t=e.imageeditor,o=new n.panes[e.options.value](t);o.open()}}),o=t.extend({options:{zoomStep:.05,spacing:20},init:function(e){t.fn.init.call(this,e)},exec:function(){var e=this,t=e.options,o=t.value,i=e.imageeditor,n=i._image.height,a=i.getZoomLevel(),r=n;if(!isNaN(o))o=parseFloat(o);else if(typeof o==="string")o=e._processStringValue(o,a);r=Math.round(n*o);if(r>0){d(i._canvas).css("height",r);i._zoomLevel=o}if(i.currentPaneTool)i.currentPaneTool.refresh()},_processStringValue:function(e,t){var o=this,i=o.options,n=o.imageeditor,a=n._image.height,r=n.canvasWrapper.height()-i.spacing,d=i.zoomStep;switch(e){case"zoomIn":return t+d;case"zoomOut":return t-d;case"fitToScreen":return Math.round(r/a*100)/100;default:return 1}}}),r=t.extend({init:function(e){t.fn.init.call(this,e)},exec:function(){var e=this,t=e.options,o=e.imageeditor,i=o.getCanvasElement(),n=o.getCurrent2dContext(),a=n.getImageData(t.left,t.top,t.width,t.height);n.clearRect(0,0,i.width,i.height);i.width=t.width;i.height=t.height;n.putImageData(a,0,0);o.drawImage(i.toDataURL()).done(function(e){o.drawCanvas(e)}).fail(function(e){o.trigger("error",e)})}}),s=t.extend({init:function(e){t.fn.init.call(this,e)},exec:function(){var e=this,t=e.options,o=e.imageeditor,i=o.getCanvasElement(),n=o.getCurrent2dContext(),a=o.getCurrentImage();n.clearRect(0,0,i.width,i.height);i.width=t.width;i.height=t.height;n.drawImage(a,0,0,t.width,t.height);o.drawImage(i.toDataURL()).done(function(e){o.drawCanvas(e)}).fail(function(e){o.trigger("error",e)})}}),m=t.extend({exec:function(){var e=this,t=e.imageeditor,o=t.getCanvasElement(),i=t.getCurrent2dContext(),n=t.undoStack.pop();if(n){t.redoStack.push(t.getCurrentImage());delete t._image;i.clearRect(0,0,o.width,o.height);o.width=n.width;o.height=n.height;i.drawImage(n,0,0,n.width,n.height);t.drawImage(o.toDataURL()).done(function(e){t.drawCanvas(e)}).fail(function(e){t.trigger("error",e)})}}}),p=t.extend({exec:function(){var e=this,t=e.imageeditor,o=t.getCanvasElement(),i=t.getCurrent2dContext(),n=t.redoStack.pop();if(n){t.undoStack.push(t.getCurrentImage());delete t._image;i.clearRect(0,0,o.width,o.height);o.width=n.width;o.height=n.height;i.drawImage(n,0,0,n.width,n.height);t.drawImage(o.toDataURL()).done(function(e){t.drawCanvas(e)}).fail(function(e){t.trigger("error",e)})}}}),g=t.extend({exec:function(){var e=this,t=e.imageeditor,o=t.getCanvasElement();i.saveAs(a({},t.options.saveAs,{dataURI:o.toDataURL()}))}}),h=t.extend({exec:function(){var e=this,t=e.imageeditor,o=t._upload;if(!o){var i=d("<input type='file' />");i.kendoUpload({select:e.onSelect.bind(e),error:e.onError.bind(e),multiple:false,validation:{allowedExtensions:[".jpg",".jpeg",".gif",".png",".bmp",".tiff",".webp"]}});t._upload=o=i.getKendoUpload()}o.element.click()},onSelect:function(e){var t=this,o=t.imageeditor,i=e.files[0].rawFile,n=new FileReader;n.addEventListener("load",function(){o.drawImage(n.result).done(function(e){if(!o.trigger("imageLoaded",{image:e})){o.drawCanvas(e);o._initUndoRedoStack();o._toggleTools()}}).fail(function(e){o.trigger("error",e)})},false);if(i)n.readAsDataURL(i)},onError:function(e){var t=this,o=t.imageeditor;o.trigger("error",e)}});return a(i.ui.imageeditor,{ImageEditorCommand:t,commands:{OpenPaneImageEditorCommand:e,ZoomImageEditorCommand:o,CropImageEditorCommand:r,ResizeImageEditorCommand:s,UndoImageEditorCommand:m,RedoImageEditorCommand:p,SaveImageEditorCommand:g,OpenImageEditorCommand:h}}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,o){(o||t)()}),function(define){define("kendo.imageeditor.min",["./imageeditor/toolbar.min","./imageeditor/commands.min"],function(){var e={id:"imageeditor",name:"ImageEditor",category:"web",depends:["core"]},r=window.kendo.jQuery,t=void 0,n=window.kendo,a=r.extend,p=r.isPlainObject,i=n.ui.Widget,d=n.ui,s=".kendoImageEditor",m=n._outerHeight,o="error",l="imageLoaded",g="imageRendered",h="execute",c={wrapper:"k-widget k-imageeditor",header:"k-imageeditor-header",toolbar:"k-imageeditor-toolbar",paneWrapper:"k-imageeditor-action-pane",contentWrapper:"k-imageeditor-content",canvasWrapper:"k-imageeditor-canvas-container",canvasContainer:"k-imageeditor-canvas"},u=i.extend({init:function(e,t){var o=this;i.fn.init.call(o,e,t);t=r.extend(true,{},t);o._wrapper();o._renderHeader();o._contentWrapper();o._keyHandler();if(t.imageUrl)o._drawCanvas();o._initUndoRedoStack();o._toggleTools();n.notify(o)},options:{name:"ImageEditor",width:"100%",height:570,imageUrl:"",toolbar:{},saveAs:{fileName:"image.png"},messages:{toolbar:{open:"Open Image",save:"Save Image",undo:"Undo",redo:"Redo",crop:"Crop",resize:"Resize",zoomIn:"Zoom In",zoomOut:"Zoom Out",zoomDropdown:"Zoom options",zoomActualSize:"Show actual size",zoomFitToScreen:"Fit to screen"},panes:{crop:{title:"Crop Image",aspectRatio:"Aspect Ratio:",aspectRatioItems:{originalRatio:"Original ratio","1:1":"1:1 (Square)","4:5":"4:5 (8:10)","5:7":"5:7","2:3":"2:3 (4:6)","16:9":"16:9"},orientation:"Orientation:",portrait:"Portrait",landscape:"Landscape"},resize:{title:"Resize image",pixels:"Pixels",percents:"Percents"}},common:{width:"Width:",height:"Height:",cancel:"Cancel",confirm:"Confirm",lockAspectRatio:"Lock aspect ratio"}}},events:[o,l,g,h],_wrapper:function(){var e=this,t=e.options,o=t.width,i=t.height;e.wrapper=e.element.addClass(c.wrapper);if(o)e.wrapper.width(o);if(i)e.wrapper.height(i);e._resizeHandler=n.onResize(function(){e.resize(true)})},_renderHeader:function(){var e=this,t=e.options;e.header=r("<div />").addClass(c.header);e.wrapper.append(e.header);if(t.toolbar){e._initToolbar();e.toolbar._tabIndex()}},_initToolbar:function(){var e=this,t=e.options,o=r("<div></div>").addClass(c.toolbar),i=a({},t.toolbar,{messages:t.messages.toolbar,action:e.executeCommand.bind(e)});e.header.append(o);e.toolbar=new d.imageeditor.ToolBar(o,i);return e.toolbar},_contentWrapper:function(){var e=this,t=r("<div></div>").addClass(c.contentWrapper),o=r("<div></div>").addClass(c.canvasWrapper),i=r("<div></div>").addClass(c.canvasContainer),n=r("<div></div>").addClass(c.paneWrapper).hide(),a=m(e.header);e.canvasWrapper=o;e.canvasContainer=i;e.paneWrapper=n;o.append(i);t.height(m(e.wrapper)-a);t.append(o).append(n);e.wrapper.append(t)},_keyHandler:function(){var t=this,o=false;t.wrapper.on("keydown"+s,function(e){if(e.ctrlKey){switch(e.keyCode){case 48:t.executeCommand({command:"ZoomImageEditorCommand",options:"fitToScreen"});o=true;break;case 189:t.executeCommand({command:"ZoomImageEditorCommand",options:"zoomOut"});o=true;break;case 187:t.executeCommand({command:"ZoomImageEditorCommand",options:"zoomIn"});o=true;break;case 90:t.executeCommand({command:"UndoImageEditorCommand"});o=true;break;case 89:t.executeCommand({command:"RedoImageEditorCommand"});o=true;break}if(o)e.preventDefault()}})},_drawCanvas:function(){var t=this;var e=t.options.imageUrl;t.drawImage(e).done(function(e){if(!t.trigger(l,{image:e}))t.drawCanvas(e)}).fail(function(e){t.trigger(o,e)})},_initUndoRedoStack:function(){var e=this;e.undoStack=[];e.redoStack=[]},_toggleTools:function(){var e=this,t=e.redoStack.length>0,o=e.undoStack.length>0,i=!!e._image,n=true;try{e._canvas.toDataURL()}catch(e){n=false}e.toolbar.toggleTools({redo:t,undo:o,enable:i,canExport:n})},drawImage:function(e){var t=this,o=new r.Deferred,i=new Image;i.onload=function(){n.ui.progress(t.canvasContainer,false);o.resolve(i)};i.onerror=function(){n.ui.progress(t.canvasContainer,false);o.reject(arguments)};n.ui.progress(t.canvasContainer,true);i.src=e;return o.promise()},drawCanvas:function(e){var t=this;var o=r("<canvas>Canvas element</canvas>")[0];var i=o.getContext("2d");if(t._canvas)r(t._canvas).remove();if(t._image)t.undoStack.push(t._image);t._canvas=o;t._ctx=i;t._image=e;o.width=e.width;o.height=e.height;i.drawImage(e,0,0);t.canvasContainer.append(o);if(e.height>t.canvasWrapper.height())t.executeCommand({command:"ZoomImageEditorCommand",options:"fitToScreen"});else t.executeCommand({command:"ZoomImageEditorCommand",options:t.getZoomLevel()});t.trigger(g,{canvas:o,ctx:i,image:e});t._toggleTools()},getCanvasElement:function(){return this._canvas},getCurrent2dContext:function(){return this._ctx},getCurrentImage:function(){return this._image},executeCommand:function(e){var t=e.command,o=a({imageeditor:this},p(e.options)?e.options:{value:e.options}),i=new d.imageeditor.commands[t](o);if(!this.trigger(h,e)){this._toggleTools();return i.exec()}},getZoomLevel:function(){return this._zoomLevel||1},destroy:function(){var e=this;e.element.off(s);if(e.currentPaneTool)e.currentPaneTool.destroy();if(e.toolbar)e.toolbar.destroy();if(e._upload)e._upload.destroy();i.fn.destroy.call(e)}});return d.plugin(u),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,o){(o||t)()});
//# sourceMappingURL=kendo.imageeditor.min.js.map
