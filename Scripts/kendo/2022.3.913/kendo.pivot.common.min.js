/**
 * Kendo UI v2022.3.913 (http://www.telerik.com/kendo-ui)
 * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(define){define("pivotgrid/common.min",["kendo.core.min"],function(){window.kendo.pivotgrid=window.kendo.pivotgrid||{},window.kendo.pivotgrid.common=function(h){var i={contains:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}") > 0',doesnotcontain:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}")',endswith:', Right({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"',eq:', {0}.CurrentMember.MEMBER_CAPTION = "{1}"',neq:', {0}.CurrentMember.MEMBER_CAPTION = "{1}"',startswith:', Left({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"'};var o={doesnotcontain:"doesnotcontain",in:"in",neq:"neq"};function m(e,r){var n="";var a="";for(var t=e.length-1;t>=0;t--){a="SELECT (";a+=l(e[t]);a+=") ON 0";if(t===e.length-1){a+=" FROM ["+r+"]";n=a}else n=a+" FROM ( "+n+" )"}return n}function l(e){var r="";var n=String(e.value);var a=e.field;var t=e.operator;if(t===o.in){r+="{";r+=n;r+="}"}else{r+=t===o.neq||t===o.doesnotcontain?"-":"";r+="Filter(";r+=a+".MEMBERS";r+=f(i[t],a,n);r+=")"}return r}function f(n){var e=[];for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];e.forEach(function(e,r){n=n.replace(new RegExp("\\{"+r+"\\}","g"),e)});return n}function d(e,r,n){var a="";e=e||[];var f=A(e);var t=f.expanded;var i=v(f.root);var o=[];var s=t.length;var u=0;var l;var c=[];if(i.length>1||r.length>1){o.push(_(i,r));for(;u<s;u++){l=y(t[u].name,n);c=E(l,i);o.push(_(c,r))}a+=o.join(",")}else{for(;u<s;u++){l=y(t[u].name,n);c.push(l[0])}a+=i.concat(c).join(",")}return a}function p(e){var r=e.length;var n=[];var a;for(var t=0;t<r;t++){a=e[t];n.push(a.name!==undefined?a.name:a)}return n}function v(e){var a=[];e.forEach(function(e){var r=e.name[0];var n=C(r);if(!a.some(function(e){return e.indexOf(n)===0}))a.push(r)});return a}function A(e){var r=[];var n=[];var a=[];var t=0;var i;for(;t<e.length;t++){var o=e[t];var u=o.name;i=false;if(u.length>1)n.push(o);else{var l=C(u[0]);for(var c=0,f=a.length;c<f;c++)if(a[c].name[0].indexOf(l)===0){i=true;break}if(!i)a.push(o);if(o.expand)r.push(o)}}r=r.concat(n);return{expanded:r,root:a}}function E(e,r){var n=r.length;r=r.slice(0);for(var a=0;a<e.length;a++){var t=e[a];for(var i=0;i<n;i++){var o=C(r[i]);if(t.indexOf(o)!==-1){r[i]=t;break}}}return r}function _(e,r){var n=e.slice(0);if(r.length>1)n.push("{"+p(r).join(",")+"}");return a(n)}function y(e,r){var n=e.length-1;var a=e[n];var t=s(r,a);if(t&&t.dir)a="ORDER("+a+".Children,"+t.field+".CurrentMember.MEMBER_CAPTION,"+t.dir+")";else a+=".Children";e[n]=a;return e}function s(e,r){for(var n=0,a=e.length;n<a;n++)if(r.indexOf(e[n].field)===0)return e[n];return null}function C(e){var r=e.split(".");if(r.length>2)return r[0]+"."+r[1];return e}function a(e){var r="CROSSJOIN({";var n;if(e.length>2){n=e.pop();r+=a(e)}else{r+=e.shift();n=e.pop()}r+="},{";r+=n;r+="})";return r}function x(e){var r='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Execute xmlns="urn:schemas-microsoft-com:xml-analysis"><Command><Statement>';var n=e.columnAxes,a=n===void 0?[]:n,t=e.rowAxes,i=t===void 0?[]:t;var o=e.measureAxes,u=o===void 0?[]:o,l=e.sort,f=l===void 0?[]:l,s=e.filter,v=s===void 0?[]:s;var c=e.measuresAxis==="rows";r+="SELECT NON EMPTY {";if(!a.length&&i.length&&(!u.length||u.length&&c)){a=i;i=[];c=false}if(!a.length&&!i.length)c=false;if(a.length)r+=d(a,!c?u:[],f);else if(u.length&&!c)r+=p(u).join(",");r+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON COLUMNS";if(i.length||c&&u.length>1){r+=", NON EMPTY {";if(i.length)r+=d(i,c?u:[],f);else r+=p(u).join(",");r+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON ROWS"}if(v.length){r+=" FROM ";r+="(";r+=m(v,e.connection.cube);r+=")"}else r+=" FROM ["+e.connection.cube+"]";if(u.length===1&&a.length)r+=" WHERE ("+p(u).join(",")+")";r+="</Statement></Command><Properties><PropertyList><Catalog>"+e.connection.catalog+"</Catalog><Format>Multidimensional</Format></PropertyList></Properties></Execute></Body></Envelope>";return r.replace(/&/g,"&amp;")}var O=function(){O=Object.assign||function e(r){for(var n,a=1,t=arguments.length;a<t;a++){n=arguments[a];for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i))r[i]=n[i]}return r};return O.apply(this,arguments)};function e(e,o,n,u){function l(r){return r instanceof n?r:new n(function(e){e(r)})}return new(n||(n=Promise))(function(r,n){function a(e){try{i(u.next(e))}catch(e){n(e)}}function t(e){try{i(u["throw"](e))}catch(e){n(e)}}function i(e){e.done?r(e.value):l(e.value).then(a,t)}i((u=u.apply(e,o||[])).next())})}function S(e,n){var a={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},t,i,o,r;return r={next:u(0),throw:u(1),return:u(2)},typeof Symbol==="function"&&(r[Symbol.iterator]=function(){return this}),r;function u(r){return function(e){return l([r,e])}}function l(r){if(t)throw new TypeError("Generator is already executing.");while(a)try{if(t=1,i&&(o=r[0]&2?i["return"]:r[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;if(i=0,o)r=[r[0]&2,o.value];switch(r[0]){case 0:case 1:o=r;break;case 4:a.label++;return{value:r[1],done:false};case 5:a.label++;i=r[1];r=[0];continue;case 7:r=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(r[0]===6||r[0]===2)){a=0;continue}if(r[0]===3&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(r[0]===6&&a.label<o[1]){a.label=o[1];o=r;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(r);break}if(o[2])a.ops.pop();a.trys.pop();continue}r=n.call(e,a)}catch(e){r=[6,e];i=0}finally{t=o=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:true}}}function I(){for(var e=0,r=0,n=arguments.length;r<n;r++)e+=arguments[r].length;for(var a=Array(e),t=0,r=0;r<n;r++)for(var i=arguments[r],o=0,u=i.length;o<u;o++,t++)a[t]=i[o];return a}function M(e){var r=(new DOMParser).parseFromString(e,"text/xml");var n=Array.from(r.querySelectorAll("Axis"));var a=Array.from(r.querySelectorAll("CellData > Cell")).map(function(e){return{fmtValue:c(e,"FmtValue"),ordinal:parseInt(e.getAttribute("CellOrdinal"),10),value:c(e,"Value")}});var t={tuples:[]};var i={tuples:[]};var o=[];n.forEach(function(e){if(e.getAttribute("name")!=="SlicerAxis"){var r=t.tuples.length===0?t.tuples:i.tuples;Array.prototype.push.apply(r,P(e))}});var u=new Array(i.tuples.length*t.tuples.length).fill(null);a.forEach(function(e){u[e.ordinal]=e});var l=0;i.tuples.forEach(function(r){t.tuples.forEach(function(e){o.push({columnTuple:e,data:u[l],rowTuple:r});l++})});return{columns:t,data:o,rows:i}}function c(e,r){var n=e.querySelector(r);return n?n.textContent:""}function P(e){var r=Array.from(e.querySelectorAll("Tuple"));return r.map(function(e){var r=Array.from(e.querySelectorAll("Member"));var n=r.map(function(e){var r=parseInt(c(e,"LNum")||"0",10);var n=parseInt(c(e,"CHILDREN_CARDINALITY")||"0",10)>0;return{caption:c(e,"Caption"),children:[],hasChildren:n,hierarchy:e.getAttribute("Hierarchy"),levelName:c(e,"LName"),levelNum:r,name:c(e,"UName"),parentName:c(e,"PARENT_UNIQUE_NAME")}});return{members:n}})}var t={schemaCatalogs:"DBSCHEMA_CATALOGS",schemaCubes:"MDSCHEMA_CUBES",schemaDimensions:"MDSCHEMA_DIMENSIONS",schemaHierarchies:"MDSCHEMA_HIERARCHIES",schemaKPIs:"MDSCHEMA_KPIS",schemaLevels:"MDSCHEMA_LEVELS",schemaMeasures:"MDSCHEMA_MEASURES",schemaMembers:"MDSCHEMA_MEMBERS"};function D(e){var r={};var n='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis">';n+="<RequestType>"+(t[e.command]||e.command)+"</RequestType>";n+="<Restrictions>"+w("RestrictionList",e.restrictions,true)+"</Restrictions>";if(e.connection&&e.connection.catalog)r.Catalog=e.connection.catalog;n+="<Properties>"+w("PropertyList",r,false)+"</Properties>";n+="</Discover></Body></Envelope>";return n}function w(e,r,n){var a="";if(r){a+="<"+e+">";var t=void 0;for(var i in r)if(r[i]){t=r[i];if(n)i=i.replace(/([A-Z]+(?=$|[A-Z][a-z])|[A-Z]?[a-z]+)/g,"$1_").toUpperCase().replace(/_$/,"");a+="<"+i+">"+t+"</"+i+">"}a+="</"+e+">"}else a+="<"+e+"/>";return a}function n(e){var r=(new DOMParser).parseFromString(e,"text/xml");var n=Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map(function(e){return{name:c(e,"CUBE_NAME"),caption:c(e,"CUBE_CAPTION"),description:c(e,"DESCRIPTION"),type:c(e,"CUBE_TYPE")}});return n}function U(e){var r=(new DOMParser).parseFromString(e,"text/xml");var n=Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map(function(e){return{name:c(e,"CATALOG_NAME"),description:c(e,"DESCRIPTION")}});return n}function F(e){var r=(new DOMParser).parseFromString(e,"text/xml");var n=Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map(function(e){return{name:c(e,"MEASURE_NAME"),caption:c(e,"MEASURE_CAPTION"),uniqueName:c(e,"MEASURE_UNIQUE_NAME"),description:c(e,"DESCRIPTION"),aggregator:c(e,"MEASURE_AGGREGATOR"),groupName:c(e,"MEASUREGROUP_NAME"),displayFolder:c(e,"MEASURE_DISPLAY_FOLDER"),defaultFormat:c(e,"DEFAULT_FORMAT_STRING")}});return n}function b(e){var r=(new DOMParser).parseFromString(e,"text/xml");var n=Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map(function(e){return{name:c(e,"KPI_NAME"),uniqueName:c(e,"KPI_NAME"),caption:c(e,"KPI_CAPTION"),value:c(e,"KPI_VALUE"),goal:c(e,"KPI_GOAL"),status:c(e,"KPI_STATUS"),trend:c(e,"KPI_TREND"),statusGraphic:c(e,"KPI_STATUS_GRAPHIC"),trendGraphic:c(e,"KPI_TREND_GRAPHIC"),description:c(e,"KPI_DESCRIPTION"),groupName:c(e,"MEASUREGROUP_NAME"),type:"kpi"}});return n}function V(e){var r=(new DOMParser).parseFromString(e,"text/xml");var n=Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map(function(e){return{caption:c(e,"DIMENSION_CAPTION"),defaultHierarchy:c(e,"DEFAULT_HIERARCHY"),description:c(e,"DESCRIPTION"),name:c(e,"DIMENSION_NAME"),type:parseInt(c(e,"DIMENSION_TYPE"),10),uniqueName:c(e,"DIMENSION_UNIQUE_NAME")}});return n}function G(e){var r=(new DOMParser).parseFromString(e,"text/xml");var n=Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map(function(e){return{name:c(e,"HIERARCHY_NAME"),caption:c(e,"HIERARCHY_CAPTION"),description:c(e,"DESCRIPTION"),uniqueName:c(e,"HIERARCHY_UNIQUE_NAME"),dimensionUniqueName:c(e,"DIMENSION_UNIQUE_NAME"),displayFolder:c(e,"HIERARCHY_DISPLAY_FOLDER"),origin:c(e,"HIERARCHY_ORIGIN"),defaultMember:c(e,"DEFAULT_MEMBER")}});return n}function L(e){var r=(new DOMParser).parseFromString(e,"text/xml");var n=Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map(function(e){return{name:c(e,"LEVEL_NAME"),caption:c(e,"LEVEL_CAPTION"),description:c(e,"DESCRIPTION"),uniqueName:c(e,"LEVEL_UNIQUE_NAME"),dimensionUniqueName:c(e,"DIMENSION_UNIQUE_NAME"),displayFolder:c(e,"LEVEL_DISPLAY_FOLDER"),orderingProperty:c(e,"LEVEL_ORDERING_PROPERTY"),origin:c(e,"LEVEL_ORIGIN"),hierarchyUniqueName:c(e,"HIERARCHY_UNIQUE_NAME")}});return n}function k(e){var r=(new DOMParser).parseFromString(e,"text/xml");var n=Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map(function(e){return{name:c(e,"MEMBER_NAME"),caption:c(e,"MEMBER_CAPTION"),uniqueName:c(e,"MEMBER_UNIQUE_NAME"),dimensionUniqueName:c(e,"DIMENSION_UNIQUE_NAME"),hierarchyUniqueName:c(e,"HIERARCHY_UNIQUE_NAME"),levelUniqueName:c(e,"LEVEL_UNIQUE_NAME"),childrenCardinality:c(e,"CHILDREN_CARDINALITY")}});return n}var H={schemaCatalogs:U,schemaCubes:n,schemaDimensions:V,schemaHierarchies:G,schemaKPIs:b,schemaLevels:L,schemaMeasures:F,schemaMembers:k};var q=function(t,i){return e(void 0,void 0,void 0,function(){var r,n,a;return S(this,function(e){switch(e.label){case 0:r=O({body:x(i),headers:{"Content-Type":"text/xml"},method:"POST"},t.init);return[4,fetch(t.url,r)];case 1:n=e.sent();return[4,n.text()];case 2:a=e.sent();return[2,M(a)]}})})};var B=function(t,i){return e(void 0,void 0,void 0,function(){var r,n,a;return S(this,function(e){switch(e.label){case 0:r=O({body:D(i),headers:{"Content-Type":"text/xml"},method:"POST"},t.init);return[4,fetch(t.url,r)];case 1:n=e.sent();return[4,n.text()];case 2:a=e.sent();return[2,H[i.command](a)]}})})};var Y=function(e){var r={columns:e.columns.tuples,data:e.data,rows:e.rows.tuples};return r};function K(e){var r=[];for(var n=0,a=Object.keys(e);n<a.length;n++){var t=a[n];r.push({name:JSON.parse(t),expand:e[t]})}return r}var j=function(e,r){if(r===void 0)r=[];e.sort=r};var z=function(e,r){if(r===void 0)r=[];e.filter=r};var Q=function(e,r){if(r===void 0)r=new Set;(e.children||[]).forEach(function(e){r.add(e.levelName);Q(e,r)});return r.size};var X=function(e){var r=0;(e.children||[]).forEach(function(e){r+=X(e)||1});return r};var Z=function(e,r){return(r&&r.hierarchy===e.hierarchy?I((r.normalizedPath||[]).slice(0,-1),[e.name||null]):I(r&&r.normalizedPath?r.normalizedPath:[],[e.name])).filter(Boolean)};var W=function(e,r){return(r&&r.hierarchy===e.hierarchy?I((r.path||[]).slice(0,-1),[(e.levelNum===0?e.hierarchy:e.name)||null]):I(r&&r.path?r.path:[],[e.levelNum===0?e.hierarchy:e.name])).filter(Boolean)};var J=function(r,i,o,f,s,e,n,a){if(i===void 0)i=-1;if(o===void 0)o=0;if(f===void 0)f=undefined;if(s===void 0)s=undefined;if(e===void 0)e=undefined;if(n===void 0)n=undefined;if(a===void 0)a=undefined;var v=Q(r);var m=X(r);var d=f||v;var p=s||m;var u=e?e.slice():[];var l=n?n.slice():new Array(p);var A=u.findIndex(function(e){return e&&e.name===r.levelName&&e.level===r.levelNum});var t=u[A];var h={name:r.levelName,level:r.levelNum,index:i,cells:new Array(p).fill(null)};var O=i!==-1&&o!==-1;var c={caption:r.caption,name:r.name,levelName:r.levelName,levelNum:r.levelNum,hasChildren:r.hasChildren,parentName:r.parentName,hierarchy:r.hierarchy,total:(r.total!==undefined?r.total:false)||a&&a.children.length<=1&&a.total,parent:a,rowIndex:i,colIndex:o,depth:1,breadth:1,path:r.path||[],normalizedPath:r.normalizedPath||[],children:r.children.filter(function(e){return e.hierarchy===r.hierarchy})};if(O)if(t){t.cells[o]=c;if(t.index>=i)i=t.index}else if(u[i]&&u[i].cells.length){for(var I=i;I<u.length;I++){var N=u[I];N.index++}u.splice(i,0,h);u[i].cells[o]=c}else{u[i]=h;u[i].cells[o]=c}var g=0;if(r.children&&r.children.length)r.children.forEach(function(e){var r=J(e,i+1,o+g,d,p,u,l,c),n=r[0],a=r[1],t=r[3];g+=t||1;u=n.slice();l=a.slice()});else if(r.normalizedPath)l[o]={total:c.total,path:r.normalizedPath};c.depth=v;c.breadth=m;return[u,l,v,m]};var $=function(e,r,n){if(r===void 0)r=null;if(n===void 0)n=0;var a;var t=O(O({},e),{total:true,hasChildren:false,children:[]});for(var i=0;i<e.children.length;i++){var o=$(e.children[i],e,i);a=a||o.hierarchy;if(o.hierarchy!==a&&r&&!r.children.some(function(e){return e.total&&e.name===t.name})&&!e.total){t.children.push(o);e.children.splice(i,1);i--}}if(e.children.filter(function(e){return!e.total}).length>=1&&r&&!r.children.some(function(e){return e.total&&e.name===t.name})&&!e.total){var u=e.children[0].hierarchy;if(e.hierarchy===u)r.children.splice(n+1,0,t)}return e};var ee=function(e){var i={children:[]};var o={};for(var r=0;r<e.length;r++){var u=ie(e[r]);var l="";var n=function(e){var r=u.members[e];var n;if(i.children&&i.children.length===0)n=i;else if(o[l]&&!o[l+r.name]&&r.levelNum===0)n=o[l];else if(o[l+r.parentName]&&r.levelNum>0&&!o[l+r.parentName+r.name])n=o[l+r.parentName];else if(!o[l+r.parentName]&&r.levelNum>0&&!o[l+r.parentName+r.name]){var a=Object.keys(o).find(function(e){return r.parentName===o[e].name});if(a)n=o[a]}if(n){r.path=W(r,n);r.normalizedPath=Z(r,n);var t=n.children.findIndex(function(e){return e.hierarchy!==n.hierarchy});if(t!==-1)n.children.splice(t,0,r);else n.children.push(r)}r.parentName+=r.name;l+=r.parentName;if(!o[l])o[l]=r};for(var a=0;a<u.members.length;a++)n(a)}return ie($(i))};var re=function(e,r,a,n,t){var i=Array.from(new Array(t),function(){return{cells:Array.from(new Array(n),function(){return null})}});var o=function(e){return e.join("|")};var u=function(e){return e.members.map(function(e){return e.name})};var l=new Map;var c=new Map;r.forEach(function(e,r){l.set(o(e.path),r)});a.forEach(function(e,r){c.set(o(e.path),r)});e.forEach(function(e){var r=l.get(o(u(e.columnTuple)));var n=c.get(o(u(e.rowTuple)));if(r!==undefined&&n!==undefined)if(!i[n].cells[r]){i[n].row=a[n].path;i[n].cells[r]=e}});return i};var ne=function(e,r,n,a){var t=new Array(a);for(var i=0;i<a;i++)for(var o=0;o<n;o++)if(e[o]&&e[o].cells[i]){var u=e[o].cells[i];if(!t[i])t[i]={cells:new Array(n).fill(null)};t[i].cells[o]=O(O({},u),{rowSpan:u.colSpan,colSpan:u.rowSpan})}return[t,r,a,n]};var ae=function(e){var r=J(e),n=r[0],a=r[1],t=r[2],i=r[3];for(var o=0;o<i;o++){var u=null;for(var l=0;l<t;l++)if(n[l]){var c=n[l].cells[o];if(!c&&u)u.rowSpan=(u.rowSpan||1)+1;if(u)u.colSpan=u.breadth||1;if(c)u=c}}return[n,a,t,i]};var te=function(e){var r=J(e),n=r[0],a=r[1],t=r[2],i=r[3];for(var o=0;o<i;o++){var u=null;for(var l=0;l<t;l++)if(n[l]){var c=n[l].cells[o];if(!c&&u)u.rowSpan=(u.rowSpan||1)+1;if(u)u.colSpan=u.breadth;if(c)u=c}}return ne(n,a,t,i)};function ie(e){return JSON.parse(JSON.stringify(e))}var oe=function(e,r,n){return{hierarchyUniqueName:e,uniqueName:r,caption:r,measure:r,name:r,type:n,kpi:true}};function ue(e){var r=e.name;return[oe(r,e.value,"value"),oe(r,e.goal,"goal"),oe(r,e.status,"status"),oe(r,e.trend,"trend")]}var le=function(e){var r;var n=0;for(;n<e.length;n++)if(e[n].type===2){r=true;break}if(r)e.splice(n+1,0,{caption:"KPIs",defaultHierarchy:"[KPIs]",name:"KPIs",uniqueName:"[KPIs]"})};var N=function(e,r){return String(e.name)===String([r.defaultHierarchy?r.defaultHierarchy:r.uniqueName])};var g=function(e,r){return String(e.name)===String(r.name)};var ce=function(t,i){var e=function(e){var r=t[e];var n=r.name.findIndex(function(e){return N({name:[e]},i)||String(e).startsWith(i.uniqueName)});if(n!==-1)if(n===r.name.length-1||r.name.length===1)t.splice(e,1);else{r.name.splice(n,1);var a=t.findIndex(function(e){return e!==r&&String(e.name)===String(r.name)});if(a!==-1){t[a]=O(O(O({},t[a]),r),t[a].expand||r.expand?{expand:true}:{});t.splice(e,1)}}};for(var r=t.length-1;r>=0;r--)e(r)};var fe=function(e,n,r){var a=-1;if(r.dropTarget&&r.dropDirection){var t=r.dropDirection?r.dropDirection==="before"?0:1:0;a=e.findIndex(function(e){return g(e,r.dropTarget)})+t}if(a!==-1){e.forEach(function(e){var r;if(e.expand&&e.name.length>1&&e.name.length>a)(r=e.name).splice.apply(r,I([a,0],n.name))});e.splice(a,0,n)}else e.push(n)};h.HEADERS_ACTION=void 0;(function(e){e["toggle"]="HEADERS_ACTION_TOGGLE";e["expand"]="HEADERS_ACTION_EXPAND";e["collapse"]="HEADERS_ACTION_COLLAPSE"})(h.HEADERS_ACTION||(h.HEADERS_ACTION={}));var se=function(e,n,a){var t=new Set;e.children.forEach(function(e){var r=n(e);if(a)t.add(String(e.path));se(e,n,a||r).map(function(e){t.add(e)})});return Array.from(t.values())};var ve=function(e,r){switch(r.type){case h.HEADERS_ACTION.toggle:{var n=e.find(function(e){return String(e.name)===String(r.payload)});return ve(e,O(O({},r),{type:n&&n.expand?h.HEADERS_ACTION.collapse:h.HEADERS_ACTION.expand}))}case h.HEADERS_ACTION.expand:{var a=e.find(function(e){return String(e.name)===String(r.payload)});if(a&&a.expand===true)return e;else if(a&&(a.expand===false||a.expand===undefined))return e.map(function(e){return e===a?O(O({},a),{expand:true}):e});else{var t=e.slice();t.push({name:r.payload,expand:true});return t}}case h.HEADERS_ACTION.collapse:{var i=se(r.tree,function(e){return!e.total&&String(e.path)===String(r.payload)});var o=e.slice().filter(function(r){return!i.some(function(e){return e===String(r.name)})}).map(function(e){return O(O({},e),{expand:Boolean(e.expand)})}).map(function(e){return String(e.name)===String(r.payload)?r.payload.length>1?undefined:{name:r.payload,expand:false}:e}).filter(Boolean);return o}default:return e}};h.PIVOT_CONFIGURATOR_ACTION=void 0;(function(e){e["toggleSelection"]="PIVOT_CONFIGURATOR_ACTION_TOGGLE_SELECTION";e["addColumnAxis"]="PIVOT_CONFIGURATOR_ACTION_ADD_COLUMN_AXIS";e["addColumnAxes"]="PIVOT_CONFIGURATOR_ACTION_ADD_COLUMN_AXES";e["removeColumnAxis"]="PIVOT_CONFIGURATOR_ACTION_REMOVE_COLUMN_AXIS";e["removeColumnAxes"]="PIVOT_CONFIGURATOR_ACTION_REMOVE_COLUMN_AXES";e["addRowAxis"]="PIVOT_CONFIGURATOR_ACTION_ADD_ROW_AXIS";e["addRowAxes"]="PIVOT_CONFIGURATOR_ACTION_ADD_ROW_AXES";e["removeRowAxis"]="PIVOT_CONFIGURATOR_ACTION_REMOVE_ROW_AXIS";e["removeRowAxes"]="PIVOT_CONFIGURATOR_ACTION_REMOVE_ROW_AXES";e["addMeasureAxis"]="PIVOT_CONFIGURATOR_ACTION_ADD_MEASURE_AXIS";e["addMeasureAxes"]="PIVOT_CONFIGURATOR_ACTION_ADD_MEASURE_AXES";e["removeMeasureAxis"]="PIVOT_CONFIGURATOR_ACTION_REMOVE_MEASURE_AXIS";e["removeMeasureAxes"]="PIVOT_CONFIGURATOR_ACTION_REMOVE_MEASURE_AXES";e["remove"]="PIVOT_CONFIGURATOR_ACTION_REMOVE";e["setSort"]="PIVOT_CONFIGURATOR_ACTION_SET_SORT";e["setFilter"]="PIVOT_CONFIGURATOR_ACTION_SET_FILTER";e["addFilter"]="PIVOT_CONFIGURATOR_ACTION_ADD_FILTER";e["changeFilter"]="PIVOT_CONFIGURATOR_ACTION_CHANGE_FILTER";e["removeFilter"]="PIVOT_CONFIGURATOR_ACTION_REMOVE_FILTER";e["setDragItem"]="PIVOT_CONFIGURATOR_ACTION_SET_DRAGITEM";e["drop"]="PIVOT_CONFIGURATOR_ACTION_DROP";e["setDropZone"]="PIVOT_CONFIGURATOR_ACTION_SET_DROP_ZONE";e["setDropTarget"]="PIVOT_CONFIGURATOR_ACTION_SET_DROP_TARGET";e["setDropDirection"]="PIVOT_CONFIGURATOR_ACTION_SET_DROP_DIRECTION"})(h.PIVOT_CONFIGURATOR_ACTION||(h.PIVOT_CONFIGURATOR_ACTION={}));var T=function(e,n){var r;var a;var t;var f;var i;var o;var u;var s;var v;switch(n.type){case h.PIVOT_CONFIGURATOR_ACTION.toggleSelection:{if(Array.isArray(n.payload));else{var l=n.payload;if(l.type===2||"aggregator"in l)if(e.measureAxes.some(function(e){return N(e,l)}))return T(e,O(O({},n),{type:h.PIVOT_CONFIGURATOR_ACTION.removeMeasureAxis}));else return T(e,O(O({},n),{type:h.PIVOT_CONFIGURATOR_ACTION.addMeasureAxis}));else if(l.type==="kpi"){var m=ue(l);if(m.every(function(r){return e.measureAxes.some(function(e){return N(e,r)})}))return T(e,O(O({},n),{type:h.PIVOT_CONFIGURATOR_ACTION.removeMeasureAxes,payload:m}));else return T(e,O(O({},n),{type:h.PIVOT_CONFIGURATOR_ACTION.addMeasureAxes,payload:m.filter(function(r){return!e.measureAxes.some(function(e){return N(e,r)})})}))}else if(n.payload.kpi)if(e.measureAxes.some(function(e){return N(e,l)}))return T(e,O(O({},n),{type:h.PIVOT_CONFIGURATOR_ACTION.removeMeasureAxis}));else return T(e,O(O({},n),{type:h.PIVOT_CONFIGURATOR_ACTION.addMeasureAxis}));else if(e.columnAxes.some(function(e){return N(e,l)}))return T(e,O(O({},n),{type:h.PIVOT_CONFIGURATOR_ACTION.removeColumnAxis}));else if(e.rowAxes.some(function(e){return N(e,l)}))return T(e,O(O({},n),{type:h.PIVOT_CONFIGURATOR_ACTION.removeRowAxis}));else if(e.columnAxes&&e.columnAxes.length&&(!e.rowAxes||!e.rowAxes.length))return T(e,O(O({},n),{type:h.PIVOT_CONFIGURATOR_ACTION.addRowAxis}));else return T(e,O(O({},n),{type:h.PIVOT_CONFIGURATOR_ACTION.addColumnAxis}))}break}case h.PIVOT_CONFIGURATOR_ACTION.addColumnAxis:{a=I(e.columnAxes||[],[{name:[n.payload.defaultHierarchy||n.payload.uniqueName]}]);break}case h.PIVOT_CONFIGURATOR_ACTION.addColumnAxes:break;case h.PIVOT_CONFIGURATOR_ACTION.removeColumnAxis:{a=I((e.columnAxes||[]).filter(function(e){return!N(e,n.payload)}));ce(a,n.payload);break}case h.PIVOT_CONFIGURATOR_ACTION.removeColumnAxes:break;case h.PIVOT_CONFIGURATOR_ACTION.addRowAxis:{r=I(e.rowAxes||[],[{name:[n.payload.defaultHierarchy||n.payload.uniqueName]}]);break}case h.PIVOT_CONFIGURATOR_ACTION.addRowAxes:break;case h.PIVOT_CONFIGURATOR_ACTION.removeRowAxis:{r=I((e.rowAxes||[]).filter(function(e){return!N(e,n.payload)}));ce(r,n.payload);break}case h.PIVOT_CONFIGURATOR_ACTION.removeRowAxes:break;case h.PIVOT_CONFIGURATOR_ACTION.addMeasureAxis:{t=I(e.measureAxes||[],[{name:[n.payload.defaultHierarchy||n.payload.uniqueName]}]);break}case h.PIVOT_CONFIGURATOR_ACTION.removeMeasureAxis:{t=I((e.measureAxes||[]).filter(function(e){return!N(e,n.payload)}));break}case h.PIVOT_CONFIGURATOR_ACTION.addMeasureAxes:{t=I(e.measureAxes||[],(n.payload||[]).map(function(e){return{name:[e.defaultHierarchy||e.uniqueName]}}));break}case h.PIVOT_CONFIGURATOR_ACTION.removeMeasureAxes:{t=I((e.measureAxes||[]).filter(function(r){return!n.payload.some(function(e){return N(r,e)})}));break}case h.PIVOT_CONFIGURATOR_ACTION.remove:{if(e.columnAxes.some(function(e){return g(e,n.payload)})){a=I(e.columnAxes.filter(function(e){return!g(e,n.payload)}));ce(a,{uniqueName:n.payload.name})}if(e.rowAxes.some(function(e){return g(e,n.payload)})){r=I(e.rowAxes.filter(function(e){return!g(e,n.payload)}));ce(r,{uniqueName:n.payload.name})}if(e.measureAxes.some(function(e){return g(e,n.payload)}))t=I(e.measureAxes.filter(function(e){return!g(e,n.payload)}));break}case h.PIVOT_CONFIGURATOR_ACTION.setDragItem:o=n.payload;break;case h.PIVOT_CONFIGURATOR_ACTION.setDropZone:u=n.payload;break;case h.PIVOT_CONFIGURATOR_ACTION.setDropTarget:v=n.payload;break;case h.PIVOT_CONFIGURATOR_ACTION.setDropDirection:s=n.payload;break;case h.PIVOT_CONFIGURATOR_ACTION.drop:if(e.dragItem&&e.dropZone){var d=e.columnAxes.find(function(e){return g(e,n.payload)});var p=e.rowAxes.find(function(e){return g(e,n.payload)});var A=e.measureAxes.find(function(e){return g(e,n.payload)});var c=void 0;if(d){c=d;a=I(e.columnAxes.filter(function(e){return!g(e,n.payload)}));ce(a,{uniqueName:n.payload.name})}if(p){c=p;r=I(e.rowAxes.filter(function(e){return!g(e,n.payload)}));ce(r,{uniqueName:n.payload.name})}if(A){c=A;t=I(e.measureAxes.filter(function(e){return!g(e,n.payload)}))}switch(e.dropZone){case"columnAxes":{a=a||e.columnAxes.slice();fe(a,c,e);break}case"rowAxes":{r=r||e.rowAxes.slice();fe(r,c,e);break}case"measureAxes":{t=t||e.measureAxes.slice();fe(t,c,e);break}}}o=null;u=null;v=null;break;case h.PIVOT_CONFIGURATOR_ACTION.setSort:f=n.payload;break;case h.PIVOT_CONFIGURATOR_ACTION.setFilter:if(Array.isArray(n.payload))i=n.payload;else i=[n.payload];break;case h.PIVOT_CONFIGURATOR_ACTION.addFilter:i=(e.filter||[]).slice();if(Array.isArray(n.payload))i.push.apply(i,n.payload);else i.push(n.payload);break;case h.PIVOT_CONFIGURATOR_ACTION.changeFilter:i=Array.isArray(n.payload)?(e.filter||[]).map(function(r){return n.payload.some(function(e){return e.field===r.field})?n.payload.find(function(e){return e.field===r.field}):r}):(e.filter||[]).map(function(e){return e.field===n.payload.field?n.payload:e});break;case h.PIVOT_CONFIGURATOR_ACTION.removeFilter:i=(e.filter||[]).slice();if(Array.isArray(n.payload))i=i.filter(function(r){return!n.payload.some(function(e){return e.field===r.field&&e.operator===r.operator})});else i=i.filter(function(e){return!(e.field===n.payload.field&&e.operator===n.payload.operator)});break}return{dragItem:o,dropTarget:v,dropDirection:s,dropZone:u,columnAxes:a,rowAxes:r,measureAxes:t,filter:i,sort:f}};var me={init:function(e){if("sum"in e===false)e.sum=0},merge:function(e,r){r.sum+=e.sum},accumulate:function(e,r){e.sum+=r},result:function(e){return e.sum},format:function(e){return e.toFixed(2)}};var de={init:function(e){if("min"in e===false)e.min=Number.POSITIVE_INFINITY},merge:function(e,r){r.min=Math.min(e.min,r.min)},accumulate:function(e,r){e.min=Math.min(r,e.min)},result:function(e){return Number.isFinite(e.min)?e.min:NaN},format:function(e){return e.toFixed(2)}};var pe={init:function(e){if("max"in e===false)e.max=Number.NEGATIVE_INFINITY},merge:function(e,r){r.max=Math.max(e.max,r.max)},accumulate:function(e,r){e.max=Math.max(r,e.max)},result:function(e){return Number.isFinite(e.max)?e.max:NaN},format:function(e){return e.toFixed(2)}};var Ae={init:function(e){if("count"in e===false){e.sumA=0;e.count=0}},merge:function(e,r){r.sumA+=e.sumA;r.count+=e.count},accumulate:function(e,r){e.sumA+=r;e.count+=1},result:function(e){return e.sumA/e.count},format:function(e){return e.toFixed(2)}};var u=function(e){return e!==null&&e!==undefined};var he=function(e){return e===null||e===undefined};var Oe=function(e){return Array.isArray(e)};var Ie=function(e){return typeof e==="function"};var Ne=function(e){return typeof e==="string"};var ge=function(e){return he(e)||e.trim().length===0};var Te=function(e){return!ge(e)};var Ee=function(e){return!isNaN(e-parseFloat(e))};var _e=function(e){return e&&e.getTime};var Re=function(e){return u(e.filters)};var ye=function(r,n,a){return function(e){return r(e)?n(e):a(e)}};var r=function(){var r=[];for(var e=0;e<arguments.length;e++)r[e]=arguments[e];return function(e){return r.reduceRight(function(e,r){return r(e)},e)}};var Ce=function(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))};var xe=function(e){return _e(e.value)};var Se={};var Me=/\[(?:(\d+)|['"](.*?)['"])\]|((?:(?!\[.*?\]|\.).)+)/g;Se["undefined"]=function(e){return e};var Pe=function(e,a){var r=e+a;if(Se[r])return Se[r];var t=[];e.replace(Me,function(e,r,n,a){t.push(u(r)?r:n||a);return undefined});Se[r]=function(e){var r=e;for(var n=0;n<t.length;n++){r=r[t[n]];if(!u(r)&&a)return r}return r};return Se[r]};var De=function(r){return function(e){return[r,e]}};var we=function(){return null};var Ue=function(e){return u(e)&&Oe(e)&&e.length>0};var Fe=function(r){return function(e){return Ue(r(e))}};var be=function(e,r){return ye(e,r,we)};var Ve=function(e){var r=e.skip,n=e.take;return Math.floor((r||0)/n)+1};var Ge=function(r,n){return function(e){return r(e).map(n).join("~")}};var Le=function(r){return function(e){return e.slice(0,e.indexOf(r))}};var ke=function(e){return r.apply(void 0,e.map(function(e){var r=e[0],n=e[1];return function(e){return e.replace(new RegExp(r,"g"),n)}}))};var He=ke([['"',""],[":","-"]]);var qe=Le(".");var Be=function(e){var r=e.field,n=e.dir,a=n===void 0?"asc":n;return r+"-"+a};var Ye=function(e){var r=e.field,n=e.aggregate;return r+"-"+n};var Ke=Pe("take");var je=Pe("aggregates");Pe("skip");var ze=Pe("group");var Qe=Pe("sort",true);var Xe=Ge(Qe,Be);var Ze=Ge(ze,Be);var We=Ge(je,Ye);var Je=function(e){return"datetime'"+e+"'"};var $e=r(Je,qe,He,JSON.stringify,Ce);var er=function(e){var r=e.field,n=e.value,a=e.ignoreCase,t=e.operator;return{value:$e(n),field:r,ignoreCase:a,operator:t}};var rr=function(e){return Object.assign({},e,{sort:(Qe(e)||[]).filter(function(e){var r=e.dir;return Te(r)})})};r(De("page"),Ve);r(De("pageSize"),Ke);r(De("group"),Ze);var nr=r(De("sort"),Xe);r(De("aggregate"),We);r(be(Fe(Qe),nr),rr);var ar=function(e){var r=e.field,n=e.operator,a=e.value;return r+"~"+n+"~"+a};ye(xe,r(ar,er),ar);var tr=function(e,r,n){r[e]=n;return r};var ir=function(r){return function(e){return Object.keys(e).reduce(r.bind(null,e),{})}};var or=ir(function(e,r,n){return tr(n.toLowerCase(),r,e[n])});var ur=ir(function(e,r,n){return tr(n,r,or(e[n]))});var lr=function(e,r){return u(e)?e:r};var cr=function(e){return{aggregates:e.Aggregates||e.aggregates,field:e.Member||e.member||e.field,hasSubgroups:e.HasSubgroups||e.hasSubgroups||false,items:e.Items||e.items,value:lr(e.Key,lr(e.key,e.value))}};var fr=r(function(e){var r=e.field,n=e.hasSubgroups,a=e.value,t=e.aggregates,i=e.items;return{aggregates:ur(t),field:r,items:n?i.map(fr):i,value:a}},cr);var sr={or:{concat:function(r,n){return function(e){return r(e)||n(e)}},identity:function(){return false}},and:{concat:function(r,n){return function(e){return r(e)&&n(e)}},identity:function(){return true}}};var vr={contains:function(e,r){return(e||"").indexOf(r)>=0},doesnotcontain:function(e,r){return(e||"").indexOf(r)===-1},doesnotendwith:function(e,r){return(e||"").indexOf(r,(e||"").length-(r||"").length)<0},doesnotstartwith:function(e,r){return(e||"").lastIndexOf(r,0)===-1},endswith:function(e,r){return(e||"").indexOf(r,(e||"").length-(r||"").length)>=0},eq:function(e,r){return e===r},gt:function(e,r){return e>r},gte:function(e,r){return e>=r},isempty:function(e){return e===""},isnotempty:function(e){return e!==""},isnotnull:function(e){return u(e)},isnull:function(e){return he(e)},lt:function(e,r){return e<r},lte:function(e,r){return e<=r},neq:function(e,r){return e!=r},startswith:function(e,r){return(e||"").lastIndexOf(r,0)===0}};var mr=/^\/Date\((.*?)\)\/$/;var dr=function(e,r){if(e!=null&&Ne(e)){var n=mr.exec(e);if(n)return new Date(+n[1]).getTime();else if(r)return e.toLowerCase()}else if(e!=null&&_e(e))return e.getTime();return e};var pr=function(n,e,a){if(!u(e))return n;var t=n;if(Ne(e)){var r=mr.exec(e);if(r)e=new Date(+r[1]);else t=function(e){var r=n(e);if(typeof r==="string"&&a)return r.toLowerCase();else return Ee(r)?r+"":r}}if(_e(e))return function(e){var r=t(e);return _e(r)?r.getTime():r};return t};var Ar=function(e){var r=e.field,n=e.ignoreCase,a=e.value,t=e.operator;r=!u(r)?function(e){return e}:r;n=u(n)?n:true;var i=pr(Ie(r)?r:Pe(r,true),a,n);a=dr(a,n);var o=Ie(t)?t:vr[t];return function(e){return o(i(e),a,n)}};var hr=function(e){var r=sr[e.logic];return e.filters.filter(u).map(function(e){return Re(e)?hr(e):Ar(e)}).reduce(r.concat,r.identity)};var Or=function(e){if(!e||e.filters.length===0)return function(){return true};return hr(e)};function Ir(e,r){if("filters"in e)e.filters.map(function(e){return Ir(e,r)});else r(e)}var Nr=function(e,r){var n=Array.isArray(e)?e:e.filters;n.forEach(function(e){return Ir(e,r)})};var gr=function(e,r,n){var a=n?Array.isArray(n)?{logic:"and",filters:n}:n:undefined;var t=a?Or(a):function(){return true};var i=e.concat(r);var o=[];Nr(n||[],function(e){if("field"in e&&e.field)o.push(e.field)});var u={hasFilter:false,predicate:t,filteringAxes:[]};if(o.some(function(e){return typeof e==="function"}))u.filteringAxes=i.slice();else if(o.length>0){var l=Array.from(new Set(o).values());var c=i.filter(function(e){return l.indexOf(e.key)>=0});u.filteringAxes=c}u.hasFilter=u.filteringAxes.length>0;return u};var Tr=function(e,r,n){var a=e.get(r);if(!a){a=n||new Map;e.set(r,a)}return a};var Er="&";var _r=function(e,r){return e+Er+r};var R=function(e){var r=e.indexOf(Er);if(r!==-1){var n=e.substring(0,r);var a=e.substring(r+1);return[n,a]}else return[e,undefined]};var Rr=function(t,i,o){t.forEach(function(e,r){if(r!==o){if(e.size>0)Rr(e,i,o);var n=e.get(o);var a=Tr(t,o,{});i.forEach(function(e){e.aggregate.init(a);e.aggregate.merge(n,a)})}})};var yr=function(e,a,t,i){e.forEach(function(r,e){var n;if(e!==i){n=Tr(a,e);yr(r,n,t,i)}else{n=Tr(a,e,{});t.forEach(function(e){e.aggregate.init(n);e.aggregate.merge(r,n)})}})};var Cr=function(t,i,o,u){t.forEach(function(e,r){if(r!==o){if(e.size>0)Cr(e,i,o,u);var n=Tr(e,o);var a=Tr(t,o);yr(n,a,i,u)}})};var xr=function(n,u,l,c,e,a){var f=new Map;var s=new Map;var p=u.concat(l);var v=new Set;var m=e.dataField,d=e.columnsData;var r=gr(u,l,a),A=r.hasFilter,h=r.predicate,O=r.filteringAxes;var I="";n.forEach(function(r){if(A){var n={};O.forEach(function(e){n[e.key]=e.displayValue(r)});if(!h(n))return}var e=p.map(function(e){return e.displayValue(r)});var a=I.concat.apply(I,e);var t=s.get(a);if(!t){var i=f;var o=function(e){i=Tr(i,_r(e.key,e.displayValue(r)))};u.forEach(o);i=Tr(i,d);v.add(i);l.forEach(o);t={};i.set(m,t);s.set(a,t);c.forEach(function(e){e.aggregate.init(t)})}c.forEach(function(e){e.aggregate.accumulate(t,e.value(r))})});v.forEach(function(e){return Rr(e,c,m)});Cr(f,c,d,m);return f};var Sr=function(e,r,n){var a=new Map;yr(e,a,n,r);return a};var Mr=function(r,e,n){var a=R(r),t=a[0],i=a[1];var o=n.slice();if(t&&i){var u=e.find(function(e){return e.key===t});var l=u?u.caption:"";return o.map(function(e){return e===l?r:e})}return o};var Pr=function(e,r,l,c,f,s,n){var v=n||new Map;var m=c.map(function(e){return e.caption});while(r.length>1&&c.some(function(e){return e.caption===r[r.length-1].caption})){r.pop();m.pop()}var d=e;r.forEach(function(r,e){m=Mr(r.name,c,m);if(d&&!c.some(function(e){return e.caption===r.name})){if(!d.has(r.name)&&!v.has(m.slice(0,m.indexOf(r.name)+1).join("-"))){var n=Array.from(d).find(function(e){return e[0]!==l});var a=n&&n[0];var t=a&&R(a)[0];var i=t?e-c.findIndex(function(e){return e.key===t}):0;var o=function(e){var n=[];d.forEach(function(e,r){if(r!==l)n.push.apply(n,Array.from(e).filter(function(e){return e[0]!==l}))});var t=new Map;n.forEach(function(e){if(t.has(e[0])){var r=t.get(e[0]);var n=e[1];var a=new Map;yr(r,a,f,s);yr(n,a,f,s);t.set(e[0],a)}else t.set(e[0],new Map(e[1]))});var a=m.slice(0,m.indexOf(r.name));t.forEach(function(e,r){v.set(Mr(r,c,a.concat([r])).join("-"),e)});t.set(l,d.get(l));d=t};for(var u=0;u<i;u++)o(u)}d=d.get(r.name)||v.get(m.slice(0,m.indexOf(r.name)+1).join("-"))}});return d};var Dr=function(r,e,n,a,s,t,v){var m=[];var d=a.dataField,i=a.columnsData;var o=new Map;e.forEach(function(c){var e=Pr(r,c.members.slice(),i,t,v,d,o);var f=e&&e.get(i);n.forEach(function(e){var r=e.members.slice();var n=v[0];if(r[r.length-1].levelName==="[Measures].[MeasuresLevel]"){var a=r.pop();n=v.find(function(e){return String(e.name)===a.caption})||n}var t=f&&Pr(f,r,d,s,v,d);var i="",o="",u=0;if(t&&n){var l=n.aggregate.result(t.get(d));i=String(l);o=n.aggregate.format(l)}m.push({columnTuple:e,data:{fmtValue:o,ordinal:u,value:i},rowTuple:c})})});return m};var wr=function(e,t){var i={members:[]};e.forEach(function(r){var e=t.find(function(e){return e.key===r});var n=e?e.caption:"";var a={caption:n,children:[],hasChildren:true,parentName:"",levelNum:0,levelName:n,hierarchy:r,name:n};i.members.push(a)});return i};var Ur=function(i,o){return function(e,r){var n=i.dir;var a=o.sortValue(R(e[0])[1]);var t=o.sortValue(R(r[0])[1]);if(a<t)return n==="asc"?-1:1;if(a>t)return n==="asc"?1:-1;return 0}};var Fr=function(e,a,t){e.forEach(function(e,r){if(!t[r]){var n=Tr(a,r);Fr(e,n,t)}})};var br=function(e,a,t){var i=[];var o=function(e){return Array.from(e).filter(function(e){return!t[e[0]]})};var u=new Map(e);var l;var r=function(r){l=u.get(a[r]);if(l)u=new Map(l);else if(r<a.length-1&&Array.from(u).some(function(e){return R(e[0])[0]===a[r]})){var n=[];u.forEach(function(e,r){if(!t[r])n.push.apply(n,o(new Map(e)))});u=new Map;n.forEach(function(e){if(u.has(e[0])){var r=u.get(e[0]);var n=e[1];var a=new Map;Fr(r,a,t);Fr(n,a,t);u.set(e[0],a)}else u.set(e[0],new Map(e[1]))})}else if(r===0||r===a.length-1)if(Array.from(u).some(function(e){return R(e[0])[0]===a[r]}))i.push.apply(i,o(u))};for(var n=0;n<a.length;n++)r(n);return i};var Vr=function(e){var r=new Set;e.forEach(function(e){if(e.name.length===1&&!R(e.name[0])[1])r.add(e.name[0])});return r};var Gr=function(N,r,g,T,E){var n=Vr(r);var _=[];var e=wr(n,N);_.push(e);var a=function(e){var d=r[e];if(d.name.length===1&&!d.expand&&n.has(d.name[0]))return"continue";var p=new Set(n.keys());var A=[];var h=[];var O=[];var I;d.name.forEach(function(r,f){var e;var n=R(r),a=n[0],s=n[1];I=N.find(function(e){return e.key===a});if(s){p.delete(a);h.push(r);var t={children:[],caption:s,hierarchy:a,levelNum:1,levelName:a+" "+a,name:r,parentName:I?I.caption:""};A.push(t)}else if(d.expand&&d.name.length-1===f){p.delete(r);h.push(r);var i=br(g,h,E);var o=T.find(function(e){return e.field===a});if(o&&o.dir)i.sort(Ur(o,I));for(var u=0;u<i.length;u++){var v=i[u][0];var l={members:[]};O.push(l);var m=R(v)[1];I=N.find(function(e){return e.key===r});var t={caption:m,children:[],levelName:r+" "+r,levelNum:1,parentName:I?I.caption:"",hierarchy:r,name:v};(e=l.members).push.apply(e,A);l.members.push(t)}}else if(d.expand){I=N.find(function(e){return e.key===r});var c=I?I.caption:"";p.delete(r);h.push(r);var t={children:[],caption:c,hierarchy:r,levelName:c,levelNum:0,name:c,parentName:""};A.push(t)}p.forEach(function(a){O.forEach(function(e){I=N.find(function(e){return e.key===a});var r=I?I.caption:"";var n={children:[],hasChildren:true,caption:r,hierarchy:a,levelName:r,levelNum:0,name:r,parentName:""};e.members.push(n)})});_.push.apply(_,O)})};for(var t=0;t<r.length;t++)a(t);return _};var Lr=function(e,r){var n={caption:String(r.name),children:[],hasChildren:false,hierarchy:"[Measures]",levelName:"[Measures].[MeasuresLevel]",levelNum:0,name:"[Measures].["+r.name+"]",parentName:""};var a=ie(e);a.members.push(n);return a};var kr=function(e,r){if(r.length<2)return e;var n=e.slice();for(var a=n.length-1;a>=0;a--){var t=n[a];n[a]=Lr(n[a],r[0]);for(var i=1;i<r.length;i++){var o=Lr(t,r[i]);n.splice(a+1,0,o)}}return n};var Hr=function(e){var r;var n=e.dataTree,a=e.rowSettings,t=e.columnSettings,f=e.rowAxes,s=e.columnAxes,i=e.measures,o=e.sort,u=e.fields;var l=(r={},r[u.columnsData]=u.columnsData,r[u.dataField]=u.dataField,r);var c=kr(Gr(t,s,n.get(u.columnsData),o,l),i);var v=Gr(a,f,n,o,l);var m=Dr(n,v,c,u,t,a,i);return{columns:c,data:m,rows:v}};var qr=function(e,r){var n=Object.keys(e).map(function(e){return{caption:e,defaultHierarchy:e,description:"",name:e,uniqueName:e,hierarchyUniqueName:e,measure:true,type:1}});if(r.length)n.push({caption:"Measures",children:r.map(function(e){return{aggregator:"1",caption:String(e.name),defaultFormat:"",description:"",displayFolder:"",groupName:String(e.name),name:String(e.name),uniqueName:String(e.name)}}),type:2,description:"",name:"Measures",uniqueName:"[Measures]"});return n};h.addKPI=le;h.addMultipleMeasures=kr;h.averageAggregate=Ae;h.buildKPIMeasures=ue;h.cloneDataTree=Sr;h.compareAxes=g;h.configuratorReducer=T;h.createAxisDescriptors=K;h.createDataState=Y;h.createDataTree=xr;h.createDiscoverBody=D;h.createFlatSchemaDimensions=qr;h.createLocalDataState=Hr;h.createRequestBody=x;h.createTuples=Gr;h.discoverCommands=t;h.fetchData=q;h.fetchDiscover=B;h.headersReducer=ve;h.maxAggregate=pe;h.mergeTrees=yr;h.minAggregate=de;h.parseResponse=M;h.readData=Dr;h.rootFields=Vr;h.setFilter=z;h.setSort=j;h.sumAggregate=me;h.toColumns=ae;h.toData=re;h.toRows=te;h.toTree=ee;Object.defineProperty(h,"__esModule",{value:true});return h}({})})}("function"==typeof define&&define.amd?define:function(e,r,n){(n||r)()}),function(define){define("kendo.pivot.common.min",["./pivotgrid/common.min"],function(){var e={id:"pivot.common",name:"PivotCommon",category:"web",description:"Common JS for PivotGrid",depends:["core"]};return window.kendo})}("function"==typeof define&&define.amd?define:function(e,r,n){(n||r)()});
//# sourceMappingURL=kendo.pivot.common.min.js.map
