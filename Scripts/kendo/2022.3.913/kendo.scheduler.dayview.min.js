/**
 * Kendo UI v2022.3.913 (http://www.telerik.com/kendo-ui)
 * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(define){define("kendo.scheduler.dayview.min",["kendo.scheduler.view.min"],function(){var e={id:"scheduler.dayview",name:"Scheduler Day View",category:"web",description:"The Scheduler Day View",depends:["scheduler.view"],hidden:true},T=window.kendo.jQuery,d=void 0,S=window.kendo,t=S.ui,D=S.date.setTime,y=t.SchedulerView,H=S._outerWidth,M=S._outerHeight,w=T.extend,b=S.date.getDate,k=S.date.MS_PER_MINUTE,C=S.date.MS_PER_DAY,R="k-current-time",L="k-current-time-arrow",_="k-event-inverse",W=.8666,x=S.date.getMilliseconds,a=".kendoMultiDayView",i=S.template('<div title="(#=kendo.format("{0:t} - {1:t}", start, end)#): #=title.replace(/"/g,"&\\#34;")#">'+'<div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div>'+'<div class="k-event-template">${title}</div>'+"</div>"),r=S.template('<div title="(#=kendo.format("{0:t}", start)#): #=title.replace(/"/g,"&\\#34;")#">'+'<div class="k-event-template">${title}</div>'+"</div>"),s=S.template("#var dateString = isMobile ? kendo.toString(date,'ddd')[0] : kendo.toString(date,'ddd M/dd'); #"+"<span class='k-link k-nav-day'>#=dateString#</span>"),n='<div role="button" '+'aria-label="#: ariaLabel #" '+'data-#=ns#uid="#=uid#"'+"#if (resources[0]) { #"+'style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"'+'class="k-event"'+"#} else {#"+'class="k-event"'+"#}#"+">"+'<span class="k-event-actions">'+"# if(data.tail || data.middle) {#"+'<span class="k-icon k-i-arrow-60-left"></span>'+"#}#"+"# if(data.isException()) {#"+'<span class="k-icon k-i-non-recurrence"></span>'+"# } else if(data.isRecurring()) {#"+'<span class="k-icon k-i-reload"></span>'+"# } #"+"</span>"+"{0}"+'<span class="k-event-actions">'+"#if (showDelete) {#"+'<a href="\\#" class="k-link k-event-delete" title="${data.messages.destroy}" aria-label="${data.messages.destroy}"><span class="k-icon k-i-close"></span></a>'+"#}#"+"# if(data.head || data.middle) {#"+'<span class="k-icon k-i-arrow-60-right"></span>'+"#}#"+"</span>"+"#if(resizable && !singleDay && !data.tail && !data.middle){#"+'<span class="k-resize-handle k-resize-w"></span>'+"#}#"+"#if(resizable && !singleDay && !data.head && !data.middle){#"+'<span class="k-resize-handle k-resize-e"></span>'+"#}#"+"</div>",o='<div role="button" '+'aria-label="#: ariaLabel #" '+'data-#=ns#uid="#=uid#" '+"#if (resources[0]) { #"+'style="background-color:#=resources[0].color #; border-color: #=resources[0].color#"'+'class="k-event"'+"#} else {#"+'class="k-event"'+"#}#"+">"+'<span class="k-event-actions">'+"# if(data.isException()) {#"+'<span class="k-icon k-i-non-recurrence"></span>'+"# } else if(data.isRecurring()) {#"+'<span class="k-icon k-i-reload"></span>'+"# } #"+"</span>"+"{0}"+'<span class="k-event-actions">'+"#if (showDelete) {#"+'<a href="\\#" class="k-link k-event-delete" title="${data.messages.destroy}" aria-label="${data.messages.destroy}"><span class="k-icon k-i-close"></span></a>'+"#}#"+"</span>"+'<span class="k-event-top-actions">'+"# if(data.tail || data.middle) {#"+'<span class="k-icon k-i-arrow-60-up"></span>'+"# } #"+"</span>"+'<span class="k-event-bottom-actions">'+"# if(data.head || data.middle) {#"+'<span class="k-icon k-i-arrow-60-down"></span>'+"# } #"+"</span>"+"# if(resizable && !data.tail && !data.middle) {#"+'<span class="k-resize-handle k-resize-n"></span>'+"# } #"+"# if(resizable && !data.head && !data.middle) {#"+'<span class="k-resize-handle k-resize-s"></span>'+"# } #"+"</div>";function z(e){var t=new Date(1980,1,1,0,0,0);D(t,x(e));return t}function E(e,t,a){return e>=t&&e<=a}function l(e,t,a,i){i=i?e<=a:e<a;return e>t&&i}function A(e,t,a,i){var r=e._continuousEvents;var s=r[r.length-1];var n=b(t.start.startDate()).getTime();if(i&&s&&b(s.start.startDate()).getTime()==n){var o=r.length-1;for(;o>-1;o--)if(r[o].isAllDay||b(r[o].start.startDate()).getTime()<n)break;r.splice(o+1,0,{element:a,isAllDay:true,uid:a.attr(S.attr("uid")),start:t.start,end:t.end})}else r.push({element:a,isAllDay:i,uid:a.attr(S.attr("uid")),start:t.start,end:t.end})}function u(e){if(e.workDays&&e.workDays.length)return e.workDays;var t=[];var a=e.workWeekStart%7;var i=Math.abs(e.workWeekEnd%7);t.push(a);while(i!=a){if(a>6)a-=7;else a++;t.push(a)}return t}var h=y.extend({init:function(e,t){var a=this;y.fn.init.call(a,e,t);a.title=a.options.title||a.options.name;a._workDays=u(a.options);a._templates();a._editable();a.calculateDateRange();a._groups();a._currentTime(true)},_currentTimeMarkerUpdater:function(){this._updateCurrentTimeMarker(new Date)},_updateCurrentTimeMarker:function(e){var t=this.options,a,i,r,s,u="<div class='"+R+"'></div>";if(t.currentTimeMarker.useLocalTimezone===false){var h=t.dataSource.options.schema.timezone;if(t.dataSource&&h){var c=S.timezone.offset(e,h);e=S.timezone.convert(e,e.getTimezoneOffset(),c)}}a=this.times.find("."+R);i=this.content.find("."+R);var f=!t.group||t.group.orientation=="horizontal"?1:this.groups.length;var n=this.times.find("tr").first().find("th").first();var v=this.times.find("tr").first().find("th").last();if(n.length>0&&v.length>0)if(this._isRtl)s=n.position().left+M(n)-M(v);else s=v.position().left;for(var o=0;o<f;o++){var p=this.groups[o];if(!p)return;var m=S.date.toUtcTime(e);var g=p.timeSlotRanges(m,m+1);if(g.length===0)return;var _=g[0].collection;var y=_.slotByStartDate(e);if(y){var l=a[o]?a.eq(o):T(u).prependTo(this.times);var D=Math.round(g[0].innerRect(e,new Date(e.getTime()+1),false).top);var d={};if(this._isRtl){d.right=s;l.addClass(L+"-left")}else{d.left=s;l.addClass(L+"-right")}if(!r)r=H(l)*W/2;d.top=D-r;l.css(d);var k=i[o]?i.eq(o):T(u).prependTo(this.content);k.css({top:D,height:"1px",right:0,left:0})}}},_currentTime:function(e){var t=this;var a=t.options.currentTimeMarker;if(a!==false&&a.updateInterval!==d){t._currentTimeMarkerUpdater();if(e)t._currentTimeUpdateTimer=setInterval(this._currentTimeMarkerUpdater.bind(t),a.updateInterval)}},_updateResizeHint:function(e,u,h,c){var t;if(this.options.enforceAllDaySlot)t=e.isMultiDay();else t=e.isAllDay;var f=this.groups[u];var v=f.ranges(h,c,t,e.isAllDay);var a,i,r,s;this._removeResizeHint();for(var p=0;p<v.length;p++){var n=v[p];var o=n.startSlot();if(this._isGroupedByDate()&&t)for(var m=o.index;m<=n.end.index;m++){var l=n.collection._slots[m];a=l.offsetWidth;i=l.clientHeight;r=l.offsetTop;s=y.fn._createResizeHint.call(this,l.offsetLeft,r,a,i);this._resizeHint=this._resizeHint.add(s)}else{a=o.offsetWidth;i=o.clientHeight;r=o.offsetTop;if(t)a=n.innerWidth();else{var g=n.outerRect(h,c,this.options.snap);r=g.top;i=g.bottom-g.top}s=y.fn._createResizeHint.call(this,o.offsetLeft,r,a,i);this._resizeHint=this._resizeHint.add(s)}}var _="t";var d=this.content;if(t){_="M/dd";d=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div");if(!d.length)d=this.content}this._resizeHint.appendTo(d);this._resizeHint.find(".k-label-top,.k-label-bottom").text("");this._resizeHint.first().addClass("k-first").find(".k-label-top").text(S.toString(S.timezone.toLocalDate(h),_));this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(S.toString(S.timezone.toLocalDate(c),_))},_updateMoveHint:function(e,u,h){var t;if(this.options.enforceAllDaySlot)t=e.isMultiDay();else t=e.isAllDay;var c=this.groups[u];var a=S.date.toUtcTime(e.start)+h;var i=a+e.duration();var f=c.ranges(a,i,t,e.isAllDay);a=S.timezone.toLocalDate(a);i=S.timezone.toLocalDate(i);this._removeMoveHint(e.uid);if(!t&&x(i)<x(this.startTime())&&i<this._end().getTime()&&x(i)!==0&&f.length>1)f.pop();var r=T();for(var v=0;v<f.length;v++){var s=f[v];var n=s.start;var o;var l={left:n.offsetLeft+2,top:n.offsetTop};if(this._isGroupedByDate()&&t)for(var p=n.index;p<=s.end.index;p++){var d=s.collection._slots[p];l.left=this._isRtl?d.clientWidth*.1+d.offsetLeft+2:d.offsetLeft+2;l.height=d.offsetHeight;l.width=d.clientWidth*.9-2;o=this._createEventElement(e.clone({start:a,end:i}),!t);if(e.inverseColor)o.addClass(_);this._appendMoveHint(o,l);r=r.add(o)}else{if(this._isRtl)l.left=n.clientWidth*.1+n.offsetLeft+2;if(t)l.width=s.innerWidth()-2;else{var m=s.outerRect(a,i,this.options.snap);l.top=m.top;l.height=m.bottom-m.top;l.width=n.clientWidth*.9-2}o=this._createEventElement(e.clone({start:a,end:i}),!t);if(e.inverseColor)o.addClass(_);this._appendMoveHint(o,l);r=r.add(o)}}var g=this.content;if(t){g=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div");if(!g.length)g=this.content}r.appendTo(g)},_appendMoveHint:function(e,t){e.addClass("k-event-drag-hint");e.css(t);this._moveHint=this._moveHint.add(e)},_slotByPosition:function(e,t){var a,i;if(this._isVerticallyGrouped()){i=this.content.offset();t+=this.content[0].scrollTop;e+=this.content[0].scrollLeft}else i=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day)").find(">div").offset();if(i){e-=i.left;t-=i.top}e=Math.ceil(e);t=Math.ceil(t);var r;var s;for(s=0;s<this.groups.length;s++){r=this.groups[s];a=r.daySlotByPosition(e,t,this._isGroupedByDate());if(a)return a}if(i){e+=i.left;t+=i.top}i=this.content.offset();e-=i.left;t-=i.top;if(!this._isVerticallyGrouped()){t+=this.content[0].scrollTop;e+=this.content[0].scrollLeft}e=Math.ceil(e);t=Math.ceil(t);for(s=0;s<this.groups.length;s++){r=this.groups[s];a=r.timeSlotByPosition(e,t);if(a)return a}return null},_groupCount:function(){var e=this.groupedResources;var t=this._isGroupedByDate();if(e.length)if(this._groupOrientation()==="vertical")if(t)return this._columnCountForLevel(e.length-1);else return this._rowCountForLevel(e.length-1);else if(t)return this._columnCountForLevel(e.length)/this._columnCountForLevel(0);else return this._columnCountForLevel(e.length)/this._columnOffsetForResource(e.length);return 1},_columnCountInResourceView:function(){var e=this.groupedResources;var t=this._isGroupedByDate();if(!e.length||this._isVerticallyGrouped())if(t)return this._rowCountForLevel(0);else return this._columnCountForLevel(0);if(t)return this._columnCountForLevel(0);else return this._columnOffsetForResource(e.length)},_timeSlotGroups:function(e,t){var a=this._timeSlotInterval();var u=e;var h=this._isGroupedByDate();var c=this.content.find("tr:not(.k-scheduler-header-all-day)");var i,r,s,n;var o=c.length;if(this._isVerticallyGrouped()){if(h)u=t;o=Math.floor(o/u)}for(var l=0;l<u;l++){var f=0;var d=0;if(this._isVerticallyGrouped())f=l;else d=l;s=f*o;while(s<(f+1)*o){var v=c[s].children;if(s%o===0)r=x(new Date(+this.startTime()));var p=0;if(h)if(this._isVerticallyGrouped())for(n=0;n<e;n++){i=this.groups[n];this._addTimeSlotGroup(i,v,n,r,a,l)}else{i=this.groups[l];for(n=d;n<e*t;n=n+e){this._addTimeSlotGroup(i,v,n,r,a,p);p++}}else{i=this.groups[l];for(n=d*t;n<(d+1)*t;n++){this._addTimeSlotGroup(i,v,n,r,a,p);p++}}r+=a;s++}}},_addTimeSlotGroup:function(e,t,a,i,r,s){var n=t[a];var o=e.getTimeSlotCollection(s);var l=this._dates[s];if(!l||!n)return;var u=Date.UTC(l.getFullYear(),l.getMonth(),l.getDate());var d=u+i;var h=d+r;o.addTimeSlot(n,d,h)},_addDaySlotGroup:function(e,t,a,i,r){var s=t[a];var n=this._dates[r];if(!n)return;var o=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate());e.addDaySlot(s,o,o+S.date.MS_PER_DAY)},_daySlotGroups:function(e,t){var a,i;var u=e;var h=this._isGroupedByDate();if(this._isVerticallyGrouped()){if(h)u=t;a=this.element.find(".k-scheduler-header-all-day")}else a=this.element.find(".k-scheduler-header-all-day tr");for(var r=0;r<u;r++){var c=0;var s,n;if(this._isVerticallyGrouped())c=r;var o=a[c].children;var l=0;if(!this._isVerticallyGrouped())l=r;var d=0;if(h)if(this._isVerticallyGrouped())for(i=0;i<e;i++){s=this.groups[i];n=s.getDaySlotCollection(0);this._addDaySlotGroup(n,o,i,t,r)}else{s=this.groups[r];n=s.getDaySlotCollection(0);for(i=l;i<e*t;i=i+e){this._addDaySlotGroup(n,o,i,t,d);d++}}else{s=this.groups[r];n=s.getDaySlotCollection(0);for(i=l*t;i<(l+1)*t;i++){this._addDaySlotGroup(n,o,i,t,d);d++}}}},_groups:function(){var e=this._groupCount();var t=this._columnCountInResourceView();this.groups=[];for(var a=0;a<e;a++){var i=this._addResourceView(a);for(var r=0;r<t;r++)if(this._dates[r])i.addTimeSlotCollection(this._dates[r],S.date.addDays(this._dates[r],1));if(this.options.allDaySlot)i.addDaySlotCollection(this._dates[0],S.date.addDays(this._dates[this._dates.length-1],1))}this._timeSlotGroups(e,t);if(this.options.allDaySlot)this._daySlotGroups(e,t)},options:{name:"MultiDayView",selectedDateFormat:"{0:D}",selectedShortDateFormat:"{0:d}",selectedMobileDateFormat:"{0:MMM} {0:dd} - {1:dd}",allDaySlot:true,showWorkHours:false,title:"",startTime:S.date.today(),endTime:S.date.today(),minorTickCount:2,majorTick:60,majorTimeHeaderTemplate:"<span>#=kendo.toString(date, 't')#</span>",minorTimeHeaderTemplate:"&\\#8203;",groupHeaderTemplate:"#=text#",slotTemplate:"&nbsp;",allDaySlotTemplate:"&nbsp;",eventTemplate:i,allDayEventTemplate:r,dateHeaderTemplate:s,editable:true,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,footer:{command:"workDay"},messages:{allDay:"all day",showFullDay:"Show full day",showWorkDay:"Show business hours"},currentTimeMarker:{updateInterval:1e4,useLocalTimezone:true},enforceAllDaySlot:false},events:["remove","add","edit"],_templates:function(){var e=this.options,t=w({},S.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,o);this.allDayEventTemplate=this._eventTmpl(e.allDayEventTemplate,n);this.majorTimeHeaderTemplate=S.template(e.majorTimeHeaderTemplate,t);this.minorTimeHeaderTemplate=S.template(e.minorTimeHeaderTemplate,t);this.dateHeaderTemplate=S.template(e.dateHeaderTemplate,t);this.slotTemplate=S.template(e.slotTemplate,t);this.allDaySlotTemplate=S.template(e.allDaySlotTemplate,t);this.groupHeaderTemplate=S.template(e.groupHeaderTemplate,t)},_editable:function(){if(this.options.editable)if(this._isMobile())this._touchEditable();else this._mouseEditable()},_mouseEditable:function(){var i=this;i.element.on("click"+a,".k-event a:has(.k-i-close)",function(e){i.trigger("remove",{uid:T(this).closest(".k-event").attr(S.attr("uid"))});e.preventDefault()});if(i.options.editable.create!==false)i.element.on("dblclick"+a,".k-scheduler-content > table td",function(e){if(!T(this).parent().hasClass("k-scheduler-header-all-day")){var t=i._slotByPosition(e.pageX,e.pageY);if(t){var a=i._resourceBySlot(t);i.trigger("add",{eventInfo:w({start:t.startDate(),end:t.endDate()},a)})}e.preventDefault()}}).on("dblclick"+a,".k-scheduler-header-all-day td",function(e){var t=i._slotByPosition(e.pageX,e.pageY);if(t){var a=i._resourceBySlot(t);i.trigger("add",{eventInfo:w({},{isAllDay:true,start:S.date.getDate(t.startDate()),end:S.date.getDate(t.startDate())},a)})}e.preventDefault()});if(i.options.editable.update!==false)i.element.on("dblclick"+a,".k-event",function(e){i.trigger("edit",{uid:T(this).closest(".k-event").attr(S.attr("uid"))});e.preventDefault()})},_touchEditable:function(){var s=this;var e=0;if(S.support.mobileOS.android)e=5;if(s.options.editable.create!==false){s._addUserEvents=new S.UserEvents(s.element,{threshold:e,filter:".k-scheduler-content td",useClickAsTap:!S.support.browser.edge,tap:function(e){if(s._scrolling)return;if(!T(e.target).parent().hasClass("k-scheduler-header-all-day")){var t=e.x.location!==d?e.x.location:e.x;var a=e.y.location!==d?e.y.location:e.y;var i=s._slotByPosition(t,a);if(i){var r=s._resourceBySlot(i);s.trigger("add",{eventInfo:w({start:i.startDate(),end:i.endDate()},r)})}e.preventDefault()}}});s._allDayUserEvents=new S.UserEvents(s.element,{threshold:e,useClickAsTap:!S.support.browser.edge,filter:".k-scheduler-header-all-day td",tap:function(e){if(s._scrolling)return;var t=e.x.location!==d?e.x.location:e.x;var a=e.y.location!==d?e.y.location:e.y;var i=s._slotByPosition(t,a);if(i){var r=s._resourceBySlot(i);s.trigger("add",{eventInfo:w({},{isAllDay:true,start:S.date.getDate(i.startDate()),end:S.date.getDate(i.startDate())},r)})}e.preventDefault()}})}if(s.options.editable.update!==false)s._editUserEvents=new S.UserEvents(s.element,{threshold:e,useClickAsTap:!S.support.browser.edge,filter:".k-event",tap:function(e){if(s._scrolling)return;var t=T(e.target).closest(".k-event");var a=T(e.touch.initialTouch);if(a.hasClass("k-i-close"))s.trigger("remove",{uid:t.attr(S.attr("uid"))});else if(!t.hasClass("k-event-active"))s.trigger("edit",{uid:t.attr(S.attr("uid"))});e.preventDefault()}})},_layout:function(a){var e=[];var n=[];var t=this.options;var o=this;var i=o._isGroupedByDate();for(var r=0;r<a.length;r++){var s={};s.text=o.dateHeaderTemplate({date:a[r],isMobile:o._isMobile()});if(S.date.isToday(a[r]))s.className="k-today";e.push(s)}var l=this.groupedResources;if(t.allDaySlot)n.push({text:t.messages.allDay,allDay:true,cellContent:function(e){var t=e;e=l.length&&o._groupOrientation()!=="vertical"?e%a.length:e;return o.allDaySlotTemplate({date:a[e],resources:function(){return o._resourceBySlot({groupIndex:t})}})}});this._forTimeRange(this.startTime(),this.endTime(),function(e,t,a,i){var r=t?o.majorTimeHeaderTemplate:o.minorTimeHeaderTemplate;var s={text:r({date:e}),className:i?"k-slot-cell":""};n.push(s)});if(l.length)if(this._groupOrientation()==="vertical")if(i){n=this._createDateLayout(e,n);e=this._createColumnsLayout(l,null,this.groupHeaderTemplate)}else n=this._createRowsLayout(l,n,this.groupHeaderTemplate);else if(i)e=this._createColumnsLayout(l,e,this.groupHeaderTemplate,e);else e=this._createColumnsLayout(l,e,this.groupHeaderTemplate);return{columns:e,rows:n}},toggleFullDay:function(){var e=this.options;this.trigger("navigate",{view:this.name||e.name,date:e.date,isWorkDay:!e.showWorkHours})},_footer:function(){var n=this.options;if(n.footer!==false){var e='<div class="k-scheduler-footer k-toolbar" role="toolbar">';var t=n.footer.command;if(this._isMobile()){e+='<span class="k-scheduler-today"><a href="#" tabindex="-1" class="k-link">';e+=n.messages.today+"</a></span>"}if(t&&t==="workDay")if(this._isMobile()){e+='<span class="k-scheduler-fullday"><a href="#" tabindex="-1" class="k-link">';e+=(n.showWorkHours?n.messages.showFullDay:n.messages.showWorkDay)+"</a></span>"}else{e+='<button type="button" tabindex="-1" class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-scheduler-fullday">';e+='<span class="k-button-icon k-icon k-i-clock"></span>';e+='<span class="k-button-text">';e+=n.showWorkHours?n.messages.showFullDay:n.messages.showWorkDay;e+="</span>";e+="</button>"}e+="</div>";this.footer=T(e).appendTo(this.element);var o=this;this.footer.on("click"+a,".k-scheduler-fullday",function(e){e.preventDefault();o.toggleFullDay()});this.footer.on("click"+a,".k-scheduler-today",function(e){e.preventDefault();var t=o.options.timezone;var a="today";var i=new Date;var r;if(t){var s=S.timezone.offset(i,t);r=S.timezone.convert(i,i.getTimezoneOffset(),s)}else r=i;o.trigger("navigate",{view:o.name||n.name,action:a,date:r})})}},_forTimeRange:function(e,t,u,h){e=z(e);t=z(t);var c=this,a=x(e),i=x(t),r=c.options.minorTickCount,f=c.options.majorTick*k,s=f/r||1,n=new Date(+e),v=n.getDate(),o,l=0,d,p="";d=C/s;if(a!=i){if(a>i)i+=C;d=(i-a)/s}d=Math.round(d);for(;l<d;l++){var m=l%(f/s),g=m===0,_=m<r-1,y=m===r-1;p+=u(n,g,_,y);D(n,s,false)}if(i){o=x(n);if(v<n.getDate())o+=C;if(o>i)n=new Date(+t)}if(h)p+=h(n);return p},_content:function(e){var t=this;var a="";a+="<tbody>";a+=t._renderRows(e,t.rowLevels,t.columnLevels);a+="</tbody>";this.content.find("table").append(a)},_virtualContent:function(e,t){var a=this;var i="";var r=a._dates;i+=a._renderRows(r,e,t);a.content.find("table tbody").append(i)},_renderRows:function(l,i,r){var d=this;var u=d._groupOrientation()==="vertical";var p=d._isGroupedByDate();var h=0;var c=l.length;var s=d.options;var n=d.startTime();var o=this.endTime();var f=1;var e=1;var m=this.groupedResources;var t="";if(m.length){var a=d._recalculateLevels(i,r);e=a.rowCount;f=a.groupsCount}var g=function(e,t,a){var i="";var r=0;var s,n;i="<tr"+(a?' class="k-middle-row"':"")+">";if(p)for(s=0,n=c;s<n;s++){for(r=0;r<f;r++){var o=s;if(u)o=h;i=d._addCellsToContent(i,l,e,o,r,v)}if(u)break}else for(;r<f;r++)for(s=0,n=c;s<n;s++)i=d._addCellsToContent(i,l,e,s,r,v);i+="</tr>";return i};for(var v=0;v<e;v++){t+=s.allDaySlot&&u?this._allDayVerticalGroupRow(l,v,f,h):"";t+=this._forTimeRange(n,o,g);if(u)h++}return t},_recalculateLevels:function(e,t){var a=this;var i=a._isGroupedByDate();var r=a._groupOrientation()==="vertical";var s=1;var n=1;if(r){n=a._rowCountForLevel(e.length-2,e);if(i)s=a._columnCountForLevel(t.length-1)}else if(i)s=a._columnCountForLevel(t.length-1)/this._columnCountForLevel(0);else s=a._columnCountForLevel(t.length-2);return{rowCount:n,groupsCount:s}},_allDayVerticalGroupRow:function(e,t,a,u){var i=this;var r='<tr class="k-scheduler-header-all-day">';var s=i._isGroupedByDate();var n=s?0:t;var o=i.allDaySlotTemplate;var l=function(){return i._resourceBySlot({groupIndex:n})};if(s)for(;n<a;n++)r+="<td>"+o({date:e[u],resources:l})+"</td>";else for(var d=0;d<e.length;d++)r+="<td>"+o({date:e[d],resources:l})+"</td>";return r+"</tr>"},_addCellsToContent:function(e,t,a,i,r,s){var n=this;var o="";var l;var d=this.slotTemplate;var u=this._groupOrientation()==="vertical";var h=function(e){return function(){return n._resourceBySlot({groupIndex:e})}};if(S.date.isToday(t[i]))o+="k-today";if(S.date.getMilliseconds(a)<S.date.getMilliseconds(this.options.workDayStart)||S.date.getMilliseconds(a)>=S.date.getMilliseconds(this.options.workDayEnd)||!this._isWorkDay(t[i]))o+=" k-nonwork-hour";e+="<td"+(o!==""?' class="'+o+'"':"")+">";l=S.date.getDate(t[i]);S.date.setTime(l,S.date.getMilliseconds(a));e+=d({date:l,resources:h(u&&!n._isGroupedByDate()?s:r)});e+="</td>";return e},_isWorkDay:function(e){var t=e.getDay();var a=this._workDays;for(var i=0;i<a.length;i++)if(a[i]===t)return true;return false},_render:function(e){var n=this;e=e||[];this._dates=e;this._startDate=e[0];this._endDate=e[e.length-1||0];this.createLayout(this._layout(e));this._content(e);this._footer();this.refreshLayout();if(this._isVirtualized())this._tryRenderContent();var t=this.element.find(".k-scheduler-header-all-day td");if(t.length)this._allDayHeaderHeight=t.first()[0].clientHeight;n.element.on("click"+a,".k-nav-day",function(e){var t=T(e.currentTarget).closest("th");var a=t.offset();var i=0;var r=M(t);if(n._isGroupedByDate())if(n._isVerticallyGrouped()){i=H(n.times);r=0}else r=M(n.datesHeader);var s=n._slotByPosition(a.left+i,a.top+r);n.trigger("navigate",{view:"day",date:s.startDate()})})},startTime:function(){var e=this.options;return e.showWorkHours?e.workDayStart:e.startTime},endTime:function(){var e=this.options;return e.showWorkHours?e.workDayEnd:e.endTime},startDate:function(){return this._startDate},endDate:function(){return this._endDate},_end:function(e){var t=x(this.endTime())||C;if(e)t=0;return new Date(this._endDate.getTime()+t)},nextDate:function(){return S.date.nextDay(this.endDate())},previousDate:function(){return S.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},destroy:function(){var e=this;if(e._currentTimeUpdateTimer)clearInterval(e._currentTimeUpdateTimer);if(e.datesHeader)e.datesHeader.off(a);if(e.element)e.element.off(a);if(e.footer)e.footer.remove();y.fn.destroy.call(this);if(this._isMobile()&&e.options.editable){if(e.options.editable.create!==false){e._addUserEvents.destroy();e._allDayUserEvents.destroy()}if(e.options.editable.update!==false)e._editUserEvents.destroy()}},inRange:function(e){var t=y.fn.inRange.call(this,e);if(e.isAllDay)return t;var a=x(this.startTime());var i=x(this.endTime())||S.date.MS_PER_DAY;var r=x(e.start);var s=x(e.end)||S.date.MS_PER_DAY;return t&&a<=r&&s<=i},selectionByElement:function(e){var t=e.offset();var a=Math.round(e.innerHeight())-5;return this._slotByPosition(t.left,t.top+a)},_timeSlotInterval:function(){var e=this.options;return e.majorTick/e.minorTickCount*k},_timeSlotIndex:function(e){var t=this.options;var a=x(e);var i=x(this.startTime());var r=t.majorTick/t.minorTickCount*k;return(a-i)/r},_slotIndex:function(e,t){if(t)return this._dateSlotIndex(e);return this._timeSlotIndex(e)},_dateSlotIndex:function(e,t){var a;var i;var r=this._dates||[];var s;var n;var o=1;for(a=0,i=r.length;a<i;a++){s=S.date.getDate(r[a]);n=new Date(S.date.getDate(r[a]).getTime()+C-(t?0:1));if(E(e,s,n))return a*o}return-1},_positionAllDayEvent:function(e,t){var u=t.innerWidth();var a=t.start.index;var i=t.end.index;var r=y.collidingEvents(t.events(),a,i);var h=this._headerColumnCount||0;var c=2;var f=a!==i?3:2;var s=this._allDayHeaderHeight;var v=t.startSlot();e.css({left:v.offsetLeft+c,width:u-f});t.addEvent({slotIndex:a,start:a,end:i,element:e});r.push({slotIndex:a,start:a,end:i,element:e});var n=y.createRows(r);if(n.length&&n.length>h)this._headerColumnCount=n.length;var p=t.start.offsetTop;for(var o=0,m=n.length;o<m;o++){var l=n[o].events;for(var d=0,g=l.length;d<g;d++)T(l[d].element).css({top:p+o*s,height:s-2})}},_arrangeColumns:function(e,u,h,t){var a=t.start;e={element:e,slotIndex:a.index,start:u,end:u+h};var i,c=a.clientWidth,r=c*.1,s,f=t.events(),v=y.collidingEvents(f,e.start,e.end),p=this.table.find(".k-scheduler-content .k-scheduler-table")[0],n=this.table.find(".k-scheduler-content")[0];t.addEvent(e);v.push(e);i=y.createColumns(v);var o=(c-r)/i.length;for(var l=0,m=i.length;l<m;l++){s=i[l].events;for(var d=0,g=s.length;d<g;d++){var _=o-2;s[d].element[0].style.width=(_>0?_:o)+"px";if(this._isRtl&&n.clientWidth<n.scrollWidth)s[d].element[0].style.left=r+a.offsetLeft+l*o-(p.clientWidth-n.clientWidth)+"px";else s[d].element[0].style.left=(this._isRtl?r:0)+a.offsetLeft+l*o+2+"px"}}},_positionEvent:function(e,t,a){var i=e._startTime||e.start;var r=e._endTime||e.end;var s=S.getComputedStyles(a.start.element,["border-top-width","border-bottom-width"]);var n=a.innerRect(i,r,false);var o=n.bottom-n.top-parseFloat(s["border-top-width"])-parseFloat(s["border-bottom-width"]);if(o<0)o=0;t.css({top:n.top,height:o});this._arrangeColumns(t,n.top,t[0].clientHeight,a)},_createEventElement:function(e,t,u,h){var c=t?this.eventTemplate:this.allDayEventTemplate;var f=this.options;var a=f.editable;var v=this._isMobile();var p=a&&a.destroy!==false&&!v;var m=a&&a.resize!==false;var g=b(this.startDate());var i=b(this.endDate());var r=x(this.startTime());var s=x(this.endTime());var n=e._time("start");var o=e._time("end");var _;if(r>=s)s=x(new Date(this.endTime().getTime()+C-1));if(!t&&!e.isAllDay)i=new Date(i.getTime()+C);var l=e.start;var d=e.end;if(e.isAllDay)d=b(e.end);if(!E(b(l),g,i)&&!E(d,g,i)||t&&e.start.getTime()!==e.end.getTime()&&(n<r||n>=s)&&(o>s||o<=r))_=true;else if(b(l)<g||t&&n!==0&&e.start.getTime()!==e.end.getTime()&&(n<r||n>=s))h=true;else if(d>i&&!t||t&&o!==0&&e.start.getTime()!==e.end.getTime()&&(o>s||o<=r))u=true;var y=this.eventResources(e);if(e._startTime&&n!==S.date.getMilliseconds(e.start)){l=new Date(n);l=S.timezone.apply(l,"Etc/UTC")}if(e._endTime&&o!==S.date.getMilliseconds(e.end)){d=new Date(o);d=S.timezone.apply(d,"Etc/UTC")}var D=w({},{ns:S.ns,resizable:m,showDelete:p,middle:_,head:u,tail:h,singleDay:this._dates.length==1,resources:y,inverseColor:false,messages:f.messages,ariaLabel:this._formatEventAriaLabel(e.title,l,d,e.isAllDay)},e,{start:l,end:d});var k=T(c(D));this.angular("compile",function(){return{elements:k,data:[{dataItem:D}]}});return k},_isInTimeSlot:function(e){var t=this.startTime(),a=this.endTime(),i=e._startTime||e.start,r=e._endTime||e.end;if(x(a)===x(S.date.getDate(a))){a=S.date.getDate(a);D(a,C-1)}if(e._date("end")>e._date("start"))r=+e._date("end")+(C-1);r=e._endTime?r-e._date("end"):x(new Date(r));i=e._startTime?i-e._date("start"):x(new Date(i));a=x(a);t=x(t);if(t===i&&i===r)return true;var s=i!==a;return l(i,t,a,s)||l(r,t,a,s)||l(t,i,r)||l(a,i,r)||e.end.getDate()>e.start.getDate()&&r>t},_isInDateSlot:function(e){var t=this.groups[0];var a=t.firstSlot().start;var i=t.lastSlot().end-1;var r=S.date.toUtcTime(e.start);var s=S.date.toUtcTime(e.end);return(E(r,a,i)||E(s,a,i)||E(a,r,s)||E(i,r,s))&&(!E(s,a,a)||E(s,r,r)||e.isAllDay)},_updateAllDayHeaderHeight:function(e){if(this._height!==e){this._height=e;var t=this.element.find(".k-scheduler-header-all-day td");if(t.length){t.parent().add(this.element.find(".k-scheduler-times-all-day").parent()).height(e);for(var a=0;a<this.groups.length;a++)this.groups[a].refresh()}}},_renderEvents:function(u,h){var c=this.datesHeader.find(".k-scheduler-header-wrap > div");var f=this._isGroupedByDate();var e;var t;var v;for(t=0,v=u.length;t<v;t++){e=u[t];if(this._isInDateSlot(e)){var a,p,i,r,s,n,o,l;if(this.options.enforceAllDaySlot)a=e.isAllDay||e.duration()>=C;else a=e.isAllDay;p=a&&!this._isVerticallyGrouped()?c:this.content;if(!a){if(this._isInTimeSlot(e)){l=this.groups[h];if(!l)continue;if(!l._continuousEvents)l._continuousEvents=[];r=l.slotRanges(e);var m=r.length;for(var d=0;d<m;d++){s=r[d];n=e.start;o=e.end;if(m>1)if(d===0)o=s.end.endDate();else if(d==m-1)n=s.start.startDate();else{n=s.start.startDate();o=s.end.endDate()}var g=e.clone({start:n,end:o,_startTime:e._startTime,_endTime:e.endTime});if(this._isInTimeSlot(g)){var _=s.head;i=this._createEventElement(e,!a,_,s.tail);i.appendTo(p);this._inverseEventColor(i);this._positionEvent(g,i,s);A(l,s,i,false)}}}}else if(this.options.allDaySlot){l=this.groups[h];if(!l)continue;if(!l._continuousEvents)l._continuousEvents=[];r=l.slotRanges(e);if(r.length){s=r[0];var y=s.start.index;var D=s.end.index;if(f&&y!==D){n=s.start.start;o=s.end.end;var k=n;var T=n;for(var w=s.start.index;w<=s.end.index;w++){i=this._createEventElement(e,!a,w!==D,w!==y);var b=l.daySlotRanges(k,T,true)[0];k=T+=S.date.MS_PER_DAY;this._positionAllDayEvent(i,b);A(l,b,i,true);i.appendTo(p);this._inverseEventColor(i)}}else{i=this._createEventElement(e,!a);this._positionAllDayEvent(i,r[0]);A(l,r[0],i,true);i.appendTo(p);this._inverseEventColor(i)}}}}}},render:function(e){var a=this;this._headerColumnCount=0;this._cachedEvents=e;this._groups();this.element.find(".k-event").remove();e=new S.data.Query(e).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray();var i=[];this._eventsByResource(e,this.groupedResources,i);var t=T.map(this._dates,function(t){return Math.max.apply(null,T.map(i,function(e){return T.grep(e,function(e){if(a.options.enforceAllDaySlot)return e.isMultiDay()&&E(t,b(e.start),b(e.end));else return e.isAllDay&&E(t,b(e.start),b(e.end))}).length}))});var r=Math.max.apply(null,t);this._updateAllDayHeaderHeight((r+1)*this._allDayHeaderHeight);for(var s=0;s<i.length;s++)this._renderEvents(i[s],s);this.refreshLayout();this._currentTime(false);this.trigger("activate")},_eventsByResource:function(e,t,a,i){var r=t[0];if(r){var s=r.dataSource.view();s=s.filter(function(e){var t=S.getter(r.dataParentValueField)(e);return t===null||t===d||t===i});for(var n=0;n<s.length;n++){var o=this._resourceValue(r,s[n]);var l=new S.data.Query(e).filter({field:r.field,operator:y.groupEqFilter(o)}).toArray();if(t.length>1)this._eventsByResource(l,t.slice(1),a,o);else a.push(l)}}else a.push(e)},_columnOffsetForResource:function(e){return this._columnCountForLevel(e)/this._columnCountForLevel(e-1)},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e,t){t=t||this.rowLevels;var a=t[e];return a?a.length:0},clearSelection:function(){this.content.add(this.datesHeader).find(".k-selected").removeAttr("id").removeClass("k-selected")},_updateDirection:function(e,t,a,i,r){var s=e.isAllDay;var n=t[0].start;var o=t[t.length-1].end;if(a)if(r){if(!s&&n.index===o.index&&n.collectionIndex===o.collectionIndex)e.backward=i}else if(s&&n.index===o.index||!s&&n.collectionIndex===o.collectionIndex)e.backward=i},_changeViewPeriod:function(e,t,u){if(!u){var a=t?this.previousDate():this.nextDate();var h=e.start;var i=e.end;var c=this._isGroupedByDate()&&this._isVerticallyGrouped();var r=this.groups[e.groupIndex];var s=t?r._timeSlotCollections:r._getCollections(r.daySlotCollectionCount());var n=s[s.length-1]._slots;var f=!t&&!r.daySlotCollectionCount()?0:n.length-1;var o;var l,d;l=new Date(a);d=new Date(a);if(this._isInRange(l,d))return false;e.start=l;e.end=d;if(c){var v=new Date(n[f].startDate());var p=new Date(n[f].endDate());o=x(p)?x(p):C;D(e.start,x(v));D(e.end,o);if(r.daySlotCollectionCount())e.isAllDay=!e.isAllDay}else{o=e.isAllDay||!x(i)?C:x(i);D(e.start,x(h));D(e.end,o)}if(!this._isVerticallyGrouped())e.groupIndex=t?this.groups.length-1:0;e.events=[];return true}}});return w(true,t,{MultiDayView:h,DayView:h.extend({options:{name:"DayView",title:"Day",selectedMobileDateFormat:"{0:MMM d}"},name:"day"}),WeekView:h.extend({options:{name:"WeekView",title:"Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}"},name:"week",calculateDateRange:function(){var e=this.options.date,t=S.date.dayOfWeek(e,this.calendarInfo().firstDay,-1),a,i,r=[];for(a=0,i=7;a<i;a++){r.push(t);t=S.date.nextDay(t)}this._render(r)}}),WorkWeekView:h.extend({options:{name:"WorkWeekView",title:"Work Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}"},name:"workWeek",nextDate:function(){var e=S.date.dayOfWeek(S.date.nextDay(this.startDate()),this.calendarInfo().firstDay,1);return S.date.addDays(e,this._workDays[0])},previousDate:function(){var e=S.date.dayOfWeek(this.startDate(),this.calendarInfo().firstDay,-1);var t=this._workDays;return S.date.addDays(e,t[t.length-1]-7)},calculateDateRange:function(){var e=this.options,t=e.date,a=S.date.dayOfWeek,i=a(t,this.calendarInfo().firstDay,-1),r=a(i,e.workWeekStart,1),s=a(r,e.workWeekEnd,1),n=[],o=e.workDays&&e.workDays.length?e.workDays.map(function(e){return a(i,e,1).getTime()}):null;if(o){r=i;s=a(r,this.calendarInfo().firstDay+6,1)}while(r<=s){if(o&&o.indexOf(r.getTime())>-1)n.push(r);else if(!o)n.push(r);r=S.date.nextDay(r)}this._render(n)}})}),window.kendo})}("function"==typeof define&&define.amd?define:function(e,t,a){(a||t)()});
//# sourceMappingURL=kendo.scheduler.dayview.min.js.map
