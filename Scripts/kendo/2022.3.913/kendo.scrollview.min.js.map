{"version":3,"file":"kendo.scrollview.min.js","sources":["kendo.scrollview.js"],"sourcesContent":["(function(f, define) {\n    define('kendo.scrollview',[ \"kendo.fx\", \"kendo.data\", \"kendo.draganddrop\" ], f);\n})(function() {\n\nvar __meta__ = {\n    id: \"scrollview\",\n    name: \"ScrollView\",\n    category: \"web\",\n    description: \"The Kendo ScrollView widget is used to scroll content wider than the device screen.\",\n    depends: [ \"fx\", \"data\", \"draganddrop\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        Transition = kendo.effects.Transition,\n        Pane = kendo.ui.Pane,\n        keys = kendo.keys,\n        PaneDimensions = kendo.ui.PaneDimensions,\n        Widget = ui.DataBoundWidget,\n        DataSource = kendo.data.DataSource,\n\n        // Math\n        math = Math,\n        abs = math.abs,\n        ceil = math.ceil,\n        round = math.round,\n        max = math.max,\n        min = math.min,\n        floor = math.floor,\n\n        CHANGE = \"change\",\n        CLICK = \"click\",\n        CHANGING = \"changing\",\n        REFRESH = \"refresh\",\n        CURRENT_PAGE_CLASS = \"primary\",\n        VIRTUAL_PAGE_CLASS = \"scrollview-page\",\n        FUNCTION = \"function\",\n        ITEM_CHANGE = \"itemChange\",\n        CLEANUP = \"cleanup\",\n        NS = \".ScrollView\",\n        DOT = \".\",\n        KEYDOWN = \"keydown\",\n        FOCUS = \"focus\",\n        FOCUSOUT = \"focusout\",\n        FOCUSED = \"k-focus\",\n        TABINDEX = \"tabindex\",\n\n        VIRTUAL_PAGE_COUNT = 3,\n        LEFT_PAGE = -1,\n        CETER_PAGE = 0,\n        RIGHT_PAGE = 1,\n\n        LEFT_SWIPE = -1,\n        NUDGE = 0,\n        RIGHT_SWIPE = 1;\n\n    function className(name) {\n        return \"k-\" + name;\n    }\n\n    var ScrollViewDataReader = kendo.Observable.extend({\n        init: function(dataSource) {\n            var that = this;\n            this.dataSource = dataSource;\n            this.pendingRequestArray = [];\n            this.initialFetch = false;\n            this.useRanges = dataSource.options.serverPaging;\n\n            kendo.Observable.fn.init.call(this);\n\n            dataSource.bind(\"change\", function() {\n                that._change();\n            });\n        },\n\n        _change: function() {\n            this.trigger(\"reset\", { offset: this.offset });\n        },\n\n        page: function(page, callback) {\n            var that = this;\n\n            if (!this.useRanges) {\n                this.dataSource.page(page + 1);\n                if (callback) {\n                    callback(that.dataSource.view());\n                } else {\n                    that.trigger(\"page\", { page: page });\n                }\n             }\n             if (this.useRanges) {\n                this.dataSource.range(page * this.dataSource.pageSize(), this.dataSource.pageSize(), function() {\n                    if (callback) {\n                        callback(that.dataSource.view());\n                    } else {\n                        that.trigger(\"page\", { page: page });\n                    }\n                });\n            }\n        },\n\n        scrollTo: function(page) {\n            var pageCount = Math.ceil(this.dataSource.total() / this.dataSource.pageSize() || 1);\n            var prevPage = page - 1;\n            var prevPrefetch = prevPage - 1;\n            var currentPage = page;\n            var nextPage = pageCount > 0 && page + 1 >= pageCount ? - 1 : page + 1;\n            var nextPrefetch = pageCount > 0 && nextPage + 1 >= pageCount ? - 1 : nextPage + 1;\n\n            if (nextPage >= 0) {\n                this.pendingRequestArray.push(nextPage);\n            }\n\n            if (prevPage >= 0) {\n                this.pendingRequestArray.push(prevPage);\n            }\n\n            if (prevPrefetch >= 0) {\n                this.pendingRequestArray.push(prevPrefetch);\n            }\n\n            if (nextPrefetch >= 0) {\n                this.pendingRequestArray.push(nextPrefetch);\n            }\n\n            this.page(currentPage);\n        },\n\n        getViewData: function() {\n            var view = this.dataSource.view();\n            var data;\n            if (this.dataSource.options.pageSize > 1) {\n                data = [];\n                for (var index = 0; index < view.length; index++) {\n                    data.push(view[index]);\n                }\n            }\n            else {\n                data = view[0];\n            }\n            return data;\n        },\n        destroy: function() {\n            var that = this;\n\n            that.dataSource.unbind();\n            that.dataSource = null;\n        }\n    });\n\n    kendo.ui.ScrollViewDataReader = ScrollViewDataReader;\n\n    var Pager = kendo.Class.extend({\n        init: function(scrollView) {\n            var that = this,\n                element = $(\"<ul class='\" + className(\"scrollview-nav\") + \"'/>\"),\n                navigationWrapElement = $(\"<div class='\" + className(\"scrollview-nav-wrap\") + \"'></div>\");\n\n            navigationWrapElement.append(element);\n            scrollView._navigationContainer.append(navigationWrapElement);\n\n            this._changeProxy = that._change.bind(that);\n            this._refreshProxy = that._refresh.bind(that);\n            scrollView.bind(CHANGE, this._changeProxy);\n            scrollView.bind(REFRESH, this._refreshProxy);\n            element.on(CLICK + NS, \"li.k-link\", this._click.bind(scrollView));\n\n            $.extend(that, { element: element, scrollView: scrollView });\n\n            that._navigatable();\n        },\n\n        items: function() {\n            return this.element.children();\n        },\n\n        _focus: function() {\n            var that = this;\n            that._focused = true;\n            that._setCurrent(that.element.find(DOT + className(CURRENT_PAGE_CLASS)));\n        },\n\n        _blur: function() {\n            var that = this;\n\n            that._focused = false;\n\n            if (that._current) {\n                that._current.removeClass(FOCUSED);\n                that._current.removeAttr(\"id\");\n                that.element.removeAttr(\"aria-activedescendant\");\n            }\n        },\n\n        _keyDown: function(e) {\n            var that = this;\n            var handled;\n            var next;\n            var current = that._current;\n\n            var key = e.keyCode;\n\n            if (key == keys.LEFT) {\n                handled = true;\n                next = current.prev(\"li.k-link\");\n\n                if (next.length) {\n                    that._setCurrent(next);\n                }\n            }\n\n            if (key == keys.RIGHT) {\n                handled = true;\n                next = current.next(\"li.k-link\");\n\n                if (next.length) {\n                    that._setCurrent(next);\n                }\n            }\n\n            if (e.keyCode == keys.SPACEBAR || e.keyCode == keys.ENTER) {\n                handled = true;\n                that._current.trigger(\"click\");\n            }\n\n            if (handled) {\n                e.preventDefault();\n                // prevent changing of items in scrollview\n                e.stopPropagation();\n            }\n        },\n\n        _setCurrent: function(current) {\n            if (!this._focused) {\n                return;\n            }\n            var that = this;\n            var id = kendo.guid();\n            var next = $(current);\n\n            if (that._current) {\n                $(that._current)\n                    .removeClass(FOCUSED)\n                    .removeAttr(\"id\");\n\n                that.element.removeAttr(\"aria-activedescendant\");\n            }\n\n            next\n                .attr(\"id\", id)\n                .addClass(FOCUSED);\n\n            that.element.attr(\"aria-activedescendant\", id);\n\n            that._current = next;\n        },\n\n        _navigatable: function() {\n            var that = this;\n            var pageable = that.scrollView.options.pageable || {};\n\n            if (!that.scrollView.options.navigatable) {\n                return;\n            }\n\n            that.element\n                .attr(TABINDEX, 0)\n                .attr(\"aria-label\", that.scrollView.options.messages.pagerLabel)\n                .attr(\"role\", \"listbox\");\n\n            that._ariaTemplate = kendo.template(pageable.ARIATemplate || \"Item #=data.index#\");\n\n            that.element.on(KEYDOWN + NS, that, that._keyDown.bind(that));\n            that.element.on(FOCUS + NS, that._focus.bind(that));\n            that.element.on(FOCUSOUT + NS, that._blur.bind(that));\n        },\n\n        _refresh: function(e) {\n            var pageHTML = \"\";\n            var navigatable = this.scrollView.options.navigatable;\n            var current;\n\n            for (var idx = 0; idx < e.pageCount; idx ++) {\n                if (navigatable) {\n                    pageHTML += '<li class=\"k-link\" role=\"option\" aria-label=\"' + this._ariaTemplate({ index: idx }) + '\" aria-selected=\"false\"></li>';\n                } else {\n                    pageHTML += '<li class=\"k-link\"></li>';\n                }\n            }\n\n            this.element.html(pageHTML);\n            current = this.items().eq(e.page);\n            current.addClass(className(CURRENT_PAGE_CLASS));\n\n            if (navigatable) {\n                current.attr(\"aria-selected\", true);\n            }\n\n            this.scrollView._toggleNavigation({ currentPage: e.page });\n        },\n\n        _change: function(e) {\n            if (e.isDefaultPrevented()) {\n                return;\n            }\n\n            var innerNavigationContainer = this.scrollView._navigationContainer.find(\".k-scrollview-nav\");\n            var scrollViewWidth = this.scrollView.element.width();\n            var containerOffset = (scrollViewWidth - innerNavigationContainer.width()) / 2;\n            var pageWidth = innerNavigationContainer.find(\"li.k-link\").eq(0).outerWidth(true) / 2;\n            var items = this.items();\n            var navigatable = this.scrollView.options.navigatable;\n            var current;\n\n            items.removeClass(className(CURRENT_PAGE_CLASS));\n\n            current = items.eq(e.nextPage).addClass(className(CURRENT_PAGE_CLASS));\n            if (navigatable) {\n                items.attr(\"aria-selected\", false);\n                this._setCurrent(current);\n                current.attr(\"aria-selected\", true);\n            }\n\n            var itemOffset = this.items().eq(e.nextPage).length > 0 ? this.items().eq(e.nextPage).position().left : 0;\n\n            if (itemOffset > scrollViewWidth / 2 || itemOffset < kendo.scrollLeft(innerNavigationContainer) + scrollViewWidth / 2) {\n\n                var translate = 0;\n                if (itemOffset > scrollViewWidth / 2) {\n                    translate = kendo.scrollLeft(innerNavigationContainer) + itemOffset - scrollViewWidth / 2;\n                }\n                else {\n                    translate = kendo.scrollLeft(innerNavigationContainer) - (scrollViewWidth / 2 - itemOffset);\n                }\n\n                translate += (containerOffset + pageWidth);\n\n                innerNavigationContainer.animate({ \"scrollLeft\": translate }, 300);\n            }\n\n            this.scrollView._toggleNavigation({ currentPage: e.currentPage, nextPage: e.nextPage });\n        },\n\n        _click: function(e) {\n            var newPage = $(e.currentTarget).index();\n\n            this.scrollTo(newPage);\n        },\n\n        destroy: function() {\n            this.scrollView.unbind(CHANGE, this._changeProxy);\n            this.scrollView.unbind(REFRESH, this._refreshProxy);\n            this.element.off(NS);\n            this.element.remove();\n        }\n    });\n\n    kendo.ui.ScrollViewPager = Pager;\n\n    var TRANSITION_END = \"transitionEnd\",\n        DRAG_START = \"dragStart\",\n        DRAG_END = \"dragEnd\";\n\n    var ElasticPane = kendo.Observable.extend({\n        init: function(element, options) {\n            var that = this;\n\n            kendo.Observable.fn.init.call(this);\n\n            this.element = element;\n            this.container = element.parent();\n\n            var movable,\n                transition,\n                userEvents,\n                dimensions,\n                dimension,\n                pane;\n\n            movable = new kendo.ui.Movable(that.element);\n\n            transition = new Transition({\n                axis: \"x\",\n                movable: movable,\n                onEnd: function() {\n                    that.trigger(TRANSITION_END);\n                }\n            });\n\n            userEvents = new kendo.UserEvents(element, {\n                fastTap: true,\n                start: function(e) {\n                    if (abs(e.x.velocity) * 2 >= abs(e.y.velocity)) {\n                        userEvents.capture();\n                    } else {\n                        userEvents.cancel();\n                    }\n\n                    that.trigger(DRAG_START, e);\n                    transition.cancel();\n                },\n                allowSelection: true,\n                end: function(e) {\n                    that.trigger(DRAG_END, e);\n                }\n            });\n\n            dimensions = new PaneDimensions({\n                element: that.element,\n                container: that.container\n            });\n\n            dimension = dimensions.x;\n\n            dimension.bind(CHANGE, function() {\n                that.trigger(CHANGE);\n            });\n\n            pane = new Pane({\n                dimensions: dimensions,\n                userEvents: userEvents,\n                movable: movable,\n                elastic: true\n            });\n\n            $.extend(that, {\n                duration: options && options.duration || 1,\n                movable: movable,\n                transition: transition,\n                userEvents: userEvents,\n                dimensions: dimensions,\n                dimension: dimension,\n                pane: pane\n            });\n\n            this.bind([TRANSITION_END, DRAG_START, DRAG_END, CHANGE], options);\n        },\n\n        size: function() {\n            return { width: this.dimensions.x.getSize(), height: this.dimensions.y.getSize() };\n        },\n\n        total: function() {\n            return this.dimension.getTotal();\n        },\n\n        offset: function() {\n            return -this.movable.x;\n        },\n\n        updateDimension: function() {\n            this.dimension.update(true);\n        },\n\n        refresh: function() {\n            this.dimensions.refresh();\n            this.dimensions.y.enabled = false;\n        },\n\n        moveTo: function(offset) {\n            this.movable.moveAxis(\"x\", -offset);\n        },\n\n        transitionTo: function(offset, ease, instant) {\n            if (instant) {\n                this.moveTo(-offset);\n            } else {\n                this.transition.moveTo({ location: offset, duration: this.duration, ease: ease });\n            }\n        },\n        destroy: function() {\n            var that = this;\n\n            that.userEvents.destroy();\n            that.unbind();\n            that.movable = that.tansition = that.dimensions = that.dimension = that.pane = null;\n            that.element.remove();\n        }\n    });\n\n    kendo.ui.ScrollViewElasticPane = ElasticPane;\n\n    var ScrollViewContent = kendo.Observable.extend({\n        init: function(element, pane, options) {\n            var that = this;\n\n            kendo.Observable.fn.init.call(this);\n            that.element = element;\n            that.pane = pane;\n            that._getPages();\n            this.page = 0;\n            this.pageSize = options.pageSize || 1;\n            this.contentHeight = options.contentHeight;\n            this.enablePager = options.enablePager;\n            this.pagerOverlay = options.pagerOverlay;\n        },\n\n        scrollTo: function(page, instant) {\n            var that = this;\n\n            if (page == that.page && !instant) {\n                return;\n            }\n\n            if (!that.trigger(\"resize\", { currentPage: this.page, nextPage: page, data: undefined })) {\n                that.page = page;\n                that.pane.transitionTo(- page * that.pane.size().width, Transition.easeOutExpo, instant);\n            }\n        },\n\n        paneMoved: function(swipeType, bounce, callback, /*internal*/ instant) {\n            var that = this,\n                pane = that.pane,\n                width = pane.size().width * that.pageSize,\n                approx = round,\n                ease = bounce ? Transition.easeOutBack : Transition.easeOutExpo,\n                snap,\n                nextPage;\n\n            if (swipeType === LEFT_SWIPE) {\n                approx = ceil;\n            } else if (swipeType === RIGHT_SWIPE) {\n                approx = floor;\n            }\n\n            nextPage = approx(pane.offset() / width);\n\n            if (nextPage < 0 || nextPage >= that.pageCount) {\n                var tansition = nextPage < 0 ? 0 : (- this.page * this.pane.size().width);\n                return this.pane.transitionTo(tansition, ease, instant);\n            }\n\n            snap = max(that.minSnap, min(-nextPage * width, that.maxSnap));\n\n            if (nextPage != that.page) {\n                if (callback && callback({ currentPage: that.page, nextPage: nextPage })) {\n                    snap = -that.page * pane.size().width;\n                }\n            }\n\n            pane.transitionTo(snap, ease, instant);\n        },\n\n        updatePage: function() {\n            var pane = this.pane,\n                page = round(pane.offset() / pane.size().width);\n\n            if (page != this.page) {\n                this.page = page;\n                return true;\n            }\n\n            return false;\n        },\n\n        forcePageUpdate: function() {\n            return this.updatePage();\n        },\n\n        resizeTo: function(size) {\n            var pane = this.pane,\n                width = size.width;\n\n            this.pageElements.width(width);\n\n            if (this.contentHeight === \"100%\") {\n                var containerHeight = this.element.parent().height();\n\n                if (this.enablePager === true) {\n                    var pager = this.element.parent().find(\"ul.k-scrollview-nav\");\n                    if (!this.pagerOverlay && pager.length) {\n                        containerHeight -= kendo._outerHeight(pager, true);\n                    }\n                }\n\n                this.element.css(\"height\", containerHeight);\n                this.pageElements.css(\"height\", containerHeight);\n            }\n\n            // re-read pane dimension after the pageElements have been resized.\n            pane.updateDimension();\n\n            if (!this._paged) {\n                this.page = floor(pane.offset() / width);\n            }\n\n            this.scrollTo(this.page, true, true);\n\n            this.pageCount = floor(pane.total() / width);\n            this.minSnap = - (this.pageCount - 1) * width;\n            this.maxSnap = 0;\n        },\n\n        _getPages: function() {\n            this.pageElements = this.element.find(kendo.roleSelector(\"page\"));\n            this._paged = this.pageElements.length > 0;\n        },\n\n        destroy: function() {\n            var that = this;\n\n            that.pane = null;\n            that.element.remove();\n        }\n    });\n\n    kendo.ui.ScrollViewContent = ScrollViewContent;\n\n    var VirtualScrollViewContent = kendo.Observable.extend({\n        init: function(element, pane, options) {\n            var that = this;\n\n            kendo.Observable.fn.init.call(this);\n\n            that.element = element;\n            that.pane = pane;\n            that.options = options;\n            that._templates();\n            that.page = options.page || 0;\n            that.pages = [];\n            that._initPages();\n            that.resizeTo(that.pane.size());\n\n            that.pane.dimension.forceEnabled();\n        },\n\n        setDataSource: function(dataSource) {\n            this.dataSource = DataSource.create(dataSource);\n            this._dataReader();\n            this._pendingPageRefresh = false;\n            this._pendingWidgetRefresh = false;\n        },\n\n        _viewShow: function() {\n            var that = this;\n            if (that._pendingWidgetRefresh) {\n                setTimeout(function() {\n                    that._resetPages();\n                }, 0);\n                that._pendingWidgetRefresh = false;\n            }\n        },\n\n        _dataReader: function() {\n            this.dataReader = new ScrollViewDataReader(this.dataSource);\n\n            this._pageProxy = this._onPage.bind(this);\n            this._resetProxy = this._onReset.bind(this);\n\n            this.dataReader.bind({\n                \"page\": this._pageProxy,\n                \"reset\": this._resetProxy\n            });\n        },\n\n        _templates: function() {\n            var template = this.options.template,\n                emptyTemplate = this.options.emptyTemplate,\n                templateProxy = {},\n                emptyTemplateProxy = {};\n\n            if (typeof template === FUNCTION) {\n                templateProxy.template = template;\n                template = \"#=this.template(data)#\";\n            }\n\n            this.template = kendo.template(template).bind(templateProxy);\n\n            if (typeof emptyTemplate === FUNCTION) {\n                emptyTemplateProxy.emptyTemplate = emptyTemplate;\n                emptyTemplate = \"#=this.emptyTemplate(data)#\";\n            }\n\n            this.emptyTemplate = kendo.template(emptyTemplate).bind(emptyTemplateProxy);\n        },\n\n        _initPages: function() {\n            var pages = this.pages,\n                element = this.element,\n                page;\n\n            for (var i = 0; i < VIRTUAL_PAGE_COUNT; i++) {\n                page = new Page(element);\n                pages.push(page);\n            }\n\n            this.pane.updateDimension();\n        },\n\n        resizeTo: function(size) {\n            var pages = this.pages,\n                pane = this.pane;\n\n            for (var i = 0; i < pages.length; i++) {\n                pages[i].setWidth(size.width);\n            }\n\n            if (this.options.contentHeight === \"auto\") {\n                this.element.css(\"height\", this.pages[1].element.height());\n            }\n\n            else if (this.options.contentHeight === \"100%\") {\n                var containerHeight = this.element.parent().height();\n\n                if (this.options.enablePager === true) {\n                    var pager = this.element.parent().find(\"ul.k-scrollview-nav\");\n                    if (!this.options.pagerOverlay && pager.length) {\n                        containerHeight -= kendo._outerHeight(pager, true);\n                    }\n                }\n\n                this.element.css(\"height\", containerHeight);\n                pages[0].element.css(\"height\", containerHeight);\n                pages[1].element.css(\"height\", containerHeight);\n                pages[2].element.css(\"height\", containerHeight);\n            }\n            else if (this.options.contentHeight) {\n                pages[0].element.css(\"height\", this.options.contentHeight);\n                pages[1].element.css(\"height\", this.options.contentHeight);\n                pages[2].element.css(\"height\", this.options.contentHeight);\n            }\n\n            pane.updateDimension();\n\n            this._repositionPages();\n\n            this.width = size.width;\n        },\n\n        scrollTo: function(page, instant, silent) {\n            var that = this;\n            var dataReader = that.dataReader;\n\n            if (page == that.page && !instant) {\n                return;\n            }\n\n            dataReader.page(page, function(data) {\n                if (silent) {\n                    dataReader.scrollTo(page);\n                    return;\n                }\n                if (!that.trigger(\"resize\", { currentPage: that.page, nextPage: page, data: data })) {\n                    if (!instant) {\n                        dataReader.pagerScroll = page > that.page ? - 1 : 1;\n                        that.page = page + dataReader.pagerScroll;\n                    } else {\n                        that.page = page;\n                    }\n                    dataReader.scrollTo(page);\n                }\n            });\n        },\n        paneMoved: function(swipeType, bounce, callback, /*internal*/ instant) {\n            var that = this,\n                pane = that.pane,\n                width = pane.size().width,\n                offset = pane.offset(),\n                thresholdPassed = Math.abs(offset) >= width / 3,\n                ease = bounce ? kendo.effects.Transition.easeOutBack : kendo.effects.Transition. easeOutExpo,\n                isEndReached = that.page + 2 > that.pageCount,\n                nextPage,\n                delta = 0,\n                data,\n                element;\n\n            if (swipeType === RIGHT_SWIPE) {\n                if (that.page !== 0) {\n                    delta = -1; //backward\n                }\n            } else if (swipeType === LEFT_SWIPE && !isEndReached) {\n                delta = 1; //forward\n            } else if (offset > 0 && (thresholdPassed && !isEndReached)) {\n                delta = 1; //forward\n            } else if (offset < 0 && thresholdPassed) {\n                if (that.page !== 0) {\n                    delta = -1; //backward\n                }\n            }\n\n            nextPage = that.page;\n            if (delta) {\n                nextPage = (delta > 0) ? nextPage + 1 : nextPage - 1;\n\n                if (that instanceof kendo.ui.VirtualScrollViewContent) {\n                    that.dataReader.page(nextPage);\n                    data = that.dataReader.getViewData();\n                }\n                else {\n                    data = undefined;\n                }\n\n                if (!(data instanceof Array)) {\n                    data = [data];\n                }\n                element = that.pages ? that.pages[1].element : undefined;\n\n            }\n\n            if (callback && that.page != nextPage && callback({ currentPage: that.page, nextPage: nextPage, element: element, data: data })) {\n                delta = 0;\n            }\n\n            if (delta === 0) {\n                that._cancelMove(ease, instant);\n            } else if (delta === -1) {\n                that._moveBackward(instant);\n            } else if (delta === 1) {\n                that._moveForward(instant);\n            }\n        },\n\n        updatePage: function() {\n            var pages = this.pages;\n\n            if (this.pane.offset() === 0) {\n                return false;\n            }\n\n            if (this.pane.offset() > 0) {\n                pages.push(this.pages.shift());//forward\n                this.page++;\n                if (this.page + 2 < this.pageCount) {\n                    this.dataReader.pendingRequestArray.push(this.page + 2);\n                }\n                if (this.page + 1 < this.pageCount) {\n                    this.dataReader.page(this.page + 1);\n                }\n\n                if (this.page + 1 == this.pageCount) {\n                    this.setPageContent(this.pages[2], null);\n                }\n\n            } else {\n                pages.unshift(this.pages.pop()); //back\n                this.page--;\n                if (this.page - 2 >= 0) {\n                    this.dataReader.pendingRequestArray.push(this.page - 2);\n                }\n                if (this.page - 1 >= 0) {\n                    this.dataReader.page(this.page - 1);\n                }\n            }\n\n            this._repositionPages();\n\n            this._resetMovable();\n\n            return true;\n        },\n\n        forcePageUpdate: function() {\n            var offset = this.pane.offset(),\n                threshold = this.pane.size().width * 3 / 4;\n\n            if (abs(offset) > threshold) {\n                return this.updatePage();\n            }\n\n            return false;\n        },\n\n        _resetMovable: function() {\n            this.pane.moveTo(0);\n        },\n\n        _moveForward: function(instant) {\n            this.pane.transitionTo(-this.width, kendo.effects.Transition.easeOutExpo, instant);\n        },\n\n        _moveBackward: function(instant) {\n            this.pane.transitionTo(this.width, kendo.effects.Transition.easeOutExpo, instant);\n        },\n\n        _cancelMove: function(ease, /*internal*/ instant) {\n            this.pane.transitionTo(0, ease, instant);\n        },\n\n        _resetPages: function() {\n            this.page = this.options.page || 0;\n            this._repositionPages();\n\n            this.trigger(\"reset\");\n        },\n\n        _onPage: function(e) {\n            if (e.page >= this.pageCount) {\n                this.setPageContent(this.pages[2], null);\n            }\n            if (this.page == e.page) {\n                if (!this.dataReader.pagerScroll || this.dataReader.pagerScroll === 0 && this.dataReader.initialFetch) {\n                    this.setPageContent(this.pages[1], this.dataReader.getViewData());\n                }\n                else {\n                    if (this.dataReader.pagerScroll < 0) {\n                        this._moveForward();\n                    }\n                    else {\n                        this._moveBackward();\n                    }\n\n                    this.dataReader.pagerScroll = 0;\n                    this.setPageContent(this.pages[1], this.dataReader.getViewData());\n                }\n            }\n            else if (this.page + 1 == e.page) {\n                this.setPageContent(this.pages[2], this.dataReader.getViewData());\n            }\n            else if (this.page - 1 == e.page) {\n                this.setPageContent(this.pages[0], this.dataReader.getViewData());\n            }\n\n            if (this.dataReader.pendingRequestArray.length > 0 && this.dataReader.initialFetch) {\n                var item = this.dataReader.pendingRequestArray.shift();\n                this.dataReader.page(item);\n            }\n        },\n\n        _onReset: function() {\n            this.pageCount = ceil(this.dataSource.total() / this.dataSource.pageSize());\n        },\n\n        _repositionPages: function() {\n            var pages = this.pages;\n\n            pages[0].position(LEFT_PAGE);\n            pages[1].position(CETER_PAGE);\n            pages[2].position(RIGHT_PAGE);\n        },\n\n        setPageContent: function(page, data) {\n            var template = this.template,\n                emptyTemplate = this.emptyTemplate;\n\n            if (data !== null && data !== undefined) {\n                page.content(template(data));\n            } else {\n                page.content(emptyTemplate({}));\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n            var pages = that.pages;\n\n            that.dataReader.unbind();\n            that.dataSource.unbind();\n            that.dataReader = that.dataSource = that.pane = null;\n\n            for (var index = 0; index < pages.length; index++) {\n                pages[index].destroy();\n            }\n\n            that.element.remove();\n        }\n    });\n\n    kendo.ui.VirtualScrollViewContent = VirtualScrollViewContent;\n\n    var Page = kendo.Class.extend({\n        init: function(container) {\n            this.element = $(\"<li class='\" + className(VIRTUAL_PAGE_CLASS) + \"'></li>\");\n            this.width = container.width();\n            this.element.width(this.width);\n            container.append(this.element);\n        },\n\n        content: function(theContent) {\n            this.element.html(theContent);\n        },\n\n        position: function(position) { //position can be -1, 0, 1\n            this.element.css(\"transform\", \"translate3d(\" + this.width * position + \"px, 0, 0)\");\n        },\n\n        setWidth: function(width) {\n            this.width = width;\n            this.element.width(width);\n        },\n\n        destroy: function() {\n            var that = this;\n\n            that.element.remove();\n            that.element = null;\n        }\n    });\n\n    kendo.ui.VirtualPage = Page;\n\n    var ScrollView = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            options = that.options;\n            element = that.element;\n\n            kendo.stripWhitespace(element[0]);\n\n            if (element.children().length === 0) {\n                element\n                .wrapInner(\"<ul class='k-scrollview-wrap'/>\");\n            } else {\n                element\n                .wrapInner(\"<div class='k-scrollview-wrap'/>\");\n            }\n\n            that.itemsWrapper = element.find(\".k-scrollview-wrap\");\n\n            element.addClass(\"k-widget \" + className(\"scrollview\"));\n\n            that._initNavigation();\n\n            if (this.options.pageable || this.options.enablePager) {\n                this.pager = new Pager(this);\n\n                if (this.options.pagerOverlay) {\n                    element.addClass(className(\"scrollview-overlay\"));\n                }\n            } else {\n                this._changeProxy = that._toggleNavigation.bind(that);\n                this.bind(CHANGE, this._changeProxy);\n            }\n\n            that.inner = element.children().first();\n            that.page = 0;\n\n            that.inner.css(\"height\", options.contentHeight);\n\n            that.pane = new ElasticPane(that.inner, {\n                duration: this.options.duration,\n                transitionEnd: this._transitionEnd.bind(this),\n                dragStart: this._dragStart.bind(this),\n                dragEnd: this._dragEnd.bind(this),\n                change: this[REFRESH].bind(this)\n            });\n\n            that.bind(\"resize\", function() {\n                that.pane.refresh();\n            });\n\n            that.page = options.page;\n\n            var empty = this.inner.children().length === 0;\n\n            var content = empty ? new VirtualScrollViewContent(that.inner, that.pane, options) : new ScrollViewContent(that.inner, that.pane, options);\n\n            content.page = that.page;\n\n            content.bind(\"reset\", function() {\n                this._pendingPageRefresh = false;\n                that.trigger(REFRESH, { pageCount: content.pageCount, page: content.page });\n                that._toggleNavigation({ currentPage: content.page, nextPage: content.page });\n            });\n\n            content.bind(\"resize\", function(e) {\n                var currentPage = content.page;\n                var nextPage = e.nextPage;\n\n                if (currentPage != nextPage) {\n                    e._defaultPrevented = that.trigger(CHANGE, { currentPage: content.page, nextPage: e.nextPage, data: e.data });\n                }\n                that._toggleNavigation({ currentPage: content.page, nextPage: e.nextPage });\n            });\n\n            content.bind(ITEM_CHANGE, function(e) {\n                that.trigger(ITEM_CHANGE, e);\n\n                that.angular(\"compile\", function() {\n                    return { elements: e.item, data: [ { dataItem: e.data } ] };\n                });\n            });\n\n            content.bind(CLEANUP, function(e) {\n                that.angular(\"cleanup\", function() {\n                    return { elements: e.item };\n                });\n            });\n\n            that._content = content;\n            that.setDataSource(options.dataSource);\n            that.viewInit();\n            that.viewShow();\n\n            that._navigatable();\n\n        },\n\n        options: {\n            name: \"ScrollView\",\n            ARIATemplate: \"Item #=data.index# of #=data.total#\",\n            page: 0,\n            duration: 400,\n            velocityThreshold: 0.8,\n            contentHeight: \"auto\",\n            pageSize: 1,\n            bounceVelocityThreshold: 1.6,\n            enablePager: true,\n            enableNavigationButtons: true,\n            pagerOverlay: true,\n            navigatable: false,\n            autoBind: true,\n            pageable: false,\n            template: \"\",\n            emptyTemplate: \"\",\n            messages: {\n                previousButtonLabel: \"Previous\",\n                nextButtonLabel: \"Next\",\n                pagerLabel: \"ScrollView pager\"\n            }\n        },\n\n        events: [\n            CHANGING,\n            CHANGE,\n            REFRESH\n        ],\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n            this._content.destroy();\n            this.pane.destroy();\n\n            if (this.pager) {\n                this.pager.destroy();\n            }\n\n            this._navigationContainer.off(NS);\n            this._navigationContainer = null;\n            this.itemsWrapper.off(NS);\n            this.itemsWrapper = null;\n\n            if (this.options.navigatable) {\n                this.ariaLiveEl = this._current = null;\n            }\n\n            this.inner = null;\n            kendo.destroy(this.element);\n        },\n\n        viewInit: function() {\n            if (this.options.autoBind) {\n                this._content.scrollTo(this._content.page, true, true);\n            }\n        },\n\n        viewShow: function() {\n            this.pane.refresh();\n        },\n\n        refresh: function() {\n            var content = this._content;\n            var options = this.options;\n\n            content.resizeTo(this.pane.size());\n            this.page = content.page;\n\n            if (content instanceof ScrollViewContent || content.dataReader.initialFetch) {\n                if (options.enablePager) {\n                    this.trigger(REFRESH, { pageCount: content.pageCount, page: content.page });\n                }\n                else {\n                    this.trigger(CHANGE, { pageCount: content.pageCount, currentPage: content.page });\n                }\n            }\n        },\n\n        content: function(html) {\n           this.element.children().first().html(html);\n           this._content._getPages();\n           this.pane.refresh();\n        },\n\n        scrollTo: function(page, instant, silent) {\n            this._content.scrollTo(page, instant, silent);\n        },\n\n        prev: function() {\n            var that = this,\n                prevPage = that._content.page - 1;\n\n            if (that._content instanceof VirtualScrollViewContent) {\n                that._content.paneMoved(RIGHT_SWIPE, undefined, function(eventData) {\n                    return that.trigger(CHANGE, eventData);\n                });\n            } else if (prevPage > -1) {\n                that.scrollTo(prevPage);\n            }\n        },\n\n        next: function() {\n            var that = this,\n                nextPage = that._content.page + 1;\n\n            if (that._content instanceof VirtualScrollViewContent) {\n                that._content.paneMoved(LEFT_SWIPE, undefined, function(eventData) {\n                    return that.trigger(CHANGE, eventData);\n                });\n            } else if (nextPage < that._content.pageCount) {\n                that.scrollTo(nextPage);\n            }\n        },\n\n        setDataSource: function(dataSource) {\n            var that = this;\n            if (!(this._content instanceof VirtualScrollViewContent)) {\n                return;\n            }\n            // the scrollview should have a ready datasource for MVVM to function properly. But an empty datasource should not empty the element\n            var emptyDataSource = !dataSource;\n            if (dataSource instanceof DataSource) {\n                dataSource.options.pageSize = dataSource.options.pageSize || 1;\n                this.dataSource = dataSource = new DataSource(dataSource.options);\n            }\n            else {\n                this.dataSource = DataSource.create(dataSource);\n            }\n\n            this._content.setDataSource(this.dataSource);\n\n            if (this.options.autoBind && !emptyDataSource) {\n                this.dataSource.fetch(function() {\n                    that._content.dataReader.initialFetch = true;\n                    that.scrollTo(that._content.page, true, true);\n                    that._content.trigger(\"reset\");\n                });\n            }\n        },\n\n        items: function() {\n            return this.element.find(\".k-\" + VIRTUAL_PAGE_CLASS);\n        },\n\n        _updateAria: function() {\n            var content = this._content;\n            if (this.options.navigatable) {\n                this.ariaLiveEl.html(this._ariaTemplate({ index: (content.page + 1), total: content.pageCount }));\n            }\n        },\n\n        _setCurrent: function(current) {\n            if (!this._focused) {\n                return;\n            }\n            var that = this;\n            var page = that._content.page;\n            var id = kendo.guid();\n            var children = that.itemsWrapper.children();\n            var next = $(current || children.eq(page));\n\n            if (that._content.pages) {\n                children.attr(\"aria-hidden\", true);\n                that._content.pages[1].element.removeAttr(\"aria-hidden\");\n                return;\n            }\n\n            if (that._current) {\n                $(that._current)\n                    .removeClass(FOCUSED)\n                    .removeAttr(\"id\");\n\n                children.attr(\"aria-hidden\", true);\n            }\n\n            next\n                .attr(\"id\", id)\n                .removeAttr(\"aria-hidden\")\n                .addClass(FOCUSED);\n\n            that.itemsWrapper.attr(\"aria-activedescendant\", id);\n            that._updateAria();\n\n            that._current = next;\n        },\n\n        _dragStart: function() {\n            this._content.forcePageUpdate();\n        },\n\n        _dragEnd: function(e) {\n            var that = this,\n                velocity = e.x.velocity,\n                velocityThreshold = this.options.velocityThreshold,\n                swipeType = NUDGE,\n                bounce = abs(velocity) > this.options.bounceVelocityThreshold;\n\n            if (velocity > velocityThreshold) {\n                swipeType = RIGHT_SWIPE;\n            } else if (velocity < -velocityThreshold) {\n                swipeType = LEFT_SWIPE;\n            }\n\n            this._content.paneMoved(swipeType, bounce, function(eventData) {\n                return that.trigger(CHANGE, eventData);\n            });\n        },\n\n        _transitionEnd: function() {\n            this._content.updatePage();\n            if (this.options.navigatable) {\n                this._setCurrent();\n            }\n        },\n\n        _initNavigation: function() {\n            var that = this;\n            var prevArrow;\n            var nextArrow;\n            var messages = that.options.messages;\n            var navigationContainer = that._navigationContainer = $(\"<div class='k-scrollview-elements'></div>\");\n\n            if (that.options.navigatable) {\n                prevArrow = $('<a class=\"k-scrollview-prev\" role=\"button\" aria-label=\"' + messages.previousButtonLabel + '\"><span class=\"k-icon k-i-arrowhead-w\"></span></a>');\n                nextArrow = $('<a class=\"k-scrollview-next\" role=\"button\" aria-label=\"' + messages.nextButtonLabel + '\"><span class=\"k-icon k-i-arrowhead-e\"></span></a>');\n            } else {\n                prevArrow = $('<a class=\"k-scrollview-prev\"><span class=\"k-icon k-i-arrowhead-w\"></span></a>');\n                nextArrow = $('<a class=\"k-scrollview-next\"><span class=\"k-icon k-i-arrowhead-e\"></span></a>');\n            }\n\n            prevArrow.hide();\n            nextArrow.hide();\n\n            navigationContainer.append(prevArrow);\n            navigationContainer.append(nextArrow);\n            that.element.append(navigationContainer);\n\n            if (that.options.navigatable) {\n                that.ariaLiveEl = $(\"<div aria-live='polite' aria-atomic='true' class='k-sr-only'></div>\");\n                that.element.append(that.ariaLiveEl);\n            }\n\n            navigationContainer.on(CLICK + NS, \"a.k-scrollview-prev\", that.prev.bind(that));\n            navigationContainer.on(CLICK + NS, \"a.k-scrollview-next\", that.next.bind(that));\n        },\n\n        _navigatable: function() {\n            var that = this;\n            var navigationContainer = that._navigationContainer;\n\n            if (!that.options.navigatable) {\n                return;\n            }\n\n            that._ariaTemplate = kendo.template(that.options.ARIATemplate);\n\n            navigationContainer.find(\">a.k-scrollview-prev\").attr(TABINDEX, 0);\n            navigationContainer.find(\">a.k-scrollview-next\").attr(TABINDEX, 0);\n\n            navigationContainer.on(KEYDOWN + NS, that, function(e) {\n                var target = $(e.target);\n                if (e.keyCode == keys.SPACEBAR || e.keyCode == keys.ENTER) {\n                    e.preventDefault();\n                    target.click();\n                }\n            });\n\n            that.itemsWrapper\n                .attr(\"aria-roledescription\", \"carousel\")\n                .attr(TABINDEX, 0);\n\n            that.itemsWrapper.on(KEYDOWN + NS, that, that._keyDown.bind(that));\n            that.itemsWrapper.on(FOCUS + NS, that._focus.bind(that));\n            that.itemsWrapper.on(FOCUSOUT + NS, that._blur.bind(that));\n        },\n\n        _focus: function() {\n            var that = this;\n            that._focused = true;\n            that._setCurrent();\n        },\n\n        _blur: function() {\n            if (this._current) {\n                this._current.removeClass(FOCUSED);\n                this._current.removeAttr(\"id\");\n                this.itemsWrapper.removeAttr(\"aria-activedescendant\");\n            }\n        },\n\n        _keyDown: function(e) {\n            var that = this;\n            var handled;\n            var key = e.keyCode;\n\n            if (key == keys.LEFT) {\n                handled = true;\n                that.prev();\n            }\n\n            if (key == keys.RIGHT) {\n                handled = true;\n                that.next();\n            }\n\n            if (handled) {\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        },\n\n        _toggleNavigation: function(e) {\n            var page = e.nextPage || e.nextPage === 0 ? e.nextPage : e.currentPage;\n            var navigationContainer = this._navigationContainer;\n            var prevArrow = navigationContainer.find(\">a.k-scrollview-prev\");\n            var nextArrow = navigationContainer.find(\">a.k-scrollview-next\");\n\n            prevArrow.hide();\n            nextArrow.hide();\n\n            if (page || page === 0) {\n                if (page !== 0) {\n                    prevArrow.show();\n                }\n                if (page != this._content.pageCount - 1) {\n                    nextArrow.show();\n                }\n            }\n        }\n    });\n\n    ui.plugin(ScrollView);\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","description","depends","$","window","kendo","jQuery","undefined","ui","Transition","effects","Pane","keys","PaneDimensions","Widget","DataBoundWidget","DataSource","data","math","Math","abs","ceil","round","max","min","floor","CHANGE","CLICK","CHANGING","REFRESH","CURRENT_PAGE_CLASS","VIRTUAL_PAGE_CLASS","FUNCTION","ITEM_CHANGE","CLEANUP","NS","DOT","KEYDOWN","FOCUS","FOCUSOUT","FOCUSED","TABINDEX","VIRTUAL_PAGE_COUNT","LEFT_PAGE","CETER_PAGE","RIGHT_PAGE","LEFT_SWIPE","NUDGE","RIGHT_SWIPE","className","ScrollViewDataReader","Observable","extend","init","dataSource","that","this","pendingRequestArray","initialFetch","useRanges","options","serverPaging","fn","call","bind","_change","trigger","offset","page","callback","view","range","pageSize","scrollTo","pageCount","total","prevPage","prevPrefetch","currentPage","nextPage","nextPrefetch","push","getViewData","index","length","destroy","unbind","Pager","Class","scrollView","element","navigationWrapElement","append","_navigationContainer","_changeProxy","_refreshProxy","_refresh","on","_click","_navigatable","items","children","_focus","_focused","_setCurrent","find","_blur","_current","removeClass","removeAttr","_keyDown","e","handled","next","current","key","keyCode","LEFT","prev","RIGHT","SPACEBAR","ENTER","preventDefault","stopPropagation","guid","attr","addClass","pageable","navigatable","messages","pagerLabel","_ariaTemplate","template","ARIATemplate","pageHTML","idx","html","eq","_toggleNavigation","isDefaultPrevented","innerNavigationContainer","scrollViewWidth","width","containerOffset","pageWidth","outerWidth","itemOffset","position","left","scrollLeft","translate","animate","newPage","currentTarget","off","remove","TRANSITION_END","ScrollViewPager","DRAG_START","DRAG_END","ElasticPane","container","parent","movable","transition","userEvents","dimensions","dimension","pane","Movable","axis","onEnd","UserEvents","fastTap","start","x","velocity","y","capture","cancel","allowSelection","end","elastic","duration","size","getSize","height","getTotal","updateDimension","update","refresh","enabled","moveTo","moveAxis","transitionTo","ease","instant","location","tansition","ScrollViewContent","ScrollViewElasticPane","_getPages","contentHeight","enablePager","pagerOverlay","easeOutExpo","paneMoved","swipeType","bounce","approx","easeOutBack","snap","minSnap","maxSnap","updatePage","forcePageUpdate","resizeTo","pageElements","containerHeight","pager","_outerHeight","css","_paged","roleSelector","VirtualScrollViewContent","_templates","pages","_initPages","forceEnabled","setDataSource","create","_dataReader","_pendingPageRefresh","_pendingWidgetRefresh","_viewShow","setTimeout","_resetPages","dataReader","_pageProxy","_onPage","_resetProxy","_onReset","reset","emptyTemplate","templateProxy","emptyTemplateProxy","i","Page","setWidth","_repositionPages","silent","pagerScroll","thresholdPassed","isEndReached","delta","Array","_cancelMove","_moveBackward","_moveForward","shift","setPageContent","unshift","pop","_resetMovable","threshold","item","content","theContent","ScrollView","VirtualPage","stripWhitespace","wrapInner","itemsWrapper","_initNavigation","inner","first","transitionEnd","_transitionEnd","dragStart","_dragStart","dragEnd","_dragEnd","change","empty","_defaultPrevented","angular","elements","dataItem","_content","viewInit","viewShow","velocityThreshold","bounceVelocityThreshold","enableNavigationButtons","autoBind","previousButtonLabel","nextButtonLabel","events","ariaLiveEl","eventData","emptyDataSource","fetch","_updateAria","prevArrow","nextArrow","navigationContainer","hide","target","click","show","plugin","amd","a1","a2","a3"],"mappings":"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"}