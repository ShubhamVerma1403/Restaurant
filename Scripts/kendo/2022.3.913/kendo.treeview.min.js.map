{"version":3,"file":"kendo.treeview.min.js","sources":["kendo.treeview.js"],"sourcesContent":["(function(f, define) {\n    define('kendo.treeview',[ \"kendo.data\", \"kendo.treeview.draganddrop\", \"kendo.html.input\" ], f);\n})(function() {\n\nvar __meta__ = {\n    id: \"treeview\",\n    name: \"TreeView\",\n    category: \"web\",\n    description: \"The TreeView widget displays hierarchical data in a traditional tree structure,with support for interactive drag-and-drop operations.\",\n    depends: [ \"data\", \"html.input\" ],\n    features: [{\n        id: \"treeview-dragging\",\n        name: \"Drag & Drop\",\n        description: \"Support for drag & drop\",\n        depends: [ \"treeview.draganddrop\" ]\n    }]\n};\n\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        data = kendo.data,\n        extend = $.extend,\n        template = kendo.template,\n        isArray = Array.isArray,\n        Widget = ui.Widget,\n        HierarchicalDataSource = data.HierarchicalDataSource,\n        keys = kendo.keys,\n        NS = \".kendoTreeView\",\n        TEMP_NS = \".kendoTreeViewTemp\",\n        SELECT = \"select\",\n        CHECK = \"check\",\n        NAVIGATE = \"navigate\",\n        EXPAND = \"expand\",\n        CHANGE = \"change\",\n        ERROR = \"error\",\n        CHECKED = \"checked\",\n        INDETERMINATE = \"indeterminate\",\n        COLLAPSE = \"collapse\",\n        DRAGSTART = \"dragstart\",\n        DRAG = \"drag\",\n        DROP = \"drop\",\n        DRAGEND = \"dragend\",\n        DATABOUND = \"dataBound\",\n        ITEMSLOADED = \"itemsLoaded\",\n        LOADCOMPLETED = \"loadCompleted\",\n        REQUESTEND = \"requestEnd\",\n        CLICK = \"click\",\n        KENDOKEYDOWN = \"kendoKeydown\",\n        UNDEFINED = \"undefined\",\n        KSTATEHOVER = \"k-hover\",\n        KTREEVIEW = \"k-treeview\",\n        VISIBLE = \":visible\",\n        NODE = \".k-item\",\n        STRING = \"string\",\n        ARIACHECKED = \"aria-checked\",\n        ARIASELECTED = \"aria-selected\",\n        ARIADISABLED = \"aria-disabled\",\n        ARIAEXPANDED = \"aria-expanded\",\n        DISABLED = \"k-disabled\",\n        TreeView,\n        subGroup, nodeContents, nodeIcon,\n        spriteRe,\n        bindings = {\n            text: \"dataTextField\",\n            url: \"dataUrlField\",\n            spriteCssClass: \"dataSpriteCssClassField\",\n            imageUrl: \"dataImageUrlField\"\n        },\n        isJQueryInstance = function(obj) {\n            return (obj instanceof kendo.jQuery) || (window.jQuery && obj instanceof window.jQuery);\n        },\n        isDomElement = function(o) {\n            return (\n                typeof HTMLElement === \"object\" ? o instanceof HTMLElement : //DOM2\n                o && typeof o === \"object\" && o.nodeType === 1 && typeof o.nodeName === STRING\n            );\n        };\n\n    function contentChild(filter) {\n        return function(node) {\n            var result = node.children(\".k-animation-container\");\n\n            if (!result.length) {\n                result = node;\n            }\n\n            return result.children(filter);\n        };\n    }\n\n    function templateNoWith(code) {\n        return kendo.template(code, { useWithBlock: false });\n    }\n\n    subGroup = contentChild(\".k-group\");\n    nodeContents = contentChild(\".k-group,.k-content\");\n    nodeIcon = function(node) {\n        return node.children(\"div\").find(\".k-treeview-toggle > .k-icon\");\n    };\n\n    function checkboxes(node) {\n         return node.find(\".k-checkbox-wrapper:first input[type=checkbox]\");\n    }\n\n    function insertAction(indexOffset) {\n        return function(nodeData, referenceNode) {\n            referenceNode = referenceNode.closest(NODE);\n\n            var group = referenceNode.parent(),\n                parentNode;\n\n            if (group.parent().is(\"li\")) {\n                parentNode = group.parent();\n            }\n\n            return this._dataSourceMove(nodeData, group, parentNode, function(dataSource, model) {\n                var referenceItem = this.dataItem(referenceNode);\n                var referenceNodeIndex = referenceItem && referenceNode.parent().children().length !== referenceItem.parent().length ? referenceItem.parent().indexOf(referenceItem) : referenceNode.index();\n\n                return this._insert(dataSource.data(), model, referenceNodeIndex + indexOffset);\n            });\n        };\n    }\n\n    spriteRe = /k-sprite/;\n\n    function moveContents(node, container) {\n        var tmp;\n\n        while (node && node.nodeName.toLowerCase() != \"ul\") {\n            tmp = node;\n            node = node.nextSibling;\n\n            if (tmp.nodeType == 3) {\n                tmp.nodeValue = kendo.trim(tmp.nodeValue);\n            }\n\n            if (spriteRe.test(tmp.className)) {\n                container.insertBefore(tmp, container.firstChild);\n            } else {\n                container.appendChild(tmp);\n            }\n        }\n    }\n\n    function updateNodeHtml(node) {\n        var wrapper = node.children(\"div\"),\n            group = node.children(\"ul\"),\n            toggleButton = wrapper.find(\".k-treeview-toggle > .k-icon\"),\n            checkbox = node.children(\"input[type=checkbox]\"),\n            innerWrapper = wrapper.children(\".k-in\");\n\n        if (node.hasClass(\"k-treeview\")) {\n            return;\n        }\n\n        if (!wrapper.length) {\n            wrapper = $(\"<div />\").prependTo(node);\n        }\n\n        if (!toggleButton.length && group.length) {\n            toggleButton = $(\"<span class='k-treeview-toggle'><span class='k-icon' /></span>\").prependTo(wrapper);\n        } else if (!group.length || !group.children().length) {\n            toggleButton.parent().remove();\n            group.remove();\n        }\n\n        if (checkbox.length) {\n            $(\"<span class='k-checkbox-wrapper' />\").appendTo(wrapper).append(checkbox);\n        }\n\n        if (!innerWrapper.length) {\n            innerWrapper = node.children(\"a\").eq(0).addClass(\"k-in k-link\");\n\n            if (!innerWrapper.length) {\n                innerWrapper = $(\"<span class='k-treeview-leaf k-in' />\");\n            }\n\n            innerWrapper.appendTo(wrapper);\n\n            if (wrapper.length) {\n                moveContents(wrapper[0].nextSibling, innerWrapper[0]);\n            }\n        }\n    }\n\n    TreeView = kendo.ui.DataBoundWidget.extend({\n        init: function(element, options) {\n            var that = this,\n                inferred = false,\n                hasDataSource = options && !!options.dataSource,\n                list;\n\n            if (isArray(options)) {\n                options = { dataSource: options };\n            }\n\n            if (options && typeof options.loadOnDemand == UNDEFINED && isArray(options.dataSource)) {\n                options.loadOnDemand = false;\n            }\n\n            Widget.prototype.init.call(that, element, options);\n\n            element = that.element;\n            options = that.options;\n\n            that._dataSourceUids = {};\n\n            list = (element.is(\"ul\") && element) ||\n                   (element.hasClass(KTREEVIEW) && element.children(\"ul\"));\n\n            inferred = !hasDataSource && list.length;\n\n            if (inferred) {\n                options.dataSource.list = list;\n            }\n\n            that._animation();\n\n            that._accessors();\n\n            that._templates();\n\n            // render treeview if it's not already rendered\n            if (!element.hasClass(KTREEVIEW)) {\n                that._wrapper();\n\n                if (list) {\n                    that.root = element;\n                    that._group(that.wrapper);\n                }\n            } else {\n                // otherwise just initialize properties\n                that.wrapper = element;\n                that.root = element.children(\"ul\").eq(0);\n            }\n\n            that._applyCssClasses();\n            that._tabindex();\n\n            that.wrapper.attr(\"role\", \"tree\");\n            that.wrapper.find(\">ul\").attr(\"role\", \"none\");\n\n            that._dataSource(inferred);\n\n            that._attachEvents();\n\n            that._dragging();\n\n            if (!inferred) {\n                if (options.autoBind) {\n                    that._progress(true);\n                    that.dataSource.fetch(this._attemptLoadCompleted.bind(this));\n                }\n            } else {\n                that._syncHtmlAndDataSource();\n            }\n\n            if (options.checkboxes && options.checkboxes.checkChildren) {\n                that.updateIndeterminate();\n            }\n\n            if (that.element[0].id) {\n                that._ariaId = kendo.format(\"{0}_tv_active\", that.element[0].id);\n            } else {\n                that._ariaId = kendo.guid() + \"_tv_active\";\n            }\n\n            kendo.notify(that);\n        },\n\n        _attachEvents: function() {\n            var that = this,\n                clickableItems = \".k-in:not(.k-selected,.k-disabled)\",\n                MOUSEENTER = \"mouseenter\";\n\n            that._clickHandler = that._click.bind(that);\n\n            that.wrapper\n                .on(MOUSEENTER + NS, \".k-in.k-selected\", function(e) { e.preventDefault(); })\n                .on(MOUSEENTER + NS, clickableItems, function() { $(this).addClass(KSTATEHOVER); })\n                .on(\"mouseleave\" + NS, clickableItems, function() { $(this).removeClass(KSTATEHOVER); })\n                .on(CLICK + NS, clickableItems, that._clickHandler)\n                .on(\"dblclick\" + NS, \".k-in:not(.k-disabled)\", that._toggleButtonClick.bind(that))\n                .on(CLICK + NS, \".k-i-expand,.k-i-collapse\", that._toggleButtonClick.bind(that))\n                .on(\"keydown\" + NS, that, that._keydown.bind(that))\n                .on(\"keypress\" + NS, that._keypress.bind(that))\n                .on(\"focus\" + NS, that._focus.bind(that))\n                .on(\"blur\" + NS, that._blur.bind(that))\n                .on(\"mousedown\" + NS, \".k-in,.k-checkbox-wrapper :checkbox,.k-i-expand,.k-i-collapse\", that._mousedown.bind(that))\n                .on(\"change\" + NS, \".k-checkbox-wrapper :checkbox\", that._checkboxChange.bind(that))\n                .on(\"click\" + NS, \".k-request-retry\", that._retryRequest.bind(that))\n                .on(\"click\" + NS, \".k-link.k-disabled\", function(e) { e.preventDefault(); })\n                .on(\"click\" + NS, function(e) {\n                    var target = $(e.target);\n\n                    if (!target.is(\":kendoFocusable\") && !target.find(\"input,select,textarea,button,object\").is(\":kendoFocusable\")) {\n                        that.focus();\n                    }\n                });\n        },\n\n        _syncHtmlAndDataSource: function(root, dataSource) {\n            root = root || this.root;\n            dataSource = dataSource || this.dataSource;\n            var data = dataSource.view(),\n                uidAttr = kendo.attr(\"uid\"),\n                expandedAttr = kendo.attr(\"expanded\"),\n                checkboxesEnabled = this.options.checkboxes,\n                items = root.children(\"li\"),\n                i,\n                item,\n                dataItem,\n                uid,\n                itemCheckbox;\n\n            for (i = 0; i < items.length; i++) {\n                dataItem = data[i];\n                uid = dataItem.uid;\n                item = items.eq(i);\n                item.attr(\"role\", \"treeitem\")\n                    .attr(uidAttr, uid)\n                    .attr(ARIASELECTED, item.hasClass(\"k-selected\"));\n\n                dataItem.expanded = item.attr(expandedAttr) === \"true\";\n\n                if (checkboxesEnabled) {\n                    itemCheckbox = checkboxes(item);\n                    dataItem.checked = itemCheckbox.prop(CHECKED);\n                    itemCheckbox.attr(\"id\", \"_\" + uid);\n                    itemCheckbox.next(\".k-checkbox-label\").attr(\"for\", \"_\" + uid);\n                }\n\n                this._syncHtmlAndDataSource(item.children(\"ul\"), dataItem.children);\n            }\n        },\n\n        _animation: function() {\n            var options = this.options,\n                animationOptions = options.animation,\n                hasCollapseAnimation = animationOptions.collapse && \"effects\" in animationOptions.collapse,\n                collapse = extend({}, animationOptions.expand, animationOptions.collapse);\n\n            if (!hasCollapseAnimation) {\n                collapse = extend(collapse, { reverse: true });\n            }\n\n            if (animationOptions === false) {\n                animationOptions = {\n                    expand: { effects: {} },\n                    collapse: { hide: true, effects: {} }\n                };\n            }\n\n            animationOptions.collapse = extend(collapse, { hide: true });\n            options.animation = animationOptions;\n        },\n\n        _dragging: function() {\n            var enabled = this.options.dragAndDrop;\n            var dragging = this.dragging;\n\n            if (enabled && !dragging) {\n                var widget = this;\n\n                this.dragging = new ui.HierarchicalDragAndDrop(this.element, {\n                    reorderable: true,\n                    $angular: this.options.$angular,\n                    autoScroll: this.options.autoScroll,\n                    filter: \"div:not(.k-disabled) .k-in\",\n                    allowedContainers: \".k-treeview\",\n                    itemSelector: \".k-treeview .k-item\",\n                    hintText: this._hintText.bind(this),\n                    contains: function(source, destination) {\n                        return $.contains(source, destination);\n                    },\n                    dropHintContainer: function(item) {\n                        return item;\n                    },\n                    itemFromTarget: function(target) {\n                        var item = target.closest(\".k-treeview-top,.k-treeview-mid,.k-treeview-bot\");\n                        return {\n                            item: item,\n                            content: target.closest(\".k-in\"),\n                            first: item.hasClass(\"k-treeview-top\"),\n                            last: item.hasClass(\"k-treeview-bot\")\n                        };\n                    },\n                    dropPositionFrom: function(dropHint) {\n                        return dropHint.prevAll(\".k-in\").length > 0 ? \"after\" : \"before\";\n                    },\n                    dragstart: function(source) {\n                        return widget.trigger(DRAGSTART, { sourceNode: source[0] });\n                    },\n                    drag: function(options) {\n                        widget.trigger(DRAG, {\n                            originalEvent: options.originalEvent,\n                            sourceNode: options.source[0],\n                            dropTarget: options.target[0],\n                            pageY: options.pageY,\n                            pageX: options.pageX,\n                            statusClass: options.status,\n                            setStatusClass: options.setStatus\n                        });\n                    },\n                    drop: function(options) {\n                        var dropTarget = $(options.dropTarget);\n                        var navigationTarget = dropTarget.closest(\"a\");\n\n                        if (navigationTarget && navigationTarget.attr(\"href\")) {\n                            widget._tempPreventNavigation(navigationTarget);\n                        }\n\n                        return widget.trigger(DROP, {\n                            originalEvent: options.originalEvent,\n                            sourceNode: options.source,\n                            destinationNode: options.destination,\n                            valid: options.valid,\n                            setValid: function(state) {\n                                this.valid = state;\n                                options.setValid(state);\n                            },\n                            dropTarget: options.dropTarget,\n                            dropPosition: options.position\n                        });\n                    },\n                    dragend: function(options) {\n                        var source = options.source;\n                        var destination = options.destination;\n                        var position = options.position;\n\n                        function triggerDragEnd(source) {\n                            if (widget.options.checkboxes && widget.options.checkboxes.checkChildren) {\n                                widget.updateIndeterminate();\n                            }\n\n                            widget.current(source);\n                            widget.element.focus();\n\n                            widget.trigger(DRAGEND, {\n                                originalEvent: options.originalEvent,\n                                sourceNode: source && source[0],\n                                destinationNode: destination[0],\n                                dropPosition: position\n                            });\n                        }\n\n                        // perform reorder / move\n                        // different handling is necessary because append might be async in remote bound tree\n                        if (position == \"over\") {\n                            widget.append(source, destination, triggerDragEnd);\n                        } else {\n                            if (position == \"before\") {\n                                source = widget.insertBefore(source, destination);\n                            } else if (position == \"after\") {\n                                source = widget.insertAfter(source, destination);\n                            }\n\n                            triggerDragEnd(source);\n                        }\n                    }\n                });\n            } else if (!enabled && dragging) {\n                dragging.destroy();\n                this.dragging = null;\n            }\n        },\n\n        _tempPreventNavigation: function(node) {\n            node.on(CLICK + NS + TEMP_NS, function(ev) {\n                ev.preventDefault();\n                node.off(CLICK + NS + TEMP_NS);\n            });\n        },\n\n        _hintText: function(node) {\n            return this.templates.dragClue({\n                item: this.dataItem(node),\n                treeview: this.options\n            });\n        },\n\n        _templates: function() {\n            var that = this,\n                options = that.options,\n                fieldAccessor = that._fieldAccessor.bind(that);\n\n            if (options.template && typeof options.template == STRING) {\n                options.template = template(options.template);\n            } else if (!options.template) {\n                options.template = templateNoWith(\n                    \"# var text = \" + fieldAccessor(\"text\") + \"(data.item); #\" +\n                    \"# if (typeof data.item.encoded != 'undefined' && data.item.encoded === false) {#\" +\n                        \"<span class='k-treeview-leaf-text'>#= text #</span>\" +\n                    \"# } else { #\" +\n                        \"<span class='k-treeview-leaf-text'>#: text #</span>\" +\n                    \"# } #\"\n                );\n            }\n\n            that._checkboxes();\n\n            that.templates = {\n                setAttributes: function(item) {\n                    var result = \"\";\n                    var attributes = item.attr || {};\n\n                    for (var attr in attributes) {\n                        if (attributes.hasOwnProperty(attr) && attr !== \"class\") {\n                            result += attr + \"=\\\"\" + attributes[attr] + \"\\\" \";\n                        }\n                    }\n\n                    return result;\n                },\n                wrapperCssClass: function(group, item) {\n                    var result = \"k-item k-treeview-item\",\n                        index = item.index;\n\n                    if (group.firstLevel && index === 0) {\n                        result += \" k-first\";\n                    }\n\n                    if (index == group.length - 1) {\n                        result += \" k-last\";\n                    }\n\n                    return result;\n                },\n                cssClass: function(group, item) {\n                    var result = \"\",\n                        index = item.index,\n                        groupLength = group.length - 1;\n\n                    if (group.firstLevel && index === 0) {\n                        result += \"k-treeview-top \";\n                    }\n\n                    if (index === 0 && index != groupLength) {\n                        result += \"k-treeview-top\";\n                    } else if (index == groupLength) {\n                        result += \"k-treeview-bot\";\n                    } else {\n                        result += \"k-treeview-mid\";\n                    }\n\n                    return result;\n                },\n                textClass: function(item, isLink) {\n                    var result = \"k-treeview-leaf k-in\";\n\n                    if (isLink) {\n                        result += \" k-link\";\n                    }\n\n                    if (item.enabled === false) {\n                        result += \" k-disabled\";\n                    }\n\n                    if (item.selected === true) {\n                        result += \" k-selected\";\n                    }\n\n                    return result;\n                },\n                toggleButtonClass: function(item) {\n                    var result = \"k-icon\";\n\n                    if (item.expanded !== true) {\n                        result += \" k-i-expand\";\n                    } else {\n                        result += \" k-i-collapse\";\n                    }\n\n                    return result;\n                },\n                groupAttributes: function(group) {\n                    var attributes = \"\";\n\n                    if (!group.firstLevel) {\n                        attributes = \"role='group'\";\n                    }\n\n                    return attributes + (group.expanded !== true ? \" style='display:none'\" : \"\");\n                },\n                groupCssClass: function(group) {\n                    var cssClass = \"k-group k-treeview-group\";\n\n                    if (group.firstLevel) {\n                        cssClass += \" k-treeview-lines\";\n                    }\n\n                    return cssClass;\n                },\n                dragClue: templateNoWith(\n                    \"#= data.treeview.template(data) #\"\n                ),\n                group: templateNoWith(\n                    \"<ul class='#= data.r.groupCssClass(data.group) #'#= data.r.groupAttributes(data.group) #>\" +\n                        \"#= data.renderItems(data) #\" +\n                    \"</ul>\"\n                ),\n                itemContent: templateNoWith(\n                    \"# var imageUrl = \" + fieldAccessor(\"imageUrl\") + \"(data.item); #\" +\n                    \"# var spriteCssClass = \" + fieldAccessor(\"spriteCssClass\") + \"(data.item); #\" +\n                    \"# if (imageUrl) { #\" +\n                        \"<img class='k-image' alt='' src='#= imageUrl #'>\" +\n                    \"# } #\" +\n\n                    \"# if (spriteCssClass) { #\" +\n                        \"<span class='k-sprite #= spriteCssClass #'></span>\" +\n                    \"# } #\" +\n\n                    \"#= data.treeview.template(data) #\"\n                ),\n                itemElement: templateNoWith(\n                    \"# var item = data.item, r = data.r; #\" +\n                    \"# var url = \" + fieldAccessor(\"url\") + \"(item); #\" +\n                    \"<div class='#= r.cssClass(data.group, item) #'>\" +\n                        \"# if (item.hasChildren) { #\" +\n                            \"<span class='k-treeview-toggle'>\" +\n                                \"<span class='#= r.toggleButtonClass(item) #'></span>\" +\n                            \"</span>\" +\n                        \"# } #\" +\n\n                        \"# if (data.treeview.checkboxes) { #\" +\n                            \"<span class='k-checkbox-wrapper' role='presentation'>\" +\n                                \"#= data.treeview.checkboxes.template(data) #\" +\n                            \"</span>\" +\n                        \"# } #\" +\n\n                        \"# var tag = url ? 'a' : 'span'; #\" +\n                        \"# var textAttr = url ? ' href=\\\\'' + url + '\\\\'' : ''; #\" +\n\n                        \"<#=tag# class='#= r.textClass(item, !!url) #'#= textAttr #>\" +\n                            \"#= r.itemContent(data) #\" +\n                        \"</#=tag#>\" +\n                    \"</div>\"\n                ),\n                item: templateNoWith(\n                    \"# var item = data.item, r = data.r; #\" +\n                    \"<li role='treeitem' class='#= r.wrapperCssClass(data.group, item) #'\" +\n                        kendo.attr(\"uid\") + \"='#= item.uid #' \" +\n                        \"#= r.setAttributes(item.toJSON ? item.toJSON() : item) # \" +\n                        \"# if (data.treeview.checkboxes) { #\" +\n                            \"aria-checked='#= item.checked ? \\\"true\\\" : \\\"false\\\" #' \" +\n                        \"# } #\" +\n                        \"aria-selected='#= item.selected ? \\\"true\\\" : \\\"false\\\" #' \" +\n                        \"#=item.enabled === false ? \\\"aria-disabled='true'\\\" : ''#\" +\n                        \"aria-expanded='#= item.expanded ? \\\"true\\\" : \\\"false\\\" #' \" +\n                        \"data-expanded='#= item.expanded ? \\\"true\\\" : \\\"false\\\" #' \" +\n                    \">\" +\n                        \"#= r.itemElement(data) #\" +\n                    \"</li>\"\n                ),\n                loading: templateNoWith(\n                    \"<div class='k-icon k-i-loading'></div> #: data.messages.loading #\"\n                ),\n                retry: templateNoWith(\n                    \"#: data.messages.requestFailed # \" +\n                    \"<button class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-request-retry'><span class='k-button-text'>#: data.messages.retry #</span></button>\"\n                )\n            };\n        },\n\n        items: function() {\n            return this.element.find(\".k-item > div:first-child\");\n        },\n\n        setDataSource: function(dataSource) {\n            var options = this.options;\n\n            options.dataSource = dataSource;\n\n            this._dataSourceUids = {};\n\n            this._dataSource();\n\n            if (options.checkboxes && options.checkboxes.checkChildren) {\n                this.dataSource.one(\"change\", this.updateIndeterminate.bind(this, null));\n            }\n\n            if (this.options.autoBind) {\n                this.dataSource.fetch(this._attemptLoadCompleted.bind(this));\n            }\n        },\n\n        _bindDataSource: function() {\n            var that = this;\n\n            that._refreshHandler = that.refresh.bind(that);\n            that._errorHandler = that._error.bind(that);\n            that._loadCompletedHandler = that._loadCompleted.bind(that);\n            that._requestEndHandler = that._dsRequestEnd.bind(that);\n            that._loadedNodes = [];\n\n            that.dataSource.bind(CHANGE, that._refreshHandler);\n            that.dataSource.bind(ERROR, that._errorHandler);\n\n            that.dataSource.bind(ITEMSLOADED, that._loadCompletedHandler);\n            that.dataSource.bind(REQUESTEND, that._requestEndHandler);\n        },\n\n        _dsRequestEnd: function(e) {\n            var that = this;\n\n            setTimeout(function() {\n                if (e.type === \"read\" && !that._loadCompletedFired) {\n                    that._attemptLoadCompleted();\n                }\n            });\n        },\n\n        _loadCompleted: function(e) {\n            var that = this;\n            that._loadedNodes = that._loadedNodes.concat(e.nodes);\n\n            if (!that.dataSource.loading() && that.options.loadOnDemand === false) {\n                that.trigger(LOADCOMPLETED, { nodes: that._loadedNodes });\n                that._loadedNodes = [];\n            }\n        },\n\n        _attemptLoadCompleted: function() { // If there are no items to be loaded ensure event is triggered on dataBound\n            var that = this,\n                items = that.dataSource.view(),\n                current, i;\n\n            if (that.options.loadOnDemand === false) {\n                for (i = 0; i < items.length; i++) {\n                    current = items[i];\n                    if (current.hasChildren && (!current.children || !current.children.data() || current.children.data().length === 0)) {\n                        return;\n                    }\n                }\n\n                that._loadCompletedFired = true;\n                that.trigger(LOADCOMPLETED, { nodes: [] });\n            }\n        },\n\n        _unbindDataSource: function() {\n            var dataSource = this.dataSource;\n\n            if (dataSource) {\n                dataSource.unbind(CHANGE, this._refreshHandler);\n                dataSource.unbind(ERROR, this._errorHandler);\n                dataSource.unbind(ITEMSLOADED, this._loadCompletedHandler);\n                dataSource.unbind(REQUESTEND, this._requestEndHandler);\n            }\n        },\n\n        _dataSource: function(silentRead) {\n            var that = this,\n                options = that.options,\n                dataSource = options.dataSource;\n\n            function recursiveRead(data) {\n                for (var i = 0; i < data.length; i++) {\n                    data[i]._initChildren();\n\n                    data[i].children.fetch();\n\n                    recursiveRead(data[i].children.view());\n                }\n            }\n\n            dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n\n            that._unbindDataSource();\n\n            if (!dataSource.fields) {\n                dataSource.fields = [\n                    { field: \"text\" },\n                    { field: \"url\" },\n                    { field: \"spriteCssClass\" },\n                    { field: \"imageUrl\" }\n                ];\n            }\n\n            that.dataSource = dataSource = HierarchicalDataSource.create(dataSource);\n\n            if (silentRead) {\n                dataSource.fetch();\n\n                recursiveRead(dataSource.view());\n            }\n\n            that._bindDataSource();\n        },\n\n        events: [\n            DRAGSTART,\n            DRAG,\n            DROP,\n            DRAGEND,\n\n            DATABOUND,\n            LOADCOMPLETED,\n\n            EXPAND,\n            COLLAPSE,\n            SELECT,\n            CHANGE,\n            NAVIGATE,\n            CHECK,\n            KENDOKEYDOWN\n        ],\n\n        options: {\n            name: \"TreeView\",\n            dataSource: {},\n            animation: {\n                expand: {\n                    effects: \"expand:vertical\",\n                    duration: 200\n                }, collapse: {\n                    duration: 100\n                }\n            },\n            messages: {\n                loading: \"Loading...\",\n                requestFailed: \"Request failed.\",\n                retry: \"Retry\"\n            },\n            dragAndDrop: false,\n            checkboxes: false,\n            autoBind: true,\n            autoScroll: false,\n            loadOnDemand: true,\n            template: \"\",\n            dataTextField: null,\n            size: \"medium\"\n        },\n\n        _accessors: function() {\n            var that = this,\n                options = that.options,\n                i, field, textField,\n                element = that.element;\n\n            for (i in bindings) {\n                field = options[bindings[i]];\n                textField = element.attr(kendo.attr(i + \"-field\"));\n\n                if (!field && textField) {\n                    field = textField;\n                }\n\n                if (!field) {\n                    field = i;\n                }\n\n                if (!isArray(field)) {\n                    field = [field];\n                }\n\n                options[bindings[i]] = field;\n            }\n        },\n\n        // generates accessor function for a given field name, honoring the data*Field arrays\n        _fieldAccessor: function(fieldName) {\n            var fieldBindings = this.options[bindings[fieldName]],\n                count = fieldBindings.length,\n                result = \"(function(item) {\";\n\n            if (count === 0) {\n                result += \"return item['\" + fieldName + \"'];\";\n            } else {\n                result += \"var levels = [\" +\n                            $.map(fieldBindings, function(x) {\n                                return \"function(d){ return \" + kendo.expr(x) + \"}\";\n                            }).join(\",\") + \"];\";\n\n                result += \"return levels[Math.min(item.level(), \" + count + \"-1)](item)\";\n            }\n\n            result += \"})\";\n\n            return result;\n        },\n\n        setOptions: function(options) {\n            Widget.fn.setOptions.call(this, options);\n\n            this._animation();\n\n            this._dragging();\n\n            this._templates();\n        },\n\n        _trigger: function(eventName, node) {\n            return this.trigger(eventName, {\n                node: node.closest(NODE)[0]\n            });\n        },\n\n        _setChecked: function(datasource, value) {\n            if (!datasource || !kendo.isFunction(datasource.view)) {\n                return;\n            }\n\n            for (var i = 0, nodes = datasource.view(); i < nodes.length; i++) {\n                if (nodes[i].enabled !== false) {\n                    this._setCheckedValue(nodes[i], value);\n                }\n\n                if (nodes[i].children) {\n                    this._setChecked(nodes[i].children, value);\n                }\n            }\n        },\n\n        _setCheckedValue: function(node, value) {\n            node[CHECKED] = value;\n        },\n\n        _setIndeterminate: function(node) {\n            var group = subGroup(node),\n                siblings, length,\n                all = true,\n                i;\n\n            if (!group.length) {\n                return;\n            }\n\n            siblings = checkboxes(group.children());\n\n            length = siblings.length;\n\n            if (!length) {\n                return;\n            } else if (length > 1) {\n                for (i = 1; i < length; i++) {\n                    if (siblings[i].checked != siblings[i - 1].checked ||\n                        siblings[i].indeterminate || siblings[i - 1].indeterminate) {\n                        all = false;\n                        break;\n                    }\n                }\n            } else {\n                all = !siblings[0].indeterminate;\n            }\n\n            node.attr(ARIACHECKED, all ? siblings[0].checked : \"mixed\");\n\n            return checkboxes(node)\n                .data(INDETERMINATE, !all)\n                .prop(INDETERMINATE, !all)\n                .prop(CHECKED, all && siblings[0].checked);\n        },\n\n        updateIndeterminate: function(node) {\n            // top-down update of inital indeterminate state for all nodes\n            node = node || this.wrapper;\n\n            var subnodes = subGroup(node).children();\n            var i;\n            var checkbox;\n            var dataItem;\n\n            if (subnodes.length) {\n                for (i = 0; i < subnodes.length; i++) {\n                    this.updateIndeterminate(subnodes.eq(i));\n                }\n\n                if (node.is(\".k-treeview\")) {\n                    return;\n                }\n\n                checkbox = this._setIndeterminate(node);\n\n                dataItem = this.dataItem(node);\n\n                if (checkbox && checkbox.prop(CHECKED)) {\n                    dataItem.checked = true;\n                } else {\n                    if (dataItem) {\n                        delete dataItem.checked;\n                    }\n                }\n            }\n        },\n\n        _bubbleIndeterminate: function(node, skipDownward) {\n            // bottom-up setting of indeterminate state of parent nodes\n            if (!node.length) {\n                return;\n            }\n\n            if (!skipDownward) {\n                //update the indeterminate state of the node itself\n                this.updateIndeterminate(node);\n            }\n\n            var parentNode = this.parent(node),\n                checkbox;\n\n            if (parentNode.length) {\n                this._setIndeterminate(parentNode);\n\n                checkbox = parentNode.children(\"div\").find(\".k-checkbox-wrapper input[type=checkbox]\");\n\n                this._skip = true;\n                if (checkbox.prop(INDETERMINATE) === false) {\n                    this.dataItem(parentNode).set(CHECKED, checkbox.prop(CHECKED));\n                } else {\n                    // delete this.dataItem(parentNode).checked;\n                    this.dataItem(parentNode).set(CHECKED, false);\n                }\n\n                this._skip = false;\n\n                this._bubbleIndeterminate(parentNode, true);\n            }\n        },\n\n        _checkboxChange: function(e) {\n            var that = this;\n            var checkbox = $(e.target);\n            var isChecked = checkbox.prop(CHECKED);\n            var node = checkbox.closest(NODE);\n            var dataItem = this.dataItem(node);\n\n            if (this._preventChange) {\n                return;\n            }\n\n            if (dataItem.checked != isChecked) {\n                dataItem.set(CHECKED, isChecked);\n                node.attr(ARIACHECKED, isChecked);\n                this._trigger(CHECK, node);\n            }\n\n            if (checkbox.is(\":focus\")) {\n                that._trigger(NAVIGATE, node);\n                that.focus();\n            }\n        },\n\n        _toggleButtonClick: function(e) {\n            var node = $(e.currentTarget).closest(NODE);\n\n            if (node.is(\"[aria-disabled='true']\")) {\n                return;\n            }\n\n            this.toggle(node);\n        },\n\n        _mousedown: function(e) {\n            var that = this;\n            var currentTarget = $(e.currentTarget);\n            var node = $(e.currentTarget).closest(NODE);\n            var browser = kendo.support.browser;\n\n            if (node.is(\"[aria-disabled='true']\")) {\n                return;\n            }\n\n            //IE does not trigger change for indeterminate checkboxes\n            if ((browser.msie || browser.edge) && currentTarget.is(\":checkbox\")) {\n                if (currentTarget.prop(INDETERMINATE)) {\n                    that._preventChange = false;\n\n                    currentTarget.prop(CHECKED, !currentTarget.prop(CHECKED));\n                    currentTarget.trigger(CHANGE);\n\n                    currentTarget.on(CLICK + NS, function(e) {\n                        e.preventDefault();\n                    });\n\n                    that._preventChange = true;\n                } else {\n                    currentTarget.off(CLICK + NS);\n                    that._preventChange = false;\n                }\n            }\n\n            that._clickTarget = node;\n            that.current(node);\n        },\n\n        _focusable: function(node) {\n            return node && node.length && node.is(\":visible\") && !node.find(\".k-in\").first().hasClass(DISABLED);\n        },\n\n        _focus: function() {\n            var current = this.select(),\n                clickTarget = this._clickTarget;\n\n            // suppress initial focus state on touch devices (until keyboard is used)\n            if (kendo.support.touch) {\n                return;\n            }\n\n            if (clickTarget && clickTarget.length) {\n                current = clickTarget;\n            }\n\n            if (!this._focusable(current)) {\n                current = this.current();\n            }\n\n            if (!this._focusable(current)) {\n                current = this._nextVisible($());\n            }\n\n            this.current(current);\n        },\n\n        focus: function() {\n            var wrapper = this.wrapper,\n                scrollContainer = wrapper[0],\n                containers = [],\n                offsets = [],\n                documentElement = document.documentElement,\n                i;\n\n            do {\n                scrollContainer = scrollContainer.parentNode;\n\n                if (scrollContainer.scrollHeight > scrollContainer.clientHeight) {\n                    containers.push(scrollContainer);\n                    offsets.push(scrollContainer.scrollTop);\n                }\n            } while (scrollContainer != documentElement);\n\n            kendo.focusElement(wrapper);\n\n            for (i = 0; i < containers.length; i++) {\n                containers[i].scrollTop = offsets[i];\n            }\n        },\n\n        _blur: function() {\n            this.current().find(\".k-in\").first().removeClass(\"k-focus\");\n        },\n\n        _enabled: function(node) {\n            return !node.children(\"div\").children(\".k-in\").hasClass(DISABLED);\n        },\n\n        parent: function(node) {\n            var wrapperRe = /\\bk-treeview\\b(?!-)/,\n                itemRe = /\\bk-item\\b/,\n                result,\n                skipSelf;\n\n            if (typeof node == STRING) {\n                node = this.element.find(node);\n            }\n\n            if (!isDomElement(node)) {\n                node = node[0];\n            }\n\n            skipSelf = itemRe.test(node.className);\n\n            do {\n                node = node.parentNode;\n\n                if (itemRe.test(node.className)) {\n                    if (skipSelf) {\n                        result = node;\n                    } else {\n                        skipSelf = true;\n                    }\n                }\n            } while (!wrapperRe.test(node.className) && !result);\n\n            return $(result);\n        },\n\n        _nextVisible: function(node) {\n            var that = this,\n                expanded = that._expanded(node),\n                result;\n\n            function nextParent(node) {\n                while (node.length && !node.next().length) {\n                    node = that.parent(node);\n                }\n\n                if (node.next().length) {\n                    return node.next();\n                } else {\n                    return node;\n                }\n            }\n\n            if (!node.length || !node.is(\":visible\")) {\n                result = that.root.children().eq(0);\n            } else if (expanded) {\n                result = subGroup(node).children().first();\n\n                // expanded node with no children\n                if (!result.length) {\n                    result = nextParent(node);\n                }\n            } else {\n                result = nextParent(node);\n            }\n\n            return result;\n        },\n\n        _previousVisible: function(node) {\n            var that = this,\n                lastChild,\n                result;\n\n            if (!node.length || node.prev().length) {\n                if (node.length) {\n                    result = node.prev();\n                } else {\n                    result = that.root.children().last();\n                }\n\n                while (that._expanded(result)) {\n                    lastChild = subGroup(result).children().last();\n\n                    if (!lastChild.length) {\n                        break;\n                    }\n\n                    result = lastChild;\n                }\n            } else {\n                result = that.parent(node) || node;\n            }\n\n            return result;\n        },\n\n        _keydown: function(e) {\n            var that = this,\n                key = e.keyCode,\n                target,\n                focused = that.current(),\n                expanded = that._expanded(focused),\n                checkbox = focused.find(\".k-checkbox-wrapper\").first().find(\":checkbox\"),\n                rtl = kendo.support.isRtl(that.element);\n\n            if (e.target != e.currentTarget) {\n                return;\n            }\n\n            if ((!rtl && key == keys.RIGHT) || (rtl && key == keys.LEFT)) {\n                if (expanded) {\n                    target = that._nextVisible(focused);\n                } else if (!focused.find(\".k-in\").first().hasClass(DISABLED)) {\n                    that.expand(focused);\n                }\n            } else if ((!rtl && key == keys.LEFT) || (rtl && key == keys.RIGHT)) {\n                if (expanded && !focused.find(\".k-in\").first().hasClass(DISABLED)) {\n                    that.collapse(focused);\n                } else {\n                    target = that.parent(focused);\n\n                    if (!that._enabled(target)) {\n                        target = undefined;\n                    }\n                }\n            } else if (key == keys.DOWN) {\n                target = that._nextVisible(focused);\n            } else if (key == keys.UP) {\n                target = that._previousVisible(focused);\n            } else if (key == keys.HOME) {\n                target = that._nextVisible($());\n            } else if (key == keys.END) {\n                target = that._previousVisible($());\n            } else if (key == keys.ENTER && !focused.find(\".k-in\").first().hasClass(DISABLED)) {\n                if (!focused.find(\".k-in\").first().hasClass(\"k-selected\")) {\n                    if (!that._trigger(SELECT, focused)) {\n                        that.select(focused);\n                    }\n                }\n            } else if (key == keys.SPACEBAR && checkbox.length) {\n                if (!focused.find(\".k-in\").first().hasClass(DISABLED)) {\n                    checkbox.prop(CHECKED, !checkbox.prop(CHECKED))\n                        .data(INDETERMINATE, false)\n                        .prop(INDETERMINATE, false);\n\n                    that._checkboxChange({ target: checkbox });\n                }\n                target = focused;\n            }\n\n            if (target) {\n                e.preventDefault();\n\n                if (focused[0] != target[0]) {\n                    that._trigger(NAVIGATE, target);\n                    that.current(target);\n                }\n            }\n        },\n\n        _keypress: function(e) {\n            var that = this;\n            var delay = 300;\n            var focusedNode = that.current().get(0);\n            var matchToFocus;\n            var key = e.key;\n            var isPrintable = key.length === 1;\n\n            if (!isPrintable) {\n                return;\n            }\n\n            if (!that._match) {\n                that._match = \"\";\n            }\n\n            that._match += key;\n            clearTimeout(that._matchTimer);\n            that._matchTimer = setTimeout(function() {\n                that._match = \"\";\n            }, delay);\n\n            matchToFocus = focusedNode &&\n                            that._matchNextByText(\n                                Array.prototype.indexOf.call(that.element.find(\".k-item\"),\n                                focusedNode), that._match\n                            );\n\n            if (!matchToFocus.length) {\n                matchToFocus = that._matchNextByText(-1, that._match);\n            }\n\n            if (matchToFocus.get(0) && matchToFocus.get(0) !== focusedNode) {\n                that._trigger(NAVIGATE, matchToFocus);\n                that.current(matchToFocus);\n            }\n        },\n\n        _matchNextByText: function(startIndex, text) {\n            var element = this.element;\n            var textNodes = element.find(\".k-in\").filter(function(i, element) {\n                return (i > startIndex &&\n                        $(element).is(\":visible\") &&\n                        $(element).text().toLowerCase().indexOf(text) === 0);\n            });\n\n            return textNodes.eq(0).closest(NODE);\n        },\n\n        _click: function(e) {\n            var that = this,\n                node = $(e.currentTarget),\n                contents = nodeContents(node.closest(NODE)),\n                href = node.attr(\"href\"),\n                shouldNavigate;\n\n            if (href) {\n                shouldNavigate = href == \"#\" || href.indexOf(\"#\" + this.element.id + \"-\") >= 0;\n            } else {\n                shouldNavigate = contents.length && !contents.children().length;\n            }\n\n            if (shouldNavigate) {\n                e.preventDefault();\n            }\n\n            if (!node.hasClass(\".k-selected\") && !that._trigger(SELECT, node)) {\n                that.select(node);\n            }\n        },\n\n        _wrapper: function() {\n            var that = this,\n                element = that.element,\n                wrapper, root,\n                wrapperClasses = \"k-treeview\";\n\n            if (element.is(\"ul\")) {\n                wrapper = element.wrap('<div />').parent();\n                root = element;\n            } else {\n                wrapper = element;\n                root = wrapper.children(\"ul\").eq(0);\n            }\n\n            that.wrapper = wrapper.addClass(wrapperClasses);\n            that.root = root;\n        },\n\n        _getSelectedNode: function() {\n            return this.element.find(\".k-selected\").closest(NODE);\n        },\n\n        _group: function(item) {\n            var that = this,\n                firstLevel = item.hasClass(KTREEVIEW),\n                group = {\n                    firstLevel: firstLevel,\n                    expanded: firstLevel || that._expanded(item)\n                },\n                groupElement = item.children(\"ul\");\n\n            groupElement\n                .addClass(that.templates.groupCssClass(group))\n                .css(\"display\", group.expanded ? \"\" : \"none\");\n\n            if (!firstLevel) {\n                groupElement.attr(\"role\", \"group\");\n            }\n\n            that._nodes(groupElement, group);\n        },\n\n        _nodes: function(groupElement, groupData) {\n            var that = this,\n                nodes = groupElement.children(\"li\"),\n                nodeData;\n\n            groupData = extend({ length: nodes.length }, groupData);\n\n            nodes.each(function(i, node) {\n                node = $(node);\n\n                nodeData = { index: i, expanded: that._expanded(node) };\n\n                updateNodeHtml(node);\n\n                that._updateNodeClasses(node, groupData, nodeData);\n\n                // iterate over child nodes\n                that._group(node);\n            });\n        },\n\n        _checkboxes: function() {\n            var options = this.options;\n            var checkboxes = options.checkboxes;\n            var defaultTemplate, checkbox;\n\n            if (checkboxes) {\n                checkbox = \"<input id='_#= item.uid #' aria-hidden='true' type='checkbox' tabindex='-1'\";\n\n\n                if (checkboxes.name) {\n                    checkbox += \" name='\" + checkboxes.name + \"'\";\n                }\n\n                checkbox += \" />\";\n\n                defaultTemplate = kendo.html.renderCheckBox($(checkbox), $.extend({}, options, {\n                    rounded: \"medium\"\n                }));\n                defaultTemplate = defaultTemplate.replace(/(<input[^/>]*)/, \"$1 #= (item.enabled === false) ? 'disabled' : '' # #= item.checked ? 'checked' : '' #\");\n\n                checkboxes = extend({\n                    template: defaultTemplate\n                }, options.checkboxes);\n\n                if (typeof checkboxes.template == STRING) {\n                    checkboxes.template = template(checkboxes.template);\n                }\n\n                options.checkboxes = checkboxes;\n            }\n        },\n\n        _updateNodeClasses: function(node, groupData, nodeData) {\n            var wrapper = node.children(\"div\"),\n                group = node.children(\"ul\"),\n                templates = this.templates;\n\n            if (node.hasClass(\"k-treeview\")) {\n                return;\n            }\n\n            nodeData = nodeData || {};\n            nodeData.expanded = typeof nodeData.expanded != UNDEFINED ? nodeData.expanded : this._expanded(node);\n            nodeData.index = typeof nodeData.index != UNDEFINED ? nodeData.index : node.index();\n            nodeData.enabled = typeof nodeData.enabled != UNDEFINED ? nodeData.enabled : !wrapper.children(\".k-in\").hasClass(\"k-disabled\");\n\n            groupData = groupData || {};\n            groupData.firstLevel = typeof groupData.firstLevel != UNDEFINED ? groupData.firstLevel : node.parent().parent().hasClass(KTREEVIEW);\n            groupData.length = typeof groupData.length != UNDEFINED ? groupData.length : node.parent().children().length;\n\n            // li\n            node.removeClass(\"k-first k-last\")\n                .addClass(templates.wrapperCssClass(groupData, nodeData));\n\n            // div\n            wrapper.removeClass(\"k-treeview-top k-treeview-mid k-treeview-bot\")\n                   .addClass(templates.cssClass(groupData, nodeData));\n\n            // span / a\n            var textWrap = wrapper.children(\".k-in\");\n            var isLink = textWrap[0] && textWrap[0].nodeName.toLowerCase() == \"a\";\n            textWrap.removeClass(\"k-in k-link k-disabled\")\n                .addClass(templates.textClass(nodeData, isLink));\n\n            // toggle button\n            if (group.length || node.attr(\"data-hasChildren\") == \"true\") {\n                wrapper.find(\".k-treeview-toggle > .k-icon\").removeClass(\"k-i-expand k-i-collapse\")\n                    .addClass(templates.toggleButtonClass(nodeData));\n\n                group.addClass(\"k-group k-treeview-group\");\n            }\n        },\n\n\n        _processNodes: function(nodes, callback) {\n            var that = this;\n            var items = that.element.find(nodes);\n            for (var i = 0; i < items.length; i++) {\n                callback.call(that, i, $(items[i]).closest(NODE));\n            }\n        },\n\n        dataItem: function(node) {\n            var uid = $(node).closest(NODE).attr(kendo.attr(\"uid\")),\n                dataSource = this.dataSource;\n\n            return dataSource && dataSource.getByUid(uid);\n        },\n\n        _dataItem: function(node) {\n            var uid = $(node).closest(NODE).attr(kendo.attr(\"uid\")),\n                dataSource = this.dataSource;\n\n            return dataSource && this._dataSourceUids[uid];\n        },\n\n        _insertNode: function(nodeData, index, parentNode, insertCallback, collapsed) {\n            var that = this,\n                group = subGroup(parentNode),\n                updatedGroupLength = group.children().length + 1,\n                childrenData,\n                groupData = {\n                    firstLevel: parentNode.hasClass(KTREEVIEW),\n                    expanded: !collapsed,\n                    length: updatedGroupLength\n                }, node, i, item, nodeHtml = \"\", firstChild, lastChild,\n                append = function(item, group) {\n                    item.appendTo(group);\n                };\n\n            for (i = 0; i < nodeData.length; i++) {\n                item = nodeData[i];\n\n                item.index = index + i;\n\n                nodeHtml += that._renderItem({\n                    group: groupData,\n                    item: item\n                });\n            }\n\n            node = $(nodeHtml);\n\n            if (!node.length) {\n                return;\n            }\n\n            that.angular(\"compile\", function() {\n                return {\n                    elements: node.get(),\n                    data: nodeData.map(function(item) {\n                        return { dataItem: item };\n                    })\n                };\n            });\n\n            if (!group.length) {\n                group = $(that._renderGroup({\n                    group: groupData\n                })).appendTo(parentNode);\n            }\n\n            insertCallback(node, group);\n\n            if (parentNode.hasClass(\"k-item\")) {\n                updateNodeHtml(parentNode);\n                that._updateNodeClasses(parentNode, groupData, { expanded: !collapsed });\n            }\n\n            firstChild = node.prev().first();\n            lastChild = node.next().last();\n\n            that._updateNodeClasses(firstChild, {}, { expanded: firstChild.attr(kendo.attr(\"expanded\")) == \"true\" });\n            that._updateNodeClasses(lastChild, {}, { expanded: lastChild.attr(kendo.attr(\"expanded\")) == \"true\" });\n\n            // render sub-nodes\n            for (i = 0; i < nodeData.length; i++) {\n                item = nodeData[i];\n\n                if (item.hasChildren) {\n                    childrenData = item.children.data();\n\n                    if (childrenData.length) {\n                        that._insertNode(childrenData, item.index, node.eq(i), append, !item.expanded);\n                    }\n                }\n            }\n\n            return node;\n        },\n\n        _updateNodes: function(items, field) {\n            var that = this;\n            var i, node, nodeWrapper, item, isChecked, isCollapsed;\n            var context = { treeview: that.options, item: item };\n            var render = field != \"expanded\" && field != \"checked\";\n\n            function setCheckedState(root, state) {\n                if (root.is(\".k-group\")) {\n                    root.find(\".k-item:not([aria-disabled])\").attr(ARIACHECKED, state);\n                }\n\n                root.find(\".k-checkbox-wrapper input[type=checkbox]:not([disabled])\")\n                    .prop(CHECKED, state)\n                    .data(INDETERMINATE, false)\n                    .prop(INDETERMINATE, false);\n            }\n\n            if (field == \"selected\") {\n                item = items[0];\n\n                node = that.findByUid(item.uid).find(\".k-in\").first();\n\n                node.removeClass(\"k-hover\")\n                    .toggleClass(\"k-selected\", item[field])\n                    .end();\n\n                if (item[field]) {\n                    that.current(node);\n                }\n\n                node.attr(ARIASELECTED, !!item[field]);\n            } else {\n                var elements = $.map(items, function(item) {\n                    return that.findByUid(item.uid).children(\"div\");\n                });\n\n                if (render) {\n                    that.angular(\"cleanup\", function() { return { elements: elements }; });\n                }\n\n                for (i = 0; i < items.length; i++) {\n                    context.item = item = items[i];\n                    nodeWrapper = elements[i];\n                    node = nodeWrapper.parent();\n\n                    if (render) {\n                        if (kendo.unbind) {\n                            kendo.unbind(nodeWrapper);\n                        }\n                        nodeWrapper.children(\".k-in\")\n                            .html(that.templates.itemContent(context));\n                    }\n\n                    if (field == CHECKED) {\n                        isChecked = item[field];\n\n                        setCheckedState(nodeWrapper, isChecked);\n\n                        node.attr(ARIACHECKED, isChecked);\n\n                        if (that.options.checkboxes.checkChildren) {\n                            setCheckedState(node.children(\".k-group\"), isChecked);\n\n                            that._setChecked(item.children, isChecked);\n\n                            that._bubbleIndeterminate(node);\n                        }\n                    } else if (field == \"expanded\") {\n                        that._toggle(node, item, item[field]);\n                    } else if (field == \"enabled\") {\n                        node.find(\".k-checkbox-wrapper input[type=checkbox]\").prop(\"disabled\", !item[field]);\n\n                        isCollapsed = !nodeContents(node).is(VISIBLE);\n\n                        node.removeAttr(ARIADISABLED);\n\n                        if (!item[field]) {\n                            if (item.selected) {\n                                item.set(\"selected\", false);\n                            }\n\n                            if (item.expanded) {\n                                item.set(\"expanded\", false);\n                            }\n\n                            isCollapsed = true;\n                            node.attr(ARIASELECTED, false)\n                                .attr(ARIADISABLED, true);\n                        }\n\n                        that._updateNodeClasses(node, {}, { enabled: item[field], expanded: !isCollapsed });\n                    }\n\n                    if (nodeWrapper.length) {\n                        this.trigger(\"itemChange\", { item: nodeWrapper, data: item, ns: ui });\n                    }\n                }\n\n                if (render) {\n                    that.angular(\"compile\", function() {\n                        return {\n                            elements: elements,\n                            data: $.map(items, function(item) {\n                                return [{ dataItem: item }];\n                            })\n                        };\n                    });\n                }\n            }\n        },\n\n        _appendItems: function(index, items, parentNode) {\n            var group = subGroup(parentNode);\n            var children = group.children();\n            var collapsed = !this._expanded(parentNode);\n\n            if (this.element === parentNode) {\n                var dataItems = this.dataSource.data();\n                var viewItems = this.dataSource.view();\n                var rootItems = viewItems.length < dataItems.length ? viewItems : dataItems;\n                index = rootItems.indexOf(items[0]);\n            } else if (items.length) {\n                index = items[0].parent().indexOf(items[0]);\n            }\n\n            if (typeof index == UNDEFINED) {\n                index = children.length;\n            }\n\n            this._insertNode(items, index, parentNode, function(item, group) {\n                // insert node into DOM\n                if (index >= children.length) {\n                    item.appendTo(group);\n                } else {\n                    item.insertBefore(children.eq(index));\n                }\n            }, collapsed);\n\n            if (!collapsed) {\n                this._updateNodeClasses(parentNode, {}, { expanded: !collapsed });\n                subGroup(parentNode).css(\"display\", \"block\");\n            }\n        },\n\n        _refreshChildren: function(parentNode, items, index) {\n            var i, children, child;\n            var options = this.options;\n            var loadOnDemand = options.loadOnDemand;\n            var checkChildren = options.checkboxes && options.checkboxes.checkChildren;\n\n            subGroup(parentNode).empty();\n\n            if (!items.length) {\n                updateNodeHtml(parentNode);\n            } else {\n                this._appendItems(index, items, parentNode);\n\n                children = subGroup(parentNode).children();\n\n                if (loadOnDemand && checkChildren) {\n                    this._bubbleIndeterminate(children.last());\n                }\n\n                for (i = 0; i < children.length; i++) {\n                    child = children.eq(i);\n                    this.trigger(\"itemChange\", {\n                        item: child.children(\"div\"),\n                        data: items[i],\n                        ns: ui\n                    });\n                }\n            }\n        },\n\n        _refreshRoot: function(items) {\n            var groupHtml = this._renderGroup({\n                    items: items,\n                    group: {\n                        firstLevel: true,\n                        expanded: true\n                    }\n                });\n\n            if (this.root.length && this.root[0].parentElement) {\n                this._angularItems(\"cleanup\");\n\n                var group = $(groupHtml);\n\n                this.root\n                    .attr(\"class\", group.attr(\"class\"))\n                    .html(group.html());\n            } else {\n                this.root = this.wrapper.html(groupHtml).children(\"ul\");\n            }\n\n            var elements = this.root.children(\".k-item\");\n            for (var i = 0; i < items.length; i++) {\n                this.trigger(\"itemChange\", {\n                    item: elements.eq(i),\n                    data: items[i],\n                    ns: ui\n                });\n            }\n            this._angularItems(\"compile\");\n        },\n\n        refresh: function(e) {\n            var node = e.node;\n            var action = e.action;\n            var items = e.items;\n            var parentNode = this.wrapper;\n            var options = this.options;\n            var loadOnDemand = options.loadOnDemand;\n            var checkChildren = options.checkboxes && options.checkboxes.checkChildren;\n            var i;\n\n            if (this._skip) {\n                return;\n            }\n\n            for (i = 0; i < items.length; i++) {\n                this._dataSourceUids[items[i].uid] = items[i];\n            }\n\n            if (e.field) {\n                if (!items[0] || !items[0].level) {\n                    return;\n                }\n\n                return this._updateNodes(items, e.field);\n            }\n\n            if (node) {\n                parentNode = this.findByUid(node.uid);\n                this._progress(parentNode, false);\n            }\n\n            if (checkChildren && action != \"remove\") {\n                var bubble = false;\n\n                for (i = 0; i < items.length; i++) {\n                    if (\"checked\" in items[i]) {\n                        bubble = true;\n                        break;\n                    }\n                }\n\n                if (!bubble && node && node.checked) {\n                    for (i = 0; i < items.length; i++) {\n                        items[i].checked = true;\n                    }\n                }\n            }\n\n            if (action == \"add\") {\n                this._appendItems(e.index, items, parentNode);\n            } else if (action == \"remove\") {\n                this._remove(this.findByUid(items[0].uid), false);\n            } else if (action == \"itemchange\") {\n                this._updateNodes(items);\n            } else if (action == \"itemloaded\") {\n                this._refreshChildren(parentNode, items, e.index);\n            } else {\n                this._refreshRoot(items);\n                this.element.attr(\"aria-busy\", false);\n            }\n\n            if (action != \"remove\") {\n                for (i = 0; i < items.length; i++) {\n                    if (!loadOnDemand || items[i].expanded || items[i]._loaded) {\n                        items[i].load();\n                    }\n                }\n            }\n\n            this.wrapper.find(\">ul\").attr(\"role\", \"none\");\n\n            this._ariaItems(this.wrapper.find(\">.k-group>.k-item\"), 1);\n\n            this.trigger(DATABOUND, { node: node ? parentNode : undefined });\n            if (this.dataSource.filter() && this.options.checkboxes.checkChildren) {\n                this.updateIndeterminate(parentNode);\n            }\n        },\n\n        _ariaItems: function(items, level) {\n            var that = this;\n\n            items.attr({\n                \"aria-setsize\": items.length,\n                \"aria-level\": level\n            });\n\n            items.each(function(i, item) {\n                var nested = $(item).find(\">.k-group>.k-item\");\n\n                if (nested.length > 0) {\n                    that._ariaItems(nested, level + 1);\n                }\n            });\n        },\n\n        _error: function(e) {\n            var node = e.node && this.findByUid(e.node.uid);\n            var retryHtml = this.templates.retry({ messages: this.options.messages });\n\n            if (node) {\n                this._progress(node, false);\n                this._expanded(node, false);\n                nodeIcon(node).addClass(\"k-i-reload\");\n                e.node.loaded(false);\n            } else {\n                this._progress(false);\n                this.dataSource.data([]);\n                this.element.html(retryHtml);\n            }\n        },\n\n        _retryRequest: function(e) {\n            e.preventDefault();\n\n            this.dataSource.fetch(this._attemptLoadCompleted.bind(this));\n        },\n\n        expand: function(nodes) {\n            this._processNodes(nodes, function(index, item) {\n                this.toggle(item, true);\n            });\n        },\n\n        collapse: function(nodes) {\n            this._processNodes(nodes, function(index, item) {\n                this.toggle(item, false);\n            });\n        },\n\n        enable: function(nodes, enable) {\n            if (typeof nodes === \"boolean\") {\n                enable = nodes;\n                nodes = this.items();\n            } else {\n                enable = arguments.length == 2 ? !!enable : true;\n            }\n\n            this._processNodes(nodes, function(index, item) {\n                this.dataItem(item).set(\"enabled\", enable);\n            });\n        },\n\n        current: function(node) {\n            var that = this,\n                current = that._current,\n                element = that.element;\n\n            if (arguments.length > 0 && node && node.length) {\n                if (current) {\n                    current.find(\".k-in\").first().removeClass(\"k-focus\");\n                }\n\n                current = that._current = $(node, element).closest(NODE);\n                current.find(\".k-in\").first().addClass(\"k-focus\");\n                that._updateActiveDescendant();\n\n                return;\n            }\n\n            if (!current) {\n                current = that._nextVisible($());\n            }\n\n            return current;\n        },\n\n        _updateActiveDescendant: function() {\n            var current = this._current,\n                id = current[0].id || this._ariaId,\n                prev = this.element.find(\"#\" + this._ariaId);\n\n            if (prev.length > 0) {\n                prev.removeAttr(\"id\");\n            }\n\n            this.wrapper.removeAttr(\"aria-activedescendant\");\n            current.attr(\"id\", id);\n            this.wrapper.attr(\"aria-activedescendant\", id);\n        },\n\n        select: function(node) {\n            var that = this,\n                element = that.element;\n\n            if (!arguments.length) {\n                return element.find(\".k-selected\").closest(NODE);\n            }\n\n            node = $(node, element).closest(NODE);\n\n            element.find(\".k-selected\").each(function() {\n                var dataItem = that.dataItem(this);\n                if (dataItem) {\n                    dataItem.set(\"selected\", false);\n                    delete dataItem.selected;\n                } else {\n                    $(this).removeClass(\"k-selected\");\n                }\n            });\n\n            if (node.length) {\n                that.dataItem(node).set(\"selected\", true);\n                that._clickTarget = node;\n            }\n\n            that.trigger(CHANGE);\n        },\n\n        _toggle: function(node, dataItem, expand) {\n            var options = this.options;\n            var contents = nodeContents(node);\n            var direction = expand ? \"expand\" : \"collapse\";\n            var loaded;\n\n            if (contents.data(\"animating\")) {\n                return;\n            }\n\n            loaded = dataItem && dataItem.loaded();\n\n            if (expand && !loaded) {\n                if (options.loadOnDemand) {\n                    this._progress(node, true);\n                }\n\n                contents.remove();\n                dataItem.load();\n            } else {\n                this._updateNodeClasses(node, {}, { expanded: expand });\n\n                if (!expand) {\n                    contents.css(\"height\", contents.height()).css(\"height\");\n                }\n\n                contents\n                    .kendoStop(true, true)\n                    .kendoAnimate(extend(\n                        { reset: true },\n                        options.animation[direction],\n                        { complete: function() {\n                            if (expand) {\n                                contents.css(\"height\", \"\");\n                            }\n                        } }\n                    ));\n            }\n\n        },\n\n        toggle: function(node, expand) {\n            node = $(node);\n\n            if (!nodeIcon(node).is(\".k-i-expand, .k-i-collapse\")) {\n                return;\n            }\n\n            if (arguments.length == 1) {\n                expand = !this._expanded(node);\n            }\n\n            this._expanded(node, expand);\n        },\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            that.wrapper.off(NS);\n            that.wrapper.find(\".k-checkbox-wrapper :checkbox\").off(NS);\n            that._clickHandler = null;\n\n            that._unbindDataSource();\n\n            if (that.dragging) {\n                that.dragging.destroy();\n            }\n\n            that._dataSourceUids = {};\n\n            kendo.destroy(that.element);\n\n            that.root = that.wrapper = that.element = null;\n        },\n\n        _expanded: function(node, value, force) {\n            var expandedAttr = kendo.attr(\"expanded\");\n            var dataItem;\n            var expanded = value;\n            var direction = expanded ? \"expand\" : \"collapse\";\n\n            if (arguments.length == 1) {\n                dataItem = this._dataItem(node);\n                return node.attr(expandedAttr) === \"true\" || (dataItem && dataItem.expanded);\n            }\n\n            dataItem = this.dataItem(node);\n\n            if (nodeContents(node).data(\"animating\")) {\n                return;\n            }\n\n            if (force || !this._trigger(direction, node)) {\n                if (expanded) {\n                    node.attr(expandedAttr, \"true\");\n                    node.attr(ARIAEXPANDED, \"true\");\n                } else {\n                    node.removeAttr(expandedAttr);\n                    node.attr(ARIAEXPANDED, \"false\");\n                }\n\n                if (dataItem) {\n                    dataItem.set(\"expanded\", expanded);\n                    // necessary when expanding an item yields an error and the item is not expanded as a result\n                    expanded = dataItem.expanded;\n                }\n            }\n        },\n\n        _progress: function(node, showProgress) {\n            var element = this.element;\n            var loadingText = this.templates.loading({ messages: this.options.messages });\n\n            if (arguments.length == 1) {\n                showProgress = node;\n\n                if (showProgress) {\n                    element.html(loadingText);\n                } else {\n                    element.empty();\n                }\n\n                element.attr(\"aria-busy\", showProgress);\n            } else {\n                nodeIcon(node).toggleClass(\"k-i-loading\", showProgress).removeClass(\"k-i-reload\");\n                node.attr(\"aria-busy\", showProgress);\n            }\n        },\n\n        text: function(node, text) {\n            var dataItem = this.dataItem(node),\n                fieldBindings = this.options[bindings.text],\n                level = dataItem.level(),\n                length = fieldBindings.length,\n                field = fieldBindings[Math.min(level, length - 1)];\n\n            if (text) {\n                dataItem.set(field, text);\n            } else {\n                return dataItem[field];\n            }\n        },\n\n        _objectOrSelf: function(node) {\n            return $(node).closest(\"[data-role=treeview]\").data(\"kendoTreeView\") || this;\n        },\n\n        _dataSourceMove: function(nodeData, group, parentNode, callback) {\n            var referenceDataItem,\n                destTreeview = this._objectOrSelf(parentNode || group),\n                destDataSource = destTreeview.dataSource;\n            var loadPromise = $.Deferred().resolve().promise();\n\n            if (parentNode && parentNode[0] != destTreeview.element[0]) {\n                referenceDataItem = destTreeview.dataItem(parentNode);\n\n                if (!referenceDataItem.loaded()) {\n                    destTreeview._progress(parentNode, true);\n                    loadPromise = referenceDataItem.load();\n                }\n\n                if (parentNode != this.root) {\n                    destDataSource = referenceDataItem.children;\n\n                    if (!destDataSource || !(destDataSource instanceof HierarchicalDataSource)) {\n                        referenceDataItem._initChildren();\n                        referenceDataItem.loaded(true);\n                        destDataSource = referenceDataItem.children;\n                    }\n                }\n            }\n\n            nodeData = this._toObservableData(nodeData);\n\n            return callback.call(destTreeview, destDataSource, nodeData, loadPromise);\n        },\n\n        _toObservableData: function(node) {\n            var dataItem = node, dataSource, uid;\n\n            if (isJQueryInstance(node) || isDomElement(node)) {\n                dataSource = this._objectOrSelf(node).dataSource;\n                uid = $(node).attr(kendo.attr(\"uid\"));\n                dataItem = dataSource.getByUid(uid);\n\n                if (dataItem) {\n                    dataItem = dataSource.remove(dataItem);\n                }\n            }\n\n            return dataItem;\n        },\n\n        _insert: function(data, model, index) {\n            if (!(model instanceof kendo.data.ObservableArray)) {\n                if (!isArray(model)) {\n                    model = [model];\n                }\n            } else {\n                // items will be converted to new Node instances\n                model = model.toJSON();\n            }\n\n            var parentNode = data.parent();\n\n            if (parentNode && parentNode._initChildren) {\n                parentNode.hasChildren = true;\n                parentNode._initChildren();\n            }\n\n            data.splice.apply(data, [ index, 0 ].concat(model));\n\n            return this.findByUid(data[index].uid);\n        },\n\n        insertAfter: insertAction(1),\n\n        insertBefore: insertAction(0),\n\n        append: function(nodeData, parentNode, success) {\n            var group = this.root;\n\n            if (parentNode && nodeData instanceof jQuery && parentNode[0] === nodeData[0]) {\n                return;\n            }\n\n            parentNode = parentNode && parentNode.length ? parentNode : null;\n\n            if (parentNode) {\n                group = subGroup(parentNode);\n            }\n\n            return this._dataSourceMove(nodeData, group, parentNode, function(dataSource, model, loadModel) {\n                var inserted;\n                var that = this;\n\n                function add() {\n                    if (parentNode) {\n                        that._expanded(parentNode, true, true);\n                    }\n\n                    var data = dataSource.data(),\n                        index = Math.max(data.length, 0);\n\n                    return that._insert(data, model, index);\n                }\n\n                loadModel.done(function() {\n                    inserted = add();\n                    success = success || $.noop;\n                    success(inserted);\n                });\n\n                return inserted || null;\n            });\n        },\n\n        _remove: function(node, keepData) {\n            var that = this,\n                parentNode,\n                prevSibling, nextSibling;\n\n            node = $(node, that.element);\n\n            if (node.attr(\"id\") === that.element.attr(\"aria-activedescendant\")) {\n                that.element.removeAttr(\"aria-activedescendant\");\n            }\n\n            this.angular(\"cleanup\", function() {\n                return { elements: node.get() };\n            });\n\n            parentNode = node.parent().parent();\n            prevSibling = node.prev();\n            nextSibling = node.next();\n\n            node[keepData ? \"detach\" : \"remove\"]();\n\n            if (parentNode.hasClass(\"k-item\")) {\n                updateNodeHtml(parentNode);\n                that._updateNodeClasses(parentNode);\n            }\n\n            that._updateNodeClasses(prevSibling);\n            that._updateNodeClasses(nextSibling);\n\n            return node;\n        },\n\n        remove: function(node) {\n            var dataItem = this.dataItem(node);\n            if (dataItem) {\n                this.dataSource.remove(dataItem);\n            }\n        },\n\n        detach: function(node) {\n            return this._remove(node, true);\n        },\n\n        findByText: function(text) {\n            return $(this.element).find(\".k-in\").filter(function(i, element) {\n                return $(element).text() == text;\n            }).closest(NODE);\n        },\n\n        findByUid: function(uid) {\n            var items = this.element.find(\".k-item\");\n            var uidAttr = kendo.attr(\"uid\");\n            var result;\n\n            for (var i = 0; i < items.length; i++) {\n                if (items[i].getAttribute(uidAttr) == uid) {\n                    result = items[i];\n                    break;\n                }\n            }\n\n            return $(result);\n        },\n\n        expandPath: function(path, complete) {\n            var treeview = this;\n            var nodeIds = path.slice(0);\n            var callback = complete || $.noop;\n\n            function proceed() {\n                nodeIds.shift();\n\n                if (nodeIds.length) {\n                    expand(nodeIds[0]).then(proceed);\n                } else {\n                    callback.call(treeview);\n                }\n            }\n\n            function expand(id) {\n                var result = $.Deferred();\n                var node = treeview.dataSource.get(id);\n                var expandedAttr = kendo.attr(\"expanded\");\n                var nodeElement;\n\n                if (node) {\n                    nodeElement = treeview.findByUid(node.uid);\n\n                    if (node.loaded()) {\n                        node.set(\"expanded\", true);\n                        nodeElement.attr(expandedAttr, true);\n                        nodeElement.attr(ARIAEXPANDED, true);\n                        result.resolve();\n                    } else {\n                        // manually show progress of the node\n                        // should be moved to `refresh`\n                        // if the datasource starts triggering a `requestStart` event for nodes\n                        treeview._progress(nodeElement, true);\n\n                        node.load().then(function() {\n                            node.set(\"expanded\", true);\n                            nodeElement.attr(expandedAttr, true);\n                            nodeElement.attr(ARIAEXPANDED, true);\n                            result.resolve();\n                        });\n                    }\n                } else {\n                    result.resolve();\n                }\n\n                return result.promise();\n            }\n\n            // expand async nodes\n            expand(nodeIds[0]).then(proceed);\n        },\n\n        _parentIds: function(node) {\n            var parent = node && node.parentNode();\n            var parents = [];\n            while (parent && parent.parentNode) {\n                parents.unshift(parent.id);\n                parent = parent.parentNode();\n            }\n\n            return parents;\n        },\n\n        expandTo: function(node) {\n            if (!(node instanceof kendo.data.Node)) {\n                node = this.dataSource.get(node);\n            }\n\n            var parents = this._parentIds(node);\n\n            this.expandPath(parents);\n        },\n\n        _renderItem: function(options) {\n            if (!options.group) {\n                options.group = {};\n            }\n\n            options.treeview = this.options;\n\n            options.r = this.templates;\n\n            return this.templates.item(options);\n        },\n\n        _renderGroup: function(options) {\n            var that = this;\n\n            options.renderItems = function(options) {\n                    var html = \"\",\n                        i = 0,\n                        items = options.items,\n                        len = items ? items.length : 0,\n                        group = options.group;\n\n                    group.length = len;\n\n                    for (; i < len; i++) {\n                        options.group = group;\n                        options.item = items[i];\n                        options.item.index = i;\n                        html += that._renderItem(options);\n                    }\n\n                    return html;\n                };\n\n            options.r = that.templates;\n\n            return that.templates.group(options);\n        }\n    });\n\n    kendo.cssProperties.registerPrefix(\"TreeView\", \"k-treeview-\");\n\n    ui.plugin(TreeView);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","description","depends","features","$","window","kendo","jQuery","undefined","ui","data","extend","template","isArray","Array","Widget","HierarchicalDataSource","keys","NS","TEMP_NS","SELECT","CHECK","NAVIGATE","EXPAND","CHANGE","ERROR","CHECKED","INDETERMINATE","COLLAPSE","DRAGSTART","DRAG","DROP","DRAGEND","DATABOUND","ITEMSLOADED","LOADCOMPLETED","REQUESTEND","CLICK","KENDOKEYDOWN","UNDEFINED","KSTATEHOVER","KTREEVIEW","VISIBLE","NODE","STRING","ARIACHECKED","ARIASELECTED","ARIADISABLED","ARIAEXPANDED","DISABLED","TreeView","subGroup","nodeContents","nodeIcon","spriteRe","bindings","text","url","spriteCssClass","imageUrl","isJQueryInstance","obj","isDomElement","o","HTMLElement","nodeType","nodeName","contentChild","filter","node","result","children","length","templateNoWith","code","useWithBlock","checkboxes","find","insertAction","indexOffset","nodeData","referenceNode","closest","group","parent","parentNode","is","this","_dataSourceMove","dataSource","model","referenceItem","dataItem","referenceNodeIndex","indexOf","index","_insert","moveContents","container","tmp","toLowerCase","nextSibling","nodeValue","trim","test","className","insertBefore","firstChild","appendChild","updateNodeHtml","wrapper","toggleButton","checkbox","innerWrapper","hasClass","prependTo","remove","appendTo","append","eq","addClass","DataBoundWidget","init","element","options","that","inferred","hasDataSource","list","loadOnDemand","prototype","call","_dataSourceUids","_animation","_accessors","_templates","_wrapper","root","_group","_applyCssClasses","_tabindex","attr","_dataSource","_attachEvents","_dragging","autoBind","_progress","fetch","_attemptLoadCompleted","bind","_syncHtmlAndDataSource","checkChildren","updateIndeterminate","_ariaId","format","guid","notify","clickableItems","MOUSEENTER","_clickHandler","_click","on","e","preventDefault","removeClass","_toggleButtonClick","_keydown","_keypress","_focus","_blur","_mousedown","_checkboxChange","_retryRequest","target","focus","view","uidAttr","expandedAttr","checkboxesEnabled","items","i","item","uid","itemCheckbox","expanded","checked","prop","next","animationOptions","animation","hasCollapseAnimation","collapse","expand","reverse","effects","hide","enabled","dragAndDrop","dragging","widget","HierarchicalDragAndDrop","reorderable","$angular","autoScroll","allowedContainers","itemSelector","hintText","_hintText","contains","source","destination","dropHintContainer","itemFromTarget","content","first","last","dropPositionFrom","dropHint","prevAll","dragstart","trigger","sourceNode","drag","originalEvent","dropTarget","pageY","pageX","statusClass","status","setStatusClass","setStatus","drop","navigationTarget","_tempPreventNavigation","destinationNode","valid","setValid","state","dropPosition","position","dragend","triggerDragEnd","current","insertAfter","destroy","ev","off","templates","dragClue","treeview","fieldAccessor","_fieldAccessor","_checkboxes","setAttributes","attributes","hasOwnProperty","wrapperCssClass","firstLevel","cssClass","groupLength","textClass","isLink","selected","toggleButtonClass","groupAttributes","groupCssClass","itemContent","itemElement","loading","retry","setDataSource","one","_bindDataSource","_refreshHandler","refresh","_errorHandler","_error","_loadCompletedHandler","_loadCompleted","_requestEndHandler","_dsRequestEnd","_loadedNodes","setTimeout","type","_loadCompletedFired","concat","nodes","hasChildren","_unbindDataSource","unbind","silentRead","recursiveRead","_initChildren","fields","field","create","events","duration","messages","requestFailed","dataTextField","size","textField","fieldName","fieldBindings","count","map","x","expr","join","setOptions","fn","_trigger","eventName","_setChecked","datasource","value","isFunction","_setCheckedValue","_setIndeterminate","siblings","all","indeterminate","subnodes","_bubbleIndeterminate","skipDownward","_skip","set","isChecked","_preventChange","currentTarget","toggle","browser","support","msie","edge","_clickTarget","_focusable","select","clickTarget","touch","_nextVisible","scrollContainer","containers","offsets","documentElement","document","scrollHeight","clientHeight","push","scrollTop","focusElement","_enabled","wrapperRe","itemRe","skipSelf","_expanded","nextParent","_previousVisible","lastChild","prev","key","keyCode","focused","rtl","isRtl","RIGHT","LEFT","DOWN","UP","HOME","END","ENTER","SPACEBAR","delay","focusedNode","get","matchToFocus","isPrintable","_match","clearTimeout","_matchTimer","_matchNextByText","startIndex","textNodes","contents","href","shouldNavigate","wrapperClasses","wrap","_getSelectedNode","groupElement","css","_nodes","groupData","each","_updateNodeClasses","defaultTemplate","html","renderCheckBox","rounded","replace","textWrap","_processNodes","callback","getByUid","_dataItem","_insertNode","insertCallback","collapsed","updatedGroupLength","childrenData","nodeHtml","_renderItem","angular","elements","_renderGroup","_updateNodes","nodeWrapper","isCollapsed","context","render","setCheckedState","findByUid","toggleClass","end","_toggle","removeAttr","ns","_appendItems","dataItems","viewItems","rootItems","_refreshChildren","child","empty","_refreshRoot","groupHtml","parentElement","_angularItems","action","level","bubble","_remove","_loaded","load","_ariaItems","aria-setsize","aria-level","nested","retryHtml","loaded","enable","arguments","_current","_updateActiveDescendant","direction","height","kendoStop","kendoAnimate","reset","complete","force","showProgress","loadingText","Math","min","_objectOrSelf","referenceDataItem","destTreeview","destDataSource","loadPromise","Deferred","resolve","promise","_toObservableData","ObservableArray","toJSON","splice","apply","success","loadModel","inserted","add","max","done","noop","keepData","prevSibling","detach","findByText","getAttribute","expandPath","path","nodeIds","slice","proceed","shift","then","nodeElement","_parentIds","parents","unshift","expandTo","Node","r","renderItems","len","cssProperties","registerPrefix","plugin","amd","a1","a2","a3"],"mappings":"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"}